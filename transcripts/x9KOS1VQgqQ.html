<p class="speaker"><span class="line" data-starttime="1"><span class="speakerName">Mike West</span>: Good afternoon. </span> <span class="line" data-startTime="4">I hope you all had </span><span class="line" data-startTime="4">a good lunch. </span> <span class="line" data-startTime="5">I hope it was as tasty </span><span class="line" data-startTime="5">as mine was. </span> <span class="line" data-startTime="8">I'm glad you all have shown </span><span class="line" data-startTime="8">up for a talk like this. </span> <span class="line" data-startTime="10">It's relatively specific. </span> <span class="line" data-startTime="12">And I'm hoping that means that </span><span class="line" data-startTime="12">all of you are very interested </span><span class="line" data-startTime="15">in the topic and will have some </span><span class="line" data-startTime="15">really good questions </span><span class="line" data-startTime="17">afterwards. </span> <span class="line" data-startTime="17">This will be about 45 minutes. </span> <span class="line" data-startTime="19">And then I'm going to try to </span><span class="line" data-startTime="19">leave a good amount of time at </span><span class="line" data-startTime="22">the end for questions, because </span><span class="line" data-startTime="22">there are a lot of things </span><span class="line" data-startTime="24">going on in the extension </span><span class="line" data-startTime="24">space. </span> <span class="line" data-startTime="26">There are a lot of things that I </span><span class="line" data-startTime="26">think are really interesting </span><span class="line" data-startTime="28">and that are going, I think, </span><span class="line" data-startTime="28">to have a little bit of an </span><span class="line" data-startTime="30">impact on the way </span><span class="line" data-startTime="30">that you develop </span><span class="line" data-startTime="32">extensions going forward. </span></p>

<p><span class="line" data-startTime="34">But before we get too much into </span><span class="line" data-startTime="34">that, extensions are kind </span><span class="line" data-startTime="36">of awesome, aren't they? </span><span class="line" data-startTime="37">Extensions are great because </span><span class="line" data-startTime="37">they allow you to customize </span><span class="line" data-startTime="40">the browser in ways that we </span><span class="line" data-startTime="40">simply couldn't do when we </span><span class="line" data-startTime="45">distribute the browser </span><span class="line" data-startTime="45">to a broad audience. </span> <span class="line" data-startTime="47">Extensions give you the ability </span><span class="line" data-startTime="47">to personalize the way </span><span class="line" data-startTime="50">you interact not only </span><span class="line" data-startTime="50">with the web but </span><span class="line" data-startTime="52">with the browser itself. </span> <span class="line" data-startTime="53">A good example of this is me </span><span class="line" data-startTime="53">building this presentation. </span> <span class="line" data-startTime="57">I used an extension called Clear </span><span class="line" data-startTime="57">Cache by a guy named </span><span class="line" data-startTime="61">Benjamin Bojko. </span> <span class="line" data-startTime="63">This is an extension that's </span><span class="line" data-startTime="63">really quite excellent. </span> <span class="line" data-startTime="65">And it's really, really good </span><span class="line" data-startTime="65">for web developers because </span><span class="line" data-startTime="67">what it does is, you click a </span><span class="line" data-startTime="67">button, it clears your cache, </span><span class="line" data-startTime="70">and then reloads the page that </span><span class="line" data-startTime="70">you're currently looking at. </span> <span class="line" data-startTime="73">This is really, really helpful, </span><span class="line" data-startTime="74">astoundingly so, actually. </span></p>

<p><span class="line" data-startTime="76">And what's really interesting </span><span class="line" data-startTime="76">about this is that it actually </span><span class="line" data-startTime="79">has powers above and beyond </span><span class="line" data-startTime="79">what we would </span><span class="line" data-startTime="81">give to a normal website. </span> <span class="line" data-startTime="82">It's able to actually dive deep </span><span class="line" data-startTime="82">down into the browser and </span><span class="line" data-startTime="85">use some APIs in order </span><span class="line" data-startTime="85">to remove data. </span> <span class="line" data-startTime="88">Or, if it was a different </span><span class="line" data-startTime="88">extension, to change settings </span><span class="line" data-startTime="90">or something along </span><span class="line" data-startTime="90">those lines. </span> <span class="line" data-startTime="92">I think we'd all be pretty </span><span class="line" data-startTime="92">surprised if we went to a </span><span class="line" data-startTime="94">website and it suddenly cleared </span><span class="line" data-startTime="94">my browsing data. </span></p>

<p><span class="line" data-startTime="96">That would be a bit odd. </span> <span class="line" data-startTime="99">What's interesting about these, </span><span class="line" data-startTime="99">however, is that we see </span><span class="line" data-startTime="102">a little bit of bloat in </span><span class="line" data-startTime="102">the extension space. </span> <span class="line" data-startTime="104">We see a little bit of bloat </span><span class="line" data-startTime="104">in a couple of ways, two </span><span class="line" data-startTime="107">distinct ways. </span> <span class="line" data-startTime="108">First, we see extensions that </span><span class="line" data-startTime="108">are actually requesting more </span><span class="line" data-startTime="111">permissions than they actually </span><span class="line" data-startTime="111">need to do their job. </span> <span class="line" data-startTime="114">If we look at Clear Cache, for </span><span class="line" data-startTime="114">instance, we see that even </span><span class="line" data-startTime="117">though it's only clearing my </span><span class="line" data-startTime="117">browsing data, it actually </span><span class="line" data-startTime="119">requests host permissions </span><span class="line" data-startTime="119">to the entire internet. </span> <span class="line" data-startTime="123">It does this for a very </span><span class="line" data-startTime="123">good reason actually. </span> <span class="line" data-startTime="125">It does it because it wants </span><span class="line" data-startTime="125">to clear cookies on an </span><span class="line" data-startTime="128">origin-specific basis. </span> <span class="line" data-startTime="130">We don't yet have an API that </span><span class="line" data-startTime="130">allows you to do that, which </span><span class="line" data-startTime="132">means that the only mechanism </span><span class="line" data-startTime="132">that the developer actually </span><span class="line" data-startTime="135">has at this point is to request </span><span class="line" data-startTime="135">a large and dangerous </span><span class="line" data-startTime="139">permission in order to do a very </span><span class="line" data-startTime="139">small and focused task. </span></p>

<p><span class="line" data-startTime="143">This is something that we </span><span class="line" data-startTime="143">definitely want to fix. </span> <span class="line" data-startTime="145">And there are a lot of things </span><span class="line" data-startTime="145">in the extension system that </span><span class="line" data-startTime="147">we think we can fix </span><span class="line" data-startTime="147">along these lines. </span> <span class="line" data-startTime="150">The other area that we see </span><span class="line" data-startTime="150">bloated with regard to </span><span class="line" data-startTime="153">extensions is the resource usage </span><span class="line" data-startTime="153">that extensions actually </span><span class="line" data-startTime="158">use when they're active </span><span class="line" data-startTime="158">on your computer. </span> <span class="line" data-startTime="162">We'll talk a little bit about </span><span class="line" data-startTime="162">how we're going to try to </span><span class="line" data-startTime="165">address both of these issues </span><span class="line" data-startTime="165">in a little bit. </span> <span class="line" data-startTime="168">One last thing we see in the </span><span class="line" data-startTime="168">extension ecosystem is the </span><span class="line" data-startTime="173">fact that while extensions </span><span class="line" data-startTime="173">themselves are quite secure &mdash; </span><span class="line" data-startTime="176">and we think we have a really </span><span class="line" data-startTime="176">good handle on dealing with </span><span class="line" data-startTime="179">explicitly malware </span><span class="line" data-startTime="179">extensions &mdash; </span><span class="line" data-startTime="182">we see problems with regard </span><span class="line" data-startTime="182">to extensions that </span><span class="line" data-startTime="184">are benign but buggy. </span> <span class="line" data-startTime="186">This means that the extension </span><span class="line" data-startTime="186">itself is doing things that </span><span class="line" data-startTime="189">are quite important. </span> <span class="line" data-startTime="190">And it's doing things in a way </span><span class="line" data-startTime="190">that simply opens up a hole or </span><span class="line" data-startTime="194">two within the extension </span><span class="line" data-startTime="194">process itself. </span></p>

<p><span class="line" data-startTime="198">This is a bit problematic </span><span class="line" data-startTime="198">because, as we said earlier, </span><span class="line" data-startTime="201">extensions have permissions that </span><span class="line" data-startTime="201">go well above and beyond </span><span class="line" data-startTime="204">what's available on </span><span class="line" data-startTime="204">the open web. </span> <span class="line" data-startTime="206">This makes extensions a </span><span class="line" data-startTime="206">juicy target indeed. </span> <span class="line" data-startTime="209">We'll talk a little bit about </span><span class="line" data-startTime="209">how we're going to address </span><span class="line" data-startTime="211">that with the concept of </span><span class="line" data-startTime="211">Manifest Version 2. </span> <span class="line" data-startTime="215">Manifest Version 2 is something </span><span class="line" data-startTime="215">that was introduced </span><span class="line" data-startTime="217">in Chrome 18 as the first set </span><span class="line" data-startTime="217">of breaking changes in the </span><span class="line" data-startTime="221">extension system. </span> <span class="line" data-startTime="222">Manifest Version 2 basically </span><span class="line" data-startTime="222">is exactly the same as </span><span class="line" data-startTime="225">Manifest Version 1 with a little </span><span class="line" data-startTime="225">bit of extra stuff </span><span class="line" data-startTime="228">layered on top, a few </span><span class="line" data-startTime="228">restrictions but also a few </span><span class="line" data-startTime="230">new abilities. </span></p>

<p><span class="line" data-startTime="231">We'll talk about those now. </span> <span class="line" data-startTime="235">The attacks that I talked </span><span class="line" data-startTime="235">about earlier would look </span><span class="line" data-startTime="237">something like this. </span> <span class="line" data-startTime="238">And these are the sorts </span><span class="line" data-startTime="238">of things that </span><span class="line" data-startTime="239">we're trying to address. </span> <span class="line" data-startTime="241">Extensions dive deep into </span><span class="line" data-startTime="241">a web page by injecting </span><span class="line" data-startTime="245">JavaScript. </span> <span class="line" data-startTime="246">This injected JavaScript might, </span><span class="line" data-startTime="246">for instance, in a </span><span class="line" data-startTime="248">mapping application or a mapping </span><span class="line" data-startTime="248">extension look for </span><span class="line" data-startTime="251">addresses on the page </span><span class="line" data-startTime="251">and try to do </span><span class="line" data-startTime="253">something useful with them. </span> <span class="line" data-startTime="254">It might want to </span><span class="line" data-startTime="254">display a map. </span> <span class="line" data-startTime="255">It might want to go out to the </span><span class="line" data-startTime="255">Google Maps API or something </span><span class="line" data-startTime="258">along those lines. </span></p>

<p><span class="line" data-startTime="259">It grabs this information via </span><span class="line" data-startTime="259">inner HTML and passes it to </span><span class="line" data-startTime="263">the background page </span><span class="line" data-startTime="263">via a message. </span> <span class="line" data-startTime="265">The background page or a pop-up </span><span class="line" data-startTime="265">or anything along those </span><span class="line" data-startTime="268">lines might then try to use this </span><span class="line" data-startTime="268">information by injecting </span><span class="line" data-startTime="271">it into the background </span><span class="line" data-startTime="271">page or into a </span><span class="line" data-startTime="273">pop-up using inner HTML. </span> <span class="line" data-startTime="275">The problem happens when </span><span class="line" data-startTime="275">this information isn't </span><span class="line" data-startTime="278">well-processed, when you don't </span><span class="line" data-startTime="278">really ensure that you're only </span><span class="line" data-startTime="281">getting information that you can </span><span class="line" data-startTime="281">easily and safely inject </span><span class="line" data-startTime="285">the inner HTML. </span> <span class="line" data-startTime="286">If, for instance, the website </span><span class="line" data-startTime="286">injected some script tags </span><span class="line" data-startTime="289">inside of the thing your </span><span class="line" data-startTime="289">extension is looking for, then </span><span class="line" data-startTime="292">you've got a big problem because </span><span class="line" data-startTime="292">at this point you've </span><span class="line" data-startTime="295">just injected untrusted script </span><span class="line" data-startTime="295">into a high-permission area of </span><span class="line" data-startTime="299">your extension. </span> <span class="line" data-startTime="300">This is a big problem, </span><span class="line" data-startTime="300">in fact. </span> <span class="line" data-startTime="302">It's something that a team of </span><span class="line" data-startTime="302">researchers at University of </span><span class="line" data-startTime="306">California at Berkeley have </span><span class="line" data-startTime="306">found exists not really to a </span><span class="line" data-startTime="310">really wide margin within </span><span class="line" data-startTime="310">the extension system. </span></p>

<p><span class="line" data-startTime="314">They went through about 100 </span><span class="line" data-startTime="314">extensions and found </span><span class="line" data-startTime="317">vulnerabilities like this </span><span class="line" data-startTime="317">in about 40 of them. </span> <span class="line" data-startTime="321">However, they found that 94% </span><span class="line" data-startTime="321">of the vulnerabilities that </span><span class="line" data-startTime="325">they found &mdash; which included </span><span class="line" data-startTime="325">either loading resources over </span><span class="line" data-startTime="328">HTTP as opposed to HTTPS or </span><span class="line" data-startTime="328">the sort of inline scripts </span><span class="line" data-startTime="333">injection issue &mdash; </span><span class="line" data-startTime="334">would've been solved if both of </span><span class="line" data-startTime="334">these issues could somehow </span><span class="line" data-startTime="337">be removed. </span> <span class="line" data-startTime="339">We think there's a </span><span class="line" data-startTime="339">way to do that. </span></p>

<p><span class="line" data-startTime="340">And I'll talk about it </span><span class="line" data-startTime="340">in just a moment. </span> <span class="line" data-startTime="342">Manifest Version 2 introduces, </span><span class="line" data-startTime="342">then, two large changes that </span><span class="line" data-startTime="347">we think are going to help make </span><span class="line" data-startTime="347">the extension ecosystem </span><span class="line" data-startTime="349">more secure and a couple of </span><span class="line" data-startTime="349">small cleanup changes. </span> <span class="line" data-startTime="353">The two big changes are a </span><span class="line" data-startTime="353">default content security </span><span class="line" data-startTime="355">policy and web accessible </span><span class="line" data-startTime="355">resources. </span> <span class="line" data-startTime="359">Manifest Version 1 is, as of </span><span class="line" data-startTime="359">Chrome 18, deprecated. </span> <span class="line" data-startTime="362">We'll talk a little bit about </span><span class="line" data-startTime="362">the schedule that we have in </span><span class="line" data-startTime="364">mind later on. </span> <span class="line" data-startTime="367">Manifest Version 2 is very </span><span class="line" data-startTime="367">easy to opt into. </span></p>

<p><span class="line" data-startTime="369">It's simply an attribute inside </span><span class="line" data-startTime="369">of your manifest file. </span> <span class="line" data-startTime="372">You say, Manifest Version 2 and </span><span class="line" data-startTime="372">then we know that you're </span><span class="line" data-startTime="374">opting into the new system. </span> <span class="line" data-startTime="376">The structural changes are </span><span class="line" data-startTime="376">very straightforward. </span> <span class="line" data-startTime="379">First of all, we've made the </span><span class="line" data-startTime="379">background property a little </span><span class="line" data-startTime="382">bit smarter. </span> <span class="line" data-startTime="382">Instead of creating a background </span><span class="line" data-startTime="382">.html page that </span><span class="line" data-startTime="386">really contains nothing except </span><span class="line" data-startTime="386">script, you can simply inject </span><span class="line" data-startTime="389">scripts by using the scripts </span><span class="line" data-startTime="389">property inside background. </span> <span class="line" data-startTime="392">You could load a library, load </span><span class="line" data-startTime="392">your main.js and go without </span><span class="line" data-startTime="395">actually creating an HTML page </span><span class="line" data-startTime="395">that doesn't do really </span><span class="line" data-startTime="398">anything at all other than </span><span class="line" data-startTime="398">load these scripts. </span></p>

<p><span class="line" data-startTime="401">And also, we've made some </span><span class="line" data-startTime="401">cleanup within the APIs </span><span class="line" data-startTime="404">themselves. </span> <span class="line" data-startTime="404">For example, we had </span><span class="line" data-startTime="404">chrome.extension </span><span class="line" data-startTime="406">.getTabContentses. </span> <span class="line" data-startTime="409">That's not actually a typo. </span> <span class="line" data-startTime="410">That was part of the API. </span> <span class="line" data-startTime="411">We've removed that. </span> <span class="line" data-startTime="413">Instead, you should use </span><span class="line" data-startTime="413">extension get Views. </span> <span class="line" data-startTime="415">There are a couple of other </span><span class="line" data-startTime="415">places where we've combined or </span><span class="line" data-startTime="418">we've removed pluralization that </span><span class="line" data-startTime="418">wasn't necessary, things </span><span class="line" data-startTime="421">along those lines. </span> <span class="line" data-startTime="422">If you go to the extension </span><span class="line" data-startTime="422">documentation, you can see a </span><span class="line" data-startTime="424">complete list of all the API </span><span class="line" data-startTime="424">changes that happened. </span> <span class="line" data-startTime="429">Let's talk, then, about the </span><span class="line" data-startTime="429">first of the two big changes. </span> <span class="line" data-startTime="431">The first one is Web Accessible </span><span class="line" data-startTime="431">Resources. </span> <span class="line" data-startTime="434">Web Accessible Resources gives </span><span class="line" data-startTime="434">you a mechanism of determining </span><span class="line" data-startTime="437">exactly which resources inside </span><span class="line" data-startTime="437">your extension should be </span><span class="line" data-startTime="441">available outside the context </span><span class="line" data-startTime="441">of your extension. </span> <span class="line" data-startTime="443">If you need to inject a script </span><span class="line" data-startTime="443">file or an image or anything </span><span class="line" data-startTime="446">along these lines into a </span><span class="line" data-startTime="446">website, what you'll need to </span><span class="line" data-startTime="449">do is actually specify </span><span class="line" data-startTime="449">that resource within </span><span class="line" data-startTime="452">your manifest file. </span></p>

<p><span class="line" data-startTime="454">Here we've shown web accessible </span><span class="line" data-startTime="454">resources </span><span class="line" data-startTime="456">public.png. </span> <span class="line" data-startTime="458">public.png loads, private.png </span><span class="line" data-startTime="458">fails. </span> <span class="line" data-startTime="462">So at this point, you simply </span><span class="line" data-startTime="462">have the ability to whitelist </span><span class="line" data-startTime="464">the specific resources within </span><span class="line" data-startTime="464">your extension that are </span><span class="line" data-startTime="468">available outside the context </span><span class="line" data-startTime="468">of your extension. </span> <span class="line" data-startTime="471">This solves a couple </span><span class="line" data-startTime="471">of problems. </span> <span class="line" data-startTime="472">For instance, we've seen a lot </span><span class="line" data-startTime="472">of extension developers using </span><span class="line" data-startTime="475">the query string on a options </span><span class="line" data-startTime="475">page or a background page or </span><span class="line" data-startTime="479">something that gets </span><span class="line" data-startTime="479">loaded in order to </span><span class="line" data-startTime="481">actually do some work. </span> <span class="line" data-startTime="482">It was then impossible to script </span><span class="line" data-startTime="482">that page by loading it </span><span class="line" data-startTime="486">outside the context </span><span class="line" data-startTime="486">of the extension. </span></p>

<p><span class="line" data-startTime="489">This will remove that sort </span><span class="line" data-startTime="489">of vulnerability. </span> <span class="line" data-startTime="492">Content Security Policy, then, </span><span class="line" data-startTime="492">is the second of these two </span><span class="line" data-startTime="495">large changes within </span><span class="line" data-startTime="495">Manifest Version 2. </span> <span class="line" data-startTime="498">This is probably the </span><span class="line" data-startTime="498">biggest change. </span> <span class="line" data-startTime="500">And it's something that I'm </span><span class="line" data-startTime="500">going to spend a good amount </span><span class="line" data-startTime="502">of time on walking you through </span><span class="line" data-startTime="502">because it's very important. </span> <span class="line" data-startTime="506">Content Security Policy gives </span><span class="line" data-startTime="506">you a mechanism of mitigating </span><span class="line" data-startTime="509">the risk of cross-site scripting </span><span class="line" data-startTime="509">attacks by very </span><span class="line" data-startTime="511">specifically whitelisting the </span><span class="line" data-startTime="511">origins that are allowed to </span><span class="line" data-startTime="515">load resources inside of </span><span class="line" data-startTime="515">a certain context. </span> <span class="line" data-startTime="518">In this case, we're defining a </span><span class="line" data-startTime="518">policy for extensions that </span><span class="line" data-startTime="521">enables you to determine that </span><span class="line" data-startTime="521">origin one &mdash; so my website &mdash; </span><span class="line" data-startTime="526">I should be able to </span><span class="line" data-startTime="526">load resources. </span></p>

<p><span class="line" data-startTime="527">I should be able to load script </span><span class="line" data-startTime="527">from that website. </span> <span class="line" data-startTime="529">I shouldn't, however, be able </span><span class="line" data-startTime="529">to load resources from the </span><span class="line" data-startTime="532">evil.example.com. </span> <span class="line" data-startTime="534">If somehow people were able to </span><span class="line" data-startTime="534">inject code into my background </span><span class="line" data-startTime="538">page that tried to load </span><span class="line" data-startTime="538">resources from an </span><span class="line" data-startTime="540">unwhitelisted origin, it </span><span class="line" data-startTime="540">would simply fail. </span> <span class="line" data-startTime="543">This gives us a good measure </span><span class="line" data-startTime="543">of security. </span> <span class="line" data-startTime="545">And it's something that we're </span><span class="line" data-startTime="545">really excited about, not only </span><span class="line" data-startTime="547">for extensions but also </span><span class="line" data-startTime="547">for the open web. </span> <span class="line" data-startTime="549">There's going to be a really </span><span class="line" data-startTime="549">good talk on Friday that I </span><span class="line" data-startTime="551">think you should all attend </span><span class="line" data-startTime="551">if you're at all </span><span class="line" data-startTime="552">interested in security. </span></p>

<p><span class="line" data-startTime="554">And really everyone should be. </span> <span class="line" data-startTime="557">There's a lot of </span><span class="line" data-startTime="557">detail on this. </span> <span class="line" data-startTime="558">I'm not going to go into a </span><span class="line" data-startTime="558">whole lot of detail about </span><span class="line" data-startTime="561">Content Security Policy itself, </span><span class="line" data-startTime="561">how it actually works, </span><span class="line" data-startTime="564">and how you define a Content </span><span class="line" data-startTime="564">Security Policy. </span> <span class="line" data-startTime="566">We've just published an article </span><span class="line" data-startTime="566">on HTML5Rocks, which </span><span class="line" data-startTime="569">is an excellent website </span><span class="line" data-startTime="569">by the way. </span> <span class="line" data-startTime="571">If you go there, you can get </span><span class="line" data-startTime="571">a really good overview of </span><span class="line" data-startTime="573">Content Security Policy. </span> <span class="line" data-startTime="574">And I think that's probably a </span><span class="line" data-startTime="574">good use of 10 or so minutes </span><span class="line" data-startTime="577">of your time. </span> <span class="line" data-startTime="579">The default Content Security </span><span class="line" data-startTime="579">Policy that we're defining </span><span class="line" data-startTime="581">within the context of Manifest </span><span class="line" data-startTime="581">Version 2 is script src self, </span><span class="line" data-startTime="586">object src self. </span></p>

<p><span class="line" data-startTime="587">This has a couple of impacts. </span> <span class="line" data-startTime="589">The basic idea is that you can </span><span class="line" data-startTime="589">only load script from inside </span><span class="line" data-startTime="593">of the context of your </span><span class="line" data-startTime="593">extensions, so inside your </span><span class="line" data-startTime="595">extension package coming </span><span class="line" data-startTime="595">from the same origin. </span> <span class="line" data-startTime="598">You can also only load Flash and </span><span class="line" data-startTime="598">other plug-in information </span><span class="line" data-startTime="602">via the same mechanism. </span> <span class="line" data-startTime="604">So these sorts of things we </span><span class="line" data-startTime="604">would like you to bundle with </span><span class="line" data-startTime="606">your extension when possible. </span> <span class="line" data-startTime="608">It has a couple of </span><span class="line" data-startTime="608">impacts then. </span> <span class="line" data-startTime="610">First, no JavaScript can be </span><span class="line" data-startTime="610">loaded by default from third </span><span class="line" data-startTime="613">party servers. </span> <span class="line" data-startTime="614">No objects can be loaded </span><span class="line" data-startTime="614">by default </span><span class="line" data-startTime="616">from third-party servers. </span> <span class="line" data-startTime="618">No inline JavaScript &mdash; </span><span class="line" data-startTime="619">this includes script tags. </span> <span class="line" data-startTime="620">It also includes things like </span><span class="line" data-startTime="620">inline event handlers in </span><span class="line" data-startTime="624">JavaScript URLs. </span> <span class="line" data-startTime="625">It's simply impossible, you </span><span class="line" data-startTime="625">see, to differentiate code </span><span class="line" data-startTime="629">that was injected maliciously </span><span class="line" data-startTime="629">from code that was inlined in </span><span class="line" data-startTime="634">your web page intentionally. </span> <span class="line" data-startTime="637">There is no difference between </span><span class="line" data-startTime="637">the two as far as the HTML </span><span class="line" data-startTime="640">parser is concerned. </span> <span class="line" data-startTime="641">It's simply impossible to </span><span class="line" data-startTime="641">make that determination. </span></p>

<p><span class="line" data-startTime="643">And the Security Policy then </span><span class="line" data-startTime="643">takes the safest route, which </span><span class="line" data-startTime="646">is banning it entirely. </span> <span class="line" data-startTime="648">No eval, this is an </span><span class="line" data-startTime="648">interesting topic. </span> <span class="line" data-startTime="651">And we'll talk about it a little </span><span class="line" data-startTime="651">bit more later on. </span> <span class="line" data-startTime="653">But for the moment, by default, </span><span class="line" data-startTime="653">eval is disallowed. </span> <span class="line" data-startTime="657">This includes not only eval </span><span class="line" data-startTime="657">itself but also things like </span><span class="line" data-startTime="660">new function, set timeout that </span><span class="line" data-startTime="660">uses a string, and set </span><span class="line" data-startTime="664">interval that uses a string. </span> <span class="line" data-startTime="666">So anything that takes strings </span><span class="line" data-startTime="666">and converts them directly </span><span class="line" data-startTime="668">into executed JavaScript is </span><span class="line" data-startTime="668">something that we simply can't </span><span class="line" data-startTime="671">allow within the protected </span><span class="line" data-startTime="671">context of the extension. </span> <span class="line" data-startTime="676">Ideally, this means that we'll </span><span class="line" data-startTime="676">be free from XSS attacks </span><span class="line" data-startTime="680">within the context </span><span class="line" data-startTime="680">of the extension. </span> <span class="line" data-startTime="681">That probably isn't </span><span class="line" data-startTime="681">completely true. </span> <span class="line" data-startTime="683">But Content Security Policy gets </span><span class="line" data-startTime="683">us a heck of a lot closer </span><span class="line" data-startTime="687">to that than we are today. </span> <span class="line" data-startTime="690">So let's talk in a little </span><span class="line" data-startTime="690">bit more detail </span><span class="line" data-startTime="691">about third-party resources. </span></p>

<p><span class="line" data-startTime="693">I said that by default you </span><span class="line" data-startTime="693">aren't allowed to load </span><span class="line" data-startTime="695">third-party resources. </span> <span class="line" data-startTime="697">This is the case. </span> <span class="line" data-startTime="698">You can, however, loosen this </span><span class="line" data-startTime="698">policy to include HTTPS </span><span class="line" data-startTime="701">sources, that is secure </span><span class="line" data-startTime="701">HTTP sources as </span><span class="line" data-startTime="704">opposed to HTTP sources. </span> <span class="line" data-startTime="707">If you go to a coffee bar and </span><span class="line" data-startTime="707">hook up to their wi-fi, you </span><span class="line" data-startTime="710">really have no guarantee that </span><span class="line" data-startTime="710">anything you load over HTTP is </span><span class="line" data-startTime="714">actually what the </span><span class="line" data-startTime="714">server sent you. </span> <span class="line" data-startTime="715">It's incredibly trivial to </span><span class="line" data-startTime="715">go in and manipulate that </span><span class="line" data-startTime="718">content, injecting new content, </span><span class="line" data-startTime="720">or changing it entirely. </span> <span class="line" data-startTime="722">HTTPS, however, is an entirely </span><span class="line" data-startTime="722">different story. </span></p>

<p><span class="line" data-startTime="725">Because it's encrypted, it's </span><span class="line" data-startTime="725">much, much more difficult to </span><span class="line" data-startTime="728">inject anything malicious </span><span class="line" data-startTime="728">into an HTTPS string. </span> <span class="line" data-startTime="732">At that point, we feel pretty </span><span class="line" data-startTime="732">good about allowing you to </span><span class="line" data-startTime="734">load things like Google </span><span class="line" data-startTime="734">Analytics over HTTPS as </span><span class="line" data-startTime="738">opposed to HTTP. </span> <span class="line" data-startTime="739">So if there are third-party </span><span class="line" data-startTime="739">JavaScripts that you need to </span><span class="line" data-startTime="742">load within the context of your </span><span class="line" data-startTime="742">extension, we would ask </span><span class="line" data-startTime="745">you to specify within the </span><span class="line" data-startTime="745">Content Security Policy that </span><span class="line" data-startTime="749">you define for your extension. </span> <span class="line" data-startTime="751">You could write something like </span><span class="line" data-startTime="751">this, script src self, which </span><span class="line" data-startTime="754">means you can load things from </span><span class="line" data-startTime="754">your own extension's origin, </span><span class="line" data-startTime="756">but also https://ssl.goog </span><span class="line" data-startTime="756">le-analytics.com. </span> <span class="line" data-startTime="760">This will enable you then to </span><span class="line" data-startTime="760">load Google Analytics, do the </span><span class="line" data-startTime="763">things you need to do with this </span><span class="line" data-startTime="763">external library, but do </span><span class="line" data-startTime="766">it in a very safe way. </span></p>

<p><span class="line" data-startTime="768">We'd actually, however, be </span><span class="line" data-startTime="768">thrilled if you locked things </span><span class="line" data-startTime="770">down even further than the </span><span class="line" data-startTime="770">defaults that we've set. </span> <span class="line" data-startTime="774">You can start with a default </span><span class="line" data-startTime="774">source of none, and then list </span><span class="line" data-startTime="777">every single type of resource </span><span class="line" data-startTime="777">that you need to load and the </span><span class="line" data-startTime="780">origins associated with </span><span class="line" data-startTime="780">those resources. </span> <span class="line" data-startTime="782">This gives you a much &mdash; </span><span class="line" data-startTime="783">a higher degree of security than </span><span class="line" data-startTime="783">simply using the defaults </span><span class="line" data-startTime="788">that we've set. </span></p>

<p><span class="line" data-startTime="789">The defaults take care of the </span><span class="line" data-startTime="789">most dangerous things, that is </span><span class="line" data-startTime="791">scripts and objects. </span> <span class="line" data-startTime="793">But if you want to deal with </span><span class="line" data-startTime="793">everything else as well, we'd </span><span class="line" data-startTime="796">be quite happy. </span> <span class="line" data-startTime="798">Inline JavaScript, however, </span><span class="line" data-startTime="798">is something that we </span><span class="line" data-startTime="801">simply can't loosen. </span> <span class="line" data-startTime="802">This is actually the core of </span><span class="line" data-startTime="802">Content Security Policy. </span> <span class="line" data-startTime="805">Because you can't differentiate </span><span class="line" data-startTime="805">between </span><span class="line" data-startTime="807">maliciously injected code and </span><span class="line" data-startTime="807">non-maliciously intentional </span><span class="line" data-startTime="811">code, we simply can't allow this </span><span class="line" data-startTime="811">policy to be loosened. </span> <span class="line" data-startTime="818">If you have code that looks </span><span class="line" data-startTime="818">something like this, it's </span><span class="line" data-startTime="821">actually not really best </span><span class="line" data-startTime="821">practice anyway, right. </span> <span class="line" data-startTime="823">We have JavaScript, </span><span class="line" data-startTime="823">CSS, and HTML. </span> <span class="line" data-startTime="826">But all have very different </span><span class="line" data-startTime="826">purposes. </span></p>

<p><span class="line" data-startTime="828">HTML is there for markup. </span> <span class="line" data-startTime="829">CSS is there for your </span><span class="line" data-startTime="829">presentation. </span> <span class="line" data-startTime="832">And JavaScript is there </span><span class="line" data-startTime="832">for behavior. </span> <span class="line" data-startTime="834">Separating those out into </span><span class="line" data-startTime="834">separate files makes your code </span><span class="line" data-startTime="837">easier to understand and is </span><span class="line" data-startTime="837">really best practice anyway. </span> <span class="line" data-startTime="840">If you haven code like this, you </span><span class="line" data-startTime="840">can very easily rewrite it </span><span class="line" data-startTime="844">into two separate files. </span> <span class="line" data-startTime="845">So instead of having an inline </span><span class="line" data-startTime="845">event handler on a button, you </span><span class="line" data-startTime="849">would have an external </span><span class="line" data-startTime="849">JavaScript </span><span class="line" data-startTime="850">file that gets loaded. </span> <span class="line" data-startTime="851">This JavaScript file would hook </span><span class="line" data-startTime="851">up an event listener. </span> <span class="line" data-startTime="853">And at that point, when you </span><span class="line" data-startTime="853">click on the button, </span><span class="line" data-startTime="855">amazingness will still happen. </span> <span class="line" data-startTime="857">You'll get the exact </span><span class="line" data-startTime="857">same effect. </span> <span class="line" data-startTime="858">But you'll get it in a way </span><span class="line" data-startTime="858">that we can ensure safe. </span></p>

<p><span class="line" data-startTime="864">Eval, on the other hand, </span><span class="line" data-startTime="864">is a bit problematic. </span> <span class="line" data-startTime="867">We can't really allow it by </span><span class="line" data-startTime="867">default because your extension </span><span class="line" data-startTime="870">might be working with untrusted </span><span class="line" data-startTime="872">data coming from users. </span> <span class="line" data-startTime="873">So user-generated data being </span><span class="line" data-startTime="873">potentially turned directly </span><span class="line" data-startTime="877">into executed JavaScript, </span><span class="line" data-startTime="877">that's problematic. </span> <span class="line" data-startTime="879">And it's simply something that </span><span class="line" data-startTime="879">we can't allow within the </span><span class="line" data-startTime="882">context, within this </span><span class="line" data-startTime="882">high-permission </span><span class="line" data-startTime="884">context, of an extension. </span> <span class="line" data-startTime="886">We understand, however, that </span><span class="line" data-startTime="886">it's pretty important for a </span><span class="line" data-startTime="889">couple of use cases. </span> <span class="line" data-startTime="890">There are a few of you that </span><span class="line" data-startTime="890">really, really need to use </span><span class="line" data-startTime="893">eval and especially eval-like </span><span class="line" data-startTime="893">constructs. </span> <span class="line" data-startTime="896">New Function, for instance, is </span><span class="line" data-startTime="896">used in a wide variety of </span><span class="line" data-startTime="899">templating libraries. </span> <span class="line" data-startTime="900">And we understand. </span> <span class="line" data-startTime="901">We've heard the feedback that </span><span class="line" data-startTime="901">that's incredibly important to </span><span class="line" data-startTime="904">the way that many </span><span class="line" data-startTime="904">of you develop. </span></p>

<p><span class="line" data-startTime="906">We think we have an alternative </span><span class="line" data-startTime="906">or a work around </span><span class="line" data-startTime="909">for this that we're happy with </span><span class="line" data-startTime="909">and that we hope you'll be </span><span class="line" data-startTime="912">happy with as well. </span> <span class="line" data-startTime="913">The idea is that you create a </span><span class="line" data-startTime="913">sandbox in which eval can </span><span class="line" data-startTime="917">execute in a non </span><span class="line" data-startTime="917">dangerous way. </span> <span class="line" data-startTime="920">Let's talk a little bit about </span><span class="line" data-startTime="920">how that might work. </span> <span class="line" data-startTime="923">We have your extension. </span> <span class="line" data-startTime="924">And inside of your extension, </span><span class="line" data-startTime="924">you create an iframe. </span> <span class="line" data-startTime="926">This iframe is sandboxed, </span><span class="line" data-startTime="926">meaning that it has fewer </span><span class="line" data-startTime="929">permissions than the </span><span class="line" data-startTime="929">extension itself. </span> <span class="line" data-startTime="932">We defined in the previous </span><span class="line" data-startTime="932">page sandbox.html. </span></p>

<p><span class="line" data-startTime="935">We load sandbox.html </span><span class="line" data-startTime="935">in an iframe. </span> <span class="line" data-startTime="939">It's then pushed off </span><span class="line" data-startTime="939">into a separate </span><span class="line" data-startTime="941">origin from your extension. </span> <span class="line" data-startTime="943">This means it doesn't have </span><span class="line" data-startTime="943">access to any data that your </span><span class="line" data-startTime="945">extension has stored. </span> <span class="line" data-startTime="947">And it doesn't have access </span><span class="line" data-startTime="947">to the dangerous </span><span class="line" data-startTime="950">chrome.star name space. </span> <span class="line" data-startTime="952">So any of the things that your </span><span class="line" data-startTime="952">extension can do, you'll need </span><span class="line" data-startTime="956">to deal with the sandbox in </span><span class="line" data-startTime="956">much the same way that you </span><span class="line" data-startTime="959">deal with content scripts </span><span class="line" data-startTime="959">and injected scripts. </span> <span class="line" data-startTime="961">You'll pass messages into the </span><span class="line" data-startTime="961">sandbox containing data that </span><span class="line" data-startTime="965">you'd like to see processed. </span> <span class="line" data-startTime="966">Then you'll pass processed data </span><span class="line" data-startTime="966">back out of the sandbox </span><span class="line" data-startTime="970">into your extension giving you </span><span class="line" data-startTime="970">the ability to, for instance, </span><span class="line" data-startTime="974">pass on a context for a template </span><span class="line" data-startTime="974">and get templated </span><span class="line" data-startTime="977">HTML or rendered </span><span class="line" data-startTime="977">HTML back out. </span> <span class="line" data-startTime="980">At that point, you can inject </span><span class="line" data-startTime="980">that HTML into your pop-up </span><span class="line" data-startTime="983">page or into your background </span><span class="line" data-startTime="983">page without worrying about </span><span class="line" data-startTime="986">whether it's dangerous or not </span><span class="line" data-startTime="986">because that new HTML, that </span><span class="line" data-startTime="989">newly generated HTML, would </span><span class="line" data-startTime="989">then be executed inside a </span><span class="line" data-startTime="993">context that's protected by </span><span class="line" data-startTime="993">Content Security Policy. </span></p>

<p><span class="line" data-startTime="997">Even if an attacker was </span><span class="line" data-startTime="997">completely able to hijack </span><span class="line" data-startTime="1000">everything within your sandbox </span><span class="line" data-startTime="1000">HTML file, the worst they </span><span class="line" data-startTime="1003">could do is present links or </span><span class="line" data-startTime="1003">something that would be useful </span><span class="line" data-startTime="1006">for a user or that looks useful </span><span class="line" data-startTime="1006">for a user to click on. </span> <span class="line" data-startTime="1009">They couldn't actually </span><span class="line" data-startTime="1009">execute any code. </span> <span class="line" data-startTime="1011">They couldn't exfiltrate data. </span> <span class="line" data-startTime="1012">At that point, we're pretty </span><span class="line" data-startTime="1012">happy with this as a </span><span class="line" data-startTime="1014">compromise. </span> <span class="line" data-startTime="1016">The code for this would look </span><span class="line" data-startTime="1016">relatively straightforward. </span></p>

<p><span class="line" data-startTime="1018">As I said, you would inject </span><span class="line" data-startTime="1018">an iframe &mdash; in this case, </span><span class="line" data-startTime="1020">sandbox.html, which again was </span><span class="line" data-startTime="1020">defined in the manifest file </span><span class="line" data-startTime="1024">as being a sandboxed file. </span> <span class="line" data-startTime="1026">When this file is loaded, you </span><span class="line" data-startTime="1026">would fill that iframe with </span><span class="line" data-startTime="1030">templating goodness. </span> <span class="line" data-startTime="1030">So at this point, I'm using </span><span class="line" data-startTime="1030">something like Handlebars. </span> <span class="line" data-startTime="1033">Many of you are using different </span><span class="line" data-startTime="1033">frameworks. </span> <span class="line" data-startTime="1035">They would generally </span><span class="line" data-startTime="1035">work the same way. </span> <span class="line" data-startTime="1037">You want to inject or you want </span><span class="line" data-startTime="1037">to code a sandboxed page that </span><span class="line" data-startTime="1042">contains all of this templating </span><span class="line" data-startTime="1042">information and </span><span class="line" data-startTime="1045">then create sandbox.js, </span><span class="line" data-startTime="1045">which has &mdash; </span><span class="line" data-startTime="1049">will basically create an API </span><span class="line" data-startTime="1049">on top of your sandbox that </span><span class="line" data-startTime="1053">allows messages to be passed in </span><span class="line" data-startTime="1053">with a certain command and </span><span class="line" data-startTime="1055">a certain context. </span></p>

<p><span class="line" data-startTime="1057">Then you'll be able to execute </span><span class="line" data-startTime="1057">that information. </span> <span class="line" data-startTime="1059">So I create a template at </span><span class="line" data-startTime="1059">the top of the page. </span> <span class="line" data-startTime="1061">This is just the way </span><span class="line" data-startTime="1061">Handlebars works. </span> <span class="line" data-startTime="1063">And then I listen for </span><span class="line" data-startTime="1063">a message event. </span> <span class="line" data-startTime="1065">When a message event comes in </span><span class="line" data-startTime="1065">with the command of render, </span><span class="line" data-startTime="1068">then I post a message back to </span><span class="line" data-startTime="1068">the extension containing some </span><span class="line" data-startTime="1073">templated data. </span> <span class="line" data-startTime="1074">So I execute template with the </span><span class="line" data-startTime="1074">context that I passed in. </span> <span class="line" data-startTime="1078">This gives me new HTML. </span> <span class="line" data-startTime="1079">I pass it back out. </span> <span class="line" data-startTime="1080">And I can do whatever </span><span class="line" data-startTime="1080">I want with it in a </span><span class="line" data-startTime="1081">relatively safe way. </span> <span class="line" data-startTime="1083">That side would look </span><span class="line" data-startTime="1083">like this. </span> <span class="line" data-startTime="1085">When I click on the browser </span><span class="line" data-startTime="1085">action, I pass information </span><span class="line" data-startTime="1087">into the iframe content </span><span class="line" data-startTime="1087">window. </span> <span class="line" data-startTime="1089">And I get the information back </span><span class="line" data-startTime="1089">out as a message event. </span></p>

<p><span class="line" data-startTime="1092">This gives me the ability then, </span><span class="line" data-startTime="1092">as I said, to sandbox </span><span class="line" data-startTime="1095">the way that eval works. </span> <span class="line" data-startTime="1096">This means I can do the </span><span class="line" data-startTime="1096">dangerous things. </span> <span class="line" data-startTime="1099">But I do them in a context in </span><span class="line" data-startTime="1099">which those things are no </span><span class="line" data-startTime="1101">longer dangerous. </span> <span class="line" data-startTime="1106">The Support Schedule for </span><span class="line" data-startTime="1106">Manifest Version 1 is as </span><span class="line" data-startTime="1108">follows at the moment. </span> <span class="line" data-startTime="1110">Chrome 21 is coming out </span><span class="line" data-startTime="1110">mid to end of August. </span> <span class="line" data-startTime="1114">At this point, no new extensions </span><span class="line" data-startTime="1114">built using </span><span class="line" data-startTime="1117">Manifest Version 1 will </span><span class="line" data-startTime="1117">be accepted in </span><span class="line" data-startTime="1119">the Chrome Web Store. </span> <span class="line" data-startTime="1121">It's not, however, the case that </span><span class="line" data-startTime="1121">old extensions at this </span><span class="line" data-startTime="1123">point will have any problems </span><span class="line" data-startTime="1123">whatsoever. </span> <span class="line" data-startTime="1125">Old extensions will be </span><span class="line" data-startTime="1125">grandfathered in. </span> <span class="line" data-startTime="1128">If you currently have an </span><span class="line" data-startTime="1128">extension in the store that's </span><span class="line" data-startTime="1130">using Manifest Version </span><span class="line" data-startTime="1130">1, you're fine </span><span class="line" data-startTime="1132">for a little while. </span></p>

<p><span class="line" data-startTime="1133">But this is our message </span><span class="line" data-startTime="1133">to you. </span> <span class="line" data-startTime="1135">Manifest Version 1 </span><span class="line" data-startTime="1135">is deprecated. </span> <span class="line" data-startTime="1137">We really need to move to a </span><span class="line" data-startTime="1137">system that is more secure, </span><span class="line" data-startTime="1140">that gives us these guarantees </span><span class="line" data-startTime="1140">in a way that we </span><span class="line" data-startTime="1142">simply can't do now. </span> <span class="line" data-startTime="1144">We've had Content Security </span><span class="line" data-startTime="1144">Policy in the extension system </span><span class="line" data-startTime="1146">for a while. </span> <span class="line" data-startTime="1147">And it simply hasn't gotten </span><span class="line" data-startTime="1147">enough adoption for it to be </span><span class="line" data-startTime="1150">useful for us as a security </span><span class="line" data-startTime="1150">mechanism. </span> <span class="line" data-startTime="1152">We're going to need to migrate </span><span class="line" data-startTime="1152">extensions over to the new </span><span class="line" data-startTime="1157">Manifest version. </span> <span class="line" data-startTime="1158">And we're doing it with </span><span class="line" data-startTime="1158">a schedule as follows. </span> <span class="line" data-startTime="1161">Chrome 23, Chrome will stop </span><span class="line" data-startTime="1161">packaging Manifest Version 1. </span> <span class="line" data-startTime="1165">This means if you want to </span><span class="line" data-startTime="1165">package a Manifest Version 1 </span><span class="line" data-startTime="1168">extension for distribution </span><span class="line" data-startTime="1168">outside the Chrome Web Store, </span><span class="line" data-startTime="1171">you won't be able to do it </span><span class="line" data-startTime="1171">through Chrome anymore. </span></p>

<p><span class="line" data-startTime="1173">You'll need to write something </span><span class="line" data-startTime="1173">on your own. </span> <span class="line" data-startTime="1175">Some time in Q1 2013, we're </span><span class="line" data-startTime="1175">looking at Manifest Version 1s </span><span class="line" data-startTime="1179">not appearing in search </span><span class="line" data-startTime="1179">any longer. </span> <span class="line" data-startTime="1182">This is the point at which old </span><span class="line" data-startTime="1182">extensions are going to start </span><span class="line" data-startTime="1184">seeing impacts from this. </span> <span class="line" data-startTime="1186">Some time in the middle of Q &mdash; </span><span class="line" data-startTime="1186">of 2013, Manifest Version 1 </span><span class="line" data-startTime="1190">items will simply be unpublished </span><span class="line" data-startTime="1190">from the store. </span> <span class="line" data-startTime="1192">We're going to be publishing </span><span class="line" data-startTime="1192">warnings about this. </span> <span class="line" data-startTime="1194">We're going to be sending </span><span class="line" data-startTime="1194">emails out about this. </span></p>

<p><span class="line" data-startTime="1196">We're going to make it very </span><span class="line" data-startTime="1196">clear what's going on. </span> <span class="line" data-startTime="1199">And we're very much hoping that </span><span class="line" data-startTime="1199">we can get you guys to </span><span class="line" data-startTime="1202">come along with us. </span> <span class="line" data-startTime="1204">In 2013, whenever we're happy </span><span class="line" data-startTime="1204">with the way things are going, </span><span class="line" data-startTime="1209">we'll turn off Manifest </span><span class="line" data-startTime="1209">Version 1 </span><span class="line" data-startTime="1212">inside of Chrome, period. </span> <span class="line" data-startTime="1214">This means even extensions </span><span class="line" data-startTime="1214">that are loaded within &mdash; </span><span class="line" data-startTime="1217">in Enterprise, for instance, </span><span class="line" data-startTime="1217">will simply not work anymore </span><span class="line" data-startTime="1219">in new versions of Chrome. </span> <span class="line" data-startTime="1221">So we're definitely looking to </span><span class="line" data-startTime="1221">move people over relatively </span><span class="line" data-startTime="1224">quickly for Manifest Version </span><span class="line" data-startTime="1224">1 to Manifest Version 2. </span> <span class="line" data-startTime="1227">We're really looking for </span><span class="line" data-startTime="1227">feedback about this. </span></p>

<p><span class="line" data-startTime="1229">We want to know what the pain </span><span class="line" data-startTime="1229">points are so that we can make </span><span class="line" data-startTime="1232">the system better. </span> <span class="line" data-startTime="1233">We've heard your feedback with </span><span class="line" data-startTime="1233">regard to templating. </span> <span class="line" data-startTime="1235">We think sandboxing is a </span><span class="line" data-startTime="1235">good alternative there. </span> <span class="line" data-startTime="1238">If there are other pain points </span><span class="line" data-startTime="1238">that are really causing </span><span class="line" data-startTime="1240">problems in this migration, we </span><span class="line" data-startTime="1240">really want to hear about it </span><span class="line" data-startTime="1243">so that we can fix it and make </span><span class="line" data-startTime="1243">it easy for you guys to </span><span class="line" data-startTime="1246">migrate from one to the other. </span> <span class="line" data-startTime="1249">We've talked a little bit about </span><span class="line" data-startTime="1249">Manifest Version 2. </span> <span class="line" data-startTime="1251">It's a big change. </span> <span class="line" data-startTime="1253">It, however, has a lot of </span><span class="line" data-startTime="1253">benefits that we think are </span><span class="line" data-startTime="1256">really valuable. </span> <span class="line" data-startTime="1257">And it also is going to enable </span><span class="line" data-startTime="1257">us to build new APIs that are </span><span class="line" data-startTime="1261">more targeted. </span> <span class="line" data-startTime="1262">And these new APIs, we think, </span><span class="line" data-startTime="1262">are going to be really </span><span class="line" data-startTime="1264">interesting for developers. </span></p>

<p><span class="line" data-startTime="1266">Let's talk a little bit </span><span class="line" data-startTime="1266">about some of them. </span> <span class="line" data-startTime="1268">So, many of the APIs that we've </span><span class="line" data-startTime="1268">produced over the last </span><span class="line" data-startTime="1271">three years in the extension </span><span class="line" data-startTime="1271">framework have been very much </span><span class="line" data-startTime="1274">like chainsaws. </span> <span class="line" data-startTime="1275">They're large. </span> <span class="line" data-startTime="1276">They're powerful. </span> <span class="line" data-startTime="1277">But it's relatively easy to </span><span class="line" data-startTime="1277">sever a limb if you're not </span><span class="line" data-startTime="1279">being careful. </span> <span class="line" data-startTime="1281">What we'd like to produce is </span><span class="line" data-startTime="1281">something much more like </span><span class="line" data-startTime="1283">X-Acto knives or scalpels &mdash; </span><span class="line" data-startTime="1284">something that's very fine in </span><span class="line" data-startTime="1284">detail that gives you the </span><span class="line" data-startTime="1287">ability to do the things that </span><span class="line" data-startTime="1287">you need to do, but do it in a </span><span class="line" data-startTime="1291">way that's much less dangerous, </span><span class="line" data-startTime="1291">that doesn't </span><span class="line" data-startTime="1293">require the same permission set, </span><span class="line" data-startTime="1293">specifically with regard </span><span class="line" data-startTime="1296">to host permission. </span> <span class="line" data-startTime="1297">What we also want to do, </span><span class="line" data-startTime="1297">however, is reduce the number </span><span class="line" data-startTime="1300">of resources that are </span><span class="line" data-startTime="1300">used by extensions </span><span class="line" data-startTime="1302">on an ongoing basis. </span> <span class="line" data-startTime="1304">You see here that I have &mdash; </span><span class="line" data-startTime="1306">and I have a lot of extensions </span><span class="line" data-startTime="1306">installed. </span></p>

<p><span class="line" data-startTime="1307">I've basically installed every </span><span class="line" data-startTime="1307">Google extension that I could </span><span class="line" data-startTime="1310">find on the first couple of </span><span class="line" data-startTime="1310">pages of the Chrome Web Store. </span> <span class="line" data-startTime="1313">What we see here is, first </span><span class="line" data-startTime="1313">of all, it's relatively </span><span class="line" data-startTime="1315">difficult to use. </span> <span class="line" data-startTime="1316">But if we look at the Task </span><span class="line" data-startTime="1316">Manager, we'll see that all of </span><span class="line" data-startTime="1319">these extensions &mdash; </span><span class="line" data-startTime="1320">even though they're doing </span><span class="line" data-startTime="1320">absolutely nothing right now &mdash; </span><span class="line" data-startTime="1323">are taking up a large number of </span><span class="line" data-startTime="1323">resources, anywhere from 20 </span><span class="line" data-startTime="1327">to 30 meg, depending </span><span class="line" data-startTime="1327">on the extension. </span> <span class="line" data-startTime="1329">It isn't quite as bad </span><span class="line" data-startTime="1329">as it sounds. </span> <span class="line" data-startTime="1331">Much of this memory is </span><span class="line" data-startTime="1331">shared because of </span><span class="line" data-startTime="1332">multi process model. </span> <span class="line" data-startTime="1333">But it's still much more than we </span><span class="line" data-startTime="1333">think extensions should be </span><span class="line" data-startTime="1336">using when they're not doing </span><span class="line" data-startTime="1336">anything at all. </span> <span class="line" data-startTime="1339">We'd like to kill off </span><span class="line" data-startTime="1339">those processes. </span></p>

<p><span class="line" data-startTime="1341">And we'd like to shrink the </span><span class="line" data-startTime="1341">amount of resource that's </span><span class="line" data-startTime="1343">being used an ongoing basis. </span> <span class="line" data-startTime="1345">The mechanism we are looking </span><span class="line" data-startTime="1345">at for doing </span><span class="line" data-startTime="1347">that is event pages. </span> <span class="line" data-startTime="1348">We published a blog post on </span><span class="line" data-startTime="1348">Chromium.org about this, I </span><span class="line" data-startTime="1351">think, last week. </span> <span class="line" data-startTime="1352">The idea of event pages is that </span><span class="line" data-startTime="1352">they work very similarly </span><span class="line" data-startTime="1355">to background pages. </span> <span class="line" data-startTime="1356">But they disappear when you're </span><span class="line" data-startTime="1356">not actually using them. </span> <span class="line" data-startTime="1359">So we can kill the </span><span class="line" data-startTime="1359">process entirely. </span> <span class="line" data-startTime="1361">This has a large number </span><span class="line" data-startTime="1361">of benefits. </span> <span class="line" data-startTime="1363">First of all, by killing the </span><span class="line" data-startTime="1363">process, we ensure that even </span><span class="line" data-startTime="1367">if there's a leak somewhere in </span><span class="line" data-startTime="1367">your extension, by killing </span><span class="line" data-startTime="1370">that background process, we </span><span class="line" data-startTime="1370">can also kill the leaks. </span></p>

<p><span class="line" data-startTime="1372">So even if there's a leaky </span><span class="line" data-startTime="1372">extension, we reclaim all of </span><span class="line" data-startTime="1376">those resources simply by </span><span class="line" data-startTime="1376">reaping the entire process. </span> <span class="line" data-startTime="1379">It also gives us the ability to </span><span class="line" data-startTime="1379">move to a more event-driven </span><span class="line" data-startTime="1382">model, something that we think </span><span class="line" data-startTime="1382">is really going to be useful </span><span class="line" data-startTime="1385">for low memory devices, </span><span class="line" data-startTime="1385">like Chrome OS. </span> <span class="line" data-startTime="1389">If you're looking at a </span><span class="line" data-startTime="1389">Chromebook, it's not going to </span><span class="line" data-startTime="1390">be possible for you to load </span><span class="line" data-startTime="1390">hundreds and hundreds of </span><span class="line" data-startTime="1393">extensions if each of them is </span><span class="line" data-startTime="1393">taking up memory in the </span><span class="line" data-startTime="1395">background, regardless of </span><span class="line" data-startTime="1395">whether they're active or not. </span> <span class="line" data-startTime="1398">We want to make sure that on </span><span class="line" data-startTime="1398">these low resource devices </span><span class="line" data-startTime="1401">that we point those resources </span><span class="line" data-startTime="1401">towards the things that you're </span><span class="line" data-startTime="1403">actually doing as opposed to the </span><span class="line" data-startTime="1403">things you might be doing. </span></p>

<p><span class="line" data-startTime="1409">Event pages are opt-in. </span> <span class="line" data-startTime="1410">And it's very straightforward. </span> <span class="line" data-startTime="1412">When you use the new background </span><span class="line" data-startTime="1412">page syntax, you </span><span class="line" data-startTime="1414">simply write, persistent </span><span class="line" data-startTime="1414">false. </span> <span class="line" data-startTime="1415">So you set this flag to false. </span> <span class="line" data-startTime="1417">And at that point, your </span><span class="line" data-startTime="1417">background page will simply be </span><span class="line" data-startTime="1419">killed when it's not doing </span><span class="line" data-startTime="1419">anything useful. </span> <span class="line" data-startTime="1422">The life cycle is as follows. </span> <span class="line" data-startTime="1424">We load the background </span><span class="line" data-startTime="1424">page on installation. </span> <span class="line" data-startTime="1427">At that point, we record all </span><span class="line" data-startTime="1427">of the events that are </span><span class="line" data-startTime="1429">registered within the </span><span class="line" data-startTime="1429">background page. </span> <span class="line" data-startTime="1431">So your background page might </span><span class="line" data-startTime="1431">look something like this. </span></p>

<p><span class="line" data-startTime="1434">It might be a main.js. </span> <span class="line" data-startTime="1436">You might register for </span><span class="line" data-startTime="1436">a couple of events. </span> <span class="line" data-startTime="1437">Chrome will remember and persist </span><span class="line" data-startTime="1437">all of these events. </span> <span class="line" data-startTime="1440">Then when your background page </span><span class="line" data-startTime="1440">is killed, we can start it up </span><span class="line" data-startTime="1444">again based upon these events, </span><span class="line" data-startTime="1444">based upon user interaction. </span> <span class="line" data-startTime="1447">So in the middle, I register </span><span class="line" data-startTime="1447">for chrome </span><span class="line" data-startTime="1450">browser action unclicked. </span> <span class="line" data-startTime="1451">Chrome will remember this, even </span><span class="line" data-startTime="1451">when the background page </span><span class="line" data-startTime="1454">isn't there anymore. </span> <span class="line" data-startTime="1455">If I click on the browser </span><span class="line" data-startTime="1455">action, it'll restart the </span><span class="line" data-startTime="1457">process, spin it back up again, </span><span class="line" data-startTime="1457">and execute or pass in </span><span class="line" data-startTime="1461">this event so that I can execute </span><span class="line" data-startTime="1461">something useful. </span></p>

<p><span class="line" data-startTime="1464">You'll see two new events, </span><span class="line" data-startTime="1464">chrome runtime on installed </span><span class="line" data-startTime="1467">and chrome runtime on suspend. </span> <span class="line" data-startTime="1469">Chrome runtime on installed is </span><span class="line" data-startTime="1469">triggered on installation but </span><span class="line" data-startTime="1473">also on every update. </span> <span class="line" data-startTime="1475">This gives you the ability to </span><span class="line" data-startTime="1475">determine whether or not the </span><span class="line" data-startTime="1478">extension is being installed </span><span class="line" data-startTime="1478">for the first time, which </span><span class="line" data-startTime="1480">gives you a good opportunity to </span><span class="line" data-startTime="1480">use the Chrome storage APIs </span><span class="line" data-startTime="1484">in order to set some values, to </span><span class="line" data-startTime="1484">do some set up, to set some </span><span class="line" data-startTime="1487">flags or whatever it is that </span><span class="line" data-startTime="1487">your extension actually needs. </span> <span class="line" data-startTime="1490">But on update, you can also </span><span class="line" data-startTime="1490">do things like migration. </span> <span class="line" data-startTime="1493">So if you're using index to be </span><span class="line" data-startTime="1493">in the background, you could </span><span class="line" data-startTime="1495">at this point check the version </span><span class="line" data-startTime="1496">of the current database. </span></p>

<p><span class="line" data-startTime="1497">And if it's the old database </span><span class="line" data-startTime="1497">then migrate to the new one. </span> <span class="line" data-startTime="1501">So this, we think, is going </span><span class="line" data-startTime="1501">to give you some good </span><span class="line" data-startTime="1502">opportunities for dealing with </span><span class="line" data-startTime="1502">these sorts of events that </span><span class="line" data-startTime="1506">were difficult to deal </span><span class="line" data-startTime="1506">with in the past. </span> <span class="line" data-startTime="1508">Chrome runtime on suspend is </span><span class="line" data-startTime="1508">called when the background </span><span class="line" data-startTime="1511">page is about to be killed. </span> <span class="line" data-startTime="1512">So when Chrome recognizes that </span><span class="line" data-startTime="1512">the background page isn't </span><span class="line" data-startTime="1515">doing anything &mdash; it doesn't have </span><span class="line" data-startTime="1515">any pop-ups open, you're </span><span class="line" data-startTime="1518">not inspecting it at the moment, </span><span class="line" data-startTime="1518">it doesn't have any </span><span class="line" data-startTime="1520">active network requests, and </span><span class="line" data-startTime="1520">things along these lines &mdash; </span><span class="line" data-startTime="1522">will go ahead and send an </span><span class="line" data-startTime="1522">on suspend event to the </span><span class="line" data-startTime="1524">background page. </span> <span class="line" data-startTime="1526">You'll have a little bit of time </span><span class="line" data-startTime="1526">here to do any sort of </span><span class="line" data-startTime="1528">last minute saving. </span></p>

<p><span class="line" data-startTime="1529">This isn't a good time to start </span><span class="line" data-startTime="1529">uploading 10 megs of </span><span class="line" data-startTime="1532">data to an external server. </span> <span class="line" data-startTime="1534">You should be saving </span><span class="line" data-startTime="1534">as you go. </span> <span class="line" data-startTime="1535">Basically, you should be ready </span><span class="line" data-startTime="1535">to die as soon as this thing </span><span class="line" data-startTime="1538">is called &mdash; </span><span class="line" data-startTime="1539">or your process should </span><span class="line" data-startTime="1539">be ready to die. </span> <span class="line" data-startTime="1541">You, of course, should </span><span class="line" data-startTime="1541">not be ready to die. </span> <span class="line" data-startTime="1543">Chrome runtime on suspend </span><span class="line" data-startTime="1543">will be called. </span> <span class="line" data-startTime="1545">It'll execute. </span> <span class="line" data-startTime="1546">And then some arbitrary period </span><span class="line" data-startTime="1546">of time later, your process </span><span class="line" data-startTime="1549">will be killed entirely. </span> <span class="line" data-startTime="1550">It'll be spun back up </span><span class="line" data-startTime="1550">again when any of </span><span class="line" data-startTime="1552">these events are triggered. </span> <span class="line" data-startTime="1555">It's not, however, the case that </span><span class="line" data-startTime="1555">you can only respond to </span><span class="line" data-startTime="1558">user driven events. </span></p>

<p><span class="line" data-startTime="1559">Some of your writing extensions </span><span class="line" data-startTime="1559">that need to go out </span><span class="line" data-startTime="1561">to the web, pull some data, </span><span class="line" data-startTime="1561">store it locally, and then be </span><span class="line" data-startTime="1564">ready and responsive </span><span class="line" data-startTime="1564">for your users. </span> <span class="line" data-startTime="1566">We've then created an Alarms </span><span class="line" data-startTime="1566">API that works exactly for </span><span class="line" data-startTime="1569">this use case. </span> <span class="line" data-startTime="1570">At some point in the future, </span><span class="line" data-startTime="1570">you can wake your extension </span><span class="line" data-startTime="1573">back up, do some processing, </span><span class="line" data-startTime="1573">and then go back to sleep. </span> <span class="line" data-startTime="1576">For example, you can create </span><span class="line" data-startTime="1576">a period in minutes, which </span><span class="line" data-startTime="1579">simply means that your extension </span><span class="line" data-startTime="1579">will be triggered </span><span class="line" data-startTime="1581">every 10 minutes </span><span class="line" data-startTime="1581">at this point. </span> <span class="line" data-startTime="1583">Every 10 minutes, you can go out </span><span class="line" data-startTime="1583">to the web, pull some new </span><span class="line" data-startTime="1585">information, store it locally, </span><span class="line" data-startTime="1585">and be ready for your user's </span><span class="line" data-startTime="1589">response whenever &mdash; or ready </span><span class="line" data-startTime="1589">to respond to your user </span><span class="line" data-startTime="1591">whenever they actually interact </span><span class="line" data-startTime="1591">with your extension. </span> <span class="line" data-startTime="1594">You can do this as a one off, </span><span class="line" data-startTime="1594">as a repeating, or at some </span><span class="line" data-startTime="1598">specific point in the future. </span> <span class="line" data-startTime="1599">We give you a lot </span><span class="line" data-startTime="1599">of options here. </span> <span class="line" data-startTime="1602">Another area in which we see </span><span class="line" data-startTime="1602">extensions actually requesting </span><span class="line" data-startTime="1605">more permissions than they need </span><span class="line" data-startTime="1605">is keyboard shortcuts. </span></p>

<p><span class="line" data-startTime="1609">Key bindings, at the moment, </span><span class="line" data-startTime="1609">are a big mess </span><span class="line" data-startTime="1611">in extension land. </span> <span class="line" data-startTime="1612">To bind to a specific keyboard </span><span class="line" data-startTime="1612">shortcut, you have to request </span><span class="line" data-startTime="1616">host permissions to all URLs, </span><span class="line" data-startTime="1616">so the entire internet. </span> <span class="line" data-startTime="1619">Then you inject a content </span><span class="line" data-startTime="1619">script that </span><span class="line" data-startTime="1620">listens for key presses. </span> <span class="line" data-startTime="1622">And you really, really hope </span><span class="line" data-startTime="1622">that this content script </span><span class="line" data-startTime="1624">doesn't actually interfere in </span><span class="line" data-startTime="1624">some way with the application </span><span class="line" data-startTime="1626">that your user is running or get </span><span class="line" data-startTime="1626">overwritten in some way by </span><span class="line" data-startTime="1630">the application user </span><span class="line" data-startTime="1630">is running. </span> <span class="line" data-startTime="1632">We can do much better </span><span class="line" data-startTime="1632">than this. </span></p>

<p><span class="line" data-startTime="1634">Our attempt at doing better is </span><span class="line" data-startTime="1634">the keybindings API, which is </span><span class="line" data-startTime="1636">currently an experimental. </span> <span class="line" data-startTime="1638">The keybindings API is a </span><span class="line" data-startTime="1638">declarative API that allows </span><span class="line" data-startTime="1641">you to say, I want to respond. </span> <span class="line" data-startTime="1642">Or I have a couple </span><span class="line" data-startTime="1642">of commands. </span> <span class="line" data-startTime="1644">And these commands should be </span><span class="line" data-startTime="1644">associated with specific </span><span class="line" data-startTime="1647">suggested keyboard shortcuts. </span> <span class="line" data-startTime="1649">This is &mdash; </span><span class="line" data-startTime="1649">should be, I think, be </span><span class="line" data-startTime="1649">relatively straightforward. </span> <span class="line" data-startTime="1651">You define a list of commands. </span> <span class="line" data-startTime="1653">Each of the commands </span><span class="line" data-startTime="1653">has a description </span><span class="line" data-startTime="1654">associated with it. </span> <span class="line" data-startTime="1655">And each of the commands has </span><span class="line" data-startTime="1655">a list of suggested keys. </span></p>

<p><span class="line" data-startTime="1658">You can set up different </span><span class="line" data-startTime="1658">suggested keys for the default </span><span class="line" data-startTime="1661">or for a specific platform. </span> <span class="line" data-startTime="1662">We think this gives you </span><span class="line" data-startTime="1662">a lot of flexibility. </span> <span class="line" data-startTime="1665">Inside of your extension will </span><span class="line" data-startTime="1665">look a little bit like this. </span> <span class="line" data-startTime="1668">You'll hook it into the on </span><span class="line" data-startTime="1668">command event of keybindings. </span> <span class="line" data-startTime="1671">And, at that point, you'll </span><span class="line" data-startTime="1671">get a string. </span> <span class="line" data-startTime="1673">And that string is going to be </span><span class="line" data-startTime="1673">the same string you defined in </span><span class="line" data-startTime="1675">the manifest file. </span> <span class="line" data-startTime="1676">You'll get this command. </span> <span class="line" data-startTime="1677">You can respond to it </span><span class="line" data-startTime="1677">in some useful way. </span> <span class="line" data-startTime="1679">What you might have seen is </span><span class="line" data-startTime="1679">Execute Browser Action as a </span><span class="line" data-startTime="1683">specific command that will </span><span class="line" data-startTime="1683">allow you to execute the </span><span class="line" data-startTime="1686">pop-up or execute the On Clicked </span><span class="line" data-startTime="1686">event of your browser </span><span class="line" data-startTime="1689">action with a keyboard </span><span class="line" data-startTime="1689">shortcut. </span> <span class="line" data-startTime="1691">This is something that hasn't </span><span class="line" data-startTime="1691">been possible before, even by </span><span class="line" data-startTime="1694">injecting content scripts. </span></p>

<p><span class="line" data-startTime="1695">And it's going to be a big </span><span class="line" data-startTime="1695">benefit, we think, of moving </span><span class="line" data-startTime="1697">over to the keybindings API. </span> <span class="line" data-startTime="1699">You'll be able to, for instance, </span><span class="line" data-startTime="1699">just do a pop-up by </span><span class="line" data-startTime="1701">executing some keyboard </span><span class="line" data-startTime="1701">shortcut. </span> <span class="line" data-startTime="1704">There are a couple </span><span class="line" data-startTime="1704">of to-dos here. </span> <span class="line" data-startTime="1705">It's not done. </span> <span class="line" data-startTime="1706">As you notice, it's </span><span class="line" data-startTime="1706">an experimental. </span> <span class="line" data-startTime="1708">Mac support is simply </span><span class="line" data-startTime="1708">nonexistent at the moment. </span> <span class="line" data-startTime="1710">We're working on it. </span> <span class="line" data-startTime="1711">But it's going to take </span><span class="line" data-startTime="1711">a little time. </span> <span class="line" data-startTime="1713">And we also don't have any UI </span><span class="line" data-startTime="1713">for dealing with conflicts. </span></p>

<p><span class="line" data-startTime="1716">We have some UI for assigning </span><span class="line" data-startTime="1716">shortcuts. </span> <span class="line" data-startTime="1718">But it's just not there yet. </span> <span class="line" data-startTime="1719">We actually just implemented </span><span class="line" data-startTime="1719">saving last week. </span> <span class="line" data-startTime="1722">You could look at </span><span class="line" data-startTime="1722">it beforehand. </span> <span class="line" data-startTime="1723">But this week you can actually </span><span class="line" data-startTime="1723">save new keyboard shortcuts. </span> <span class="line" data-startTime="1727">So we're getting there. </span> <span class="line" data-startTime="1727">Slowly but surely. </span> <span class="line" data-startTime="1729">Let's talk a little bit </span><span class="line" data-startTime="1729">about network APIs. </span> <span class="line" data-startTime="1731">There a couple of really </span><span class="line" data-startTime="1731">interesting APIs that we've </span><span class="line" data-startTime="1734">released over the last year. </span> <span class="line" data-startTime="1735">And the usage of those APIs has </span><span class="line" data-startTime="1735">surprised us in some ways </span><span class="line" data-startTime="1739">but is also, we think, pointing </span><span class="line" data-startTime="1739">towards things that </span><span class="line" data-startTime="1742">we can do in the future </span><span class="line" data-startTime="1742">to make things better. </span> <span class="line" data-startTime="1745">That future thing </span><span class="line" data-startTime="1745">is going to be a </span><span class="line" data-startTime="1746">declarative web request API. </span> <span class="line" data-startTime="1748">To understand why that's </span><span class="line" data-startTime="1748">important and why that's </span><span class="line" data-startTime="1750">valuable, let's first talk a </span><span class="line" data-startTime="1750">little bit about the web </span><span class="line" data-startTime="1752">request API that exists today. </span> <span class="line" data-startTime="1755">The web request API looks </span><span class="line" data-startTime="1755">something like this. </span></p>

<p><span class="line" data-startTime="1757">In this case, I went to block </span><span class="line" data-startTime="1757">my user from going to </span><span class="line" data-startTime="1759">malicious websites. </span> <span class="line" data-startTime="1760">As we all know, malicious </span><span class="line" data-startTime="1760">websites have an evil=1 as the </span><span class="line" data-startTime="1765">last get parameter. </span> <span class="line" data-startTime="1766">I mean, it's great. </span> <span class="line" data-startTime="1767">It's really useful that they do </span><span class="line" data-startTime="1767">this because it allows us </span><span class="line" data-startTime="1769">to block their requests. </span> <span class="line" data-startTime="1771">Blocking their requests looks </span><span class="line" data-startTime="1771">something like this, </span><span class="line" data-startTime="1773">chrome.webreques </span><span class="line" data-startTime="1773">t.onbeforerequest &mdash; </span><span class="line" data-startTime="1775">so before the request is </span><span class="line" data-startTime="1775">actually sent out of my </span><span class="line" data-startTime="1777">computer to do something </span><span class="line" data-startTime="1777">useful. </span></p>

<p><span class="line" data-startTime="1779">You see the last item here </span><span class="line" data-startTime="1779">contains a few flags, in this </span><span class="line" data-startTime="1781">case blocking. </span> <span class="line" data-startTime="1782">This is the first synchronous </span><span class="line" data-startTime="1782">API that we've created. </span> <span class="line" data-startTime="1785">And the synchronicity of </span><span class="line" data-startTime="1785">the API is a little bit </span><span class="line" data-startTime="1788">problematic for us. </span> <span class="line" data-startTime="1790">It's problematic for the </span><span class="line" data-startTime="1790">following reasons. </span> <span class="line" data-startTime="1792">Chrome looks more or </span><span class="line" data-startTime="1792">less like this. </span> <span class="line" data-startTime="1793">We have a browser process that </span><span class="line" data-startTime="1793">manages a wide variety of </span><span class="line" data-startTime="1796">renderer processes. </span> <span class="line" data-startTime="1798">Each tab, more or less, has </span><span class="line" data-startTime="1798">its own renderer process. </span> <span class="line" data-startTime="1801">So, if a web page wants to load </span><span class="line" data-startTime="1801">a URL, if they're using a </span><span class="line" data-startTime="1805">web request API, the web page </span><span class="line" data-startTime="1805">will say, OK, I'd like to load </span><span class="line" data-startTime="1809">this image. </span> <span class="line" data-startTime="1809">That request will be sent </span><span class="line" data-startTime="1809">up to the browser. </span></p>

<p><span class="line" data-startTime="1811">The browser they need to make a </span><span class="line" data-startTime="1811">decision should the web page </span><span class="line" data-startTime="1814">load the image or not. </span> <span class="line" data-startTime="1815">To make that decision, something </span><span class="line" data-startTime="1815">it sends a message </span><span class="line" data-startTime="1819">down to the extension. </span> <span class="line" data-startTime="1820">The extension &mdash; </span><span class="line" data-startTime="1821">or the message then hops from </span><span class="line" data-startTime="1821">c to JavaScript in order to </span><span class="line" data-startTime="1824">make the determination to do </span><span class="line" data-startTime="1824">something useful to execute </span><span class="line" data-startTime="1827">this code up above and then </span><span class="line" data-startTime="1827">sends that information back to </span><span class="line" data-startTime="1830">the browser process. </span> <span class="line" data-startTime="1831">In parallel, it's sending these </span><span class="line" data-startTime="1831">requests out to all the </span><span class="line" data-startTime="1834">extensions that have registered </span><span class="line" data-startTime="1834">for a web request </span><span class="line" data-startTime="1837">that filters into this </span><span class="line" data-startTime="1837">specific request. </span> <span class="line" data-startTime="1840">Sending all of this information </span><span class="line" data-startTime="1840">back and forth </span><span class="line" data-startTime="1843">between the processes </span><span class="line" data-startTime="1843">is costly. </span> <span class="line" data-startTime="1845">It's more costly than we </span><span class="line" data-startTime="1845">actually expected it to be. </span> <span class="line" data-startTime="1847">If you go to Chrome histograms, </span><span class="line" data-startTime="1847">you can see </span><span class="line" data-startTime="1850">exactly how costly it </span><span class="line" data-startTime="1850">is on your computer. </span></p>

<p><span class="line" data-startTime="1852">I created a bit of a </span><span class="line" data-startTime="1852">torture test here. </span> <span class="line" data-startTime="1854">But, you see &mdash; actually, you </span><span class="line" data-startTime="1854">probably can't see because </span><span class="line" data-startTime="1856">it's really small. </span> <span class="line" data-startTime="1857">But at the bottom here, the </span><span class="line" data-startTime="1857">longest request or the longest </span><span class="line" data-startTime="1860">wait between sending a message </span><span class="line" data-startTime="1860">from my page to the extension </span><span class="line" data-startTime="1864">and back was over two seconds. </span> <span class="line" data-startTime="1866">Now, this isn't typical. </span> <span class="line" data-startTime="1868">Most of the requests are </span><span class="line" data-startTime="1868">happening in well under 100 </span><span class="line" data-startTime="1870">milliseconds. </span> <span class="line" data-startTime="1871">But over two seconds to </span><span class="line" data-startTime="1871">process a request is </span><span class="line" data-startTime="1874">incredible. </span> <span class="line" data-startTime="1875">That's much longer than it </span><span class="line" data-startTime="1875">should actually take to load </span><span class="line" data-startTime="1877">the resource in the </span><span class="line" data-startTime="1877">first place. </span> <span class="line" data-startTime="1878">We need to do better </span><span class="line" data-startTime="1878">than this. </span> <span class="line" data-startTime="1880">And we think we can. </span> <span class="line" data-startTime="1882">The declarative web request API </span><span class="line" data-startTime="1882">is a declarative mechanism </span><span class="line" data-startTime="1887">for determining whether or not a </span><span class="line" data-startTime="1887">request should be blocked or </span><span class="line" data-startTime="1890">redirected or anything </span><span class="line" data-startTime="1890">along these lines. </span> <span class="line" data-startTime="1893">You declare a declarative </span><span class="line" data-startTime="1893">web request permission. </span> <span class="line" data-startTime="1895">And you create a series </span><span class="line" data-startTime="1895">of rules. </span></p>

<p><span class="line" data-startTime="1898">You might do this in the on </span><span class="line" data-startTime="1898">install event of your </span><span class="line" data-startTime="1903">background page. </span> <span class="line" data-startTime="1904">You create a rule. </span> <span class="line" data-startTime="1905">Rules contain conditions </span><span class="line" data-startTime="1905">and actions. </span> <span class="line" data-startTime="1908">If the request matches </span><span class="line" data-startTime="1908">the condition &mdash; </span><span class="line" data-startTime="1910">so if they're going to </span><span class="line" data-startTime="1910">evil.example.com &mdash; </span><span class="line" data-startTime="1913">then we're going to </span><span class="line" data-startTime="1913">block the request. </span> <span class="line" data-startTime="1915">Once we've created this large </span><span class="line" data-startTime="1915">array of rules, we add all of </span><span class="line" data-startTime="1918">the rules into Chrome. </span> <span class="line" data-startTime="1921">And we can do this incredibly </span><span class="line" data-startTime="1921">efficiently. </span> <span class="line" data-startTime="1923">Adding the rules to Chrome </span><span class="line" data-startTime="1923">standardizes the way that we </span><span class="line" data-startTime="1926">deal with network requests, </span><span class="line" data-startTime="1926">giving us the ability to very </span><span class="line" data-startTime="1929">efficiently store the </span><span class="line" data-startTime="1929">information in the browser </span><span class="line" data-startTime="1931">process as opposed to pushing </span><span class="line" data-startTime="1931">everything down to the </span><span class="line" data-startTime="1934">extension process. </span> <span class="line" data-startTime="1935">This has a couple </span><span class="line" data-startTime="1935">of advantages. </span></p>

<p><span class="line" data-startTime="1936">First, we don't have </span><span class="line" data-startTime="1936">to do so much IPC </span><span class="line" data-startTime="1938">messaging between processes. </span> <span class="line" data-startTime="1940">But second, because we've </span><span class="line" data-startTime="1940">defined a single mechanism for </span><span class="line" data-startTime="1944">declaring these sorts of rules, </span><span class="line" data-startTime="1944">we can do it very, very </span><span class="line" data-startTime="1949">efficiently indeed. </span> <span class="line" data-startTime="1952">You can set conditions </span><span class="line" data-startTime="1952">on basically every </span><span class="line" data-startTime="1954">piece of the URL. </span> <span class="line" data-startTime="1955">So you can look for ports. </span> <span class="line" data-startTime="1956">You can look for paths. </span> <span class="line" data-startTime="1958">And you can look for </span><span class="line" data-startTime="1958">query strings. </span> <span class="line" data-startTime="1960">You can also look at the </span><span class="line" data-startTime="1960">entire URL if that </span><span class="line" data-startTime="1962">suits your use case. </span></p>

<p><span class="line" data-startTime="1964">We haven't yet added regex </span><span class="line" data-startTime="1964">for the entire URL. </span> <span class="line" data-startTime="1967">We're working on that. </span> <span class="line" data-startTime="1968">What we have added, however, is </span><span class="line" data-startTime="1968">a variety of conditions &mdash; </span><span class="line" data-startTime="1970">or, I'm sorry, a variety </span><span class="line" data-startTime="1970">of actions. </span> <span class="line" data-startTime="1973">The actions that are associated </span><span class="line" data-startTime="1973">with these URLs </span><span class="line" data-startTime="1976">are, for instance, </span><span class="line" data-startTime="1976">cancel requests. </span> <span class="line" data-startTime="1977">This is probably the </span><span class="line" data-startTime="1977">most common. </span> <span class="line" data-startTime="1979">You simply don't want </span><span class="line" data-startTime="1979">to make this request </span><span class="line" data-startTime="1980">in the first place. </span> <span class="line" data-startTime="1981">You don't want to send </span><span class="line" data-startTime="1981">any information out. </span></p>

<p><span class="line" data-startTime="1983">What we also all you </span><span class="line" data-startTime="1983">to do is redirect. </span> <span class="line" data-startTime="1985">And you can redirect not only to </span><span class="line" data-startTime="1985">a specific URL, but you can </span><span class="line" data-startTime="1988">redirect using a regex. </span> <span class="line" data-startTime="1990">For instance, you could redirect </span><span class="line" data-startTime="1990">all HTTP requests to </span><span class="line" data-startTime="1993">the exact same request </span><span class="line" data-startTime="1993">on HTTPS. </span> <span class="line" data-startTime="1996">Unfortunately, it isn't quite </span><span class="line" data-startTime="1996">that simple, which is why </span><span class="line" data-startTime="1998">HTTPS Everywhere exists. </span> <span class="line" data-startTime="2000">But we think this is going to </span><span class="line" data-startTime="2000">give extensions like HTTPS </span><span class="line" data-startTime="2003">Everywhere the ability to create </span><span class="line" data-startTime="2003">this really complicated </span><span class="line" data-startTime="2007">rule set without actually </span><span class="line" data-startTime="2007">jumping into JavaScript in </span><span class="line" data-startTime="2010">order to make that </span><span class="line" data-startTime="2010">determination. </span></p>

<p><span class="line" data-startTime="2015">We also give you the ability </span><span class="line" data-startTime="2015">to deal with the request </span><span class="line" data-startTime="2017">headers and the response headers </span><span class="line" data-startTime="2017">that you can set and </span><span class="line" data-startTime="2019">remove headers simply based upon </span><span class="line" data-startTime="2019">the URL that the user is </span><span class="line" data-startTime="2023">actually going to. </span> <span class="line" data-startTime="2027">You can ignore rules. </span> <span class="line" data-startTime="2028">So if you're familiar at all </span><span class="line" data-startTime="2028">with email, you've probably </span><span class="line" data-startTime="2030">set up a bunch of rules. </span> <span class="line" data-startTime="2031">And you have things like, if </span><span class="line" data-startTime="2031">this, then do this and ignore </span><span class="line" data-startTime="2034">the rest of the rules. </span> <span class="line" data-startTime="2036">This allows you to set </span><span class="line" data-startTime="2036">a priority with </span><span class="line" data-startTime="2038">each of these rules. </span> <span class="line" data-startTime="2039">So when you create really </span><span class="line" data-startTime="2039">complex rule sets, multiple </span><span class="line" data-startTime="2041">things might match. </span> <span class="line" data-startTime="2042">And you want to make sure that </span><span class="line" data-startTime="2042">the right thing actually </span><span class="line" data-startTime="2044">executes based upon </span><span class="line" data-startTime="2044">that action. </span></p>

<p><span class="line" data-startTime="2046">So you set a priority </span><span class="line" data-startTime="2046">with the rule. </span> <span class="line" data-startTime="2048">And at the end of your actions, </span><span class="line" data-startTime="2048">you can say, ignore </span><span class="line" data-startTime="2050">any other rules that are lower </span><span class="line" data-startTime="2050">priority than this one. </span> <span class="line" data-startTime="2057">The act of tab permission is the </span><span class="line" data-startTime="2057">last new thing that I want </span><span class="line" data-startTime="2061">to talk about today. </span> <span class="line" data-startTime="2062">The active tab permission is </span><span class="line" data-startTime="2062">something that we think is </span><span class="line" data-startTime="2065">going to be really </span><span class="line" data-startTime="2065">quite powerful. </span> <span class="line" data-startTime="2066">It's something that we, I think, </span><span class="line" data-startTime="2066">are very excited about. </span> <span class="line" data-startTime="2069">What it does is allow you to </span><span class="line" data-startTime="2069">deal with specific hosts </span><span class="line" data-startTime="2073">without requesting permission </span><span class="line" data-startTime="2073">for those hosts. </span> <span class="line" data-startTime="2076">We see a lot of extensions out </span><span class="line" data-startTime="2076">there that really only need to </span><span class="line" data-startTime="2079">interact with the page the user </span><span class="line" data-startTime="2079">is currently viewing. </span> <span class="line" data-startTime="2082">For example, Google has a </span><span class="line" data-startTime="2082">dictionary extension, which </span><span class="line" data-startTime="2085">allows you to grab a word out </span><span class="line" data-startTime="2085">of a page and give you a </span><span class="line" data-startTime="2088">definition for that word. </span> <span class="line" data-startTime="2090">It's incredibly useful. </span></p>

<p><span class="line" data-startTime="2091">But in order to act, it injects </span><span class="line" data-startTime="2091">content scripts into </span><span class="line" data-startTime="2094">every page that you go </span><span class="line" data-startTime="2094">to and then listens </span><span class="line" data-startTime="2096">for a browser action. </span> <span class="line" data-startTime="2098">When you click on the browser </span><span class="line" data-startTime="2098">action or use a context menu, </span><span class="line" data-startTime="2101">it then grabs the thing that </span><span class="line" data-startTime="2101">you've currently selected, </span><span class="line" data-startTime="2104">does something useful with </span><span class="line" data-startTime="2104">it, and displays </span><span class="line" data-startTime="2106">the result to you. </span> <span class="line" data-startTime="2107">It has to request host </span><span class="line" data-startTime="2107">permissions to every website </span><span class="line" data-startTime="2110">on the net in order </span><span class="line" data-startTime="2110">to do that. </span> <span class="line" data-startTime="2112">Active tab permission would give </span><span class="line" data-startTime="2112">it the ability to, based </span><span class="line" data-startTime="2115">upon a user's gesture, inject </span><span class="line" data-startTime="2115">script into a page that it </span><span class="line" data-startTime="2119">hasn't requested permissions </span><span class="line" data-startTime="2119">for. </span></p>

<p><span class="line" data-startTime="2121">In this case, I would request </span><span class="line" data-startTime="2121">permission for </span><span class="line" data-startTime="2123">active tab and tabs. </span> <span class="line" data-startTime="2125">You'll note that I'm not </span><span class="line" data-startTime="2125">requesting any host </span><span class="line" data-startTime="2127">permissions at this point. </span> <span class="line" data-startTime="2128">I can, however, listen </span><span class="line" data-startTime="2128">for a browser action. </span> <span class="line" data-startTime="2131">I could also listen for a </span><span class="line" data-startTime="2131">context menu and act upon that </span><span class="line" data-startTime="2134">action by injecting script </span><span class="line" data-startTime="2134">into this page. </span> <span class="line" data-startTime="2137">We're using the user's </span><span class="line" data-startTime="2137">interaction with either the </span><span class="line" data-startTime="2139">browser action or the context </span><span class="line" data-startTime="2139">menu in order to give the </span><span class="line" data-startTime="2144">extension the ability to inject </span><span class="line" data-startTime="2144">script into this new </span><span class="line" data-startTime="2146">context, even though it hasn't </span><span class="line" data-startTime="2146">explicitly requested </span><span class="line" data-startTime="2150">permission for it. </span></p>

<p><span class="line" data-startTime="2151">We think this is going to be </span><span class="line" data-startTime="2151">really useful, not only for </span><span class="line" data-startTime="2153">the Google dictionary extension </span><span class="line" data-startTime="2153">but for the wide </span><span class="line" data-startTime="2155">variety of extensions that we </span><span class="line" data-startTime="2155">see in the Chrome Web Store </span><span class="line" data-startTime="2158">that are looking for exactly </span><span class="line" data-startTime="2158">this sort of functionality. </span> <span class="line" data-startTime="2161">We see many extensions that </span><span class="line" data-startTime="2161">really don't need permission </span><span class="line" data-startTime="2164">for the entire web. </span> <span class="line" data-startTime="2164">But they don't have any other </span><span class="line" data-startTime="2164">mechanism of doing it. </span> <span class="line" data-startTime="2167">We'd love to see people </span><span class="line" data-startTime="2167">experimenting with this. </span> <span class="line" data-startTime="2169">It's in canary right now. </span> <span class="line" data-startTime="2171">It'll be in dev relatively </span><span class="line" data-startTime="2171">soon. </span></p>

<p><span class="line" data-startTime="2176">So we've talked about a wide </span><span class="line" data-startTime="2176">variety of things. </span> <span class="line" data-startTime="2178">What do we actually want </span><span class="line" data-startTime="2178">to see happen? </span><span class="line" data-startTime="2180">And what do we think that we can </span><span class="line" data-startTime="2180">do together as a community </span><span class="line" data-startTime="2183">in order to strengthen </span><span class="line" data-startTime="2183">this ecosystem? </span><span class="line" data-startTime="2185">The first thing is to really </span><span class="line" data-startTime="2185">take a hard look at Manifest </span><span class="line" data-startTime="2189">Version 2 and start migrating </span><span class="line" data-startTime="2189">extensions over to it. </span> <span class="line" data-startTime="2192">Manifest Version 2 gives us </span><span class="line" data-startTime="2192">really good guarantees about </span><span class="line" data-startTime="2196">the way that the extension can </span><span class="line" data-startTime="2196">function and the security that </span><span class="line" data-startTime="2199">comes along with that. </span> <span class="line" data-startTime="2200">If we ban inline JavaScript, </span><span class="line" data-startTime="2200">there's a huge win associated </span><span class="line" data-startTime="2204">with that, not only for us but </span><span class="line" data-startTime="2204">also for the users that are </span><span class="line" data-startTime="2207">using extensions at the </span><span class="line" data-startTime="2207">end of the day. </span> <span class="line" data-startTime="2209">They get a safer ecosystem. </span></p>

<p><span class="line" data-startTime="2210">And they can more easily install </span><span class="line" data-startTime="2210">extensions with the </span><span class="line" data-startTime="2215">understanding that those </span><span class="line" data-startTime="2215">extensions are safe. </span> <span class="line" data-startTime="2217">We'd love to see people start </span><span class="line" data-startTime="2217">migrating over to Manifest </span><span class="line" data-startTime="2219">Version 2 and, as I said, </span><span class="line" data-startTime="2219">talking to us </span><span class="line" data-startTime="2222">about the pain points. </span> <span class="line" data-startTime="2223">We've really heard what people </span><span class="line" data-startTime="2223">have said with regard to eval. </span> <span class="line" data-startTime="2226">We've created a work </span><span class="line" data-startTime="2226">around for that. </span> <span class="line" data-startTime="2228">That's the model that we'd like </span><span class="line" data-startTime="2228">to see going forward. </span> <span class="line" data-startTime="2230">We really want to understand </span><span class="line" data-startTime="2230">what the problems are that you </span><span class="line" data-startTime="2233">guys are going to face when </span><span class="line" data-startTime="2233">you're building extensions in </span><span class="line" data-startTime="2235">the future under these </span><span class="line" data-startTime="2235">new restrictions. </span></p>

<p><span class="line" data-startTime="2240">You can report issues either </span><span class="line" data-startTime="2240">by filing a bug at </span><span class="line" data-startTime="2242">new.crbug.com or by hopping onto </span><span class="line" data-startTime="2242">the Chromium extensions </span><span class="line" data-startTime="2247">mailing list. </span> <span class="line" data-startTime="2248">So you can send an email </span><span class="line" data-startTime="2248">to chromium-extensi </span><span class="line" data-startTime="2249">ons@chromium.org or subscribe </span><span class="line" data-startTime="2249">to the mailing list yourself </span><span class="line" data-startTime="2254">if you'd like to do that. </span> <span class="line" data-startTime="2255">That's via groups.google.com. </span> <span class="line" data-startTime="2258">We'd then like for you to take </span><span class="line" data-startTime="2258">a look at the new APIs that </span><span class="line" data-startTime="2261">are coming out. </span> <span class="line" data-startTime="2261">In the past, we've had the </span><span class="line" data-startTime="2261">concept of experimental APIs. </span> <span class="line" data-startTime="2265">We're going to start doing </span><span class="line" data-startTime="2265">away with that slowly. </span> <span class="line" data-startTime="2268">Instead, we're going to start </span><span class="line" data-startTime="2268">experimenting via channels. </span> <span class="line" data-startTime="2271">That is, an API will be </span><span class="line" data-startTime="2271">available in dev but not in </span><span class="line" data-startTime="2274">beta or beta but not stable. </span></p>

<p><span class="line" data-startTime="2276">This, I think, will give us a </span><span class="line" data-startTime="2276">much larger audience for the </span><span class="line" data-startTime="2279">new APIs that are coming out. </span> <span class="line" data-startTime="2281">Instead of only targeting the </span><span class="line" data-startTime="2281">users that have set the </span><span class="line" data-startTime="2285">experimental flag &mdash; that means </span><span class="line" data-startTime="2285">they've gone into flags, </span><span class="line" data-startTime="2288">they've set experimental and so </span><span class="line" data-startTime="2288">on, which is a very small </span><span class="line" data-startTime="2290">number of people indeed &mdash; </span><span class="line" data-startTime="2292">you'll be able to target </span><span class="line" data-startTime="2292">everyone who is </span><span class="line" data-startTime="2294">on a certain channel. </span> <span class="line" data-startTime="2295">So everyone using dev can start </span><span class="line" data-startTime="2295">installing extensions </span><span class="line" data-startTime="2298">that are using these new </span><span class="line" data-startTime="2298">privileges or the new </span><span class="line" data-startTime="2300">extension APIs that </span><span class="line" data-startTime="2300">are coming out. </span> <span class="line" data-startTime="2302">And as soon as that moves to </span><span class="line" data-startTime="2302">beta, your audience broadens </span><span class="line" data-startTime="2305">even further. </span> <span class="line" data-startTime="2307">We think this will give you the </span><span class="line" data-startTime="2307">ability to start playing </span><span class="line" data-startTime="2309">around with extension APIs </span><span class="line" data-startTime="2309">earlier without forcing your </span><span class="line" data-startTime="2312">users to do something </span><span class="line" data-startTime="2312">that they're not at </span><span class="line" data-startTime="2314">all comfortable with. </span> <span class="line" data-startTime="2314">That is going in deep into </span><span class="line" data-startTime="2314">Chrome and setting some sort </span><span class="line" data-startTime="2318">of flag that they don't </span><span class="line" data-startTime="2318">understand. </span></p>

<p><span class="line" data-startTime="2320">Finally, again, we'd really love </span><span class="line" data-startTime="2320">to hear what the issues </span><span class="line" data-startTime="2324">are, what the pain points are, </span><span class="line" data-startTime="2324">what we can address, and what </span><span class="line" data-startTime="2327">we can address together, what </span><span class="line" data-startTime="2327">the things are that are really </span><span class="line" data-startTime="2330">going to be problematic going </span><span class="line" data-startTime="2330">forward because we want to </span><span class="line" data-startTime="2332">solve these things. </span> <span class="line" data-startTime="2333">We want people to start using </span><span class="line" data-startTime="2333">the new Manifest version and </span><span class="line" data-startTime="2337">the new APIs. </span> <span class="line" data-startTime="2338">And that's simply not going to </span><span class="line" data-startTime="2338">happen if there are blockers. </span> <span class="line" data-startTime="2340">So we want to understand </span><span class="line" data-startTime="2340">those blockers. </span> <span class="line" data-startTime="2342">And we want to fix them to </span><span class="line" data-startTime="2342">the best of our ability. </span> <span class="line" data-startTime="2347">You can contact me at </span><span class="line" data-startTime="2347">any of these places. </span></p>

<p><span class="line" data-startTime="2349">So I'm on Twitter, I'm on G+, </span><span class="line" data-startTime="2349">that's my website on GitHub. </span> <span class="line" data-startTime="2354">Or you can send me an email </span><span class="line" data-startTime="2354">personally, mkwst@google.com. </span> <span class="line" data-startTime="2359">I'd be happy to hear from you. </span> <span class="line" data-startTime="2360">And I'd be happy to hear from </span><span class="line" data-startTime="2360">now if you have any questions </span><span class="line" data-startTime="2362">or comments. </span> <span class="line" data-startTime="2365">[APPLAUSE] </span><span class="line" data-startTime="2370">Sorry. </span> <span class="line" data-startTime="2370">There are microphones </span><span class="line" data-startTime="2370">in the middle. </span> <span class="line" data-startTime="2372">So if you can walk over, </span><span class="line" data-startTime="2372">then everyone </span><span class="line" data-startTime="2373">can hear the questions. </span></p>

<p class="speaker"><span class="line" data-starttime="2376"><span class="speakerName">Audience</span>: So I have two </span><span class="line" data-startTime="2376">questions, if that's OK. </span></p>

<p class="speaker"><span class="line" data-starttime="2378"><span class="speakerName">Mike West</span>: Yeah, that's fine. </span></p>

<p class="speaker"><span class="line" data-starttime="2379"><span class="speakerName">Audience</span>: Cool. </span><span class="line" data-startTime="2380">So what's the &mdash; but with these </span><span class="line" data-startTime="2380">background pages that die when </span><span class="line" data-startTime="2384">they're not &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2385"><span class="speakerName">Mike West</span>: Event pages, yes. </span></p>

<p class="speaker"><span class="line" data-starttime="2387"><span class="speakerName">Audience</span>: What's the preferred </span><span class="line" data-startTime="2387">practice for push </span><span class="line" data-startTime="2388">notifications to Chrome </span><span class="line" data-startTime="2388">extensions? </span></p>

<p class="speaker"><span class="line" data-starttime="2390"><span class="speakerName">Mike West</span>: Push notifications </span><span class="line" data-startTime="2390">will be events </span><span class="line" data-startTime="2392">just like any other. </span><span class="line" data-startTime="2393">That is, you can subscribe </span><span class="line" data-startTime="2393">to them. </span><span class="line" data-startTime="2395">Chrome will recognize that </span><span class="line" data-startTime="2395">you've subscribed to them. </span><span class="line" data-startTime="2397">And when one comes in, you'll </span><span class="line" data-startTime="2397">get an event notification in </span><span class="line" data-startTime="2401">exactly the same way that </span><span class="line" data-startTime="2401">you would before. </span><span class="line" data-startTime="2403">There really should </span><span class="line" data-startTime="2403">be very little </span><span class="line" data-startTime="2404">difference with event pages. </span><span class="line" data-startTime="2406">It's just subscribing to events </span><span class="line" data-startTime="2406">and dealing with that </span><span class="line" data-startTime="2408">subscription. </span></p>

<p class="speaker"><span class="line" data-starttime="2409"><span class="speakerName">Audience</span>: OK, cool. </span><span class="line" data-startTime="2410">My other question is, I can't </span><span class="line" data-startTime="2410">help but notice some parallels </span><span class="line" data-startTime="2414">between, like, malicious Chrome </span><span class="line" data-startTime="2414">applications being out </span><span class="line" data-startTime="2418">there and malicious Android </span><span class="line" data-startTime="2418">applications. </span><span class="line" data-startTime="2420">And the Android team at Google </span><span class="line" data-startTime="2420">has made Bouncer, which for </span><span class="line" data-startTime="2423">those who aren't familiar, it's </span><span class="line" data-startTime="2423">a dynamic analysis tool </span><span class="line" data-startTime="2426">that runs your Android code. </span><span class="line" data-startTime="2428">And if it detects malicious </span><span class="line" data-startTime="2428">behavior, it </span><span class="line" data-startTime="2431">rejects you, basically. </span><span class="line" data-startTime="2432">Do you see anything like this </span><span class="line" data-startTime="2432">in the future for Chrome </span><span class="line" data-startTime="2435">extensions? </span></p>

<p class="speaker"><span class="line" data-starttime="2437"><span class="speakerName">Mike West</span>: As I said, I think </span><span class="line" data-startTime="2437">we're pretty happy with our </span><span class="line" data-startTime="2438">ability to deal with malicious </span><span class="line" data-startTime="2438">Chrome extensions, the </span><span class="line" data-startTime="2441">extensions that are actually </span><span class="line" data-startTime="2441">doing damage intentionally. </span> <span class="line" data-startTime="2444">The thing that we find much more </span><span class="line" data-startTime="2444">difficult to deal with </span><span class="line" data-startTime="2447">are the benign extensions that </span><span class="line" data-startTime="2447">are doing really good things </span><span class="line" data-startTime="2450">but are doing them in </span><span class="line" data-startTime="2450">dangerous ways. </span> <span class="line" data-startTime="2452">These sorts of things, we think, </span><span class="line" data-startTime="2452">are better addressed </span><span class="line" data-startTime="2455">simply by applying a policy to </span><span class="line" data-startTime="2455">the extensions that forces </span><span class="line" data-startTime="2459">them to do things </span><span class="line" data-startTime="2459">the right way. </span> <span class="line" data-startTime="2462">I hope that answers </span><span class="line" data-startTime="2462">your question. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2464"><span class="speakerName">Audience</span>: Sounds good. </span><span class="line" data-startTime="2464">Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="2465"><span class="speakerName">Mike West</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2468"><span class="speakerName">Audience</span>: Are there any plans </span><span class="line" data-startTime="2468">to have tighter integration </span><span class="line" data-startTime="2472">for having my web application </span><span class="line" data-startTime="2472">detect that you have an </span><span class="line" data-startTime="2477">extension installed and </span><span class="line" data-startTime="2477">be able to have </span><span class="line" data-startTime="2479">them communicate together? </span><span class="line" data-startTime="2480">Because right now, if I want </span><span class="line" data-startTime="2480">to pass information between </span><span class="line" data-startTime="2482">extension and my page, I have to </span><span class="line" data-startTime="2482">use an inner HTML with some </span><span class="line" data-startTime="2485">random element on the page. </span></p>

<p class="speaker"><span class="line" data-starttime="2487"><span class="speakerName">Mike West</span>: I mean, if you have </span><span class="line" data-startTime="2487">an extension that should </span><span class="line" data-startTime="2489">interact in some way with </span><span class="line" data-startTime="2489">a page, you can have an </span><span class="line" data-startTime="2492">interaction point &mdash; </span><span class="line" data-startTime="2494">well, I mean, you can send </span><span class="line" data-startTime="2494">messages to the extension. </span><span class="line" data-startTime="2496">So if you have a defined API, </span><span class="line" data-startTime="2496">you can send messages over. </span><span class="line" data-startTime="2500">You would have to have </span><span class="line" data-startTime="2500">that endpoint as a </span><span class="line" data-startTime="2502">web-accessible resource. </span><span class="line" data-startTime="2504">So that's where the new </span><span class="line" data-startTime="2504">stuff would come in. </span><span class="line" data-startTime="2507">What we would also suggest is </span><span class="line" data-startTime="2507">that you use the inline </span><span class="line" data-startTime="2509">install mechanism. </span><span class="line" data-startTime="2510">That would actually enable you </span><span class="line" data-startTime="2510">to install the extension if it </span><span class="line" data-startTime="2514">isn't already installed </span><span class="line" data-startTime="2514">on the website. </span><span class="line" data-startTime="2515">So you could prompt the user and </span><span class="line" data-startTime="2515">then install it directly </span><span class="line" data-startTime="2518">from the page without hopping </span><span class="line" data-startTime="2518">over to the web store. </span></p>

<p class="speaker"><span class="line" data-starttime="2520"><span class="speakerName">Audience</span>: And one more </span><span class="line" data-startTime="2520">question is, is </span><span class="line" data-startTime="2522">there any plans to &mdash; </span><span class="line" data-startTime="2525">for example, we wrote a Chrome </span><span class="line" data-startTime="2525">extension that would let users </span><span class="line" data-startTime="2529">give us feedback about an </span><span class="line" data-startTime="2529">application or if they </span><span class="line" data-startTime="2531">experienced a bug with our </span><span class="line" data-startTime="2531">application, they could send </span><span class="line" data-startTime="2534">us a screen shot basically of </span><span class="line" data-startTime="2534">what they were looking at when </span><span class="line" data-startTime="2536">it happened. </span><span class="line" data-startTime="2537">We wanted to be able to get </span><span class="line" data-startTime="2537">access to the console log from </span><span class="line" data-startTime="2540">the extension so that we could </span><span class="line" data-startTime="2540">see what error they got. </span><span class="line" data-startTime="2542">Is there any plans to get that </span><span class="line" data-startTime="2542">kind of information available? </span></p>

<p class="speaker"><span class="line" data-starttime="2545"><span class="speakerName">Mike West</span>: Within your </span><span class="line" data-startTime="2545">background page, you should be </span><span class="line" data-startTime="2547">able to use window.onerror in </span><span class="line" data-startTime="2547">the exact same way that you do </span><span class="line" data-startTime="2550">on web pages. </span><span class="line" data-startTime="2551">That would give you any </span><span class="line" data-startTime="2551">errors that happens. </span><span class="line" data-startTime="2553">And you'd be able to report </span><span class="line" data-startTime="2553">those in the same way that you </span><span class="line" data-startTime="2556">can on the open web. </span></p>

<p class="speaker"><span class="line" data-starttime="2557"><span class="speakerName">Audience</span>: But not like, for </span><span class="line" data-startTime="2557">example, informational </span><span class="line" data-startTime="2560">messages, debug messages </span><span class="line" data-startTime="2560">we might output. </span></p>

<p class="speaker"><span class="line" data-starttime="2563"><span class="speakerName">Mike West</span>: No, if you're </span><span class="line" data-startTime="2563">outputting the messages, then </span><span class="line" data-startTime="2565">you could package those </span><span class="line" data-startTime="2565">up in some way </span><span class="line" data-startTime="2568">and save them locally. </span><span class="line" data-startTime="2569">And then if an error occurs, </span><span class="line" data-startTime="2569">you could send them. </span><span class="line" data-startTime="2571">But there's no mechanism that </span><span class="line" data-startTime="2571">the extension framework itself </span><span class="line" data-startTime="2574">gives you to make </span><span class="line" data-startTime="2574">that possible. </span></p>

<p class="speaker"><span class="line" data-starttime="2576"><span class="speakerName">Mike West</span>: Got you. </span><span class="line" data-startTime="2576">Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="2577"><span class="speakerName">Mike West</span>: Yeah. </span><span class="line" data-startTime="2577">No worries. </span></p>

<p class="speaker"><span class="line" data-starttime="2580"><span class="speakerName">Audience</span>: As the Android is </span><span class="line" data-startTime="2580">having the Chrome browser, do </span><span class="line" data-startTime="2584">you guys have any plans </span><span class="line" data-startTime="2584">for building the </span><span class="line" data-startTime="2585">extension for the Android? </span></p>

<p class="speaker"><span class="line" data-starttime="2588"><span class="speakerName">Mike West</span>: There's nothing to </span><span class="line" data-startTime="2588">announce at this point. </span><span class="line" data-startTime="2590">It's difficult. </span><span class="line" data-startTime="2591">And it's difficult. </span></p>

<p class="speaker"><span class="line" data-starttime="2594"><span class="speakerName">Audience</span>: OK, thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="2597"><span class="speakerName">Audience</span>: Nice talk. </span> <span class="line" data-startTime="2598">I have a question about </span><span class="line" data-startTime="2598">the permission. </span> <span class="line" data-startTime="2601">It's really cool to have </span><span class="line" data-startTime="2601">permissions and extensions. </span> <span class="line" data-startTime="2603">That's very cool what </span><span class="line" data-startTime="2603">has been done. </span> <span class="line" data-startTime="2607">But for the normal user, </span><span class="line" data-startTime="2607">everyone's saying &mdash; you know </span><span class="line" data-startTime="2610">that when you have in Chrome Web </span><span class="line" data-startTime="2610">Store, you have all these </span><span class="line" data-startTime="2611">permissions saying, old </span><span class="line" data-startTime="2611">browser history, </span><span class="line" data-startTime="2614">every single thing. </span> <span class="line" data-startTime="2615">Is that going to be taken </span><span class="line" data-startTime="2615">care of as well? </span><span class="line" data-startTime="2617">Like the whole point of us </span><span class="line" data-startTime="2617">putting all these permissions </span><span class="line" data-startTime="2620">in our extensions right now, </span><span class="line" data-startTime="2620">it's going to be more work for </span><span class="line" data-startTime="2622">us to figure out we need. </span></p>

<p><span class="line" data-startTime="2624">But it would be cool if the </span><span class="line" data-startTime="2624">Chrome app store says, oh, </span><span class="line" data-startTime="2627">this user's using web sockets. </span> <span class="line" data-startTime="2628">Or this user's using those kind </span><span class="line" data-startTime="2628">of new HTML technologies </span><span class="line" data-startTime="2634">that you're exposing this </span><span class="line" data-startTime="2634">website or exposing this </span><span class="line" data-startTime="2637">hacker website and </span><span class="line" data-startTime="2637">stuff like that. </span></p>

<p class="speaker"><span class="line" data-starttime="2638"><span class="speakerName">Mike West</span>: I think what I should </span><span class="line" data-startTime="2638">have made clear earlier </span><span class="line" data-startTime="2641">is that by not requesting host </span><span class="line" data-startTime="2641">permissions, we can actually </span><span class="line" data-startTime="2644">make the permission messages </span><span class="line" data-startTime="2644">much less scary. </span><span class="line" data-startTime="2647">Instead of requesting permission </span><span class="line" data-startTime="2647">to the entire </span><span class="line" data-startTime="2649">internet by having, you know, </span><span class="line" data-startTime="2649">all URLs as part of your host </span><span class="line" data-startTime="2653">permissions, if you only </span><span class="line" data-startTime="2653">request active tab &mdash; </span><span class="line" data-startTime="2656">because that always goes through </span><span class="line" data-startTime="2656">a user gesture &mdash; </span><span class="line" data-startTime="2659">we actually don't have </span><span class="line" data-startTime="2659">to show a permission </span><span class="line" data-startTime="2660">warning at that point. </span><span class="line" data-startTime="2661">The permission is explicitly </span><span class="line" data-startTime="2661">granted by the user when they </span><span class="line" data-startTime="2664">directly interact with </span><span class="line" data-startTime="2664">your extension. </span></p>

<p class="speaker"><span class="line" data-starttime="2666"><span class="speakerName">Audience</span>: That's </span><span class="line" data-startTime="2666">on the timeline </span><span class="line" data-startTime="2667">to fix up the messages. </span></p>

<p class="speaker"><span class="line" data-starttime="2669"><span class="speakerName">Mike West</span>: It's on the timeline </span><span class="line" data-startTime="2669">in that we're going </span><span class="line" data-startTime="2671">to create new APIs that </span><span class="line" data-startTime="2671">are less dangerous. </span><span class="line" data-startTime="2674">And those new APIs will come </span><span class="line" data-startTime="2674">with less scary permission </span><span class="line" data-startTime="2677">messages because they simply </span><span class="line" data-startTime="2677">are less scary. </span></p>

<p class="speaker"><span class="line" data-starttime="2679"><span class="speakerName">Audience</span>: And my next question </span><span class="line" data-startTime="2679">is, I like the on suspend and </span><span class="line" data-startTime="2683">on install, because before we </span><span class="line" data-startTime="2683">used to do them version check </span><span class="line" data-startTime="2685">all the time. </span><span class="line" data-startTime="2687">And for the on install, is there </span><span class="line" data-startTime="2687">a way to know if it's </span><span class="line" data-startTime="2689">updated or installed without </span><span class="line" data-startTime="2689">doing a local storage check? </span></p>

<p class="speaker"><span class="line" data-starttime="2692"><span class="speakerName">Mike West</span>: No, you would have </span><span class="line" data-startTime="2692">to set something locally. </span></p>

<p class="speaker"><span class="line" data-starttime="2694"><span class="speakerName">Audience</span>: How about </span><span class="line" data-startTime="2694">the on suspend? </span><span class="line" data-startTime="2696">Is there a way to revoke </span><span class="line" data-startTime="2696">suspension? </span></p>

<p class="speaker"><span class="line" data-starttime="2699"><span class="speakerName">Mike West</span>: No. </span></p>

<p class="speaker"><span class="line" data-starttime="2699"><span class="speakerName">Audience</span>: So we can't </span><span class="line" data-startTime="2699">do event preval &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2701"><span class="speakerName">Mike West</span>: No, if your extension </span><span class="line" data-startTime="2701">is suspended, it's </span><span class="line" data-startTime="2705">going to be suspended unless the </span><span class="line" data-startTime="2705">user interacts with it in </span><span class="line" data-startTime="2707">some way or unless it's being </span><span class="line" data-startTime="2707">kept alive by either having a </span><span class="line" data-startTime="2710">long network request &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2711"><span class="speakerName">Audience</span>: So there's no way to </span><span class="line" data-startTime="2711">wake it up instantly, like &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2714"><span class="speakerName">Mike West</span>: That would </span><span class="line" data-startTime="2714">be the alarms API. </span><span class="line" data-startTime="2715">So you can say that at some </span><span class="line" data-startTime="2715">point in the future, I want to </span><span class="line" data-startTime="2717">wake up again. </span><span class="line" data-startTime="2718">So inside of the on suspend </span><span class="line" data-startTime="2718">event , you could certainly </span><span class="line" data-startTime="2721">say, you know, in five minutes, </span><span class="line" data-startTime="2723">wake me up to do something. </span><span class="line" data-startTime="2724">But that would be </span><span class="line" data-startTime="2724">your mechanism. </span></p>

<p class="speaker"><span class="line" data-starttime="2727"><span class="speakerName">Audience</span>: OK, thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2727"><span class="speakerName">Mike West</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2729"><span class="speakerName">Audience</span>: Hi. </span><span class="line" data-startTime="2729">Are there any updates on </span><span class="line" data-startTime="2729">detecting when a user </span><span class="line" data-startTime="2733">uninstalls an extension? </span></p>

<p class="speaker"><span class="line" data-starttime="2735"><span class="speakerName">Mike West</span>: None that </span><span class="line" data-startTime="2735">I know of, no. </span><span class="line" data-startTime="2737">That's definitely something </span><span class="line" data-startTime="2737">that we can talk about. </span><span class="line" data-startTime="2739">I'd suggest, if there's not </span><span class="line" data-startTime="2739">already a bug filed, file a </span><span class="line" data-startTime="2743">bug and send them to me. </span></p>

<p class="speaker"><span class="line" data-starttime="2744"><span class="speakerName">Audience</span>: It's there. </span></p>

<p class="speaker"><span class="line" data-starttime="2744"><span class="speakerName">Mike West</span>: OK. </span><span class="line" data-startTime="2745">Send me the ID, if </span><span class="line" data-startTime="2745">you don't mind. </span></p>

<p class="speaker"><span class="line" data-starttime="2747"><span class="speakerName">Audience</span>: I can do that. </span></p>

<p class="speaker"><span class="line" data-starttime="2748"><span class="speakerName">Mike West</span>: I'll take </span><span class="line" data-startTime="2748">a look at it. </span><span class="line" data-startTime="2749">Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2749"><span class="speakerName">Audience</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2750"><span class="speakerName">Mike West</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2755"><span class="speakerName">Audience</span>: Question about </span><span class="line" data-startTime="2755">potentially selling </span><span class="line" data-startTime="2756">extensions, do you &mdash; is there a </span><span class="line" data-startTime="2756">plan in the store to extend </span><span class="line" data-startTime="2759">the apps, like purchase ability </span><span class="line" data-startTime="2762">APIs into Chrome extension? </span></p>

<p class="speaker"><span class="line" data-starttime="2764"><span class="speakerName">Mike West</span>: There's nothing </span><span class="line" data-startTime="2764">to announce. </span><span class="line" data-startTime="2766">I don't know of any plans. </span></p>

<p class="speaker"><span class="line" data-starttime="2768"><span class="speakerName">Audience</span>: OK then, a subset to </span><span class="line" data-startTime="2768">that, what would Chrome's &mdash; </span><span class="line" data-startTime="2772">or, potentially, what would </span><span class="line" data-startTime="2772">the thought be on, </span><span class="line" data-startTime="2775">hypothetically, bundling an app </span><span class="line" data-startTime="2775">in the store and the app's </span><span class="line" data-startTime="2779">sole existence just be a license </span><span class="line" data-startTime="2779">file that I can sell </span><span class="line" data-startTime="2784">and then use the Chrome </span><span class="line" data-startTime="2784">management permissions to </span><span class="line" data-startTime="2787">check the existence of </span><span class="line" data-startTime="2787">installation of both and </span><span class="line" data-startTime="2790">thereby shoehorn some way </span><span class="line" data-startTime="2790">to sell an extension. </span><span class="line" data-startTime="2793">If I managed to do that, would </span><span class="line" data-startTime="2793">that somehow get me kicked out </span><span class="line" data-startTime="2796">of the store? </span></p>

<p class="speaker"><span class="line" data-starttime="2797"><span class="speakerName">Mike West</span>: It sounds </span><span class="line" data-startTime="2797">interesting. </span></p>

<p class="speaker"><span class="line" data-starttime="2800"><span class="speakerName">Audience</span>: All right, </span><span class="line" data-startTime="2800">well, [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="2800"><span class="speakerName">Mike West</span>: That's the </span><span class="line" data-startTime="2800">first I've heard of </span><span class="line" data-startTime="2801">something like that. </span><span class="line" data-startTime="2802">So &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2805"><span class="speakerName">Audience</span>: Currently, building </span><span class="line" data-startTime="2805">cross-browser extensions </span><span class="line" data-startTime="2807">across different browsers </span><span class="line" data-startTime="2807">is a pain. </span><span class="line" data-startTime="2810">The more and more we use </span><span class="line" data-startTime="2810">advanced Chrome APIs, we are </span><span class="line" data-startTime="2814">alienating ourselves from </span><span class="line" data-startTime="2814">Safari and Firefox. </span><span class="line" data-startTime="2817">I'm not even talking about IE. </span><span class="line" data-startTime="2819">Like browsers &mdash; even like Safari </span><span class="line" data-startTime="2819">that chooses that kit, </span><span class="line" data-startTime="2821">we are alienating ourselves. </span><span class="line" data-startTime="2823">Are there any plans from </span><span class="line" data-startTime="2823">Chromium to prescribe a base </span><span class="line" data-startTime="2828">set of APIs or form a consortium </span><span class="line" data-startTime="2828">so that these are </span><span class="line" data-startTime="2832">some basic APIs that </span><span class="line" data-startTime="2832">should be present </span><span class="line" data-startTime="2834">across all the browsers. </span><span class="line" data-startTime="2836">[INTERPOSING VOICES] </span></p>

<p class="speaker"><span class="line" data-starttime="2839"><span class="speakerName">Mike West</span>: Part of the issue, </span><span class="line" data-startTime="2839">I think, is that extensions </span><span class="line" data-startTime="2841">really enable you to dive deeply </span><span class="line" data-startTime="2841">into the way that a </span><span class="line" data-startTime="2843">browser works. </span> <span class="line" data-startTime="2844">And they're really well bound </span><span class="line" data-startTime="2844">together with the way the </span><span class="line" data-startTime="2848">browser itself works. </span> <span class="line" data-startTime="2851">I think there probably would be </span><span class="line" data-startTime="2851">value in figuring out some </span><span class="line" data-startTime="2856">way of dealing with extensions </span><span class="line" data-startTime="2856">in a cross-browser fashion. </span> <span class="line" data-startTime="2861">What we think, however, is that </span><span class="line" data-startTime="2861">extensions are really </span><span class="line" data-startTime="2864">based on web technologies. </span></p>

<p><span class="line" data-startTime="2866">And to whatever extent possible, </span><span class="line" data-startTime="2866">you should be </span><span class="line" data-startTime="2868">building things in HTML and </span><span class="line" data-startTime="2868">CSS and JavaScript. </span> <span class="line" data-startTime="2871">And those sorts of things, </span><span class="line" data-startTime="2871">especially the back end </span><span class="line" data-startTime="2874">portion, should be reusable </span><span class="line" data-startTime="2874">across browsers. </span> <span class="line" data-startTime="2877">I think you can look at </span><span class="line" data-startTime="2877">extensions, like HTTPS </span><span class="line" data-startTime="2879">Everywhere, that have presence </span><span class="line" data-startTime="2879">on multiple browsers. </span> <span class="line" data-startTime="2882">And what they've basically done </span><span class="line" data-startTime="2882">is create a library in </span><span class="line" data-startTime="2884">the back end and then put a </span><span class="line" data-startTime="2884">thin shell on top of that </span><span class="line" data-startTime="2887">library that lets them target </span><span class="line" data-startTime="2887">both Firefox and Chrome. </span></p>

<p><span class="line" data-startTime="2890">We think that's a pretty </span><span class="line" data-startTime="2890">successful model because it </span><span class="line" data-startTime="2892">enables them to do the things </span><span class="line" data-startTime="2892">that they do really well &mdash; </span><span class="line" data-startTime="2894">building this library &mdash; </span><span class="line" data-startTime="2896">and then allow the browsers to </span><span class="line" data-startTime="2896">do the things that they do </span><span class="line" data-startTime="2898">really well by having specific </span><span class="line" data-startTime="2898">APIs for each. </span> <span class="line" data-startTime="2901">But you're entirely correct. </span> <span class="line" data-startTime="2902">It would be nice if everything </span><span class="line" data-startTime="2902">was the same everywhere. </span> <span class="line" data-startTime="2905">That's simply not where </span><span class="line" data-startTime="2905">we are right now. </span></p>

<p class="speaker"><span class="line" data-starttime="2908"><span class="speakerName">Audience</span>: I have another </span><span class="line" data-startTime="2908">question about extending on </span><span class="line" data-startTime="2910">the malicious extensions. </span><span class="line" data-startTime="2912">Say if an extension currently </span><span class="line" data-startTime="2912">requests x number of </span><span class="line" data-startTime="2914">permissions and on a remote </span><span class="line" data-startTime="2914">update it's going to access </span><span class="line" data-startTime="2918">more permissions to do </span><span class="line" data-startTime="2918">some thing that it </span><span class="line" data-startTime="2921">shouldn't be doing. </span><span class="line" data-startTime="2922">Are there any things </span><span class="line" data-startTime="2922">to prevent that? </span><span class="line" data-startTime="2924">Like, say, one of the &mdash; </span><span class="line" data-startTime="2926">it might not be intentional. </span><span class="line" data-startTime="2927">One of those popular extensions </span><span class="line" data-startTime="2927">are putting </span><span class="line" data-startTime="2930">affiliate links on </span><span class="line" data-startTime="2930">Google search. </span><span class="line" data-startTime="2932">Like, basically, it could put </span><span class="line" data-startTime="2932">a content script and do </span><span class="line" data-startTime="2934">anything it wants. </span><span class="line" data-startTime="2935">What are steps from those? </span></p>

<p class="speaker"><span class="line" data-starttime="2938"><span class="speakerName">Mike West</span>: Currently, if an </span><span class="line" data-startTime="2938">extension requests more </span><span class="line" data-startTime="2940">permissions, then it'll be </span><span class="line" data-startTime="2940">disabled on update until the </span><span class="line" data-startTime="2943">user specifically enables it. </span> <span class="line" data-startTime="2944">So, they'll get an info bar at </span><span class="line" data-startTime="2944">the top of &mdash; or, actually, </span><span class="line" data-startTime="2947">it's not an info bar anymore. </span> <span class="line" data-startTime="2948">It's a pop-up that says, this </span><span class="line" data-startTime="2948">extension requested more </span><span class="line" data-startTime="2951">permissions. </span> <span class="line" data-startTime="2951">It's been disabled. </span> <span class="line" data-startTime="2953">And you can re-enable </span><span class="line" data-startTime="2953">it from that menu. </span> <span class="line" data-startTime="2955">So it gives you the ability to </span><span class="line" data-startTime="2955">determine that the extension </span><span class="line" data-startTime="2957">is now requesting more </span><span class="line" data-startTime="2957">permissions and to evaluate </span><span class="line" data-startTime="2960">that based on what you know </span><span class="line" data-startTime="2960">that the extension does. </span></p>

<p><span class="line" data-startTime="2962">What we'd also like to see is </span><span class="line" data-startTime="2962">people moving more towards </span><span class="line" data-startTime="2965">optional permissions, which we </span><span class="line" data-startTime="2965">introduced a few months ago. </span> <span class="line" data-startTime="2968">I'm not exactly sure </span><span class="line" data-startTime="2968">when it came out. </span> <span class="line" data-startTime="2969">But, by having optional </span><span class="line" data-startTime="2971">permissions, we don't actually &mdash; </span><span class="line" data-startTime="2973">if you request new optional </span><span class="line" data-startTime="2973">permissions in a new extension </span><span class="line" data-startTime="2976">update, we don't give you this </span><span class="line" data-startTime="2976">info bar because it actually </span><span class="line" data-startTime="2978">doesn't change the way </span><span class="line" data-startTime="2978">the extension works. </span> <span class="line" data-startTime="2980">But it gives you the ability </span><span class="line" data-startTime="2980">then to explicitly request </span><span class="line" data-startTime="2983">those new things from the user </span><span class="line" data-startTime="2983">when the time is right. </span></p>

<p><span class="line" data-startTime="2986">So geolocation &mdash; </span><span class="line" data-startTime="2987">for instance &mdash; if I need to </span><span class="line" data-startTime="2987">interact in some way with a </span><span class="line" data-startTime="2990">user's location, I can make </span><span class="line" data-startTime="2990">geolocation an optional </span><span class="line" data-startTime="2992">permission. </span> <span class="line" data-startTime="2993">And then when the user actually </span><span class="line" data-startTime="2993">interacts with the </span><span class="line" data-startTime="2995">extension and needs that new </span><span class="line" data-startTime="2995">permission, I can ask them </span><span class="line" data-startTime="2997">then, when it's really quite </span><span class="line" data-startTime="2997">relevant to the way that </span><span class="line" data-startTime="3000">they're working. </span></p>

<p class="speaker"><span class="line" data-starttime="3001"><span class="speakerName">Audience</span>: Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="3002"><span class="speakerName">Mike West</span>: Thank you. </span><span class="line" data-startTime="3006">Go ahead. </span><span class="line" data-startTime="3006">OK, one more. </span><span class="line" data-startTime="3008">Two more. </span></p>

<p class="speaker"><span class="line" data-starttime="3009"><span class="speakerName">Audience</span>: Hi, I work </span><span class="line" data-startTime="3009">at Genentech. </span><span class="line" data-startTime="3012">And we are trying to deploy </span><span class="line" data-startTime="3012">Chrome for Business for all of </span><span class="line" data-startTime="3017">our employees at Roche </span><span class="line" data-startTime="3017">and Genentech. </span><span class="line" data-startTime="3020">I was wondering &mdash; </span><span class="line" data-startTime="3020">and we also have &mdash; </span><span class="line" data-startTime="3021">currently, we just use the </span><span class="line" data-startTime="3021">consumer Chrome browser and </span><span class="line" data-startTime="3025">build extensions on it. </span><span class="line" data-startTime="3027">Are there any limitations to </span><span class="line" data-startTime="3027">using Chrome for business as </span><span class="line" data-startTime="3033">far as building extensions </span><span class="line" data-startTime="3033">goes? </span><span class="line" data-startTime="3035">Or is it just the exact same </span><span class="line" data-startTime="3035">sort of functionality? </span></p>

<p class="speaker"><span class="line" data-starttime="3038"><span class="speakerName">Mike West</span>: You actually have </span><span class="line" data-startTime="3038">a really good mechanism for </span><span class="line" data-startTime="3042">deploying Chrome inside </span><span class="line" data-startTime="3042">of Enterprise. </span><span class="line" data-startTime="3044">So it's very Enterprise ready. </span><span class="line" data-startTime="3046">You can deploy it as an SI </span><span class="line" data-startTime="3046">package and deal with </span><span class="line" data-startTime="3048">corporate policies via, </span><span class="line" data-startTime="3048">you know, like Active </span><span class="line" data-startTime="3051">Directory or something. </span><span class="line" data-startTime="3052">Via Active Directory you can </span><span class="line" data-startTime="3052">actually set a list of </span><span class="line" data-startTime="3055">extensions that should be auto </span><span class="line" data-startTime="3055">installed or that are banned </span><span class="line" data-startTime="3058">within the context of </span><span class="line" data-startTime="3058">an organization. </span><span class="line" data-startTime="3060">So, by using group policy in </span><span class="line" data-startTime="3060">the same way that your IT </span><span class="line" data-startTime="3063">department is probably quite </span><span class="line" data-startTime="3063">familiar with, they'll be able </span><span class="line" data-startTime="3066">to deploy Chrome locally and </span><span class="line" data-startTime="3066">actually deal in a very </span><span class="line" data-startTime="3071">detailed manner with the </span><span class="line" data-startTime="3071">extensions that are </span><span class="line" data-startTime="3073">pre-installed and also the </span><span class="line" data-startTime="3073">extensions that aren't allowed </span><span class="line" data-startTime="3075">to be installed. </span></p>

<p class="speaker"><span class="line" data-starttime="3077"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="3077">Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="3078"><span class="speakerName">Mike West</span>: Thank you. </span><span class="line" data-startTime="3081">Great. </span><span class="line" data-startTime="3082">Thank you very much </span><span class="line" data-startTime="3082">for your time. </span><span class="line" data-startTime="3083">If you have any questions later </span><span class="line" data-startTime="3083">on, I'll be at office </span><span class="line" data-startTime="3086">hours pretty much </span><span class="line" data-startTime="3086">all the time. </span><span class="line" data-startTime="3088">So just come hang out. </span><span class="line" data-startTime="3089">We'd be happy to answer any </span><span class="line" data-startTime="3089">questions that you have. </span><span class="line" data-startTime="3091">Thank you very much. </span></p>