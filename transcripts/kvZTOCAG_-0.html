<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>What's New in Dart: Your First-class Upgrade to Web Development &mdash; Google I/O 2013</h1>

<h2>Seth Ladd, Justin Fagnani</h2>

<a class="video" href="http://youtu.be/kvZTOCAG_-0">youtu.be/kvZTOCAG_-0</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="0"><span class="speakerName">Seth Ladd</span>: OK, welcome </span><span class="line" data-startTime="0">everyone. </span><span class="line" data-startTime="2">Thanks very much for coming. </span><span class="line" data-startTime="3">This is What's New with Dart: </span><span class="line" data-startTime="3">Your First-Class Upgrade to </span><span class="line" data-startTime="7">Web Development. </span><span class="line" data-startTime="8">My name is Seth Ladd. </span><span class="line" data-startTime="8">I'm a Developer Advocate </span><span class="line" data-startTime="8">with the Dart team. </span></p>

<p class="speaker"><span class="line" data-starttime="11"><span class="speakerName">Justin Fagnani</span>: And I'm </span><span class="line" data-startTime="11">Justin Fagnani. </span><span class="line" data-startTime="11">I'm an engineer on the </span><span class="line" data-startTime="11">Dart team working </span><span class="line" data-startTime="13">on tools and libraries. </span><span class="line" data-startTime="15">And I also help internal </span><span class="line" data-startTime="15">teams move to Dart. </span></p>

<p class="speaker"><span class="line" data-starttime="18"><span class="speakerName">Seth Ladd</span>: All right, real </span><span class="line" data-startTime="18">quick, what is Dart? </span><span class="line" data-startTime="20">Well, Dart is much more </span><span class="line" data-startTime="20">than a language. </span> <span class="line" data-startTime="21">It's also a set of rich </span><span class="line" data-startTime="21">libraries, very productive </span><span class="line" data-startTime="24">tools, fast run-times like </span><span class="line" data-startTime="24">a virtual machine. </span> <span class="line" data-startTime="27">But probably most importantly, </span><span class="line" data-startTime="27">Dart compiles the JavaScript. </span> <span class="line" data-startTime="30">So you could write a Dart app, </span><span class="line" data-startTime="30">compile it down to modern </span><span class="line" data-startTime="32">JavaScript, and run </span><span class="line" data-startTime="32">it across modern </span><span class="line" data-startTime="34">browsers like this today. </span> <span class="line" data-startTime="35">We like to think of Dart </span><span class="line" data-startTime="35">as a batteries </span><span class="line" data-startTime="37">included package for you. </span> <span class="line" data-startTime="40">OK, so this is a real-life story </span><span class="line" data-startTime="40">from a developer just </span><span class="line" data-startTime="43">like you guys out there. </span> <span class="line" data-startTime="44">He works for a bank. </span></p>

<p><span class="line" data-startTime="44">He has to write a </span><span class="line" data-startTime="44">lot of web apps. </span> <span class="line" data-startTime="46">So he's telling me. </span> <span class="line" data-startTime="47">This is true. </span> <span class="line" data-startTime="48">He's saying, OK, the other day I </span><span class="line" data-startTime="48">was asked to build a new web </span><span class="line" data-startTime="50">app for my internal customers. </span> <span class="line" data-startTime="52">So hi, I want to build </span><span class="line" data-startTime="52">a web app. </span> <span class="line" data-startTime="55">First off, you need to go get </span><span class="line" data-startTime="55">require.js because you need </span><span class="line" data-startTime="58">some sense of modularity. </span> <span class="line" data-startTime="59">He needed to get Backbone </span><span class="line" data-startTime="59">because he needs some sense of </span><span class="line" data-startTime="62">client-side infrastructure. </span> <span class="line" data-startTime="64">He needed to get Backbone </span><span class="line" data-startTime="64">Marionette because, of course, </span><span class="line" data-startTime="66">he needs some extra </span><span class="line" data-startTime="66">functionality. </span> <span class="line" data-startTime="68">He needed to get jQuery </span><span class="line" data-startTime="68">because every web </span><span class="line" data-startTime="70">project uses jQuery. </span> <span class="line" data-startTime="71">Whether you like it or not, </span><span class="line" data-startTime="71">somebody uses it. </span> <span class="line" data-startTime="74">He needed to get Modernizr </span><span class="line" data-startTime="74">because he needed to do </span><span class="line" data-startTime="76">feature detection. </span> <span class="line" data-startTime="77">He needed to get moment.js </span><span class="line" data-startTime="77">because he needed to deal with </span><span class="line" data-startTime="80">dates, parsing dates, </span><span class="line" data-startTime="80">formatting dates. </span> <span class="line" data-startTime="82">He needed to then get dest </span><span class="line" data-startTime="82">templates because he needed </span><span class="line" data-startTime="84">some solution for client-side </span><span class="line" data-startTime="84">templates. </span></p>

<p><span class="line" data-startTime="88">He needed to get PhantomJS </span><span class="line" data-startTime="88">because he needed some sense </span><span class="line" data-startTime="90">of browser-based testing. </span> <span class="line" data-startTime="92">Then he needed to get Jasmine </span><span class="line" data-startTime="92">because he needed to actually </span><span class="line" data-startTime="94">write those tests. </span> <span class="line" data-startTime="95">Then when he's got this </span><span class="line" data-startTime="95">teetering pile here, of course </span><span class="line" data-startTime="98">then he finds out that every </span><span class="line" data-startTime="98">one of these projects has a </span><span class="line" data-startTime="99">completely different set </span><span class="line" data-startTime="99">of formatted docs. </span> <span class="line" data-startTime="101">So you got to find those </span><span class="line" data-startTime="101">and read those and </span><span class="line" data-startTime="103">figure those out. </span></p>

<p><span class="line" data-startTime="105">And then, he needed to finally </span><span class="line" data-startTime="105">integrate this entire pile </span><span class="line" data-startTime="108">here to make some semblance </span><span class="line" data-startTime="108">of a working system. </span> <span class="line" data-startTime="110">An interesting thing here </span><span class="line" data-startTime="110">though, is that not only do </span><span class="line" data-startTime="113">you actually have to wire </span><span class="line" data-startTime="113">it all together. </span> <span class="line" data-startTime="114">But some of these solutions </span><span class="line" data-startTime="114">offer duplicate answers to the </span><span class="line" data-startTime="117">same problem. </span> <span class="line" data-startTime="118">So you've got to </span><span class="line" data-startTime="118">reconcile that. </span> <span class="line" data-startTime="119">So after he built this kind of </span><span class="line" data-startTime="119">teetering pile here, quote, "I </span><span class="line" data-startTime="123">just want to build web apps." </span><span class="line" data-startTime="126">So then he found the Dart </span><span class="line" data-startTime="126">project &mdash; true story. </span> <span class="line" data-startTime="129">He was able to replace the </span><span class="line" data-startTime="129">teetering pile with simply </span><span class="line" data-startTime="132">just the Dart SDK and three </span><span class="line" data-startTime="132">packages that he could just </span><span class="line" data-startTime="136">download with our </span><span class="line" data-startTime="136">package manager. </span> <span class="line" data-startTime="137">And quote, "Thanks to Dart, </span><span class="line" data-startTime="137">things are consistent and </span><span class="line" data-startTime="140">clear." </span><span class="line" data-startTime="141">So this is a good example of a </span><span class="line" data-startTime="141">real-life story of a small </span><span class="line" data-startTime="143">team, a team that needs to </span><span class="line" data-startTime="143">move fast, and their </span><span class="line" data-startTime="145">experience using Dart. </span></p>

<p><span class="line" data-startTime="146">But that's an external </span><span class="line" data-startTime="146">small team. </span> <span class="line" data-startTime="149">Justin, how's our internal </span><span class="line" data-startTime="149">teams doing? </span></p>

<p class="speaker"><span class="line" data-starttime="151"><span class="speakerName">Justin Fagnani</span>: So like I </span><span class="line" data-startTime="151">mentioned, I help internal </span><span class="line" data-startTime="153">teams adopt Dart. </span> <span class="line" data-startTime="155">And at Google, we build </span><span class="line" data-startTime="155">a few web apps. </span> <span class="line" data-startTime="158">And some of them </span><span class="line" data-startTime="158">are quite big. </span> <span class="line" data-startTime="160">To give you an idea of how big </span><span class="line" data-startTime="160">they are, our teams can be </span><span class="line" data-startTime="163">from dozens to hundreds </span><span class="line" data-startTime="163">of engineers. </span> <span class="line" data-startTime="165">And we can easily have millions </span><span class="line" data-startTime="165">of lines of code. </span> <span class="line" data-startTime="168">And over the years, our </span><span class="line" data-startTime="168">engineers have determined that </span><span class="line" data-startTime="170">they need tools to help them </span><span class="line" data-startTime="170">manage this complexity. </span> <span class="line" data-startTime="173">And basically, maintain their </span><span class="line" data-startTime="173">sanity to be able to work with </span><span class="line" data-startTime="175">such large amounts of </span><span class="line" data-startTime="175">code in large teams. </span></p>

<p><span class="line" data-startTime="178">So they've built tools like </span><span class="line" data-startTime="178">GWT and Closure and Soy. </span> <span class="line" data-startTime="181">And these tools do different </span><span class="line" data-startTime="181">things to help them guarantee </span><span class="line" data-startTime="185">correctness and behavior </span><span class="line" data-startTime="185">of the applications. </span> <span class="line" data-startTime="187">They introduce modularity </span><span class="line" data-startTime="187">and structure, classes. </span> <span class="line" data-startTime="190">Maybe some type checking. </span> <span class="line" data-startTime="192">GWT introduces Java as </span><span class="line" data-startTime="192">the source language. </span> <span class="line" data-startTime="195">And these tools have been very </span><span class="line" data-startTime="195">successful in that they help </span><span class="line" data-startTime="197">teams write these complex </span><span class="line" data-startTime="197">apps and actually get </span><span class="line" data-startTime="200">them out the door. </span> <span class="line" data-startTime="201">But they have some downsides. </span> <span class="line" data-startTime="203">In particular, all JavaScript </span><span class="line" data-startTime="203">at Google is compiled. </span> <span class="line" data-startTime="206">And this means that we've </span><span class="line" data-startTime="206">introduced a compiler into the </span><span class="line" data-startTime="209">development workflow. </span> <span class="line" data-startTime="210">And that can significantly </span><span class="line" data-startTime="210">slow things down. </span> <span class="line" data-startTime="213">With these large apps, the </span><span class="line" data-startTime="213">compilers can take a long time </span><span class="line" data-startTime="216">to run while you're trying </span><span class="line" data-startTime="216">to develop your app. </span> <span class="line" data-startTime="220">So we've started moving </span><span class="line" data-startTime="220">some teams to Dart. </span></p>

<p><span class="line" data-startTime="223">And with Dart, we tried </span><span class="line" data-startTime="223">to fix that problem. </span></p>

<p class="speaker"><span class="line" data-starttime="226"><span class="speakerName">Seth Ladd</span>: I want to point out </span><span class="line" data-startTime="226">real quick that this is real </span><span class="line" data-startTime="228">feedback from internal teams. </span><span class="line" data-startTime="229">24 minutes, sometimes, </span><span class="line" data-startTime="229">to see a change. </span><span class="line" data-startTime="232">Can you imagine iterating at </span><span class="line" data-startTime="232">24-minutes per change? </span></p>

<p class="speaker"><span class="line" data-starttime="235"><span class="speakerName">Justin Fagnani</span>: I've </span><span class="line" data-startTime="235">done that. </span></p>

<p class="speaker"><span class="line" data-starttime="236"><span class="speakerName">Seth Ladd</span>: Surely </span><span class="line" data-startTime="236">we can better. </span></p>

<p class="speaker"><span class="line" data-starttime="237"><span class="speakerName">Justin Fagnani</span>: Right. </span><span class="line" data-startTime="237">So surely we could do better. </span><span class="line" data-startTime="239">So what we've done with Dart </span><span class="line" data-startTime="239">is we've tried to address </span><span class="line" data-startTime="242">these issues. </span><span class="line" data-startTime="243">To fix some of the problems </span><span class="line" data-startTime="243">with the structure and the </span><span class="line" data-startTime="246">semantics of the language, but </span><span class="line" data-startTime="246">also not have the downsides. </span><span class="line" data-startTime="250">So here we have a chart that </span><span class="line" data-startTime="250">kind of shows some different </span><span class="line" data-startTime="252">projects out there </span><span class="line" data-startTime="252">that are compiled </span><span class="line" data-startTime="254">to JavaScript projects. </span><span class="line" data-startTime="255">So we have GWT and </span><span class="line" data-startTime="255">Closure here. </span><span class="line" data-startTime="258">I'm sure you guys have heard </span><span class="line" data-startTime="258">of CoffeeScript. </span><span class="line" data-startTime="259">And also, Microsoft has their </span><span class="line" data-startTime="259">own compile to JS project </span><span class="line" data-startTime="262">called TypeScript. </span><span class="line" data-startTime="263">And we've kind of roughly said </span><span class="line" data-startTime="263">whether or not they hurt and </span><span class="line" data-startTime="265">help on these different </span><span class="line" data-startTime="265">dimensions. </span><span class="line" data-startTime="268">And we feel like Dart is finally </span><span class="line" data-startTime="268">a solution that we </span><span class="line" data-startTime="270">have that helps on </span><span class="line" data-startTime="270">every dimension. </span><span class="line" data-startTime="272">It actually improves the </span><span class="line" data-startTime="272">development cycle, while also </span><span class="line" data-startTime="274">giving teams the safety and </span><span class="line" data-startTime="274">semantic improvements that </span><span class="line" data-startTime="278">they require. </span></p>

<p class="speaker"><span class="line" data-starttime="278"><span class="speakerName">Seth Ladd</span>: One thing I want </span><span class="line" data-startTime="278">to point out on this slide </span><span class="line" data-startTime="279">actually, I think it's really </span><span class="line" data-startTime="279">important to understand this </span><span class="line" data-startTime="281">requires compilation </span><span class="line" data-startTime="281">for development. </span> <span class="line" data-startTime="283">Notice how Dart does not require </span><span class="line" data-startTime="283">compilation for your </span><span class="line" data-startTime="286">very fast iteration development </span><span class="line" data-startTime="286">cycles. </span> <span class="line" data-startTime="288">We'll see how we make that </span><span class="line" data-startTime="288">possible in a little bit. </span> <span class="line" data-startTime="292">OK, cool. </span> <span class="line" data-startTime="293">So before we jump into all the </span><span class="line" data-startTime="293">what's new across the whole </span><span class="line" data-startTime="295">Dart platform &mdash; </span><span class="line" data-startTime="296">and there's a lot &mdash; we want to </span><span class="line" data-startTime="296">give you a quick lightning </span><span class="line" data-startTime="298">tour across the syntax, </span><span class="line" data-startTime="298">semantics, and structure that </span><span class="line" data-startTime="301">Dart offers so we can show you </span><span class="line" data-startTime="301">a bunch of code samples </span><span class="line" data-startTime="303">throughout the talk. </span> <span class="line" data-startTime="304">Let's start with the syntax. </span> <span class="line" data-startTime="306">First up, very familiar </span><span class="line" data-startTime="306">classes, </span><span class="line" data-startTime="308">semicolons, curly braces. </span></p>

<p><span class="line" data-startTime="309">I think everyone can </span><span class="line" data-startTime="309">read this code. </span> <span class="line" data-startTime="311">Dart's very terse. </span> <span class="line" data-startTime="312">We like to say it's </span><span class="line" data-startTime="312">ceremony free. </span> <span class="line" data-startTime="314">Here's a good example here. </span> <span class="line" data-startTime="315">What do you always do in </span><span class="line" data-startTime="315">constructors, but this.x </span><span class="line" data-startTime="317">equals x, this.y equals </span><span class="line" data-startTime="317">y, et cetera. </span> <span class="line" data-startTime="319">This is getting boring. </span> <span class="line" data-startTime="320">So instead you can say if the </span><span class="line" data-startTime="320">constructor parameter name is </span><span class="line" data-startTime="323">the same as the name of the </span><span class="line" data-startTime="323">field, you can simply say </span><span class="line" data-startTime="327">this.strength here </span><span class="line" data-startTime="327">in this case. </span> <span class="line" data-startTime="328">Eliminates some of the ceremony </span><span class="line" data-startTime="328">or boilerplate that </span><span class="line" data-startTime="331">you typically have in </span><span class="line" data-startTime="331">other languages. </span> <span class="line" data-startTime="333">Name constructors, one of my </span><span class="line" data-startTime="333">favorite features here. </span> <span class="line" data-startTime="335">Obviously, methods you </span><span class="line" data-startTime="335">can name pretty much </span><span class="line" data-startTime="337">whatever you want. </span> <span class="line" data-startTime="338">But constructors, typically, </span><span class="line" data-startTime="338">are always named </span><span class="line" data-startTime="340">the name of the class. </span></p>

<p><span class="line" data-startTime="341">That's a little bit </span><span class="line" data-startTime="341">constraining, so Dart offers </span><span class="line" data-startTime="343">name constructors. </span> <span class="line" data-startTime="343">Here, I can say new hug.bear </span><span class="line" data-startTime="343">and set up a bear hug. </span> <span class="line" data-startTime="347">It's very clear. </span> <span class="line" data-startTime="349">I totally understand what I'm </span><span class="line" data-startTime="349">creating when I use these name </span><span class="line" data-startTime="351">constructors. </span> <span class="line" data-startTime="353">Dart has operator overriding. </span> <span class="line" data-startTime="355">Here's a good example of that. </span> <span class="line" data-startTime="358">Named, optional parameters, </span><span class="line" data-startTime="358">another one of my favorite </span><span class="line" data-startTime="360">features here. </span> <span class="line" data-startTime="360">So the curly braces here turn </span><span class="line" data-startTime="360">on a couple things. </span></p>

<p><span class="line" data-startTime="363">First, this becomes an </span><span class="line" data-startTime="363">optional parameter. </span> <span class="line" data-startTime="365">So you may or may not &mdash; </span><span class="line" data-startTime="365">or you can or cannot </span><span class="line" data-startTime="367">pass a parameter there. </span> <span class="line" data-startTime="368">It's name that I understand </span><span class="line" data-startTime="368">what this number is. </span> <span class="line" data-startTime="371">So hands. </span> <span class="line" data-startTime="372">And I get a default </span><span class="line" data-startTime="372">value of one. </span> <span class="line" data-startTime="374">So again, features that normal </span><span class="line" data-startTime="374">scripting languages have, Dart </span><span class="line" data-startTime="377">has as well. </span> <span class="line" data-startTime="379">Some of my other favorite </span><span class="line" data-startTime="379">features here &mdash; fat arrow </span><span class="line" data-startTime="381">syntax for your simple one-line </span><span class="line" data-startTime="381">functions here. </span> <span class="line" data-startTime="384">This is just syntactic sugar </span><span class="line" data-startTime="384">for curly brace return </span><span class="line" data-startTime="387">expression curly brace. </span> <span class="line" data-startTime="389">Dart uses one-line functions </span><span class="line" data-startTime="389">a lot, especially in inline </span><span class="line" data-startTime="392">anonymous functions. </span> <span class="line" data-startTime="393">So they're really </span><span class="line" data-startTime="393">useful there. </span></p>

<p><span class="line" data-startTime="395">And finally, string </span><span class="line" data-startTime="395">interpolation. </span> <span class="line" data-startTime="397">A very simple way to build up </span><span class="line" data-startTime="397">strings based on variables or </span><span class="line" data-startTime="400">expressions. </span></p>

<p class="speaker"><span class="line" data-starttime="403"><span class="speakerName">Justin Fagnani</span>: OK, but Dart </span><span class="line" data-startTime="403">isn't all just syntax </span><span class="line" data-startTime="407">improvements. </span><span class="line" data-startTime="408">Dart is its own language and </span><span class="line" data-startTime="408">it has its own semantics. </span><span class="line" data-startTime="411">And I'm sure some of you have </span><span class="line" data-startTime="411">heard of the JavaScript wats </span><span class="line" data-startTime="413">out there, or these surprising </span><span class="line" data-startTime="413">moments. </span><span class="line" data-startTime="415">Wat. </span></p>

<p class="speaker"><span class="line" data-starttime="415"><span class="speakerName">Seth Ladd</span>: Wat. </span></p>

<p class="speaker"><span class="line" data-starttime="416"><span class="speakerName">Justin Fagnani</span>: In JavaScript. </span><span class="line" data-startTime="417">Or the Java puzzlers. </span><span class="line" data-startTime="418">So these are confusing </span><span class="line" data-startTime="418">parts of the language </span><span class="line" data-startTime="421">we're familiar with. </span><span class="line" data-startTime="422">And we try to improve on that, </span><span class="line" data-startTime="422">too, and turn our wats into </span><span class="line" data-startTime="425">some kind of atomic rock </span><span class="line" data-startTime="425">dinosaur thing. </span><span class="line" data-startTime="428">But awesomeness in general. </span></p>

<p class="speaker"><span class="line" data-starttime="429"><span class="speakerName">Seth Ladd</span>: I want the </span><span class="line" data-startTime="429">one on the right. </span></p>

<p class="speaker"><span class="line" data-starttime="430"><span class="speakerName">Justin Fagnani</span>: Yes, me too. </span><span class="line" data-startTime="431">It looks more fun. </span></p>

<p class="speaker"><span class="line" data-starttime="433"><span class="speakerName">Seth Ladd</span>: That one's scary. </span></p>

<p class="speaker"><span class="line" data-starttime="433"><span class="speakerName">Justin Fagnani</span>: OK. </span> <span class="line" data-startTime="434">Some examples of semantic </span><span class="line" data-startTime="434">improvements. </span> <span class="line" data-startTime="436">Just real quick, only </span><span class="line" data-startTime="436">true is truthy. </span> <span class="line" data-startTime="438">So you don't have to guess what </span><span class="line" data-startTime="438">values are going to be </span><span class="line" data-startTime="440">true or false. </span> <span class="line" data-startTime="441">Basically, true is true, false </span><span class="line" data-startTime="441">is false, and everything else </span><span class="line" data-startTime="443">is what it is. </span> <span class="line" data-startTime="445">We got rid of undefined. </span> <span class="line" data-startTime="446">There's only null. </span> <span class="line" data-startTime="448">That fixes a lot of problems. </span> <span class="line" data-startTime="449">There's no type coercion with </span><span class="line" data-startTime="449">equalities checks or operators </span><span class="line" data-startTime="453">or other things like that. </span></p>

<p><span class="line" data-startTime="454">So the language is more </span><span class="line" data-startTime="454">predictable in a lot of ways. </span> <span class="line" data-startTime="457">Some other examples. </span> <span class="line" data-startTime="459">So in JavaScript, if you access </span><span class="line" data-startTime="459">a property that isn't </span><span class="line" data-startTime="463">available on an object, you </span><span class="line" data-startTime="463">will get undefined. </span> <span class="line" data-startTime="467">So that can be a problem. </span> <span class="line" data-startTime="468">If you have a typo, you don't </span><span class="line" data-startTime="468">necessarily know it. </span> <span class="line" data-startTime="470">You just get an undefined </span><span class="line" data-startTime="470">value. </span> <span class="line" data-startTime="472">So in Dart, we changed this. </span> <span class="line" data-startTime="474">We fixed it. </span> <span class="line" data-startTime="474">And what do you think </span><span class="line" data-startTime="474">happens here, Seth? </span></p>

<p class="speaker"><span class="line" data-starttime="475"><span class="speakerName">Seth Ladd</span>: Well, hopefully a </span><span class="line" data-startTime="475">clear and consistent and </span><span class="line" data-startTime="477">logical error. </span></p>

<p class="speaker"><span class="line" data-starttime="478"><span class="speakerName">Justin Fagnani</span>: Well, that's </span><span class="line" data-startTime="478">exactly right. </span><span class="line" data-startTime="480">If you access a missing property </span><span class="line" data-startTime="480">on an object in Dart, </span><span class="line" data-startTime="484">you get a NoSuchMethodError </span><span class="line" data-startTime="484">because Dart knows it doesn't </span><span class="line" data-startTime="486">exist because it wasn't </span><span class="line" data-startTime="486">declared. </span><span class="line" data-startTime="489">Let's look at list access. </span><span class="line" data-startTime="490">So here we have an empty list </span><span class="line" data-startTime="490">and we're accessing the 99th </span><span class="line" data-startTime="493">element of an empty list. </span><span class="line" data-startTime="494">So we're way out of range. </span><span class="line" data-startTime="497">What do you think happens </span><span class="line" data-startTime="497">here, Seth? </span></p>

<p class="speaker"><span class="line" data-starttime="498"><span class="speakerName">Seth Ladd</span>: Hopefully </span><span class="line" data-startTime="498">a clear and </span><span class="line" data-startTime="499">consistent and logical error. </span></p>

<p class="speaker"><span class="line" data-starttime="500"><span class="speakerName">Justin Fagnani</span>: Amazing. </span><span class="line" data-startTime="501">You're right again. </span><span class="line" data-startTime="502">Here, you get a range error, </span><span class="line" data-startTime="502">like you would expect. </span><span class="line" data-startTime="504">This has a number of benefits </span><span class="line" data-startTime="504">to your program and the VM. </span><span class="line" data-startTime="507">Next, let's talk about scope. </span><span class="line" data-startTime="509">So JavaScript, as you might </span><span class="line" data-startTime="509">know, has function scope. </span><span class="line" data-startTime="513">And it hoists the function </span><span class="line" data-startTime="513">declarations to </span><span class="line" data-startTime="515">the top of the function. </span><span class="line" data-startTime="517">So here we have two variables </span><span class="line" data-startTime="517">with the same name "foo." One </span><span class="line" data-startTime="521">of them is a top-level scope and </span><span class="line" data-startTime="521">the other one is inside of </span><span class="line" data-startTime="523">this block here, inside </span><span class="line" data-startTime="523">the if statement. </span><span class="line" data-startTime="526">So when we print foo here, how </span><span class="line" data-startTime="526">do we know which one is going </span><span class="line" data-startTime="529">to be printed? </span><span class="line" data-startTime="530">Well, so we call this method </span><span class="line" data-startTime="530">here and it's going to print </span><span class="line" data-startTime="532">something, Seth. </span><span class="line" data-startTime="533">What do you think it prints? </span></p>

<p class="speaker"><span class="line" data-starttime="534"><span class="speakerName">Seth Ladd</span>: Hopefully, due </span><span class="line" data-startTime="534">to the logical static </span><span class="line" data-startTime="536">[? analysis ?] </span><span class="line" data-startTime="536">I can do with my own eyes </span><span class="line" data-startTime="536">here, top-level. </span></p>

<p class="speaker"><span class="line" data-starttime="538"><span class="speakerName">Justin Fagnani</span>: Seth </span><span class="line" data-startTime="538">is a ringer. </span> <span class="line" data-startTime="540">Yes, it does print top-level. </span> <span class="line" data-startTime="542">So these things are less </span><span class="line" data-startTime="542">confusing, less surprising and </span><span class="line" data-startTime="546">better for development. </span> <span class="line" data-startTime="548">This also. </span> <span class="line" data-startTime="549">So we have lexically </span><span class="line" data-startTime="549">scoped this. </span> <span class="line" data-startTime="550">This is bound to a </span><span class="line" data-startTime="550">lexical scope. </span> <span class="line" data-startTime="553">You always know what this </span><span class="line" data-startTime="553">is going to refer to. </span> <span class="line" data-startTime="556">In DOM programming, for example, </span><span class="line" data-startTime="556">the "this" pointer of </span><span class="line" data-startTime="559">an event handler actually refers </span><span class="line" data-startTime="559">to the function that's </span><span class="line" data-startTime="562">the event handler, not the </span><span class="line" data-startTime="562">object that you're in when you </span><span class="line" data-startTime="564">define that function. </span></p>

<p><span class="line" data-startTime="565">And there's libraries that </span><span class="line" data-startTime="565">try to fix this. </span> <span class="line" data-startTime="568">But in Dart, we've just gone </span><span class="line" data-startTime="568">ahead and fixed it for you. </span> <span class="line" data-startTime="570">So in this case, this refers </span><span class="line" data-startTime="570">to our instance of awesome </span><span class="line" data-startTime="574">button and it calls </span><span class="line" data-startTime="574">the right method. </span> <span class="line" data-startTime="575">And it's just very </span><span class="line" data-startTime="575">unsurprising. </span></p>

<p class="speaker"><span class="line" data-starttime="578"><span class="speakerName">Seth Ladd</span>: OK, so that </span><span class="line" data-startTime="578">was the syntax, a </span><span class="line" data-startTime="580">little bit of the semantics. </span> <span class="line" data-startTime="581">Let's talk about </span><span class="line" data-startTime="581">the structure. </span> <span class="line" data-startTime="582">Now, we've seen functions and </span><span class="line" data-startTime="582">classes, and we'll see some of </span><span class="line" data-startTime="585">these other features like </span><span class="line" data-startTime="585">mixins in a little bit. </span> <span class="line" data-startTime="587">So let's talk about libraries. </span> <span class="line" data-startTime="588">Dart has a really nice way to </span><span class="line" data-startTime="588">bunch up your code into </span><span class="line" data-startTime="591">reusable chunks we </span><span class="line" data-startTime="591">call libraries. </span> <span class="line" data-startTime="592">Here's an example here. </span> <span class="line" data-startTime="594">This is a single file. </span></p>

<p><span class="line" data-startTime="595">You simply declare that a file </span><span class="line" data-startTime="595">is a library using library </span><span class="line" data-startTime="597">games here in this case. </span> <span class="line" data-startTime="599">You can import other </span><span class="line" data-startTime="599">libraries. </span> <span class="line" data-startTime="600">Dart:math comes from </span><span class="line" data-startTime="600">the Dart SDK. </span> <span class="line" data-startTime="603">players.dart is another Dart </span><span class="line" data-startTime="603">file, so we can pull in other </span><span class="line" data-startTime="606">files as libraries as well. </span> <span class="line" data-startTime="607">And a feature I really like is </span><span class="line" data-startTime="607">you can put, say, multiple </span><span class="line" data-startTime="611">classes, top-level functions </span><span class="line" data-startTime="611">all in the same file. </span> <span class="line" data-startTime="614">So it gives you a very flexible </span><span class="line" data-startTime="614">way to organize not </span><span class="line" data-startTime="616">only just where you want </span><span class="line" data-startTime="616">to put your classes and </span><span class="line" data-startTime="618">functions, but also how you want </span><span class="line" data-startTime="618">to structure them on the </span><span class="line" data-startTime="621">file system. </span> <span class="line" data-startTime="621">But everything falls </span><span class="line" data-startTime="621">inside a library. </span></p>

<p><span class="line" data-startTime="623">You can then import them </span><span class="line" data-startTime="623">and reuse them. </span> <span class="line" data-startTime="627">OK, that was a lightning tour. </span> <span class="line" data-startTime="629">Let's look at some </span><span class="line" data-startTime="629">of what's new. </span> <span class="line" data-startTime="631">We'll start with the language. </span> <span class="line" data-startTime="633">All right, here's a common thing </span><span class="line" data-startTime="633">that you always do, say, </span><span class="line" data-startTime="636">working with a DOM. </span> <span class="line" data-startTime="637">You want to create a new button </span><span class="line" data-startTime="637">and set up the state of </span><span class="line" data-startTime="640">that button &mdash; </span><span class="line" data-startTime="641">ID, text, classes, </span><span class="line" data-startTime="641">click handlers. </span> <span class="line" data-startTime="643">Well, in this particular </span><span class="line" data-startTime="643">case, I've </span><span class="line" data-startTime="644">repeated button six times. </span> <span class="line" data-startTime="646">That's a lot. </span> <span class="line" data-startTime="647">Well, taking a cue from </span><span class="line" data-startTime="647">Smalltalk, we've introduced </span><span class="line" data-startTime="650">method cascades. </span> <span class="line" data-startTime="651">And in this example here, I've </span><span class="line" data-startTime="651">eliminate the repetition of </span><span class="line" data-startTime="654">the variable button. </span></p>

<p><span class="line" data-startTime="656">See the double dots here? </span><span class="line" data-startTime="657">All of these expressions are </span><span class="line" data-startTime="657">applied to this very first </span><span class="line" data-startTime="660">expression here new </span><span class="line" data-startTime="660">ButtonElement. </span> <span class="line" data-startTime="662">I've eliminated most of the </span><span class="line" data-startTime="662">occurrences of button here. </span> <span class="line" data-startTime="666">I like this for builder </span><span class="line" data-startTime="666">type APIs. </span> <span class="line" data-startTime="667">It makes it just more </span><span class="line" data-startTime="667">clear and concise. </span> <span class="line" data-startTime="670">But we can do a little bit </span><span class="line" data-startTime="670">better, because all of these </span><span class="line" data-startTime="672">different cascades roll up to </span><span class="line" data-startTime="672">this first expression here. </span> <span class="line" data-startTime="676">I can actually eliminate </span><span class="line" data-startTime="676">the need to </span><span class="line" data-startTime="678">introduce a new variable. </span> <span class="line" data-startTime="680">So here you can see I can add </span><span class="line" data-startTime="680">this new button element to the </span><span class="line" data-startTime="683">children of this parent element </span><span class="line" data-startTime="683">and initialize its </span><span class="line" data-startTime="685">state all within the </span><span class="line" data-startTime="685">same call here. </span></p>

<p><span class="line" data-startTime="687">This is really &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="689"><span class="speakerName">Justin Fagnani</span>: One great thing </span><span class="line" data-startTime="689">about this is that it </span><span class="line" data-startTime="692">turns every API into </span><span class="line" data-startTime="692">a builder API. </span> <span class="line" data-startTime="693">So you don't have to </span><span class="line" data-startTime="693">preemptively return this from </span><span class="line" data-startTime="695">all your methods in order </span><span class="line" data-startTime="695">to have a fluent API. </span> <span class="line" data-startTime="697">In Dart, every API becomes </span><span class="line" data-startTime="697">fluent and it's universal </span><span class="line" data-startTime="700">across the board </span><span class="line" data-startTime="700">and consistent. </span> <span class="line" data-startTime="705">OK. </span> <span class="line" data-startTime="705">So let's talk about another </span><span class="line" data-startTime="705">great new language feature </span><span class="line" data-startTime="708">called mixins. </span></p>

<p><span class="line" data-startTime="709">So mixin is something that </span><span class="line" data-startTime="709">languages, like Newspeak and </span><span class="line" data-startTime="714">Smalltalk have, and it's a way </span><span class="line" data-startTime="714">to share code without using </span><span class="line" data-startTime="717">inheritance. </span> <span class="line" data-startTime="718">You might be familiar with the </span><span class="line" data-startTime="718">maxim, composition over </span><span class="line" data-startTime="720">inheritance. </span> <span class="line" data-startTime="722">And the idea is that there's </span><span class="line" data-startTime="722">problems if you try to share </span><span class="line" data-startTime="724">code exclusively through </span><span class="line" data-startTime="724">inheritance. </span> <span class="line" data-startTime="725">You can only have </span><span class="line" data-startTime="725">one super-class. </span> <span class="line" data-startTime="727">So it might not be a class you </span><span class="line" data-startTime="727">actually want to extend. </span> <span class="line" data-startTime="730">So in the last year, Dart's </span><span class="line" data-startTime="730">added mixins. </span> <span class="line" data-startTime="732">And let's take our hug example </span><span class="line" data-startTime="732">from before and let's say we </span><span class="line" data-startTime="735">want to save it to a database. </span> <span class="line" data-startTime="736">A typical solution to this is </span><span class="line" data-startTime="736">you extend some kind of </span><span class="line" data-startTime="738">persistable base class. </span> <span class="line" data-startTime="741">But that has a lot </span><span class="line" data-startTime="741">of problems. </span></p>

<p><span class="line" data-startTime="741">You might want to extend some </span><span class="line" data-startTime="741">other class, actually. </span> <span class="line" data-startTime="744">So what you're interested in </span><span class="line" data-startTime="744">here is the behavior, not </span><span class="line" data-startTime="746">necessarily the inheritance </span><span class="line" data-startTime="746">hierarchy. </span> <span class="line" data-startTime="748">Hug is not actually </span><span class="line" data-startTime="748">a persistable. </span> <span class="line" data-startTime="751">It has the persistable </span><span class="line" data-startTime="751">behavior. </span> <span class="line" data-startTime="753">So you don't want to pollute </span><span class="line" data-startTime="753">your inheritance tree. </span> <span class="line" data-startTime="755">Instead, what you want to do </span><span class="line" data-startTime="755">is just add this behavior. </span> <span class="line" data-startTime="758">You want to compose it or slide </span><span class="line" data-startTime="758">it in from the side &mdash; </span><span class="line" data-startTime="760">the persistable behavior. </span> <span class="line" data-startTime="762">So what does this look like? </span><span class="line" data-startTime="764">Well, up top here we have our </span><span class="line" data-startTime="764">abstract class persistable. </span> <span class="line" data-startTime="768">And in save and load, we defined </span><span class="line" data-startTime="768">the behavior we want, </span><span class="line" data-startTime="770">the implementations in the </span><span class="line" data-startTime="770">dot, dot, dots there. </span> <span class="line" data-startTime="773">And we require that classes </span><span class="line" data-startTime="773">that implement persistable </span><span class="line" data-startTime="776">implement this toJson method. </span> <span class="line" data-startTime="777">Once they do that, save and load </span><span class="line" data-startTime="777">can use that method in </span><span class="line" data-startTime="780">order to implement </span><span class="line" data-startTime="780">their behavior. </span></p>

<p><span class="line" data-startTime="781">So down here in our hug class, </span><span class="line" data-startTime="781">we're going to use the brand </span><span class="line" data-startTime="784">new keyboard with to say that we </span><span class="line" data-startTime="784">want to mix in the behavior </span><span class="line" data-startTime="787">from persistable into </span><span class="line" data-startTime="787">our hug class. </span> <span class="line" data-startTime="789">And then you'll notice that we </span><span class="line" data-startTime="789">define that toJson class, </span><span class="line" data-startTime="792">which is used by the </span><span class="line" data-startTime="792">other methods. </span> <span class="line" data-startTime="793">And in the bottom here, you can </span><span class="line" data-startTime="793">see that we call the save </span><span class="line" data-startTime="796">method that's been </span><span class="line" data-startTime="796">added to hug. </span> <span class="line" data-startTime="798">It's not inheritance and it </span><span class="line" data-startTime="798">behaves as you would expect. </span> <span class="line" data-startTime="800">So this is a great way to </span><span class="line" data-startTime="800">compose classes together. </span> <span class="line" data-startTime="804">You also notice that persistable </span><span class="line" data-startTime="804">is just a class. </span> <span class="line" data-startTime="806">We don't have a mixin keyword. </span> <span class="line" data-startTime="808">So that's just a few </span><span class="line" data-startTime="808">restrictions. </span> <span class="line" data-startTime="810">If your class extends object </span><span class="line" data-startTime="810">and it doesn't have a </span><span class="line" data-startTime="812">constructor, then you can </span><span class="line" data-startTime="812">use it as a mixin. </span> <span class="line" data-startTime="815">And some of these restrictions </span><span class="line" data-startTime="815">might go away over time. </span></p>

<p><span class="line" data-startTime="820">Oh, we had animations. </span> <span class="line" data-startTime="823">All right. </span></p>

<p class="speaker"><span class="line" data-starttime="823"><span class="speakerName">Seth Ladd</span>: Another new </span><span class="line" data-startTime="823">feature are metadata. </span> <span class="line" data-startTime="826">Here's a good example. </span> <span class="line" data-startTime="827">You can use metadata with the </span><span class="line" data-startTime="827">at symbol here, @deprecated. </span> <span class="line" data-startTime="831">And that gives really good </span><span class="line" data-startTime="831">feedback to, say, tools. </span> <span class="line" data-startTime="833">In this case, the Dart Editor, </span><span class="line" data-startTime="833">he can look at @deprecated, </span><span class="line" data-startTime="836">and then visually indicate the </span><span class="line" data-startTime="836">functions or methods that are </span><span class="line" data-startTime="838">deprecated. </span> <span class="line" data-startTime="840">The nice thing about metadata </span><span class="line" data-startTime="840">in Dart though, is you can </span><span class="line" data-startTime="842">define your own metadata. </span> <span class="line" data-startTime="844">Here's a good example of an </span><span class="line" data-startTime="844">in-progress feature we're </span><span class="line" data-startTime="846">working on, lazy load libraries, </span><span class="line" data-startTime="846">that uses const </span><span class="line" data-startTime="849">objects as metadata </span><span class="line" data-startTime="849">annotations. </span></p>

<p><span class="line" data-startTime="852">Let's try to walk through </span><span class="line" data-startTime="852">some of this code. </span> <span class="line" data-startTime="854">So first we're going to declare </span><span class="line" data-startTime="854">that the library </span><span class="line" data-startTime="855">itself is deferred. </span> <span class="line" data-startTime="857">We're creating a const </span><span class="line" data-startTime="857">object, const lazy. </span> <span class="line" data-startTime="860">We can then use that lazy </span><span class="line" data-startTime="860">const object to mark the </span><span class="line" data-startTime="862">import as lazy as shown here. </span> <span class="line" data-startTime="866">Then, we can call load on that </span><span class="line" data-startTime="866">lazy const object, the </span><span class="line" data-startTime="869">deferred library, and use a </span><span class="line" data-startTime="869">Future to wait for that </span><span class="line" data-startTime="872">library to finish loading. </span> <span class="line" data-startTime="873">Then, we can use the features </span><span class="line" data-startTime="873">and functionality from that </span><span class="line" data-startTime="876">library inside of the future. </span> <span class="line" data-startTime="880">Now, our tools can read these </span><span class="line" data-startTime="880">metadata annotations here and </span><span class="line" data-startTime="884">say, take in Dart applications </span><span class="line" data-startTime="884">spread across multiple files. </span></p>

<p><span class="line" data-startTime="888">Pipe them through dart2js, </span><span class="line" data-startTime="888">which can look for these </span><span class="line" data-startTime="890">metadata annotations and spit </span><span class="line" data-startTime="890">out a single JavaScript file </span><span class="line" data-startTime="893">for the bulk of the app. </span> <span class="line" data-startTime="894">And then, another JavaScript </span><span class="line" data-startTime="894">file for </span><span class="line" data-startTime="896">that lazy loaded library. </span> <span class="line" data-startTime="898">This is a great deployment time </span><span class="line" data-startTime="898">tool for you to choose </span><span class="line" data-startTime="901">how and when you want to load in </span><span class="line" data-startTime="901">the different components of </span><span class="line" data-startTime="903">your application. </span></p>

<p class="speaker"><span class="line" data-starttime="906"><span class="speakerName">Justin Fagnani</span>: OK, so that's </span><span class="line" data-startTime="906">what's new in the language. </span> <span class="line" data-startTime="909">Let's talk next about </span><span class="line" data-startTime="909">the libraries. </span> <span class="line" data-startTime="910">There's been a lot of great </span><span class="line" data-startTime="910">developments in the last year. </span> <span class="line" data-startTime="913">First, let's talk about the </span><span class="line" data-startTime="913">number one question that we </span><span class="line" data-startTime="915">get asked with Dart </span><span class="line" data-startTime="915">is, can I use </span><span class="line" data-startTime="917">existing JavaScript libraries? </span><span class="line" data-startTime="919">Can I integrate with JavaScript </span><span class="line" data-startTime="919">in some way? </span><span class="line" data-startTime="921">And the answer is yes. </span> <span class="line" data-startTime="922">We do this through our </span><span class="line" data-startTime="922">JavaScript interop package. </span> <span class="line" data-startTime="925">Now, Dart can exist in two </span><span class="line" data-startTime="925">different worlds, really. </span> <span class="line" data-startTime="929">We have this Dart to JS world, </span><span class="line" data-startTime="929">where everything is compiled </span><span class="line" data-startTime="931">to JavaScript. </span> <span class="line" data-startTime="932">And also, in Dartium, we have </span><span class="line" data-startTime="932">a world where there's two </span><span class="line" data-startTime="934">different VMs. </span> <span class="line" data-startTime="935">And so you don't always have </span><span class="line" data-startTime="935">direct access to the objects. </span></p>

<p><span class="line" data-startTime="938">So the way JavaScript interop </span><span class="line" data-startTime="938">works is that </span><span class="line" data-startTime="940">we use proxy objects. </span> <span class="line" data-startTime="941">And these proxy objects </span><span class="line" data-startTime="941">represent an object that's in </span><span class="line" data-startTime="943">the other environment. </span> <span class="line" data-startTime="945">And the calls are forwarded, </span><span class="line" data-startTime="945">data is </span><span class="line" data-startTime="947">serialized as necessary. </span> <span class="line" data-startTime="949">So let's show an example. </span> <span class="line" data-startTime="951">So here we're using the JS </span><span class="line" data-startTime="951">package with the prefix js. </span> <span class="line" data-startTime="954">We have code up top in Dart and </span><span class="line" data-startTime="954">down below in JavaScript. </span> <span class="line" data-startTime="957">And we're going to use an </span><span class="line" data-startTime="957">imaginary charts API. </span> <span class="line" data-startTime="960">You can see that the code looks </span><span class="line" data-startTime="960">very, very similar. </span></p>

<p><span class="line" data-startTime="962">In the first line, here we're </span><span class="line" data-startTime="962">just stashing a reference to </span><span class="line" data-startTime="965">the API object. </span> <span class="line" data-startTime="966">In the second line, we need </span><span class="line" data-startTime="966">to create some data. </span> <span class="line" data-startTime="969">Because our charts API is a </span><span class="line" data-startTime="969">JavaScript API and we need the </span><span class="line" data-startTime="972">data to be a JavaScript array, </span><span class="line" data-startTime="972">we simply pass a Dart array to </span><span class="line" data-startTime="975">this function that creates a </span><span class="line" data-startTime="975">JavaScript array out of it. </span> <span class="line" data-startTime="978">And then in the third line </span><span class="line" data-startTime="978">here, we want to </span><span class="line" data-startTime="980">create a new chart. </span> <span class="line" data-startTime="981">The way you do this from the </span><span class="line" data-startTime="981">Dart world is you say, I want </span><span class="line" data-startTime="984">to create a new proxy. </span> <span class="line" data-startTime="985">And you tell it what constructor </span><span class="line" data-startTime="985">and what </span><span class="line" data-startTime="986">arguments to use. </span></p>

<p><span class="line" data-startTime="988">A little bit different, </span><span class="line" data-startTime="988">but looks very </span><span class="line" data-startTime="989">similar to the line below. </span> <span class="line" data-startTime="991">And then finally, chart </span><span class="line" data-startTime="991">is now a proxy to </span><span class="line" data-startTime="993">a JavaScript object. </span> <span class="line" data-startTime="994">And now you can interact with </span><span class="line" data-startTime="994">it in a way that looks very </span><span class="line" data-startTime="997">much like any other </span><span class="line" data-startTime="997">Dart object. </span> <span class="line" data-startTime="998">And in fact, looks identical </span><span class="line" data-startTime="998">to the JavaScript below. </span> <span class="line" data-startTime="1001">So with a JS interop package, </span><span class="line" data-startTime="1001">you can use JavaScript APIs. </span> <span class="line" data-startTime="1005">This is very important for </span><span class="line" data-startTime="1005">existing applications. </span></p>

<p class="speaker"><span class="line" data-starttime="1008"><span class="speakerName">Seth Ladd</span>: Another new library </span><span class="line" data-startTime="1008">we've been working on over the </span><span class="line" data-startTime="1011">past year is our Mirror-based </span><span class="line" data-startTime="1011">reflection library. </span> <span class="line" data-startTime="1014">With mirror-based reflection, </span><span class="line" data-startTime="1014">you can do source code and </span><span class="line" data-startTime="1017">run-time reflection. </span> <span class="line" data-startTime="1018">That is, you can load up a bunch </span><span class="line" data-startTime="1018">of source code and use </span><span class="line" data-startTime="1021">mirrors to ask questions </span><span class="line" data-startTime="1021">about it. </span> <span class="line" data-startTime="1023">You can also, at run-time, ask </span><span class="line" data-startTime="1023">questions about the structure </span><span class="line" data-startTime="1025">of your app. </span> <span class="line" data-startTime="1026">You can use mirrors to reflect </span><span class="line" data-startTime="1026">on both classes and instances. </span> <span class="line" data-startTime="1031">And you can introspect, say what </span><span class="line" data-startTime="1031">fields do you have, what </span><span class="line" data-startTime="1033">construction do you have, and </span><span class="line" data-startTime="1033">invoke methods on those </span><span class="line" data-startTime="1036">objects dynamically. </span></p>

<p><span class="line" data-startTime="1038">How might we use this? </span><span class="line" data-startTime="1039">Well, here's an example of </span><span class="line" data-startTime="1039">creating a logging proxy. </span> <span class="line" data-startTime="1042">Say I have some client code that </span><span class="line" data-startTime="1042">wants to call Hello on </span><span class="line" data-startTime="1045">some object, but I wanted to go </span><span class="line" data-startTime="1045">through a proxy that logs </span><span class="line" data-startTime="1048">all these calls. </span> <span class="line" data-startTime="1049">So it's going to hit </span><span class="line" data-startTime="1049">proxy first. </span> <span class="line" data-startTime="1050">He's going to print out some </span><span class="line" data-startTime="1050">sort of logging statement. </span> <span class="line" data-startTime="1053">Then he's going to delegate </span><span class="line" data-startTime="1053">the actual Hello call back </span><span class="line" data-startTime="1055">down to the true delegate </span><span class="line" data-startTime="1055">object. </span></p>

<p><span class="line" data-startTime="1057">Let's see how we do this with </span><span class="line" data-startTime="1057">mirrors and reflection. </span> <span class="line" data-startTime="1060">So first up, import the </span><span class="line" data-startTime="1060">Dart mirrors library. </span> <span class="line" data-startTime="1062">It comes to you from </span><span class="line" data-startTime="1062">the Dart SDK. </span> <span class="line" data-startTime="1066">Next, use the top-level function </span><span class="line" data-startTime="1066">reflect to reflect on </span><span class="line" data-startTime="1069">the delegate object and get </span><span class="line" data-startTime="1069">back an instance mirror. </span> <span class="line" data-startTime="1073">Next, now remember if you call </span><span class="line" data-startTime="1073">a getter or function on an </span><span class="line" data-startTime="1077">object and that doesn't </span><span class="line" data-startTime="1077">exist, you'll get a </span><span class="line" data-startTime="1079">noSuchMethodError. </span> <span class="line" data-startTime="1080">It's Nice clear, and concise. </span> <span class="line" data-startTime="1083">You can actually implement </span><span class="line" data-startTime="1083">noSuchMethod here and capture </span><span class="line" data-startTime="1085">those calls and do something </span><span class="line" data-startTime="1085">dynamic and </span><span class="line" data-startTime="1087">interesting with it. </span> <span class="line" data-startTime="1088">In this case, we're going to do </span><span class="line" data-startTime="1088">that to capture all calls </span><span class="line" data-startTime="1090">going through our </span><span class="line" data-startTime="1090">logging proxy. </span></p>

<p><span class="line" data-startTime="1093">Before we actually delegate, </span><span class="line" data-startTime="1093">let's go ahead and </span><span class="line" data-startTime="1094">log that call out. </span> <span class="line" data-startTime="1095">We'll just print it </span><span class="line" data-startTime="1095">out very easily. </span> <span class="line" data-startTime="1097">And then, using that instance </span><span class="line" data-startTime="1097">mirror itself, we can delegate </span><span class="line" data-startTime="1100">the original call that came in </span><span class="line" data-startTime="1100">from noSuchMethod and pipe it </span><span class="line" data-startTime="1104">into the actual delegate </span><span class="line" data-startTime="1104">itself. </span> <span class="line" data-startTime="1106">This is a really nice way to </span><span class="line" data-startTime="1106">deal with run-time dynamic </span><span class="line" data-startTime="1109">programs using noSuchMethod </span><span class="line" data-startTime="1109">and mirrors. </span> <span class="line" data-startTime="1113">Here's the example. </span> <span class="line" data-startTime="1114">We're going to create a login </span><span class="line" data-startTime="1114">proxy wrap greeter. </span> <span class="line" data-startTime="1117">We're going to call the Hello </span><span class="line" data-startTime="1117">method on what we </span><span class="line" data-startTime="1119">think is the greeter. </span> <span class="line" data-startTime="1120">But of course, it's going </span><span class="line" data-startTime="1120">through logging proxy. </span></p>

<p><span class="line" data-startTime="1122">Two things will be </span><span class="line" data-startTime="1122">printed out. </span> <span class="line" data-startTime="1123">First, the symbol Hello </span><span class="line" data-startTime="1123">was called. </span> <span class="line" data-startTime="1125">That comes from the </span><span class="line" data-startTime="1125">logging proxy. </span> <span class="line" data-startTime="1126">And then, Hello that comes from </span><span class="line" data-startTime="1126">the greeter because we </span><span class="line" data-startTime="1128">delegated that call back </span><span class="line" data-startTime="1128">down to the delegate. </span></p>

<p class="speaker"><span class="line" data-starttime="1133"><span class="speakerName">Justin Fagnani</span>: All right, let's </span><span class="line" data-startTime="1133">talk about something </span><span class="line" data-startTime="1134">that's very important for web </span><span class="line" data-startTime="1134">programming, which is </span><span class="line" data-startTime="1136">asynchronous APIs </span><span class="line" data-startTime="1136">and asynchronous </span><span class="line" data-startTime="1138">programming in Dart. </span> <span class="line" data-startTime="1140">So Dart's had some facilities </span><span class="line" data-startTime="1140">for asynchronous programming </span><span class="line" data-startTime="1143">and they've been greatly </span><span class="line" data-startTime="1143">expanded in the </span><span class="line" data-startTime="1145">new Dart Async library. </span> <span class="line" data-startTime="1147">First of all, why is async </span><span class="line" data-startTime="1147">programming so important? </span><span class="line" data-startTime="1150">Why is it such a big </span><span class="line" data-startTime="1150">deal for Dart? </span><span class="line" data-startTime="1152">Well, the web is full of </span><span class="line" data-startTime="1152">asynchronous APIs. </span> <span class="line" data-startTime="1154">These are the APIs that when </span><span class="line" data-startTime="1154">you invoke them, they don't </span><span class="line" data-startTime="1157">block your program and they </span><span class="line" data-startTime="1157">go do some work in the </span><span class="line" data-startTime="1159">background. </span> <span class="line" data-startTime="1159">Or maybe they wait for some </span><span class="line" data-startTime="1159">event to happen and they need </span><span class="line" data-startTime="1162">to notify your program </span><span class="line" data-startTime="1162">when they're done, </span><span class="line" data-startTime="1163">so they take a callback. </span> <span class="line" data-startTime="1165">And when they've loaded some </span><span class="line" data-startTime="1165">data or a user clicks on a </span><span class="line" data-startTime="1167">button or something, the </span><span class="line" data-startTime="1167">callback is invoked. </span> <span class="line" data-startTime="1170">If you need to perform some data </span><span class="line" data-startTime="1170">after that, then you need </span><span class="line" data-startTime="1172">to call another &mdash; </span><span class="line" data-startTime="1174">perform another asynchronous </span><span class="line" data-startTime="1174">operation after that, you need </span><span class="line" data-startTime="1176">to call another API in the </span><span class="line" data-startTime="1176">callback and then register </span><span class="line" data-startTime="1178">another callback. </span></p>

<p><span class="line" data-startTime="1180">You end up with these nested </span><span class="line" data-startTime="1180">callbacks, which leads us to </span><span class="line" data-startTime="1182">what is known as </span><span class="line" data-startTime="1182">callback hell. </span> <span class="line" data-startTime="1185">Well, with Dart, we've tried </span><span class="line" data-startTime="1185">to add features to the </span><span class="line" data-startTime="1188">libraries that make your life </span><span class="line" data-startTime="1188">easier and lead you from </span><span class="line" data-startTime="1190">callback hell to callback </span><span class="line" data-startTime="1190">nirvana, or </span><span class="line" data-startTime="1193">callback tropical beach. </span></p>

<p class="speaker"><span class="line" data-starttime="1194"><span class="speakerName">Seth Ladd</span>: Beautiful beach. </span></p>

<p class="speaker"><span class="line" data-starttime="1195"><span class="speakerName">Justin Fagnani</span>: Yeah. </span> <span class="line" data-startTime="1196">And we do this with futures </span><span class="line" data-startTime="1196">and streams. </span> <span class="line" data-startTime="1198">So first, let's take </span><span class="line" data-startTime="1198">a look at futures. </span> <span class="line" data-startTime="1201">So a future is a promise that </span><span class="line" data-startTime="1201">there will be some value </span><span class="line" data-startTime="1205">delivered to you at some </span><span class="line" data-startTime="1205">time in the future. </span> <span class="line" data-startTime="1207">In fact, in JavaScript </span><span class="line" data-startTime="1207">libraries, the concept is </span><span class="line" data-startTime="1209">often called promises. </span> <span class="line" data-startTime="1211">So first, let's look at a </span><span class="line" data-startTime="1211">callback example here. </span> <span class="line" data-startTime="1213">DoStuff is an asynchronous </span><span class="line" data-startTime="1213">method. </span> <span class="line" data-startTime="1217">It takes as a first argument a </span><span class="line" data-startTime="1217">callback that will be invoked </span><span class="line" data-startTime="1219">when it's done. </span> <span class="line" data-startTime="1219">And as its second optional </span><span class="line" data-startTime="1219">method, an error handler. </span> <span class="line" data-startTime="1223">So this is what a callback-based </span><span class="line" data-startTime="1223">API would look </span><span class="line" data-startTime="1225">like in Dart. </span> <span class="line" data-startTime="1226">And as you can see, even with </span><span class="line" data-startTime="1226">a simple one-level deep no </span><span class="line" data-startTime="1229">nesting, it's already looking </span><span class="line" data-startTime="1229">a little complicated. </span> <span class="line" data-startTime="1232">Well, with futures, what you </span><span class="line" data-startTime="1232">do is instead of taking a </span><span class="line" data-startTime="1234">callback, you return a future. </span> <span class="line" data-startTime="1236">And this future object has </span><span class="line" data-startTime="1236">a very consistent way of </span><span class="line" data-startTime="1238">registering the callback </span><span class="line" data-startTime="1238">in the error handler. </span></p>

<p><span class="line" data-startTime="1240">All futures are the </span><span class="line" data-startTime="1240">same class. </span> <span class="line" data-startTime="1243">They all do this the same way. </span> <span class="line" data-startTime="1244">And you can see it already </span><span class="line" data-startTime="1244">looks a little cleaner. </span> <span class="line" data-startTime="1246">But because futures chain, they </span><span class="line" data-startTime="1246">return themselves, you </span><span class="line" data-startTime="1250">can make this look </span><span class="line" data-startTime="1250">even simpler. </span> <span class="line" data-startTime="1252">You don't actually have to store </span><span class="line" data-startTime="1252">the future in a value. </span> <span class="line" data-startTime="1254">And in fact, in Dart, </span><span class="line" data-startTime="1254">you often see code </span><span class="line" data-startTime="1255">that looks like this. </span> <span class="line" data-startTime="1256">You call an asynchronous </span><span class="line" data-startTime="1256">method. </span> <span class="line" data-startTime="1258">You register a handler and </span><span class="line" data-startTime="1258">you register a callback. </span> <span class="line" data-startTime="1260">And it looks very sequential. </span></p>

<p class="speaker"><span class="line" data-starttime="1262"><span class="speakerName">Seth Ladd</span>: We should point out </span><span class="line" data-startTime="1262">here that handle and handle </span><span class="line" data-startTime="1263">errors themselves </span><span class="line" data-startTime="1263">are functions. </span><span class="line" data-startTime="1265">So we can pass in a function </span><span class="line" data-startTime="1265">right into these callbacks </span><span class="line" data-startTime="1267">without dealing with a whole </span><span class="line" data-startTime="1267">one-line or multiple line, </span><span class="line" data-startTime="1270">like what you see on the left. </span></p>

<p class="speaker"><span class="line" data-starttime="1271"><span class="speakerName">Justin Fagnani</span>: Exactly. </span> <span class="line" data-startTime="1274">All right, now let's look at </span><span class="line" data-startTime="1274">something where we have more </span><span class="line" data-startTime="1276">than one level of nesting. </span> <span class="line" data-startTime="1278">So here's an imaginary cat </span><span class="line" data-startTime="1278">service, because we all know </span><span class="line" data-startTime="1280">the internet basically exists </span><span class="line" data-startTime="1280">for trading cat pictures. </span> <span class="line" data-startTime="1284">So the first step we do here </span><span class="line" data-startTime="1284">is we get some cat data. </span> <span class="line" data-startTime="1287">And once we get the cat </span><span class="line" data-startTime="1287">data, we're going to </span><span class="line" data-startTime="1288">want to go get a picture. </span> <span class="line" data-startTime="1289">And then once we have the </span><span class="line" data-startTime="1289">picture, we're going to want </span><span class="line" data-startTime="1291">to rotate it and some work. </span> <span class="line" data-startTime="1292">These are all asynchronous </span><span class="line" data-startTime="1292">calls. </span> <span class="line" data-startTime="1293">And finally, four levels deep, </span><span class="line" data-startTime="1293">we do the work we wanted to. </span></p>

<p><span class="line" data-startTime="1297">And you can already see that the </span><span class="line" data-startTime="1297">control flow here is hard </span><span class="line" data-startTime="1299">to follow because it's based on </span><span class="line" data-startTime="1299">the nesting and where the </span><span class="line" data-startTime="1302">arguments are. </span> <span class="line" data-startTime="1303">But it gets even worse. </span> <span class="line" data-startTime="1305">Now imagine you want to </span><span class="line" data-startTime="1305">do error handling. </span> <span class="line" data-startTime="1307">And if these methods each take </span><span class="line" data-startTime="1307">an error handler, than the </span><span class="line" data-startTime="1310">error handlers get a little bit </span><span class="line" data-startTime="1310">separated from the callbacks. </span> <span class="line" data-startTime="1312">And if there's actually real </span><span class="line" data-startTime="1312">work being done in these, if </span><span class="line" data-startTime="1315">they're not just one-liners, </span><span class="line" data-startTime="1315">this becomes very </span><span class="line" data-startTime="1316">complicated to follow. </span></p>

<p><span class="line" data-startTime="1318">But if you imagine the same </span><span class="line" data-startTime="1318">example with futures, it </span><span class="line" data-startTime="1321">becomes much simpler. </span> <span class="line" data-startTime="1322">With futures, the errors are </span><span class="line" data-startTime="1322">propagated through them and </span><span class="line" data-startTime="1324">you can chain them </span><span class="line" data-startTime="1324">with different </span><span class="line" data-startTime="1325">asynchronous calls in a row. </span> <span class="line" data-startTime="1327">And you can make that same </span><span class="line" data-startTime="1327">nested callback structure look </span><span class="line" data-startTime="1329">like a sequence of events. </span> <span class="line" data-startTime="1331">So this is where futures start </span><span class="line" data-startTime="1331">to show some big advantages in </span><span class="line" data-startTime="1335">terms of clarity of the code. </span></p>

<p class="speaker"><span class="line" data-starttime="1336"><span class="speakerName">Seth Ladd</span>: When you say the </span><span class="line" data-startTime="1336">error is propagated &mdash; so an </span><span class="line" data-startTime="1338">error or exception can </span><span class="line" data-startTime="1338">happen at any one of </span><span class="line" data-startTime="1340">these calls to then. </span><span class="line" data-startTime="1342">It will bubble down to </span><span class="line" data-startTime="1342">that one catch error. </span></p>

<p class="speaker"><span class="line" data-starttime="1344"><span class="speakerName">Justin Fagnani</span>: Exactly. </span> <span class="line" data-startTime="1344">You don't have to register </span><span class="line" data-startTime="1344">multiple error handlers. </span> <span class="line" data-startTime="1346">It's almost like a try catch </span><span class="line" data-startTime="1346">block, but asynchronously. </span> <span class="line" data-startTime="1351">OK, so that's not all, right? </span><span class="line" data-startTime="1353">So futures are nice and </span><span class="line" data-startTime="1353">consistent and they clean up </span><span class="line" data-startTime="1355">the code structure </span><span class="line" data-startTime="1355">a little bit. </span> <span class="line" data-startTime="1357">But futures also compose. </span> <span class="line" data-startTime="1359">Future is like our first-class </span><span class="line" data-startTime="1359">concept of, there will be a </span><span class="line" data-startTime="1361">value in the future. </span> <span class="line" data-startTime="1362">And you can write utilities </span><span class="line" data-startTime="1362">that deal in futures. </span> <span class="line" data-startTime="1365">And one of the most basic </span><span class="line" data-startTime="1365">utilities is just waiting for </span><span class="line" data-startTime="1367">things to happen in parallel. </span> <span class="line" data-startTime="1368">So future has a static method on </span><span class="line" data-startTime="1368">it called wait, which takes </span><span class="line" data-startTime="1371">a list of other futures. </span> <span class="line" data-startTime="1372">It waits for them all to </span><span class="line" data-startTime="1372">complete and returns a new </span><span class="line" data-startTime="1374">future when it's done. </span></p>

<p><span class="line" data-startTime="1376">And so this is a very easy way </span><span class="line" data-startTime="1376">to wait for parallel items. </span> <span class="line" data-startTime="1379">You can imagine in JavaScript, </span><span class="line" data-startTime="1379">you usually have to keep some </span><span class="line" data-startTime="1381">kind of counter of how many </span><span class="line" data-startTime="1381">callbacks have finished, and </span><span class="line" data-startTime="1384">update them, and error handling </span><span class="line" data-startTime="1384">becomes difficult. </span> <span class="line" data-startTime="1386">Well, here it's all </span><span class="line" data-startTime="1386">done for you. </span> <span class="line" data-startTime="1388">You just give it a </span><span class="line" data-startTime="1388">list of futures. </span> <span class="line" data-startTime="1389">Here we're getting two </span><span class="line" data-startTime="1389">pictures and we </span><span class="line" data-startTime="1391">want to blend them. </span> <span class="line" data-startTime="1392">And we still have an error </span><span class="line" data-startTime="1392">handler down at the bottom. </span> <span class="line" data-startTime="1396">So we work with both pictures. </span> <span class="line" data-startTime="1398">I'll go back. </span> <span class="line" data-startTime="1399">And notice that the error </span><span class="line" data-startTime="1399">handler will work on the </span><span class="line" data-startTime="1402">future that are happening </span><span class="line" data-startTime="1402">in parallel and </span><span class="line" data-startTime="1403">every subsequent operation. </span> <span class="line" data-startTime="1407">OK, so futures have been around </span><span class="line" data-startTime="1407">for a little while, but </span><span class="line" data-startTime="1409">what's really new in </span><span class="line" data-startTime="1409">Dart is streams. </span> <span class="line" data-startTime="1411">So futures only fire once. </span></p>

<p><span class="line" data-startTime="1412">But you also have to worry about </span><span class="line" data-startTime="1412">repeating events, things </span><span class="line" data-startTime="1415">like user interaction with </span><span class="line" data-startTime="1415">the UI and I/O. So </span><span class="line" data-startTime="1419">streams are the new thing. </span> <span class="line" data-startTime="1421">And they are the repeating </span><span class="line" data-startTime="1421">analog to future. </span> <span class="line" data-startTime="1423">And in the Dart libraries, </span><span class="line" data-startTime="1423">because we get to start fresh, </span><span class="line" data-startTime="1426">nearly all repeating events </span><span class="line" data-startTime="1426">in Dart are streams. </span> <span class="line" data-startTime="1429">You should see very, very, if </span><span class="line" data-startTime="1429">any, little callback-based </span><span class="line" data-startTime="1433">APIs anymore. </span></p>

<p class="speaker"><span class="line" data-starttime="1434"><span class="speakerName">Seth Ladd</span>: I think that's </span><span class="line" data-startTime="1434">an excellent point. </span><span class="line" data-startTime="1435">With futures and streams, we </span><span class="line" data-startTime="1435">bake them across the APIs and </span><span class="line" data-startTime="1439">libraries we've built. </span><span class="line" data-startTime="1440">So everything from, say, opening </span><span class="line" data-startTime="1440">files to XML HTTP </span><span class="line" data-startTime="1444">request, to get user media, to </span><span class="line" data-startTime="1444">the file I/O, the directories. </span></p>

<p class="speaker"><span class="line" data-starttime="1447"><span class="speakerName">Justin Fagnani</span>: All your </span><span class="line" data-startTime="1447">basic DOM events. </span></p>

<p class="speaker"><span class="line" data-starttime="1448"><span class="speakerName">Seth Ladd</span>: All this now is </span><span class="line" data-startTime="1448">futures and streams. </span><span class="line" data-startTime="1449">And you get that because we bake </span><span class="line" data-startTime="1449">it into the SDK for you. </span></p>

<p class="speaker"><span class="line" data-starttime="1452"><span class="speakerName">Justin Fagnani</span>: And because we </span><span class="line" data-startTime="1452">got to start fresh with the </span><span class="line" data-startTime="1453">libraries, too. </span> <span class="line" data-startTime="1455">So let's take a look </span><span class="line" data-startTime="1455">at an example. </span> <span class="line" data-startTime="1457">Here, we're going to look at </span><span class="line" data-startTime="1457">the documentation for the </span><span class="line" data-startTime="1459">element class. </span> <span class="line" data-startTime="1460">This is the base class for </span><span class="line" data-startTime="1460">all the HTML elements. </span> <span class="line" data-startTime="1463">And you can see that there's </span><span class="line" data-startTime="1463">this line here that says </span><span class="line" data-startTime="1465">onKeyPress is a property </span><span class="line" data-startTime="1465">that's a </span><span class="line" data-startTime="1467">stream of keyboard events. </span> <span class="line" data-startTime="1469">So what does that mean? </span><span class="line" data-startTime="1469">It means that we can do a query </span><span class="line" data-startTime="1469">here for a text area. </span> <span class="line" data-startTime="1473">And we can access this </span><span class="line" data-startTime="1473">onKeyPress property and call </span><span class="line" data-startTime="1476">listen, which is very much </span><span class="line" data-startTime="1476">like then on a future. </span></p>

<p><span class="line" data-startTime="1480">The function given to listen </span><span class="line" data-startTime="1480">will be invoked every time </span><span class="line" data-startTime="1483">that there's a keypress </span><span class="line" data-startTime="1483">event and it will </span><span class="line" data-startTime="1484">be given that event. </span> <span class="line" data-startTime="1485">So here we simply turn our key </span><span class="line" data-startTime="1485">press event into a string and </span><span class="line" data-startTime="1488">print it out. </span> <span class="line" data-startTime="1488">So this'll print char equals </span><span class="line" data-startTime="1488">wherever we happen to type. </span> <span class="line" data-startTime="1493">But streams do a lot more. </span> <span class="line" data-startTime="1494">They have a very, </span><span class="line" data-startTime="1494">very rich API. </span> <span class="line" data-startTime="1495">You can filter the events. </span> <span class="line" data-startTime="1497">You can transform them. </span> <span class="line" data-startTime="1498">You can turn streams into </span><span class="line" data-startTime="1498">futures by getting the first </span><span class="line" data-startTime="1500">or last element in a stream. </span> <span class="line" data-startTime="1503">So here's an example where </span><span class="line" data-startTime="1503">we want to get </span><span class="line" data-startTime="1505">our keypress event. </span> <span class="line" data-startTime="1506">And let's say we only care about </span><span class="line" data-startTime="1506">events that are actually </span><span class="line" data-startTime="1509">keys on the keyboard that </span><span class="line" data-startTime="1509">you can type and read. </span> <span class="line" data-startTime="1512">So you might want to want these </span><span class="line" data-startTime="1512">to get rid of control </span><span class="line" data-startTime="1514">characters and things. </span> <span class="line" data-startTime="1515">So here, we can just </span><span class="line" data-startTime="1515">filter the stream. </span> <span class="line" data-startTime="1517">And we use some range filter </span><span class="line" data-startTime="1517">to say these are our valid </span><span class="line" data-startTime="1519">characters. </span> <span class="line" data-startTime="1520">And this returns a new stream, </span><span class="line" data-startTime="1520">where we can call listen or </span><span class="line" data-startTime="1524">more transformation </span><span class="line" data-startTime="1524">methods on. </span> <span class="line" data-startTime="1527">And next we're going </span><span class="line" data-startTime="1527">to call map. </span></p>

<p><span class="line" data-startTime="1529">And what map does is it takes </span><span class="line" data-startTime="1529">every element, every event in </span><span class="line" data-startTime="1532">the stream and it turns it into </span><span class="line" data-startTime="1532">some new kind of event </span><span class="line" data-startTime="1534">and creates a new stream </span><span class="line" data-startTime="1534">out of that. </span> <span class="line" data-startTime="1536">So here we're going to </span><span class="line" data-startTime="1536">map and turn our </span><span class="line" data-startTime="1537">keyboard events into strings. </span> <span class="line" data-startTime="1540">Finally, let's say we're only </span><span class="line" data-startTime="1540">concerned with the very first </span><span class="line" data-startTime="1542">keypress in our text </span><span class="line" data-startTime="1542">area here. </span> <span class="line" data-startTime="1545">So we can call first on the </span><span class="line" data-startTime="1545">stream and that returns us a </span><span class="line" data-startTime="1547">future now, which returns </span><span class="line" data-startTime="1547">a value when that </span><span class="line" data-startTime="1551">key is first pressed. </span> <span class="line" data-startTime="1553">And then we call then </span><span class="line" data-startTime="1553">like we did before. </span> <span class="line" data-startTime="1554">And we can print out </span><span class="line" data-startTime="1554">that the first </span><span class="line" data-startTime="1556">character is that character. </span></p>

<p><span class="line" data-startTime="1557">And you can see that this </span><span class="line" data-startTime="1557">reads really nice. </span> <span class="line" data-startTime="1559">And because streams are so </span><span class="line" data-startTime="1559">common across the libraries, </span><span class="line" data-startTime="1561">you'll be able to see and </span><span class="line" data-startTime="1561">recognize these patterns </span><span class="line" data-startTime="1563">across Dart code bases. </span> <span class="line" data-startTime="1567">Finally, this is a relatively </span><span class="line" data-startTime="1567">short talk. </span> <span class="line" data-startTime="1569">So we don't have enough time, </span><span class="line" data-startTime="1569">nearly enough time to go to </span><span class="line" data-startTime="1572">HTML and web components. </span> <span class="line" data-startTime="1574">There is a talk later at 3:30 </span><span class="line" data-startTime="1574">PM with Emily and Seth. </span> <span class="line" data-startTime="1577">And they're going to go deep </span><span class="line" data-startTime="1577">into the new developments in </span><span class="line" data-startTime="1580">HTML and web components and how </span><span class="line" data-startTime="1580">you develop rich complex </span><span class="line" data-startTime="1583">UIs in Dart. </span> <span class="line" data-startTime="1585">A lot of changes in the last </span><span class="line" data-startTime="1585">year is that we've Dartified </span><span class="line" data-startTime="1588">the HTML library. </span></p>

<p><span class="line" data-startTime="1589">It follows Dart idioms, uses </span><span class="line" data-startTime="1589">Dart collections, and gives </span><span class="line" data-startTime="1592">you some jQuery-like </span><span class="line" data-startTime="1592">functionality. </span> <span class="line" data-startTime="1594">We also have Web UI, which </span><span class="line" data-startTime="1594">is our custom elements </span><span class="line" data-startTime="1596">implementation. </span> <span class="line" data-startTime="1597">We've done things like gotten </span><span class="line" data-startTime="1597">rid of vendor prefixes so you </span><span class="line" data-startTime="1600">can just use one method call. </span> <span class="line" data-startTime="1602">So that's at 3:30 </span><span class="line" data-startTime="1602">PM in this room. </span> <span class="line" data-startTime="1604">Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1607"><span class="speakerName">Seth Ladd</span>: OK, cool. </span> <span class="line" data-startTime="1607">Let's look at what's new </span><span class="line" data-startTime="1607">across the tools </span><span class="line" data-startTime="1609">and ecosystem here. </span> <span class="line" data-startTime="1611">Well, one thing that's really </span><span class="line" data-startTime="1611">important to point &mdash; and we </span><span class="line" data-startTime="1613">alluded to do this earlier &mdash; </span><span class="line" data-startTime="1614">is that the development cycle in </span><span class="line" data-startTime="1614">Dart is very, very fast and </span><span class="line" data-startTime="1617">very quick and iterative. </span> <span class="line" data-startTime="1618">This is important for web </span><span class="line" data-startTime="1618">developers who are used to </span><span class="line" data-startTime="1620">simply making a change </span><span class="line" data-startTime="1620">and hitting </span><span class="line" data-startTime="1622">Reload in their browser. </span> <span class="line" data-startTime="1623">They want to see that </span><span class="line" data-startTime="1623">change immediately. </span> <span class="line" data-startTime="1624">They don't want to be slowed </span><span class="line" data-startTime="1624">down by any sort of compile </span><span class="line" data-startTime="1626">time process during the bulk </span><span class="line" data-startTime="1626">of their development. </span> <span class="line" data-startTime="1629">So I'm happy to say that </span><span class="line" data-startTime="1629">with Dartium &mdash; </span><span class="line" data-startTime="1631">it's a special build of Chromium </span><span class="line" data-startTime="1631">with the Dart Virtual </span><span class="line" data-startTime="1633">Machine embedded inside &mdash; </span><span class="line" data-startTime="1634">we can deliver those very fast, </span><span class="line" data-startTime="1634">no compiles required, </span><span class="line" data-startTime="1637">edit/reload cycles. </span></p>

<p><span class="line" data-startTime="1639">So typically the flow will </span><span class="line" data-startTime="1639">look something like this. </span> <span class="line" data-startTime="1641">The feature </span><span class="line" data-startTime="1641">[? bugging section ?] </span><span class="line" data-startTime="1643">throughout the bulk of the </span><span class="line" data-startTime="1643">development, you're simply </span><span class="line" data-startTime="1645">writing code, hitting </span><span class="line" data-startTime="1645">Reload in Dartium. </span> <span class="line" data-startTime="1647">Boom, you see the change </span><span class="line" data-startTime="1647">right away. </span> <span class="line" data-startTime="1648">Only right at the very end &mdash; </span><span class="line" data-startTime="1648">and this is what we've been </span><span class="line" data-startTime="1651">told by real users of Dart. </span> <span class="line" data-startTime="1654">Only at the very end will they </span><span class="line" data-startTime="1654">introduce dart2js, compile </span><span class="line" data-startTime="1657">their application into </span><span class="line" data-startTime="1657">JavaScript, and test on all of </span><span class="line" data-startTime="1659">the browsers. </span> <span class="line" data-startTime="1660">So this is really, </span><span class="line" data-startTime="1660">really nice. </span> <span class="line" data-startTime="1663">We've also been working </span><span class="line" data-startTime="1663">on a standalone </span><span class="line" data-startTime="1664">editor called Dart Editor. </span></p>

<p><span class="line" data-startTime="1666">This is built from the ground </span><span class="line" data-startTime="1666">up, built on the Eclipse </span><span class="line" data-startTime="1668">platform, to give you features </span><span class="line" data-startTime="1668">and functionalities you're </span><span class="line" data-startTime="1670">used to when you develop </span><span class="line" data-startTime="1670">code and apps on </span><span class="line" data-startTime="1672">all the other platforms. </span> <span class="line" data-startTime="1673">Things like refactoring. </span> <span class="line" data-startTime="1674">Things like jump to definition, </span><span class="line" data-startTime="1674">inline types, a </span><span class="line" data-startTime="1678">nice problems view. </span> <span class="line" data-startTime="1679">The list goes on and on. </span> <span class="line" data-startTime="1680">This is the kind of productive </span><span class="line" data-startTime="1680">developments experience that </span><span class="line" data-startTime="1682">you like when you deal with code </span><span class="line" data-startTime="1682">as you grow from 1 to 10, </span><span class="line" data-startTime="1685">to 1,000 to, to, say, 500 or a </span><span class="line" data-startTime="1685">million lines of code, which </span><span class="line" data-startTime="1688">is not unheard of when you build </span><span class="line" data-startTime="1688">the kind of apps users </span><span class="line" data-startTime="1690">are demanding. </span> <span class="line" data-startTime="1692">But if Eclipse is in your bag, </span><span class="line" data-startTime="1692">that's OK, because we've also </span><span class="line" data-startTime="1694">got plug-ins for VIM. </span> <span class="line" data-startTime="1696">An actual plug-in for Eclipse </span><span class="line" data-startTime="1696">as opposed to Dart Editor, </span><span class="line" data-startTime="1698">which is a standalone editor. </span></p>

<p><span class="line" data-startTime="1700">Plug-ins for Sublime. </span> <span class="line" data-startTime="1701">And our friends IntelliJ </span><span class="line" data-startTime="1701">and WebStorm &mdash; </span><span class="line" data-startTime="1704">they're actually up there in </span><span class="line" data-startTime="1704">the Chrome booth &mdash; can show </span><span class="line" data-startTime="1705">off their Dart plug-in </span><span class="line" data-startTime="1705">as well. </span> <span class="line" data-startTime="1707">So hopefully we've got a choice </span><span class="line" data-startTime="1707">for you across whatever </span><span class="line" data-startTime="1709">editor you are working with. </span> <span class="line" data-startTime="1711">Now, we'd love to show a demo of </span><span class="line" data-startTime="1711">this, but we have something </span><span class="line" data-startTime="1713">really new and exciting to </span><span class="line" data-startTime="1713">show you guys in terms of </span><span class="line" data-startTime="1715">editing Dart. </span> <span class="line" data-startTime="1716">We're happy to announce the </span><span class="line" data-startTime="1716">relaunch of try.dartlang.org </span><span class="line" data-startTime="1720">that our team's been </span><span class="line" data-startTime="1720">working on. </span> <span class="line" data-startTime="1721">We've taken the dart2js </span><span class="line" data-startTime="1721">compiler, compiled it with </span><span class="line" data-startTime="1724">itself into JavaScript, put it </span><span class="line" data-startTime="1724">in a browser, and given you </span><span class="line" data-startTime="1727">the ability to write Dart code </span><span class="line" data-startTime="1727">and see it live without having </span><span class="line" data-startTime="1729">to install anything. </span> <span class="line" data-startTime="1730">So let's see. </span></p>

<p><span class="line" data-startTime="1731">Let's take a look. </span></p>

<p class="speaker"><span class="line" data-starttime="1731"><span class="speakerName">Justin Fagnani</span>: All right. </span> <span class="line" data-startTime="1732">Let's check it out. </span> <span class="line" data-startTime="1735">OK, so this is try.dartlang.org. </span> <span class="line" data-startTime="1738">As Seth mentioned, this is </span><span class="line" data-startTime="1738">using dart2js, which has </span><span class="line" data-startTime="1742">compiled itself to be able </span><span class="line" data-startTime="1742">to run in the browser. </span> <span class="line" data-startTime="1744">So this is the same compiler </span><span class="line" data-startTime="1744">that the editor and the </span><span class="line" data-startTime="1747">command line applications use. </span> <span class="line" data-startTime="1749">So here we have a simple </span><span class="line" data-startTime="1749">little text editor. </span> <span class="line" data-startTime="1750">Notice we have some syntax </span><span class="line" data-startTime="1750">highlighting happening here </span><span class="line" data-startTime="1752">because of dart2js. </span> <span class="line" data-startTime="1754">We're going to change this </span><span class="line" data-startTime="1754">to Hello Google I/O. </span> <span class="line" data-startTime="1758">And notice it's compiling </span><span class="line" data-startTime="1758">on the fly. </span> <span class="line" data-startTime="1760">And there we go. </span> <span class="line" data-startTime="1761">We see the output. </span> <span class="line" data-startTime="1762">Also notice that this is </span><span class="line" data-startTime="1762">running in Firefox. </span> <span class="line" data-startTime="1764">So it's important to note how </span><span class="line" data-startTime="1764">critical dart2js is to the </span><span class="line" data-startTime="1770">deployment step here, and how </span><span class="line" data-startTime="1770">much it enables Dart to run on </span><span class="line" data-startTime="1772">all of the modern web. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1774"><span class="speakerName">Seth Ladd</span>: Nice improvements </span><span class="line" data-startTime="1774">also is this works offline. </span> <span class="line" data-startTime="1776">This works on your iPad. </span> <span class="line" data-startTime="1777">And you can also edit </span><span class="line" data-startTime="1777">HTML apps as well. </span> <span class="line" data-startTime="1779">So very nicely way for you to </span><span class="line" data-startTime="1779">try Dart, and then go pick an </span><span class="line" data-startTime="1782">editing experience that </span><span class="line" data-startTime="1782">works for you. </span> <span class="line" data-startTime="1787">OK, what else in tools </span><span class="line" data-startTime="1787">and ecosystem? </span><span class="line" data-startTime="1789">Well, we have a nice unit </span><span class="line" data-startTime="1789">test library that </span><span class="line" data-startTime="1791">comes out of the box. </span> <span class="line" data-startTime="1792">We also have a mock library </span><span class="line" data-startTime="1792">that comes out of the box. </span> <span class="line" data-startTime="1794">Here's a quick code sample </span><span class="line" data-startTime="1794">here at the top </span><span class="line" data-startTime="1796">for our unit test. </span></p>

<p><span class="line" data-startTime="1797">It looks familiar and I think </span><span class="line" data-startTime="1797">a lot of other unit test </span><span class="line" data-startTime="1799">frameworks you might </span><span class="line" data-startTime="1799">have seen before. </span> <span class="line" data-startTime="1801">Also, happy to announce that </span><span class="line" data-startTime="1801">we a headless version of </span><span class="line" data-startTime="1803">Chromium we call dump </span><span class="line" data-startTime="1803">render tree. </span> <span class="line" data-startTime="1805">But this allows you to run </span><span class="line" data-startTime="1805">HTML-based Dart tests in a </span><span class="line" data-startTime="1810">headless browser. </span> <span class="line" data-startTime="1811">And say, then take that and </span><span class="line" data-startTime="1811">wire it into continuous </span><span class="line" data-startTime="1813">integration services, like </span><span class="line" data-startTime="1813">Drone.io, who have native </span><span class="line" data-startTime="1817">support for Dart and this </span><span class="line" data-startTime="1817">headless Chrome. </span> <span class="line" data-startTime="1820">So you can check in your code </span><span class="line" data-startTime="1820">into Bitpocket or GitHub, fire </span><span class="line" data-startTime="1823">off a change which Drone.io </span><span class="line" data-startTime="1823">picks up, runs all of your </span><span class="line" data-startTime="1826">tests from the command line, </span><span class="line" data-startTime="1826">runs all of your HTML tests or </span><span class="line" data-startTime="1829">web tests in this headless </span><span class="line" data-startTime="1829">Chrome and reports back to you </span><span class="line" data-startTime="1832">how everything's working. </span></p>

<p><span class="line" data-startTime="1832">So you now start to see this </span><span class="line" data-startTime="1832">nice chain for really rich </span><span class="line" data-startTime="1836">end-to-end development </span><span class="line" data-startTime="1836">experience. </span> <span class="line" data-startTime="1839">Also, been working on a </span><span class="line" data-startTime="1839">package manager, we </span><span class="line" data-startTime="1842">affectionately call </span><span class="line" data-startTime="1842">Pub because you </span><span class="line" data-startTime="1843">play darts in a pub. </span> <span class="line" data-startTime="1844">And with Pub, you can download </span><span class="line" data-startTime="1844">packages, manage the </span><span class="line" data-startTime="1847">dependencies and the updates, </span><span class="line" data-startTime="1847">publish your own packages to </span><span class="line" data-startTime="1850">Pub, and browse around </span><span class="line" data-startTime="1850">pub.dartlang.org, which is our </span><span class="line" data-startTime="1854">hosting service, where there's </span><span class="line" data-startTime="1854">already over 200 packages out </span><span class="line" data-startTime="1857">there ranging everything from </span><span class="line" data-startTime="1857">database drivers, to MVC </span><span class="line" data-startTime="1860">frameworks, to encryption, to </span><span class="line" data-startTime="1860">parsers, game libraries, the </span><span class="line" data-startTime="1864">list goes on and on and on. </span> <span class="line" data-startTime="1865">It's very easy for you guys to </span><span class="line" data-startTime="1865">publish your own packages into </span><span class="line" data-startTime="1868">Pub as well. </span> <span class="line" data-startTime="1869">Pub works with our central </span><span class="line" data-startTime="1869">hosting service here. </span> <span class="line" data-startTime="1871">[? Git, ?] </span><span class="line" data-startTime="1872">local file system. </span> <span class="line" data-startTime="1873">Very easy for you to reuse </span><span class="line" data-startTime="1873">and send out and share </span><span class="line" data-startTime="1876">functionalities across </span><span class="line" data-startTime="1876">Dart apps. </span></p>

<p><span class="line" data-startTime="1879">We're also really happy to </span><span class="line" data-startTime="1879">announce that the Flash Pro, </span><span class="line" data-startTime="1883">the really rich animation </span><span class="line" data-startTime="1883">engine, game engine, or game </span><span class="line" data-startTime="1887">editing tool from Adobe now can </span><span class="line" data-startTime="1887">export your animations and </span><span class="line" data-startTime="1891">games to Dart. </span> <span class="line" data-startTime="1892">You can see a demo of this </span><span class="line" data-startTime="1892">up at our booth up </span><span class="line" data-startTime="1895">in the Chrome area. </span> <span class="line" data-startTime="1896">So real quickly, you </span><span class="line" data-startTime="1896">don't have to </span><span class="line" data-startTime="1897">write any action script. </span> <span class="line" data-startTime="1898">You can use the really rich </span><span class="line" data-startTime="1898">editing experience of the </span><span class="line" data-startTime="1900">stage and the timeline and all </span><span class="line" data-startTime="1900">the asset managements of Flash </span><span class="line" data-startTime="1903">Pro and go through their toolkit </span><span class="line" data-startTime="1903">here and export that </span><span class="line" data-startTime="1906">all out to Dart code </span><span class="line" data-startTime="1906">and HTML5 APIs. </span> <span class="line" data-startTime="1909">Which means you can use their </span><span class="line" data-startTime="1909">really slick tools here, And </span><span class="line" data-startTime="1911">then deploy that across the </span><span class="line" data-startTime="1911">modern web without any </span><span class="line" data-startTime="1914">plug-ins at all. </span> <span class="line" data-startTime="1915">So if you guys are interested </span><span class="line" data-startTime="1915">in this, come </span><span class="line" data-startTime="1916">check this out upstairs. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1919"><span class="speakerName">Justin Fagnani</span>: OK, next let's </span><span class="line" data-startTime="1919">talk about things that are </span><span class="line" data-startTime="1922">very important to </span><span class="line" data-startTime="1922">web developers &mdash; </span><span class="line" data-startTime="1925">size and speed, or </span><span class="line" data-startTime="1925">performance. </span> <span class="line" data-startTime="1929">So the web has gone on a </span><span class="line" data-startTime="1929">continuous evolution path </span><span class="line" data-startTime="1933">since it started. </span> <span class="line" data-startTime="1934">And one of the things that's </span><span class="line" data-startTime="1934">happened with JavaScript is </span><span class="line" data-startTime="1936">that it initially enabled the </span><span class="line" data-startTime="1936">very first client-side apps. </span> <span class="line" data-startTime="1940">And JavaScript wasn't that </span><span class="line" data-startTime="1940">fast, but then JavaScript </span><span class="line" data-startTime="1942">became faster. </span> <span class="line" data-startTime="1943">With the advent of fast VMs </span><span class="line" data-startTime="1943">like V8, applications that </span><span class="line" data-startTime="1947">started rivaling desktop </span><span class="line" data-startTime="1947">applications were </span><span class="line" data-startTime="1949">now suddenly possible. </span> <span class="line" data-startTime="1951">And the applications grew </span><span class="line" data-startTime="1951">to use this performance. </span> <span class="line" data-startTime="1953">So as all the VMs out there </span><span class="line" data-startTime="1953">got faster and faster, the </span><span class="line" data-startTime="1956">applications took advantage of </span><span class="line" data-startTime="1956">that and became more complex. </span></p>

<p><span class="line" data-startTime="1959">So we see this continual </span><span class="line" data-startTime="1959">advancement and </span><span class="line" data-startTime="1961">power-hungriness of </span><span class="line" data-startTime="1961">applications. </span> <span class="line" data-startTime="1964">So we don't see that ending. </span> <span class="line" data-startTime="1965">Performance is still </span><span class="line" data-startTime="1965">important. </span> <span class="line" data-startTime="1967">Another reason why performance </span><span class="line" data-startTime="1967">really, really matters is </span><span class="line" data-startTime="1969">because of mobile. </span> <span class="line" data-startTime="1971">Now, on your laptop you have a </span><span class="line" data-startTime="1971">fairly large battery, or on </span><span class="line" data-startTime="1974">your desktop you're plugged </span><span class="line" data-startTime="1974">into the wall. </span> <span class="line" data-startTime="1975">But on your phone or your </span><span class="line" data-startTime="1975">tablet, you actually don't </span><span class="line" data-startTime="1977">have that large of a battery. </span> <span class="line" data-startTime="1978">If you last a day, that </span><span class="line" data-startTime="1978">might be a good day. </span> <span class="line" data-startTime="1981">And performance directly </span><span class="line" data-startTime="1981">impacts that. </span></p>

<p><span class="line" data-startTime="1983">The faster your application is, </span><span class="line" data-startTime="1983">the less CPU it's using, </span><span class="line" data-startTime="1986">that means the less battery </span><span class="line" data-startTime="1986">it's using. </span> <span class="line" data-startTime="1988">Even a 10% increase in battery </span><span class="line" data-startTime="1988">life is a significant </span><span class="line" data-startTime="1992">improvement. </span> <span class="line" data-startTime="1992">So this really matters. </span> <span class="line" data-startTime="1994">And yeah, so what we like to say </span><span class="line" data-startTime="1994">is that every performance </span><span class="line" data-startTime="2000">improvement is a battery </span><span class="line" data-startTime="2000">improvement. </span> <span class="line" data-startTime="2003">So first let's talk about </span><span class="line" data-startTime="2003">dart2js here in </span><span class="line" data-startTime="2005">terms of our tools. </span> <span class="line" data-startTime="2006">So as we said, the dart2js is </span><span class="line" data-startTime="2006">responsible for compiling Dart </span><span class="line" data-startTime="2009">to JavaScript. </span></p>

<p><span class="line" data-startTime="2011">Quickly, the way this works </span><span class="line" data-startTime="2011">is that we pull in your </span><span class="line" data-startTime="2013">application and all the </span><span class="line" data-startTime="2013">libraries it imports. </span> <span class="line" data-startTime="2016">We run it through all the </span><span class="line" data-startTime="2016">optimizations and compilation </span><span class="line" data-startTime="2019">steps that dart2js does to </span><span class="line" data-startTime="2019">minify your application. </span> <span class="line" data-startTime="2022">And then, we output a JavaScript </span><span class="line" data-startTime="2022">file, the compiled </span><span class="line" data-startTime="2025">version of your app. </span></p>

<p class="speaker"><span class="line" data-starttime="2027"><span class="speakerName">Seth Ladd</span>: We also output a </span><span class="line" data-startTime="2027">source map to enable really </span><span class="line" data-startTime="2029">easy debugging, which maps the </span><span class="line" data-startTime="2029">original Dart code to the </span><span class="line" data-startTime="2032">compiled JavaScript code. </span><span class="line" data-startTime="2033">And your Chrome DevTools can </span><span class="line" data-startTime="2033">read all that, so when set a </span><span class="line" data-startTime="2035">break point in your Chrome </span><span class="line" data-startTime="2035">DevTools, it's actually </span><span class="line" data-startTime="2038">setting a breakpoint from the </span><span class="line" data-startTime="2038">Dart code and mapping to the </span><span class="line" data-startTime="2040">Javascript code. </span></p>

<p class="speaker"><span class="line" data-starttime="2041"><span class="speakerName">Justin Fagnani</span>: Which also </span><span class="line" data-startTime="2041">works in browsers like </span><span class="line" data-startTime="2043">Firefox, and I believe, IE. </span> <span class="line" data-startTime="2046">OK, so let's look at some of the </span><span class="line" data-startTime="2046">generated JavaScript, so </span><span class="line" data-startTime="2049">you can see a little bit about </span><span class="line" data-startTime="2049">what the compiler is doing. </span> <span class="line" data-startTime="2051">So here's a very </span><span class="line" data-startTime="2051">simple example. </span> <span class="line" data-startTime="2053">We have a Dart program that's </span><span class="line" data-startTime="2053">using the HTML library and it </span><span class="line" data-startTime="2056">Defines a simple class, person, </span><span class="line" data-startTime="2056">and then it uses that </span><span class="line" data-startTime="2058">class in some simple way </span><span class="line" data-startTime="2058">in the main method. </span> <span class="line" data-startTime="2062">So here's a JavaScript output </span><span class="line" data-startTime="2062">that the dart2js has produced. </span> <span class="line" data-startTime="2066">And you can see that it actually </span><span class="line" data-startTime="2066">is very readable and </span><span class="line" data-startTime="2068">kind of corresponds logically </span><span class="line" data-startTime="2068">to the Dart source code. </span> <span class="line" data-startTime="2072">In fact, in this case, there's </span><span class="line" data-startTime="2072">like a one-to-one </span><span class="line" data-startTime="2075">correspondence between the lines </span><span class="line" data-startTime="2075">of Dart and the lines of </span><span class="line" data-startTime="2077">JavaScript. </span></p>

<p><span class="line" data-startTime="2079">But like we mentioned, Dart </span><span class="line" data-startTime="2079">has minification. </span> <span class="line" data-startTime="2081">And it has tree shaking, which </span><span class="line" data-startTime="2081">is dead code elimination. </span> <span class="line" data-startTime="2084">So it's important to produce the </span><span class="line" data-startTime="2084">smallest application sizes </span><span class="line" data-startTime="2086">as possible. </span> <span class="line" data-startTime="2087">So when you turn minification </span><span class="line" data-startTime="2087">on, you can see that as part </span><span class="line" data-startTime="2090">of the compilation process, we </span><span class="line" data-startTime="2090">renamed variables and inline </span><span class="line" data-startTime="2093">functions and do interesting </span><span class="line" data-startTime="2093">things here to give you the </span><span class="line" data-startTime="2095">most compact JavaScript </span><span class="line" data-startTime="2095">possible. </span></p>

<p class="speaker"><span class="line" data-starttime="2098"><span class="speakerName">Seth Ladd</span>: So Justin mentioned </span><span class="line" data-startTime="2098">tree shaking. </span> <span class="line" data-startTime="2100">Well, what's tree shaking? </span><span class="line" data-startTime="2101">So if you look at the marketing </span><span class="line" data-startTime="2101">material, pretty </span><span class="line" data-startTime="2103">much every JavaScript library </span><span class="line" data-startTime="2103">out there, the first and </span><span class="line" data-startTime="2105">foremost thing they tell </span><span class="line" data-startTime="2105">you is how small it is. </span> <span class="line" data-startTime="2107">Instead, I, as a developer, care </span><span class="line" data-startTime="2107">how good it is and how it </span><span class="line" data-startTime="2110">can help me. </span> <span class="line" data-startTime="2111">Well, you shouldn't have to </span><span class="line" data-startTime="2111">worry about how small the </span><span class="line" data-startTime="2112">libraries are. </span> <span class="line" data-startTime="2113">You should let the tools </span><span class="line" data-startTime="2113">handle that kind </span><span class="line" data-startTime="2114">of stuff for you. </span> <span class="line" data-startTime="2115">Here's an example here. </span> <span class="line" data-startTime="2116">Here's an application. </span> <span class="line" data-startTime="2117">You've written the stuff on your </span><span class="line" data-startTime="2117">left here and it pulls in </span><span class="line" data-startTime="2120">a library &mdash; the library </span><span class="line" data-startTime="2120">in the yellow. </span> <span class="line" data-startTime="2122">And one of your functions calls </span><span class="line" data-startTime="2122">just one function from </span><span class="line" data-startTime="2124">the yellow library. </span> <span class="line" data-startTime="2126">And there's no reason why you </span><span class="line" data-startTime="2126">should have to pull in all </span><span class="line" data-startTime="2128">that baggage if you can </span><span class="line" data-startTime="2128">determine only the functions </span><span class="line" data-startTime="2130">or the features that you </span><span class="line" data-startTime="2130">actually need in your app. </span></p>

<p><span class="line" data-startTime="2134">Well, dart2js performs a </span><span class="line" data-startTime="2134">tree-shaking functionality, </span><span class="line" data-startTime="2136">which takes all the </span><span class="line" data-startTime="2136">dependencies, all the imports, </span><span class="line" data-startTime="2138">all the libraries and can look </span><span class="line" data-startTime="2138">at the program and say, OK, </span><span class="line" data-startTime="2141">these are the bits you actually </span><span class="line" data-startTime="2141">use and produce just </span><span class="line" data-startTime="2145">the code that is required </span><span class="line" data-startTime="2145">to run your app. </span> <span class="line" data-startTime="2147">Notice how you don't have these </span><span class="line" data-startTime="2147">leaf nodes that you </span><span class="line" data-startTime="2149">never actually call. </span> <span class="line" data-startTime="2150">This is another reason why </span><span class="line" data-startTime="2150">dart2js can produce smaller, </span><span class="line" data-startTime="2154">faster output for you. </span></p>

<p class="speaker"><span class="line" data-starttime="2157"><span class="speakerName">Justin Fagnani</span>: Let's </span><span class="line" data-startTime="2157">talk about the </span><span class="line" data-startTime="2158">performance of the Dart VM. </span> <span class="line" data-startTime="2161">So if you saw Lars and Casper's </span><span class="line" data-startTime="2161">talk, they went into </span><span class="line" data-startTime="2165">great detail about why </span><span class="line" data-startTime="2165">the VM is faster. </span> <span class="line" data-startTime="2168">But real quickly, Dart has more </span><span class="line" data-startTime="2168">explicit and static and </span><span class="line" data-startTime="2171">declarative structure. </span> <span class="line" data-startTime="2173">This allows the VM to be </span><span class="line" data-startTime="2173">braver and make smarter </span><span class="line" data-startTime="2175">optimizations. </span> <span class="line" data-startTime="2176">And it allows the VM </span><span class="line" data-startTime="2176">to be simpler. </span> <span class="line" data-startTime="2178">We have real arrays </span><span class="line" data-startTime="2178">and real classes. </span> <span class="line" data-startTime="2180">You can invoke a method without </span><span class="line" data-startTime="2180">having to call the </span><span class="line" data-startTime="2183">prototype chain to see if the </span><span class="line" data-startTime="2183">method has changed at all. </span> <span class="line" data-startTime="2186">So these things allow the VM </span><span class="line" data-startTime="2186">to be much faster already. </span> <span class="line" data-startTime="2190">And in addition to that, we're </span><span class="line" data-startTime="2190">able to use more of your CPU. </span> <span class="line" data-startTime="2195">So we've added SIMD extensions, </span><span class="line" data-startTime="2195">recently, to Dart. </span> <span class="line" data-startTime="2199">If you look at a modern CPU, a </span><span class="line" data-startTime="2199">significant portion of the die </span><span class="line" data-startTime="2201">is dedicated to these vector </span><span class="line" data-startTime="2201">processors, these SIMD </span><span class="line" data-startTime="2205">processors. </span></p>

<p><span class="line" data-startTime="2206">This is an ARM CPU and you can </span><span class="line" data-startTime="2206">see that almost a third of the </span><span class="line" data-startTime="2209">CPU is dedicated to the neon </span><span class="line" data-startTime="2209">and vector operations. </span></p>

<p class="speaker"><span class="line" data-starttime="2212"><span class="speakerName">Seth Ladd</span>: Yeah, traditional web </span><span class="line" data-startTime="2212">programming today can not </span><span class="line" data-startTime="2214">unlock the full capabilities </span><span class="line" data-startTime="2214">of your CPU. </span><span class="line" data-startTime="2217">And that's a real shame. </span><span class="line" data-startTime="2218">And so the Dart VM says, yeah, </span><span class="line" data-startTime="2218">let's give you this power. </span></p>

<p class="speaker"><span class="line" data-starttime="2221"><span class="speakerName">Justin Fagnani</span>: So how does </span><span class="line" data-startTime="2221">that performance actually </span><span class="line" data-startTime="2223">manifest itself? </span><span class="line" data-startTime="2224">Well, we have a few benchmarks </span><span class="line" data-startTime="2224">that we've been publishing. </span><span class="line" data-startTime="2227">And you can see the blue bar </span><span class="line" data-startTime="2227">here is the Dart VM. </span><span class="line" data-startTime="2231">And yes, higher is better. </span><span class="line" data-startTime="2234">And so you can see on these </span><span class="line" data-startTime="2234">performance benchmarks here </span><span class="line" data-startTime="2237">that the VM has been beating </span><span class="line" data-startTime="2237">handwritten JavaScript. </span><span class="line" data-startTime="2240">And in fact, on the array </span><span class="line" data-startTime="2240">tracing example, it's almost </span><span class="line" data-startTime="2243">two times as fast. </span><span class="line" data-startTime="2244">And if you notice over here on </span><span class="line" data-startTime="2244">the left, on the Delta Blue </span><span class="line" data-startTime="2247">benchmark, there are cases </span><span class="line" data-startTime="2247">where dart2js actually </span><span class="line" data-startTime="2250">produces faster code than </span><span class="line" data-startTime="2250">handwritten JavaScript because </span><span class="line" data-startTime="2253">of the optimizations </span><span class="line" data-startTime="2253">it's able to make. </span><span class="line" data-startTime="2255">So here in Delta Blue, dart2js </span><span class="line" data-startTime="2255">is a little bit faster than </span><span class="line" data-startTime="2258">JavaScript. </span></p>

<p class="speaker"><span class="line" data-starttime="2258"><span class="speakerName">Seth Ladd</span>: We should point out </span><span class="line" data-startTime="2258">that Dart is not even yet a </span><span class="line" data-startTime="2260">1.0 production release and we're </span><span class="line" data-startTime="2260">still doing pretty good. </span><span class="line" data-startTime="2263">But we have more work to go. </span></p>

<p class="speaker"><span class="line" data-starttime="2265"><span class="speakerName">Justin Fagnani</span>: I think V8 has a </span><span class="line" data-startTime="2265">four or five-year head start </span><span class="line" data-startTime="2267">on the Dart VM. </span><span class="line" data-startTime="2270">OK, now, Seth. </span></p>

<p class="speaker"><span class="line" data-starttime="2273"><span class="speakerName">Seth Ladd</span>: Sure. </span> <span class="line" data-startTime="2273">Let's talk about this one. </span> <span class="line" data-startTime="2274">So the nice thing is these </span><span class="line" data-startTime="2274">charts here are all running on </span><span class="line" data-startTime="2277">this beefy MacBook Pro. </span> <span class="line" data-startTime="2279">This guy's got like 87 cores </span><span class="line" data-startTime="2279">and 52 gigs of RAM. </span> <span class="line" data-startTime="2281">So of course, these numbers </span><span class="line" data-startTime="2281">are going to look really </span><span class="line" data-startTime="2283">impressive. </span> <span class="line" data-startTime="2284">But does it translate down to </span><span class="line" data-startTime="2284">mobile, which is what we're </span><span class="line" data-startTime="2286">all going to be developing </span><span class="line" data-startTime="2286">by this time next year? </span><span class="line" data-startTime="2288">So happy to say that yes, the </span><span class="line" data-startTime="2288">same kind of performance </span><span class="line" data-startTime="2291">characteristics when you use </span><span class="line" data-startTime="2291">the Dart VM as opposed to </span><span class="line" data-startTime="2294">handwritten code does </span><span class="line" data-startTime="2294">translate over. </span></p>

<p><span class="line" data-startTime="2296">So this is running on Chrome for </span><span class="line" data-startTime="2296">Android with the Dart VM </span><span class="line" data-startTime="2299">embedded inside on </span><span class="line" data-startTime="2299">an x86 phone. </span> <span class="line" data-startTime="2302">You can see here the yellow </span><span class="line" data-startTime="2302">is handwritten JavaScript. </span> <span class="line" data-startTime="2303">The middle guy is </span><span class="line" data-startTime="2303">just Dart VM. </span> <span class="line" data-startTime="2306">And then the big tall blue bar </span><span class="line" data-startTime="2306">is Dart VM having ported the </span><span class="line" data-startTime="2311">NBody simulation over to use </span><span class="line" data-startTime="2311">the SIMD instructions. </span> <span class="line" data-startTime="2314">So every performance matters </span><span class="line" data-startTime="2314">on mobile phones. </span> <span class="line" data-startTime="2317">As Justin said, it's all </span><span class="line" data-startTime="2317">about battery there. </span> <span class="line" data-startTime="2319">So you'll see the same </span><span class="line" data-startTime="2319">gains, even on the </span><span class="line" data-startTime="2320">little devices here. </span></p>

<p class="speaker"><span class="line" data-starttime="2324"><span class="speakerName">Justin Fagnani</span>: This basically </span><span class="line" data-startTime="2324">covers what we have for you </span><span class="line" data-startTime="2327">for new stuff, but there's </span><span class="line" data-startTime="2327">so much more. </span><span class="line" data-startTime="2329">There's a lot of things we </span><span class="line" data-startTime="2329">didn't get to cover. </span></p>

<p class="speaker"><span class="line" data-starttime="2331"><span class="speakerName">Seth Ladd</span>: We asked for the </span><span class="line" data-startTime="2331">three-hour slot and they </span><span class="line" data-startTime="2332">didn't give it to us. </span></p>

<p class="speaker"><span class="line" data-starttime="2333"><span class="speakerName">Justin Fagnani</span>: Yeah, </span><span class="line" data-startTime="2333">the keynote. </span><span class="line" data-startTime="2334">We could have filled </span><span class="line" data-startTime="2334">the keynote. </span><span class="line" data-startTime="2337">So we have an entire server-side </span><span class="line" data-startTime="2337">story with Dart. </span><span class="line" data-startTime="2339">It's very similar to Node and </span><span class="line" data-startTime="2339">we have an I/O library. </span><span class="line" data-startTime="2341">As Seth mentioned </span><span class="line" data-startTime="2341">earlier, we have </span><span class="line" data-startTime="2343">extensive testing libraries. </span><span class="line" data-startTime="2345">We also have a concurrency and </span><span class="line" data-startTime="2345">safety story in isolates that </span><span class="line" data-startTime="2348">we didn't get to cover. </span><span class="line" data-startTime="2349">And a lot more stuff. </span><span class="line" data-startTime="2351">So you should really find </span><span class="line" data-startTime="2351">out more about Dart. </span></p>

<p class="speaker"><span class="line" data-starttime="2354"><span class="speakerName">Seth Ladd</span>: How do you find </span><span class="line" data-startTime="2354">out more about it? </span><span class="line" data-startTime="2355">Well, many different ways </span><span class="line" data-startTime="2355">for you to try out Dart. </span><span class="line" data-startTime="2358">Download the Dart SDK and the </span><span class="line" data-startTime="2358">Dart Editor from dartlang.org. </span><span class="line" data-startTime="2362">We're active on Google+ and </span><span class="line" data-startTime="2362">Twitter, et cetera. </span><span class="line" data-startTime="2364">We're also on GitHub as well. </span><span class="line" data-startTime="2366">So we've received many patches </span><span class="line" data-startTime="2366">from the community in </span><span class="line" data-startTime="2368">[? poll requests. ?] </span><span class="line" data-startTime="2369">We have external committers </span><span class="line" data-startTime="2369">as well. </span><span class="line" data-startTime="2370">We're active on Stack </span><span class="line" data-startTime="2370">Overflow. </span><span class="line" data-startTime="2372">And it's important to </span><span class="line" data-startTime="2372">understand, Dart is an open </span><span class="line" data-startTime="2374">source project. </span><span class="line" data-startTime="2375">BSD license, very permissive. </span><span class="line" data-startTime="2377">And so it's easy for you guys </span><span class="line" data-startTime="2377">to get involved in any </span><span class="line" data-startTime="2379">different way that works </span><span class="line" data-startTime="2379">for you guys. </span></p>

<p class="speaker"><span class="line" data-starttime="2380"><span class="speakerName">Justin Fagnani</span>: We've broken </span><span class="line" data-startTime="2380">up a lot of the smaller </span><span class="line" data-startTime="2382">projects into their own </span><span class="line" data-startTime="2382">repositories on GitHub. </span><span class="line" data-startTime="2384">And we've had a lot of external </span><span class="line" data-startTime="2384">contributors come in </span><span class="line" data-startTime="2387">that way because it's very </span><span class="line" data-startTime="2387">easy to get started. </span></p>

<p class="speaker"><span class="line" data-starttime="2389"><span class="speakerName">Seth Ladd</span>: Lots more about Dart </span><span class="line" data-startTime="2389">here at I/O. Later today, </span><span class="line" data-startTime="2392">the Dart HTML talk. </span> <span class="line" data-startTime="2393">Definitely check that out. </span> <span class="line" data-startTime="2394">We have a Code lab on Friday. </span> <span class="line" data-startTime="2395">So if you want to get your hands </span><span class="line" data-startTime="2395">dirty here working with </span><span class="line" data-startTime="2398">all the latest and greatest, </span><span class="line" data-startTime="2398">join us on Friday. </span> <span class="line" data-startTime="2400">We'll be at office </span><span class="line" data-startTime="2400">hours as well. </span> <span class="line" data-startTime="2401">And the demo booth, you </span><span class="line" data-startTime="2401">can see a lot of </span><span class="line" data-startTime="2403">this stuff in action. </span> <span class="line" data-startTime="2406">So to sum it up, what's </span><span class="line" data-startTime="2406">the main takeaway? </span><span class="line" data-startTime="2408">Well, Dart &mdash; we've got a </span><span class="line" data-startTime="2408">stable language now. </span> <span class="line" data-startTime="2410">We have stable core libraries. </span> <span class="line" data-startTime="2412">Dart compiles a JavaScript and </span><span class="line" data-startTime="2412">runs across modern browsers. </span> <span class="line" data-startTime="2415">And it's really been an </span><span class="line" data-startTime="2415">involved platform now. </span> <span class="line" data-startTime="2417">We've been out for, what? </span><span class="line" data-startTime="2418">Almost two years, one </span><span class="line" data-startTime="2418">and a half years? </span><span class="line" data-startTime="2421">We've gotten tons of feedback </span><span class="line" data-startTime="2421">from external developers, </span><span class="line" data-startTime="2423">internal customers, external </span><span class="line" data-startTime="2423">customers. </span></p>

<p><span class="line" data-startTime="2425">They've been telling </span><span class="line" data-startTime="2425">us what they like, </span><span class="line" data-startTime="2427">what they don't like. </span> <span class="line" data-startTime="2427">We've put that all in. </span> <span class="line" data-startTime="2428">And so what you see today is </span><span class="line" data-startTime="2428">a nice evolved platform. </span> <span class="line" data-startTime="2430">And Google is committed </span><span class="line" data-startTime="2430">to Dart. </span> <span class="line" data-startTime="2432">We have internal high-priority </span><span class="line" data-startTime="2432">projects inside using Dart. </span> <span class="line" data-startTime="2436">And we're going to see this, </span><span class="line" data-startTime="2436">so that you can make it &mdash; </span><span class="line" data-startTime="2439">Dart is ready for your app. </span> <span class="line" data-startTime="2441">That's the main point here. </span> <span class="line" data-startTime="2442">Hopefully you liked </span><span class="line" data-startTime="2442">what you saw. </span> <span class="line" data-startTime="2446">And we'll be around to answer a </span><span class="line" data-startTime="2446">lot of your questions here. </span> <span class="line" data-startTime="2449">I think we can probably take </span><span class="line" data-startTime="2449">one or two questions. </span></p>

<p><span class="line" data-startTime="2450">But we'll be up at </span><span class="line" data-startTime="2450">the office hours </span><span class="line" data-startTime="2452">immediately after this talk. </span> <span class="line" data-startTime="2453">And we'd love to hear what </span><span class="line" data-startTime="2453">you guys are building. </span> <span class="line" data-startTime="2454">So with that, we're all set. </span></p>

<p class="speaker"><span class="line" data-starttime="2458"><span class="speakerName">Justin Fagnani</span>: Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="2459"><span class="speakerName">Seth Ladd</span>: Thank you. </span><span class="line" data-startTime="2459">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="2468"><span class="speakerName">Seth Ladd</span>: We could take </span><span class="line" data-startTime="2468">a question or two </span><span class="line" data-startTime="2470">if anyone has any. </span><span class="line" data-startTime="2470">OK, cool. </span></p>

<p class="speaker"><span class="line" data-starttime="2472"><span class="speakerName">Audience</span>: Do you think we'll </span><span class="line" data-startTime="2472">see Dart on App Engine? </span></p>

<p class="speaker"><span class="line" data-starttime="2475"><span class="speakerName">Seth Ladd</span>: I would personally </span><span class="line" data-startTime="2475">love to see that happen. </span><span class="line" data-startTime="2477">There's a bug in the issue </span><span class="line" data-startTime="2477">tracker for App Engine. </span><span class="line" data-startTime="2479">Go ahead and star that </span><span class="line" data-startTime="2479">and let them know. </span><span class="line" data-startTime="2483">OK. </span><span class="line" data-startTime="2484">Thanks. </span><span class="line" data-startTime="2484">We'll be around here. </span><span class="line" data-startTime="2485">Thank you. </span></p></div>