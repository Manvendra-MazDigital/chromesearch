<p class="speaker"><span class="line" data-starttime="1"><span class="speakerName">Lars Bak</span>: Hello. </span> <span class="line" data-startTime="1">Welcome, everybody. </span> <span class="line" data-startTime="3">Oh. </span> <span class="line" data-startTime="3">They fixed the sound. </span> <span class="line" data-startTime="4">Great. </span> <span class="line" data-startTime="5">So welcome to the Dart, </span><span class="line" data-startTime="5">a modern web language </span><span class="line" data-startTime="8">presentation. </span> <span class="line" data-startTime="9">This is the first ever </span><span class="line" data-startTime="9">presentation about </span><span class="line" data-startTime="11">Dart at Google IO. </span> <span class="line" data-startTime="13">And I'm here. </span> <span class="line" data-startTime="15">I'm Lars Bak with Kaspar Lund, </span><span class="line" data-startTime="15">coming all the way from </span><span class="line" data-startTime="18">Denmark to present Dart. </span> <span class="line" data-startTime="23">I can just say right away, we </span><span class="line" data-startTime="23">will not be doing any base </span><span class="line" data-startTime="26">jumping nor stage diving. </span></p>

<p><span class="line" data-startTime="29">This will be fairly boring </span><span class="line" data-startTime="29">in that respect. </span> <span class="line" data-startTime="33">What I can tell you about is </span><span class="line" data-startTime="33">about this new programming </span><span class="line" data-startTime="36">language we have been working </span><span class="line" data-startTime="36">on for a year. </span> <span class="line" data-startTime="38">And this presentation will </span><span class="line" data-startTime="38">include a few things. </span> <span class="line" data-startTime="41">We'll talk about the </span><span class="line" data-startTime="41">motivation for it. </span> <span class="line" data-startTime="45">And part of the motivation </span><span class="line" data-startTime="45">is our work on V8. </span> <span class="line" data-startTime="49">Kasper and I have been working </span><span class="line" data-startTime="49">on V8 for many years, I guess. </span> <span class="line" data-startTime="53">Four or so? </span></p>

<p class="speaker"><span class="line" data-starttime="54"><span class="speakerName">Kasper Lund</span>: Four years, yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="55"><span class="speakerName">Lars Bak</span>: Four years. </span> <span class="line" data-startTime="56">And some of the experience </span><span class="line" data-startTime="56">with JavaScript </span><span class="line" data-startTime="60">has led us to Dart. </span> <span class="line" data-startTime="62">We'll be talking about </span><span class="line" data-startTime="62">the basic language. </span> <span class="line" data-startTime="64">We'll be talking about some of </span><span class="line" data-startTime="64">the components we have in the </span><span class="line" data-startTime="68">Dart project. </span> <span class="line" data-startTime="68">And then we'll talk about the </span><span class="line" data-startTime="68">bright future we hopefully </span><span class="line" data-startTime="71">have with Dart. </span> <span class="line" data-startTime="72">So let's get started. </span> <span class="line" data-startTime="74">We have a lot of interesting </span><span class="line" data-startTime="74">stuff to talk about. </span> <span class="line" data-startTime="79">So our background is in </span><span class="line" data-startTime="79">implementing virtual machines. </span></p>

<p><span class="line" data-startTime="82">And as you probably can see, </span><span class="line" data-startTime="82">I'm the oldest one. </span> <span class="line" data-startTime="88">He's the younger version. </span> <span class="line" data-startTime="89">I've been doing VMs for 26 </span><span class="line" data-startTime="89">years, and Kasper's been doing </span><span class="line" data-startTime="93">it for the last 12. </span> <span class="line" data-startTime="94">We've worked together </span><span class="line" data-startTime="94">on many projects. </span> <span class="line" data-startTime="96">We've been doing Java, </span><span class="line" data-startTime="96">virtual machines. </span> <span class="line" data-startTime="100">Also JavaScript engines, </span><span class="line" data-startTime="100">like V8. </span> <span class="line" data-startTime="103">And that's been pretty cool. </span> <span class="line" data-startTime="105">So this is our first project </span><span class="line" data-startTime="105">ever where we've been </span><span class="line" data-startTime="107">designing a programming </span><span class="line" data-startTime="107">language. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="110"><span class="speakerName">Kasper Lund</span>: Before I joined </span><span class="line" data-startTime="110">Lars on this mission to try to </span><span class="line" data-startTime="113">improve the performance of </span><span class="line" data-startTime="113">virtual machines for various </span><span class="line" data-startTime="117">languages &mdash; </span><span class="line" data-startTime="118">Lars was working on more exotic </span><span class="line" data-startTime="118">languages, too, like </span><span class="line" data-startTime="121">the Beta programming language, </span><span class="line" data-startTime="121">sort of a Scandinavian </span><span class="line" data-startTime="125">object-oriented language. </span><span class="line" data-startTime="125">So there's a lot of experience </span><span class="line" data-startTime="125">on the stage here. </span><span class="line" data-startTime="129">Nearly 40 years combined. </span><span class="line" data-startTime="132">So we certainly know a thing or </span><span class="line" data-startTime="132">two about virtual machines, </span><span class="line" data-startTime="136">so hopefully we can convince </span><span class="line" data-startTime="136">you that we know a thing or </span><span class="line" data-startTime="138">two about languages as well. </span></p>

<p class="speaker"><span class="line" data-starttime="141"><span class="speakerName">Lars Bak</span>: So first of all, there </span><span class="line" data-startTime="141">will be a little bit of </span><span class="line" data-startTime="143">a salute to the web. </span> <span class="line" data-startTime="145">We think the web is fantastic. </span> <span class="line" data-startTime="148">The web is everywhere today. </span> <span class="line" data-startTime="149">You have it on your </span><span class="line" data-startTime="149">mobile phone, your </span><span class="line" data-startTime="152">pads and your desktop. </span> <span class="line" data-startTime="153">So when you do an application </span><span class="line" data-startTime="153">it can actually cover most </span><span class="line" data-startTime="156">devices today. </span> <span class="line" data-startTime="158">It's also very easy to </span><span class="line" data-startTime="158">use as a developer. </span> <span class="line" data-startTime="160">You can just pop into your </span><span class="line" data-startTime="160">favorite text editor, type in </span><span class="line" data-startTime="163">a few lines, and then you can </span><span class="line" data-startTime="163">start it up in your browser. </span> <span class="line" data-startTime="166">There's no tool chain </span><span class="line" data-startTime="166">involved in getting </span><span class="line" data-startTime="169">the program up running. </span> <span class="line" data-startTime="171">And one thing I really like </span><span class="line" data-startTime="171">about the web, there's no </span><span class="line" data-startTime="174">required installation </span><span class="line" data-startTime="174">of the app. </span> <span class="line" data-startTime="176">Whenever you start Gmail, you </span><span class="line" data-startTime="176">get the newest version. </span></p>

<p><span class="line" data-startTime="179">So you are not bothered </span><span class="line" data-startTime="179">by these updates. </span> <span class="line" data-startTime="182">I assume you all have </span><span class="line" data-startTime="182">mobile phones? </span><span class="line" data-startTime="185">Have you tried to get bothered </span><span class="line" data-startTime="185">by an update notification? </span><span class="line" data-startTime="189">I guess. </span> <span class="line" data-startTime="191">For me, at least, that's one </span><span class="line" data-startTime="191">of the benefits of the web. </span> <span class="line" data-startTime="193">That you don't have to install </span><span class="line" data-startTime="193">an application. </span> <span class="line" data-startTime="200">Furthermore it's also a very </span><span class="line" data-startTime="200">incremental experience, to </span><span class="line" data-startTime="203">develop for the web. </span> <span class="line" data-startTime="204">You can change one line in the </span><span class="line" data-startTime="204">program and use a refresh. </span> <span class="line" data-startTime="207">So within a second, you can </span><span class="line" data-startTime="207">have your application up </span><span class="line" data-startTime="210">running again. </span> <span class="line" data-startTime="211">And that's very appealing </span><span class="line" data-startTime="211">when you do prototype </span><span class="line" data-startTime="213">develop and so on. </span></p>

<p><span class="line" data-startTime="215">And one thing that's even </span><span class="line" data-startTime="215">better, the browser industry </span><span class="line" data-startTime="220">is right now fairly </span><span class="line" data-startTime="220">competitive. </span> <span class="line" data-startTime="222">All the browser vendors, they're </span><span class="line" data-startTime="222">competing on speed and </span><span class="line" data-startTime="225">functionality. </span> <span class="line" data-startTime="226">And most implementations are </span><span class="line" data-startTime="226">open source, so it's a </span><span class="line" data-startTime="229">friendly competition. </span> <span class="line" data-startTime="234">Here's my best attempt </span><span class="line" data-startTime="234">to make a wheel. </span> <span class="line" data-startTime="236">It turned out to </span><span class="line" data-startTime="236">be three-sided. </span> <span class="line" data-startTime="240">But I'm trying to explain </span><span class="line" data-startTime="240">the ecosystem of browser </span><span class="line" data-startTime="243">development. </span> <span class="line" data-startTime="246">When you add more performance </span><span class="line" data-startTime="246">into a browser, you will sort </span><span class="line" data-startTime="250">of enable application developers </span><span class="line" data-startTime="250">to innovate. </span> <span class="line" data-startTime="252">They can add more functionality </span><span class="line" data-startTime="252">on the client </span><span class="line" data-startTime="255">side, and that again will </span><span class="line" data-startTime="255">require new browser features. </span></p>

<p><span class="line" data-startTime="259">And so on and so forth. </span> <span class="line" data-startTime="260">And this is great, because </span><span class="line" data-startTime="260">whenever you take a turn with </span><span class="line" data-startTime="264">this wheel, the browser will be </span><span class="line" data-startTime="264">a better place to develop </span><span class="line" data-startTime="267">applications and also </span><span class="line" data-startTime="267">use applications. </span> <span class="line" data-startTime="273">Here's a JavaScript performance </span><span class="line" data-startTime="273">improvement chart. </span> <span class="line" data-startTime="276">It'll show you the speedup </span><span class="line" data-startTime="276">of JavaScript </span><span class="line" data-startTime="279">over the last 12 years. </span> <span class="line" data-startTime="282">And as you can see, there </span><span class="line" data-startTime="282">was a dry spell </span><span class="line" data-startTime="285">of a number of years. </span> <span class="line" data-startTime="287">And then we introduced in </span><span class="line" data-startTime="287">2008, Chrome, the beta </span><span class="line" data-startTime="291">version, where V8 was </span><span class="line" data-startTime="291">part of that. </span> <span class="line" data-startTime="295">And you can see, since 2008 the </span><span class="line" data-startTime="295">performance of JavaScript </span><span class="line" data-startTime="300">has just improved </span><span class="line" data-startTime="300">tremendously. </span></p>

<p><span class="line" data-startTime="303">In fact, JavaScript is now 100 </span><span class="line" data-startTime="303">times faster on the same </span><span class="line" data-startTime="308">hardware, compared to a browser </span><span class="line" data-startTime="308">five years ago. </span> <span class="line" data-startTime="312">That's pretty amazing, </span><span class="line" data-startTime="312">isn't it? </span></p>

<p class="speaker"><span class="line" data-starttime="314"><span class="speakerName">Kasper Lund</span>: That's </span><span class="line" data-startTime="314">a lot, yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="316"><span class="speakerName">Lars Bak</span>: Even on mobile </span><span class="line" data-startTime="316">devices, like an Android </span><span class="line" data-startTime="319">device, you can see that the </span><span class="line" data-startTime="319">performance of JavaScript is </span><span class="line" data-startTime="323">comparable to a desktop </span><span class="line" data-startTime="323">machine, when we </span><span class="line" data-startTime="326">introduced V8 in 2008. </span><span class="line" data-startTime="329">So this is pretty amazing. </span><span class="line" data-startTime="330">And it really allows you guys to </span><span class="line" data-startTime="330">do better apps on the web. </span></p>

<p class="speaker"><span class="line" data-starttime="335"><span class="speakerName">Kasper Lund</span>: We've already seen </span><span class="line" data-startTime="335">a few things that have </span><span class="line" data-startTime="336">come along that take advantage </span><span class="line" data-startTime="336">of this new power. </span><span class="line" data-startTime="341">So the point with the previous </span><span class="line" data-startTime="341">slide, where performance </span><span class="line" data-startTime="344">improvements of the core </span><span class="line" data-startTime="344">platform really help you </span><span class="line" data-startTime="346">innovate, can be seen in one </span><span class="line" data-startTime="346">of the latest versions of </span><span class="line" data-startTime="350">Google Maps for instance, </span><span class="line" data-startTime="350">where you can enable </span><span class="line" data-startTime="352">client-side rendering of </span><span class="line" data-startTime="352">things &mdash; things that you had </span><span class="line" data-startTime="355">to do on the server side before, </span><span class="line" data-startTime="355">it's now possible to </span><span class="line" data-startTime="357">do on the client instead. </span><span class="line" data-startTime="358">Which is pretty cool. </span><span class="line" data-startTime="360">So we certainly see that this </span><span class="line" data-startTime="360">is already now helping a lot </span><span class="line" data-startTime="362">on what you can do and </span><span class="line" data-startTime="362">achieve with the web. </span></p>

<p class="speaker"><span class="line" data-starttime="366"><span class="speakerName">Lars Bak</span>: So during this period </span><span class="line" data-startTime="366">the web applications </span><span class="line" data-startTime="370">have become more and </span><span class="line" data-startTime="370">more complex. </span> <span class="line" data-startTime="373">And have posed some challenges </span><span class="line" data-startTime="373">for the web. </span> <span class="line" data-startTime="378">What we really want, we want </span><span class="line" data-startTime="378">to have better programmer </span><span class="line" data-startTime="381">productivity. </span> <span class="line" data-startTime="383">And we also want application </span><span class="line" data-startTime="383">scalability, so that as you </span><span class="line" data-startTime="388">get bigger and bigger </span><span class="line" data-startTime="388">applications the browser can </span><span class="line" data-startTime="390">cope with it as you </span><span class="line" data-startTime="390">execute it. </span> <span class="line" data-startTime="393">And then of course you need </span><span class="line" data-startTime="393">raw execution speed. </span> <span class="line" data-startTime="395">We've fixed some of that with </span><span class="line" data-startTime="395">V8, but we are not hitting the </span><span class="line" data-startTime="399">glass ceiling yet. </span> <span class="line" data-startTime="401">One thing that's a problem </span><span class="line" data-startTime="401">today, at least from my point </span><span class="line" data-startTime="404">of view, is that startup </span><span class="line" data-startTime="404">performance is not where we </span><span class="line" data-startTime="407">want it to be. </span> <span class="line" data-startTime="408">When you start up a big web </span><span class="line" data-startTime="408">app, it's fairly slow. </span></p>

<p><span class="line" data-startTime="411">For instance, if you take Gmail, </span><span class="line" data-startTime="411">you have to read in a </span><span class="line" data-startTime="415">lot of source code before you </span><span class="line" data-startTime="415">can start the application. </span> <span class="line" data-startTime="418">And that sort of delays </span><span class="line" data-startTime="418">the startup with </span><span class="line" data-startTime="421">half to a full second. </span> <span class="line" data-startTime="424">So the final item on this slide </span><span class="line" data-startTime="424">here is that if we don't </span><span class="line" data-startTime="428">innovate, the web will lose out </span><span class="line" data-startTime="428">to mobile apps, where they </span><span class="line" data-startTime="433">can install more native </span><span class="line" data-startTime="433">types of applications. </span> <span class="line" data-startTime="442">Fortunately, we have </span><span class="line" data-startTime="442">a solution for you. </span> <span class="line" data-startTime="446">We have the Dart platform. </span> <span class="line" data-startTime="448">And this is a suite of </span><span class="line" data-startTime="448">technologies that will </span><span class="line" data-startTime="452">hopefully solve so some </span><span class="line" data-startTime="452">of these issues with </span><span class="line" data-startTime="455">the existing platform. </span> <span class="line" data-startTime="456">Our high-level goals </span><span class="line" data-startTime="456">are fairly simple. </span> <span class="line" data-startTime="459">We want to make a simple, </span><span class="line" data-startTime="459">productive programming </span><span class="line" data-startTime="461">alignment and programming </span><span class="line" data-startTime="461">language that supports for </span><span class="line" data-startTime="465">programming in the large. </span></p>

<p><span class="line" data-startTime="468">And we also want to have </span><span class="line" data-startTime="468">predictable high performance. </span> <span class="line" data-startTime="471">And that means that when you </span><span class="line" data-startTime="471">write your code, you can </span><span class="line" data-startTime="474">expect some sort </span><span class="line" data-startTime="474">of performance. </span> <span class="line" data-startTime="476">Right now it's complicated </span><span class="line" data-startTime="476">with JavaScript. </span> <span class="line" data-startTime="478">It often depends on what the </span><span class="line" data-startTime="478">browser optimized, how good </span><span class="line" data-startTime="481">performance you get out of it. </span> <span class="line" data-startTime="484">We want to have ultra-fast </span><span class="line" data-startTime="484">startup. </span> <span class="line" data-startTime="487">Things that take more than </span><span class="line" data-startTime="487">100 milliseconds are just </span><span class="line" data-startTime="489">unacceptable. </span> <span class="line" data-startTime="491">And then of course, we are </span><span class="line" data-startTime="491">not out to break the web. </span> <span class="line" data-startTime="495">We really want to have </span><span class="line" data-startTime="495">compatibility </span><span class="line" data-startTime="499">with all modern browsers. </span> <span class="line" data-startTime="500">And we'll show you how we've </span><span class="line" data-startTime="500">done that in Dart, by </span><span class="line" data-startTime="502">providing a translator from </span><span class="line" data-startTime="502">Dart to JavaScript. </span></p>

<p><span class="line" data-startTime="508">So. </span></p>

<p class="speaker"><span class="line" data-starttime="510"><span class="speakerName">Kasper Lund</span>: Let's talk </span><span class="line" data-startTime="510">about JavaScript. </span></p>

<p class="speaker"><span class="line" data-starttime="512"><span class="speakerName">Lars Bak</span>: Let's do that. </span></p>

<p class="speaker"><span class="line" data-starttime="513"><span class="speakerName">Kasper Lund</span>: So, I don't know </span><span class="line" data-startTime="513">how many people in here are </span><span class="line" data-startTime="515">familiar with JavaScript. </span> <span class="line" data-startTime="519">There are some that know it. </span> <span class="line" data-startTime="520">OK. </span> <span class="line" data-startTime="520">That's good. </span> <span class="line" data-startTime="522">How many people here </span><span class="line" data-startTime="522">actually work with </span><span class="line" data-startTime="523">JavaScript every day? </span><span class="line" data-startTime="526">Good crowd. </span> <span class="line" data-startTime="527">I like that. </span> <span class="line" data-startTime="527">So hopefully you're aware of </span><span class="line" data-startTime="527">some fundamental issues with </span><span class="line" data-startTime="531">JavaScript. </span> <span class="line" data-startTime="532">I'm going to run through a few </span><span class="line" data-startTime="532">of them, just to give you a </span><span class="line" data-startTime="535">feel for the kind of issues </span><span class="line" data-startTime="535">we're trying to tackle. </span> <span class="line" data-startTime="538">So one big issue we see with </span><span class="line" data-startTime="538">JavaScript is it's very hard </span><span class="line" data-startTime="542">to reason about where the </span><span class="line" data-startTime="542">problem is actually defined. </span> <span class="line" data-startTime="545">There is almost no declarative </span><span class="line" data-startTime="545">syntax, and it's very hard, if </span><span class="line" data-startTime="549">not impossible sometimes, to </span><span class="line" data-startTime="549">find dependencies between </span><span class="line" data-startTime="552">different components in a </span><span class="line" data-startTime="552">language like JavaScript. </span> <span class="line" data-startTime="556">It's not uncommon and not </span><span class="line" data-startTime="556">unheard of that in JavaScript </span><span class="line" data-startTime="558">you do monkey patching of core </span><span class="line" data-startTime="558">functionality to add your </span><span class="line" data-startTime="561">message to the object </span><span class="line" data-startTime="561">[? or ?] prototype. </span></p>

<p><span class="line" data-startTime="564">And that makes it even harder to </span><span class="line" data-startTime="564">reason about what's defined </span><span class="line" data-startTime="566">where, and who uses what. </span> <span class="line" data-startTime="568">And understanding the program </span><span class="line" data-startTime="568">structure is really, really </span><span class="line" data-startTime="570">important if you want to be </span><span class="line" data-startTime="570">efficient as a programmer. </span> <span class="line" data-startTime="573">You need to be able to do code </span><span class="line" data-startTime="573">maintenance and refactoring, </span><span class="line" data-startTime="576">and that really requires you to </span><span class="line" data-startTime="576">have a full and very good </span><span class="line" data-startTime="578">understanding of the </span><span class="line" data-startTime="578">program structure. </span> <span class="line" data-startTime="580">You also need that understanding </span><span class="line" data-startTime="580">of the program </span><span class="line" data-startTime="583">structure if you want to write </span><span class="line" data-startTime="583">a good tool that can analyze </span><span class="line" data-startTime="586">your code, and work with it, and </span><span class="line" data-startTime="586">allow you to debug it and </span><span class="line" data-startTime="588">maybe navigate the code </span><span class="line" data-startTime="588">in a clever way. </span></p>

<p><span class="line" data-startTime="591">So it's actually really </span><span class="line" data-startTime="591">hard in JavaScript. </span> <span class="line" data-startTime="593">Let me give you a </span><span class="line" data-startTime="593">small example of </span><span class="line" data-startTime="594">what I mean with that. </span> <span class="line" data-startTime="595">So here's a very, very simple </span><span class="line" data-startTime="595">JavaScript function, meant as </span><span class="line" data-startTime="599">a constructor for points. </span> <span class="line" data-startTime="602">So the fields of this point </span><span class="line" data-startTime="602">class, that I'm trying to </span><span class="line" data-startTime="604">simulate in JavaScript, are </span><span class="line" data-startTime="604">not actually declared </span><span class="line" data-startTime="607">anywhere, except that they are </span><span class="line" data-startTime="607">implicitly defined by the </span><span class="line" data-startTime="610">statements that I put in the </span><span class="line" data-startTime="610">constructor that assign x and </span><span class="line" data-startTime="613">y to this.x and this.y. </span> <span class="line" data-startTime="616">This seems simple enough, </span><span class="line" data-startTime="616">and pretty nice. </span></p>

<p><span class="line" data-startTime="618">And you could probably write a </span><span class="line" data-startTime="618">tool that works with this kind </span><span class="line" data-startTime="621">of information. </span> <span class="line" data-startTime="622">But in reality it's often more </span><span class="line" data-startTime="622">complicated than this. </span> <span class="line" data-startTime="624">So in JavaScript we often see </span><span class="line" data-startTime="624">code like this, for instance, </span><span class="line" data-startTime="628">where you really want to make </span><span class="line" data-startTime="628">these properties non-writable, </span><span class="line" data-startTime="632">like read-only. </span> <span class="line" data-startTime="633">And suddenly you have to go </span><span class="line" data-startTime="633">through actual control flow in </span><span class="line" data-startTime="637">your constructors, to figure </span><span class="line" data-startTime="637">out what kind of fields you </span><span class="line" data-startTime="641">end up having on all </span><span class="line" data-startTime="641">your points. </span></p>

<p><span class="line" data-startTime="643">Of course, this is a trivial </span><span class="line" data-startTime="643">example, so a very good tool </span><span class="line" data-startTime="645">could probably analyze this </span><span class="line" data-startTime="645">code and understand what </span><span class="line" data-startTime="647">you're doing. </span> <span class="line" data-startTime="648">But for real applications, </span><span class="line" data-startTime="648">this really quickly gets </span><span class="line" data-startTime="651">really, really hard. </span> <span class="line" data-startTime="653">If you look at the tools out </span><span class="line" data-startTime="653">there today for working with </span><span class="line" data-startTime="656">JavaScript code, it is pretty </span><span class="line" data-startTime="656">clear that it's not an easy </span><span class="line" data-startTime="658">problem to solve. </span> <span class="line" data-startTime="659">I mean, there are good </span><span class="line" data-startTime="659">tools coming </span><span class="line" data-startTime="661">out, and it's improving. </span> <span class="line" data-startTime="662">But it's really hard. </span> <span class="line" data-startTime="665">Another very fundamental issue </span><span class="line" data-startTime="665">with JavaScript is this keep </span><span class="line" data-startTime="669">on trucking mentality. </span> <span class="line" data-startTime="670">So JavaScript has this idea </span><span class="line" data-startTime="670">that it's a good thing to </span><span class="line" data-startTime="673">tolerate mistakes in the </span><span class="line" data-startTime="673">program, and it's OK to </span><span class="line" data-startTime="676">operate on unexpected types, and </span><span class="line" data-startTime="676">it's OK if that actually </span><span class="line" data-startTime="681">just leads to unusable or </span><span class="line" data-startTime="681">unexpected results. </span> <span class="line" data-startTime="684">So at the point in your code </span><span class="line" data-startTime="684">where you introduce an error, </span><span class="line" data-startTime="687">you're very unlikely </span><span class="line" data-startTime="687">to get that error. </span> <span class="line" data-startTime="690">And it's much more likely that </span><span class="line" data-startTime="690">the value you get out of that </span><span class="line" data-startTime="693">mistake you put in will just </span><span class="line" data-startTime="693">flow through your program and </span><span class="line" data-startTime="696">end up causing a problem </span><span class="line" data-startTime="696">later on. </span> <span class="line" data-startTime="698">That just makes it very, very </span><span class="line" data-startTime="698">hard to find your problem. </span></p>

<p><span class="line" data-startTime="702">Almost anything goes. </span> <span class="line" data-startTime="704">For the program productivity, </span><span class="line" data-startTime="704">it's much better to throw </span><span class="line" data-startTime="706">errors more eagerly. </span> <span class="line" data-startTime="708">So it makes it much easier to </span><span class="line" data-startTime="708">locate the source of an error, </span><span class="line" data-startTime="711">and it gives you many of the </span><span class="line" data-startTime="711">errors when you're testing </span><span class="line" data-startTime="717">your code, not at run time </span><span class="line" data-startTime="717">at the end user's side. </span> <span class="line" data-startTime="720">So it gives you more </span><span class="line" data-startTime="720">confidence in the </span><span class="line" data-startTime="722">deployed apps, too. </span> <span class="line" data-startTime="723">It's really a good thing </span><span class="line" data-startTime="723">for writing large scale </span><span class="line" data-startTime="726">applications and being able to </span><span class="line" data-startTime="726">trust that they actually work </span><span class="line" data-startTime="728">as intended. </span> <span class="line" data-startTime="730">Let me give you a few </span><span class="line" data-startTime="730">examples of that. </span></p>

<p><span class="line" data-startTime="732">So in JavaScript, </span><span class="line" data-startTime="732">constructors for </span><span class="line" data-startTime="735">objects are just functions. </span> <span class="line" data-startTime="738">That seems pretty </span><span class="line" data-startTime="738">nice and simple. </span> <span class="line" data-startTime="740">I can use the function </span><span class="line" data-startTime="740">as a constructor. </span> <span class="line" data-startTime="743">It just sort of works. </span> <span class="line" data-startTime="744">So if we build on the point </span><span class="line" data-startTime="744">example from before, we can </span><span class="line" data-startTime="749">clearly allocate a point by </span><span class="line" data-startTime="749">using that as a constructor. </span> <span class="line" data-startTime="752">But what happens if we actually </span><span class="line" data-startTime="752">forget to write new </span><span class="line" data-startTime="754">in front of that constructor </span><span class="line" data-startTime="754">application? </span><span class="line" data-startTime="757">Well, it turns out it works. </span> <span class="line" data-startTime="758">It doesn't give you an error. </span> <span class="line" data-startTime="760">It's fine. </span> <span class="line" data-startTime="761">It does give you the point </span><span class="line" data-startTime="761">undefined back., and </span><span class="line" data-startTime="765">additionally it gives you two </span><span class="line" data-startTime="765">extra global variables, x and </span><span class="line" data-startTime="768">y, that have the </span><span class="line" data-startTime="768">value 2 and 3. </span></p>

<p><span class="line" data-startTime="770">So you don't get a point, but </span><span class="line" data-startTime="770">you get extra state and the </span><span class="line" data-startTime="774">global object. </span> <span class="line" data-startTime="775">That seems unintended, kind of </span><span class="line" data-startTime="775">weird, and just is a real </span><span class="line" data-startTime="779">source of errors. </span> <span class="line" data-startTime="779">We see this every day. </span> <span class="line" data-startTime="782">During the development of V8 </span><span class="line" data-startTime="782">we've been through quite a lot </span><span class="line" data-startTime="785">of JavaScript code written by </span><span class="line" data-startTime="785">many, many people, and these </span><span class="line" data-startTime="787">sort of subtle bugs </span><span class="line" data-startTime="787">always pop up. </span></p>

<p class="speaker"><span class="line" data-starttime="791"><span class="speakerName">Lars Bak</span>: And one more thing. </span><span class="line" data-startTime="793">The interesting part is that </span><span class="line" data-startTime="793">undefined [? integers, ?] </span><span class="line" data-startTime="797">you can see here, you </span><span class="line" data-startTime="797">can't even rely on. </span><span class="line" data-startTime="798">Because it's mutable. </span><span class="line" data-startTime="799">You can change that property. </span><span class="line" data-startTime="801">So most people that would write </span><span class="line" data-startTime="801">correct code, in this </span><span class="line" data-startTime="803">case, will instead of undefined </span><span class="line" data-startTime="803">use [? write ?] </span><span class="line" data-startTime="806">zero. </span><span class="line" data-startTime="808">That makes sense </span><span class="line" data-startTime="808">to you, right? </span></p>

<p class="speaker"><span class="line" data-starttime="810"><span class="speakerName">Kasper Lund</span>: Yeah, it does. </span> <span class="line" data-startTime="812">I don't know how many </span><span class="line" data-startTime="812">people that make </span><span class="line" data-startTime="812">sense to, but anyway. </span> <span class="line" data-startTime="814">Let's take another example. </span> <span class="line" data-startTime="816">This is probably the most common </span><span class="line" data-startTime="816">source of issues in </span><span class="line" data-startTime="819">JavaScript. </span> <span class="line" data-startTime="821">If you have a typo in your </span><span class="line" data-startTime="821">code, that gives you real </span><span class="line" data-startTime="823">problems and it's </span><span class="line" data-startTime="823">hard to find. </span> <span class="line" data-startTime="825">So I put some code up here </span><span class="line" data-startTime="825">that uses an XML </span><span class="line" data-startTime="827">HTTP request object. </span> <span class="line" data-startTime="829">And the intent is, of course, </span><span class="line" data-startTime="829">to install a callback that </span><span class="line" data-startTime="833">will get invoked whenever the </span><span class="line" data-startTime="833">ready state changes, and if we </span><span class="line" data-startTime="836">reach the done state, </span><span class="line" data-startTime="836">which is state 4, </span><span class="line" data-startTime="839">will log in to console. </span> <span class="line" data-startTime="841">Very simple. </span> <span class="line" data-startTime="842">Unfortunately this </span><span class="line" data-startTime="842">does not work. </span></p>

<p><span class="line" data-startTime="844">The console will never have </span><span class="line" data-startTime="844">anything here, even if the </span><span class="line" data-startTime="847">ready state does change to 4. </span> <span class="line" data-startTime="849">Because ready state is spelled </span><span class="line" data-startTime="849">with a capital S. So </span><span class="line" data-startTime="854">JavaScript allows this, </span><span class="line" data-startTime="854">and it's just fine. </span> <span class="line" data-startTime="856">It just gives you undefined </span><span class="line" data-startTime="856">every single time you try to </span><span class="line" data-startTime="858">read the ready state with a </span><span class="line" data-startTime="858">lowercase S. And undefined is </span><span class="line" data-startTime="861">not equal to 4. </span> <span class="line" data-startTime="862">Maybe it should be, </span><span class="line" data-startTime="862">I don't know. </span> <span class="line" data-startTime="865">Anyway, it's this kind of thing </span><span class="line" data-startTime="865">that makes you less </span><span class="line" data-startTime="868">productive as a programmer. </span> <span class="line" data-startTime="869">And it kind of sucks. </span> <span class="line" data-startTime="872">If we're sort of continuing on </span><span class="line" data-startTime="872">that trend, we can also take a </span><span class="line" data-startTime="875">look at implicit conversions. </span> <span class="line" data-startTime="877">There have been some pretty </span><span class="line" data-startTime="877">funny videos circulating the </span><span class="line" data-startTime="880">web with more examples like </span><span class="line" data-startTime="880">this, but this is a very </span><span class="line" data-startTime="882">simple one. </span></p>

<p><span class="line" data-startTime="883">So here we have a string. </span> <span class="line" data-startTime="885">Strings in JavaScript </span><span class="line" data-startTime="885">are values. </span> <span class="line" data-startTime="888">They're immutable, you </span><span class="line" data-startTime="888">cannot change them. </span> <span class="line" data-startTime="889">If you try, do like string </span><span class="line" data-startTime="889">dot hash equals </span><span class="line" data-startTime="892">something, it's accepted. </span> <span class="line" data-startTime="894">What actually happens here is </span><span class="line" data-startTime="894">that you actually implicitly </span><span class="line" data-startTime="896">convert string to a string </span><span class="line" data-startTime="896">object that wraps that string. </span> <span class="line" data-startTime="901">And you can access properties </span><span class="line" data-startTime="901">on that, you can even set </span><span class="line" data-startTime="902">properties on that. </span> <span class="line" data-startTime="904">The only problem is you actually </span><span class="line" data-startTime="904">throw that temporary </span><span class="line" data-startTime="906">object away just after having </span><span class="line" data-startTime="906">done it, so it has no effect. </span> <span class="line" data-startTime="909">So when you try to assert that </span><span class="line" data-startTime="909">string dot hash is something </span><span class="line" data-startTime="912">reasonable afterwards, </span><span class="line" data-startTime="912">it's undefined. </span> <span class="line" data-startTime="914">And again, I probably should </span><span class="line" data-startTime="914">have put void 0 here. </span> <span class="line" data-startTime="917">Because you get a different </span><span class="line" data-startTime="917">object wrapped around the </span><span class="line" data-startTime="920">string value to grab </span><span class="line" data-startTime="920">hold of the hash. </span> <span class="line" data-startTime="923">This is surprising </span><span class="line" data-startTime="923">to many people. </span> <span class="line" data-startTime="925">And often you use this kind of </span><span class="line" data-startTime="925">trick to try to add some </span><span class="line" data-startTime="928">caching to your code. </span></p>

<p><span class="line" data-startTime="929">And it seems to work just fine, </span><span class="line" data-startTime="929">except that you never </span><span class="line" data-startTime="931">get any caching out of it. </span> <span class="line" data-startTime="933">It's a performance problem, and </span><span class="line" data-startTime="933">it's just annoying to have </span><span class="line" data-startTime="936">to deal with. </span> <span class="line" data-startTime="939">I think I can top </span><span class="line" data-startTime="939">the last slide. </span> <span class="line" data-startTime="941">How about this one? </span><span class="line" data-startTime="942">I don't know if anyone here can </span><span class="line" data-startTime="942">tell me why 2.0 should be </span><span class="line" data-startTime="945">equal to the string two, that </span><span class="line" data-startTime="945">is equal to a Boolean object </span><span class="line" data-startTime="948">that wraps the true value, </span><span class="line" data-startTime="948">that is equal </span><span class="line" data-startTime="951">to the string one. </span> <span class="line" data-startTime="952">But it is. </span> <span class="line" data-startTime="954">There are so many implicit </span><span class="line" data-startTime="954">conversions going on here that </span><span class="line" data-startTime="956">it makes my head explode. </span> <span class="line" data-startTime="958">And having to implement this </span><span class="line" data-startTime="958">in V8, it was a lot of fun. </span> <span class="line" data-startTime="962">But sometimes you have to doubt </span><span class="line" data-startTime="962">whether or not the value </span><span class="line" data-startTime="964">you get out of these implicit </span><span class="line" data-startTime="964">conversions </span><span class="line" data-startTime="966">is worth the trouble. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="967"><span class="speakerName">Lars Bak</span>: Actually if you take </span><span class="line" data-startTime="967">the [INAUDIBLE] script </span><span class="line" data-startTime="969">standard and go through </span><span class="line" data-startTime="969">specification, you'll figure </span><span class="line" data-startTime="971">out that you need at least six </span><span class="line" data-startTime="971">implicit conversions of </span><span class="line" data-startTime="974">objects before you can evaluate </span><span class="line" data-startTime="974">this expression. </span></p>

<p class="speaker"><span class="line" data-starttime="978"><span class="speakerName">Kasper Lund</span>: Yeah, and they go </span><span class="line" data-startTime="978">in different directions. </span> <span class="line" data-startTime="980">Like sometimes you convert to </span><span class="line" data-startTime="980">numbers implicitly, sometimes </span><span class="line" data-startTime="982">to strings, sometimes from </span><span class="line" data-startTime="982">objects to primitive values. </span> <span class="line" data-startTime="985">It's pretty messy. </span> <span class="line" data-startTime="988">Another big issue that we see, </span><span class="line" data-startTime="988">and this is of course also </span><span class="line" data-startTime="991">coming from the low level, from </span><span class="line" data-startTime="991">the VM side up, is that </span><span class="line" data-startTime="995">JavaScript has really </span><span class="line" data-startTime="995">unpredictable performance. </span> <span class="line" data-startTime="997">There's sort of an advice </span><span class="line" data-startTime="997">floating around that you </span><span class="line" data-startTime="1000">should just try to use the </span><span class="line" data-startTime="1000">efficient subset of </span><span class="line" data-startTime="1002">JavaScript. </span> <span class="line" data-startTime="1003">Because VMs over the last few </span><span class="line" data-startTime="1003">years have been optimized for </span><span class="line" data-startTime="1006">certain patterns. </span> <span class="line" data-startTime="1007">And if you want to benefit </span><span class="line" data-startTime="1007">from the performance </span><span class="line" data-startTime="1009">improvements, and you probably </span><span class="line" data-startTime="1009">do want to do that, you have </span><span class="line" data-startTime="1013">to hit that sweet spot, and have </span><span class="line" data-startTime="1013">all your code fit in that </span><span class="line" data-startTime="1017">efficient subset. </span></p>

<p><span class="line" data-startTime="1018">The problem is that it's </span><span class="line" data-startTime="1018">actually kind of hard to find </span><span class="line" data-startTime="1020">that subset. </span> <span class="line" data-startTime="1021">Nobody can tell you what </span><span class="line" data-startTime="1021">that subset is. </span> <span class="line" data-startTime="1023">It depends on the browser, </span><span class="line" data-startTime="1023">it depends on the </span><span class="line" data-startTime="1025">version of the browser. </span> <span class="line" data-startTime="1026">And it's not just about using </span><span class="line" data-startTime="1026">the right syntactic </span><span class="line" data-startTime="1029">constructs. </span> <span class="line" data-startTime="1030">It can be about not fetching </span><span class="line" data-startTime="1030">local variables from the </span><span class="line" data-startTime="1033">context chain. </span> <span class="line" data-startTime="1034">It can be about many </span><span class="line" data-startTime="1034">different things. </span> <span class="line" data-startTime="1036">If you see a site like </span><span class="line" data-startTime="1036">jsperf.com, where people try </span><span class="line" data-startTime="1038">to upload these mini-snippets </span><span class="line" data-startTime="1038">of code to figure out what </span><span class="line" data-startTime="1041">works well in certain browsers, </span><span class="line" data-startTime="1041">this is an act of </span><span class="line" data-startTime="1044">desperation. </span></p>

<p><span class="line" data-startTime="1045">People are trying to figure </span><span class="line" data-startTime="1045">out what works well. </span> <span class="line" data-startTime="1047">They just don't know. </span> <span class="line" data-startTime="1048">So the only way to write a </span><span class="line" data-startTime="1048">really high-performance </span><span class="line" data-startTime="1050">JavaScript application is </span><span class="line" data-startTime="1050">to profile all the time. </span> <span class="line" data-startTime="1053">That takes time, again limiting </span><span class="line" data-startTime="1053">your productivity. </span> <span class="line" data-startTime="1056">So you can do amazing things </span><span class="line" data-startTime="1056">with JavaScript. </span> <span class="line" data-startTime="1058">It's just kind of tricky </span><span class="line" data-startTime="1058">and time consuming. </span> <span class="line" data-startTime="1061">And JavaScript performance </span><span class="line" data-startTime="1061">is pretty unpredictable. </span> <span class="line" data-startTime="1065">Sometimes it's really great, and </span><span class="line" data-startTime="1065">sometimes you get like a </span><span class="line" data-startTime="1067">factor of 20 slower code, just </span><span class="line" data-startTime="1067">by using some slightly less </span><span class="line" data-startTime="1073">common version of something. </span> <span class="line" data-startTime="1075">That's not a good place to be. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1079"><span class="speakerName">Lars Bak</span>: All right. </span> <span class="line" data-startTime="1080">So this is the summary for </span><span class="line" data-startTime="1080">the JavaScript portion. </span> <span class="line" data-startTime="1083">And as Kasper stated, programs </span><span class="line" data-startTime="1083">are hard to understand when </span><span class="line" data-startTime="1089">you look at the source code. </span> <span class="line" data-startTime="1090">And it's also hard to reason </span><span class="line" data-startTime="1090">about if you're a tool. </span> <span class="line" data-startTime="1095">One thing that's really bad in </span><span class="line" data-startTime="1095">JavaScript is you can monkey </span><span class="line" data-startTime="1097">patch the basic objects. </span> <span class="line" data-startTime="1099">That means that if you have two </span><span class="line" data-startTime="1099">different components that </span><span class="line" data-startTime="1102">rely on the same library, </span><span class="line" data-startTime="1102">you get into problems. </span> <span class="line" data-startTime="1106">Because if one component patches </span><span class="line" data-startTime="1106">the library in a way </span><span class="line" data-startTime="1109">the other component cannot </span><span class="line" data-startTime="1109">handle, then </span><span class="line" data-startTime="1111">your program breaks. </span> <span class="line" data-startTime="1112">So compatibility is </span><span class="line" data-startTime="1112">out the window. </span> <span class="line" data-startTime="1116">Keep on trucking mentality is </span><span class="line" data-startTime="1116">just surprising to most. </span> <span class="line" data-startTime="1119">And we have gotten programs </span><span class="line" data-startTime="1119">in to analyze </span><span class="line" data-startTime="1121">where this is an error. </span></p>

<p><span class="line" data-startTime="1123">So programmers actually sent </span><span class="line" data-startTime="1123">their programs out, in </span><span class="line" data-startTime="1126">production, with these keep on </span><span class="line" data-startTime="1126">trucking errors in them. </span> <span class="line" data-startTime="1131">And then of course there's </span><span class="line" data-startTime="1132">unpredictability about the code. </span> <span class="line" data-startTime="1135">You should try to take your </span><span class="line" data-startTime="1135">favorite fast-running </span><span class="line" data-startTime="1138">JavaScript code and put delete </span><span class="line" data-startTime="1138">property in a crucial place, </span><span class="line" data-startTime="1143">and then the performance </span><span class="line" data-startTime="1143">[? quota ?] </span><span class="line" data-startTime="1144">will go down the toilet. </span> <span class="line" data-startTime="1146">So this was the motivational </span><span class="line" data-startTime="1146">part. </span> <span class="line" data-startTime="1150">And hopefully you can see </span><span class="line" data-startTime="1150">innovation is needed, if you </span><span class="line" data-startTime="1152">want to move the platform </span><span class="line" data-startTime="1152">forward so it's more </span><span class="line" data-startTime="1155">productive for programmers. </span></p>

<p><span class="line" data-startTime="1159">So let's talk about that. </span> <span class="line" data-startTime="1163">And you'll get that </span><span class="line" data-startTime="1163">in one slide. </span> <span class="line" data-startTime="1166">It's here. </span></p>

<p class="speaker"><span class="line" data-starttime="1166"><span class="speakerName">Kasper Lund</span>: Here it is. </span></p>

<p class="speaker"><span class="line" data-starttime="1168"><span class="speakerName">Lars Bak</span>: So since we're VM </span><span class="line" data-startTime="1168">developers, we don't really </span><span class="line" data-startTime="1170">know how to design languages. </span><span class="line" data-startTime="1172">So we thought a good idea would </span><span class="line" data-startTime="1172">be to take different </span><span class="line" data-startTime="1175">languages, and take the best </span><span class="line" data-startTime="1175">aspects of them, and </span><span class="line" data-startTime="1178">put them into one. </span><span class="line" data-startTime="1179">So Dart is basically sort of a </span><span class="line" data-startTime="1179">combination of the syntax from </span><span class="line" data-startTime="1183">JavaScript, the [? optional ?] </span><span class="line" data-startTime="1183">types in Strongtalk, the </span><span class="line" data-startTime="1187">object model in Smalltalk, some </span><span class="line" data-startTime="1187">concepts from C#, and </span><span class="line" data-startTime="1194">then an isolate model that's </span><span class="line" data-startTime="1194">inspired by Erlang. </span><span class="line" data-startTime="1197">So that is very simple. </span><span class="line" data-startTime="1200">And to specify what it is, </span><span class="line" data-startTime="1200">is an unsurprising simple </span><span class="line" data-startTime="1205">[INAUDIBLE] </span><span class="line" data-startTime="1206">language. </span><span class="line" data-startTime="1206">With simple inheritance &mdash; we </span><span class="line" data-startTime="1206">have classes, and we have </span><span class="line" data-startTime="1211">interfaces, and we have </span><span class="line" data-startTime="1211">a familiar syntax. </span><span class="line" data-startTime="1213">So if you know how to program in </span><span class="line" data-startTime="1213">C# or Java or JavaScript, I </span><span class="line" data-startTime="1218">would expect that you can get </span><span class="line" data-startTime="1218">productive within a few hours. </span></p>

<p class="speaker"><span class="line" data-starttime="1221"><span class="speakerName">Kasper Lund</span>: One thing that's </span><span class="line" data-startTime="1221">worth mentioning here is that </span><span class="line" data-startTime="1223">at some point we found that </span><span class="line" data-startTime="1223">if you want to develop a </span><span class="line" data-startTime="1226">language, design it to make it </span><span class="line" data-startTime="1226">appealing to people, it has to </span><span class="line" data-startTime="1229">have curly braces. </span><span class="line" data-startTime="1231">It is not possible to come up </span><span class="line" data-startTime="1231">with a mainstream programming </span><span class="line" data-startTime="1234">language that gets any </span><span class="line" data-startTime="1234">kind of acceptance </span><span class="line" data-startTime="1237">without curly braces. </span><span class="line" data-startTime="1238">So we have tons of </span><span class="line" data-startTime="1238">curly braces. </span><span class="line" data-startTime="1241">You're welcome. </span><span class="line" data-startTime="1242">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="1248"><span class="speakerName">Lars Bak</span>: It's sad, but true. </span> <span class="line" data-startTime="1255">So let me just go on. </span> <span class="line" data-startTime="1258">So here is the point </span><span class="line" data-startTime="1258">example in Dart. </span> <span class="line" data-startTime="1261">This is the first Dart </span><span class="line" data-startTime="1261">example of this talk. </span> <span class="line" data-startTime="1264">And there's a class </span><span class="line" data-startTime="1264">named point. </span> <span class="line" data-startTime="1267">It has two fields, x and y. </span> <span class="line" data-startTime="1269">And there's a constructor. </span> <span class="line" data-startTime="1272">And parameters for the </span><span class="line" data-startTime="1272">constructor are this.x and </span><span class="line" data-startTime="1275">this.y means when you call the </span><span class="line" data-startTime="1275">constructor it will assign the </span><span class="line" data-startTime="1278">parameters to the two fields. </span> <span class="line" data-startTime="1280">So there's no body of the </span><span class="line" data-startTime="1280">constructor in this case. </span> <span class="line" data-startTime="1283">It also has an operator plus </span><span class="line" data-startTime="1283">that takes us another point, </span><span class="line" data-startTime="1288">and then it returns a new point </span><span class="line" data-startTime="1288">that's actually the </span><span class="line" data-startTime="1292">addition of the two points, the </span><span class="line" data-startTime="1294">receiver and the parameter. </span></p>

<p><span class="line" data-startTime="1296">Here you can see the shorthand </span><span class="line" data-startTime="1296">notation for a function, where </span><span class="line" data-startTime="1300">you see the arrow. </span> <span class="line" data-startTime="1302">Syntax just means that there's </span><span class="line" data-startTime="1302">one expression to the right, </span><span class="line" data-startTime="1305">and the function will return the </span><span class="line" data-startTime="1305">result of that expression. </span> <span class="line" data-startTime="1310">There's also a to string method, </span><span class="line" data-startTime="1310">and it returns a </span><span class="line" data-startTime="1314">string so you can see what </span><span class="line" data-startTime="1314">coordinates the point has. </span> <span class="line" data-startTime="1319">Here we're using string </span><span class="line" data-startTime="1319">interpolation, it's fairly </span><span class="line" data-startTime="1321">obvious what's going on. </span> <span class="line" data-startTime="1323">And then we have a top level </span><span class="line" data-startTime="1323">main that creates a new point. </span> <span class="line" data-startTime="1326">And then it has an expression </span><span class="line" data-startTime="1326">where we add one point to </span><span class="line" data-startTime="1330">another point, which </span><span class="line" data-startTime="1330">is new point 4, 5. </span></p>

<p><span class="line" data-startTime="1334">One thing I should point out, </span><span class="line" data-startTime="1334">you cannot call the </span><span class="line" data-startTime="1337">constructor without new. </span> <span class="line" data-startTime="1340">That's a good thing. </span></p>

<p class="speaker"><span class="line" data-starttime="1341"><span class="speakerName">Kasper Lund</span>: Hopefully this </span><span class="line" data-startTime="1341">syntax does not look </span><span class="line" data-startTime="1342">too scary to people. </span><span class="line" data-startTime="1343">I mean, the feedback we've </span><span class="line" data-startTime="1343">gotten so far is that this </span><span class="line" data-startTime="1346">kind of code is actually fairly </span><span class="line" data-startTime="1346">easy for people to just </span><span class="line" data-startTime="1349">read on the slide </span><span class="line" data-startTime="1349">and understand. </span><span class="line" data-startTime="1350">That's exactly what </span><span class="line" data-startTime="1350">we're going for. </span></p>

<p class="speaker"><span class="line" data-starttime="1356"><span class="speakerName">Lars Bak</span>: When we designed the </span><span class="line" data-startTime="1356">language, we looked at various </span><span class="line" data-startTime="1360">attempts to make scalable </span><span class="line" data-startTime="1360">programs. </span> <span class="line" data-startTime="1363">And there needs to be a way </span><span class="line" data-startTime="1363">where the programmer can </span><span class="line" data-startTime="1367">specify the intent </span><span class="line" data-startTime="1367">of a library. </span> <span class="line" data-startTime="1371">And one way of doing that </span><span class="line" data-startTime="1371">is by specifying type </span><span class="line" data-startTime="1373">annotations. </span> <span class="line" data-startTime="1375">And we have that in Dart. </span> <span class="line" data-startTime="1376">They're optional, though. </span> <span class="line" data-startTime="1377">So you can write without </span><span class="line" data-startTime="1377">types if you want to. </span> <span class="line" data-startTime="1380">And as your program matures and </span><span class="line" data-startTime="1380">you get more structure on </span><span class="line" data-startTime="1383">it, you can add the types </span><span class="line" data-startTime="1383">any time you want. </span></p>

<p><span class="line" data-startTime="1387">But they act as checkable </span><span class="line" data-startTime="1387">documentation for the code and </span><span class="line" data-startTime="1390">the interfaces. </span> <span class="line" data-startTime="1391">So you can decide only to put in </span><span class="line" data-startTime="1391">types in the interface, but </span><span class="line" data-startTime="1394">you can also decide to really </span><span class="line" data-startTime="1394">put in static types everywhere </span><span class="line" data-startTime="1398">in your program. </span> <span class="line" data-startTime="1400">And people that are familiar </span><span class="line" data-startTime="1400">with the Java or C#, they have </span><span class="line" data-startTime="1403">a tendency to do that. </span> <span class="line" data-startTime="1407">We also have generics. </span> <span class="line" data-startTime="1409">And that makes really useful, so </span><span class="line" data-startTime="1409">you can specify you have a </span><span class="line" data-startTime="1411">list of apples or a </span><span class="line" data-startTime="1411">set of oranges. </span> <span class="line" data-startTime="1416">States intent. </span> <span class="line" data-startTime="1419">The type system is a little </span><span class="line" data-startTime="1419">bit special in that it is </span><span class="line" data-startTime="1421">considered unsound, because we </span><span class="line" data-startTime="1421">allow downcasts when steadily </span><span class="line" data-startTime="1427">checking a Dart program. </span> <span class="line" data-startTime="1428">However, these abilities </span><span class="line" data-startTime="1428">are run time. </span> <span class="line" data-startTime="1430">So if you violate the assignment </span><span class="line" data-startTime="1430">rules, you'll get a </span><span class="line" data-startTime="1434">runtime error. </span> <span class="line" data-startTime="1435">But it makes it very, </span><span class="line" data-startTime="1435">very flexible. </span></p>

<p><span class="line" data-startTime="1436">And I'll show you that on the </span><span class="line" data-startTime="1436">next slide, hopefully. </span> <span class="line" data-startTime="1442">Or the next slide. </span> <span class="line" data-startTime="1444">This one here is the point </span><span class="line" data-startTime="1444">example again, where we have </span><span class="line" data-startTime="1447">added the types. </span> <span class="line" data-startTime="1449">So you can see that the fields </span><span class="line" data-startTime="1449">are now annotated with num, </span><span class="line" data-startTime="1454">which is a number in Dart. </span> <span class="line" data-startTime="1457">And also the return type of the </span><span class="line" data-startTime="1457">operator plus will be a </span><span class="line" data-startTime="1462">point, and the parameter to </span><span class="line" data-startTime="1462">that is also a point. </span> <span class="line" data-startTime="1466">So you can see, if you contrast </span><span class="line" data-startTime="1466">it to the first </span><span class="line" data-startTime="1468">example, as little changes </span><span class="line" data-startTime="1468">you have to make in </span><span class="line" data-startTime="1471">order to type it. </span> <span class="line" data-startTime="1474">And this hopefully here also </span><span class="line" data-startTime="1474">is very easy to read. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1478"><span class="speakerName">Kasper Lund</span>: We see people start </span><span class="line" data-startTime="1478">out without writing a </span><span class="line" data-startTime="1481">lot of type notations. </span> <span class="line" data-startTime="1482">While they're prototyping, just </span><span class="line" data-startTime="1482">wanted to get some things </span><span class="line" data-startTime="1484">done, they will write in a style </span><span class="line" data-startTime="1484">where they have less </span><span class="line" data-startTime="1487">type notations. </span> <span class="line" data-startTime="1487">And once they want to coordinate </span><span class="line" data-startTime="1487">their work with </span><span class="line" data-startTime="1490">coworkers, or maybe send it out </span><span class="line" data-startTime="1490">for a code review, they </span><span class="line" data-startTime="1494">will add more types to try to </span><span class="line" data-startTime="1494">document what they felt like </span><span class="line" data-startTime="1496">doing, an what the different </span><span class="line" data-startTime="1496">constructs were meant to do. </span></p>

<p><span class="line" data-startTime="1500">Usually we end up having types </span><span class="line" data-startTime="1500">in interfaces and return types </span><span class="line" data-startTime="1505">and parameters, and </span><span class="line" data-startTime="1505">less types in the </span><span class="line" data-startTime="1507">implementations of methods. </span> <span class="line" data-startTime="1508">But it's a matter of taste, </span><span class="line" data-startTime="1508">and you can choose, </span><span class="line" data-startTime="1512">essentially, what you like. </span></p>

<p class="speaker"><span class="line" data-starttime="1517"><span class="speakerName">Lars Bak</span>: So to some of you </span><span class="line" data-startTime="1517">that are used to generics, </span><span class="line" data-startTime="1521">from Java or C#, this might </span><span class="line" data-startTime="1521">sound surprising. </span> <span class="line" data-startTime="1524">But we have covariant </span><span class="line" data-startTime="1524">generic types. </span> <span class="line" data-startTime="1526">And it basically means that if </span><span class="line" data-startTime="1526">apple is a fruit, then a list </span><span class="line" data-startTime="1535">of apples is clearly </span><span class="line" data-startTime="1535">a list of fruits. </span> <span class="line" data-startTime="1538">In this example we have </span><span class="line" data-startTime="1538">the main function. </span> <span class="line" data-startTime="1542">It calls a pick apples </span><span class="line" data-startTime="1542">from a tree, and it </span><span class="line" data-startTime="1547">returns a list of apples. </span> <span class="line" data-startTime="1549">And then you call the print </span><span class="line" data-startTime="1549">fruits method &mdash; </span><span class="line" data-startTime="1552">hello &mdash; </span><span class="line" data-startTime="1553">and that takes a </span><span class="line" data-startTime="1553">list of fruits. </span> <span class="line" data-startTime="1555">And it seems to work. </span> <span class="line" data-startTime="1556">And that's how it should work. </span> <span class="line" data-startTime="1557">But if you take Java or </span><span class="line" data-startTime="1557">C#, that will fail. </span> <span class="line" data-startTime="1561">Because if you take these two </span><span class="line" data-startTime="1561">generic types in these </span><span class="line" data-startTime="1565">languages, they are unrelated. </span> <span class="line" data-startTime="1567">And the type system cannot </span><span class="line" data-startTime="1567">cope with it. </span></p>

<p><span class="line" data-startTime="1571">It works like you </span><span class="line" data-startTime="1571">want it to work. </span></p>

<p class="speaker"><span class="line" data-starttime="1574"><span class="speakerName">Kasper Lund</span>: That's exactly </span><span class="line" data-startTime="1574">what I wanted to say. </span><span class="line" data-startTime="1576">This fits with your intuition </span><span class="line" data-startTime="1576">in most cases. </span><span class="line" data-startTime="1579">And of course there are some </span><span class="line" data-startTime="1579">theoretical reasons why other </span><span class="line" data-startTime="1582">languages have not </span><span class="line" data-startTime="1582">done this before. </span><span class="line" data-startTime="1584">But this actually works pretty </span><span class="line" data-startTime="1584">well in practice. </span><span class="line" data-startTime="1587">So it does give you some </span><span class="line" data-startTime="1587">runtime checks </span><span class="line" data-startTime="1588">every now and then. </span><span class="line" data-startTime="1589">But it works really </span><span class="line" data-startTime="1589">well in practice. </span><span class="line" data-startTime="1591">And it makes the types </span><span class="line" data-startTime="1591">not get in your way </span></p>

<p class="speaker"><span class="line" data-starttime="1597"><span class="speakerName">Lars Bak</span>: All right. </span><span class="line" data-startTime="1598">So let's go for a small demo. </span></p>

<p class="speaker"><span class="line" data-starttime="1607"><span class="speakerName">Kasper Lund</span>: Let me show you </span><span class="line" data-startTime="1607">just a tiny bit of Dart code, </span><span class="line" data-startTime="1609">and how it works in practice. </span> <span class="line" data-startTime="1610">And I want to try to illustrate </span><span class="line" data-startTime="1610">how these types can </span><span class="line" data-startTime="1615">be checked at runtime to give </span><span class="line" data-startTime="1615">you very recognizable and very </span><span class="line" data-startTime="1618">strong error signals, that allow </span><span class="line" data-startTime="1618">you to fix issues in </span><span class="line" data-startTime="1622">your code much more quickly. </span> <span class="line" data-startTime="1623">So here's an instance of the </span><span class="line" data-startTime="1623">Dart editor running. </span> <span class="line" data-startTime="1626">I'm not going to go into a lot </span><span class="line" data-startTime="1626">of detail about the editor. </span> <span class="line" data-startTime="1628">You should come to the next talk </span><span class="line" data-startTime="1628">at 2:45 in Room Three. </span> <span class="line" data-startTime="1633">You'll get much more insights </span><span class="line" data-startTime="1633">into what the editor can do </span><span class="line" data-startTime="1635">and how it works. </span> <span class="line" data-startTime="1636">This will just be </span><span class="line" data-startTime="1636">a small teaser. </span> <span class="line" data-startTime="1638">So here I have a </span><span class="line" data-startTime="1638">sunflower demo. </span></p>

<p><span class="line" data-startTime="1641">I can show you that running in </span><span class="line" data-startTime="1641">our custom build of Chrome, </span><span class="line" data-startTime="1645">that has the Dart VM enabled. </span> <span class="line" data-startTime="1646">And it's a fairly simple, </span><span class="line" data-startTime="1646">small thing. </span> <span class="line" data-startTime="1650">It just allows me to have a </span><span class="line" data-startTime="1650">slider and adjust the size of </span><span class="line" data-startTime="1652">this sunflower thing. </span> <span class="line" data-startTime="1654">If I go back to the editor and </span><span class="line" data-startTime="1654">I deliberately introduce a </span><span class="line" data-startTime="1657">small issue in the code &mdash; </span><span class="line" data-startTime="1658">let me scroll down here, </span><span class="line" data-startTime="1658">find the main thing. </span> <span class="line" data-startTime="1660">Something like messing up and </span><span class="line" data-startTime="1660">providing a rubbish argument </span><span class="line" data-startTime="1664">to draw frame. </span> <span class="line" data-startTime="1665">Instead of providing the </span><span class="line" data-startTime="1665">context, I'll give it the </span><span class="line" data-startTime="1667">canvas instead. </span> <span class="line" data-startTime="1668">I'll say that. </span> <span class="line" data-startTime="1669">And because the VM is enabled </span><span class="line" data-startTime="1669">in this Dart [INAUDIBLE], I </span><span class="line" data-startTime="1673">can just go and refresh the </span><span class="line" data-startTime="1673">browser, and it gets the </span><span class="line" data-startTime="1675">latest source code. </span></p>

<p><span class="line" data-startTime="1676">No compilation necessary. </span> <span class="line" data-startTime="1679">What actually happens is I go </span><span class="line" data-startTime="1679">back into the editor, because </span><span class="line" data-startTime="1681">this actually gives </span><span class="line" data-startTime="1681">me an exception. </span> <span class="line" data-startTime="1683">Because I'm supposed to be </span><span class="line" data-startTime="1683">passing a canvas rendering </span><span class="line" data-startTime="1686">context 2D. </span> <span class="line" data-startTime="1687">That's a nice, short name. </span> <span class="line" data-startTime="1689">It wants the context, and I'm </span><span class="line" data-startTime="1689">giving it a canvas instead. </span> <span class="line" data-startTime="1692">So I get a very recognizable </span><span class="line" data-startTime="1692">error, right here when I have </span><span class="line" data-startTime="1695">the mistake. </span> <span class="line" data-startTime="1696">It doesn't try to keep </span><span class="line" data-startTime="1696">on trucking. </span> <span class="line" data-startTime="1698">And it really helps me, as a </span><span class="line" data-startTime="1698">developer, to figure out what </span><span class="line" data-startTime="1701">I messed up. </span> <span class="line" data-startTime="1702">So this was a very small teaser, </span><span class="line" data-startTime="1702">just to show you that </span><span class="line" data-startTime="1705">the checking of these types at </span><span class="line" data-startTime="1705">runtime can really help you </span><span class="line" data-startTime="1708">just find those issues </span><span class="line" data-startTime="1708">really quickly. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1713"><span class="speakerName">Lars Bak</span>: And this is a good </span><span class="line" data-startTime="1713">example, where there's a </span><span class="line" data-startTime="1715">mixture between untyped </span><span class="line" data-startTime="1715">code and typed code. </span><span class="line" data-startTime="1718">And even though you have a </span><span class="line" data-startTime="1718">mixture, the typing in the </span><span class="line" data-startTime="1722">type part will help you validate </span><span class="line" data-startTime="1722">that you used the </span><span class="line" data-startTime="1724">code the right way. </span></p>

<p class="speaker"><span class="line" data-starttime="1726"><span class="speakerName">Kasper Lund</span>: So the canvas </span><span class="line" data-startTime="1726">that I provided as the </span><span class="line" data-startTime="1729">argument was untyped. </span><span class="line" data-startTime="1731">That's OK to pass to something </span><span class="line" data-startTime="1731">that expects a type, but we </span><span class="line" data-startTime="1733">will check it. </span><span class="line" data-startTime="1735">Let's go back to the </span><span class="line" data-startTime="1735">presentation, here. </span></p>

<p class="speaker"><span class="line" data-starttime="1740"><span class="speakerName">Lars Bak</span>: All right. </span> <span class="line" data-startTime="1741">Since this is a full language, </span><span class="line" data-startTime="1741">we decided to select a small </span><span class="line" data-startTime="1745">portfolio of cool language </span><span class="line" data-startTime="1745">features I hope you like. </span> <span class="line" data-startTime="1749">So let's go through </span><span class="line" data-startTime="1749">them quickly. </span> <span class="line" data-startTime="1752">So we have name constructors. </span> <span class="line" data-startTime="1755">And it means that you can have </span><span class="line" data-startTime="1755">more than one constructor in </span><span class="line" data-startTime="1759">the same class. </span> <span class="line" data-startTime="1760">In this case here we </span><span class="line" data-startTime="1760">have added a name </span><span class="line" data-startTime="1763">constructor to point. </span> <span class="line" data-startTime="1764">It's called polar. </span> <span class="line" data-startTime="1766">So if you have polar </span><span class="line" data-startTime="1766">coordinates, you can pass that </span><span class="line" data-startTime="1769">in and also create a point. </span></p>

<p><span class="line" data-startTime="1772">The main reason for doing that </span><span class="line" data-startTime="1772">is we don't have type </span><span class="line" data-startTime="1775">overloading in Dart. </span> <span class="line" data-startTime="1778">And this will give you </span><span class="line" data-startTime="1778">flexibility compared to other </span><span class="line" data-startTime="1782">languages, where you often </span><span class="line" data-startTime="1782">have to do several steady </span><span class="line" data-startTime="1786">factory methods to get </span><span class="line" data-startTime="1786">to the same result. </span> <span class="line" data-startTime="1789">So, cool feature. </span> <span class="line" data-startTime="1792">Next. </span> <span class="line" data-startTime="1794">We have interfaces. </span> <span class="line" data-startTime="1795">But what we have also added </span><span class="line" data-startTime="1795">something called default </span><span class="line" data-startTime="1798">implementations to interfaces. </span> <span class="line" data-startTime="1800">And it's mainly designed so that </span><span class="line" data-startTime="1800">novice users do not have </span><span class="line" data-startTime="1805">to know all the implementation </span><span class="line" data-startTime="1805">types in the system. </span></p>

<p><span class="line" data-startTime="1809">So all they have to know is </span><span class="line" data-startTime="1809">the simple interfaces. </span> <span class="line" data-startTime="1812">And you can say new to a list, </span><span class="line" data-startTime="1812">which is an interface, and the </span><span class="line" data-startTime="1816">only thing that will happened </span><span class="line" data-startTime="1816">is it will just delegate the </span><span class="line" data-startTime="1818">constructor call to the default </span><span class="line" data-startTime="1818">implementation. </span> <span class="line" data-startTime="1822">And in this case it's the </span><span class="line" data-startTime="1822">list [? factoring. ?] </span><span class="line" data-startTime="1824">So we created two lists </span><span class="line" data-startTime="1824">for you here. </span> <span class="line" data-startTime="1827">In main, the first one, </span><span class="line" data-startTime="1827">is just a list </span><span class="line" data-startTime="1830">without a generic parameter. </span> <span class="line" data-startTime="1833">And in that list you can add </span><span class="line" data-startTime="1833">any update you have. </span> <span class="line" data-startTime="1837">The second one is a </span><span class="line" data-startTime="1837">list of points. </span></p>

<p><span class="line" data-startTime="1839">You can pass the optional </span><span class="line" data-startTime="1839">parameter linked to it. </span> <span class="line" data-startTime="1844">So we'll get a list of 12 </span><span class="line" data-startTime="1844">elements, and you can only add </span><span class="line" data-startTime="1849">points to it. </span></p>

<p class="speaker"><span class="line" data-starttime="1851"><span class="speakerName">Kasper Lund</span>: So if you look at </span><span class="line" data-startTime="1851">the list constructor up in the </span><span class="line" data-startTime="1853">interface, that square bracket </span><span class="line" data-startTime="1853">notation means that that </span><span class="line" data-startTime="1857">parameter is optional. </span><span class="line" data-startTime="1858">It can be provided by </span><span class="line" data-startTime="1858">the caller, and </span><span class="line" data-startTime="1859">it can not be provided. </span><span class="line" data-startTime="1863">The default implementation gets </span><span class="line" data-startTime="1863">to decide what to do it </span><span class="line" data-startTime="1865">it's not provided, and in this </span><span class="line" data-startTime="1865">case it just initializes the </span><span class="line" data-startTime="1867">list with zero elements and </span><span class="line" data-startTime="1867">you get to add your stuff </span><span class="line" data-startTime="1870">afterwards. </span><span class="line" data-startTime="1871">But it's a nice thing that you </span><span class="line" data-startTime="1871">can specify in the interface, </span><span class="line" data-startTime="1875">that the intent is that you can </span><span class="line" data-startTime="1875">provide this if you want </span><span class="line" data-startTime="1877">to, or you may not want to do </span><span class="line" data-startTime="1877">that and you get the default </span><span class="line" data-startTime="1879">behavior instead. </span><span class="line" data-startTime="1881">So that's another language </span><span class="line" data-startTime="1881">feature on the same slide. </span><span class="line" data-startTime="1883">Like two in one. </span></p>

<p class="speaker"><span class="line" data-starttime="1886"><span class="speakerName">Lars Bak</span>: Next one is </span><span class="line" data-startTime="1886">cascaded calls. </span><span class="line" data-startTime="1888">How many of you have </span><span class="line" data-startTime="1888">used Smalltalk? </span></p>

<p class="speaker"><span class="line" data-starttime="1891"><span class="speakerName">Kasper Lund</span>: Wow. </span></p>

<p class="speaker"><span class="line" data-starttime="1892"><span class="speakerName">Lars Bak</span>: Out of the five, </span><span class="line" data-startTime="1892">how many like cascaded </span><span class="line" data-startTime="1896">[? sends? ?] </span><span class="line" data-startTime="1897">Nobody? </span><span class="line" data-startTime="1898">Anyways, we have added </span><span class="line" data-startTime="1898">cascaded [? sends. ?] </span><span class="line" data-startTime="1902">I'm a true believer in them. </span> <span class="line" data-startTime="1903">So it basically means we have a </span><span class="line" data-startTime="1903">construct that allows you to </span><span class="line" data-startTime="1908">do multiple calls on </span><span class="line" data-startTime="1908">the same object. </span> <span class="line" data-startTime="1911">Here's an example where you </span><span class="line" data-startTime="1911">want to draw a circle. </span> <span class="line" data-startTime="1915">You get the canvas, the </span><span class="line" data-startTime="1915">x- and y-coordinates, </span><span class="line" data-startTime="1917">and the size in. </span> <span class="line" data-startTime="1919">And you first compute the </span><span class="line" data-startTime="1919">context from the canvas, and </span><span class="line" data-startTime="1924">then you want to do a </span><span class="line" data-startTime="1924">number of calls on </span><span class="line" data-startTime="1928">that object, the context. </span> <span class="line" data-startTime="1930">And this is how it's </span><span class="line" data-startTime="1930">done in Dart. </span> <span class="line" data-startTime="1932">You use the dot dot notation, </span><span class="line" data-startTime="1932">and it means that you first </span><span class="line" data-startTime="1935">call beginPath on the context, </span><span class="line" data-startTime="1935">then arc, then fill, then </span><span class="line" data-startTime="1939">closePath, and then stroke. </span></p>

<p><span class="line" data-startTime="1941">It's just a simple way to avoid </span><span class="line" data-startTime="1941">introducing yet another </span><span class="line" data-startTime="1944">local variable. </span></p>

<p class="speaker"><span class="line" data-starttime="1948"><span class="speakerName">Kasper Lund</span>: It also gives us </span><span class="line" data-startTime="1948">great typing information. </span><span class="line" data-startTime="1950">So if you have a canvas out of </span><span class="line" data-startTime="1950">context and that is typed in </span><span class="line" data-startTime="1954">the definition of the canvas, </span><span class="line" data-startTime="1954">the system will know and be </span><span class="line" data-startTime="1958">able to give you code completion </span><span class="line" data-startTime="1958">suggestions when </span><span class="line" data-startTime="1961">you're doing these </span><span class="line" data-startTime="1961">cascaded things. </span><span class="line" data-startTime="1963">So it helps, at least if the </span><span class="line" data-startTime="1963">alternative was to do a bar </span><span class="line" data-startTime="1968">declaration, and have </span><span class="line" data-startTime="1968">to go through all </span><span class="line" data-startTime="1970">the things with that. </span><span class="line" data-startTime="1970">So this is shorter, and </span><span class="line" data-startTime="1970">nicer in many ways. </span></p>

<p class="speaker"><span class="line" data-starttime="1976"><span class="speakerName">Lars Bak</span>: Here's </span><span class="line" data-startTime="1976">another thing. </span> <span class="line" data-startTime="1979">This illustrates how we do </span><span class="line" data-startTime="1979">proper capturing of loop </span><span class="line" data-startTime="1982">variables in Dart. </span> <span class="line" data-startTime="1985">Here's a function called main. </span> <span class="line" data-startTime="1987">It has a list called closures. </span> <span class="line" data-startTime="1990">And we have a for loop from zero </span><span class="line" data-startTime="1990">to eight, where we add a </span><span class="line" data-startTime="1996">closure each time you </span><span class="line" data-startTime="1996">execute the loop. </span> <span class="line" data-startTime="1999">And in this case here, it's just </span><span class="line" data-startTime="1999">a function that returns </span><span class="line" data-startTime="2005">the [? count of variable ?] i. </span> <span class="line" data-startTime="2007">In most languages what happens </span><span class="line" data-startTime="2007">if you execute this code as </span><span class="line" data-startTime="2010">specified &mdash; </span><span class="line" data-startTime="2011">by the way, at the end here </span><span class="line" data-startTime="2011">we go through the list of </span><span class="line" data-startTime="2014">closures, and then evaluate </span><span class="line" data-startTime="2014">the closure </span><span class="line" data-startTime="2016">and print the result. </span> <span class="line" data-startTime="2018">If you do that in C# or in </span><span class="line" data-startTime="2018">JavaScript, you'll get a </span><span class="line" data-startTime="2022">number of eights out, because </span><span class="line" data-startTime="2022">all the closures were referred </span><span class="line" data-startTime="2025">to the same loop variable. </span></p>

<p><span class="line" data-startTime="2028">In Dart it's different. </span> <span class="line" data-startTime="2030">In Dart, you'll introduce a new </span><span class="line" data-startTime="2030">loop variable each time </span><span class="line" data-startTime="2034">you enter the loop. </span> <span class="line" data-startTime="2035">So in Dart, you'll see the </span><span class="line" data-startTime="2035">results 1, 2, 3, 4, 5, 6, 7. </span> <span class="line" data-startTime="2042">And this is a common mistake </span><span class="line" data-startTime="2042">when you use closures for </span><span class="line" data-startTime="2045">programming. </span></p>

<p class="speaker"><span class="line" data-starttime="2046"><span class="speakerName">Kasper Lund</span>: We have a number </span><span class="line" data-startTime="2046">of examples from JavaScript, </span><span class="line" data-startTime="2048">again, where we see people </span><span class="line" data-startTime="2048">using asynchronous API. </span><span class="line" data-startTime="2052">And they have to be very careful </span><span class="line" data-startTime="2052">to capture the right </span><span class="line" data-startTime="2054">variables and the </span><span class="line" data-startTime="2054">right values. </span><span class="line" data-startTime="2056">So there's a lot of small </span><span class="line" data-startTime="2056">mistakes in that, and you see </span><span class="line" data-startTime="2059">a lot of weird things </span><span class="line" data-startTime="2059">going on with that. </span><span class="line" data-startTime="2061">So we decided to try to fix </span><span class="line" data-startTime="2061">that, and make it simpler for </span><span class="line" data-startTime="2063">programmers to reason </span><span class="line" data-startTime="2063">about this. </span></p>

<p class="speaker"><span class="line" data-starttime="2069"><span class="speakerName">Lars Bak</span>: So to us Dart is </span><span class="line" data-startTime="2069">beautiful, even though we took </span><span class="line" data-startTime="2073">most of the components </span><span class="line" data-startTime="2073">and curly </span><span class="line" data-startTime="2075">braces from other languages. </span><span class="line" data-startTime="2079">It's declarative, so we think </span><span class="line" data-startTime="2079">it's easy to read. </span><span class="line" data-startTime="2082">And it's certainly toolable. </span><span class="line" data-startTime="2084">We don't do any implicit </span><span class="line" data-startTime="2084">conversion, so the semantics </span><span class="line" data-startTime="2087">is fairly straightforward. </span><span class="line" data-startTime="2089">And the libraries are actually </span><span class="line" data-startTime="2089">read-only, so we can have </span><span class="line" data-startTime="2093">composable component and it </span><span class="line" data-startTime="2093">works, and you can rely on it. </span><span class="line" data-startTime="2098">And again, if you're used to </span><span class="line" data-startTime="2098">Java, C# or JavaScript, other </span><span class="line" data-startTime="2105">languages with curly braces, </span><span class="line" data-startTime="2105">this should be easy. </span></p>

<p class="speaker"><span class="line" data-starttime="2111"><span class="speakerName">Kasper Lund</span>: So the Dart </span><span class="line" data-startTime="2111">language is, of course, a big </span><span class="line" data-startTime="2115">part of this project. </span> <span class="line" data-startTime="2116">But there is more to it. </span> <span class="line" data-startTime="2117">So let me give you a brief </span><span class="line" data-startTime="2117">tour of what we're doing. </span> <span class="line" data-startTime="2120">Language is only part </span><span class="line" data-startTime="2120">of the story. </span> <span class="line" data-startTime="2123">If you want to have a great web </span><span class="line" data-startTime="2123">development platform, that </span><span class="line" data-startTime="2127">entire platform has to be </span><span class="line" data-startTime="2127">well-tuned for helping you </span><span class="line" data-startTime="2130">guys to deliver fantastic </span><span class="line" data-startTime="2130">apps. </span> <span class="line" data-startTime="2132">So developers need a great new </span><span class="line" data-startTime="2132">language, and we've tried to </span><span class="line" data-startTime="2135">argue why Dart is that </span><span class="line" data-startTime="2135">new language. </span> <span class="line" data-startTime="2137">But you also need really fast </span><span class="line" data-startTime="2137">execution, and really fast </span><span class="line" data-startTime="2141">startup applications. </span> <span class="line" data-startTime="2142">And you need very good tools for </span><span class="line" data-startTime="2142">developing your apps and </span><span class="line" data-startTime="2145">for analyzing your apps. </span></p>

<p><span class="line" data-startTime="2148">It's also very important that </span><span class="line" data-startTime="2148">you get very good integration </span><span class="line" data-startTime="2150">with the DOM. </span> <span class="line" data-startTime="2153">As developers you need </span><span class="line" data-startTime="2153">all of this. </span> <span class="line" data-startTime="2155">So the Dart project is not just </span><span class="line" data-startTime="2155">about the language, it's </span><span class="line" data-startTime="2159">also about innovating on the </span><span class="line" data-startTime="2159">tool side, and it's also about </span><span class="line" data-startTime="2164">giving you access to much </span><span class="line" data-startTime="2164">better and much more </span><span class="line" data-startTime="2167">predictable performance. </span></p>

<p class="speaker"><span class="line" data-starttime="2172"><span class="speakerName">Lars Bak</span>: Because we have </span><span class="line" data-startTime="2172">decided to make Dart run on </span><span class="line" data-startTime="2176">existing platforms, we have </span><span class="line" data-startTime="2176">a little bit complicated </span><span class="line" data-startTime="2178">deployment story for Dart. </span> <span class="line" data-startTime="2180">And I'll try to go </span><span class="line" data-startTime="2180">through it here. </span> <span class="line" data-startTime="2182">So the green stuff at </span><span class="line" data-startTime="2182">the top is your </span><span class="line" data-startTime="2184">application, plus libraries. </span> <span class="line" data-startTime="2187">And you have a few </span><span class="line" data-startTime="2187">choices here. </span> <span class="line" data-startTime="2188">You can run it directly on that </span><span class="line" data-startTime="2188">Dartium build, which you </span><span class="line" data-startTime="2191">saw Kasper demo before, and </span><span class="line" data-startTime="2191">it will run right away. </span> <span class="line" data-startTime="2195">But you can also process </span><span class="line" data-startTime="2195">the application </span><span class="line" data-startTime="2197">library through tools. </span> <span class="line" data-startTime="2199">One tool is the Dart to JS </span><span class="line" data-startTime="2199">compiler, which will translate </span><span class="line" data-startTime="2202">Dart into one single </span><span class="line" data-startTime="2202">JavaScript file. </span> <span class="line" data-startTime="2206">And then you can run it </span><span class="line" data-startTime="2206">in any modern browser. </span> <span class="line" data-startTime="2209">This is the part where you </span><span class="line" data-startTime="2209">should be happy we're not </span><span class="line" data-startTime="2211">trying to break the web. </span> <span class="line" data-startTime="2215">Another tool we have is we can </span><span class="line" data-startTime="2215">convert an application, plus </span><span class="line" data-startTime="2219">libraries, into a snapshot. </span></p>

<p><span class="line" data-startTime="2222">And a snapshot is a serialized </span><span class="line" data-startTime="2222">form of the data structure </span><span class="line" data-startTime="2225">that makes applications </span><span class="line" data-startTime="2225">start up much faster. </span> <span class="line" data-startTime="2228">I'll get back to that </span><span class="line" data-startTime="2228">in two slides. </span></p>

<p class="speaker"><span class="line" data-starttime="2233"><span class="speakerName">Kasper Lund</span>: This is actually </span><span class="line" data-startTime="2233">a really important point, I </span><span class="line" data-startTime="2236">think I want to make it again. </span> <span class="line" data-startTime="2237">Lars already said it. </span> <span class="line" data-startTime="2238">Dart is compatible with </span><span class="line" data-startTime="2238">all modern browsers. </span> <span class="line" data-startTime="2241">So this is just a small cut-out </span><span class="line" data-startTime="2241">of the Buildbot we </span><span class="line" data-startTime="2246">have running on </span><span class="line" data-startTime="2246">buildbot.dartlang.org. </span> <span class="line" data-startTime="2249">And it shows us testing Dart </span><span class="line" data-startTime="2249">across Firefox, Chrome, </span><span class="line" data-startTime="2253">Safari, IE and Opera. </span> <span class="line" data-startTime="2256">This is actually just an </span><span class="line" data-startTime="2256">indication that we take this </span><span class="line" data-startTime="2258">compatibility issue </span><span class="line" data-startTime="2258">very seriously. </span> <span class="line" data-startTime="2261">It's very dear to our hearts </span><span class="line" data-startTime="2261">to have Dart running really </span><span class="line" data-startTime="2264">well across all modern </span><span class="line" data-startTime="2264">browsers. </span> <span class="line" data-startTime="2266">All the browsers here do not </span><span class="line" data-startTime="2266">have Dart VMs built in, so </span><span class="line" data-startTime="2270">here we're using the Dart to </span><span class="line" data-startTime="2270">JavaScript translation. </span></p>

<p><span class="line" data-startTime="2273">And we make that work across </span><span class="line" data-startTime="2273">all these browsers. </span> <span class="line" data-startTime="2275">And we continue to do that and </span><span class="line" data-startTime="2275">keep that part running. </span> <span class="line" data-startTime="2282">Let me just spend a few moments </span><span class="line" data-startTime="2282">on telling you about </span><span class="line" data-startTime="2284">the translation process. </span> <span class="line" data-startTime="2286">We do have a compiler that </span><span class="line" data-startTime="2286">translates Dart to JavaScript. </span> <span class="line" data-startTime="2288">It's written in Dart itself. </span> <span class="line" data-startTime="2291">That gives us a nice excuse </span><span class="line" data-startTime="2291">for using Dart </span><span class="line" data-startTime="2295">as a language ourselves. </span> <span class="line" data-startTime="2297">And it also means that </span><span class="line" data-startTime="2297">we can compile Dart &mdash; </span><span class="line" data-startTime="2299">through Dart to JS compiler &mdash; </span><span class="line" data-startTime="2301">with itself, and get a compiler </span><span class="line" data-startTime="2301">out that actually can </span><span class="line" data-startTime="2304">compile Dart to JavaScript, </span><span class="line" data-startTime="2304">that runs </span><span class="line" data-startTime="2306">in any modern browser. </span> <span class="line" data-startTime="2308">That's maybe kind of freaky, </span><span class="line" data-startTime="2308">but it works really well. </span> <span class="line" data-startTime="2311">You can have a JavaScript </span><span class="line" data-startTime="2311">implementation of a Dart to </span><span class="line" data-startTime="2314">JavaScript compiler by just </span><span class="line" data-startTime="2314">compiling it with itself. </span> <span class="line" data-startTime="2317">I like that stuff. </span></p>

<p class="speaker"><span class="line" data-starttime="2318"><span class="speakerName">Lars Bak</span>: Maybe it'll go </span><span class="line" data-startTime="2318">to [? reflector ?] now. </span></p>

<p class="speaker"><span class="line" data-starttime="2320"><span class="speakerName">Kasper Lund</span>: So let's get </span><span class="line" data-startTime="2320">back to something more </span><span class="line" data-startTime="2322">down-to-earth. </span> <span class="line" data-startTime="2323">Here's a, I think </span><span class="line" data-startTime="2323">at this point, </span><span class="line" data-startTime="2325">very well-known example. </span> <span class="line" data-startTime="2327">The point, with two fields, </span><span class="line" data-startTime="2327">x and y, and a </span><span class="line" data-startTime="2330">constructor and a to string. </span> <span class="line" data-startTime="2331">And it translates to something </span><span class="line" data-startTime="2331">like this on the JavaScript. </span> <span class="line" data-startTime="2333">That's the right hand side. </span> <span class="line" data-startTime="2336">We create a structure, give it </span><span class="line" data-startTime="2336">an endpoint, and we fill in an </span><span class="line" data-startTime="2340">explicit superclass, object in </span><span class="line" data-startTime="2340">this case, and put in a couple </span><span class="line" data-startTime="2343">fields, x and y. </span> <span class="line" data-startTime="2344">And then we have a small piece </span><span class="line" data-startTime="2344">of code that actually </span><span class="line" data-startTime="2347">translates this to JavaScript </span><span class="line" data-startTime="2347">instructor at runtime, and </span><span class="line" data-startTime="2351">puts in the getters and setters </span><span class="line" data-startTime="2351">for these fields, and </span><span class="line" data-startTime="2353">it makes it nice to work with. </span> <span class="line" data-startTime="2354">But the rest of the definition </span><span class="line" data-startTime="2354">of point is </span><span class="line" data-startTime="2356">actually just the methods. </span></p>

<p><span class="line" data-startTime="2358">So here you see the to string </span><span class="line" data-startTime="2358">method is being translated to </span><span class="line" data-startTime="2361">a JavaScript to string method, </span><span class="line" data-startTime="2361">with a dollar zero at the end. </span> <span class="line" data-startTime="2364">That just means that </span><span class="line" data-startTime="2364">that function </span><span class="line" data-startTime="2365">expects zero arguments. </span> <span class="line" data-startTime="2367">It's important for us to make </span><span class="line" data-startTime="2367">sure that these functions that </span><span class="line" data-startTime="2370">you call get the expected number </span><span class="line" data-startTime="2370">of arguments, so you </span><span class="line" data-startTime="2372">don't have this classical issue </span><span class="line" data-startTime="2372">in JavaScript where you </span><span class="line" data-startTime="2375">forget to provide a parameter, </span><span class="line" data-startTime="2375">and it just kind of </span><span class="line" data-startTime="2378">works in a weird way. </span> <span class="line" data-startTime="2379">The to string method on the </span><span class="line" data-startTime="2379">right is a bit more verbose </span><span class="line" data-startTime="2381">than the one on the left. </span> <span class="line" data-startTime="2383">And that's because of the string </span><span class="line" data-startTime="2383">interpolation feature, </span><span class="line" data-startTime="2385">where we will make it very, very </span><span class="line" data-startTime="2385">easy to convert strings, </span><span class="line" data-startTime="2390">and bits and pieces of </span><span class="line" data-startTime="2390">expressions and code, to join </span><span class="line" data-startTime="2395">them as strings. </span></p>

<p><span class="line" data-startTime="2396">And you see here it's translated </span><span class="line" data-startTime="2396">into a couple of </span><span class="line" data-startTime="2399">string concatenation </span><span class="line" data-startTime="2399">operations. </span> <span class="line" data-startTime="2401">So we'll do this for you, and </span><span class="line" data-startTime="2401">this code runs across all </span><span class="line" data-startTime="2404">modern browsers. </span></p>

<p class="speaker"><span class="line" data-starttime="2406"><span class="speakerName">Lars Bak</span>: We have to speed </span><span class="line" data-startTime="2406">up a little bit, I think. </span><span class="line" data-startTime="2410">Anyways. </span><span class="line" data-startTime="2411">One cool thing about Dart is </span><span class="line" data-startTime="2411">that because it is declarative </span><span class="line" data-startTime="2414">we can do something called </span><span class="line" data-startTime="2414">tree shaking. </span><span class="line" data-startTime="2417">And tree shaking is this </span><span class="line" data-startTime="2417">pre-deployment step that </span><span class="line" data-startTime="2419">allows you to reduce the </span><span class="line" data-startTime="2419">size of the executable. </span><span class="line" data-startTime="2423">And what it basically means </span><span class="line" data-startTime="2423">is that you take the main </span><span class="line" data-startTime="2425">function and you start </span><span class="line" data-startTime="2425">shaking it. </span><span class="line" data-startTime="2428">Everything that you're not using </span><span class="line" data-startTime="2428">will fall off the tree, </span><span class="line" data-startTime="2432">and when you're done you can </span><span class="line" data-startTime="2432">wrap it up, and that's your </span><span class="line" data-startTime="2434">application. </span><span class="line" data-startTime="2436">So unused classes and unused </span><span class="line" data-startTime="2436">methods will be eliminated. </span><span class="line" data-startTime="2441">And the application is just </span><span class="line" data-startTime="2441">penalized for what it's using, </span><span class="line" data-startTime="2445">compared to what's being </span><span class="line" data-startTime="2445">included in libraries. </span><span class="line" data-startTime="2449">And this is great because it </span><span class="line" data-startTime="2449">helps the download time of the </span><span class="line" data-startTime="2453">application, and also helps </span><span class="line" data-startTime="2453">the startup time. </span></p>

<p class="speaker"><span class="line" data-starttime="2456"><span class="speakerName">Kasper Lund</span>: It also means that </span><span class="line" data-startTime="2456">you can depend on a big </span><span class="line" data-startTime="2457">library, and you only pay for </span><span class="line" data-startTime="2457">the small pieces of it you </span><span class="line" data-startTime="2460">actually use. </span></p>

<p class="speaker"><span class="line" data-starttime="2461"><span class="speakerName">Lars Bak</span>: You cannot do </span><span class="line" data-startTime="2461">that in JavaScript. </span> <span class="line" data-startTime="2463">Why? </span><span class="line" data-startTime="2463">Well, because there's a val. </span> <span class="line" data-startTime="2465">Val is a thing that </span><span class="line" data-startTime="2465">takes a string and </span><span class="line" data-startTime="2467">converts it into code. </span> <span class="line" data-startTime="2469">So you cannot analyze </span><span class="line" data-startTime="2469">it statically. </span> <span class="line" data-startTime="2472">The second one is, it also has </span><span class="line" data-startTime="2472">the with statement that </span><span class="line" data-startTime="2475">introduces [? voodoo, ?] </span><span class="line" data-startTime="2476">scoping. </span> <span class="line" data-startTime="2477">You basically have no chance of </span><span class="line" data-startTime="2477">figuring out what's being </span><span class="line" data-startTime="2479">accessed in the outer scope. </span> <span class="line" data-startTime="2482">So that's much easier in Dart, </span><span class="line" data-startTime="2482">and that is what clear </span><span class="line" data-startTime="2486">semantics will give you. </span> <span class="line" data-startTime="2489">Tree shaking is already used by </span><span class="line" data-startTime="2489">dart2js today, and clearly </span><span class="line" data-startTime="2492">reduces the size of the app, </span><span class="line" data-startTime="2492">and also improves startup. </span> <span class="line" data-startTime="2497">We are in the process of also </span><span class="line" data-startTime="2497">working on a tool that takes </span><span class="line" data-startTime="2500">Dart code, tree shakes it, </span><span class="line" data-startTime="2500">and emits Dart code. </span> <span class="line" data-startTime="2504">So the Dart code itself will </span><span class="line" data-startTime="2504">be easier to start up. </span></p>

<p><span class="line" data-startTime="2507">And that will be based on the </span><span class="line" data-startTime="2507">same infrastructure as the </span><span class="line" data-startTime="2509">Dart to JS compiler. </span></p>

<p class="speaker"><span class="line" data-starttime="2511"><span class="speakerName">Kasper Lund</span>: Shaken, </span><span class="line" data-startTime="2511">not stirred. </span><span class="line" data-startTime="2514">That's the motto. </span></p>

<p class="speaker"><span class="line" data-starttime="2514"><span class="speakerName">Lars Bak</span>: Yes, James. </span> <span class="line" data-startTime="2518">Another thing that should be </span><span class="line" data-startTime="2518">really cool and is already </span><span class="line" data-startTime="2522">implemented in the Dart VM </span><span class="line" data-startTime="2522">is the Dart snapshots. </span> <span class="line" data-startTime="2525">And it's a binary form of the </span><span class="line" data-startTime="2525">entire Dart application. </span> <span class="line" data-startTime="2531">And our measurements so far </span><span class="line" data-startTime="2531">means that you get a 10x </span><span class="line" data-startTime="2534">speedup compared to sourcing </span><span class="line" data-startTime="2534">in the application before </span><span class="line" data-startTime="2537">starting up. </span> <span class="line" data-startTime="2539">And that's fantastic, because </span><span class="line" data-startTime="2539">that means that instead of </span><span class="line" data-startTime="2541">having a one second startup, </span><span class="line" data-startTime="2541">you get down below 100 </span><span class="line" data-startTime="2545">milliseconds to start </span><span class="line" data-startTime="2545">up the application. </span></p>

<p><span class="line" data-startTime="2548">And it's very simple. </span> <span class="line" data-startTime="2550">If you do the VM the right way, </span><span class="line" data-startTime="2550">you can just load the </span><span class="line" data-startTime="2553">application into the heap, and </span><span class="line" data-startTime="2553">then you serialize the heap </span><span class="line" data-startTime="2558">into a binary format. </span> <span class="line" data-startTime="2560">Very simple. </span> <span class="line" data-startTime="2561">And it's really, really </span><span class="line" data-startTime="2561">efficient when </span><span class="line" data-startTime="2563">you start up again. </span> <span class="line" data-startTime="2564">What benefits you is you don't </span><span class="line" data-startTime="2564">have to do scanning and </span><span class="line" data-startTime="2567">parsing of the source code. </span> <span class="line" data-startTime="2570">And also, on mobile devices, </span><span class="line" data-startTime="2570">you don't have to spend as </span><span class="line" data-startTime="2573">much CPU resources in loading </span><span class="line" data-startTime="2573">in the application, because </span><span class="line" data-startTime="2578">it's just a matter of </span><span class="line" data-startTime="2578">deserializing the heap. </span> <span class="line" data-startTime="2583">All right. </span></p>

<p class="speaker"><span class="line" data-starttime="2583"><span class="speakerName">Kasper Lund</span>: It's important to </span><span class="line" data-startTime="2583">notice that this binary form </span><span class="line" data-startTime="2585">is completely </span><span class="line" data-startTime="2585">platform-independent. </span> <span class="line" data-startTime="2587">It's the same thing you would </span><span class="line" data-startTime="2587">ship to a mobile device, that </span><span class="line" data-startTime="2589">you would ship to the desktop. </span> <span class="line" data-startTime="2591">Even if it's like a 64-bit and </span><span class="line" data-startTime="2591">a 32-bit machine involved, </span><span class="line" data-startTime="2594">it's the same format. </span> <span class="line" data-startTime="2595">So it's not about doing </span><span class="line" data-startTime="2595">a per-target </span><span class="line" data-startTime="2597">compilation of any sort. </span> <span class="line" data-startTime="2598">This is just a binary form of </span><span class="line" data-startTime="2598">the source code, essentially. </span></p>

<p class="speaker"><span class="line" data-starttime="2601"><span class="speakerName">Lars Bak</span>: It doesn't contain </span><span class="line" data-startTime="2601">any generic code. </span> <span class="line" data-startTime="2604">And it can handle going from a </span><span class="line" data-startTime="2604">32-bit machine to a 64-bit </span><span class="line" data-startTime="2610">machine, if you want </span><span class="line" data-startTime="2610">to do that. </span> <span class="line" data-startTime="2613">All right. </span> <span class="line" data-startTime="2614">Now. </span> <span class="line" data-startTime="2616">Let's talk about the future. </span> <span class="line" data-startTime="2624">One important part of this </span><span class="line" data-startTime="2624">project is to design a new </span><span class="line" data-startTime="2626">programming language. </span> <span class="line" data-startTime="2627">And we are pretty much done </span><span class="line" data-startTime="2627">with that design process. </span> <span class="line" data-startTime="2631">We have a form of specification </span><span class="line" data-startTime="2631">made. </span> <span class="line" data-startTime="2635">You can download it and read it </span><span class="line" data-startTime="2635">if you want to, with a few </span><span class="line" data-startTime="2638">exceptions. </span></p>

<p><span class="line" data-startTime="2640">We have a few things </span><span class="line" data-startTime="2640">we will put in. </span> <span class="line" data-startTime="2642">One is we will probably </span><span class="line" data-startTime="2642">eliminate interfaces, because </span><span class="line" data-startTime="2647">we also have abstract classes, </span><span class="line" data-startTime="2647">and they work </span><span class="line" data-startTime="2649">exactly the same way. </span> <span class="line" data-startTime="2650">So these have just simplified </span><span class="line" data-startTime="2650">the language. </span> <span class="line" data-startTime="2654">We'll also introduce mixins, </span><span class="line" data-startTime="2654">which allow you to do </span><span class="line" data-startTime="2657">co-sharing across inheritance </span><span class="line" data-startTime="2657">hierarchies. </span> <span class="line" data-startTime="2662">That'll come in after </span><span class="line" data-startTime="2662">version one of Dart. </span> <span class="line" data-startTime="2666">And then of course we'll have </span><span class="line" data-startTime="2666">some support for annotations, </span><span class="line" data-startTime="2669">because most IDEs say they </span><span class="line" data-startTime="2669">want annotations. </span> <span class="line" data-startTime="2673">Java programmers want </span><span class="line" data-startTime="2673">annotations. </span> <span class="line" data-startTime="2676">So that's how it is. </span> <span class="line" data-startTime="2678">But anyway. </span> <span class="line" data-startTime="2678">You should look at the </span><span class="line" data-startTime="2678">specification. </span> <span class="line" data-startTime="2680">It's pretty much done, and </span><span class="line" data-startTime="2680">I hope you like it. </span> <span class="line" data-startTime="2682">Otherwise send us comments. </span> <span class="line" data-startTime="2685">So this is our timeline </span><span class="line" data-startTime="2685">we have on the </span><span class="line" data-startTime="2688">whiteboard in Denmark. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2690"><span class="speakerName">Kasper Lund</span>: As you can tell, </span><span class="line" data-startTime="2690">up to 2009 we were busy </span><span class="line" data-startTime="2693">hacking on JavaScript, </span><span class="line" data-startTime="2693">making that faster. </span><span class="line" data-startTime="2695">And at some point Lars and I </span><span class="line" data-startTime="2695">decided to try to do something </span><span class="line" data-startTime="2699">a bit simpler than that. </span><span class="line" data-startTime="2700">We called that Spot, and </span><span class="line" data-startTime="2700">that was in 2010. </span><span class="line" data-startTime="2702">And we spent three months on </span><span class="line" data-startTime="2702">hacking up this new virtual </span><span class="line" data-startTime="2707">machine, a new programming </span><span class="line" data-startTime="2707">language, and </span><span class="line" data-startTime="2708">a new set of libraries. </span><span class="line" data-startTime="2709">And that was a lot of fun. </span><span class="line" data-startTime="2711">At some point it was so </span><span class="line" data-startTime="2711">promising that we decided to </span><span class="line" data-startTime="2714">turn it into a real project, and </span><span class="line" data-startTime="2714">it got re-branded to Dart. </span><span class="line" data-startTime="2719">And that's where we're at now. </span><span class="line" data-startTime="2721">So in 2011 we introduced Dart </span><span class="line" data-startTime="2721">as a technology preview, and </span><span class="line" data-startTime="2726">we've been getting a </span><span class="line" data-startTime="2726">lot of very good </span><span class="line" data-startTime="2728">feedback from that process. </span><span class="line" data-startTime="2730">So this here is all about making </span><span class="line" data-startTime="2730">Dart robust and really, </span><span class="line" data-startTime="2734">really fast. </span><span class="line" data-startTime="2736">And next year? </span></p>

<p class="speaker"><span class="line" data-starttime="2739"><span class="speakerName">Lars Bak</span>: Success. </span></p>

<p class="speaker"><span class="line" data-starttime="2741"><span class="speakerName">Kasper Lund</span>: That will do. </span></p>

<p class="speaker"><span class="line" data-starttime="2745"><span class="speakerName">Lars Bak</span>: So what we're working </span><span class="line" data-startTime="2745">on hard today is to </span><span class="line" data-startTime="2750">make sure that you have a </span><span class="line" data-startTime="2750">developer release in your </span><span class="line" data-startTime="2752">hands later this year, so you </span><span class="line" data-startTime="2752">can start relying on the </span><span class="line" data-startTime="2756">libraries, the performance </span><span class="line" data-startTime="2756">of Dart, and building </span><span class="line" data-startTime="2759">applications on top of it. </span> <span class="line" data-startTime="2762">The release will include </span><span class="line" data-startTime="2762">the language &mdash; </span><span class="line" data-startTime="2764">fixed, hopefully, for </span><span class="line" data-startTime="2764">the first version &mdash; </span><span class="line" data-startTime="2768">libraries for the web and server </span><span class="line" data-startTime="2768">development, so you can </span><span class="line" data-startTime="2770">also write Dart applications </span><span class="line" data-startTime="2770">on the server side. </span></p>

<p><span class="line" data-startTime="2774">We have a programming </span><span class="line" data-startTime="2774">environment. </span> <span class="line" data-startTime="2776">So some of it is based </span><span class="line" data-startTime="2776">on Eclipse. </span> <span class="line" data-startTime="2780">And we also have a standalone </span><span class="line" data-startTime="2780">virtual machine, that's also </span><span class="line" data-startTime="2784">been integrated into </span><span class="line" data-startTime="2784">the Chromium build. </span> <span class="line" data-startTime="2786">And that was the Dartium browser </span><span class="line" data-startTime="2786">you saw in the demo. </span> <span class="line" data-startTime="2790">And then we have this translator </span><span class="line" data-startTime="2790">to JavaScript that </span><span class="line" data-startTime="2793">allows us to be compatible </span><span class="line" data-startTime="2793">with most browsers. </span> <span class="line" data-startTime="2797">So this is exciting. </span></p>

<p class="speaker"><span class="line" data-starttime="2801"><span class="speakerName">Kasper Lund</span>: So in addition to </span><span class="line" data-startTime="2801">all that, Dart is already now, </span><span class="line" data-startTime="2805">and will remain, a fully open </span><span class="line" data-startTime="2805">source product here. </span> <span class="line" data-startTime="2808">Dart is available under a very </span><span class="line" data-startTime="2808">permissive BSD license. </span> <span class="line" data-startTime="2812">So if you want to take it, </span><span class="line" data-startTime="2812">run with it, use it for </span><span class="line" data-startTime="2813">something, have fun. </span> <span class="line" data-startTime="2816">The entire idea is to try to </span><span class="line" data-startTime="2816">foster innovation in this </span><span class="line" data-startTime="2818">space, so it makes a lot of </span><span class="line" data-startTime="2818">sense for us to just put all </span><span class="line" data-startTime="2821">the bits and pieces out there, </span><span class="line" data-startTime="2821">and have a community based </span><span class="line" data-startTime="2824">around that. </span> <span class="line" data-startTime="2825">It's developed in the open. </span> <span class="line" data-startTime="2827">All our code reviews are on </span><span class="line" data-startTime="2827">public mailing lists, and all </span><span class="line" data-startTime="2829">the build bots are for </span><span class="line" data-startTime="2829">everybody to see. </span> <span class="line" data-startTime="2832">It makes it much easier for us </span><span class="line" data-startTime="2832">to interact with members of </span><span class="line" data-startTime="2836">the community that have good </span><span class="line" data-startTime="2836">ideas or good feedback. </span> <span class="line" data-startTime="2839">Already now we have a fairly </span><span class="line" data-startTime="2839">active community, and we're </span><span class="line" data-startTime="2843">getting a lot of very helpful </span><span class="line" data-startTime="2843">and very good feedback on new </span><span class="line" data-startTime="2846">ideas that we circulate </span><span class="line" data-startTime="2846">on the mailing list. </span></p>

<p><span class="line" data-startTime="2848">So if you're interested in </span><span class="line" data-startTime="2848">joining in, or at least trying </span><span class="line" data-startTime="2852">it out, you should go to some </span><span class="line" data-startTime="2852">of the online resources we </span><span class="line" data-startTime="2854">have available. </span> <span class="line" data-startTime="2855">The primary site is </span><span class="line" data-startTime="2855">dartlang.org. </span> <span class="line" data-startTime="2858">And there you'll find a lot of </span><span class="line" data-startTime="2858">information about how to </span><span class="line" data-startTime="2861">download the SDK and the </span><span class="line" data-startTime="2861">editor, and try it out. </span> <span class="line" data-startTime="2864">So please try it out, continue </span><span class="line" data-startTime="2864">to give us good feedback. </span></p>

<p class="speaker"><span class="line" data-starttime="2869"><span class="speakerName">Lars Bak</span>: And one interesting </span><span class="line" data-startTime="2869">note is that since we released </span><span class="line" data-startTime="2871">it as a preview last fall, </span><span class="line" data-startTime="2871">we have had a few </span><span class="line" data-startTime="2877">changes to that platform. </span><span class="line" data-startTime="2879">There's now 9,000 revisions </span><span class="line" data-startTime="2879">since last fall. </span><span class="line" data-startTime="2882">So you can imagine that there's </span><span class="line" data-startTime="2882">a lot of change lists </span><span class="line" data-startTime="2884">coming out every day. </span><span class="line" data-startTime="2886">And we're really serious about </span><span class="line" data-startTime="2886">making this fast and </span><span class="line" data-startTime="2889">consistent. </span></p>

<p class="speaker"><span class="line" data-starttime="2890"><span class="speakerName">Kasper Lund</span>: It's fun to work </span><span class="line" data-startTime="2890">on a project like that, that </span><span class="line" data-startTime="2892">moves really quickly. </span> <span class="line" data-startTime="2893">And it's fun to see people </span><span class="line" data-startTime="2893">that use it being excited </span><span class="line" data-startTime="2896">about the new changes, and </span><span class="line" data-startTime="2896">adapting their existing code </span><span class="line" data-startTime="2900">bases to new, interesting </span><span class="line" data-startTime="2900">things that </span><span class="line" data-startTime="2902">pop up in the language. </span> <span class="line" data-startTime="2903">So it's been a fun process. </span> <span class="line" data-startTime="2907">So there's even more about </span><span class="line" data-startTime="2907">Dart at this Google IO. </span> <span class="line" data-startTime="2910">So this was a very sort of high </span><span class="line" data-startTime="2910">level presentation about </span><span class="line" data-startTime="2915">Dart, and the motivation </span><span class="line" data-startTime="2915">behind it. </span></p>

<p><span class="line" data-startTime="2916">If you're interested in more </span><span class="line" data-startTime="2916">details, I suggest you go to </span><span class="line" data-startTime="2920">the next talk, at 2:45 in Room </span><span class="line" data-startTime="2920">3, which is about building web </span><span class="line" data-startTime="2924">apps in Dart. </span> <span class="line" data-startTime="2925">And you'll get more hands-on </span><span class="line" data-startTime="2925">experience with what it is to </span><span class="line" data-startTime="2928">build something new and </span><span class="line" data-startTime="2928">exciting in Dart. </span> <span class="line" data-startTime="2930">There's also a talk about </span><span class="line" data-startTime="2930">migrating code that's written </span><span class="line" data-startTime="2933">in GWT to Dart in the </span><span class="line" data-startTime="2933">same room, Room 3. </span> <span class="line" data-startTime="2936">And during the entire afternoon </span><span class="line" data-startTime="2936">here, from now, </span><span class="line" data-startTime="2939">essentially, to fairly late, we </span><span class="line" data-startTime="2939">have Dart office hours on </span><span class="line" data-startTime="2942">the Chrome demo floor. </span> <span class="line" data-startTime="2943">So if you want to come chat with </span><span class="line" data-startTime="2943">us there, feel free to </span><span class="line" data-startTime="2946">drop by, and if you have </span><span class="line" data-startTime="2946">questions we'll be very happy </span><span class="line" data-startTime="2948">to try to answer them. </span> <span class="line" data-startTime="2950">Tomorrow, if you're really </span><span class="line" data-startTime="2950">Darty, you should go to our </span><span class="line" data-startTime="2955">Bullseye, Your First Dart App </span><span class="line" data-startTime="2955">code lab, where you'll get a </span><span class="line" data-startTime="2958">chance to do some hands-on work </span><span class="line" data-startTime="2958">with the environment and </span><span class="line" data-startTime="2961">the product. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2965"><span class="speakerName">Lars Bak</span>: And we are pretty </span><span class="line" data-startTime="2965">much at the end now. </span> <span class="line" data-startTime="2967">So this is a summary slide. </span> <span class="line" data-startTime="2969">I hope we managed to convince </span><span class="line" data-startTime="2969">you that Dart is a simple and </span><span class="line" data-startTime="2972">unsurprising object-oriented </span><span class="line" data-startTime="2972">language that </span><span class="line" data-startTime="2974">should be easy to use. </span> <span class="line" data-startTime="2977">And it allows you to write </span><span class="line" data-startTime="2977">structured code, and also </span><span class="line" data-startTime="2983">develop tools that can analyze </span><span class="line" data-startTime="2983">these programs. </span> <span class="line" data-startTime="2986">And it works on modern </span><span class="line" data-startTime="2986">browsers. </span> <span class="line" data-startTime="2988">So we've had a lot of experience </span><span class="line" data-startTime="2988">in implementing </span><span class="line" data-startTime="2991">virtual machines for various </span><span class="line" data-startTime="2991">object-oriented languages. </span></p>

<p><span class="line" data-startTime="2994">This is the first time we are </span><span class="line" data-startTime="2994">doing a new language, and it's </span><span class="line" data-startTime="2999">a challenge. </span> <span class="line" data-startTime="3000">But it's fun. </span> <span class="line" data-startTime="3001">So thank you for listening. </span> <span class="line" data-startTime="3003">And if you have any questions, </span><span class="line" data-startTime="3003">please line up in front of the </span><span class="line" data-startTime="3006">mics so we can capture </span><span class="line" data-startTime="3006">what you're asking. </span></p>

<p class="speaker"><span class="line" data-starttime="3010"><span class="speakerName">Kasper Lund</span>: Yeah, the final </span><span class="line" data-startTime="3010">thing here is to just make a </span><span class="line" data-startTime="3013">mental note of the fact that </span><span class="line" data-startTime="3013">it's fairly easy to build a </span><span class="line" data-startTime="3016">really high-performance, fast </span><span class="line" data-startTime="3016">virtual machine, at least </span><span class="line" data-startTime="3019">compared to building </span><span class="line" data-startTime="3019">a new language. </span><span class="line" data-startTime="3020">So we're having a lot of fun. </span><span class="line" data-startTime="3023">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="3046"><span class="speakerName">Kasper Lund</span>: Go ahead. </span></p>

<p class="speaker"><span class="line" data-starttime="3047"><span class="speakerName">Audience</span>: Hello? </span></p>

<p class="speaker"><span class="line" data-starttime="3048"><span class="speakerName">Kasper Lund</span>: Yes, it's on. </span></p>

<p class="speaker"><span class="line" data-starttime="3049"><span class="speakerName">Audience</span>: Is it the </span><span class="line" data-startTime="3049">same JavaScript &mdash; </span><span class="line" data-startTime="3051">it's cross-browser, or do you </span><span class="line" data-startTime="3051">have different versions for </span><span class="line" data-startTime="3054">different browsers? </span></p>

<p class="speaker"><span class="line" data-starttime="3055"><span class="speakerName">Kasper Lund</span>: So we generate </span><span class="line" data-startTime="3055">one version of </span><span class="line" data-startTime="3057">the JavaScript code. </span><span class="line" data-startTime="3059">And there are some parts </span><span class="line" data-startTime="3059">in there that are </span><span class="line" data-startTime="3061">browser-specific, but right </span><span class="line" data-startTime="3061">now we just compile one </span><span class="line" data-startTime="3064">version that deals with all the </span><span class="line" data-startTime="3064">differences in one file. </span><span class="line" data-startTime="3067">So one output, one JavaScript </span><span class="line" data-startTime="3067">file that works across all the </span><span class="line" data-startTime="3070">modern browsers. </span></p>

<p class="speaker"><span class="line" data-starttime="3072"><span class="speakerName">Audience</span>: One other question. </span><span class="line" data-startTime="3077">You've shown us the language, </span><span class="line" data-startTime="3077">but the APIs that you use to </span><span class="line" data-startTime="3081">access the DOM and the other </span><span class="line" data-startTime="3081">elements of the browser, are </span><span class="line" data-startTime="3085">those familiar? </span></p>

<p class="speaker"><span class="line" data-starttime="3089"><span class="speakerName">Lars Bak</span>: They are the same. </span><span class="line" data-startTime="3091">We're using the same DOM </span><span class="line" data-startTime="3091">interface as JavaScript, </span><span class="line" data-startTime="3094">except a few changes to make </span><span class="line" data-startTime="3094">it more consistent. </span><span class="line" data-startTime="3098">And we call it the Dart </span><span class="line" data-startTime="3098">HTML library. </span><span class="line" data-startTime="3100">So it's also available when </span><span class="line" data-startTime="3100">you download Dart. </span><span class="line" data-startTime="3103">If you go to the next talk about </span><span class="line" data-startTime="3103">Dart, you'll see how </span><span class="line" data-startTime="3106">that's being used for building </span><span class="line" data-startTime="3106">web applications. </span><span class="line" data-startTime="3109">But this talk was mostly about </span><span class="line" data-startTime="3109">the language, and not how to </span><span class="line" data-startTime="3112">hook it up to the web. </span></p>

<p class="speaker"><span class="line" data-starttime="3114"><span class="speakerName">Lars Bak</span>: If you drop by the </span><span class="line" data-startTime="3114">Chrome demo floor, I'm sure </span><span class="line" data-startTime="3117">someone can show you what </span><span class="line" data-startTime="3117">it is and how it </span><span class="line" data-startTime="3119">looks at the API level. </span></p>

<p class="speaker"><span class="line" data-starttime="3123"><span class="speakerName">Audience</span>: I had a question, I </span><span class="line" data-startTime="3123">guess more about the Dart </span><span class="line" data-startTime="3125">editor, but. </span><span class="line" data-startTime="3127">I've played with it a little </span><span class="line" data-startTime="3127">bit, and I was wondering if </span><span class="line" data-startTime="3129">there's plans to make an </span><span class="line" data-startTime="3129">official Eclipse plugin, so </span><span class="line" data-startTime="3132">that we can get all the version </span><span class="line" data-startTime="3132">control, and other </span><span class="line" data-startTime="3134">features of the Eclipse </span><span class="line" data-startTime="3134">platform. </span></p>

<p class="speaker"><span class="line" data-starttime="3137"><span class="speakerName">Lars Bak</span>: There's been a lot of </span><span class="line" data-startTime="3137">requests to get a plugin. </span><span class="line" data-startTime="3140">And behind the scenes it's </span><span class="line" data-startTime="3140">sort of the same. </span><span class="line" data-startTime="3143">So we will wrap it </span><span class="line" data-startTime="3143">up at some point. </span><span class="line" data-startTime="3146">I cannot give you a date when it </span><span class="line" data-startTime="3146">is there, but it will come. </span></p>

<p class="speaker"><span class="line" data-starttime="3152"><span class="speakerName">Kasper Lund</span>: Take one more here, </span><span class="line" data-startTime="3152">and then we'll switch to </span><span class="line" data-startTime="3154">that side for a while. </span></p>

<p class="speaker"><span class="line" data-starttime="3156"><span class="speakerName">Audience</span>: Yeah. </span><span class="line" data-startTime="3156">Sorry. </span><span class="line" data-startTime="3156">So what sort of integration, </span><span class="line" data-startTime="3156">or is there any integration </span><span class="line" data-startTime="3159">with Google Closure compiler </span><span class="line" data-startTime="3159">for JavaScript? </span><span class="line" data-startTime="3164">Like, do you guys pump out </span><span class="line" data-startTime="3164">minified, optimized </span><span class="line" data-startTime="3166">JavaScript? </span><span class="line" data-startTime="3167">Or is it just unminified and </span><span class="line" data-startTime="3167">then you pump it through </span><span class="line" data-startTime="3169">Closure afterwards? </span></p>

<p class="speaker"><span class="line" data-starttime="3170"><span class="speakerName">Kasper Lund</span>: So right now what </span><span class="line" data-startTime="3170">we're doing is we're </span><span class="line" data-startTime="3173">generating unminified but </span><span class="line" data-startTime="3173">optimized output. </span><span class="line" data-startTime="3177">And we're pushing hard on making </span><span class="line" data-startTime="3177">those optimizations </span><span class="line" data-startTime="3179">even better. </span><span class="line" data-startTime="3180">And we are working on </span><span class="line" data-startTime="3180">minification as well. </span><span class="line" data-startTime="3182">So we don't have any immediate </span><span class="line" data-startTime="3182">plans of using the Closure </span><span class="line" data-startTime="3185">compiler for doing this, because </span><span class="line" data-startTime="3185">sometimes we actually </span><span class="line" data-startTime="3187">use a lot of information, when </span><span class="line" data-startTime="3187">you go from our input to </span><span class="line" data-startTime="3191">JavaScript with type annotations </span><span class="line" data-startTime="3191">in common. </span><span class="line" data-startTime="3194">So we want to try to avoid </span><span class="line" data-startTime="3194">losing that kind of </span><span class="line" data-startTime="3196">information, and essentially </span><span class="line" data-startTime="3196">do the minification and </span><span class="line" data-startTime="3199">optimizations ourselves, based </span><span class="line" data-startTime="3199">on the fact that we understand </span><span class="line" data-startTime="3201">the Dart semantics even better </span><span class="line" data-startTime="3201">than the Closure compiler can. </span></p>

<p class="speaker"><span class="line" data-starttime="3205"><span class="speakerName">Lars Bak</span>: Minification is </span><span class="line" data-startTime="3205">actually very simple when you </span><span class="line" data-startTime="3207">have all the information </span><span class="line" data-startTime="3207">from the compiler. </span><span class="line" data-startTime="3211">So it's much easier to do it </span><span class="line" data-startTime="3211">ourselves than go through the </span><span class="line" data-startTime="3216">Closure compiler for </span><span class="line" data-startTime="3216">minification. </span></p>

<p class="speaker"><span class="line" data-starttime="3218"><span class="speakerName">Kasper Lund</span>: We also have a need </span><span class="line" data-startTime="3218">for minifying Dart code, </span><span class="line" data-startTime="3220">to make the download of </span><span class="line" data-startTime="3220">Dart code smaller. </span><span class="line" data-startTime="3222">So we will produce something </span><span class="line" data-startTime="3222">like a Dart-to-Dart </span><span class="line" data-startTime="3225">translator, that minifies </span><span class="line" data-startTime="3225">and optimizes. </span></p>

<p class="speaker"><span class="line" data-starttime="3227"><span class="speakerName">Audience</span>: Cool. </span><span class="line" data-startTime="3227">And just one other quick </span><span class="line" data-startTime="3227">question, is there any ability </span><span class="line" data-startTime="3229">to at runtime to load in </span><span class="line" data-startTime="3229">additional code, if you're </span><span class="line" data-startTime="3234">using binaries? </span><span class="line" data-startTime="3235">Or is it all done at </span><span class="line" data-startTime="3235">compile time only? </span></p>

<p class="speaker"><span class="line" data-starttime="3238"><span class="speakerName">Kasper Lund</span>: Actually we use </span><span class="line" data-startTime="3238">this concept that we actually </span><span class="line" data-startTime="3240">didn't introduce much here. </span><span class="line" data-startTime="3242">It's isolates. </span><span class="line" data-startTime="3243">And that's one way of creating </span><span class="line" data-startTime="3243">a completely new world that </span><span class="line" data-startTime="3246">you can populate with new, </span><span class="line" data-startTime="3246">dynamically loaded code. </span><span class="line" data-startTime="3249">And it's still a work in </span><span class="line" data-startTime="3249">progress, it's something that </span><span class="line" data-startTime="3251">we will be pushing more on. </span></p>

<p class="speaker"><span class="line" data-starttime="3253"><span class="speakerName">Lars Bak</span>: There's also </span><span class="line" data-startTime="3253">another way of </span><span class="line" data-startTime="3255">dynamically loading code. </span> <span class="line" data-startTime="3256">We have a way of lazy loading </span><span class="line" data-startTime="3256">an entire library. </span> <span class="line" data-startTime="3261">So when you say import to a </span><span class="line" data-startTime="3261">library, we'll say it should </span><span class="line" data-startTime="3263">be lazy loaded. </span> <span class="line" data-startTime="3265">And you just have to activate </span><span class="line" data-startTime="3265">the loading. </span> <span class="line" data-startTime="3268">And you cannot use the </span><span class="line" data-startTime="3268">[? interpoints ?] </span><span class="line" data-startTime="3269">that the library before it has </span><span class="line" data-startTime="3269">been completely loaded. </span> <span class="line" data-startTime="3271">If you try to use it, it </span><span class="line" data-startTime="3271">throws an exception. </span></p>

<p class="speaker"><span class="line" data-starttime="3276"><span class="speakerName">Audience</span>: I just have </span><span class="line" data-startTime="3276">a question. </span><span class="line" data-startTime="3277">What is the recipe for </span><span class="line" data-startTime="3277">server [INAUDIBLE]? </span><span class="line" data-startTime="3280">So Dart is on the client side </span><span class="line" data-startTime="3280">sort of language, but how do </span><span class="line" data-startTime="3285">you envision the communication </span><span class="line" data-startTime="3285">between server and client </span><span class="line" data-startTime="3289">serialization? </span><span class="line" data-startTime="3290">[INAUDIBLE] </span></p>

<p class="speaker"><span class="line" data-starttime="3293"><span class="speakerName">Lars Bak</span>: So certainly </span><span class="line" data-startTime="3293">we support JSON. </span><span class="line" data-startTime="3295">So you can use the JSON format </span><span class="line" data-startTime="3295">to move stuff back and forth. </span><span class="line" data-startTime="3299">The language is not a client </span><span class="line" data-startTime="3299">language, it's </span><span class="line" data-startTime="3302">also a server language. </span><span class="line" data-startTime="3303">And we have a standard </span><span class="line" data-startTime="3303">loan VM you can run </span><span class="line" data-startTime="3305">on the server side. </span><span class="line" data-startTime="3306">And it has an I/O library </span><span class="line" data-startTime="3306">that supports &mdash; </span><span class="line" data-startTime="3310">[INAUDIBLE] </span><span class="line" data-startTime="3311">asynchronous way of doing I/O. </span><span class="line" data-startTime="3311">So you can write server code </span><span class="line" data-startTime="3316">in Dart, if you want to. </span></p>

<p class="speaker"><span class="line" data-starttime="3319"><span class="speakerName">Kasper Lund</span>: There's some work </span><span class="line" data-startTime="3319">going on with using something </span><span class="line" data-startTime="3322">like [? protobufs ?] </span><span class="line" data-startTime="3323">to communicate between </span><span class="line" data-startTime="3323">client and server. </span> <span class="line" data-startTime="3326">There's a lot of community </span><span class="line" data-startTime="3326">interest in this area, too. </span> <span class="line" data-startTime="3328">So it is very important to </span><span class="line" data-startTime="3328">stress that Dart runs just </span><span class="line" data-startTime="3331">fine on the server. </span> <span class="line" data-startTime="3333">So you can write your code, the </span><span class="line" data-startTime="3333">client code and the server </span><span class="line" data-startTime="3335">code, in the same language, and </span><span class="line" data-startTime="3335">have that interoperate in </span><span class="line" data-startTime="3338">a nice way. </span></p>

<p class="speaker"><span class="line" data-starttime="3344"><span class="speakerName">Audience</span>: Does Dart support </span><span class="line" data-startTime="3344">compile time [INAUDIBLE], so </span><span class="line" data-startTime="3347">that I will be able to calculate </span><span class="line" data-startTime="3347">optimal parameters </span><span class="line" data-startTime="3351">before generating the code? </span><span class="line" data-startTime="3355">A good example of the use of </span><span class="line" data-startTime="3355">that is being articulated in </span><span class="line" data-startTime="3359">[INAUDIBLE] </span><span class="line" data-startTime="3361">and all the [INAUDIBLE] </span><span class="line" data-startTime="3361">programming language. </span></p>

<p class="speaker"><span class="line" data-starttime="3365"><span class="speakerName">Kasper Lund</span>: We have some </span><span class="line" data-startTime="3365">support for that. </span><span class="line" data-startTime="3367">It's not completely general, but </span><span class="line" data-startTime="3367">it's very simple, and it </span><span class="line" data-startTime="3370">works well. </span><span class="line" data-startTime="3371">That's in the form of what we </span><span class="line" data-startTime="3371">call compile time expressions. </span><span class="line" data-startTime="3375">There's a subset of the </span><span class="line" data-startTime="3375">language, essentially, that </span><span class="line" data-startTime="3377">you can use for building compile </span><span class="line" data-startTime="3377">time expressions. </span><span class="line" data-startTime="3381">And that includes user-defined </span><span class="line" data-startTime="3381">data structures, we call them </span><span class="line" data-startTime="3385">const objects, that are actually </span><span class="line" data-startTime="3385">built at compile time </span><span class="line" data-startTime="3388">rather than at runtime. </span><span class="line" data-startTime="3389">So there's some support </span><span class="line" data-startTime="3389">in the language there. </span><span class="line" data-startTime="3391">You should drop by the </span><span class="line" data-startTime="3391">demo floor, and I can </span><span class="line" data-startTime="3394">show you how it works. </span></p>

<p class="speaker"><span class="line" data-starttime="3395"><span class="speakerName">Lars Bak</span>: So for instance, in </span><span class="line" data-startTime="3395">the point example, if you make </span><span class="line" data-startTime="3398">the fields final, you </span><span class="line" data-startTime="3398">can make a const </span><span class="line" data-startTime="3401">constructor for the point. </span><span class="line" data-startTime="3403">So you make instances of point </span><span class="line" data-startTime="3403">as compile time expressions, </span><span class="line" data-startTime="3406">that are compiled </span><span class="line" data-startTime="3406">at compile time. </span></p>

<p class="speaker"><span class="line" data-starttime="3409"><span class="speakerName">Audience</span>: [INAUDIBLE] </span></p>

<p class="speaker"><span class="line" data-starttime="3415"><span class="speakerName">Audience</span>: What did you mean </span><span class="line" data-startTime="3415">by success for 2013? </span></p>

<p class="speaker"><span class="line" data-starttime="3422"><span class="speakerName">Lars Bak</span>: That we still have </span><span class="line" data-startTime="3422">a job working on Dart. </span> <span class="line" data-startTime="3426">No. </span> <span class="line" data-startTime="3430">That was a joke. </span> <span class="line" data-startTime="3433">Success means that in 2013 we </span><span class="line" data-startTime="3433">have a stable system that's </span><span class="line" data-startTime="3439">out in Chrome, and we have many </span><span class="line" data-startTime="3439">real projects outside </span><span class="line" data-startTime="3445">Google, also working on </span><span class="line" data-startTime="3445">Dart and using Dart </span><span class="line" data-startTime="3449">for deploying code. </span> <span class="line" data-startTime="3451">This is the ultimate goal. </span> <span class="line" data-startTime="3453">The premise here is to make sure </span><span class="line" data-startTime="3453">programmers will get a </span><span class="line" data-startTime="3457">much better platform for </span><span class="line" data-startTime="3457">writing applications. </span> <span class="line" data-startTime="3460">And if you cannot demonstrate </span><span class="line" data-startTime="3460">that, </span><span class="line" data-startTime="3463">that's certainly a failure. </span></p>

<p class="speaker"><span class="line" data-starttime="3464"><span class="speakerName">Audience</span>: So do you expect </span><span class="line" data-startTime="3464">any [INAUDIBLE] </span><span class="line" data-startTime="3467">is going to [INAUDIBLE], since </span><span class="line" data-startTime="3467">it's already compatible over </span><span class="line" data-startTime="3476">most of of the JavaScript </span><span class="line" data-startTime="3476">stuff, that's OK? </span></p>

<p class="speaker"><span class="line" data-starttime="3478"><span class="speakerName">Lars Bak</span>: So your question is, </span><span class="line" data-startTime="3478">will the other browser vendors </span><span class="line" data-startTime="3482">take the Dart VM and integrate </span><span class="line" data-startTime="3482">it into their browsers? </span><span class="line" data-startTime="3486">Well, I cannot answer that, </span><span class="line" data-startTime="3486">since I'm not controlling what </span><span class="line" data-startTime="3488">they're doing. </span><span class="line" data-startTime="3489">But what I can do is, I can </span><span class="line" data-startTime="3489">make sure that Dart is an </span><span class="line" data-startTime="3492">appealing offer. </span><span class="line" data-startTime="3493">So it's out there, </span><span class="line" data-startTime="3493">it's open source. </span><span class="line" data-startTime="3496">And if we can demonstrate Dart </span><span class="line" data-startTime="3496">applications when running with </span><span class="line" data-startTime="3500">a native VM has instant </span><span class="line" data-startTime="3500">startup, and better </span><span class="line" data-startTime="3502">performance than a similar </span><span class="line" data-startTime="3502">JavaScript program, it seems </span><span class="line" data-startTime="3508">very appealing to me, if I was </span><span class="line" data-startTime="3508">sitting in the other camp and </span><span class="line" data-startTime="3512">then integrated. </span><span class="line" data-startTime="3514">And we hope that will </span><span class="line" data-startTime="3514">happen of course. </span></p>

<p class="speaker"><span class="line" data-starttime="3518"><span class="speakerName">Audience</span>: I'm curious if all of </span><span class="line" data-startTime="3518">the Dart language features </span><span class="line" data-startTime="3520">compile to JavaScript? </span><span class="line" data-startTime="3521">And I'm specifically curious </span><span class="line" data-startTime="3521">about covariant generics. </span></p>

<p class="speaker"><span class="line" data-starttime="3524"><span class="speakerName">Kasper Lund</span>: So, yeah. </span> <span class="line" data-startTime="3526">So covariant generics are </span><span class="line" data-startTime="3526">reasonably easy to compile to </span><span class="line" data-startTime="3528">JavaScript. </span> <span class="line" data-startTime="3529">There's nothing in JavaScript </span><span class="line" data-startTime="3529">that hinders that. </span> <span class="line" data-startTime="3531">There's one area where it's </span><span class="line" data-startTime="3531">problematic to have the full </span><span class="line" data-startTime="3535">Dart language implemented when </span><span class="line" data-startTime="3535">translated to JavaScript, and </span><span class="line" data-startTime="3538">that's numerics. </span> <span class="line" data-startTime="3540">JavaScript does not have any </span><span class="line" data-startTime="3540">efficient way of having </span><span class="line" data-startTime="3542">arbitrary sized integers, </span><span class="line" data-startTime="3542">for instance. </span> <span class="line" data-startTime="3545">Everything is, when it comes </span><span class="line" data-startTime="3545">to numbers, a double in </span><span class="line" data-startTime="3547">JavaScript. </span> <span class="line" data-startTime="3548">So there are some restrictions </span><span class="line" data-startTime="3548">on how numbers work in Dart </span><span class="line" data-startTime="3551">when compiled to JavaScript, </span><span class="line" data-startTime="3551">compared to what you get on </span><span class="line" data-startTime="3554">the native VM. </span></p>

<p><span class="line" data-startTime="3555">It's a hard problem to solve. </span> <span class="line" data-startTime="3556">We're looking at ways </span><span class="line" data-startTime="3556">of doing that. </span> <span class="line" data-startTime="3558">But for now that's the one </span><span class="line" data-startTime="3558">area where there's a real </span><span class="line" data-startTime="3561">difference between </span><span class="line" data-startTime="3561">the two setups. </span></p>

<p class="speaker"><span class="line" data-starttime="3563"><span class="speakerName">Lars Bak</span>: We have discussed </span><span class="line" data-startTime="3563">caving in, and just having </span><span class="line" data-startTime="3566">numbers like in JavaScript. </span><span class="line" data-startTime="3568">But boy, we really like </span><span class="line" data-startTime="3568">integers, and the </span><span class="line" data-startTime="3570">semantics of integers. </span><span class="line" data-startTime="3572">And mixing them all up, </span><span class="line" data-startTime="3572">I think, is a mistake. </span><span class="line" data-startTime="3574">So that's the reason why, </span><span class="line" data-startTime="3574">precisely in this area, that's </span><span class="line" data-startTime="3577">a little bit of discrepancy </span><span class="line" data-startTime="3577">between the native </span><span class="line" data-startTime="3579">implementation and the </span><span class="line" data-startTime="3579">JavaScript-generated code. </span><span class="line" data-startTime="3587">Yes? </span></p>

<p class="speaker"><span class="line" data-starttime="3588"><span class="speakerName">Audience</span>: Is Google going </span><span class="line" data-startTime="3588">to promote Dart over </span><span class="line" data-startTime="3591">GWT down the road? </span></p>

<p class="speaker"><span class="line" data-starttime="3595"><span class="speakerName">Lars Bak</span>: GWT already has a </span><span class="line" data-startTime="3595">lot of customers, and it's </span><span class="line" data-startTime="3599">still supported. </span> <span class="line" data-startTime="3601">We think, since we have done the </span><span class="line" data-startTime="3601">Dart part and have nothing </span><span class="line" data-startTime="3604">to do with the GWT part, that </span><span class="line" data-startTime="3604">this is a better fit for the </span><span class="line" data-startTime="3608">web platform. </span> <span class="line" data-startTime="3609">And during the presentation </span><span class="line" data-startTime="3609">we were talking about this </span><span class="line" data-startTime="3614">importance of immediacy when </span><span class="line" data-startTime="3614">doing programming. </span> <span class="line" data-startTime="3617">The fact that you can change the </span><span class="line" data-startTime="3617">file and get it up running </span><span class="line" data-startTime="3619">right away, where there's no </span><span class="line" data-startTime="3619">tool chain in between you and </span><span class="line" data-startTime="3623">debugging the program &mdash; </span><span class="line" data-startTime="3625">this is something that's hard to </span><span class="line" data-startTime="3625">do in GWT, where it's much, </span><span class="line" data-startTime="3629">much easier to do in Dart. </span> <span class="line" data-startTime="3632">At the same time, in Dart </span><span class="line" data-startTime="3632">you can avoid the types. </span> <span class="line" data-startTime="3635">So if you prototype, you can do </span><span class="line" data-startTime="3635">crazy stuff and don't think </span><span class="line" data-startTime="3638">about the types, it'll </span><span class="line" data-startTime="3638">still work. </span></p>

<p><span class="line" data-startTime="3640">And I think that really will </span><span class="line" data-startTime="3640">help you accelerate your </span><span class="line" data-startTime="3645">prototyping of your </span><span class="line" data-startTime="3645">application. </span></p>

<p class="speaker"><span class="line" data-starttime="3647"><span class="speakerName">Audience</span>: Also I was just </span><span class="line" data-startTime="3647">curious about, for a project </span><span class="line" data-startTime="3651">of similar size, how does Dart </span><span class="line" data-startTime="3651">stack up against GWT in terms </span><span class="line" data-startTime="3657">of code generation, </span><span class="line" data-startTime="3657">[INAUDIBLE] </span><span class="line" data-startTime="3660">JavaScript code? </span><span class="line" data-startTime="3661">Is it smaller in size, </span><span class="line" data-startTime="3661">or larger in size? </span></p>

<p class="speaker"><span class="line" data-starttime="3669"><span class="speakerName">Lars Bak</span>: I don't have </span><span class="line" data-startTime="3669">comparable numbers right now. </span><span class="line" data-startTime="3671">What I can tell you is that the </span><span class="line" data-startTime="3671">generated JavaScript code </span><span class="line" data-startTime="3675">from Dart is fairly </span><span class="line" data-startTime="3675">minimal now. </span><span class="line" data-startTime="3677">You should try it out. </span><span class="line" data-startTime="3680">And we expected to be </span><span class="line" data-startTime="3680">much smaller than </span><span class="line" data-startTime="3683">what GWT can generate. </span><span class="line" data-startTime="3684">I think the GWT system is also </span><span class="line" data-startTime="3684">doing a lot of tree shaking </span><span class="line" data-startTime="3688">before they generate </span><span class="line" data-startTime="3688">JavaScript code. </span><span class="line" data-startTime="3692">But they have a lot of legacy </span><span class="line" data-startTime="3692">stuff related to the Java </span><span class="line" data-startTime="3696">libraries they're using. </span><span class="line" data-startTime="3697">But I don't have numbers </span><span class="line" data-startTime="3697">right now. </span><span class="line" data-startTime="3699">So go home and measure it. </span><span class="line" data-startTime="3702">Yes. </span></p>

<p class="speaker"><span class="line" data-starttime="3703"><span class="speakerName">Kasper Lund</span>: This will be the </span><span class="line" data-startTime="3703">last question, by the way. </span></p>

<p class="speaker"><span class="line" data-starttime="3705"><span class="speakerName">Audience</span>: Two questions. </span><span class="line" data-startTime="3707">So first, the syntax </span><span class="line" data-startTime="3707">for importing a </span><span class="line" data-startTime="3710">module is pound import. </span><span class="line" data-startTime="3713">Do you have some sort of </span><span class="line" data-startTime="3713">preprocessor that you can use, </span><span class="line" data-startTime="3716">with if defs and stuff? </span></p>

<p class="speaker"><span class="line" data-starttime="3719"><span class="speakerName">Kasper Lund</span>: No. </span><span class="line" data-startTime="3719">But it is true that right now, </span><span class="line" data-startTime="3719">the way to write an import is </span><span class="line" data-startTime="3722">using a pound import. </span><span class="line" data-startTime="3724">It is to try to make it stick </span><span class="line" data-startTime="3724">out, and it certainly does. </span><span class="line" data-startTime="3726">And we are thinking about making </span><span class="line" data-startTime="3726">it look more like an </span><span class="line" data-startTime="3729">integrated part of the </span><span class="line" data-startTime="3729">language, rather than </span><span class="line" data-startTime="3731">preprocessing. </span><span class="line" data-startTime="3732">But it was designed to make </span><span class="line" data-startTime="3732">it stick out, and it does. </span></p>

<p class="speaker"><span class="line" data-starttime="3736"><span class="speakerName">Audience</span>: Secondly, for </span><span class="line" data-startTime="3736">isolates, are they implemented </span><span class="line" data-startTime="3740">as threads? </span><span class="line" data-startTime="3742">Or is it somehow a thin &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="3745"><span class="speakerName">Kasper Lund</span>: Thread. </span></p>

<p class="speaker"><span class="line" data-starttime="3747"><span class="speakerName">Lars Bak</span>: Since we translate </span><span class="line" data-startTime="3747">to JavaScript and it has to </span><span class="line" data-startTime="3749">run on top of a single </span><span class="line" data-startTime="3749">JavaScript engine, we have to </span><span class="line" data-startTime="3752">multiplex between them. </span><span class="line" data-startTime="3753">But you can run isolates. </span></p>

<p class="speaker"><span class="line" data-starttime="3755"><span class="speakerName">Audience</span>: But in the </span><span class="line" data-startTime="3755">Dart VM itself? </span></p>

<p class="speaker"><span class="line" data-starttime="3758"><span class="speakerName">Lars Bak</span>: Yes, they're running </span><span class="line" data-startTime="3758">completely independent, so </span><span class="line" data-startTime="3760">that you can have isolates </span><span class="line" data-startTime="3760">running in parallel. </span></p>

<p class="speaker"><span class="line" data-starttime="3762"><span class="speakerName">Audience</span>: So they are </span><span class="line" data-startTime="3762">actual threads? </span></p>

<p class="speaker"><span class="line" data-starttime="3764"><span class="speakerName">Kasper Lund</span>: They don't have </span><span class="line" data-startTime="3764">to be [? native ?] </span><span class="line" data-startTime="3766">threads. </span><span class="line" data-startTime="3766">There is a thread pull </span><span class="line" data-startTime="3766">implementation that we're </span><span class="line" data-startTime="3767">working on, where essentially </span><span class="line" data-startTime="3767">you'll get as many threads </span><span class="line" data-startTime="3771">running as you need to &mdash; </span><span class="line" data-startTime="3772">as the amount of parallels </span><span class="line" data-startTime="3772">you have in your program. </span><span class="line" data-startTime="3775">So it's not tied to one thread, </span><span class="line" data-startTime="3775">and it's more like a </span><span class="line" data-startTime="3778">thin threading model. </span></p>

<p class="speaker"><span class="line" data-starttime="3780"><span class="speakerName">Lars Bak</span>: So for instance, if </span><span class="line" data-startTime="3780">the isolate is not active it </span><span class="line" data-startTime="3783">doesn't have to have a native </span><span class="line" data-startTime="3783">thread bound to it. </span></p>

<p class="speaker"><span class="line" data-starttime="3786"><span class="speakerName">Audience</span>: Does it have a </span><span class="line" data-startTime="3786">pre-allocated execution stack? </span><span class="line" data-startTime="3790">Fixed size stack? </span></p>

<p class="speaker"><span class="line" data-starttime="3792"><span class="speakerName">Kasper Lund</span>: No, so, everything </span><span class="line" data-startTime="3792">is asynchronous. </span><span class="line" data-startTime="3794">There's no blocking. </span><span class="line" data-startTime="3795">So you actually don't </span><span class="line" data-startTime="3795">need to do that. </span><span class="line" data-startTime="3797">You just have to return from </span><span class="line" data-startTime="3797">your isolate at that point. </span><span class="line" data-startTime="3800">It is an asynchronous model, </span><span class="line" data-startTime="3800">so there are no execution </span><span class="line" data-startTime="3803">stacks stuck on native </span><span class="line" data-startTime="3803">threads or anything. </span><span class="line" data-startTime="3805">So it's very simple that way. </span></p>

<p class="speaker"><span class="line" data-starttime="3806"><span class="speakerName">Lars Bak</span>: So we are using the </span><span class="line" data-startTime="3806">native execution stack when </span><span class="line" data-startTime="3809">executing an isolate. </span></p>

<p class="speaker"><span class="line" data-starttime="3811"><span class="speakerName">Kasper Lund</span>: Thanks </span><span class="line" data-startTime="3811">for staying for </span><span class="line" data-startTime="3812">the Q&A. We're done. </span></p>

<p class="speaker"><span class="line" data-starttime="3814"><span class="speakerName">Lars Bak</span>: Thank you. </span></p>