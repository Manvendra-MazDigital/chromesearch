<p><span class="line" data-startTime="0">[MUSIC PLAYING - AMBIENT </span><span class="line" data-startTime="0">ELECTRONIC] </span><span class="line" data-startTime="311">Hello, everyone. </span> <span class="line" data-startTime="312">Welcome to this installment of </span><span class="line" data-startTime="312">Chrome Apps Office Hours here </span><span class="line" data-startTime="316">on Google Developers Live. </span> <span class="line" data-startTime="317">I'm Joe Marini. </span> <span class="line" data-startTime="318">I'm the lead developer advocate </span><span class="line" data-startTime="318">here on the Chrome </span><span class="line" data-startTime="321">Apps team, and today we're </span><span class="line" data-startTime="321">going to be talking about </span><span class="line" data-startTime="324">inter-app messaging using Chrome </span><span class="line" data-startTime="324">apps and extensions. </span> <span class="line" data-startTime="328">So before I get started, if you </span><span class="line" data-startTime="328">have any questions about </span><span class="line" data-startTime="331">what I'm about to show you today </span><span class="line" data-startTime="331">you can, of course, feel </span><span class="line" data-startTime="334">free to shout them </span><span class="line" data-startTime="334">at your screen. </span> <span class="line" data-startTime="335">But if you want the question to </span><span class="line" data-startTime="335">actually be answered, you </span><span class="line" data-startTime="337">should probably post it on our </span><span class="line" data-startTime="337">Google Developers G+ channel </span><span class="line" data-startTime="342">or leave it in the YouTube </span><span class="line" data-startTime="342">comments, and we'll try to get </span><span class="line" data-startTime="345">to as many questions </span><span class="line" data-startTime="345">as we can. </span> <span class="line" data-startTime="347">All right, so let's go ahead </span><span class="line" data-startTime="347">and get started. </span></p>

<p><span class="line" data-startTime="349">I'm going to show you a </span><span class="line" data-startTime="349">demo before I actually </span><span class="line" data-startTime="351">jump into some code. </span> <span class="line" data-startTime="353">So here I've got my Chrome </span><span class="line" data-startTime="353">browser running. </span> <span class="line" data-startTime="356">I'm going to go ahead and open </span><span class="line" data-startTime="356">up a new tab, and I'm going to </span><span class="line" data-startTime="360">start up a couple of sample </span><span class="line" data-startTime="360">apps that I've built. </span> <span class="line" data-startTime="362">And actually, before I do that, </span><span class="line" data-startTime="362">if you want to follow </span><span class="line" data-startTime="365">along with me, you're more </span><span class="line" data-startTime="365">than free to do so. </span> <span class="line" data-startTime="369">Jump on over to our </span><span class="line" data-startTime="369">GitHub repo. </span> <span class="line" data-startTime="371">If you go to the </span><span class="line" data-startTime="371">GoogleChrome/chrome-app-samples </span><span class="line" data-startTime="375">repo here on Git and you scroll </span><span class="line" data-startTime="375">on down, you'll see </span><span class="line" data-startTime="379">this guy right here, </span><span class="line" data-startTime="379">"Messaging." That's the sample </span><span class="line" data-startTime="382">app that I'm going to </span><span class="line" data-startTime="382">be using today. </span> <span class="line" data-startTime="384">So you can go ahead and fire </span><span class="line" data-startTime="384">up the code and play along </span><span class="line" data-startTime="386">with me at home if you like. </span></p>

<p><span class="line" data-startTime="388">All right, so back to </span><span class="line" data-startTime="388">the sample apps. </span> <span class="line" data-startTime="391">I'm going to scroll down. </span> <span class="line" data-startTime="392">Now I have loaded these as </span><span class="line" data-startTime="392">unpacked apps, so these are </span><span class="line" data-startTime="395">not installed from the </span><span class="line" data-startTime="395">Chrome Web Store. </span> <span class="line" data-startTime="396">I've just loaded </span><span class="line" data-startTime="396">them unpacked. </span> <span class="line" data-startTime="398">So I'm going to start up </span><span class="line" data-startTime="398">Messaging App number one, and </span><span class="line" data-startTime="400">that's this guy right here. </span> <span class="line" data-startTime="402">And I'll just move them over so </span><span class="line" data-startTime="402">we can fit both of them on </span><span class="line" data-startTime="404">the screen. </span></p>

<p><span class="line" data-startTime="407">Scale it down just a little, </span><span class="line" data-startTime="407">and now I'll open up the </span><span class="line" data-startTime="409">second one, and that's </span><span class="line" data-startTime="409">Messaging App </span><span class="line" data-startTime="412">number two right here. </span> <span class="line" data-startTime="414">OK, so now I've got two </span><span class="line" data-startTime="414">applications open. </span> <span class="line" data-startTime="417">So what I'm going to do now </span><span class="line" data-startTime="417">is show these two apps </span><span class="line" data-startTime="420">communicating with each </span><span class="line" data-startTime="420">other by sending </span><span class="line" data-startTime="423">messages to one another. </span> <span class="line" data-startTime="425">And the scenario here is that </span><span class="line" data-startTime="425">you've got one or more Chrome </span><span class="line" data-startTime="429">apps that want to communicate </span><span class="line" data-startTime="429">with each other, and you can </span><span class="line" data-startTime="432">do that by sending messages. </span> <span class="line" data-startTime="433">And this also works </span><span class="line" data-startTime="433">for extensions. </span></p>

<p><span class="line" data-startTime="435">There's a pretty common </span><span class="line" data-startTime="435">use case. </span> <span class="line" data-startTime="437">I've seen questions like this </span><span class="line" data-startTime="437">on the forum or talks I've </span><span class="line" data-startTime="440">given where people say, hey, </span><span class="line" data-startTime="440">I've got an extension, </span><span class="line" data-startTime="443">building a Chrome app. </span> <span class="line" data-startTime="443">It would be nice if they could </span><span class="line" data-startTime="443">communicate with each other. </span> <span class="line" data-startTime="446">And that's what this feature </span><span class="line" data-startTime="446">allows you to do. </span> <span class="line" data-startTime="448">Now just to be clear, this is </span><span class="line" data-startTime="448">not the same thing as opening </span><span class="line" data-startTime="452">a channel from an extension </span><span class="line" data-startTime="452">into a content </span><span class="line" data-startTime="455">script in the web page. </span> <span class="line" data-startTime="457">The concept is the same, but the </span><span class="line" data-startTime="457">API is slightly different. </span> <span class="line" data-startTime="460">This is about sending </span><span class="line" data-startTime="460">self-contained individual </span><span class="line" data-startTime="463">messages from extensions to apps </span><span class="line" data-startTime="463">or apps to extensions or </span><span class="line" data-startTime="467">apps to apps. </span> <span class="line" data-startTime="468">It's not about opening a </span><span class="line" data-startTime="468">long-lived socket-ish port </span><span class="line" data-startTime="472">kind of connection so that </span><span class="line" data-startTime="472">things can communicate. </span></p>

<p><span class="line" data-startTime="474">So with that out of the way, </span><span class="line" data-startTime="474">let me show you the demo. </span> <span class="line" data-startTime="477">So back over here in app one, </span><span class="line" data-startTime="477">you can see that it's telling </span><span class="line" data-startTime="482">me what its app ID is. </span> <span class="line" data-startTime="483">This is an important part </span><span class="line" data-startTime="483">of the process. </span> <span class="line" data-startTime="485">I have to have the ID so that I </span><span class="line" data-startTime="485">know which app I'm going to </span><span class="line" data-startTime="488">be communicating </span><span class="line" data-startTime="488">with and from. </span> <span class="line" data-startTime="490">So I'm going to copy that ID </span><span class="line" data-startTime="490">and, over here, I'm going to </span><span class="line" data-startTime="494">paste that ID into </span><span class="line" data-startTime="494">this field here. </span> <span class="line" data-startTime="497">And then I'm going to put a </span><span class="line" data-startTime="497">little message in there. </span> <span class="line" data-startTime="499">I'm going to say, "Hello app!" </span><span class="line" data-startTime="499">And I'm going to click the </span><span class="line" data-startTime="503">Send button. </span> <span class="line" data-startTime="505">And you can see over here in </span><span class="line" data-startTime="505">the first app, I got my </span><span class="line" data-startTime="507">message, and it says, from </span><span class="line" data-startTime="507">this ID I got the </span><span class="line" data-startTime="510">message, hello app. </span> <span class="line" data-startTime="511">And in the sending application </span><span class="line" data-startTime="511">it says that I sent the </span><span class="line" data-startTime="515">message, and I got a response </span><span class="line" data-startTime="515">back, and the response is just </span><span class="line" data-startTime="518">some JSON object saying, hey, </span><span class="line" data-startTime="518">the result was, OK, we got </span><span class="line" data-startTime="522">your message. </span> <span class="line" data-startTime="523">And now that I've got that </span><span class="line" data-startTime="523">connection open, I can go </span><span class="line" data-startTime="526">ahead and copy this ID, put it </span><span class="line" data-startTime="526">in over here, say, "thanks for </span><span class="line" data-startTime="534">the message," and click Send. </span></p>

<p><span class="line" data-startTime="539">And you can see that I'm sending </span><span class="line" data-startTime="539">messages to and from </span><span class="line" data-startTime="541">each application. </span> <span class="line" data-startTime="543">And just to show you that it </span><span class="line" data-startTime="543">works with extensions as well, </span><span class="line" data-startTime="545">I'm going to go over here and </span><span class="line" data-startTime="545">move this out of the way. </span> <span class="line" data-startTime="549">And in my Chrome browser, I've </span><span class="line" data-startTime="549">installed the sample extension </span><span class="line" data-startTime="553">that comes along with this code </span><span class="line" data-startTime="553">sample, and you can see </span><span class="line" data-startTime="556">that the UI pretty much </span><span class="line" data-startTime="556">looks the same. </span> <span class="line" data-startTime="558">Clearly I'm an engineer, not a </span><span class="line" data-startTime="558">designer, so let's just put </span><span class="line" data-startTime="561">that aside for the moment. </span> <span class="line" data-startTime="562">But let's go ahead and send </span><span class="line" data-startTime="562">a message from the </span><span class="line" data-startTime="565">extension to the app. </span> <span class="line" data-startTime="567">So you can see here I've got my </span><span class="line" data-startTime="567">extension ID, and we'll use </span><span class="line" data-startTime="570">that in a second when we send </span><span class="line" data-startTime="570">a message to the extension. </span> <span class="line" data-startTime="573">But for the current example, </span><span class="line" data-startTime="573">let's go back to Messaging </span><span class="line" data-startTime="576">App1, or Messaging </span><span class="line" data-startTime="576">App2, I guess. </span> <span class="line" data-startTime="580">I'm going to copy this ID, I'm </span><span class="line" data-startTime="580">going to go to the extension, </span><span class="line" data-startTime="585">paste the ID in, and send </span><span class="line" data-startTime="585">it a message saying, </span><span class="line" data-startTime="591">hello from the extension. </span> <span class="line" data-startTime="594">I'll click Send, and you can </span><span class="line" data-startTime="594">see that it's acknowledging </span><span class="line" data-startTime="598">that the message was sent. </span></p>

<p><span class="line" data-startTime="599">I got a response back saying, </span><span class="line" data-startTime="599">result OK, got your message. </span> <span class="line" data-startTime="602">Well, let's see if </span><span class="line" data-startTime="602">it actually did. </span> <span class="line" data-startTime="604">Let's go to app two. </span> <span class="line" data-startTime="606">And you can see right here it </span><span class="line" data-startTime="606">says, from this ID, hello, </span><span class="line" data-startTime="610">from the extension. </span> <span class="line" data-startTime="611">OK, so now let's send a message </span><span class="line" data-startTime="611">to the extension. </span> <span class="line" data-startTime="614">So let's go back </span><span class="line" data-startTime="614">to the browser. </span> <span class="line" data-startTime="617">I'm going to bring the extension </span><span class="line" data-startTime="617">up, I'm going to </span><span class="line" data-startTime="619">copy its ID, and I'm going to </span><span class="line" data-startTime="619">go back to the app, and this </span><span class="line" data-startTime="626">time I'll paste the </span><span class="line" data-startTime="626">ID in here. </span> <span class="line" data-startTime="630">And the message I'll send is, </span><span class="line" data-startTime="630">hello extension from the app, </span><span class="line" data-startTime="636">and I'll click send. </span> <span class="line" data-startTime="637">Now, in this particular case, </span><span class="line" data-startTime="637">I've implemented the sample to </span><span class="line" data-startTime="640">show a notification that is </span><span class="line" data-startTime="640">going to pop up in the upper </span><span class="line" data-startTime="644">corner of my screen. </span></p>

<p><span class="line" data-startTime="645">So pay attention, I'm going to </span><span class="line" data-startTime="645">click Send, and you can see </span><span class="line" data-startTime="648">that I've got a little </span><span class="line" data-startTime="648">notification popping up there. </span> <span class="line" data-startTime="650">That's the extension </span><span class="line" data-startTime="650">acknowledging that it got the </span><span class="line" data-startTime="653">message and using the </span><span class="line" data-startTime="653">notification's API to display </span><span class="line" data-startTime="657">the message. </span> <span class="line" data-startTime="659">All right, so this all </span><span class="line" data-startTime="659">looks fine and great. </span> <span class="line" data-startTime="661">Let's jump over to the code to </span><span class="line" data-startTime="661">see how it actually works. </span> <span class="line" data-startTime="665">And actually, before I jump to </span><span class="line" data-startTime="665">the code, let me show you </span><span class="line" data-startTime="668">really quickly the API that </span><span class="line" data-startTime="668">we're going to be talking </span><span class="line" data-startTime="670">about today. </span> <span class="line" data-startTime="671">So in the documentation for </span><span class="line" data-startTime="671">Chrome apps, if you go to </span><span class="line" data-startTime="675">Developer.Chrome.com/apps, and </span><span class="line" data-startTime="675">I'm going to scroll on down to </span><span class="line" data-startTime="680">the Chrome JavaScript APIs </span><span class="line" data-startTime="680">link right here. </span></p>

<p><span class="line" data-startTime="684">Click on that. </span> <span class="line" data-startTime="685">And I'm going to scroll </span><span class="line" data-startTime="685">on down to runtime. </span> <span class="line" data-startTime="689">Click on runtime. </span> <span class="line" data-startTime="690">So this is the namespace we'll </span><span class="line" data-startTime="690">be using, and we're going to </span><span class="line" data-startTime="693">be using the sendMessage method </span><span class="line" data-startTime="693">right here, and we'll </span><span class="line" data-startTime="697">also be using the </span><span class="line" data-startTime="697">onMessageExternal event. </span> <span class="line" data-startTime="701">So let me jump on down to the </span><span class="line" data-startTime="701">sendMessage API, and you can </span><span class="line" data-startTime="705">see that the sendMessage </span><span class="line" data-startTime="705">API is pretty simple. </span> <span class="line" data-startTime="707">It takes an extension ID or </span><span class="line" data-startTime="707">well, an app ID as well, and </span><span class="line" data-startTime="711">that's optional. </span> <span class="line" data-startTime="712">If you don't provide that, then </span><span class="line" data-startTime="712">the message will simply </span><span class="line" data-startTime="715">go to the origin of whatever </span><span class="line" data-startTime="715">the message was. </span> <span class="line" data-startTime="718">Which can be useful, if you want </span><span class="line" data-startTime="718">to just send messages to </span><span class="line" data-startTime="720">yourself, that's fine as well. </span></p>

<p><span class="line" data-startTime="722">But that's where we provide the </span><span class="line" data-startTime="722">string that represents the </span><span class="line" data-startTime="724">ID of the target </span><span class="line" data-startTime="724">of the message. </span> <span class="line" data-startTime="727">The message here is the second </span><span class="line" data-startTime="727">parameter, and that can be </span><span class="line" data-startTime="729">pretty much anything. </span> <span class="line" data-startTime="730">It has to be a JSON-ifiable </span><span class="line" data-startTime="730">object, and that's usually </span><span class="line" data-startTime="733">what it is, and that's the </span><span class="line" data-startTime="733">demo I'll be showing you. </span> <span class="line" data-startTime="736">And then there's an optional </span><span class="line" data-startTime="736">responseCallback. </span> <span class="line" data-startTime="738">So if you want to get a response </span><span class="line" data-startTime="738">from the target of </span><span class="line" data-startTime="742">the message, you can fill in </span><span class="line" data-startTime="742">this callback function, and it </span><span class="line" data-startTime="745">will be called when the receiver </span><span class="line" data-startTime="745">of the message calls </span><span class="line" data-startTime="749">a corresponding function saying, </span><span class="line" data-startTime="749">hey I got the message, </span><span class="line" data-startTime="751">and everything seems </span><span class="line" data-startTime="751">to be fine. </span> <span class="line" data-startTime="753">All right, so I'm going to jump </span><span class="line" data-startTime="753">over to Sublime, and this </span><span class="line" data-startTime="757">is the sample. </span></p>

<p><span class="line" data-startTime="758">You can see I've opened the </span><span class="line" data-startTime="758">folder up here in Sublime. </span> <span class="line" data-startTime="760">So let's take a quick tour </span><span class="line" data-startTime="760">of the source code. </span> <span class="line" data-startTime="763">So in app one, and the code for </span><span class="line" data-startTime="763">app one and app two are </span><span class="line" data-startTime="766">pretty much the same, so I'll </span><span class="line" data-startTime="766">just go through one of these. </span> <span class="line" data-startTime="770">You can see that here's the </span><span class="line" data-startTime="770">HTML for the UI, pretty </span><span class="line" data-startTime="772">straightforward. </span> <span class="line" data-startTime="774">If we look in the manifest file, </span><span class="line" data-startTime="774">you'll notice that there </span><span class="line" data-startTime="776">are no special permissions </span><span class="line" data-startTime="776">needed to take advantage of </span><span class="line" data-startTime="780">this feature. </span> <span class="line" data-startTime="781">You can just send messages </span><span class="line" data-startTime="781">all you want. </span></p>

<p><span class="line" data-startTime="783">You don't have to specify any </span><span class="line" data-startTime="783">particular permission for your </span><span class="line" data-startTime="786">app to be able to do this. </span> <span class="line" data-startTime="788">In the main.js file, pretty </span><span class="line" data-startTime="788">simple once again, we've got a </span><span class="line" data-startTime="793">launched listener for when our </span><span class="line" data-startTime="793">app launches, sets up the main </span><span class="line" data-startTime="796">app window. </span> <span class="line" data-startTime="797">All the magic happens here in </span><span class="line" data-startTime="797">the index.js file for the </span><span class="line" data-startTime="802">application. </span> <span class="line" data-startTime="803">So let me scroll down so </span><span class="line" data-startTime="803">you can see the code. </span> <span class="line" data-startTime="806">So in the UI, I have a Send </span><span class="line" data-startTime="806">button, and on the Send </span><span class="line" data-startTime="810">button, I'm setting up an event </span><span class="line" data-startTime="810">listener right here to </span><span class="line" data-startTime="812">listen for the click. </span> <span class="line" data-startTime="813">And inside the click handler, </span><span class="line" data-startTime="813">all I need to do is call </span><span class="line" data-startTime="817">Chrome.runtime.sendMessage. </span> <span class="line" data-startTime="819">And you can see that I've got </span><span class="line" data-startTime="819">that edit field for where the </span><span class="line" data-startTime="823">ID was entered, and so I get </span><span class="line" data-startTime="823">the value of that field, </span><span class="line" data-startTime="826">that's the ID of the target. </span> <span class="line" data-startTime="827">And then here's the JSON object </span><span class="line" data-startTime="827">that I'm using to send </span><span class="line" data-startTime="831">the message. </span></p>

<p><span class="line" data-startTime="831">So in this case, I have </span><span class="line" data-startTime="831">a property called </span><span class="line" data-startTime="833">myCustomMessage and whatever </span><span class="line" data-startTime="833">the value of </span><span class="line" data-startTime="836">the text field was &mdash; </span><span class="line" data-startTime="837">I can make this as complex </span><span class="line" data-startTime="837">as I like &mdash; </span><span class="line" data-startTime="839">and then I've got a </span><span class="line" data-startTime="839">function here for </span><span class="line" data-startTime="841">handling the response. </span> <span class="line" data-startTime="843">And all that's doing is just </span><span class="line" data-startTime="843">calling some function I wrote </span><span class="line" data-startTime="846">to stick some HTML into </span><span class="line" data-startTime="846">that div that you see </span><span class="line" data-startTime="849">there on the page. </span> <span class="line" data-startTime="850">And that's pretty much how </span><span class="line" data-startTime="850">you send the message. </span> <span class="line" data-startTime="852">So you have to know the person </span><span class="line" data-startTime="852">you're sending the message to, </span><span class="line" data-startTime="855">you've got the message you want </span><span class="line" data-startTime="855">to send, and then the </span><span class="line" data-startTime="857">optional response. </span> <span class="line" data-startTime="859">Let me scroll down a </span><span class="line" data-startTime="859">little bit more. </span></p>

<p><span class="line" data-startTime="862">OK, here's how the message gets </span><span class="line" data-startTime="862">handled when it comes in. </span> <span class="line" data-startTime="865">So again, on the runtime </span><span class="line" data-startTime="865">name space, I have the </span><span class="line" data-startTime="868">onMessageExternal event, and I'm </span><span class="line" data-startTime="868">just adding a listener to </span><span class="line" data-startTime="872">that event. </span> <span class="line" data-startTime="873">And the handler function </span><span class="line" data-startTime="873">for this event </span><span class="line" data-startTime="876">does a couple of checks. </span> <span class="line" data-startTime="878">First, I've got a variable here </span><span class="line" data-startTime="878">called blacklistedIDs. </span> <span class="line" data-startTime="882">So if you have a set of sources </span><span class="line" data-startTime="882">that you know you </span><span class="line" data-startTime="887">don't want to receive messages </span><span class="line" data-startTime="887">from, or, on the other hand, </span><span class="line" data-startTime="890">if you want to just have a list </span><span class="line" data-startTime="890">of known targets that you </span><span class="line" data-startTime="892">want to receive messages from, </span><span class="line" data-startTime="892">you can set that up in advance </span><span class="line" data-startTime="894">and check to see if the ID of </span><span class="line" data-startTime="894">the incoming message is only </span><span class="line" data-startTime="898">one that you want to handle. </span> <span class="line" data-startTime="899">So this code is just saying, </span><span class="line" data-startTime="899">hey, is the sender ID inside </span><span class="line" data-startTime="903">this list of blacklisted IDs. </span> <span class="line" data-startTime="905">And I could flip this around, </span><span class="line" data-startTime="905">I could do it so that it's </span><span class="line" data-startTime="907">only inside a white-listed </span><span class="line" data-startTime="907">set of IDs. </span> <span class="line" data-startTime="910">Then I send the response saying, </span><span class="line" data-startTime="910">hey, sorry I couldn't </span><span class="line" data-startTime="912">process the message. </span></p>

<p><span class="line" data-startTime="915">Go bug somebody else. </span> <span class="line" data-startTime="916">Otherwise, I'd check to see if </span><span class="line" data-startTime="916">the incoming request has a </span><span class="line" data-startTime="920">property called myCustomMessage. </span> <span class="line" data-startTime="923">So that way, I know that the </span><span class="line" data-startTime="923">message is in a format that I </span><span class="line" data-startTime="926">know how to handle. </span> <span class="line" data-startTime="927">And if it is, then all I'm doing </span><span class="line" data-startTime="927">here is calling some </span><span class="line" data-startTime="931">code that just puts some </span><span class="line" data-startTime="931">information inside that result </span><span class="line" data-startTime="936">area that shows the sender </span><span class="line" data-startTime="936">ID and the value </span><span class="line" data-startTime="939">of the custom message. </span> <span class="line" data-startTime="940">And then I send back a response </span><span class="line" data-startTime="940">saying, hey, the </span><span class="line" data-startTime="943">result is I got your message. </span></p>

<p><span class="line" data-startTime="945">And you can see that the message </span><span class="line" data-startTime="945">I'm sending back is a </span><span class="line" data-startTime="948">JSON object. </span> <span class="line" data-startTime="949">And again, this is optional. </span> <span class="line" data-startTime="951">This will be sent back to the </span><span class="line" data-startTime="951">caller when the message </span><span class="line" data-startTime="954">receiving is completed. </span> <span class="line" data-startTime="956">Otherwise, if the request coming </span><span class="line" data-startTime="956">in doesn't have the </span><span class="line" data-startTime="959">myCustomMessage property, then </span><span class="line" data-startTime="959">I say, no idea what you're </span><span class="line" data-startTime="962">talking about. </span> <span class="line" data-startTime="963">Sorry, you must think </span><span class="line" data-startTime="963">I'm somebody else. </span> <span class="line" data-startTime="965">So the handler function takes </span><span class="line" data-startTime="965">in the request, it tells me </span><span class="line" data-startTime="968">who the sender was, and I've </span><span class="line" data-startTime="968">got this little callback </span><span class="line" data-startTime="970">function right here called </span><span class="line" data-startTime="970">sendResponse. </span> <span class="line" data-startTime="973">SendResponse is just the </span><span class="line" data-startTime="973">function that sends the </span><span class="line" data-startTime="975">response back to the caller. </span> <span class="line" data-startTime="978">All right, let's go ahead </span><span class="line" data-startTime="978">and take a look at </span><span class="line" data-startTime="979">the extension code. </span> <span class="line" data-startTime="982">And what you'll notice is that </span><span class="line" data-startTime="982">the extension code is pretty </span><span class="line" data-startTime="985">much the same. </span></p>

<p><span class="line" data-startTime="987">The difference here is that &mdash; </span><span class="line" data-startTime="987">well, actually, there's not </span><span class="line" data-startTime="989">much of a difference. </span> <span class="line" data-startTime="990">It's basically calling the same </span><span class="line" data-startTime="990">send message function </span><span class="line" data-startTime="993">that the app uses, so </span><span class="line" data-startTime="993">the API is the same. </span> <span class="line" data-startTime="996">The only real difference is </span><span class="line" data-startTime="996">that inside the event page </span><span class="line" data-startTime="1000">that I have for my extension, </span><span class="line" data-startTime="1000">I'm using the WebKit </span><span class="line" data-startTime="1003">notifications API to create </span><span class="line" data-startTime="1003">a desktop notification </span><span class="line" data-startTime="1008">indicating that I received </span><span class="line" data-startTime="1008">the incoming message. </span> <span class="line" data-startTime="1011">And so I've got the same handler </span><span class="line" data-startTime="1011">right here on the </span><span class="line" data-startTime="1014">runtime namespace, so </span><span class="line" data-startTime="1014">add event listener </span><span class="line" data-startTime="1016">onMessageExternal, and now I </span><span class="line" data-startTime="1016">have a way to communicate </span><span class="line" data-startTime="1020">messages both to and from apps </span><span class="line" data-startTime="1020">as well as extensions. </span></p>

<p><span class="line" data-startTime="1024">Not terrible rocket science, </span><span class="line" data-startTime="1024">pretty straightforward, really </span><span class="line" data-startTime="1028">easy way for your apps and </span><span class="line" data-startTime="1028">extensions to communicate with </span><span class="line" data-startTime="1032">each other. </span> <span class="line" data-startTime="1032">Just one API that you need to </span><span class="line" data-startTime="1032">know for sending messages, </span><span class="line" data-startTime="1035">just one event handler that </span><span class="line" data-startTime="1035">you need to know about for </span><span class="line" data-startTime="1037">receiving messages, and it's </span><span class="line" data-startTime="1037">pretty straightforward. </span> <span class="line" data-startTime="1041">So I think if we have any </span><span class="line" data-startTime="1041">questions, we can take them </span><span class="line" data-startTime="1043">now, otherwise I will see you </span><span class="line" data-startTime="1043">again at our next installment </span><span class="line" data-startTime="1047">of Chrome Apps Office Hours. </span> <span class="line" data-startTime="1049">Please feel free to hit us up </span><span class="line" data-startTime="1049">on our Google+ G+ channel if </span><span class="line" data-startTime="1053">you have any questions. </span></p>

<p><span class="line" data-startTime="1054">If you think of any after the </span><span class="line" data-startTime="1054">show is over, I monitor the </span><span class="line" data-startTime="1057">channel all the time, or you can </span><span class="line" data-startTime="1057">hit me up personally, Joe </span><span class="line" data-startTime="1059">Marini, also on G+ and I </span><span class="line" data-startTime="1059">will see you online. </span> <span class="line" data-startTime="1062">Thanks very much </span><span class="line" data-startTime="1062">for joining me. </span> <span class="line" data-startTime="1064">Hope you enjoyed this </span><span class="line" data-startTime="1064">installment. </span> <span class="line" data-startTime="1065">Now go out and build some </span><span class="line" data-startTime="1065">connected apps. </span> <span class="line" data-startTime="1073">[MUSIC PLAYING - AMBIENT </span><span class="line" data-startTime="1073">ELECTRONIC] </span></p>