<p class="speaker"><span class="line" data-starttime="0"><span class="speakerName">Jake</span>: He wrote the </span><span class="line" data-startTime="0">high-performance browser </span><span class="line" data-startTime="2">networking book </span><span class="line" data-startTime="2">for O'Reilly, which </span><span class="line" data-startTime="3">is also available for free </span><span class="line" data-startTime="3">in the links on his website. </span><span class="line" data-startTime="7">If the internet is </span><span class="line" data-startTime="7">a series of tubes, </span><span class="line" data-startTime="8">then this is one of the </span><span class="line" data-startTime="8">world's greatest plumbers. </span><span class="line" data-startTime="11">Hands together </span><span class="line" data-startTime="11">for Ilya Grigorik. </span><span class="line" data-startTime="12">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="15"><span class="speakerName">Ilya Grigorik</span>: All </span><span class="line" data-startTime="15">right, thanks, Jake. </span> <span class="line" data-startTime="18">All right, so we're going </span><span class="line" data-startTime="18">to talk a little bit </span><span class="line" data-startTime="20">about optimizing network </span><span class="line" data-startTime="20">performance and specifically </span><span class="line" data-startTime="23">some of the things that we've </span><span class="line" data-startTime="23">been doing on the Chrome team </span><span class="line" data-startTime="25">for helping deliver better apps. </span> <span class="line" data-startTime="28">And I guess the first </span><span class="line" data-startTime="28">thing that we should ask </span><span class="line" data-startTime="32">is, does it matter, right? </span><span class="line" data-startTime="33">What's the problem </span><span class="line" data-startTime="33">we're trying to solve? </span><span class="line" data-startTime="35">And Tony Gentilcore, who's </span><span class="line" data-startTime="35">actually somewhere here </span><span class="line" data-startTime="38">in the room, ran a </span><span class="line" data-startTime="38">number of different tests </span><span class="line" data-startTime="41">over the last couple </span><span class="line" data-startTime="41">of months, where </span><span class="line" data-startTime="43">he's been kind of deep </span><span class="line" data-startTime="43">diving into where do we </span><span class="line" data-startTime="46">spend our time. </span></p>

<p><span class="line" data-startTime="46">Like when we try to </span><span class="line" data-startTime="46">render a web page, what </span><span class="line" data-startTime="48">are the bottlenecks today? </span><span class="line" data-startTime="50">And he has a series </span><span class="line" data-startTime="50">of these posts </span><span class="line" data-startTime="52">on Blink-dev if you guys </span><span class="line" data-startTime="52">are interested in kind </span><span class="line" data-startTime="54">of low-level guts </span><span class="line" data-startTime="54">of how Blink works </span><span class="line" data-startTime="56">and in Chrome kind </span><span class="line" data-startTime="56">of end to end. </span> <span class="line" data-startTime="58">But one test to me stood </span><span class="line" data-startTime="58">out, in particular. </span> <span class="line" data-startTime="60">And this is a test where we took </span><span class="line" data-startTime="60">the top 1 million Alexa sites </span><span class="line" data-startTime="63">and just ran them </span><span class="line" data-startTime="63">through Chrome and looked </span><span class="line" data-startTime="65">at where do we spend our time? </span><span class="line" data-startTime="66">Like in terms of the </span><span class="line" data-startTime="66">actual main Blink thread, </span><span class="line" data-startTime="69">where is the time going? </span><span class="line" data-startTime="71">And the big takeaway here </span><span class="line" data-startTime="71">is that, approximately 70% </span><span class="line" data-startTime="74">of the time, we're </span><span class="line" data-startTime="74">just basically idling </span><span class="line" data-startTime="77">on the network, right? </span><span class="line" data-startTime="78">That's that big chunk </span><span class="line" data-startTime="78">right here in the blue. </span></p>

<p><span class="line" data-startTime="80">And then after that, you have </span><span class="line" data-startTime="80">all of your usual offenders, </span><span class="line" data-startTime="83">things like, well, we've </span><span class="line" data-startTime="83">got to get the JavaScript, </span><span class="line" data-startTime="85">we've got to paint pixels, </span><span class="line" data-startTime="85">and all the rest, do layouts. </span> <span class="line" data-startTime="88">So this should not </span><span class="line" data-startTime="88">be surprising, right? </span><span class="line" data-startTime="90">This is specifically </span><span class="line" data-startTime="90">for the first page load. </span> <span class="line" data-startTime="92">There's a very </span><span class="line" data-startTime="92">different profile, </span><span class="line" data-startTime="94">of course, once </span><span class="line" data-startTime="94">the page is loaded </span><span class="line" data-startTime="95">and you're interacting </span><span class="line" data-startTime="95">with the page. </span> <span class="line" data-startTime="97">That's a different problem. </span> <span class="line" data-startTime="98">But this, in part, </span><span class="line" data-startTime="98">is one big problem </span><span class="line" data-startTime="101">that we're trying to solve. </span> <span class="line" data-startTime="102">Like how do we make this blue </span><span class="line" data-startTime="102">part smaller or just go faster? </span><span class="line" data-startTime="106">So there's two takeaways </span><span class="line" data-startTime="106">that you can take from this. </span></p>

<p><span class="line" data-startTime="109">One is, page loads in </span><span class="line" data-startTime="109">network are a problem, right? </span><span class="line" data-startTime="113">That's 70% of loading </span><span class="line" data-startTime="113">the page today. </span> <span class="line" data-startTime="116">But the good news is that if we </span><span class="line" data-startTime="116">can do anything to the network </span><span class="line" data-startTime="120">stack in terms of improving </span><span class="line" data-startTime="120">that latency and improving </span><span class="line" data-startTime="122">performance, it's going to have </span><span class="line" data-startTime="122">a significant impact on how </span><span class="line" data-startTime="125">we experience the web. </span> <span class="line" data-startTime="126">So even small fractional </span><span class="line" data-startTime="126">wins in this space </span><span class="line" data-startTime="129">will, in fact, have </span><span class="line" data-startTime="129">huge performance impact. </span> <span class="line" data-startTime="133">So kind of with that in </span><span class="line" data-startTime="133">mind, what I wanted to do </span><span class="line" data-startTime="135">is actually take a look </span><span class="line" data-startTime="135">at some of the things </span><span class="line" data-startTime="139">that we've been working </span><span class="line" data-startTime="139">on internally in Chrome. </span> <span class="line" data-startTime="141">This is kind of </span><span class="line" data-startTime="141">looking under the hood. </span></p>

<p><span class="line" data-startTime="142">This is not perhaps </span><span class="line" data-startTime="142">something that you </span><span class="line" data-startTime="144">would be, as a developer, </span><span class="line" data-startTime="144">looking at APIs </span><span class="line" data-startTime="147">or trying to figure </span><span class="line" data-startTime="147">out how to optimize. </span> <span class="line" data-startTime="148">This is the kind of stuff </span><span class="line" data-startTime="148">that Chrome does internally. </span> <span class="line" data-startTime="151">But we have a very dedicated </span><span class="line" data-startTime="151">and awesome performance team </span><span class="line" data-startTime="154">working on this stuff. </span> <span class="line" data-startTime="155">And I wanted to highlight </span><span class="line" data-startTime="155">some of the wins </span><span class="line" data-startTime="157">that we had over the last year </span><span class="line" data-startTime="157">and also kind of essentially </span><span class="line" data-startTime="161">so you know what </span><span class="line" data-startTime="161">we're working on </span><span class="line" data-startTime="162">and also highlight the </span><span class="line" data-startTime="162">potential areas for improvement </span><span class="line" data-startTime="166">in the future. </span> <span class="line" data-startTime="167">And after that, </span><span class="line" data-startTime="167">we're going to look </span><span class="line" data-startTime="168">at some of the new </span><span class="line" data-startTime="168">additions, specifically, </span><span class="line" data-startTime="171">kind of low-level </span><span class="line" data-startTime="171">network plumbing </span><span class="line" data-startTime="172">stuff that we support </span><span class="line" data-startTime="172">in Chrome, so things </span><span class="line" data-startTime="174">like SPDY, some notes about </span><span class="line" data-startTime="174">QUIC, and other things. </span></p>

<p><span class="line" data-startTime="178">And then finally we'll talk </span><span class="line" data-startTime="178">about measurements, right? </span><span class="line" data-startTime="180">Of course, performance </span><span class="line" data-startTime="180">is the big theme </span><span class="line" data-startTime="182">throughout this entire event. </span> <span class="line" data-startTime="184">And we want to make sure </span><span class="line" data-startTime="184">that we give you the tools </span><span class="line" data-startTime="186">to measure performance </span><span class="line" data-startTime="186">in the best way possible. </span> <span class="line" data-startTime="190">You should be able to measure </span><span class="line" data-startTime="190">anything you need in the stack. </span> <span class="line" data-startTime="193">So first, let's actually </span><span class="line" data-startTime="193">do a quick survey. </span> <span class="line" data-startTime="197">This is going to be kind </span><span class="line" data-startTime="197">of all over the map, </span><span class="line" data-startTime="199">but I want to </span><span class="line" data-startTime="199">highlight a few things. </span> <span class="line" data-startTime="201">First, in Chrome 26, we landed </span><span class="line" data-startTime="201">the new asynchronous DNS </span><span class="line" data-startTime="206">resolver, which is kind of </span><span class="line" data-startTime="206">low-level plumbing stuff, </span><span class="line" data-startTime="209">so we're no longer relying </span><span class="line" data-startTime="209">on the operating system DNS </span><span class="line" data-startTime="212">resolver. </span> <span class="line" data-startTime="212">We actually have our own. </span> <span class="line" data-startTime="215">Today, it's available on </span><span class="line" data-startTime="215">Windows, Mac, and Chrome </span><span class="line" data-startTime="219">OS, so this is </span><span class="line" data-startTime="219">not yet on mobile. </span> <span class="line" data-startTime="222">Hopefully, it will be. </span> <span class="line" data-startTime="224">So why did we want to do this? </span><span class="line" data-startTime="226">Well, first of all, it </span><span class="line" data-startTime="226">gives us a lot more control. </span></p>

<p><span class="line" data-startTime="228">We can do a lot </span><span class="line" data-startTime="228">smarter strategies </span><span class="line" data-startTime="231">for high resolve names </span><span class="line" data-startTime="231">and other things. </span> <span class="line" data-startTime="234">And here's some </span><span class="line" data-startTime="234">performance numbers </span><span class="line" data-startTime="236">in terms of what we've seen </span><span class="line" data-startTime="236">since we've landed M26. </span> <span class="line" data-startTime="241">It took us a couple of tries </span><span class="line" data-startTime="241">to actually kind of get </span><span class="line" data-startTime="243">the performance numbers </span><span class="line" data-startTime="243">as good as they are. </span> <span class="line" data-startTime="245">But you can see that </span><span class="line" data-startTime="245">there's significant wins </span><span class="line" data-startTime="247">across the board. </span> <span class="line" data-startTime="248">And for things like </span><span class="line" data-startTime="248">Chrome OS, we've </span><span class="line" data-startTime="250">reduced the DNS resolution </span><span class="line" data-startTime="250">time significantly, 36%. </span> <span class="line" data-startTime="254">And not only that, </span><span class="line" data-startTime="254">but we're also </span><span class="line" data-startTime="256">measuring the resolve </span><span class="line" data-startTime="256">plus TCP connect. </span> <span class="line" data-startTime="258">And you can see that there </span><span class="line" data-startTime="258">are wins across the board. </span> <span class="line" data-startTime="260">And of course, some of </span><span class="line" data-startTime="260">these are platform specific. </span> <span class="line" data-startTime="262">Some platforms just </span><span class="line" data-startTime="262">do a better job </span><span class="line" data-startTime="264">of implementing their DNS </span><span class="line" data-startTime="264">resolvers in the first place. </span> <span class="line" data-startTime="267">But the cool thing is </span><span class="line" data-startTime="267">that we can actually now </span><span class="line" data-startTime="269">kind of take control </span><span class="line" data-startTime="269">now that we've </span><span class="line" data-startTime="270">got the basic plumbing working. </span></p>

<p><span class="line" data-startTime="272">We can take control </span><span class="line" data-startTime="272">and do smarter things. </span> <span class="line" data-startTime="275">So, for example, we can </span><span class="line" data-startTime="275">raise different resolutions </span><span class="line" data-startTime="278">for IPv6 and IPv4. </span> <span class="line" data-startTime="280">We are now actually </span><span class="line" data-startTime="280">doing adaptive retry, </span><span class="line" data-startTime="282">so we actually remember </span><span class="line" data-startTime="282">which DNS servers we've used. </span> <span class="line" data-startTime="285">So we can do a better job of </span><span class="line" data-startTime="285">making these resolutions faster </span><span class="line" data-startTime="290">in the future. </span> <span class="line" data-startTime="292">And this is definitely a </span><span class="line" data-startTime="292">space for a lot of improvement </span><span class="line" data-startTime="296">and also kind of subtle things </span><span class="line" data-startTime="296">like providing better user </span><span class="line" data-startTime="300">error pages, right? </span><span class="line" data-startTime="302">Before you would just </span><span class="line" data-startTime="302">get a failed timeout </span><span class="line" data-startTime="305">from DNS resolution. </span> <span class="line" data-startTime="306">I mean, you just kind </span><span class="line" data-startTime="306">of like, we give up. </span> <span class="line" data-startTime="308">We have no idea. </span> <span class="line" data-startTime="308">We can't give any useful </span><span class="line" data-startTime="308">feedback to the user. </span></p>

<p><span class="line" data-startTime="311">Now we can go </span><span class="line" data-startTime="311">much, much further. </span> <span class="line" data-startTime="312">So that's pretty cool. </span> <span class="line" data-startTime="313">Moving on, in M27, we landed </span><span class="line" data-startTime="313">this big and important </span><span class="line" data-startTime="318">improvement, which is we </span><span class="line" data-startTime="318">completely rewrote how </span><span class="line" data-startTime="320">we schedule resources. </span> <span class="line" data-startTime="321">It's one thing for us </span><span class="line" data-startTime="321">to get the HTML bytes. </span> <span class="line" data-startTime="324">We then discovered </span><span class="line" data-startTime="324">the resources. </span> <span class="line" data-startTime="325">And then we need to figure </span><span class="line" data-startTime="325">out how do we schedule them </span><span class="line" data-startTime="327">efficiently on the wire, </span><span class="line" data-startTime="327">like we care about JavaScript </span><span class="line" data-startTime="330">before images and other things. </span> <span class="line" data-startTime="333">And the big change that we've </span><span class="line" data-startTime="333">done in there, in M27, is we </span><span class="line" data-startTime="337">replaced that scheduler. </span> <span class="line" data-startTime="340">And we also started focusing </span><span class="line" data-startTime="340">on perceived performance. </span> <span class="line" data-startTime="343">So instead of just measuring </span><span class="line" data-startTime="343">the page load time, </span><span class="line" data-startTime="345">we started measuring </span><span class="line" data-startTime="345">things like speed index. </span></p>

<p><span class="line" data-startTime="347">So what kind of optimizations </span><span class="line" data-startTime="347">we can do in Resource Scheduler </span><span class="line" data-startTime="350">to improve speed index. </span> <span class="line" data-startTime="351">In fact, we've made decisions </span><span class="line" data-startTime="351">where we've intentionally </span><span class="line" data-startTime="355">chosen speed index over </span><span class="line" data-startTime="355">page load time, or unload. </span> <span class="line" data-startTime="359">So there are changes </span><span class="line" data-startTime="359">that have gone </span><span class="line" data-startTime="361">in where we've regressed, </span><span class="line" data-startTime="361">in some cases, on load time. </span> <span class="line" data-startTime="364">But we've improved </span><span class="line" data-startTime="364">speed index, because we </span><span class="line" data-startTime="366">think that perceived </span><span class="line" data-startTime="366">performance, getting </span><span class="line" data-startTime="368">useful pixels on the screen, </span><span class="line" data-startTime="368">is a win for the user. </span> <span class="line" data-startTime="373">And one interesting </span><span class="line" data-startTime="373">takeaway from this work </span><span class="line" data-startTime="376">that was done in M27 was that </span><span class="line" data-startTime="376">we realized that a lot of pages </span><span class="line" data-startTime="380">were actually competing for </span><span class="line" data-startTime="380">bandwidth unnecessarily. </span></p>

<p><span class="line" data-startTime="382">So they were trying to </span><span class="line" data-startTime="382">download too many things. </span> <span class="line" data-startTime="385">We've gotten so good at charting </span><span class="line" data-startTime="385">our assets that it's actually </span><span class="line" data-startTime="388">backfiring on a lot of sites. </span> <span class="line" data-startTime="391">So, in particular, one </span><span class="line" data-startTime="391">big interesting change </span><span class="line" data-startTime="394">that went in in that iteration </span><span class="line" data-startTime="394">was that the new scheduler </span><span class="line" data-startTime="398">would only download up </span><span class="line" data-startTime="398">to 10 images in parallel. </span> <span class="line" data-startTime="400">So, for example, if you </span><span class="line" data-startTime="400">have a gallery of images, </span><span class="line" data-startTime="403">you have let's say 30 </span><span class="line" data-startTime="403">of them on the page, </span><span class="line" data-startTime="405">and you sharded them </span><span class="line" data-startTime="405">in 20 different ways, </span><span class="line" data-startTime="408">we would not open more than </span><span class="line" data-startTime="408">10 connections at once. </span> <span class="line" data-startTime="411">Because we found </span><span class="line" data-startTime="411">that that actually </span><span class="line" data-startTime="412">hurts performance in most cases. </span> <span class="line" data-startTime="416">So if you're developing </span><span class="line" data-startTime="416">your site today, </span><span class="line" data-startTime="419">Chrome will limit you </span><span class="line" data-startTime="419">to 10 image downloads. </span></p>

<p><span class="line" data-startTime="421">But in other browsers, </span><span class="line" data-startTime="421">you'll still have no problem. </span> <span class="line" data-startTime="425">I'm not sure what exact </span><span class="line" data-startTime="425">scheduling algorithms </span><span class="line" data-startTime="428">they're using, but </span><span class="line" data-startTime="428">perhaps something you </span><span class="line" data-startTime="430">should consider on your site. </span> <span class="line" data-startTime="431">There is such thing as </span><span class="line" data-startTime="431">oversharding your site. </span> <span class="line" data-startTime="436">Later in M28, speaking </span><span class="line" data-startTime="436">of perceived performance, </span><span class="line" data-startTime="438">we've also improved the SPDY </span><span class="line" data-startTime="438">performance quite a bit. </span> <span class="line" data-startTime="442">So the change here is </span><span class="line" data-startTime="442">actually pretty awesome </span><span class="line" data-startTime="446">and pretty trivial </span><span class="line" data-startTime="446">in that now that we </span><span class="line" data-startTime="447">have control over the </span><span class="line" data-startTime="447">Resource Scheduler </span><span class="line" data-startTime="449">we said, look, if </span><span class="line" data-startTime="449">you're using SPDY, </span><span class="line" data-startTime="450">we have a much better way </span><span class="line" data-startTime="450">to schedule resources, which </span><span class="line" data-startTime="453">is we know the priority. </span> <span class="line" data-startTime="454">We can send that </span><span class="line" data-startTime="454">priority to the server. </span></p>

<p><span class="line" data-startTime="456">The server can do </span><span class="line" data-startTime="456">the right thing. </span> <span class="line" data-startTime="458">So we won't delay any </span><span class="line" data-startTime="458">resource scheduling </span><span class="line" data-startTime="461">on the client, which is kind of </span><span class="line" data-startTime="461">this like this fake latency &mdash; </span><span class="line" data-startTime="463">not fake, unnecessary </span><span class="line" data-startTime="463">latency that we're otherwise </span><span class="line" data-startTime="466">introducing. </span> <span class="line" data-startTime="467">So if you're using SPDY, </span><span class="line" data-startTime="467">this is a nice performance </span><span class="line" data-startTime="470">win because it allows </span><span class="line" data-startTime="470">us once again to get </span><span class="line" data-startTime="472">those pixels visible </span><span class="line" data-startTime="472">earlier on the screen. </span> <span class="line" data-startTime="475">So if you haven't </span><span class="line" data-startTime="475">already, I definitely </span><span class="line" data-startTime="478">encourage you to look </span><span class="line" data-startTime="478">into playing with SPDY. </span></p>

<p><span class="line" data-startTime="481">So if you're using Apache, you </span><span class="line" data-startTime="481">can sell them on SPDY EngineX, </span><span class="line" data-startTime="484">and other server are </span><span class="line" data-startTime="484">supported as well. </span> <span class="line" data-startTime="486">And actually, we'll come back </span><span class="line" data-startTime="486">to SPDY a little bit later. </span> <span class="line" data-startTime="490">In M30, there's been </span><span class="line" data-startTime="490">yet more improvements </span><span class="line" data-startTime="494">to the Resource Scheduler. </span> <span class="line" data-startTime="496">We keep improving </span><span class="line" data-startTime="496">and iterating on all </span><span class="line" data-startTime="499">of these different strategies. </span> <span class="line" data-startTime="500">One interesting kind of takeaway </span><span class="line" data-startTime="500">that we had in this iteration </span><span class="line" data-startTime="504">was that we actually </span><span class="line" data-startTime="504">started distinguishing </span><span class="line" data-startTime="507">between optimizing for the </span><span class="line" data-startTime="507">popular sites versus sites </span><span class="line" data-startTime="510">in the tail. </span> <span class="line" data-startTime="511">There's different </span><span class="line" data-startTime="511">ways that sites </span><span class="line" data-startTime="512">are constructed in terms of </span><span class="line" data-startTime="512">kind of patterns that they use, </span><span class="line" data-startTime="515">how they lay out the </span><span class="line" data-startTime="515">resources, and all the rest. </span></p>

<p><span class="line" data-startTime="517">And this iteration, </span><span class="line" data-startTime="517">in particular, </span><span class="line" data-startTime="521">actually helped </span><span class="line" data-startTime="521">quite a bit in terms </span><span class="line" data-startTime="523">of accelerating the </span><span class="line" data-startTime="523">sites in the long tail. </span> <span class="line" data-startTime="527">And if you think about </span><span class="line" data-startTime="527">a 10% improvement </span><span class="line" data-startTime="529">in firing the </span><span class="line" data-startTime="529">onload, this is just </span><span class="line" data-startTime="531">like one Chrome m </span><span class="line" data-startTime="531">revision, it's huge. </span> <span class="line" data-startTime="535">That's a 10% win in onload and </span><span class="line" data-startTime="535">a 9% improvement in speed index. </span> <span class="line" data-startTime="539">So there's just faster </span><span class="line" data-startTime="539">pixels on the screen. </span> <span class="line" data-startTime="541">So these are impressive numbers. </span></p>

<p><span class="line" data-startTime="544">And I think what's most exciting </span><span class="line" data-startTime="544">for me is if we look forward, </span><span class="line" data-startTime="547">based on the work that we </span><span class="line" data-startTime="547">have in the pipeline now, </span><span class="line" data-startTime="550">and project it a little bit, </span><span class="line" data-startTime="550">we see significant improvements </span><span class="line" data-startTime="554">that we can still make </span><span class="line" data-startTime="554">to these algorithms. </span> <span class="line" data-startTime="556">So right now, at least based on </span><span class="line" data-startTime="556">the current code that we have, </span><span class="line" data-startTime="560">you can expect more wins </span><span class="line" data-startTime="560">rolling out to our users. </span> <span class="line" data-startTime="566">So this is great. </span> <span class="line" data-startTime="567">As far as I'm concerned, </span><span class="line" data-startTime="567">this is free performance. </span> <span class="line" data-startTime="570">Like the apps, </span><span class="line" data-startTime="570">it's the same apps, </span><span class="line" data-startTime="571">they're just rendering </span><span class="line" data-startTime="571">faster, because we're </span><span class="line" data-startTime="573">doing a better job </span><span class="line" data-startTime="573">of how we schedule </span><span class="line" data-startTime="575">those resources in Chrome. </span> <span class="line" data-startTime="577">So that's pretty exciting. </span></p>

<p><span class="line" data-startTime="579">Another huge win that's coming </span><span class="line" data-startTime="579">and that's available on Android </span><span class="line" data-startTime="585">today is what we're </span><span class="line" data-startTime="585">calling the "simple Cache". </span> <span class="line" data-startTime="587">So one of the problems </span><span class="line" data-startTime="587">that we realized </span><span class="line" data-startTime="590">that we had on Android </span><span class="line" data-startTime="590">and mobile phones, </span><span class="line" data-startTime="593">in particular, is that in order </span><span class="line" data-startTime="593">for us to dispatch a network </span><span class="line" data-startTime="597">request, we actually had to do </span><span class="line" data-startTime="597">a number of different context </span><span class="line" data-startTime="600">switches. </span> <span class="line" data-startTime="600">Like we would go from the main </span><span class="line" data-startTime="600">threads to an I/O thread to </span><span class="line" data-startTime="603">we'd do another jump. </span> <span class="line" data-startTime="604">We would always do a check </span><span class="line" data-startTime="604">on the file system, which </span><span class="line" data-startTime="609">in itself can take </span><span class="line" data-startTime="609">quite a bit of time. </span> <span class="line" data-startTime="611">And the idea behind Simple Cache </span><span class="line" data-startTime="611">is to try to simplify that, </span><span class="line" data-startTime="614">as the name implies, </span><span class="line" data-startTime="614">to the extent </span><span class="line" data-startTime="617">that we can, and ideally, avoid </span><span class="line" data-startTime="617">any context switches ongoing </span><span class="line" data-startTime="621">to disk. </span> <span class="line" data-startTime="622">So that should help </span><span class="line" data-startTime="622">quite a bit in terms </span><span class="line" data-startTime="624">of the actual performance </span><span class="line" data-startTime="624">of the Simple Cache. </span></p>

<p><span class="line" data-startTime="628">And here's some early numbers. </span> <span class="line" data-startTime="629">These look very, very good. </span> <span class="line" data-startTime="631">The blue line on the </span><span class="line" data-startTime="631">bottom is the original, </span><span class="line" data-startTime="634">and what you see </span><span class="line" data-startTime="634">here is the latency. </span> <span class="line" data-startTime="637">So you kind of had this </span><span class="line" data-startTime="637">like long tail distribution, </span><span class="line" data-startTime="639">where basically every </span><span class="line" data-startTime="639">request incurred </span><span class="line" data-startTime="641">a minimum of several </span><span class="line" data-startTime="641">milliseconds. </span> <span class="line" data-startTime="643">But then you had </span><span class="line" data-startTime="643">this long tail, where </span><span class="line" data-startTime="645">it wasn't atypical for a </span><span class="line" data-startTime="645">request to take 50 milliseconds </span><span class="line" data-startTime="648">before we could </span><span class="line" data-startTime="648">even dispatch it. </span> <span class="line" data-startTime="650">Because we had to kind </span><span class="line" data-startTime="650">of do a couple of thread </span><span class="line" data-startTime="652">hops and then check </span><span class="line" data-startTime="652">disk, or check </span><span class="line" data-startTime="655">Flash, in this case, and </span><span class="line" data-startTime="655">kind of bubble that back up. </span> <span class="line" data-startTime="658">With the new Simple </span><span class="line" data-startTime="658">Cache, basically we </span><span class="line" data-startTime="660">can just complete </span><span class="line" data-startTime="660">it immediately, </span><span class="line" data-startTime="662">most of the requests. </span> <span class="line" data-startTime="663">Every once in a while, we </span><span class="line" data-startTime="663">still have some delays, </span><span class="line" data-startTime="666">but this is the </span><span class="line" data-startTime="666">type of line where </span><span class="line" data-startTime="669">you want to see on all of </span><span class="line" data-startTime="669">your performance charts. </span> <span class="line" data-startTime="672">And this is quite amazing </span><span class="line" data-startTime="672">because once we have the Simple </span><span class="line" data-startTime="676">Cache, based on </span><span class="line" data-startTime="676">our measurements, </span><span class="line" data-startTime="680">this has improved all </span><span class="line" data-startTime="680">HTTP transfers, the speed </span><span class="line" data-startTime="682">of these transfers, </span><span class="line" data-startTime="682">in terms of the time </span><span class="line" data-startTime="684">from the first </span><span class="line" data-startTime="684">request byte that we </span><span class="line" data-startTime="686">want to send to </span><span class="line" data-startTime="686">completion by 10%, which, </span><span class="line" data-startTime="688">if you think about </span><span class="line" data-startTime="688">it, is massive, right? </span><span class="line" data-startTime="691">And not only that, </span><span class="line" data-startTime="691">but in M31 we're </span><span class="line" data-startTime="693">seeing 7% page load </span><span class="line" data-startTime="693">time improvement. </span></p>

<p><span class="line" data-startTime="696">So this is simply eliminating </span><span class="line" data-startTime="696">that extra latency </span><span class="line" data-startTime="699">at the beginning of </span><span class="line" data-startTime="699">each and every request. </span> <span class="line" data-startTime="702">And once again, there's </span><span class="line" data-startTime="702">more work going into M32, </span><span class="line" data-startTime="705">and we hope that we can </span><span class="line" data-startTime="705">improve this even further. </span> <span class="line" data-startTime="707">So this is huge, </span><span class="line" data-startTime="707">and this will be </span><span class="line" data-startTime="710">an awesome win for </span><span class="line" data-startTime="710">mobile browsers. </span> <span class="line" data-startTime="713">And then finally, one of </span><span class="line" data-startTime="713">the last things that we've </span><span class="line" data-startTime="716">started iterating towards </span><span class="line" data-startTime="716">the end of the year here, </span><span class="line" data-startTime="718">and something that I'm </span><span class="line" data-startTime="718">really, really excited about, </span><span class="line" data-startTime="720">is focusing on improving the </span><span class="line" data-startTime="720">speculative optimizations </span><span class="line" data-startTime="725">that we already do in Chrome. </span> <span class="line" data-startTime="726">We do a lot of speculative </span><span class="line" data-startTime="726">optimization as it is today. </span> <span class="line" data-startTime="730">But now we're also looking </span><span class="line" data-startTime="730">at how do we refine these? </span><span class="line" data-startTime="732">How do we expose the </span><span class="line" data-startTime="732">right primitives, </span><span class="line" data-startTime="734">and how do we make </span><span class="line" data-startTime="734">better use of them? </span><span class="line" data-startTime="735">One example is something </span><span class="line" data-startTime="735">like prefetch, right? </span><span class="line" data-startTime="737">So if you're familiar </span><span class="line" data-startTime="737">with a link rel=prefetch, </span><span class="line" data-startTime="741">what it allows you </span><span class="line" data-startTime="741">to say is, hey, </span><span class="line" data-startTime="742">I will need this resource </span><span class="line" data-startTime="742">perhaps on the next page. </span></p>

<p><span class="line" data-startTime="745">That could be an </span><span class="line" data-startTime="745">HTML page, that could </span><span class="line" data-startTime="746">be a CSS file, an </span><span class="line" data-startTime="746">image, what have you. </span> <span class="line" data-startTime="749">Please fetch this </span><span class="line" data-startTime="749">for me, such that I </span><span class="line" data-startTime="750">don't have to fetch that, </span><span class="line" data-startTime="750">or I can just fetch it out </span><span class="line" data-startTime="753">of the cache when the </span><span class="line" data-startTime="753">user initiates that load. </span> <span class="line" data-startTime="756">One of the gotchas there </span><span class="line" data-startTime="756">was, if that request did not </span><span class="line" data-startTime="759">complete in time for </span><span class="line" data-startTime="759">the next navigation, </span><span class="line" data-startTime="761">it would get canceled. </span> <span class="line" data-startTime="762">So you kind of incur </span><span class="line" data-startTime="762">the double download </span><span class="line" data-startTime="764">and it just didn't make sense. </span> <span class="line" data-startTime="766">So, for example, we have </span><span class="line" data-startTime="766">this new patch that's in. </span> <span class="line" data-startTime="769">It's not available in Canary </span><span class="line" data-startTime="769">yet, but it's coming soon, </span><span class="line" data-startTime="772">called detachable prefetch, </span><span class="line" data-startTime="772">which will actually </span><span class="line" data-startTime="774">keep the prefetch alive even </span><span class="line" data-startTime="774">as you navigate away, such </span><span class="line" data-startTime="777">that you can still make </span><span class="line" data-startTime="777">use of that resource </span><span class="line" data-startTime="779">once you get to </span><span class="line" data-startTime="779">your destination. </span></p>

<p><span class="line" data-startTime="781">So that's pretty awesome. </span> <span class="line" data-startTime="782">And this will also apply to </span><span class="line" data-startTime="782">other things like prerenders </span><span class="line" data-startTime="786">and other types of improvements. </span> <span class="line" data-startTime="788">So this is pretty cool. </span> <span class="line" data-startTime="790">And this is how, </span><span class="line" data-startTime="790">basically, it looks. </span> <span class="line" data-startTime="792">Chrome allows you to actually </span><span class="line" data-startTime="792">dynamically create these hints. </span> <span class="line" data-startTime="796">So, for example, if, let's </span><span class="line" data-startTime="796">say, the user initiates </span><span class="line" data-startTime="799">some sort of an action, like </span><span class="line" data-startTime="799">they click on the Checkout </span><span class="line" data-startTime="801">button or they click </span><span class="line" data-startTime="801">on Add To Cart button </span><span class="line" data-startTime="803">and you know that they're going </span><span class="line" data-startTime="803">to go to the checkout page, </span><span class="line" data-startTime="806">at that moment you can actually </span><span class="line" data-startTime="806">inject one of these link </span><span class="line" data-startTime="809">elements and say, </span><span class="line" data-startTime="809">hey, I would like </span><span class="line" data-startTime="810">you to prefetch that asset </span><span class="line" data-startTime="810">for me, because now I </span><span class="line" data-startTime="814">know I will need it. </span> <span class="line" data-startTime="815">And vice versa, you can </span><span class="line" data-startTime="815">actually delete this element out </span><span class="line" data-startTime="818">of the DOM, and we will </span><span class="line" data-startTime="818">cancel the prefetch as well. </span></p>

<p><span class="line" data-startTime="821">So you can dynamically </span><span class="line" data-startTime="821">script how and basically </span><span class="line" data-startTime="824">drive Chrome to do these </span><span class="line" data-startTime="824">prefetches for you. </span> <span class="line" data-startTime="826">So this is pretty cool stuff. </span> <span class="line" data-startTime="828">And I think this </span><span class="line" data-startTime="828">is a place where </span><span class="line" data-startTime="830">we can do a lot more </span><span class="line" data-startTime="830">in the future as well. </span> <span class="line" data-startTime="834">So that's a little bit about </span><span class="line" data-startTime="834">kind of the low-level guts </span><span class="line" data-startTime="837">and improvements in Chrome. </span> <span class="line" data-startTime="839">Now let's take a look </span><span class="line" data-startTime="839">at some of the protocols </span><span class="line" data-startTime="841">that we've been working on. </span> <span class="line" data-startTime="843">So back in 2009, roughly, </span><span class="line" data-startTime="843">actually four years ago </span><span class="line" data-startTime="848">almost on the dot, </span><span class="line" data-startTime="848">we announced our work </span><span class="line" data-startTime="850">on SPDY or initial </span><span class="line" data-startTime="850">efforts around SPDY. </span></p>

<p><span class="line" data-startTime="853">And since then we've gone, </span><span class="line" data-startTime="853">I think, quite a long way. </span> <span class="line" data-startTime="855">We've had several iterations </span><span class="line" data-startTime="855">of the protocol itself, so v2, </span><span class="line" data-startTime="858">v3, 3.1. </span> <span class="line" data-startTime="860">Now we're working on Version 4. </span> <span class="line" data-startTime="861">And that actually </span><span class="line" data-startTime="861">became the foundation </span><span class="line" data-startTime="863">of HTTP 2.0, which </span><span class="line" data-startTime="863">is pretty exciting. </span> <span class="line" data-startTime="866">And HTTP 2.0 work in itself </span><span class="line" data-startTime="866">is progressing quite rapidly, </span><span class="line" data-startTime="869">and I'm really </span><span class="line" data-startTime="869">excited about that. </span> <span class="line" data-startTime="871">So today we actually have </span><span class="line" data-startTime="871">both SPDY and HTTP 2.0 support </span><span class="line" data-startTime="876">in Chrome, although HTTP </span><span class="line" data-startTime="876">2.0 is under a flag. </span> <span class="line" data-startTime="879">But it is there. </span> <span class="line" data-startTime="880">It's something that </span><span class="line" data-startTime="880">we're iterating on. </span></p>

<p><span class="line" data-startTime="881">And then once HTTP 2.0 &mdash; I </span><span class="line" data-startTime="881">know this is a common question. </span> <span class="line" data-startTime="884">Once HTTP 2.0 is marked </span><span class="line" data-startTime="884">as ready, as a standard, </span><span class="line" data-startTime="887">we'll just switch </span><span class="line" data-startTime="887">over to HTTP 2.0. </span> <span class="line" data-startTime="889">So think of SPDY as kind of like </span><span class="line" data-startTime="889">an experimental ground for us </span><span class="line" data-startTime="892">to try different ideas </span><span class="line" data-startTime="892">and feed them back </span><span class="line" data-startTime="895">into the HTTP 2.0 spec, right? </span><span class="line" data-startTime="897">So like it'd be great </span><span class="line" data-startTime="897">if we had this feature. </span> <span class="line" data-startTime="899">Let's go and try and </span><span class="line" data-startTime="899">implement that feature. </span> <span class="line" data-startTime="901">We try it, and we </span><span class="line" data-startTime="901">discover the rough edges, </span><span class="line" data-startTime="904">and then we kind of feed </span><span class="line" data-startTime="904">that back into HTTP 2.0. </span> <span class="line" data-startTime="907">So earlier in the </span><span class="line" data-startTime="907">year, we actually </span><span class="line" data-startTime="909">deployed SPDY 3.1 across </span><span class="line" data-startTime="909">all of our Google servers </span><span class="line" data-startTime="914">and, of course, added </span><span class="line" data-startTime="914">support in Chrome. </span></p>

<p><span class="line" data-startTime="916">Firefox also supports SPDY v3.1. </span> <span class="line" data-startTime="918">And here's some numbers. </span> <span class="line" data-startTime="921">We've never released </span><span class="line" data-startTime="921">this before, </span><span class="line" data-startTime="923">but these are the </span><span class="line" data-startTime="923">performance numbers </span><span class="line" data-startTime="925">that we see for SPDY across some </span><span class="line" data-startTime="925">of the major Google properties, </span><span class="line" data-startTime="929">and these are consistent across </span><span class="line" data-startTime="929">all the different Google sites. </span> <span class="line" data-startTime="932">So you're kind of looking at </span><span class="line" data-startTime="932">the right order of magnitude, </span><span class="line" data-startTime="935">anywhere between 20 to 40 to </span><span class="line" data-startTime="935">50% improvement in latency as </span><span class="line" data-startTime="940">compared to HTTPS. </span> <span class="line" data-startTime="942">And in some cases, </span><span class="line" data-startTime="942">we're actually &mdash; so even </span><span class="line" data-startTime="945">despite the fact that we have </span><span class="line" data-startTime="945">these extra handshake round </span><span class="line" data-startTime="949">trips and all the rest </span><span class="line" data-startTime="949">in CLS, oftentimes </span><span class="line" data-startTime="952">we actually end up going </span><span class="line" data-startTime="952">faster than just vanilla HTTP </span><span class="line" data-startTime="955">as well, which is, </span><span class="line" data-startTime="955">of course, the point </span><span class="line" data-startTime="958">of this whole exercise </span><span class="line" data-startTime="958">to begin with. </span> <span class="line" data-startTime="960">So this is really exciting. </span> <span class="line" data-startTime="961">And I guess the important bit </span><span class="line" data-startTime="961">here is also that not only is </span><span class="line" data-startTime="965">it helping the median, which is, </span><span class="line" data-startTime="965">of course, what we like to see, </span><span class="line" data-startTime="968">but it's also consistently </span><span class="line" data-startTime="968">helping all of our users, </span><span class="line" data-startTime="970">the ones on fast connections, </span><span class="line" data-startTime="970">and especially so for the ones </span><span class="line" data-startTime="974">that are ion the slow </span><span class="line" data-startTime="974">connections or the ones </span><span class="line" data-startTime="975">with the high RTT times, </span><span class="line" data-startTime="975">which is especially </span><span class="line" data-startTime="978">relevant for things like mobile, </span><span class="line" data-startTime="978">where RTTs are definitely </span><span class="line" data-startTime="981">higher. </span></p>

<p><span class="line" data-startTime="982">So this is really exciting. </span> <span class="line" data-startTime="983">This is very promising. </span> <span class="line" data-startTime="986">And I hope that this will help </span><span class="line" data-startTime="986">kind of drive the HTTP 2.0 </span><span class="line" data-startTime="988">adoption as well. </span> <span class="line" data-startTime="990">So if you haven't </span><span class="line" data-startTime="990">looked at SPDY, </span><span class="line" data-startTime="992">I definitely encourage </span><span class="line" data-startTime="992">you to do so. </span> <span class="line" data-startTime="994">There are modules for </span><span class="line" data-startTime="994">virtually every popular server </span><span class="line" data-startTime="996">out there today that </span><span class="line" data-startTime="996">you can enable and just </span><span class="line" data-startTime="998">play with, enable </span><span class="line" data-startTime="998">it on your site. </span> <span class="line" data-startTime="1001">And there's also </span><span class="line" data-startTime="1001">commercial support for it </span><span class="line" data-startTime="1004">as well, so F5, Akamai, </span><span class="line" data-startTime="1004">and others support SPDY. </span></p>

<p><span class="line" data-startTime="1008">So that's pretty cool. </span> <span class="line" data-startTime="1009">And as I mentioned, we </span><span class="line" data-startTime="1009">also do have HTTP 2.0. </span> <span class="line" data-startTime="1013">If you're curious, if </span><span class="line" data-startTime="1013">you want to play with it, </span><span class="line" data-startTime="1016">we do have HTTP 2.0 </span><span class="line" data-startTime="1016">support under a flag. </span> <span class="line" data-startTime="1018">So you can actually </span><span class="line" data-startTime="1018">enable that and then </span><span class="line" data-startTime="1020">run it against </span><span class="line" data-startTime="1020">your local server. </span> <span class="line" data-startTime="1022">I think the only big </span><span class="line" data-startTime="1022">public site that supports </span><span class="line" data-startTime="1025">HTTP 2.0 today is twitter.com. </span> <span class="line" data-startTime="1028">So in theory, you </span><span class="line" data-startTime="1028">can test it on that. </span> <span class="line" data-startTime="1030">But there are also </span><span class="line" data-startTime="1030">open source servers </span><span class="line" data-startTime="1034">that speak HTTP 2.0 today </span><span class="line" data-startTime="1034">that you can play with. </span></p>

<p><span class="line" data-startTime="1036">So SPDY is kind of a production </span><span class="line" data-startTime="1036">version, if you will. </span> <span class="line" data-startTime="1040">HTTP 2.0 is coming soon </span><span class="line" data-startTime="1040">and hopefully, fingers </span><span class="line" data-startTime="1042">crossed, sometime in 2014. </span> <span class="line" data-startTime="1046">So that's SPDY. </span> <span class="line" data-startTime="1050">You may have caught the </span><span class="line" data-startTime="1050">wind of some other protocol </span><span class="line" data-startTime="1053">that we started working on </span><span class="line" data-startTime="1053">earlier in the year, which </span><span class="line" data-startTime="1055">is QUIC, which is Quick </span><span class="line" data-startTime="1055">UDP Internet Connections. </span> <span class="line" data-startTime="1058">And the idea here is </span><span class="line" data-startTime="1058">actually to kind of take </span><span class="line" data-startTime="1060">what we've done with SPDY </span><span class="line" data-startTime="1060">and go one step beyond. </span> <span class="line" data-startTime="1064">And this was actually our intent </span><span class="line" data-startTime="1064">right at the very beginning </span><span class="line" data-startTime="1067">when we started </span><span class="line" data-startTime="1067">thinking of SPDY. </span> <span class="line" data-startTime="1069">But it was just </span><span class="line" data-startTime="1069">too much of a leap </span><span class="line" data-startTime="1071">to change both the protocol, </span><span class="line" data-startTime="1071">kind of the application </span><span class="line" data-startTime="1074">protocol, and the </span><span class="line" data-startTime="1074">transfer protocols. </span></p>

<p><span class="line" data-startTime="1076">So we kind of decoupled those, </span><span class="line" data-startTime="1076">and QUIC is basically that. </span> <span class="line" data-startTime="1079">We're trying to go one </span><span class="line" data-startTime="1079">step further and say, well, </span><span class="line" data-startTime="1083">could we build a </span><span class="line" data-startTime="1083">better transport </span><span class="line" data-startTime="1085">for HTTP traffic, </span><span class="line" data-startTime="1085">period, on top of UDP? </span><span class="line" data-startTime="1087">Could we experiment </span><span class="line" data-startTime="1087">with new ideas? </span><span class="line" data-startTime="1091">The core premise of this stuff </span><span class="line" data-startTime="1091">is it's all about latency. </span> <span class="line" data-startTime="1094">We're trying to eliminate </span><span class="line" data-startTime="1094">latency everywhere we can. </span> <span class="line" data-startTime="1096">So can we eliminate </span><span class="line" data-startTime="1096">extra round trips </span><span class="line" data-startTime="1099">to establish the secure tunnel? </span><span class="line" data-startTime="1102">Can we do better </span><span class="line" data-startTime="1102">congestion control? </span><span class="line" data-startTime="1104">What if we do packet pacing? </span><span class="line" data-startTime="1105">What if we do forward </span><span class="line" data-startTime="1105">error correction? </span><span class="line" data-startTime="1107">What can we do to </span><span class="line" data-startTime="1107">innovate in the space </span><span class="line" data-startTime="1109">to help reduce the page </span><span class="line" data-startTime="1109">load times on the web? </span><span class="line" data-startTime="1113">And there's a lot of </span><span class="line" data-startTime="1113">interesting ideas. </span></p>

<p><span class="line" data-startTime="1115">If you guys are curious </span><span class="line" data-startTime="1115">about this kind of stuff, </span><span class="line" data-startTime="1117">we posted our design docs. </span> <span class="line" data-startTime="1119">And it's a very long doc. </span> <span class="line" data-startTime="1121">I encourage you to read </span><span class="line" data-startTime="1121">it and give us feedback. </span> <span class="line" data-startTime="1124">We have a Google group for that. </span> <span class="line" data-startTime="1127">And this question comes </span><span class="line" data-startTime="1127">up quite frequently, </span><span class="line" data-startTime="1129">which is, like, </span><span class="line" data-startTime="1129">what's the point? </span><span class="line" data-startTime="1131">What are you trying to do here? </span><span class="line" data-startTime="1133">And the answer is very simple. </span> <span class="line" data-startTime="1135">We just want to make faster </span><span class="line" data-startTime="1135">internet for everybody to use. </span> <span class="line" data-startTime="1139">And there are two ways </span><span class="line" data-startTime="1139">that this will happen. </span> <span class="line" data-startTime="1141">One is we end up building </span><span class="line" data-startTime="1141">a really awesome protocol </span><span class="line" data-startTime="1143">that everybody loves </span><span class="line" data-startTime="1143">and we take it to ITF. </span> <span class="line" data-startTime="1145">And just like with </span><span class="line" data-startTime="1145">HTTP 2.0 and SPDY, </span><span class="line" data-startTime="1148">we work with the community and </span><span class="line" data-startTime="1148">kind of make that the standard. </span> <span class="line" data-startTime="1151">That's plausible and </span><span class="line" data-startTime="1151">maybe that will happen. </span></p>

<p><span class="line" data-startTime="1154">The alternative route is, we </span><span class="line" data-startTime="1154">just experiment with QUIC. </span> <span class="line" data-startTime="1157">We experiment with </span><span class="line" data-startTime="1157">different ideas. </span> <span class="line" data-startTime="1159">And those ideas get adopted, </span><span class="line" data-startTime="1159">the good ones get adopted </span><span class="line" data-startTime="1162">into existing protocol </span><span class="line" data-startTime="1162">stacks, like TCP and TLS. </span> <span class="line" data-startTime="1164">And actually we're </span><span class="line" data-startTime="1164">already seeing </span><span class="line" data-startTime="1166">some of that, where based on our </span><span class="line" data-startTime="1166">experience with the encryption </span><span class="line" data-startTime="1170">stuff in QUIC, the TLS </span><span class="line" data-startTime="1170">working group is looking </span><span class="line" data-startTime="1173">at improvements </span><span class="line" data-startTime="1173">in terms of can we </span><span class="line" data-startTime="1174">eliminate some </span><span class="line" data-startTime="1174">extra round trips. </span> <span class="line" data-startTime="1176">So in either case, the point </span><span class="line" data-startTime="1176">is, no matter which one of these </span><span class="line" data-startTime="1179">happens, the users will win. </span></p>

<p><span class="line" data-startTime="1181">We'll get faster internet. </span> <span class="line" data-startTime="1182">And that's our intent with QUIC. </span> <span class="line" data-startTime="1184">So that's pretty awesome. </span> <span class="line" data-startTime="1187">We don't have any benchmarks </span><span class="line" data-startTime="1187">for it as of today. </span> <span class="line" data-startTime="1191">We're still at a point where we </span><span class="line" data-startTime="1191">want to make sure that it works </span><span class="line" data-startTime="1193">and it works correctly </span><span class="line" data-startTime="1193">before we start </span><span class="line" data-startTime="1195">optimizing kind of all </span><span class="line" data-startTime="1195">the edges around it. </span> <span class="line" data-startTime="1198">But you can actually </span><span class="line" data-startTime="1198">play with QUIC today. </span> <span class="line" data-startTime="1201">We have it deployed </span><span class="line" data-startTime="1201">on Google servers, </span><span class="line" data-startTime="1203">and you can also enable it. </span> <span class="line" data-startTime="1204">If you go into Chrome flags, </span><span class="line" data-startTime="1204">you can flip QUIC Support. </span> <span class="line" data-startTime="1208">And then you can, for </span><span class="line" data-startTime="1208">example, access YouTube, </span><span class="line" data-startTime="1210">and you'll get served &mdash; </span><span class="line" data-startTime="1210">youtube.com or other Google </span><span class="line" data-startTime="1214">service &mdash; over UDP, over QUIC. </span> <span class="line" data-startTime="1216">And if you're curious, you can </span><span class="line" data-startTime="1216">dive into Chrome net internals </span><span class="line" data-startTime="1219">and kind of look at </span><span class="line" data-startTime="1219">the actual protocol </span><span class="line" data-startTime="1221">and all this other stuff. </span></p>

<p><span class="line" data-startTime="1223">So if you're into kind of </span><span class="line" data-startTime="1223">low-level networking protocols, </span><span class="line" data-startTime="1227">definitely a thing you want </span><span class="line" data-startTime="1227">to check out and play with. </span> <span class="line" data-startTime="1229">There's lots of interesting </span><span class="line" data-startTime="1229">ideas in the protocol. </span> <span class="line" data-startTime="1234">All right, shifting gears. </span> <span class="line" data-startTime="1235">Linus mentioned Chrome </span><span class="line" data-startTime="1235">data compression. </span> <span class="line" data-startTime="1237">This is something that we </span><span class="line" data-startTime="1237">launched early in the year. </span> <span class="line" data-startTime="1240">As you heard, it provides </span><span class="line" data-startTime="1240">roughly 50% data savings. </span> <span class="line" data-startTime="1242">That's kind of the average </span><span class="line" data-startTime="1242">number for a lot of users. </span> <span class="line" data-startTime="1244">It turns out there's a lot </span><span class="line" data-startTime="1244">of poorly compressed content </span><span class="line" data-startTime="1248">on the web. </span></p>

<p><span class="line" data-startTime="1249">People still forget to </span><span class="line" data-startTime="1249">gzip their content, which </span><span class="line" data-startTime="1252">is one of the optimizations </span><span class="line" data-startTime="1252">that we apply for text, like </span><span class="line" data-startTime="1256">[INAUDIBLE]. </span> <span class="line" data-startTime="1256">And we also convert </span><span class="line" data-startTime="1256">all the images </span><span class="line" data-startTime="1258">to IP, which provides </span><span class="line" data-startTime="1258">a significant savings. </span> <span class="line" data-startTime="1261">So this is a big benefit </span><span class="line" data-startTime="1261">to a lot of users. </span> <span class="line" data-startTime="1263">But one thing that </span><span class="line" data-startTime="1263">Linus didn't mention </span><span class="line" data-startTime="1265">is that there are other </span><span class="line" data-startTime="1265">secondary benefits to that. </span> <span class="line" data-startTime="1268">Because we run over SPDY, </span><span class="line" data-startTime="1268">so between your phone </span><span class="line" data-startTime="1271">and the Google server, it's </span><span class="line" data-startTime="1271">actually a SPDY connection. </span> <span class="line" data-startTime="1274">It's an encrypted connection. </span> <span class="line" data-startTime="1275">So I actually use Chrome </span><span class="line" data-startTime="1275">data compression in part </span><span class="line" data-startTime="1279">for the data compression </span><span class="line" data-startTime="1279">part, but also </span><span class="line" data-startTime="1282">partially to secure my browsing. </span> <span class="line" data-startTime="1284">Because when I enable this, </span><span class="line" data-startTime="1284">the secure traffic, if you're </span><span class="line" data-startTime="1288">connecting to your bank, </span><span class="line" data-startTime="1288">for example, an HTTPS site, </span><span class="line" data-startTime="1290">it will go directly to the site. </span></p>

<p><span class="line" data-startTime="1292">So that traffic is encrypted. </span> <span class="line" data-startTime="1293">But if you're trying to connect </span><span class="line" data-startTime="1293">to some unencrypted site, </span><span class="line" data-startTime="1296">it'll just flow basically </span><span class="line" data-startTime="1296">as it is on the wire. </span> <span class="line" data-startTime="1300">With Chrome data </span><span class="line" data-startTime="1300">compression, that </span><span class="line" data-startTime="1301">goes through a secure tunnel, </span><span class="line" data-startTime="1301">so even if you're on a Starbucks </span><span class="line" data-startTime="1305">Wi-Fi or whatever, </span><span class="line" data-startTime="1305">some unencrypted Wi-Fi </span><span class="line" data-startTime="1309">and you're browsing around, </span><span class="line" data-startTime="1309">all of your data is encrypted. </span> <span class="line" data-startTime="1313">So that's really nice. </span> <span class="line" data-startTime="1315">And maybe one important thing </span><span class="line" data-startTime="1315">to highlight with Chrome data </span><span class="line" data-startTime="1319">compression is, it is still </span><span class="line" data-startTime="1319">the full fidelity HTML5 web </span><span class="line" data-startTime="1324">experience, right? </span><span class="line" data-startTime="1324">We're not doing anything </span><span class="line" data-startTime="1324">to modify your site. </span> <span class="line" data-startTime="1327">We're not trying to </span><span class="line" data-startTime="1327">render it on the server. </span> <span class="line" data-startTime="1329">Like you have all of the </span><span class="line" data-startTime="1329">flexibility of JavaScript, CSS, </span><span class="line" data-startTime="1332">and all the rest on your phone. </span> <span class="line" data-startTime="1335">That's where the </span><span class="line" data-startTime="1335">code gets executed. </span> <span class="line" data-startTime="1337">So we're just modifying and </span><span class="line" data-startTime="1337">optimizing some of the assets </span><span class="line" data-startTime="1340">as they get delivered. </span></p>

<p><span class="line" data-startTime="1341">Some common questions that I get </span><span class="line" data-startTime="1341">about Chrome data compression, </span><span class="line" data-startTime="1345">something you should know, is </span><span class="line" data-startTime="1345">this is going through a proxy. </span> <span class="line" data-startTime="1347">So if you're developing </span><span class="line" data-startTime="1347">a site where you're </span><span class="line" data-startTime="1349">relying on GoIP </span><span class="line" data-startTime="1349">functionality to customize </span><span class="line" data-startTime="1353">the location to the user or </span><span class="line" data-startTime="1353">maybe serve relevant ads, </span><span class="line" data-startTime="1356">you should be looking </span><span class="line" data-startTime="1356">for the X Forwarded </span><span class="line" data-startTime="1358">For header, which </span><span class="line" data-startTime="1358">is the IP address </span><span class="line" data-startTime="1360">of the client as forwarded </span><span class="line" data-startTime="1360">by the Chrome data proxy. </span> <span class="line" data-startTime="1364">And similarly, if </span><span class="line" data-startTime="1364">for whatever reason </span><span class="line" data-startTime="1367">you absolutely want to make </span><span class="line" data-startTime="1367">sure that we don't do anything </span><span class="line" data-startTime="1371">to your content, </span><span class="line" data-startTime="1371">you can actually </span><span class="line" data-startTime="1372">opt out on a per-resource basis. </span></p>

<p><span class="line" data-startTime="1374">If you add a no </span><span class="line" data-startTime="1374">transform header, </span><span class="line" data-startTime="1377">it basically tells the </span><span class="line" data-startTime="1377">Chrome data proxy to just </span><span class="line" data-startTime="1380">be hands off with that resource. </span> <span class="line" data-startTime="1381">So we won't </span><span class="line" data-startTime="1381">reoptimize that image, </span><span class="line" data-startTime="1384">or we won't recompress </span><span class="line" data-startTime="1384">that text, or other things. </span> <span class="line" data-startTime="1386">So these are standard </span><span class="line" data-startTime="1386">kind of proxy directives. </span> <span class="line" data-startTime="1392">Chrome data compression </span><span class="line" data-startTime="1392">proxies supports it. </span> <span class="line" data-startTime="1395">So, just an FYI. </span> <span class="line" data-startTime="1398">Shifting gears, web sockets. </span> <span class="line" data-startTime="1400">This is really, really exciting. </span> <span class="line" data-startTime="1402">Do we have any web socket </span><span class="line" data-startTime="1402">developers in the room? </span><span class="line" data-startTime="1405">Yes. </span> <span class="line" data-startTime="1406">Awesome. </span> <span class="line" data-startTime="1407">So web socket </span><span class="line" data-startTime="1407">compression is going </span><span class="line" data-startTime="1410">to be live in M32, which </span><span class="line" data-startTime="1410">is a long overdue feature. </span> <span class="line" data-startTime="1414">One of the gotchas </span><span class="line" data-startTime="1414">with web sockets </span><span class="line" data-startTime="1415">was that you could </span><span class="line" data-startTime="1415">transfer binary in text, </span><span class="line" data-startTime="1418">but text would always </span><span class="line" data-startTime="1418">go as uncompressed </span><span class="line" data-startTime="1422">in both directions. </span></p>

<p><span class="line" data-startTime="1424">Now that we have </span><span class="line" data-startTime="1424">the spec up to date </span><span class="line" data-startTime="1425">and we already have </span><span class="line" data-startTime="1425">the code in Chrome, </span><span class="line" data-startTime="1428">you can actually negotiate </span><span class="line" data-startTime="1428">the deflate compression </span><span class="line" data-startTime="1433">to apply in both directions, </span><span class="line" data-startTime="1433">and the server can selectively </span><span class="line" data-startTime="1435">compress any given frame. </span> <span class="line" data-startTime="1437">And the client, as </span><span class="line" data-startTime="1437">of today, Chrome </span><span class="line" data-startTime="1439">will compress every </span><span class="line" data-startTime="1439">single frame going out </span><span class="line" data-startTime="1445">from your mobile device or </span><span class="line" data-startTime="1445">from your desktop device. </span> <span class="line" data-startTime="1448">And I'm not going to </span><span class="line" data-startTime="1448">go into details here, </span><span class="line" data-startTime="1450">but we also, actually, </span><span class="line" data-startTime="1450">the spec provides </span><span class="line" data-startTime="1452">a number of different </span><span class="line" data-startTime="1452">parameters to customize </span><span class="line" data-startTime="1454">how the compression </span><span class="line" data-startTime="1454">will be done. </span> <span class="line" data-startTime="1456">For example, the size of the </span><span class="line" data-startTime="1456">sliding window, so essentially </span><span class="line" data-startTime="1458">you can control the </span><span class="line" data-startTime="1458">resources used on your server </span><span class="line" data-startTime="1462">and on your client, </span><span class="line" data-startTime="1462">plus some other flags. </span> <span class="line" data-startTime="1464">So this is really, </span><span class="line" data-startTime="1464">really exciting, </span><span class="line" data-startTime="1465">because this has definitely been </span><span class="line" data-startTime="1465">a sore point for web sockets. </span></p>

<p><span class="line" data-startTime="1470">We heard about WebRTC </span><span class="line" data-startTime="1470">and DataChannel. </span> <span class="line" data-startTime="1473">The way I think </span><span class="line" data-startTime="1473">about DataChannel </span><span class="line" data-startTime="1475">is basically WebSocket, </span><span class="line" data-startTime="1475">but over UDP and P2P. </span> <span class="line" data-startTime="1478">So we can communicate </span><span class="line" data-startTime="1478">directly between devices. </span> <span class="line" data-startTime="1481">We don't have to go through </span><span class="line" data-startTime="1481">an intermediary like a server. </span> <span class="line" data-startTime="1485">And DataChannel and M31 </span><span class="line" data-startTime="1485">has now officially switched </span><span class="line" data-startTime="1489">to SCTP protocol. </span> <span class="line" data-startTime="1491">So previously we were </span><span class="line" data-startTime="1491">using RTP data channels, </span><span class="line" data-startTime="1494">and that was the reason for </span><span class="line" data-startTime="1494">some of the incompatibilities </span><span class="line" data-startTime="1498">with some of the other vendors. </span> <span class="line" data-startTime="1499">But as of M31, SCTP </span><span class="line" data-startTime="1499">is the default, </span><span class="line" data-startTime="1502">and we will aggressively remove </span><span class="line" data-startTime="1502">support for RTP data channels. </span> <span class="line" data-startTime="1507">So if you're using </span><span class="line" data-startTime="1507">data channels today, </span><span class="line" data-startTime="1510">this is something </span><span class="line" data-startTime="1510">you want to revisit. </span> <span class="line" data-startTime="1512">And if you're not familiar </span><span class="line" data-startTime="1512">with data channels, </span><span class="line" data-startTime="1514">I encourage you to </span><span class="line" data-startTime="1514">check out the links. </span> <span class="line" data-startTime="1516">I'll post the slides </span><span class="line" data-startTime="1516">later for how this works </span><span class="line" data-startTime="1519">and why this is awesome. </span></p>

<p><span class="line" data-startTime="1520">Because it allows you </span><span class="line" data-startTime="1520">to define things like, </span><span class="line" data-startTime="1523">fire-and-forget semantics, </span><span class="line" data-startTime="1523">don't retransmit. </span> <span class="line" data-startTime="1526">So it's a really nice transport </span><span class="line" data-startTime="1526">for doing low-latency data </span><span class="line" data-startTime="1530">exchange. </span> <span class="line" data-startTime="1533">And then finally, let's talk </span><span class="line" data-startTime="1533">about measurements, right? </span><span class="line" data-startTime="1536">So there's a lot of kind </span><span class="line" data-startTime="1536">of protocol improvements </span><span class="line" data-startTime="1538">that are going on. </span> <span class="line" data-startTime="1540">But as we know, we need to </span><span class="line" data-startTime="1540">be able to measure things </span><span class="line" data-startTime="1542">in order to improve them. </span> <span class="line" data-startTime="1544">So, of course, we're all </span><span class="line" data-startTime="1544">familiar with navigation </span><span class="line" data-startTime="1546">timing, or I hope we are. </span> <span class="line" data-startTime="1547">Most of the people </span><span class="line" data-startTime="1547">here I expect would be. </span> <span class="line" data-startTime="1550">You can get detailed </span><span class="line" data-startTime="1550">low-level stats </span><span class="line" data-startTime="1553">about how long did </span><span class="line" data-startTime="1553">each connection take </span><span class="line" data-startTime="1555">in terms of DNS times, TCP </span><span class="line" data-startTime="1555">time, and all the other things. </span> <span class="line" data-startTime="1558">You can throw that into your </span><span class="line" data-startTime="1558">analytics solution here. </span></p>

<p><span class="line" data-startTime="1561">I'm showing you Google </span><span class="line" data-startTime="1561">Analytics, which </span><span class="line" data-startTime="1562">allows you to segment </span><span class="line" data-startTime="1562">this data to say, well, </span><span class="line" data-startTime="1565">I want to look at my mobile </span><span class="line" data-startTime="1565">users versus desktop. </span> <span class="line" data-startTime="1567">You can segment it </span><span class="line" data-startTime="1567">by any other variable </span><span class="line" data-startTime="1570">you define, like has a user </span><span class="line" data-startTime="1570">clicked the Checkout button, </span><span class="line" data-startTime="1574">or have they </span><span class="line" data-startTime="1574">registered, et cetera. </span> <span class="line" data-startTime="1575">This is all great. </span> <span class="line" data-startTime="1577">One gotcha with this is this is </span><span class="line" data-startTime="1577">only for the main page, right? </span><span class="line" data-startTime="1580">What about the other 85 </span><span class="line" data-startTime="1580">resources or 100 resources </span><span class="line" data-startTime="1583">that you have on your page? </span><span class="line" data-startTime="1584">How are those performing? </span><span class="line" data-startTime="1585">Well in Chrome, we have support </span><span class="line" data-startTime="1585">for resource timing, which </span><span class="line" data-startTime="1589">gives you that same level of </span><span class="line" data-startTime="1589">access to all of the network </span><span class="line" data-startTime="1592">metadata, or </span><span class="line" data-startTime="1592">timestamps, I should </span><span class="line" data-startTime="1595">say, on a per-resource basis. </span></p>

<p><span class="line" data-startTime="1597">So you can see here </span><span class="line" data-startTime="1597">that you can actually </span><span class="line" data-startTime="1600">query for a specific </span><span class="line" data-startTime="1600">resource, like your JavaScript </span><span class="line" data-startTime="1603">file that you're loading. </span> <span class="line" data-startTime="1604">Maybe you're loading </span><span class="line" data-startTime="1604">it from CDN and you're </span><span class="line" data-startTime="1605">wondering how well </span><span class="line" data-startTime="1605">is my CDN performing. </span> <span class="line" data-startTime="1608">You can get your </span><span class="line" data-startTime="1608">real user measurement </span><span class="line" data-startTime="1610">data for that specific </span><span class="line" data-startTime="1610">resource and then look up </span><span class="line" data-startTime="1612">the time for DNS, TCP connect </span><span class="line" data-startTime="1612">time, total transfer time, </span><span class="line" data-startTime="1616">et cetera. </span> <span class="line" data-startTime="1617">The only thing that </span><span class="line" data-startTime="1617">you need to be aware of </span><span class="line" data-startTime="1619">is that the resource has to </span><span class="line" data-startTime="1619">manually opt in and allow </span><span class="line" data-startTime="1622">the data to be </span><span class="line" data-startTime="1622">gathered to begin with. </span> <span class="line" data-startTime="1624">This is done for privacy </span><span class="line" data-startTime="1624">reasons to make sure </span><span class="line" data-startTime="1626">that somebody can't just iterate </span><span class="line" data-startTime="1626">or recache and figure out </span><span class="line" data-startTime="1631">where you've been in the </span><span class="line" data-startTime="1631">past, or something like it. </span></p>

<p><span class="line" data-startTime="1634">So for your own resources </span><span class="line" data-startTime="1634">you need to add this header. </span> <span class="line" data-startTime="1637">And then if you're using </span><span class="line" data-startTime="1637">third party resources, </span><span class="line" data-startTime="1639">if that origin is already </span><span class="line" data-startTime="1639">not providing this header, </span><span class="line" data-startTime="1643">then you should </span><span class="line" data-startTime="1643">ask them to do so. </span> <span class="line" data-startTime="1645">Because here's one example where </span><span class="line" data-startTime="1645">I have a web font on my site. </span> <span class="line" data-startTime="1651">Web fonts delay when </span><span class="line" data-startTime="1651">the tech gets painted. </span> <span class="line" data-startTime="1654">So the question is, </span><span class="line" data-startTime="1654">how is &mdash; in this case, </span><span class="line" data-startTime="1657">this is a Google CDN. </span> <span class="line" data-startTime="1658">How is Google CDN </span><span class="line" data-startTime="1658">performing in terms </span><span class="line" data-startTime="1660">of serving the actual font? </span><span class="line" data-startTime="1661">Is it hurting my users? </span><span class="line" data-startTime="1663">Well, now I can actually grab </span><span class="line" data-startTime="1663">that data from Resource Timing, </span><span class="line" data-startTime="1666">just as I showed you </span><span class="line" data-startTime="1666">a few slides ago. </span> <span class="line" data-startTime="1669">And we can just pump that </span><span class="line" data-startTime="1669">into Google Analytics. </span></p>

<p><span class="line" data-startTime="1671">Here you can see that I'm </span><span class="line" data-startTime="1671">tracking the DNS, TCP, </span><span class="line" data-startTime="1673">and transfer times. </span> <span class="line" data-startTime="1674">And it turns out </span><span class="line" data-startTime="1674">that the fonts coming </span><span class="line" data-startTime="1677">from Google CDN, at </span><span class="line" data-startTime="1677">least for my site, </span><span class="line" data-startTime="1681">are being loaded in this case </span><span class="line" data-startTime="1681">within 150 milliseconds, which </span><span class="line" data-startTime="1684">to me was an acceptable time. </span> <span class="line" data-startTime="1687">And that was fine for me. </span> <span class="line" data-startTime="1688">But you can now think about </span><span class="line" data-startTime="1688">using this sort of data </span><span class="line" data-startTime="1691">to define third party SLAs. </span> <span class="line" data-startTime="1693">You rely on third party </span><span class="line" data-startTime="1693">widgets you can say, well, </span><span class="line" data-startTime="1696">your widgets must load in x </span><span class="line" data-startTime="1696">amount of time, et cetera. </span> <span class="line" data-startTime="1699">You can actually track </span><span class="line" data-startTime="1699">this with Resource Timing, </span><span class="line" data-startTime="1701">which is pretty awesome. </span> <span class="line" data-startTime="1703">So as a quick recap, we </span><span class="line" data-startTime="1703">covered a lot of ground. </span> <span class="line" data-startTime="1707">There's a new DNS </span><span class="line" data-startTime="1707">Resolver in Chrome, </span><span class="line" data-startTime="1709">which is double-digit </span><span class="line" data-startTime="1709">performance improvement </span><span class="line" data-startTime="1711">and actual DNS resolutions. </span></p>

<p><span class="line" data-startTime="1712">And the new scheduler </span><span class="line" data-startTime="1712">is definitely </span><span class="line" data-startTime="1714">something we're </span><span class="line" data-startTime="1714">really excited about. </span> <span class="line" data-startTime="1716">We've already seen huge </span><span class="line" data-startTime="1716">improvements there, </span><span class="line" data-startTime="1720">10% and 20% improvement </span><span class="line" data-startTime="1720">in the actual speed </span><span class="line" data-startTime="1722">index and page load times. </span> <span class="line" data-startTime="1724">The Simple Cache stuff </span><span class="line" data-startTime="1724">is a huge win on mobile, </span><span class="line" data-startTime="1727">and I'm really excited </span><span class="line" data-startTime="1727">to have that out there. </span> <span class="line" data-startTime="1729">And then moving </span><span class="line" data-startTime="1729">forward, I'm hoping </span><span class="line" data-startTime="1731">that we can make the preresolve </span><span class="line" data-startTime="1731">and prefetch and the prerender </span><span class="line" data-startTime="1734">stuff much, much smarter. </span> <span class="line" data-startTime="1736">And you saw the </span><span class="line" data-startTime="1736">SPDY wins, right? </span><span class="line" data-startTime="1738">So all of these things </span><span class="line" data-startTime="1738">are incremental, 10% here, </span><span class="line" data-startTime="1741">20% there. </span> <span class="line" data-startTime="1742">Before you know </span><span class="line" data-startTime="1742">it, you're actually </span><span class="line" data-startTime="1744">saving hundreds of milliseconds, </span><span class="line" data-startTime="1744">and sometimes seconds, </span><span class="line" data-startTime="1747">for the user, which </span><span class="line" data-startTime="1747">is a huge win. </span> <span class="line" data-startTime="1749">And some of these things you </span><span class="line" data-startTime="1749">guys need to optimize for. </span></p>

<p><span class="line" data-startTime="1751">These are the things where </span><span class="line" data-startTime="1751">you need to install SPDY, </span><span class="line" data-startTime="1754">you need to configure </span><span class="line" data-startTime="1754">SPDY, you need </span><span class="line" data-startTime="1755">to make sure that your stacks </span><span class="line" data-startTime="1755">are configured correctly. </span> <span class="line" data-startTime="1758">And in other cases, </span><span class="line" data-startTime="1758">it's just also doing </span><span class="line" data-startTime="1760">a better job of scheduling </span><span class="line" data-startTime="1760">this kind of stuff. </span> <span class="line" data-startTime="1763">And then finally, if </span><span class="line" data-startTime="1763">you haven't already, </span><span class="line" data-startTime="1765">I definitely </span><span class="line" data-startTime="1765">encourage you to look </span><span class="line" data-startTime="1766">at things like Nav Timing, User </span><span class="line" data-startTime="1766">Timing, and Resource Timing. </span> <span class="line" data-startTime="1769">So I talked about </span><span class="line" data-startTime="1769">Resource Timing. </span> <span class="line" data-startTime="1771">User Timing allows you to </span><span class="line" data-startTime="1771">measure any chunk of code </span><span class="line" data-startTime="1775">and just get high-resolution </span><span class="line" data-startTime="1775">time stamps for this </span><span class="line" data-startTime="1780">is when I started, this is when </span><span class="line" data-startTime="1780">I ended, and beacon that back </span><span class="line" data-startTime="1783">to your server. </span> <span class="line" data-startTime="1783">So all of these things </span><span class="line" data-startTime="1783">are supported in Chrome. </span></p>

<p><span class="line" data-startTime="1785">And what you can measure, </span><span class="line" data-startTime="1785">you can optimize. </span> <span class="line" data-startTime="1790">So with that, I'll leave </span><span class="line" data-startTime="1790">you the link to the slides. </span> <span class="line" data-startTime="1796">Thank you. </span></p>