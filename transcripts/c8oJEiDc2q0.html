<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>Behind the div's: Chrome Racer</h1>

<h2>Pete LePage, Michael Anthony, Andy Thelander</h2>

<a class="video" href="http://youtu.be/c8oJEiDc2q0">youtu.be/c8oJEiDc2q0</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="0"><span class="speakerName">Pete LePage</span>: Sounds good. </span><span class="line" data-startTime="10">[MUSIC PLAYING] </span><span class="line" data-startTime="77">[MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="138"><span class="speakerName">Pete LePage</span>: All right. </span><span class="line" data-startTime="139">Well, welcome everybody. </span><span class="line" data-startTime="140">And thanks for joining us for </span><span class="line" data-startTime="140">another installment of "Behind </span><span class="line" data-startTime="144">The Divs," a look behind the </span><span class="line" data-startTime="144">scenes of one of the great new </span><span class="line" data-startTime="147">Chrome experiments. </span><span class="line" data-startTime="149">I'm Pete LePage. </span><span class="line" data-startTime="149">I'm a developer advocate </span><span class="line" data-startTime="149">on the Chrome team. </span><span class="line" data-startTime="152">And joining me today, we've got </span><span class="line" data-startTime="152">two of the engineers who </span><span class="line" data-startTime="155">are behind building </span><span class="line" data-startTime="155">of Chrome Racer. </span><span class="line" data-startTime="158">So with that I want to introduce </span><span class="line" data-startTime="158">Michael Anthony and </span><span class="line" data-startTime="162">Andy Thelander who are joining </span><span class="line" data-startTime="162">us from LA, right? </span></p>

<p class="speaker"><span class="line" data-starttime="166"><span class="speakerName">Michael Anthony</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="166"><span class="speakerName">Andy Thelander</span>: That's right. </span></p>

<p class="speaker"><span class="line" data-starttime="166"><span class="speakerName">Pete LePage</span>: Awesome. </span><span class="line" data-startTime="167">Well, welcome guys. </span><span class="line" data-startTime="168">Why don't you introduce </span><span class="line" data-startTime="168">yourselves? </span></p>

<p class="speaker"><span class="line" data-starttime="171"><span class="speakerName">Michael Anthony</span>: Thanks. </span><span class="line" data-startTime="171">Yeah, I'm Michael. </span><span class="line" data-startTime="172">I'm a technical director </span><span class="line" data-startTime="172">at Active Theory. </span><span class="line" data-startTime="174">And on Racer I coded the car's </span><span class="line" data-startTime="174">gameplay and the across device </span><span class="line" data-startTime="178">communication. </span></p>

<p class="speaker"><span class="line" data-starttime="179"><span class="speakerName">Andy Thelander</span>: And, </span><span class="line" data-startTime="179">hey, I'm Andy. </span><span class="line" data-startTime="181">I'm the creative technologist </span><span class="line" data-startTime="181">at Active Theory. </span><span class="line" data-startTime="183">And I did the finalization, </span><span class="line" data-startTime="183">[INAUDIBLE], tweaking the UI, </span><span class="line" data-startTime="186">[INAUDIBLE] and animation, </span><span class="line" data-startTime="186">just all the OS stuff. </span></p>

<p class="speaker"><span class="line" data-starttime="190"><span class="speakerName">Pete LePage</span>: Very cool. </span> <span class="line" data-startTime="191">Well, this is a really </span><span class="line" data-startTime="191">neat experiment. </span> <span class="line" data-startTime="193">And congrats on getting it shown </span><span class="line" data-startTime="193">at Google I/O where it </span><span class="line" data-startTime="197">was launched for </span><span class="line" data-startTime="197">the first time, </span><span class="line" data-startTime="198">especially in the keynote. </span> <span class="line" data-startTime="201">And you guys just published an </span><span class="line" data-startTime="201">"HTML5 Rocks" article on sort </span><span class="line" data-startTime="205">of how you built it. </span> <span class="line" data-startTime="206">So today we're going to take </span><span class="line" data-startTime="206">a look at some of that. </span> <span class="line" data-startTime="208">But as you guys are watching </span><span class="line" data-startTime="208">at home, if you have </span><span class="line" data-startTime="211">questions, if there are things </span><span class="line" data-startTime="211">that you want to ask either </span><span class="line" data-startTime="214">Michael or Andy, feel free to </span><span class="line" data-startTime="214">post them to Google Moderator. </span> <span class="line" data-startTime="217">The link will show up </span><span class="line" data-startTime="217">periodically throughout our </span><span class="line" data-startTime="222">show, just there on the </span><span class="line" data-startTime="222">bottom of the screen. </span> <span class="line" data-startTime="224">And you can post those. </span></p>

<p><span class="line" data-startTime="226">The link for those who are </span><span class="line" data-startTime="226">watching is goo.gl/JFu7J. </span> <span class="line" data-startTime="235">But I want to jump into one of </span><span class="line" data-startTime="235">the first questions that I had </span><span class="line" data-startTime="238">for you guys. </span> <span class="line" data-startTime="240">Walk me through a little bit </span><span class="line" data-startTime="240">about what happens when a </span><span class="line" data-startTime="243">player joins a game. </span> <span class="line" data-startTime="244">So, like, I go, I grab my phone, </span><span class="line" data-startTime="244">and I say connect. </span> <span class="line" data-startTime="248">What happens when you get </span><span class="line" data-startTime="248">all those players </span><span class="line" data-startTime="250">connecting to a game? </span></p>

<p class="speaker"><span class="line" data-starttime="252"><span class="speakerName">Michael Anthony</span>: So when one </span><span class="line" data-startTime="252">person creates the game, it </span><span class="line" data-startTime="256">hits the central App Engine </span><span class="line" data-startTime="256">server and that gives you the </span><span class="line" data-startTime="259">code that you need to share </span><span class="line" data-startTime="259">with the other players. </span></p>

<p class="speaker"><span class="line" data-starttime="263"><span class="speakerName">Pete LePage</span>: So when you say </span><span class="line" data-startTime="263">code, what do you mean code? </span></p>

<p class="speaker"><span class="line" data-starttime="266"><span class="speakerName">Michael Anthony</span>: So that five </span><span class="line" data-startTime="266">character code that the other </span><span class="line" data-startTime="268">players have to did punch in. </span></p>

<p class="speaker"><span class="line" data-starttime="269"><span class="speakerName">Pete LePage</span>: OK. </span><span class="line" data-startTime="269">So that's so that you </span><span class="line" data-startTime="269">know which users are </span><span class="line" data-startTime="273">connecting to which. </span><span class="line" data-startTime="274">We're not talking about HTML5, </span><span class="line" data-startTime="274">or JavaScript code or </span><span class="line" data-startTime="276">anything like that. </span></p>

<p class="speaker"><span class="line" data-starttime="277"><span class="speakerName">Michael Anthony</span>: Right, yeah. </span><span class="line" data-startTime="278">It's just a key that you punch </span><span class="line" data-startTime="278">in with your keyboard on the </span><span class="line" data-startTime="281">other devices. </span><span class="line" data-startTime="283">So there's a bunch of servers </span><span class="line" data-startTime="283">all over the world. </span><span class="line" data-startTime="286">And there's a few in American </span><span class="line" data-startTime="286">and some in Europe. </span><span class="line" data-startTime="288">And basically, when your device </span><span class="line" data-startTime="288">hits the app, it will </span><span class="line" data-startTime="291">ping the servers and choose </span><span class="line" data-startTime="291">the closest location. </span><span class="line" data-startTime="294">And that's going to be </span><span class="line" data-startTime="294">your relay server. </span></p>

<p class="speaker"><span class="line" data-starttime="296"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="296"><span class="speakerName">Michael Anthony</span>: So when the </span><span class="line" data-startTime="296">other devices punch in that </span><span class="line" data-startTime="298">initial game code, they connect </span><span class="line" data-startTime="298">to that same relay </span><span class="line" data-startTime="302">server that the host is on. </span><span class="line" data-startTime="303">And then the host shares which </span><span class="line" data-startTime="303">track has been selected. </span><span class="line" data-startTime="307">So all the devices render the </span><span class="line" data-startTime="307">track, and they build the </span><span class="line" data-startTime="310">track out, and show the </span><span class="line" data-startTime="310">appropriate portion. </span><span class="line" data-startTime="312">And then, you get the ready, </span><span class="line" data-startTime="312">set, go screen and you tap </span><span class="line" data-startTime="316">when everybody's </span><span class="line" data-startTime="316">ready to play. </span><span class="line" data-startTime="318">It slides up, and </span><span class="line" data-startTime="318">the game begins. </span></p>

<p class="speaker"><span class="line" data-starttime="320"><span class="speakerName">Pete LePage</span>: OK. </span><span class="line" data-startTime="320">So let's dive in a little bit </span><span class="line" data-startTime="320">more on what's happening with </span><span class="line" data-startTime="324">each of those steps </span><span class="line" data-startTime="324">technically. </span><span class="line" data-startTime="326">So when you do that initial </span><span class="line" data-startTime="326">connection to figure out what </span><span class="line" data-startTime="332">server is the fastest one, </span><span class="line" data-startTime="332">what are you doing there? </span><span class="line" data-startTime="335">Why are you trying to figure </span><span class="line" data-startTime="335">out which one's the fast &mdash; </span><span class="line" data-startTime="337">well, obviously we know </span><span class="line" data-startTime="337">performance matters. </span><span class="line" data-startTime="339">But what's the sort of </span><span class="line" data-startTime="339">steps on figuring </span><span class="line" data-startTime="343">out which one's closest? </span><span class="line" data-startTime="344">How are you doing that? </span><span class="line" data-startTime="347">MICHAEL ANTHONY: </span><span class="line" data-startTime="347">So [INAUDIBLE] </span><span class="line" data-startTime="348">when the site loads, actually, </span><span class="line" data-startTime="348">during the preloader. </span><span class="line" data-startTime="351">It basically sends a ping to </span><span class="line" data-startTime="351">each relay that's available. </span></p>

<p class="speaker"><span class="line" data-starttime="357"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="358"><span class="speakerName">Michael Anthony</span>: So I believe </span><span class="line" data-startTime="358">it's about 8 relays. </span><span class="line" data-startTime="362">Ed Goose at PA Consulting </span><span class="line" data-startTime="362">actually built all the App </span><span class="line" data-startTime="365">Engine stuff. </span></p>

<p class="speaker"><span class="line" data-starttime="365"><span class="speakerName">Pete LePage</span>: Oh, cool. </span></p>

<p class="speaker"><span class="line" data-starttime="366"><span class="speakerName">Michael Anthony</span>: And </span><span class="line" data-startTime="366">he set it all up. </span><span class="line" data-startTime="367">So it'll actually give the app </span><span class="line" data-startTime="367">a list of all the relays that </span><span class="line" data-startTime="372">are available, and it's </span><span class="line" data-startTime="372">a few in each region. </span><span class="line" data-startTime="373">There's hundreds of relays, but </span><span class="line" data-startTime="373">it only serves up the two </span><span class="line" data-startTime="376">with the lowest load </span><span class="line" data-startTime="376">at the moment. </span><span class="line" data-startTime="379">And it'll give you the </span><span class="line" data-startTime="379">list of relays. </span><span class="line" data-startTime="380">And it'll do a bunch of pings. </span><span class="line" data-startTime="382">And it will choose the </span><span class="line" data-startTime="382">median, obviously. </span><span class="line" data-startTime="384">Because accounting for all the </span><span class="line" data-startTime="384">different network factors </span><span class="line" data-startTime="386">it'll ping each server a few </span><span class="line" data-startTime="386">times and choose the median. </span><span class="line" data-startTime="389">And then the one with the lowest </span><span class="line" data-startTime="389">ping, which is usually </span><span class="line" data-startTime="392">about 50 milliseconds, will be </span><span class="line" data-startTime="392">the one that's selected. </span></p>

<p class="speaker"><span class="line" data-starttime="395"><span class="speakerName">Pete LePage</span>: OK. </span><span class="line" data-startTime="396">Cool. </span><span class="line" data-startTime="396">So once you've selected that </span><span class="line" data-startTime="396">initial server that you're </span><span class="line" data-startTime="400">connecting to, and then the </span><span class="line" data-startTime="400">other phones or tablets, </span><span class="line" data-startTime="407">whatever the devices are, they </span><span class="line" data-startTime="407">know which one you're </span><span class="line" data-startTime="409">connecting to based on that. </span><span class="line" data-startTime="411">And they're all sitting </span><span class="line" data-startTime="411">roughly in </span><span class="line" data-startTime="413">the same space, right? </span><span class="line" data-startTime="415">So you know that they're </span><span class="line" data-startTime="415">probably all on the same </span><span class="line" data-startTime="417">network and that </span><span class="line" data-startTime="417">kind of thing. </span></p>

<p class="speaker"><span class="line" data-starttime="419"><span class="speakerName">Michael Anthony</span>: Yup. </span></p>

<p class="speaker"><span class="line" data-starttime="419"><span class="speakerName">Pete LePage</span>: Now do you think </span><span class="line" data-startTime="419">that there are HTML5 APIs that </span><span class="line" data-startTime="425">would have been helpful </span><span class="line" data-startTime="425">for this? </span><span class="line" data-startTime="427">Do you think the network </span><span class="line" data-startTime="427">performance API would have </span><span class="line" data-startTime="431">been useful? </span></p>

<p class="speaker"><span class="line" data-starttime="433"><span class="speakerName">Michael Anthony</span>: I mean, WebRTC </span><span class="line" data-startTime="433">would have been ideal. </span></p>

<p class="speaker"><span class="line" data-starttime="435"><span class="speakerName">Pete LePage</span>: Oh, right. </span></p>

<p class="speaker"><span class="line" data-starttime="435"><span class="speakerName">Michael Anthony</span>: But I mean, </span><span class="line" data-startTime="435">that's just making it's way to </span><span class="line" data-startTime="437">desktop right now. </span><span class="line" data-startTime="438">So it's a bit of a ways </span><span class="line" data-startTime="438">off on mobile. </span><span class="line" data-startTime="441">I mean, the difference between </span><span class="line" data-startTime="441">WebRTC and WebSockets is that </span><span class="line" data-startTime="445">with WebSockets the devices </span><span class="line" data-startTime="445">don't communicate directly </span><span class="line" data-startTime="447">with each other. </span></p>

<p class="speaker"><span class="line" data-starttime="448"><span class="speakerName">Pete LePage</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="449"><span class="speakerName">Michael Anthony</span>: You start with </span><span class="line" data-startTime="449">the relay server, which </span><span class="line" data-startTime="450">then relays that message out </span><span class="line" data-startTime="450">to all the other players. </span><span class="line" data-startTime="453">With WebRTC they would actually </span><span class="line" data-startTime="453">be able to directly </span><span class="line" data-startTime="455">communicate with each other. </span></p>

<p class="speaker"><span class="line" data-starttime="457"><span class="speakerName">Pete LePage</span>: So you're using </span><span class="line" data-startTime="457">WebSockets then for each </span><span class="line" data-startTime="459">device to connect to that main </span><span class="line" data-startTime="459">server, and then you're </span><span class="line" data-startTime="463">sending the data out between </span><span class="line" data-startTime="463">all of them. </span></p>

<p class="speaker"><span class="line" data-starttime="466"><span class="speakerName">Michael Anthony</span>: Exactly. </span></p>

<p class="speaker"><span class="line" data-starttime="466"><span class="speakerName">Pete LePage</span>: Right, OK. </span></p>

<p class="speaker"><span class="line" data-starttime="468"><span class="speakerName">Michael Anthony</span>: So in essence </span><span class="line" data-startTime="468">they're all connected to each </span><span class="line" data-startTime="469">other, but not without </span><span class="line" data-startTime="469">a little help. </span></p>

<p class="speaker"><span class="line" data-starttime="471"><span class="speakerName">Pete LePage</span>: Right. </span><span class="line" data-startTime="472">So once you've got them all </span><span class="line" data-startTime="472">connected and you've </span><span class="line" data-startTime="474">established sort of, OK, we've </span><span class="line" data-startTime="474">got these three or however </span><span class="line" data-startTime="478">many devices that we want to </span><span class="line" data-startTime="478">play with, how do you figure </span><span class="line" data-startTime="483">out how big your track </span><span class="line" data-startTime="483">should be? </span><span class="line" data-startTime="487">And what are you using </span><span class="line" data-startTime="487">to build that track? </span></p>

<p class="speaker"><span class="line" data-starttime="490"><span class="speakerName">Michael Anthony</span>: So what it'll </span><span class="line" data-startTime="490">do is it will look at the </span><span class="line" data-startTime="493">total widths of all the devices </span><span class="line" data-startTime="493">and it'll look at the </span><span class="line" data-startTime="496">height of the smallest device. </span></p>

<p class="speaker"><span class="line" data-starttime="497"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="498"><span class="speakerName">Michael Anthony</span>: Obviously, </span><span class="line" data-startTime="498">those are the kind of </span><span class="line" data-startTime="500">dimensions that the tracks </span><span class="line" data-startTime="500">have to fit in. </span><span class="line" data-startTime="502">If it was any taller than </span><span class="line" data-startTime="502">the smallest device, it </span><span class="line" data-startTime="503">would look cut off. </span></p>

<p class="speaker"><span class="line" data-starttime="504"><span class="speakerName">Pete LePage</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="505"><span class="speakerName">Michael Anthony</span>: So then once </span><span class="line" data-startTime="505">it gets all those dimensions </span><span class="line" data-startTime="508">and it'll figure out sort of </span><span class="line" data-startTime="508">what each phone is and where </span><span class="line" data-startTime="511">it needs to sit in </span><span class="line" data-startTime="511">the lineup &mdash; </span><span class="line" data-startTime="513">and by line up I mean </span><span class="line" data-startTime="513">when players join &mdash; </span><span class="line" data-startTime="516">they're assigned a specific </span><span class="line" data-startTime="516">joining order. </span> <span class="line" data-startTime="518">And s when it gives you the </span><span class="line" data-startTime="518">colored screens and tells you </span><span class="line" data-startTime="520">you need to reshuffle your phone </span><span class="line" data-startTime="520">to fit in this order. </span> <span class="line" data-startTime="524">And that's set up deliberately </span><span class="line" data-startTime="524">so you get that rainbow color. </span></p>

<p><span class="line" data-startTime="527">So it'll always start with blue </span><span class="line" data-startTime="527">and end with red, and it </span><span class="line" data-startTime="529">will add colors in the middle, </span><span class="line" data-startTime="529">yellow and green and orange. </span></p>

<p class="speaker"><span class="line" data-starttime="532"><span class="speakerName">Pete LePage</span>: OK. </span><span class="line" data-startTime="532">Now do the players get added in </span><span class="line" data-startTime="532">the order that they type in </span><span class="line" data-startTime="536">their code or is it </span><span class="line" data-startTime="536">sort of random? </span></p>

<p class="speaker"><span class="line" data-starttime="539"><span class="speakerName">Andy Thelander</span>: So it's </span><span class="line" data-startTime="539">based on the color. </span><span class="line" data-startTime="541">So if player one joins, </span><span class="line" data-startTime="541">he'll be blue. </span><span class="line" data-startTime="543">If player two joins, </span><span class="line" data-startTime="543">he'll be red. </span><span class="line" data-startTime="545">And if player one leaves </span><span class="line" data-startTime="545">and then comes back, </span><span class="line" data-startTime="547">he'll be blue again. </span></p>

<p class="speaker"><span class="line" data-starttime="547"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="548"><span class="speakerName">Michael Anthony</span>: And then those </span><span class="line" data-startTime="548">join in between those </span><span class="line" data-startTime="550">two, they get situated in </span><span class="line" data-startTime="550">between those two colors. </span><span class="line" data-startTime="553">So the next player would </span><span class="line" data-startTime="553">be yellow and then </span><span class="line" data-startTime="555">green and then orange. </span></p>

<p class="speaker"><span class="line" data-starttime="556"><span class="speakerName">Pete LePage</span>: OK. </span><span class="line" data-startTime="557">So player one's always going </span><span class="line" data-startTime="557">to be on the front. </span><span class="line" data-startTime="558">And player two's always going </span><span class="line" data-startTime="558">to be on the back. </span><span class="line" data-startTime="561">And everybody else will </span><span class="line" data-startTime="561">fit in the middle. </span></p>

<p class="speaker"><span class="line" data-starttime="563"><span class="speakerName">Michael Anthony</span>: Yup. </span></p>

<p class="speaker"><span class="line" data-starttime="563"><span class="speakerName">Andy Thelander</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="564"><span class="speakerName">Pete LePage</span>: OK, cool. </span><span class="line" data-startTime="565">Now when I was reading through </span><span class="line" data-startTime="565">the "HTML5 Rocks" article that </span><span class="line" data-startTime="568">you guys wrote, you ended up </span><span class="line" data-startTime="568">using, I think it was, </span><span class="line" data-startTime="571">Paper.js to render the track. </span><span class="line" data-startTime="574">So I'm kind of curious why you </span><span class="line" data-startTime="574">didn't just use the track &mdash; </span><span class="line" data-startTime="578">and you rendered the </span><span class="line" data-startTime="578">track with Canvas &mdash; </span><span class="line" data-startTime="580">why you don't just use that </span><span class="line" data-startTime="580">SVG element sort of as an </span><span class="line" data-startTime="584">image sprite and position it </span><span class="line" data-startTime="584">and scale it as necessary? </span></p>

<p class="speaker"><span class="line" data-starttime="589"><span class="speakerName">Michael Anthony</span>: Yeah. </span><span class="line" data-startTime="590">I mean, the reason for that is </span><span class="line" data-startTime="590">Stewart Smith at Creative Lab </span><span class="line" data-startTime="593">created the initial prototype </span><span class="line" data-startTime="593">for the game. </span><span class="line" data-startTime="594">He had done it with Paper. </span><span class="line" data-startTime="595">And so we kind of just went off </span><span class="line" data-startTime="595">of what he got working. </span></p>

<p class="speaker"><span class="line" data-starttime="598"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="599"><span class="speakerName">Michael Anthony</span>: And Paper.js </span><span class="line" data-startTime="599">actually makes it really easy. </span><span class="line" data-startTime="604">SVG would kind of just be raw, </span><span class="line" data-startTime="604">you put the track on the </span><span class="line" data-startTime="607">screen and that's kind </span><span class="line" data-startTime="607">of all you get. </span><span class="line" data-startTime="609">With Paper it's just an amazing </span><span class="line" data-startTime="609">math library as well. </span></p>

<p class="speaker"><span class="line" data-starttime="613"><span class="speakerName">Pete LePage</span>: Oh, OK. </span></p>

<p class="speaker"><span class="line" data-starttime="615"><span class="speakerName">Michael Anthony</span>: It'll basically </span><span class="line" data-startTime="615">give us some methods </span><span class="line" data-startTime="618">to calculate tangents and arc </span><span class="line" data-startTime="618">tangents and all kinds of </span><span class="line" data-startTime="620">stuff that we need to basically </span><span class="line" data-startTime="620">move the car each </span><span class="line" data-startTime="623">frame and get the position </span><span class="line" data-startTime="623">rotation x and y values. </span></p>

<p class="speaker"><span class="line" data-starttime="626"><span class="speakerName">Andy Thelander</span>: Yeah. </span><span class="line" data-startTime="627">So Paper.js really helps to </span><span class="line" data-startTime="627">cost down the track, so we </span><span class="line" data-startTime="630">don't need to [INAUDIBLE] the </span><span class="line" data-startTime="630">image and find out where the </span><span class="line" data-startTime="632">points are. </span><span class="line" data-startTime="633">We can just give it the </span><span class="line" data-startTime="633">coordinants, like a </span><span class="line" data-startTime="634">percentage-based [INAUDIBLE] </span><span class="line" data-startTime="634">should be on the track and </span><span class="line" data-startTime="636">then it puts it there. </span><span class="line" data-startTime="637">MICHAEL ANTHONY: </span><span class="line" data-startTime="637">Yeah, exactly. </span></p>

<p class="speaker"><span class="line" data-starttime="637"><span class="speakerName">Pete LePage</span>: OK. </span><span class="line" data-startTime="638">So it provides a lot more </span><span class="line" data-startTime="638">features in terms of knowing </span><span class="line" data-startTime="641">where the car is, which </span><span class="line" data-startTime="641">direction it's </span><span class="line" data-startTime="643">maybe traveling in. </span></p>

<p class="speaker"><span class="line" data-starttime="645"><span class="speakerName">Michael Anthony</span>: Exactly. </span></p>

<p class="speaker"><span class="line" data-starttime="646"><span class="speakerName">Pete LePage</span>: OK, cool. </span></p>

<p class="speaker"><span class="line" data-starttime="647"><span class="speakerName">Andy Thelander</span>: Because </span><span class="line" data-startTime="647">I mean, SVG is </span><span class="line" data-startTime="648">just made up of curves. </span><span class="line" data-startTime="651">And so Paper can hook into that </span><span class="line" data-startTime="651">and then it can calculate </span><span class="line" data-startTime="655">for itself whereabouts </span><span class="line" data-startTime="655">it needs to be. </span><span class="line" data-startTime="658">So it really helped </span><span class="line" data-startTime="658">in that aspect. </span></p>

<p class="speaker"><span class="line" data-starttime="660"><span class="speakerName">Pete LePage</span>: Right, OK. </span><span class="line" data-startTime="661">What other things did you find </span><span class="line" data-startTime="661">Paper was useful for? </span><span class="line" data-startTime="664">Or what else did you </span><span class="line" data-startTime="664">use Paper for? </span><span class="line" data-startTime="665">Or was that sort of the </span><span class="line" data-startTime="665">primary purpose of it? </span></p>

<p class="speaker"><span class="line" data-starttime="668"><span class="speakerName">Michael Anthony</span>: That was </span><span class="line" data-startTime="668">the main purpose of it. </span><span class="line" data-startTime="669">The other things that it was </span><span class="line" data-startTime="669">really useful for, so </span><span class="line" data-startTime="672">basically we had to make </span><span class="line" data-startTime="672">the tracks fit across &mdash; </span><span class="line" data-startTime="674">if you had an iPad and a Nexus </span><span class="line" data-startTime="674">4 and then if you had iPhone </span><span class="line" data-startTime="678">to the mix, the width and height </span><span class="line" data-startTime="678">of the screen &mdash; we can </span><span class="line" data-startTime="681">never assume they were any </span><span class="line" data-startTime="681">specific dimensions. </span><span class="line" data-startTime="683">It had to work across any </span><span class="line" data-startTime="683">combination of devices. </span><span class="line" data-startTime="687">And Paper was awesome because </span><span class="line" data-startTime="687">we basically had a bunch of </span><span class="line" data-startTime="690">different tracks at different </span><span class="line" data-startTime="690">widths to accommodate the </span><span class="line" data-startTime="692">phones from one screen </span><span class="line" data-startTime="692">to five screen. </span><span class="line" data-startTime="695">But we also had to take those </span><span class="line" data-startTime="695">and kind of stretch them a bit </span><span class="line" data-startTime="697">and scale them to fit </span><span class="line" data-startTime="697">any combination. </span><span class="line" data-startTime="700">So Paper was awesome because </span><span class="line" data-startTime="700">you could apply a scale </span><span class="line" data-startTime="704">matrix, and it would directly </span><span class="line" data-startTime="704">correlate to the car still </span><span class="line" data-startTime="708">following around the path. </span><span class="line" data-startTime="709">So it made it really, really </span><span class="line" data-startTime="709">easy to make the car move. </span></p>

<p class="speaker"><span class="line" data-starttime="712"><span class="speakerName">Pete LePage</span>: Oh, nice. </span><span class="line" data-startTime="712">Cool, cool. </span><span class="line" data-startTime="714">Now one of the things that </span><span class="line" data-startTime="714">you guys did a lot of was </span><span class="line" data-startTime="718">animations, right? </span><span class="line" data-startTime="719">And this was a pretty </span><span class="line" data-startTime="719">huge thing. </span><span class="line" data-startTime="722">Talk to me a little bit about </span><span class="line" data-startTime="722">how you animated and got good </span><span class="line" data-startTime="727">performance so that you didn't </span><span class="line" data-startTime="727">have any jankiness. </span></p>

<p class="speaker"><span class="line" data-starttime="732"><span class="speakerName">Andy Thelander</span>: Yeah, so it's </span><span class="line" data-startTime="732">just visual chemistry almost </span><span class="line" data-startTime="736">between the code. </span><span class="line" data-startTime="738">So we apply CSS animations </span><span class="line" data-startTime="738">with JavaScript. </span><span class="line" data-startTime="741">But when you [AUDIO OUT] </span><span class="line" data-startTime="742">so that they don't stack up </span><span class="line" data-startTime="742">and delay each other. </span></p>

<p class="speaker"><span class="line" data-starttime="744"><span class="speakerName">Pete LePage</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="744"><span class="speakerName">Andy Thelander</span>: So you make this </span><span class="line" data-startTime="744">nice linear path where </span><span class="line" data-startTime="747">it's nicely step timed out in </span><span class="line" data-startTime="747">between each animation. </span><span class="line" data-startTime="752">For process, a heavy JavaScript </span><span class="line" data-startTime="752">calculations, like </span><span class="line" data-startTime="756">building the track, we've had to </span><span class="line" data-startTime="756">refer it to CSS animations </span><span class="line" data-startTime="760">on an infinite loop. </span><span class="line" data-startTime="761">Just because it takes away a </span><span class="line" data-startTime="761">little processing of applying </span><span class="line" data-startTime="764">a tween to an object. </span></p>

<p class="speaker"><span class="line" data-starttime="765"><span class="speakerName">Pete LePage</span>: Yup. </span></p>

<p class="speaker"><span class="line" data-starttime="766"><span class="speakerName">Andy Thelander</span>: And just change </span><span class="line" data-startTime="766">class name name and it </span><span class="line" data-startTime="767">just animates. </span></p>

<p class="speaker"><span class="line" data-starttime="769"><span class="speakerName">Michael Anthony</span>: What's nice </span><span class="line" data-startTime="769">right now is that on mobile </span><span class="line" data-startTime="771">CSS animations will run actually </span><span class="line" data-startTime="771">in a separate thread </span><span class="line" data-startTime="774">to the main UI. </span> <span class="line" data-startTime="775">So while JavaScript &mdash; </span><span class="line" data-startTime="776">basically, while it was </span><span class="line" data-startTime="776">generating that track code, </span><span class="line" data-startTime="781">you've got your 16 milliseconds </span><span class="line" data-startTime="781">frame budget, of </span><span class="line" data-startTime="783">course, to get 60 frames </span><span class="line" data-startTime="783">per second. </span> <span class="line" data-startTime="785">And I'm sure the track rendering </span><span class="line" data-startTime="785">was taking up </span><span class="line" data-startTime="789">probably at least 50% </span><span class="line" data-startTime="789">to 80% of that. </span></p>

<p class="speaker"><span class="line" data-starttime="791"><span class="speakerName">Pete LePage</span>: Wow. </span></p>

<p class="speaker"><span class="line" data-starttime="792"><span class="speakerName">Michael Anthony</span>: So if you were </span><span class="line" data-startTime="792">to use a JavaScript-based </span><span class="line" data-startTime="795">time animation frame by frame, </span><span class="line" data-startTime="795">it would be very janky. </span><span class="line" data-startTime="798">But by using the CSS animation </span><span class="line" data-startTime="798">it was still very smooth </span><span class="line" data-startTime="801">because it was running </span><span class="line" data-startTime="801">separately to the JavaScript </span><span class="line" data-startTime="803">processing. </span></p>

<p class="speaker"><span class="line" data-starttime="804"><span class="speakerName">Pete LePage</span>: Right. </span> <span class="line" data-startTime="804">Now in your experience, are </span><span class="line" data-startTime="804">there places where you would </span><span class="line" data-startTime="807">say, I would absolutely say </span><span class="line" data-startTime="807">you really should use </span><span class="line" data-startTime="811">JavaScript animations verses </span><span class="line" data-startTime="811">CSS animations and places </span><span class="line" data-startTime="815">where you should use CSS </span><span class="line" data-startTime="815">over JavaScript? </span><span class="line" data-startTime="818">Because to me it's one of </span><span class="line" data-startTime="818">those things that CSS is </span><span class="line" data-startTime="822">almost always going </span><span class="line" data-startTime="822">to do it better. </span> <span class="line" data-startTime="824">But are there places where </span><span class="line" data-startTime="824">you disagree with that? </span></p>

<p class="speaker"><span class="line" data-starttime="827"><span class="speakerName">Andy Thelander</span>: So yeah. </span><span class="line" data-startTime="828">For CSS betweens we definitely </span><span class="line" data-startTime="828">use CSS just because it takes </span><span class="line" data-startTime="831">no processing from JavaScript, </span><span class="line" data-startTime="831">and you can do other things in </span><span class="line" data-startTime="834">the background. </span><span class="line" data-startTime="837">Through JavaScript animation, </span><span class="line" data-startTime="837">it's probably step-by-step. </span><span class="line" data-startTime="839">So scroll sites use a </span><span class="line" data-startTime="839">lot of JavaScript. </span><span class="line" data-startTime="844">And Canvas automation, </span><span class="line" data-startTime="844">obviously, you need to do it </span><span class="line" data-startTime="847">in JavaScripts. </span><span class="line" data-startTime="847">But that's really only </span><span class="line" data-startTime="847">use is when we use </span><span class="line" data-startTime="850">requstAnimationFrame </span><span class="line" data-startTime="850">and update between </span><span class="line" data-startTime="852">manually each frame. </span></p>

<p class="speaker"><span class="line" data-starttime="854"><span class="speakerName">Michael Anthony</span>: If you're just </span><span class="line" data-startTime="854">moving things around like </span><span class="line" data-startTime="856">in Racer when the lobby comes </span><span class="line" data-startTime="856">in and the bars slide in, </span><span class="line" data-startTime="860">that's CSS animation. </span><span class="line" data-startTime="862">It's [INAUDIBLE] transitions, </span><span class="line" data-startTime="862">actually. </span><span class="line" data-startTime="863">It's perfect for that. </span><span class="line" data-startTime="865">If you're doing a complex </span><span class="line" data-startTime="865">calculation-type animation </span><span class="line" data-startTime="869">where your using Canvas </span><span class="line" data-startTime="869">or even some sort of &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="874"><span class="speakerName">Andy Thelander</span>: Like </span><span class="line" data-startTime="874">the loader. </span><span class="line" data-startTime="875">The loader at the start </span><span class="line" data-startTime="875">is all Canvas. </span><span class="line" data-startTime="877">Those 5 lines are [INAUDIBLE] </span><span class="line" data-startTime="878">Canvas, just tweening </span><span class="line" data-startTime="878">a value in a </span><span class="line" data-startTime="881">requestAnimationFrame loop. </span></p>

<p class="speaker"><span class="line" data-starttime="882"><span class="speakerName">Michael Anthony</span>: But the rule of </span><span class="line" data-startTime="882">thumb is if you can use CSS </span><span class="line" data-startTime="883">animations, absolutely do. </span></p>

<p class="speaker"><span class="line" data-starttime="885"><span class="speakerName">Pete LePage</span>: Yeah. </span> <span class="line" data-startTime="886">Cool. </span> <span class="line" data-startTime="886">That makes sense. </span> <span class="line" data-startTime="888">Well, let's talk a little </span><span class="line" data-startTime="888">bit about what's </span><span class="line" data-startTime="890">going back and forth. </span> <span class="line" data-startTime="891">So now that we've got the track </span><span class="line" data-startTime="891">rendered, we've got our </span><span class="line" data-startTime="897">positions on screen, three, </span><span class="line" data-startTime="897">two, one, like, </span><span class="line" data-startTime="901">it's time to go. </span> <span class="line" data-startTime="902">We've got to start touching </span><span class="line" data-startTime="902">our screens to </span><span class="line" data-startTime="904">make our cars go. </span> <span class="line" data-startTime="905">What data is going back </span><span class="line" data-startTime="905">and forth in order </span><span class="line" data-startTime="908">to track each car? </span><span class="line" data-startTime="912">Yeah, let's start with that. </span></p>

<p class="speaker"><span class="line" data-starttime="914"><span class="speakerName">Michael Anthony</span>: So let's </span><span class="line" data-startTime="914">pretend we have </span><span class="line" data-startTime="916">a two player race. </span><span class="line" data-startTime="918">And both cars are on the </span><span class="line" data-startTime="918">left screen to start. </span><span class="line" data-startTime="921">And then one car moves through </span><span class="line" data-startTime="921">the left screen and is now on </span><span class="line" data-startTime="924">the right screen. </span><span class="line" data-startTime="926">Every frame, or every few frames </span><span class="line" data-startTime="926">let's say, each device </span><span class="line" data-startTime="931">looks at which cars are actually </span><span class="line" data-startTime="931">on the screen. </span><span class="line" data-startTime="934">And it bundles all the </span><span class="line" data-startTime="934">information about cars, their </span><span class="line" data-startTime="936">position, their velocity, </span><span class="line" data-startTime="936">their laps </span><span class="line" data-startTime="939">positioning on the track. </span><span class="line" data-startTime="941">If it's on that screen, it says </span><span class="line" data-startTime="941">information out to the </span><span class="line" data-startTime="944">other phones. </span><span class="line" data-startTime="944">And the other phones update </span><span class="line" data-startTime="944">their cars with that new </span><span class="line" data-startTime="947">information. </span></p>

<p class="speaker"><span class="line" data-starttime="949"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="949"><span class="speakerName">Michael Anthony</span>: If the car's </span><span class="line" data-startTime="949">not on the screen, it receives </span><span class="line" data-startTime="951">that information from </span><span class="line" data-startTime="951">the other phone </span><span class="line" data-startTime="953">and updates its values. </span><span class="line" data-startTime="956">And the reason for this </span><span class="line" data-startTime="956">is basically when </span><span class="line" data-startTime="960">you press the throttle &mdash; </span><span class="line" data-startTime="961">and that's another event </span><span class="line" data-startTime="961">that gets sent &mdash; </span><span class="line" data-startTime="963">you touch and you turn the </span><span class="line" data-startTime="963">throttle on that message gets </span><span class="line" data-startTime="965">sent to all the players. </span><span class="line" data-startTime="966">And so each phone individually </span><span class="line" data-startTime="966">is actually rendering the </span><span class="line" data-startTime="969">track just as if you were </span><span class="line" data-startTime="969">playing with only one player. </span><span class="line" data-startTime="973">But let's say it took 20 </span><span class="line" data-startTime="973">milliseconds to receive my </span><span class="line" data-startTime="977">throttle event, but your phone </span><span class="line" data-startTime="977">took 40 milliseconds. </span><span class="line" data-startTime="979">So now the cars, they're going </span><span class="line" data-startTime="979">to start at different times </span><span class="line" data-startTime="982">and be out of sync. </span></p>

<p class="speaker"><span class="line" data-starttime="983"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="984"><span class="speakerName">Michael Anthony</span>: So there's a </span><span class="line" data-startTime="984">few tricks that'll happen to </span><span class="line" data-startTime="986">make up that difference in </span><span class="line" data-startTime="986">time for when it starts. </span><span class="line" data-startTime="990">But even still, as they're </span><span class="line" data-startTime="990">moving we found that they </span><span class="line" data-startTime="993">would kind of come out </span><span class="line" data-startTime="993">of sync a bit. </span><span class="line" data-startTime="995">So when the car's off screen, we </span><span class="line" data-startTime="995">update it every four frames </span><span class="line" data-startTime="999">or so, which actually keeps </span><span class="line" data-startTime="999">it very, very close. </span><span class="line" data-startTime="1002">So when it comes time to </span><span class="line" data-startTime="1002">crossover from screen to </span><span class="line" data-startTime="1004">screen, it's in the </span><span class="line" data-startTime="1004">right place. </span><span class="line" data-startTime="1006">And then your phone takes </span><span class="line" data-startTime="1006">over and you see it. </span><span class="line" data-startTime="1008">And the whole things </span><span class="line" data-startTime="1008">appears smooth. </span></p>

<p class="speaker"><span class="line" data-starttime="1010"><span class="speakerName">Pete LePage</span>: Cool. </span><span class="line" data-startTime="1013">So when the car is on a </span><span class="line" data-startTime="1013">screen, that screen is </span><span class="line" data-startTime="1016">responsible for its position. </span></p>

<p class="speaker"><span class="line" data-starttime="1018"><span class="speakerName">Michael Anthony</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1019"><span class="speakerName">Andy Thelander</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1019"><span class="speakerName">Pete LePage</span>: But then when it </span><span class="line" data-startTime="1019">goes on to another screen, it </span><span class="line" data-startTime="1022">gets that data. </span><span class="line" data-startTime="1023">It says, hey where are you, </span><span class="line" data-startTime="1023">every four frames, so much </span><span class="line" data-startTime="1028">less frequently. </span></p>

<p class="speaker"><span class="line" data-starttime="1029"><span class="speakerName">Michael Anthony</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1029"><span class="speakerName">Andy Thelander</span>: Yeah, exactly. </span><span class="line" data-startTime="1030">I mean, that's the benefit of </span><span class="line" data-startTime="1030">the concept is that a car can </span><span class="line" data-startTime="1033">only appear at one </span><span class="line" data-startTime="1033">screen at a time. </span><span class="line" data-startTime="1034">So we only really need to make </span><span class="line" data-startTime="1034">sure that at that moment on </span><span class="line" data-startTime="1037">that screen it needs </span><span class="line" data-startTime="1037">to be smooth. </span><span class="line" data-startTime="1039">Whereas if it's off the screen </span><span class="line" data-startTime="1039">on your phone then it can just </span><span class="line" data-startTime="1042">jump frame by frame. </span></p>

<p class="speaker"><span class="line" data-starttime="1044"><span class="speakerName">Pete LePage</span>: Right. </span><span class="line" data-startTime="1044">That makes sense. </span><span class="line" data-startTime="1047">So you're obviously using </span><span class="line" data-startTime="1047">WebSockets to send data. </span><span class="line" data-startTime="1050">What is each, for lack of a </span><span class="line" data-startTime="1050">better term, packet or data </span><span class="line" data-startTime="1055">chunk look like? </span><span class="line" data-startTime="1055">What are you sending with </span><span class="line" data-startTime="1055">each particular piece? </span></p>

<p class="speaker"><span class="line" data-starttime="1058"><span class="speakerName">Michael Anthony</span>: It's not </span><span class="line" data-startTime="1058">actually that small. </span><span class="line" data-startTime="1060">I know with Roll It those guys </span><span class="line" data-startTime="1060">are able to get it super, </span><span class="line" data-startTime="1063">super tiny [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1064"><span class="speakerName">Pete LePage</span>: Yeah. </span><span class="line" data-startTime="1064">They got it down to, like, </span><span class="line" data-startTime="1064">maybe 20 bytes or </span><span class="line" data-startTime="1067">something like that. </span></p>

<p class="speaker"><span class="line" data-starttime="1068"><span class="speakerName">Michael Anthony</span>: Yeah, we're </span><span class="line" data-startTime="1068">probably working with a few </span><span class="line" data-startTime="1070">more than that. </span><span class="line" data-startTime="1071">Probably not quite a kilobyte, </span><span class="line" data-startTime="1071">maybe somewhere around there. </span><span class="line" data-startTime="1076">But basically, it was just a </span><span class="line" data-startTime="1076">JavaScript object that was </span><span class="line" data-startTime="1080">converted to a shrink just with </span><span class="line" data-startTime="1080">JSON and [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1083"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="1084"><span class="speakerName">Michael Anthony</span>: And the </span><span class="line" data-startTime="1084">object contains &mdash; </span><span class="line" data-startTime="1086">actually in some cases it </span><span class="line" data-startTime="1086">was actually pretty big. </span><span class="line" data-startTime="1089">Because when it was sent </span><span class="line" data-startTime="1089">information about car, let's </span><span class="line" data-startTime="1092">say one car had all five </span><span class="line" data-startTime="1092">screens, it would have an </span><span class="line" data-startTime="1093">array with object data with </span><span class="line" data-startTime="1093">position, velocity </span><span class="line" data-startTime="1099">for each of the cars. </span></p>

<p class="speaker"><span class="line" data-starttime="1099"><span class="speakerName">Pete LePage</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="1101"><span class="speakerName">Michael Anthony</span>: But at one </span><span class="line" data-startTime="1101">point early on I kind of </span><span class="line" data-startTime="1104">thought, all right, well </span><span class="line" data-startTime="1104">converting this object to a </span><span class="line" data-startTime="1108">string might be a little bit too </span><span class="line" data-startTime="1108">verbose and we might need </span><span class="line" data-startTime="1110">to make it smaller. </span><span class="line" data-startTime="1112">And then I started thinking </span><span class="line" data-startTime="1112">about coming up with shorthand </span><span class="line" data-startTime="1115">ways and then parsing that </span><span class="line" data-startTime="1115">on the other phones. </span><span class="line" data-startTime="1117">But to be honest, it never </span><span class="line" data-startTime="1117">quite got there. </span><span class="line" data-startTime="1120">The latency issues were solved </span><span class="line" data-startTime="1120">well before we ever had to go </span><span class="line" data-startTime="1122">down that path of </span><span class="line" data-startTime="1122">optimization. </span></p>

<p class="speaker"><span class="line" data-starttime="1124"><span class="speakerName">Pete LePage</span>: Interesting. </span><span class="line" data-startTime="1125">OK. </span><span class="line" data-startTime="1126">So you've got a JSON object that </span><span class="line" data-startTime="1126">has on array with each </span><span class="line" data-startTime="1130">car which includes the velocity, </span><span class="line" data-startTime="1130">the location. </span><span class="line" data-startTime="1135">Are there any other things that </span><span class="line" data-startTime="1135">you're storing in there? </span></p>

<p class="speaker"><span class="line" data-starttime="1139"><span class="speakerName">Michael Anthony</span>: I </span><span class="line" data-startTime="1139">think there's &mdash; </span><span class="line" data-startTime="1141">you know I'm not sure off </span><span class="line" data-startTime="1141">the to of my head. </span><span class="line" data-startTime="1143">I kind of forget. </span><span class="line" data-startTime="1144">But I think it was definitely </span><span class="line" data-startTime="1144">the velocity, the x and y </span><span class="line" data-startTime="1147">position, how far along </span><span class="line" data-startTime="1147">the path it had been. </span><span class="line" data-startTime="1152">I think that might </span><span class="line" data-startTime="1152">have been it. </span></p>

<p class="speaker"><span class="line" data-starttime="1154"><span class="speakerName">Pete LePage</span>: OK. </span><span class="line" data-startTime="1155">ANDY THELANDER: [INAUDIBLE], </span><span class="line" data-startTime="1155">see </span><span class="line" data-startTime="1156">whether that car is finished. </span></p>

<p class="speaker"><span class="line" data-starttime="1157"><span class="speakerName">Michael Anthony</span>: Oh, yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1158"><span class="speakerName">Andy Thelander</span>: That's </span><span class="line" data-startTime="1158">pretty much it. </span></p>

<p class="speaker"><span class="line" data-starttime="1158"><span class="speakerName">Pete LePage</span>: Yeah, I guess </span><span class="line" data-startTime="1158">that make sense, too. </span><span class="line" data-startTime="1160">So that's tracking </span><span class="line" data-startTime="1160">where the car is. </span><span class="line" data-startTime="1163">What about the data whether I'm </span><span class="line" data-startTime="1163">on the throttle or not, </span><span class="line" data-startTime="1166">whether I'm touching </span><span class="line" data-startTime="1166">the screen? </span></p>

<p class="speaker"><span class="line" data-starttime="1168"><span class="speakerName">Michael Anthony</span>: Yeah. </span><span class="line" data-startTime="1171">That's one of the smaller </span><span class="line" data-startTime="1171">events that gets sent. </span><span class="line" data-startTime="1172">So as soon as you touch it it </span><span class="line" data-startTime="1172">just sends which player you </span><span class="line" data-startTime="1176">are, and that you throttled </span><span class="line" data-startTime="1176">on or off. </span><span class="line" data-startTime="1178">And each device then keeps &mdash; </span><span class="line" data-startTime="1182">when it receives an on event it </span><span class="line" data-startTime="1182">turns the car on, when it </span><span class="line" data-startTime="1185">sees an off event it </span><span class="line" data-startTime="1185">turns the car off. </span></p>

<p class="speaker"><span class="line" data-starttime="1186"><span class="speakerName">Pete LePage</span>: OK. </span><span class="line" data-startTime="1187">So that's just a single toggle </span><span class="line" data-startTime="1187">on, hey, I'm touching. </span><span class="line" data-startTime="1192">And then there's a </span><span class="line" data-startTime="1192">single toggle off </span><span class="line" data-startTime="1194">once I've stop touching. </span><span class="line" data-startTime="1195">So you're not doing a </span><span class="line" data-startTime="1195">continuous, like, I'm </span><span class="line" data-startTime="1198">touching, touching, touching, </span><span class="line" data-startTime="1198">touching, kind of thing. </span></p>

<p class="speaker"><span class="line" data-starttime="1200"><span class="speakerName">Michael Anthony</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="1200"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="1201"><span class="speakerName">Michael Anthony</span>: Yeah. </span><span class="line" data-startTime="1201">I mean, sending the less </span><span class="line" data-startTime="1205">messages the better, basically. </span></p>

<p class="speaker"><span class="line" data-starttime="1206"><span class="speakerName">Pete LePage</span>: Right. </span><span class="line" data-startTime="1208">Cool. </span><span class="line" data-startTime="1209">And so does each device only </span><span class="line" data-startTime="1209">have one socket connection up </span><span class="line" data-startTime="1214">to the server, or are you </span><span class="line" data-startTime="1214">using multiple different </span><span class="line" data-startTime="1216">sockets, one for the location </span><span class="line" data-startTime="1216">and one for touch and </span><span class="line" data-startTime="1222">acceleration? </span></p>

<p class="speaker"><span class="line" data-starttime="1223"><span class="speakerName">Michael Anthony</span>: Nope, </span><span class="line" data-startTime="1223">just one socket. </span></p>

<p class="speaker"><span class="line" data-starttime="1225"><span class="speakerName">Pete LePage</span>: Cool. </span><span class="line" data-startTime="1225">OK, awesome. </span><span class="line" data-startTime="1229">So then the server doesn't </span><span class="line" data-startTime="1229">really maintain </span><span class="line" data-startTime="1231">any state at all. </span><span class="line" data-startTime="1233">It's sending that data </span><span class="line" data-startTime="1233">back and forth then. </span></p>

<p class="speaker"><span class="line" data-starttime="1237"><span class="speakerName">Michael Anthony</span>: Kind of. </span><span class="line" data-startTime="1239">It is just a pass through </span><span class="line" data-startTime="1239">for the data. </span><span class="line" data-startTime="1240">But there's actually quite a </span><span class="line" data-startTime="1240">lot of state on the server </span><span class="line" data-startTime="1243">related to the game lobby, </span><span class="line" data-startTime="1243">which players are joined. </span><span class="line" data-startTime="1247">Because the server has to keep </span><span class="line" data-startTime="1247">track of the color order, </span><span class="line" data-startTime="1250">which is really important. </span><span class="line" data-startTime="1250">Because it always has to </span><span class="line" data-startTime="1250">maintain that rainbow, HSL, </span><span class="line" data-startTime="1253">blue to red. </span><span class="line" data-startTime="1254">So for each game, if someone's </span><span class="line" data-startTime="1254">blue and they leave, it needs </span><span class="line" data-startTime="1260">to make sure that blue gets </span><span class="line" data-startTime="1260">reassigned for the next person </span><span class="line" data-startTime="1263">that joins. </span><span class="line" data-startTime="1264">And also, if players join </span><span class="line" data-startTime="1264">mid-race they basically just </span><span class="line" data-startTime="1269">see a leader board until </span><span class="line" data-startTime="1269">the race is finished. </span><span class="line" data-startTime="1271">So it kind of keeps track of </span><span class="line" data-startTime="1271">all these different states. </span></p>

<p class="speaker"><span class="line" data-starttime="1273"><span class="speakerName">Pete LePage</span>: Oh, OK. </span><span class="line" data-startTime="1275">So you're not actually showing </span><span class="line" data-startTime="1275">them sort of a version of the </span><span class="line" data-startTime="1279">board in a small screen </span><span class="line" data-startTime="1279">or anything like that. </span><span class="line" data-startTime="1282">You're just showing them </span><span class="line" data-startTime="1282">the leader board of </span><span class="line" data-startTime="1284">who's in front first. </span></p>

<p class="speaker"><span class="line" data-starttime="1286"><span class="speakerName">Michael Anthony</span>: Right. </span><span class="line" data-startTime="1286">Yup. </span></p>

<p class="speaker"><span class="line" data-starttime="1286"><span class="speakerName">Pete LePage</span>: OK. </span><span class="line" data-startTime="1287">Cool. </span><span class="line" data-startTime="1288">So as you guys were &mdash; </span><span class="line" data-startTime="1290">I'll just sort of mention </span><span class="line" data-startTime="1290">this as you guys </span><span class="line" data-startTime="1292">are watching at home. </span><span class="line" data-startTime="1294">Please be sure to post </span><span class="line" data-startTime="1294">your questions. </span><span class="line" data-startTime="1295">We've got a few questions that </span><span class="line" data-startTime="1295">have popped in here. </span><span class="line" data-startTime="1301">But the link is just down </span><span class="line" data-startTime="1301">there at the bottom. </span><span class="line" data-startTime="1304">As you guys were building </span><span class="line" data-startTime="1304">this, what kinds of like </span><span class="line" data-startTime="1307">performance things were </span><span class="line" data-startTime="1307">you thinking about? </span><span class="line" data-startTime="1310">And how did you approach </span><span class="line" data-startTime="1310">making sure that the </span><span class="line" data-startTime="1315">application was just fast, </span><span class="line" data-startTime="1315">it worked really well? </span></p>

<p class="speaker"><span class="line" data-starttime="1318"><span class="speakerName">Andy Thelander</span>: Yeah. </span> <span class="line" data-startTime="1319">So something we had to really </span><span class="line" data-startTime="1319">consider was getting </span><span class="line" data-startTime="1321">animations timed right. </span> <span class="line" data-startTime="1323">So when the screen goes up and </span><span class="line" data-startTime="1323">when the ready, set, go </span><span class="line" data-startTime="1325">starts, they need to be </span><span class="line" data-startTime="1325">timed and synced. </span> <span class="line" data-startTime="1327">And so what we do is send out </span><span class="line" data-startTime="1327">a pulse between the devices </span><span class="line" data-startTime="1330">saying, my animation sequence </span><span class="line" data-startTime="1330">is complete, I'm ready to </span><span class="line" data-startTime="1333">animate the next sequence. </span> <span class="line" data-startTime="1334">And then that pulse gets sent </span><span class="line" data-startTime="1334">to the other phones. </span> <span class="line" data-startTime="1336">And then once the server </span><span class="line" data-startTime="1336">receives all of that, it sends </span><span class="line" data-startTime="1338">out the data that the phones </span><span class="line" data-startTime="1338">can now animate </span><span class="line" data-startTime="1342">the ready, set, go. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1343"><span class="speakerName">Michael Anthony</span>: And then, </span><span class="line" data-startTime="1343">of course, the animations </span><span class="line" data-startTime="1344">themselves are all CSS </span><span class="line" data-startTime="1344">transitions or animations. </span><span class="line" data-startTime="1348">And so that really makes </span><span class="line" data-startTime="1348">a huge difference with </span><span class="line" data-startTime="1351">performance. </span><span class="line" data-startTime="1351">And as far as rendering the cars </span><span class="line" data-startTime="1351">along the path, I mean, </span><span class="line" data-startTime="1355">that was one part that was </span><span class="line" data-startTime="1355">particularly tricky. </span><span class="line" data-startTime="1359">And what we ended up finding was </span><span class="line" data-startTime="1359">that on iOS, the smoothest </span><span class="line" data-startTime="1363">way to make the cars accelerate </span><span class="line" data-startTime="1363">was using the </span><span class="line" data-startTime="1366">translate 3D property and </span><span class="line" data-startTime="1366">a rotation transform. </span><span class="line" data-startTime="1370">On Android, the fastest way was </span><span class="line" data-startTime="1370">actually to calculate the </span><span class="line" data-startTime="1373">matrix values directly in </span><span class="line" data-startTime="1373">JavaScript, and then apply it </span><span class="line" data-startTime="1375">as a transform matrix. </span></p>

<p class="speaker"><span class="line" data-starttime="1376"><span class="speakerName">Pete LePage</span>: Oh, OK. </span><span class="line" data-startTime="1378">So a little bit of experimenting </span><span class="line" data-startTime="1378">with each of the </span><span class="line" data-startTime="1381">different platforms to make sure </span><span class="line" data-startTime="1381">that you've got the best </span><span class="line" data-startTime="1383">performance. </span></p>

<p class="speaker"><span class="line" data-starttime="1385"><span class="speakerName">Michael Anthony</span>: Lots </span><span class="line" data-startTime="1385">of experimenting. </span><span class="line" data-startTime="1387">When they demoed it at I/O, we </span><span class="line" data-startTime="1387">were there and we saw it a few </span><span class="line" data-startTime="1392">days before. </span><span class="line" data-startTime="1393">And what happened was they </span><span class="line" data-startTime="1393">plugged in video out from each </span><span class="line" data-startTime="1397">device, which I'm sure everybody </span><span class="line" data-startTime="1397">who's done screen </span><span class="line" data-startTime="1399">capture realizes that it </span><span class="line" data-startTime="1399">actually saps the power off </span><span class="line" data-startTime="1404">the devices because now it has </span><span class="line" data-startTime="1404">to render two screens. </span><span class="line" data-startTime="1407">He actually had to, like, the </span><span class="line" data-startTime="1407">night before kind of figure </span><span class="line" data-startTime="1410">out &mdash; and that's when </span><span class="line" data-startTime="1410">we figured out the </span><span class="line" data-startTime="1410">whole matrix thing. </span></p>

<p class="speaker"><span class="line" data-starttime="1412"><span class="speakerName">Pete LePage</span>: Oh. </span></p>

<p class="speaker"><span class="line" data-starttime="1413"><span class="speakerName">Michael Anthony</span>: Was because, </span><span class="line" data-startTime="1413">OK, now it looks kind of </span><span class="line" data-startTime="1415">choppy because the video </span><span class="line" data-startTime="1415">out &mdash; and so we had to </span><span class="line" data-startTime="1418">kind of solve that. </span></p>

<p class="speaker"><span class="line" data-starttime="1420"><span class="speakerName">Pete LePage</span>: Those are </span><span class="line" data-startTime="1420">always the fun, </span><span class="line" data-startTime="1422">pre-keynote kinds of things &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1423"><span class="speakerName">Michael Anthony</span>: Yes. </span></p>

<p class="speaker"><span class="line" data-starttime="1424"><span class="speakerName">Pete LePage</span>:  &mdash; and good </span><span class="line" data-startTime="1424">little story for </span><span class="line" data-startTime="1427">folks who are watching. </span> <span class="line" data-startTime="1429">So there's a question that was </span><span class="line" data-startTime="1429">posted in Google Moderator, </span><span class="line" data-startTime="1433">and it's from the Florian </span><span class="line" data-startTime="1433">in France. </span> <span class="line" data-startTime="1435">And I'll take a stab </span><span class="line" data-startTime="1435">at answering this. </span> <span class="line" data-startTime="1438">But on Android, Web Audio </span><span class="line" data-startTime="1438">support is behind a flag in </span><span class="line" data-startTime="1441">Chrome Beta right now. </span> <span class="line" data-startTime="1442">When's it going to </span><span class="line" data-startTime="1442">be available for </span><span class="line" data-startTime="1444">all users in stable? </span><span class="line" data-startTime="1446">And Florian, it's coming soon. </span></p>

<p><span class="line" data-startTime="1448">We don't have a specific </span><span class="line" data-startTime="1448">date on it yet. </span> <span class="line" data-startTime="1451">There's a bunch of sort of </span><span class="line" data-startTime="1451">little technical things that </span><span class="line" data-startTime="1453">we're just trying to make sure </span><span class="line" data-startTime="1453">that works really well across </span><span class="line" data-startTime="1457">all devices. </span> <span class="line" data-startTime="1458">So there's a set of device &mdash; </span><span class="line" data-startTime="1463">I think it's part of the CPU </span><span class="line" data-startTime="1463">that's required in order to be </span><span class="line" data-startTime="1467">able to use Web Audio. </span> <span class="line" data-startTime="1469">And so we're just making sure </span><span class="line" data-startTime="1469">that for devices that have it, </span><span class="line" data-startTime="1472">we've got a great experience, </span><span class="line" data-startTime="1472">and devices that don't have </span><span class="line" data-startTime="1475">it, that we have a reasonable </span><span class="line" data-startTime="1475">fallback experience, that </span><span class="line" data-startTime="1477">there's not going to </span><span class="line" data-startTime="1477">be anything sort </span><span class="line" data-startTime="1479">of awkward in there. </span></p>

<p><span class="line" data-startTime="1483">So please keep posting </span><span class="line" data-startTime="1483">your questions. </span> <span class="line" data-startTime="1486">I'm kind of curious a little bit </span><span class="line" data-startTime="1486">for Michael and Andy about </span><span class="line" data-startTime="1489">your workflow in terms of how </span><span class="line" data-startTime="1489">you went from the prototypes </span><span class="line" data-startTime="1495">and that stuff to the tools </span><span class="line" data-startTime="1495">that you used and how you </span><span class="line" data-startTime="1500">actually got everything </span><span class="line" data-startTime="1500">up to the server. </span> <span class="line" data-startTime="1501">What was that process like? </span></p>

<p class="speaker"><span class="line" data-starttime="1504"><span class="speakerName">Andy Thelander</span>: So in terms of </span><span class="line" data-startTime="1504">what programs we used, we used </span><span class="line" data-startTime="1507">[INAUDIBLE] </span><span class="line" data-startTime="1507">Studio for an [? ID ?], </span><span class="line" data-startTime="1507">SourceTree through Git, and </span><span class="line" data-startTime="1511">[INAUDIBLE] </span><span class="line" data-startTime="1512">machines. </span><span class="line" data-startTime="1513">But in terms of how we operate, </span><span class="line" data-startTime="1513">when we're developing </span><span class="line" data-startTime="1517">for mobile we usually do it on </span><span class="line" data-startTime="1517">the desktop just because we </span><span class="line" data-startTime="1519">find that's the quickest way </span><span class="line" data-startTime="1519">to refresh and just quickly </span><span class="line" data-startTime="1523">iterate on our code. </span><span class="line" data-startTime="1524">So for this particular project, </span><span class="line" data-startTime="1524">to simulate multiple </span><span class="line" data-startTime="1527">devices we had to do multiple </span><span class="line" data-startTime="1527">browser windows. </span></p>

<p class="speaker"><span class="line" data-starttime="1530"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="1530"><span class="speakerName">Andy Thelander</span>: That worked </span><span class="line" data-startTime="1530">really well, just because we </span><span class="line" data-startTime="1532">could line them up like you </span><span class="line" data-startTime="1532">would in an array of devices. </span><span class="line" data-startTime="1535">And we just set a flag in our </span><span class="line" data-startTime="1535">code, that force mobile, and </span><span class="line" data-startTime="1541">we can force the mobile layout </span><span class="line" data-startTime="1541">and it's the same as multiple </span><span class="line" data-startTime="1545">mobile devices. </span></p>

<p class="speaker"><span class="line" data-starttime="1546"><span class="speakerName">Michael Anthony</span>: Right. </span><span class="line" data-startTime="1547">Yeah, until it actually </span><span class="line" data-startTime="1547">was ready to deploy. </span><span class="line" data-startTime="1550">And then you test the </span><span class="line" data-startTime="1550">[INAUDIBLE] devices and your </span><span class="line" data-startTime="1552">like, ah, that animation is </span><span class="line" data-startTime="1552">too complex for mobile and </span><span class="line" data-startTime="1554">kind of tweak it a bit. </span><span class="line" data-startTime="1556">But then we eventually had </span><span class="line" data-startTime="1556">this massive array. </span><span class="line" data-startTime="1559">We had a table just next to our </span><span class="line" data-startTime="1559">desks with this huge array </span><span class="line" data-startTime="1561">of devices. </span><span class="line" data-startTime="1562">We had all kinds of Android </span><span class="line" data-startTime="1562">and iOS devices. </span><span class="line" data-startTime="1563">And we put them in order. </span><span class="line" data-startTime="1565">And we'd try one player </span><span class="line" data-startTime="1565">to five player to </span><span class="line" data-startTime="1567">everything in between. </span><span class="line" data-startTime="1569">And we would work that way. </span><span class="line" data-startTime="1573">We have a noJS solution that </span><span class="line" data-startTime="1573">we kind of whipped up that </span><span class="line" data-startTime="1576">basically when we do console.log </span><span class="line" data-startTime="1576">on the device, </span><span class="line" data-startTime="1579">it'll turn up in our desktop </span><span class="line" data-startTime="1579">Chrome Console and we can </span><span class="line" data-startTime="1582">inspect objects and such. </span></p>

<p class="speaker"><span class="line" data-starttime="1583"><span class="speakerName">Pete LePage</span>: Ah, interesting. </span><span class="line" data-startTime="1585">How did you do that? </span><span class="line" data-startTime="1585">What was involved in that? </span></p>

<p class="speaker"><span class="line" data-starttime="1588"><span class="speakerName">Michael Anthony</span>: It's just a </span><span class="line" data-startTime="1588">simple Socket.IO noJS server. </span><span class="line" data-startTime="1592">On the front end it includes a </span><span class="line" data-startTime="1592">script that has Socket.IO. </span><span class="line" data-startTime="1594">just a tiny bit of logic, and </span><span class="line" data-startTime="1594">just a small bit of logic on </span><span class="line" data-startTime="1596">the server that basically </span><span class="line" data-startTime="1596">says &mdash; </span><span class="line" data-startTime="1599">on the mobile device it kind </span><span class="line" data-startTime="1599">of hijacks console.log. </span><span class="line" data-startTime="1602">And instead of doing the </span><span class="line" data-startTime="1602">normal thing, in sends </span><span class="line" data-startTime="1605">whatever that message was just </span><span class="line" data-startTime="1605">to a socket server, which gets </span><span class="line" data-startTime="1608">routed to the desktop version </span><span class="line" data-startTime="1608">that knows it's desktop, and </span><span class="line" data-startTime="1611">it just consoles out </span><span class="line" data-startTime="1611">[INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1613"><span class="speakerName">Pete LePage</span>: So there you can </span><span class="line" data-startTime="1613">actually see what's going on </span><span class="line" data-startTime="1615">on each of the different </span><span class="line" data-startTime="1615">devices. </span></p>

<p class="speaker"><span class="line" data-starttime="1616"><span class="speakerName">Michael Anthony</span>: Yeah. </span><span class="line" data-startTime="1617">It was much easier that way than </span><span class="line" data-startTime="1617">using the Android remote </span><span class="line" data-startTime="1622">debugging, because that </span><span class="line" data-startTime="1622">would only work on </span><span class="line" data-startTime="1624">one device at a time. </span><span class="line" data-startTime="1625">In this case we had five. </span><span class="line" data-startTime="1626">But there were times </span><span class="line" data-startTime="1626">where we did &mdash; </span><span class="line" data-startTime="1628">OK, we have a rendering issue. </span><span class="line" data-startTime="1630">We need to see what's </span><span class="line" data-startTime="1630">going on. </span><span class="line" data-startTime="1631">And we'd plug in an Android </span><span class="line" data-startTime="1631">device to the remote inspector </span><span class="line" data-startTime="1634">and kind of look at the </span><span class="line" data-startTime="1634">time-line panel and see where </span><span class="line" data-startTime="1637">the paint was, that </span><span class="line" data-startTime="1637">sort of thing. </span></p>

<p class="speaker"><span class="line" data-starttime="1638"><span class="speakerName">Pete LePage</span>: Yeah. </span><span class="line" data-startTime="1639">Interesting. </span><span class="line" data-startTime="1641">Di you use any other tools </span><span class="line" data-startTime="1641">to help on the mobile? </span><span class="line" data-startTime="1645">So anything like Adobe's Edge or </span><span class="line" data-startTime="1645">any of the other automation </span><span class="line" data-startTime="1650">tools or even the Chrome </span><span class="line" data-startTime="1650">Developer Tools for mobile? </span></p>

<p class="speaker"><span class="line" data-starttime="1653"><span class="speakerName">Michael Anthony</span>: We did use the </span><span class="line" data-startTime="1653">Chrome Developer Tools for </span><span class="line" data-startTime="1655">mobile quite a bit. </span><span class="line" data-startTime="1655">We didn't use Adobe Edge. </span><span class="line" data-startTime="1657">I'd actually like to give that </span><span class="line" data-startTime="1657">a try at some point. </span><span class="line" data-startTime="1659">I'm actually working on </span><span class="line" data-startTime="1659">a little mobile app &mdash; </span><span class="line" data-startTime="1664">I guess it's similar to Adobe </span><span class="line" data-startTime="1664">Edge just because we do a few </span><span class="line" data-startTime="1667">things kind of weird internally </span><span class="line" data-startTime="1667">that would just </span><span class="line" data-startTime="1670">automate our process. </span></p>

<p class="speaker"><span class="line" data-starttime="1671"><span class="speakerName">Pete LePage</span>: Yeah. </span><span class="line" data-startTime="1672">Cool, cool. </span><span class="line" data-startTime="1673">That's somewhat useful. </span><span class="line" data-startTime="1675">Of the Chrome Developer Tools, </span><span class="line" data-startTime="1675">did you find you used any of </span><span class="line" data-startTime="1678">the emulation features? </span><span class="line" data-startTime="1682">of the Chrome Developer Tools on </span><span class="line" data-startTime="1682">desktop to try and see how </span><span class="line" data-startTime="1685">things would behave on mobile? </span><span class="line" data-startTime="1687">MICHAEL ANTHONY: </span><span class="line" data-startTime="1687">No, we didn't. </span><span class="line" data-startTime="1689">You just relied on the </span><span class="line" data-startTime="1689">devices themselves. </span><span class="line" data-startTime="1691">Because in this case, we </span><span class="line" data-startTime="1691">actually had them all. </span><span class="line" data-startTime="1692">If we didn't have them all, </span><span class="line" data-startTime="1692">we probably would do that. </span></p>

<p class="speaker"><span class="line" data-starttime="1694"><span class="speakerName">Pete LePage</span>: Yeah. </span><span class="line" data-startTime="1696">Yeah. </span><span class="line" data-startTime="1697">So I guess I've got one other </span><span class="line" data-startTime="1697">question for you. </span><span class="line" data-startTime="1701">Well, I've got two. </span><span class="line" data-startTime="1703">Of all of the tools that you </span><span class="line" data-startTime="1703">guys have used and all of the </span><span class="line" data-startTime="1707">APIs and the stuff that's </span><span class="line" data-startTime="1707">available on the web, so </span><span class="line" data-startTime="1711">anything you wish you had today </span><span class="line" data-startTime="1711">that is not available </span><span class="line" data-startTime="1714">that would have made </span><span class="line" data-startTime="1714">your lives easier? </span></p>

<p class="speaker"><span class="line" data-starttime="1718"><span class="speakerName">Michael Anthony</span>: Being able to </span><span class="line" data-startTime="1718">know if the device has fallen </span><span class="line" data-startTime="1719">asleep or not. </span></p>

<p class="speaker"><span class="line" data-starttime="1720"><span class="speakerName">Pete LePage</span>: Oh, OK. </span></p>

<p class="speaker"><span class="line" data-starttime="1721"><span class="speakerName">Michael Anthony</span>: It sounds </span><span class="line" data-startTime="1721">simple, but it actually is </span><span class="line" data-startTime="1723">really kind of complex, </span><span class="line" data-startTime="1723">especially when dealing with </span><span class="line" data-startTime="1725">WebSockets. </span> <span class="line" data-startTime="1726">Because if the device just falls </span><span class="line" data-startTime="1726">asleep on its own, or </span><span class="line" data-startTime="1729">let's say you get a phone call </span><span class="line" data-startTime="1729">in the middle of the game, the </span><span class="line" data-startTime="1731">game's broken because your part </span><span class="line" data-startTime="1731">of the track is missing. </span> <span class="line" data-startTime="1733">So we need to send an event to </span><span class="line" data-startTime="1733">tell everybody, hey, you've </span><span class="line" data-startTime="1735">got to start over. </span> <span class="line" data-startTime="1737">But the problem is when the </span><span class="line" data-startTime="1737">browser goes to sleep, it </span><span class="line" data-startTime="1739">doesn't actually close </span><span class="line" data-startTime="1739">the WebSocket so </span><span class="line" data-startTime="1743">there's no way to know. </span> <span class="line" data-startTime="1745">And so what we had to do is on </span><span class="line" data-startTime="1745">the server keep track of </span><span class="line" data-startTime="1748">basically pulse events. </span> <span class="line" data-startTime="1749">Because it would stop sending </span><span class="line" data-startTime="1749">events, but the socket would </span><span class="line" data-startTime="1751">remain open. </span> <span class="line" data-startTime="1752">So if it did receive a pulse for </span><span class="line" data-startTime="1752">a certain amount of time, </span><span class="line" data-startTime="1754">it would basically say, OK, this </span><span class="line" data-startTime="1754">device is disconnected. </span></p>

<p><span class="line" data-startTime="1757">And also on the client side, </span><span class="line" data-startTime="1757">basically every frame we </span><span class="line" data-startTime="1762">checked the time stamp and how </span><span class="line" data-startTime="1762">long they'd been since the </span><span class="line" data-startTime="1765">last frame executed. </span> <span class="line" data-startTime="1766">So if it's been a few seconds, </span><span class="line" data-startTime="1766">you know the </span><span class="line" data-startTime="1768">device has fallen asleep. </span> <span class="line" data-startTime="1769">And then you can show the </span><span class="line" data-startTime="1769">message saying you need to </span><span class="line" data-startTime="1772">refresh the page. </span></p>

<p class="speaker"><span class="line" data-starttime="1774"><span class="speakerName">Pete LePage</span>: That's an </span><span class="line" data-startTime="1774">interesting one. </span><span class="line" data-startTime="1776">And I've not heard of any </span><span class="line" data-startTime="1776">discussions of that. </span><span class="line" data-startTime="1779">I would encourage you &mdash; </span><span class="line" data-startTime="1781">and any time as a developer if </span><span class="line" data-startTime="1781">you're watching this show and </span><span class="line" data-startTime="1785">you're working on something and </span><span class="line" data-startTime="1785">your like, I wish I had </span><span class="line" data-startTime="1788">this feature, go file a bug </span><span class="line" data-startTime="1788">on the Chromium bugs list. </span><span class="line" data-startTime="1792">new.crbug.com is the easiest </span><span class="line" data-startTime="1792">way to get a bug filed. </span><span class="line" data-startTime="1797">new.mcrbug.com is a quick, easy </span><span class="line" data-startTime="1797">way to get a bug filed </span><span class="line" data-startTime="1804">for mobile Chrome. </span><span class="line" data-startTime="1806">But that's a great </span><span class="line" data-startTime="1806">feature request. </span><span class="line" data-startTime="1808">And that's something that I'll </span><span class="line" data-startTime="1808">take back to the team and </span><span class="line" data-startTime="1811">we'll definitely look into. </span></p>

<p class="speaker"><span class="line" data-starttime="1812"><span class="speakerName">Michael Anthony</span>: Cool. </span></p>

<p class="speaker"><span class="line" data-starttime="1813"><span class="speakerName">Pete LePage</span>: So my last question </span><span class="line" data-startTime="1813">for you guys, kind of </span><span class="line" data-startTime="1817">an easy one, what was </span><span class="line" data-startTime="1817">your high score? </span><span class="line" data-startTime="1820">What do we need to beat </span><span class="line" data-startTime="1820">while trying to play? </span></p>

<p class="speaker"><span class="line" data-starttime="1824"><span class="speakerName">Andy Thelander</span>: Just don't </span><span class="line" data-startTime="1824">fly off the track. </span></p>

<p class="speaker"><span class="line" data-starttime="1825"><span class="speakerName">Michael Anthony</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1827"><span class="speakerName">Andy Thelander</span>: We got pretty </span><span class="line" data-startTime="1827">good at playing the game. </span><span class="line" data-startTime="1830">If you tap right before you go </span><span class="line" data-startTime="1830">through a corner, it doesn't </span><span class="line" data-startTime="1834">fly off the track. </span></p>

<p class="speaker"><span class="line" data-starttime="1835"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="1836"><span class="speakerName">Michael Anthony</span>: That might </span><span class="line" data-startTime="1836">be how we coded it. </span><span class="line" data-startTime="1837">We're not too sure. </span><span class="line" data-startTime="1839">But, yeah, that's [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1841"><span class="speakerName">Pete LePage</span>: Not that </span><span class="line" data-startTime="1841">you're giving away, </span><span class="line" data-startTime="1842">like, any secret hints. </span><span class="line" data-startTime="1843">Or actually &mdash; </span><span class="line" data-startTime="1844">OK, one more question. </span><span class="line" data-startTime="1845">Any good cheats or anything like </span><span class="line" data-startTime="1845">that developers should be </span><span class="line" data-startTime="1848">aware of that they </span><span class="line" data-startTime="1848">can play with? </span></p>

<p class="speaker"><span class="line" data-starttime="1851"><span class="speakerName">Michael Anthony</span>: I don't think </span><span class="line" data-startTime="1851">there's any cheats. </span></p>

<p class="speaker"><span class="line" data-starttime="1853"><span class="speakerName">Andy Thelander</span>: Yeah, no </span><span class="line" data-startTime="1853">Easter eggs there. </span></p>

<p class="speaker"><span class="line" data-starttime="1855"><span class="speakerName">Michael Anthony</span>: It's more like, </span><span class="line" data-startTime="1855">if you tap and release </span><span class="line" data-startTime="1857">at a steady interval, you're </span><span class="line" data-startTime="1857">not going to fly off. </span><span class="line" data-startTime="1860">You're going to give up a little </span><span class="line" data-startTime="1860">bit of maximum speed, </span><span class="line" data-startTime="1863">but you're going to </span><span class="line" data-startTime="1863">be safer that way. </span></p>

<p class="speaker"><span class="line" data-starttime="1864"><span class="speakerName">Pete LePage</span>: Cool. </span> <span class="line" data-startTime="1866">Awesome. </span> <span class="line" data-startTime="1867">Well, guys thank you very, </span><span class="line" data-startTime="1867">very much for joining us. </span> <span class="line" data-startTime="1869">For those of you who are </span><span class="line" data-startTime="1869">watching at home, you should </span><span class="line" data-startTime="1873">definitely check out the </span><span class="line" data-startTime="1873">game at g.co/racer. </span> <span class="line" data-startTime="1877">And you should check out the </span><span class="line" data-startTime="1877">"HTML5 Rocks" article that </span><span class="line" data-startTime="1879">these guys wrote. </span> <span class="line" data-startTime="1880">It was really good, really </span><span class="line" data-startTime="1880">interesting. </span> <span class="line" data-startTime="1882">I learned a little bit. </span> <span class="line" data-startTime="1884">I thought it was a fascinating </span><span class="line" data-startTime="1884">article to </span><span class="line" data-startTime="1886">get behind the scenes. </span> <span class="line" data-startTime="1888">So with that, I want </span><span class="line" data-startTime="1888">to say thanks </span><span class="line" data-startTime="1889">everybody for joining us. </span></p>

<p><span class="line" data-startTime="1890">Thanks to Michael and Andy for </span><span class="line" data-startTime="1890">joining us and getting up </span><span class="line" data-startTime="1893">early in LA this morning. </span></p>

<p class="speaker"><span class="line" data-starttime="1895"><span class="speakerName">Andy Thelander</span>: Nice. </span><span class="line" data-startTime="1896">[INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1896"><span class="speakerName">Pete LePage</span>: And thanks </span><span class="line" data-startTime="1896">everybody. </span><span class="line" data-startTime="1899">Have a great day. </span><span class="line" data-startTime="1912">[MUSIC PLAYING] </span></p></div>