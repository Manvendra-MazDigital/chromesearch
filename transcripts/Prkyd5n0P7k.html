<p class="speaker"><span class="line" data-starttime="0"><span class="speakerName">Colton McAnlis</span>: I'm here today. This is </span><span class="line" data-startTime="0">fantastic. Hello, everyone! </span><span class="line" data-startTime="5">Try that again. </span><span class="line" data-startTime="5">Oh, this is Google I/O. Hello everyone! </span></p>

<p class="speaker"><span class="line" data-starttime="10"><span class="speakerName">Audience member</span>: Hello! </span></p>

<p class="speaker"><span class="line" data-starttime="10"><span class="speakerName">Colton McAnlis</span>: There it is. </span> <span class="line" data-startTime="12">Now, I don't know if you guys know this, hopefully </span><span class="line" data-startTime="12">you do, this session is being live recorded </span><span class="line" data-startTime="16">and broadcasted on the intertubes right now. </span> <span class="line" data-startTime="16">Hopefully we won't clog them up with all of </span><span class="line" data-startTime="20">our awesomeness. </span> <span class="line" data-startTime="20">A couple of months ago I said, Hey, I want </span><span class="line" data-startTime="25">to talk about this HTML5 game and to demo </span><span class="line" data-startTime="25">it, and actually I want to have some skydivers </span><span class="line" data-startTime="29">jump down, come in and give a talk. And they </span><span class="line" data-startTime="29">were like, Sorry, we can't do that. We did </span><span class="line" data-startTime="33">that for the keynote. Next year we'll do skydiving. </span> <span class="line" data-startTime="33">Anyway, my name is Colt McAnlis and I'm a </span><span class="line" data-startTime="39">developer advocate here working at Google, </span><span class="line" data-startTime="39">focusing on Chrome games. </span> <span class="line" data-startTime="44">And today is really cool because for you guys </span><span class="line" data-startTime="44">this is Google I/O and you get a lot of information, </span><span class="line" data-startTime="50">but for us Googlers this is a holiday, this </span><span class="line" data-startTime="50">is a magical event for us because all year </span><span class="line" data-startTime="56">long we toil and we struggle and we write </span><span class="line" data-startTime="56">tons of code and throw tons of code away and </span><span class="line" data-startTime="61">we spend all of our time making products that </span><span class="line" data-startTime="61">we can't talk to any of you about. Except </span><span class="line" data-startTime="67">today. </span></p>

<p><span class="line" data-startTime="67">And today is a fantastic day because I get </span><span class="line" data-startTime="71">to talk about a project myself and a core </span><span class="line" data-startTime="71">group of people have been working on, and </span><span class="line" data-startTime="75">that's a game called GRITS. And GRITS, first </span><span class="line" data-startTime="75">off it has robots, pretty cool. Everybody </span><span class="line" data-startTime="80">love robots. </span> <span class="line" data-startTime="80">Hands up for robots. </span> <span class="line" data-startTime="82">[Applause] </span><span class="line" data-startTime="82">Love this. Yes, I think there should be more </span><span class="line" data-startTime="85">robots on the internet. That's my personal </span><span class="line" data-startTime="85">opinion. </span> <span class="line" data-startTime="89">Let's talk about where GRITS started. </span> <span class="line" data-startTime="89">GRITS is player versus player game entirely </span><span class="line" data-startTime="93">written in HTML5. </span> <span class="line" data-startTime="93">A couple of months ago I gave a great talk </span><span class="line" data-startTime="97">&mdash; I thought it was a great talk. I didn't </span><span class="line" data-startTime="97">get promoted afterwards, but it still went </span><span class="line" data-startTime="100">over quite well, best practices in developing </span><span class="line" data-startTime="100">an HTML5 game. The talk effectively highlighted </span><span class="line" data-startTime="106">issues that game developers were running into </span><span class="line" data-startTime="106">in developing HTML5 and kind of how to overcome </span><span class="line" data-startTime="110">them. </span></p>

<p><span class="line" data-startTime="110">Someone came up to me and said "This is a </span><span class="line" data-startTime="113">great talk. Where's the source code?" </span><span class="line" data-startTime="113">Dang it! You got me. </span> <span class="line" data-startTime="118">We just talked about ideas. </span> <span class="line" data-startTime="118">So at that point we decided, Hey, let's actually </span><span class="line" data-startTime="121">write a full player versus player game in </span><span class="line" data-startTime="121">HTML5, open source it and bring the results </span><span class="line" data-startTime="126">to Google I/O. And that's what we're here </span><span class="line" data-startTime="126">talking about today. </span> <span class="line" data-startTime="130">So in order to make sure that a bunch of Googlers </span><span class="line" data-startTime="130">didn't run off into the distance and do something </span><span class="line" data-startTime="134">crazy, our managers made us specify some bounding </span><span class="line" data-startTime="134">parameters on what kind of video game we were </span><span class="line" data-startTime="139">going to make. </span> <span class="line" data-startTime="139">So we wanted to make sure it was multiplayer </span><span class="line" data-startTime="141">only. We're gonna be a small group with a </span><span class="line" data-startTime="141">small a lot of time. We didn't have artists, </span><span class="line" data-startTime="145">we don't have designers, we don't have the </span><span class="line" data-startTime="145">ability to create a 56-hour expression of </span><span class="line" data-startTime="150">our inner angst by you riding a horse and </span><span class="line" data-startTime="150">slaying a dragon. Let's make it multiplayer </span><span class="line" data-startTime="156">only where robots shoot robots in the face. </span> <span class="line" data-startTime="156">Super easy, right? </span><span class="line" data-startTime="161">Second, let's leverage Google technologies. </span></p>

<p><span class="line" data-startTime="161">As you guys have been hearing today already </span><span class="line" data-startTime="166">&mdash; because you're here at Google I/O you are </span><span class="line" data-startTime="166">probably already very aware that Google provides </span><span class="line" data-startTime="171">a suite of powerful technologies. And a lot </span><span class="line" data-startTime="171">of game developers out there actually don't </span><span class="line" data-startTime="176">know how to use a lot of the Google technologies </span><span class="line" data-startTime="176">and translate it into the game development </span><span class="line" data-startTime="179">process. </span> <span class="line" data-startTime="179">So for GRITS what we wanted to do was highlight </span><span class="line" data-startTime="183">those technologies and provide a source code </span><span class="line" data-startTime="183">on how to properly use them so that we can </span><span class="line" data-startTime="187">actually say, Hey, here's a game that actually </span><span class="line" data-startTime="187">works and it's using app engine. Here's the </span><span class="line" data-startTime="191">source code. Or Hey, here's how to use wallet </span><span class="line" data-startTime="191">the right way. Here's the source code. </span></p>

<p><span class="line" data-startTime="196">Second, we wanted to contract our art and </span><span class="line" data-startTime="196">sound. Google is a big company, but we're </span><span class="line" data-startTime="200">predominantly engineer heavy. We don't have </span><span class="line" data-startTime="200">a lot of 3D artists and designers sitting </span><span class="line" data-startTime="204">around. So we actually we tapped a great company </span><span class="line" data-startTime="204">called Fuzzy Cube Software to do all the art </span><span class="line" data-startTime="209">for our games. Give it up for those guys. </span> <span class="line" data-startTime="209">[ Applause ] </span></p>

<p class="speaker"><span class="line" data-starttime="212"><span class="speakerName">Colton McAnlis</span>: It was like we came in and </span><span class="line" data-startTime="212">we were like, Hey, we need a ton of art in </span><span class="line" data-startTime="218">like six days. </span> <span class="line" data-startTime="218">And they were like, Okay. </span> <span class="line" data-startTime="221">And finally &mdash; and this was one my manager </span><span class="line" data-startTime="221">actually made me put on the slide was our </span><span class="line" data-startTime="226">intent was not to make this product commercially </span><span class="line" data-startTime="226">viable. This was intended to be a source code </span><span class="line" data-startTime="230">repo that everyone in this room can go grab </span><span class="line" data-startTime="230">and start making player versus player HTML5 </span><span class="line" data-startTime="235">games. We're not trying to take on all the </span><span class="line" data-startTime="235">big names of the industry out there. We're </span><span class="line" data-startTime="239">really trying to prove that this is something </span><span class="line" data-startTime="239">we can do. </span> <span class="line" data-startTime="242">In order to do this, I actually tapped game </span><span class="line" data-startTime="242">developers who work at Google. So these are </span><span class="line" data-startTime="248">developers who used to be in the industry, </span><span class="line" data-startTime="248">shipped games on console and PC who now work </span><span class="line" data-startTime="252">at Google. </span></p>

<p><span class="line" data-startTime="252">In addition to that, we also grabbed a couple </span><span class="line" data-startTime="256">of people who were experts in the subject </span><span class="line" data-startTime="256">area we needed so that we can actually get </span><span class="line" data-startTime="261">a full-fledged team. </span> <span class="line" data-startTime="261">Consider GRITS a view of traditional game </span><span class="line" data-startTime="266">developers looking at HTML5 as a viable platform. </span> <span class="line" data-startTime="266">And hopefully the discussion that we're going </span><span class="line" data-startTime="270">to have today is going to highlight some of </span><span class="line" data-startTime="270">the things from that particular perspective. </span> <span class="line" data-startTime="274">Again, we wanted to bring our results here. </span> <span class="line" data-startTime="274">We thought this was the proper platform. And </span><span class="line" data-startTime="279">from the start to finish we only had 120 days. </span> <span class="line" data-startTime="279">I'm sure everyone in here has heard of Google's </span><span class="line" data-startTime="284">20% projects hopefully? That basically means </span><span class="line" data-startTime="284">we're only allowed to work on this one day </span><span class="line" data-startTime="289">a week. So really for the 120 days we only </span><span class="line" data-startTime="289">got one day a week. But with that short amount </span><span class="line" data-startTime="294">of time what we found was the APIs and the </span><span class="line" data-startTime="294">technology available in HTML5 allowed us to </span><span class="line" data-startTime="299">do some amazing things. </span> <span class="line" data-startTime="299">So let's talk about what we actually were </span><span class="line" data-startTime="302">able to do. I'm going to cut to a video because </span><span class="line" data-startTime="302">I've been having internet trouble all day. </span></p>

<p><span class="line" data-startTime="308">Let's see if I can do this. </span> <span class="line" data-startTime="308">So what you're looking at here sort of the </span><span class="line" data-startTime="317">log-in screen. We allow players to use Quick </span><span class="line" data-startTime="317">Game or log-in. </span> <span class="line" data-startTime="320">We have full G+ integration so when we log </span><span class="line" data-startTime="320">in you actually see my friends list and my </span><span class="line" data-startTime="324">Circles there on the side. You actually see </span><span class="line" data-startTime="324">my name and my portrait and we've got that </span><span class="line" data-startTime="329">nice little share button which allows you </span><span class="line" data-startTime="329">to share the game to the live stream and tell </span><span class="line" data-startTime="332">people what a great thing you're doing. Now, </span><span class="line" data-startTime="332">you notice I actually misspelled GRITS so </span><span class="line" data-startTime="335">I decided not to share that one. It's a little </span><span class="line" data-startTime="335">embarrassing. </span> <span class="line" data-startTime="337">For the game we support keyboard layout or </span><span class="line" data-startTime="337">mouse so that you can actually play it on </span><span class="line" data-startTime="342">your laptop or on your desktop. </span> <span class="line" data-startTime="342">When you run into the game you configure your </span><span class="line" data-startTime="346">robot first. This is sort of phase one of </span><span class="line" data-startTime="346">a longer strategy here. You can pick primary, </span><span class="line" data-startTime="351">secondary or tertiary weapons like chainsaw, </span><span class="line" data-startTime="351">land mines, shotgun. I think I have the energy </span><span class="line" data-startTime="357">sword here. </span> <span class="line" data-startTime="357">Energy sword is the bomb. If you're playing </span><span class="line" data-startTime="360">the game always choose the energy sword. It's </span><span class="line" data-startTime="360">plus 10 uber awesome. </span></p>

<p><span class="line" data-startTime="364">We have a little bit of a lag on the delay. </span> <span class="line" data-startTime="364">It's not that choppy live, but basically it's </span><span class="line" data-startTime="371">robots shooting each other. Right? Everyone </span><span class="line" data-startTime="371">loves that, right? This is why we get up in </span><span class="line" data-startTime="375">the morning to see robots shooting each other. </span> <span class="line" data-startTime="375">Effectively you see a little bit of the jittering </span><span class="line" data-startTime="379">here. That's due to latency, networking correction. </span> <span class="line" data-startTime="379">We've got energy items that you can pick up. </span> <span class="line" data-startTime="385">We've got help bars, names. You can actually </span><span class="line" data-startTime="385">see the anonymous players running around in </span><span class="line" data-startTime="390">the universe. You can see the bullets bouncing. </span></p>

<p><span class="line" data-startTime="390">Energy shield, awesome. +1 on the energy field. </span> <span class="line" data-startTime="394">Like sometimes you wish the +1 button were </span><span class="line" data-startTime="394">bigger so you could hit it so hard it would </span><span class="line" data-startTime="398">put a dent in wall. Right, when you find something </span><span class="line" data-startTime="398">cool? Nobody else? No one? </span><span class="line" data-startTime="401">[Laughter] </span></p>

<p class="speaker"><span class="line" data-starttime="401"><span class="speakerName">Colton McAnlis</span>: You're at a Google conference </span><span class="line" data-startTime="403">and you don't applaud for a bigger +1 button? </span><span class="line" data-startTime="403">[ Applause ] </span></p>

<p class="speaker"><span class="line" data-starttime="406"><span class="speakerName">Colton McAnlis</span>: Okay. There you go. In the </span><span class="line" data-startTime="406">back, give that guy a T-shirt. </span> <span class="line" data-startTime="413">But this is more of the game play running </span><span class="line" data-startTime="413">around. Of course I died at the end. </span> <span class="line" data-startTime="417">Now, that little QR code at the top there, </span><span class="line" data-startTime="417">we'll talk a little more about that in a minute. </span> <span class="line" data-startTime="422">So that is the demo. </span> <span class="line" data-startTime="422">So what we're going to talk about today is </span><span class="line" data-startTime="426">how we built this product, how we put it together </span><span class="line" data-startTime="426">so that you can walk out of here understanding </span><span class="line" data-startTime="430">how you actually make player versus player </span><span class="line" data-startTime="430">games with HTML5 and then you can go off and </span><span class="line" data-startTime="434">make awesomeness on your own because that's </span><span class="line" data-startTime="434">what I/O is all about, right? </span><span class="line" data-startTime="437">So let's start at the top. The player part </span><span class="line" data-startTime="437">of player versus player is the most important. </span></p>

<p><span class="line" data-startTime="442">So in a traditional game developer sense, </span><span class="line" data-startTime="442">when you want to get a bunch of computers </span><span class="line" data-startTime="446">simulating a game together the easiest way </span><span class="line" data-startTime="446">to do it is to allow each game to actually </span><span class="line" data-startTime="450">simulate the state on its own and then transfer </span><span class="line" data-startTime="450">the state to all the other machines. </span> <span class="line" data-startTime="455">This model is actually called a peer-to-peer </span><span class="line" data-startTime="455">networking, so each game actually independently </span><span class="line" data-startTime="460">computes all the physics, math, position of </span><span class="line" data-startTime="460">rockets, explosions, power-ups, sends it to </span><span class="line" data-startTime="465">all the other clients which receives it and </span><span class="line" data-startTime="465">says, Okay, this is your game state. </span> <span class="line" data-startTime="468">Now, in the early '90s this was the predominant </span><span class="line" data-startTime="468">way that games did multiplayer networking, </span><span class="line" data-startTime="474">and we've thankfully moved away from that </span><span class="line" data-startTime="474">for a couple of reasons. Number one is this </span><span class="line" data-startTime="478">methodology is actually really prone to lag </span><span class="line" data-startTime="478">or high latency. So what will happen is in </span><span class="line" data-startTime="483">a player versus player or a peer-to-peer network, </span><span class="line" data-startTime="483">if any single player actually starts to slow </span><span class="line" data-startTime="488">down or their connection is bad or the machine </span><span class="line" data-startTime="488">slows down, you miss a whole load of data </span><span class="line" data-startTime="493">that has to be synced between all the other </span><span class="line" data-startTime="493">machines. And the only real resolution to </span><span class="line" data-startTime="497">that is actually to halt the other players </span><span class="line" data-startTime="497">in the simulation or slow them down as well. </span></p>

<p><span class="line" data-startTime="501">So if any of you played some classic first-person </span><span class="line" data-startTime="501">shooter games from the '90s you would get </span><span class="line" data-startTime="505">that disconnected icon in the corner, like, </span><span class="line" data-startTime="505">Hey, wait, we're waiting for someone to tell </span><span class="line" data-startTime="508">us what's going on. </span> <span class="line" data-startTime="508">Another problem with the peer-to-peer networking </span><span class="line" data-startTime="511">model is it was massively prone to cheating. </span> <span class="line" data-startTime="511">So what would happen is a single player could </span><span class="line" data-startTime="515">say Hey, I just picked up the rune of Antioch </span><span class="line" data-startTime="515">and I'm now invincible for the next 12 days, </span><span class="line" data-startTime="520">and all the other players would have to abide </span><span class="line" data-startTime="520">by that information because that's the way </span><span class="line" data-startTime="524">peer to peer worked. </span> <span class="line" data-startTime="524">Thankfully again we've moved from this. </span> <span class="line" data-startTime="528">What we use today, and this is what GRITS </span><span class="line" data-startTime="528">is actually built on, is the technology called </span><span class="line" data-startTime="531">the authoritative server. So instead of the </span><span class="line" data-startTime="531">clients actually calculating the game state </span><span class="line" data-startTime="535">themself, we actually allow a centralized </span><span class="line" data-startTime="535">server to calculate all the game state and </span><span class="line" data-startTime="540">then send the results down to the clients. </span> <span class="line" data-startTime="540">At this point this means the clients are nothing </span><span class="line" data-startTime="545">more than dumb terminals. All they do is take </span><span class="line" data-startTime="545">an input, send it to the server, receive game </span><span class="line" data-startTime="550">state and render the results of what the server </span><span class="line" data-startTime="550">tells them to do. </span> <span class="line" data-startTime="554">This is a lot better. First off, it fixes </span><span class="line" data-startTime="554">our cheating problem because the server is </span><span class="line" data-startTime="559">authoritative. It tells you who has the rune </span><span class="line" data-startTime="559">of Antioch and whether or not it's [indiscernible] </span><span class="line" data-startTime="562">and whether or not there's a DPS sell at the </span><span class="line" data-startTime="562">end of it, but that's a separate discussion. </span></p>

<p><span class="line" data-startTime="569">Gamers! </span><span class="line" data-startTime="569">[Laughter] </span></p>

<p class="speaker"><span class="line" data-starttime="569"><span class="speakerName">Colton McAnlis</span>: Secondly, it also fixes </span><span class="line" data-startTime="569">the lag problem, right? If any single individual </span><span class="line" data-startTime="573">actually drops out of the network or experiences </span><span class="line" data-startTime="573">bad latency, what happens is we don't have </span><span class="line" data-startTime="578">to slow down the other players in the simulation, </span><span class="line" data-startTime="578">we just have to let that guy go do its thing </span><span class="line" data-startTime="582">and the server assumes that it hasn't received </span><span class="line" data-startTime="582">any new input. This actually creates a better </span><span class="line" data-startTime="588">quality of game play for the rest of the people </span><span class="line" data-startTime="588">in the simulation. </span> <span class="line" data-startTime="591">This is actually pretty much the architecture </span><span class="line" data-startTime="591">that most multiplayer games are built on today. </span> <span class="line" data-startTime="595">This includes all your RPG's, MMO's, FPS's. </span> <span class="line" data-startTime="595">Most RTS games, real time strategy games, </span><span class="line" data-startTime="602">today are actually built on the peer-to-peer </span><span class="line" data-startTime="602">network technology simply because there's </span><span class="line" data-startTime="605">so much data to actually simulate, and then </span><span class="line" data-startTime="605">they get around the cheating issue with some </span><span class="line" data-startTime="609">other craziness that is way beyond this talk. </span></p>

<p><span class="line" data-startTime="609">Because we have an authoritative server we </span><span class="line" data-startTime="614">run into a very specific problem, and that </span><span class="line" data-startTime="614">problem is server compute latency. So let's </span><span class="line" data-startTime="619">say you're running on the client and you actually </span><span class="line" data-startTime="619">say, Hey, I want to move my robot forward. </span> <span class="line" data-startTime="623">That input is actually sent up to the server. </span> <span class="line" data-startTime="623">The server will take some time to compute </span><span class="line" data-startTime="627">the new state and then the state is then transferred </span><span class="line" data-startTime="627">back down to the client where the client receives </span><span class="line" data-startTime="632">it, updates its information and then hopefully </span><span class="line" data-startTime="632">displays it to the user. </span> <span class="line" data-startTime="637">The problem with this is that the time between </span><span class="line" data-startTime="637">input move and update state from the server </span><span class="line" data-startTime="643">is going to always be longer than it takes </span><span class="line" data-startTime="643">for the client to actually render the next </span><span class="line" data-startTime="647">frame, or at least you hope that you're rendering </span><span class="line" data-startTime="647">it at 60 frames per second and you're not </span><span class="line" data-startTime="651">getting packets that fast. </span> <span class="line" data-startTime="651">The result of this is that you actually get </span><span class="line" data-startTime="654">really choppy animation. So we've got our </span><span class="line" data-startTime="654">robot on the bottom here and if we just only </span><span class="line" data-startTime="658">update his position when the server tells </span><span class="line" data-startTime="658">us to, he will pop into position A and then </span><span class="line" data-startTime="662">pop into position B, if my clicker works. </span></p>

<p><span class="line" data-startTime="662">See, the clicker, it's awesome. </span> <span class="line" data-startTime="667">Now to compete &mdash; uh, blublublublublu. Will </span><span class="line" data-startTime="667">she write blublublublublu if I say that again? </span><span class="line" data-startTime="679">Yes! </span><span class="line" data-startTime="679">[Laughter] </span></p>

<p class="speaker"><span class="line" data-starttime="681"><span class="speakerName">Colton McAnlis</span>: I found a new toy! </span><span class="line" data-startTime="681">I want to actually do the rest of the talk </span><span class="line" data-startTime="689">like this. </span><span class="line" data-startTime="689">[Laughter] </span></p>

<p class="speaker"><span class="line" data-starttime="691"><span class="speakerName">Colton McAnlis</span>: Sorry, I'm messing with </span><span class="line" data-startTime="691">the people typing. </span> <span class="line" data-startTime="696">Anyhow, GRITS computes this with something </span><span class="line" data-startTime="696">we actually call clientside protection, which </span><span class="line" data-startTime="700">means that while the server is actually computing </span><span class="line" data-startTime="700">the game state the client will compute the </span><span class="line" data-startTime="704">same game state in parallel. What this means </span><span class="line" data-startTime="704">is that after the user issues the move command, </span><span class="line" data-startTime="709">that is sent off to the server and the server </span><span class="line" data-startTime="709">will compute the state, but the client will </span><span class="line" data-startTime="713">also compute the state. This actually allows </span><span class="line" data-startTime="713">us to do a smooth animation between the next </span><span class="line" data-startTime="717">position so that the user actually doesn't </span><span class="line" data-startTime="717">see this lag created by sending packets to </span><span class="line" data-startTime="724">the server. </span> <span class="line" data-startTime="724">And that was supposed to be animated, but </span><span class="line" data-startTime="726">something happened and so the arrows mean </span><span class="line" data-startTime="726">animation. </span> <span class="line" data-startTime="729">Use your imagination. You guys are smart. </span> <span class="line" data-startTime="729">I think. She wrote it, cool. </span> <span class="line" data-startTime="736">The cool thing is that's on the internet live </span><span class="line" data-startTime="736">right now. Someone is like "He's insulting </span><span class="line" data-startTime="741">the audience!" </span><span class="line" data-startTime="741">So anyhow, that's the basics of how player </span><span class="line" data-startTime="744">versus player games work. </span></p>

<p><span class="line" data-startTime="744">Now, let's talk about the things that GRITS </span><span class="line" data-startTime="747">does specifically because GRITS of course </span><span class="line" data-startTime="747">is an HTML5 game. So what you just saw is </span><span class="line" data-startTime="752">applicable to C++ games and everything else </span><span class="line" data-startTime="752">in the wild. GRITS being HTML5 had to do a </span><span class="line" data-startTime="756">lot of things different. Let's dive into that </span><span class="line" data-startTime="756">a bit. </span> <span class="line" data-startTime="763">So let's talk about our architecture. First </span><span class="line" data-startTime="763">off, our client's information, which consists </span><span class="line" data-startTime="767">basically of our HTML data, our JavaScript, </span><span class="line" data-startTime="767">our sound files in OGG, everything else, this </span><span class="line" data-startTime="773">is actually served on top of App Engine. We </span><span class="line" data-startTime="773">actually serve all the content. Our domain </span><span class="line" data-startTime="777">is at appengine.com domain. And we actually </span><span class="line" data-startTime="777">store and communicate to App Engine, also </span><span class="line" data-startTime="783">store the database information. So the number </span><span class="line" data-startTime="783">of kills you get, the number of credits you </span><span class="line" data-startTime="787">have, how many times you use the energy sword </span><span class="line" data-startTime="787">of awesomeness to frag some other dude, that's </span><span class="line" data-startTime="792">all stored on the server. Actually, if you </span><span class="line" data-startTime="792">look at the code you will see traces of information </span><span class="line" data-startTime="796">about how to do unlockable items. One of the </span><span class="line" data-startTime="796">first updates in the patches that we want </span><span class="line" data-startTime="800">to do is show you how to do unlockable items </span><span class="line" data-startTime="800">using Wallet and credit applications. You </span><span class="line" data-startTime="805">guys can just grab that code and put it into </span><span class="line" data-startTime="805">your games, making more awesome games. </span></p>

<p><span class="line" data-startTime="810">The client will also communicate to Google+ </span><span class="line" data-startTime="810">as well as Google Analytics. You saw in the </span><span class="line" data-startTime="814">video that Google+ we grab your friends information, </span><span class="line" data-startTime="814">we can actually link to the page, we can post </span><span class="line" data-startTime="818">to your stream. </span> <span class="line" data-startTime="818">The Analytics one is actually really cool. </span> <span class="line" data-startTime="822">So for those of you in here who aren't game </span><span class="line" data-startTime="822">developers, there's the concept of being able </span><span class="line" data-startTime="827">to track what your users are doing at pretty </span><span class="line" data-startTime="827">much every second of a game. So what we actually </span><span class="line" data-startTime="832">do in GRITS is when a player dies we actually </span><span class="line" data-startTime="832">log that data to Google Analytics. We actually </span><span class="line" data-startTime="837">fire off a custom event and that's stored </span><span class="line" data-startTime="837">in the Analytic system. Then what we can do </span><span class="line" data-startTime="842">is come back and say, Hey, show me the map </span><span class="line" data-startTime="842">and show me where all the deaths have occurred </span><span class="line" data-startTime="846">in the past 72 hours. The cool thing about </span><span class="line" data-startTime="846">it is that it allows our designers to take </span><span class="line" data-startTime="850">a look at the map and go Hey, you know, there's </span><span class="line" data-startTime="850">a choke point right here. There's probably </span><span class="line" data-startTime="854">way too many deaths. I'd like to change the </span><span class="line" data-startTime="854">map a little bit and move things around. </span></p>

<p><span class="line" data-startTime="857">It also tells us things like how many people </span><span class="line" data-startTime="857">actually use the energy sword and whether </span><span class="line" data-startTime="862">or not we should get rid of it entirely. </span> <span class="line" data-startTime="862">And we drive all this data collection through </span><span class="line" data-startTime="865">Google Analytics, so it's not just for webmasters </span><span class="line" data-startTime="865">trying to figure out if half the traffic is </span><span class="line" data-startTime="870">coming from Asia or it's coming from slashdot. </span> <span class="line" data-startTime="870">We can actually use these custom events to </span><span class="line" data-startTime="875">get real information about what our players </span><span class="line" data-startTime="875">are actually doing in our game and provide </span><span class="line" data-startTime="878">a tight feedback loop to make adjustments, </span><span class="line" data-startTime="878">real time. We use node.js. Node.js fans? </span><span class="line" data-startTime="887">[ APPLAUSE ] </span></p>

<p class="speaker"><span class="line" data-starttime="887"><span class="speakerName">Colton McAnlis</span>: When I was taking notes, </span><span class="line" data-startTime="887">I was like I need to write a talk, there's </span><span class="line" data-startTime="892">probably going to be robot fans and node.js </span><span class="line" data-startTime="892">fans. Check. We &mdash; our back end actually runs </span><span class="line" data-startTime="898">node.js out in the cloud running on a compute </span><span class="line" data-startTime="898">server, and our client communicates to our </span><span class="line" data-startTime="904">game instance, our node.js instance, using </span><span class="line" data-startTime="904">socket IO through websockets, and there's </span><span class="line" data-startTime="908">a cool fact of the matter that, you know, </span><span class="line" data-startTime="908">Web sockets are actually sort of a TCP variant </span><span class="line" data-startTime="913">with a much safer UI. Much safer API. Now, </span><span class="line" data-startTime="913">the client will also do some other interesting </span><span class="line" data-startTime="918">communications. You'll notice that when I </span><span class="line" data-startTime="918">clicked quick game, or wanted to join a game, </span><span class="line" data-startTime="923">the client and the server actually communicate </span><span class="line" data-startTime="923">to match maker. Now, this is actually one </span><span class="line" data-startTime="927">of sort of the advents in the last fifteen </span><span class="line" data-startTime="927">years of game development process is the fact </span><span class="line" data-startTime="931">that people realize that if there's a 12-year-old </span><span class="line" data-startTime="931">kid sitting in some area where he doesn't </span><span class="line" data-startTime="935">have to go to school all day, and can just </span><span class="line" data-startTime="935">sit there and play games all day, you hop </span><span class="line" data-startTime="939">on for a match, and you're matched with him, </span><span class="line" data-startTime="939">he's going to destroy you, and every time, </span><span class="line" data-startTime="942">and that's not cool for you, because he's </span><span class="line" data-startTime="942">like, "ha, ha, I'm only 12," and you're like, </span><span class="line" data-startTime="946">"Hey, dude, i got a job, lay off me." He's </span><span class="line" data-startTime="946">like, "you smell". Or at least that's what </span><span class="line" data-startTime="951">my last weekend was like. Anyhow, what match </span><span class="line" data-startTime="951">makers do is they effectively attempt to try </span><span class="line" data-startTime="956">to match players of unique skills, put them </span><span class="line" data-startTime="956">together in buckets, find an open game this </span><span class="line" data-startTime="961">massive conversational back end that figures </span><span class="line" data-startTime="961">out how to slot people and combine them in </span><span class="line" data-startTime="966">ways that make their experience in the game </span><span class="line" data-startTime="966">a lot better. So we actually have a match </span><span class="line" data-startTime="969">maker running for GRITS that runs entirely </span><span class="line" data-startTime="969">on app engine, and the cool thing is we're </span><span class="line" data-startTime="974">not going to talk about this today, but you </span><span class="line" data-startTime="974">all need to go to the talk by Fred Sauer called </span><span class="line" data-startTime="978">"Gaming in the Cloud", and I think actually </span><span class="line" data-startTime="978">that time is incorrect. I think it got moved </span><span class="line" data-startTime="981">again. But anyhow, go to gaming in the cloud. </span></p>

<p><span class="line" data-startTime="981">He's going to talk about all of the app engine </span><span class="line" data-startTime="985">side of GRITS including that interesting QR </span><span class="line" data-startTime="985">code. One of the things Fred did was actually </span><span class="line" data-startTime="991">write an Android controller for GRITS, and </span><span class="line" data-startTime="991">so if you actually scan that QR code with </span><span class="line" data-startTime="996">your Android phone, you can actually play </span><span class="line" data-startTime="996">the entire game using your Android device, </span><span class="line" data-startTime="1000">connected to your PC. We use this as sort </span><span class="line" data-startTime="1000">of a controller. Definitely check out his </span><span class="line" data-startTime="1005">talk, he's a cool guy. </span> <span class="line" data-startTime="1005">At the core of our simulation is a fantastic </span><span class="line" data-startTime="1009">library called box2d.JS. And what you're looking </span><span class="line" data-startTime="1009">at here is sort of a mockup of a top-down </span><span class="line" data-startTime="1015">setup. Box2d. So, rather when you look at </span><span class="line" data-startTime="1015">this, you see a game, right? </span><span class="line" data-startTime="1019">But in reality, it's comprised of a lot of </span><span class="line" data-startTime="1019">box2d primitives. In green here we have the </span><span class="line" data-startTime="1024">physics objects represents collision. You </span><span class="line" data-startTime="1024">know, you can't shoot through these things, </span><span class="line" data-startTime="1027">you can't walk through these things. The red </span><span class="line" data-startTime="1027">squares here actually represent in-game objects. </span></p>

<p><span class="line" data-startTime="1032">These are tele-porters. Box2d has a fantastic </span><span class="line" data-startTime="1032">call back system in that as you intersect </span><span class="line" data-startTime="1038">with two items or as a collision occurs, we </span><span class="line" data-startTime="1038">get a nice little call back and we can respond </span><span class="line" data-startTime="1042">to it properly, which means for us writing </span><span class="line" data-startTime="1042">GRITS, we actually can be pretty lazy about </span><span class="line" data-startTime="1045">what kind of code we write. We actually don't </span><span class="line" data-startTime="1045">have to write interesting simulation loops </span><span class="line" data-startTime="1049">or anything. The only code we really write </span><span class="line" data-startTime="1049">is how to spawn an object and what to do when </span><span class="line" data-startTime="1052">it hits another object, so when a user touches </span><span class="line" data-startTime="1052">a tele-porter object, we know that a user </span><span class="line" data-startTime="1056">is touching a tele-porter and then can make </span><span class="line" data-startTime="1056">the appropriate change to tele-port him to </span><span class="line" data-startTime="1061">whatever position he's at or into, you know, </span><span class="line" data-startTime="1061">zulu alpha 90 which is a cool place, you should </span><span class="line" data-startTime="1067">check it out. We also use a great concept </span><span class="line" data-startTime="1067">that Box2D provides which is the collision </span><span class="line" data-startTime="1072">filtering system, so any time we actually </span><span class="line" data-startTime="1072">launch projectiles or objects or spawn a new </span><span class="line" data-startTime="1079">member into the game, they're assigned a team, </span><span class="line" data-startTime="1079">so what you're looking at right there is their </span><span class="line" data-startTime="1082">red player actually &mdash; or the player there </span><span class="line" data-startTime="1082">is actually on the red team, firing projectiles </span><span class="line" data-startTime="1087">that are attached to the red team, and of </span><span class="line" data-startTime="1087">course subsequently we have the blue team. </span></p>

<p><span class="line" data-startTime="1091">This allows us to actually say, hey, don't </span><span class="line" data-startTime="1091">do friendly fire, right? So if you got a team, </span><span class="line" data-startTime="1095">all of red team, you don't want to get shot </span><span class="line" data-startTime="1095">in the back of the head by your teammate. </span> <span class="line" data-startTime="1098">Box2d handles all this for us. All we have </span><span class="line" data-startTime="1098">to do when we spawn a projectile is specify </span><span class="line" data-startTime="1103">don't intersect with anybody else who's got </span><span class="line" data-startTime="1103">the team red flag. Again, completely hands </span><span class="line" data-startTime="1107">off on our part. We're so super lazy when </span><span class="line" data-startTime="1107">writing this project. Box2D did all the heavy </span><span class="line" data-startTime="1111">lifting for us. The explosion up there is </span><span class="line" data-startTime="1111">actually the same process, again, projectile </span><span class="line" data-startTime="1117">intersected with the wall and we computed </span><span class="line" data-startTime="1117">what those two objects were, and then decided </span><span class="line" data-startTime="1121">that the proper result was to actually spawn </span><span class="line" data-startTime="1121">an instance of an explosion. Again, Box2D </span><span class="line" data-startTime="1126">is awesome. Use it. Now, one of the issues </span><span class="line" data-startTime="1126">that we ran into while having Box2D as well </span><span class="line" data-startTime="1132">as clientside prediction is prediction adjustment, </span><span class="line" data-startTime="1132">so what happens is, as the client says I would </span><span class="line" data-startTime="1139">like to move forward, the client can go off </span><span class="line" data-startTime="1139">and move forward, well, the problem is positioning </span><span class="line" data-startTime="1144">is actually driven by Box2D, which means that </span><span class="line" data-startTime="1144">the server can actually disagree with where </span><span class="line" data-startTime="1148">you're supposed to be at. So the client thinks </span><span class="line" data-startTime="1148">he should be there, while the server says </span><span class="line" data-startTime="1152">actually you should be along this spector </span><span class="line" data-startTime="1152">over here for some whatever reason; they're </span><span class="line" data-startTime="1155">you're running into a wall or a demon is chasing </span><span class="line" data-startTime="1155">you. I don't know why there would be a demon </span><span class="line" data-startTime="1158">chasing a robot, that would be weird, just </span><span class="line" data-startTime="1158">go with it. So what we do is something called </span><span class="line" data-startTime="1163">prediction adjustment where over time we'll </span><span class="line" data-startTime="1163">actually modify the forward vector of our </span><span class="line" data-startTime="1169">moving robots slightly toward what the server </span><span class="line" data-startTime="1169">has told us we should be at, so what happens </span><span class="line" data-startTime="1174">is after a couple of frames, we correct our </span><span class="line" data-startTime="1174">position just enough where the player actually </span><span class="line" data-startTime="1180">doesn't see that they're getting discrepancy </span><span class="line" data-startTime="1180">between the client server. This actually allows </span><span class="line" data-startTime="1185">us to hide a lot of the latency that you would </span><span class="line" data-startTime="1185">normally see from the client and the server </span><span class="line" data-startTime="1189">&mdash; the authoritative server communication </span><span class="line" data-startTime="1189">process. Now, if the client and the server </span><span class="line" data-startTime="1193">position differ by some extremely large value, </span><span class="line" data-startTime="1193">we'll just snap, because at that point, you </span><span class="line" data-startTime="1198">know, it's like, oh, we're fifteen frames </span><span class="line" data-startTime="1198">away, and it would take too long and it doesn't </span><span class="line" data-startTime="1201">look good. So we do have sort of a catch-all </span><span class="line" data-startTime="1201">in case we get too far ahead. Now one of the </span><span class="line" data-startTime="1205">other things . This was &mdash; we actually found </span><span class="line" data-startTime="1205">this like last week, so I'm glad we fixed </span><span class="line" data-startTime="1209">the bug before my talk &mdash; yay &mdash; is our third </span><span class="line" data-startTime="1209">server actually has to drive the client in </span><span class="line" data-startTime="1215">more ways than we were originally predicting. </span></p>

<p><span class="line" data-startTime="1215">So let's say you're running the client here, </span><span class="line" data-startTime="1220">and you choose to fire a missile, I think </span><span class="line" data-startTime="1220">that's the proper pronunciation, and the client </span><span class="line" data-startTime="1226">says, hey, this missile has intersected with </span><span class="line" data-startTime="1226">this object. Well, again, remember the client </span><span class="line" data-startTime="1230">is computing games data parallel, so the client </span><span class="line" data-startTime="1230">actually says, hey, this guy is there. Well, </span><span class="line" data-startTime="1234">the server says, no, he's actually over here. </span> <span class="line" data-startTime="1234">So now we have a mismatch. The client has </span><span class="line" data-startTime="1239">said a collision has occurred, the server </span><span class="line" data-startTime="1239">says no, you're wrong, and so what we do in </span><span class="line" data-startTime="1243">this situation is we actually say, I'm sorry, </span><span class="line" data-startTime="1243">client, we're not listening to you, right, </span><span class="line" data-startTime="1248">because to a player if they saw collision, </span><span class="line" data-startTime="1248">they would expect to see health go down or </span><span class="line" data-startTime="1252">some sort of validation that they're doing </span><span class="line" data-startTime="1252">the right thing in killing their fellow robots, </span><span class="line" data-startTime="1257">but instead what we do is we ignore the collision </span><span class="line" data-startTime="1257">and actually let the bullet pass through. </span> <span class="line" data-startTime="1260">This is really important from a game player </span><span class="line" data-startTime="1260">perspective. There's been a lot of research </span><span class="line" data-startTime="1264">over the past ten years about doing multiplayer </span><span class="line" data-startTime="1264">prediction and adjustment analysis and what </span><span class="line" data-startTime="1269">players actually can perceive as the problem </span><span class="line" data-startTime="1269">versus actually being the problem, and actually, </span><span class="line" data-startTime="1274">saying, hey, we're going to ignore clientside </span><span class="line" data-startTime="1274">prediction is hands down is the perceptive </span><span class="line" data-startTime="1279">correct solution from all the game players. </span> <span class="line" data-startTime="1279">If you're writing games, make sure you do </span><span class="line" data-startTime="1283">it this way. Or not. It's up to you. You can </span><span class="line" data-startTime="1283">write games. You're smart. Let's talk about </span><span class="line" data-startTime="1289">networking. One of the things that we did </span><span class="line" data-startTime="1289">specifically, how many of you have actually </span><span class="line" data-startTime="1296">written like TCP networking code in C++? </span><span class="line" data-startTime="1296">A lot of hands. I'm proud of this room. </span></p>

<p><span class="line" data-startTime="1302">This is an awesome room. We should like fight </span><span class="line" data-startTime="1302">the other rooms and prove how awesome we are. </span> <span class="line" data-startTime="1306">I think we'd win. Anyhow, so in C++ what you </span><span class="line" data-startTime="1306">usually end up with is some sort of structure </span><span class="line" data-startTime="1311">that you define like this, a flag for what </span><span class="line" data-startTime="1311">kind of packet it is, 32 bits for the data, </span><span class="line" data-startTime="1317">again let's say a float, a direction packet, </span><span class="line" data-startTime="1317">and then this would be communicated between </span><span class="line" data-startTime="1321">client server, because sooner or later in </span><span class="line" data-startTime="1321">C++ this is usually in a header file, and </span><span class="line" data-startTime="1324">you would cut a server build versus a &mdash; let's </span><span class="line" data-startTime="1324">say you have a Junior programmer that comes </span><span class="line" data-startTime="1329">in says, I didn't want to listen to you anyway, </span><span class="line" data-startTime="1329">I'm going to push a client build without updating </span><span class="line" data-startTime="1335">the server. Now everything is broken, right, </span><span class="line" data-startTime="1335">we no longer have the same package structure, </span><span class="line" data-startTime="1340">all the data is getting out of line and this </span><span class="line" data-startTime="1340">is a massive problem. GRITS solves this with </span><span class="line" data-startTime="1345">a really unique solution that I felt was super </span><span class="line" data-startTime="1345">important to talk about. What we actually </span><span class="line" data-startTime="1350">define is rather than defining the structures </span><span class="line" data-startTime="1350">themselves that are then copied between client </span><span class="line" data-startTime="1354">server in builds that we cut, we actually </span><span class="line" data-startTime="1354">define a proto structure, so what you're seeing </span><span class="line" data-startTime="1359">right here is the input structure. We say </span><span class="line" data-startTime="1359">who it's actually from and what direction </span><span class="line" data-startTime="1362">you're going, specified as strengths. We're </span><span class="line" data-startTime="1362">sort of proto defining what this class should </span><span class="line" data-startTime="1367">be, or instructor, or whatever it is in JavaScript. </span></p>

<p><span class="line" data-startTime="1367">I'm not a JavaScript guy. What the server </span><span class="line" data-startTime="1373">actually does, is when it instance boots up, </span><span class="line" data-startTime="1373">it actually parses this JavaScript file, reads </span><span class="line" data-startTime="1377">this proto data and actually runs code generation </span><span class="line" data-startTime="1377">on it, so rather than actually generating </span><span class="line" data-startTime="1382">the structures, we actually generate a whole </span><span class="line" data-startTime="1382">suite of functions, an API set that allows </span><span class="line" data-startTime="1387">the client and the server &mdash; well, the server </span><span class="line" data-startTime="1387">specifically to actually use that as an API, </span><span class="line" data-startTime="1392">push data in and the APIs will properly pack </span><span class="line" data-startTime="1392">the bytes in an efficient manner into what </span><span class="line" data-startTime="1398">the structure would be. Now here is where </span><span class="line" data-startTime="1398">the cool part of JavaScript comes into play. </span> <span class="line" data-startTime="1403">We actually pass this code generated set of </span><span class="line" data-startTime="1403">APIs down to the client, and then on the client </span><span class="line" data-startTime="1409">we just call an eval function, so this means </span><span class="line" data-startTime="1409">that our client and server will always be </span><span class="line" data-startTime="1414">in sync when communicating with each other. </span> <span class="line" data-startTime="1414">There is no possible way that they can actually </span><span class="line" data-startTime="1418">get out of sync, because as a client connects </span><span class="line" data-startTime="1418">to its server, it actually receives all of </span><span class="line" data-startTime="1422">the information on how it's supposed to communicate </span><span class="line" data-startTime="1422">through this API packet. </span> <span class="line" data-startTime="1425">This is actually really cool. It's one of </span><span class="line" data-startTime="1425">the few things that I love about JavaScript </span><span class="line" data-startTime="1429">that you can't do in C++ for game development, </span><span class="line" data-startTime="1429">right? Actually say, here, use this. Now, </span><span class="line" data-startTime="1435">once you're writing this code, especially </span><span class="line" data-startTime="1435">with multiplayer games, you end up shooting </span><span class="line" data-startTime="1439">a lot of bullets, sooner or later you're going </span><span class="line" data-startTime="1439">to just sit there and hit buttons, kind of </span><span class="line" data-startTime="1444">like that button master, playing a street </span><span class="line" data-startTime="1444">fighter game. It's like, you're not hitting </span><span class="line" data-startTime="1446">any buttons but you're still beating me, I </span><span class="line" data-startTime="1446">hate you and you're 12. Yay. What we actually </span><span class="line" data-startTime="1450">found was in our original implementation, </span><span class="line" data-startTime="1450">that in a about a second &mdash; in about a second </span><span class="line" data-startTime="1456">of game play with a full 8 player session, </span><span class="line" data-startTime="1456">we'd send about 6.2 megabytes of data, and </span><span class="line" data-startTime="1461">that is position information, directional </span><span class="line" data-startTime="1461">information, index data, you know, what state </span><span class="line" data-startTime="1466">is, rotation, all this other stuff. So we </span><span class="line" data-startTime="1466">needed to address this really quickly, because </span><span class="line" data-startTime="1471">I'm sure again everyone here is at Google </span><span class="line" data-startTime="1471">I/O, your internet developers, you understand </span><span class="line" data-startTime="1476">this graph, is that if I've got 240 millisecond </span><span class="line" data-startTime="1476">window and I've got really fat packets, the </span><span class="line" data-startTime="1482">number of packets, or rather the information </span><span class="line" data-startTime="1482">update from the server that I get is limited, </span><span class="line" data-startTime="1487">so in that 240 milliseconds, I can only get </span><span class="line" data-startTime="1487">so much data from the server to tell me about </span><span class="line" data-startTime="1492">the game state. I can only update my information </span><span class="line" data-startTime="1492">so fast. Instead what you want to do is create </span><span class="line" data-startTime="1496">smaller packets, more concise information, </span><span class="line" data-startTime="1496">so we can receive more of them in that short </span><span class="line" data-startTime="1501">window so we can update the game state quicker, </span><span class="line" data-startTime="1501">because again, since the server is doing the </span><span class="line" data-startTime="1505">entire computation, we need to ensure that </span><span class="line" data-startTime="1505">we receive the updates as fast as possible </span><span class="line" data-startTime="1511">so the client can stay in sync. Now, one of </span><span class="line" data-startTime="1511">the ways we do this &mdash; clicking &mdash; is actually </span><span class="line" data-startTime="1516">using packet grouping. So usually when you </span><span class="line" data-startTime="1516">send a packet down the wire there's multiple </span><span class="line" data-startTime="1520">levels of technology stack, and each level </span><span class="line" data-startTime="1520">that your packet runs into usually adds a </span><span class="line" data-startTime="1525">little bit of overhead, right? So socket IO </span><span class="line" data-startTime="1525">will add some bits to it, the ttp layer will </span><span class="line" data-startTime="1530">add some bits to it, maybe the operating system </span><span class="line" data-startTime="1530">will add some bits to it. Well, what happens </span><span class="line" data-startTime="1534">is you actually end up with a lot of data </span><span class="line" data-startTime="1534">that you don't need, right? And for these </span><span class="line" data-startTime="1538">individual packets, this actually adds up </span><span class="line" data-startTime="1538">to a bit, a significant amount. So what we </span><span class="line" data-startTime="1542">do is we actually have a heuristic set that </span><span class="line" data-startTime="1542">defines the ability to group all of our packets </span><span class="line" data-startTime="1548">based upon memory size. So what we say, is, </span><span class="line" data-startTime="1548">hey, we're going to cue up our packets until, </span><span class="line" data-startTime="1553">you know, a time limit has elapsed, so if </span><span class="line" data-startTime="1553">we only get one packet, and let's say a second </span><span class="line" data-startTime="1557">has elapsed, we just go ahead and send that </span><span class="line" data-startTime="1557">on. Or we'll cue up all of our packets until </span><span class="line" data-startTime="1561">it reaches like a megabyte, and then we'll </span><span class="line" data-startTime="1561">send that down the line. What this does, it </span><span class="line" data-startTime="1565">actually reduces all of the additional overhead </span><span class="line" data-startTime="1565">that's added by each of these layers. This </span><span class="line" data-startTime="1570">is really a critical thing for us because </span><span class="line" data-startTime="1570">we send a lot of data. </span></p>

<p><span class="line" data-startTime="1574">One of the other things we do, or another </span><span class="line" data-startTime="1574">set of things we do, is actually duplicate </span><span class="line" data-startTime="1579">packet reduction, so we do this in two ways: </span><span class="line" data-startTime="1579">The first is that we understand that the people </span><span class="line" data-startTime="1587">writing the game are not thinking about the </span><span class="line" data-startTime="1587">networking layer as they're writing the game, </span><span class="line" data-startTime="1591">right? </span><span class="line" data-startTime="1591">So as we're going through update loop, as </span><span class="line" data-startTime="1593">all the items are updating themselves, sooner </span><span class="line" data-startTime="1593">or later you're going to have someone come </span><span class="line" data-startTime="1596">along and assign a variable to A, and then </span><span class="line" data-startTime="1596">20 loops later it's going to assign it to </span><span class="line" data-startTime="1600">C, and then some time is going to go by and </span><span class="line" data-startTime="1600">then you're going to assign it to B. What </span><span class="line" data-startTime="1603">we do in this situation is we actually track </span><span class="line" data-startTime="1603">these state data and updates over time, and </span><span class="line" data-startTime="1607">we only send the latest update, so what will </span><span class="line" data-startTime="1607">happen is we'll say, hey, if the variable </span><span class="line" data-startTime="1612">has already been set and we're setting it </span><span class="line" data-startTime="1612">to something different, forget the other state, </span><span class="line" data-startTime="1615">don't put it in our packet grouping. Right? </span><span class="line" data-startTime="1615">This keeps the client from doing redundant </span><span class="line" data-startTime="1619">state updates, in otherwise C, A and then </span><span class="line" data-startTime="1619">finally B, which it doesn't need to do. Another </span><span class="line" data-startTime="1625">thing we do with our staple tracking is we </span><span class="line" data-startTime="1625">actually analyze whether or not the state </span><span class="line" data-startTime="1630">that we're about to update a packet for is </span><span class="line" data-startTime="1630">identical to the state that already exists, </span><span class="line" data-startTime="1635">so if a line of code comes along and says </span><span class="line" data-startTime="1635">let's set the position to A, and the position </span><span class="line" data-startTime="1639">is already A, then the server won't actually </span><span class="line" data-startTime="1639">update that data, won't send it to the client </span><span class="line" data-startTime="1644">at all. Now, with the packet grouping, as </span><span class="line" data-startTime="1644">well as the duplicate packet deduping &mdash; Dr. </span></p>

<p><span class="line" data-startTime="1650">Seuss rhyme. I should write a book. We actually </span><span class="line" data-startTime="1650">modify our situation quite significantly. </span> <span class="line" data-startTime="1656">We end up going from about 6.2 megabytes per </span><span class="line" data-startTime="1656">second to about 1.3, which is a lot better </span><span class="line" data-startTime="1661">in our situation. So these are like three </span><span class="line" data-startTime="1661">super easy things that had really nothing </span><span class="line" data-startTime="1666">to do with the technology but had a lot to </span><span class="line" data-startTime="1666">do with our analysis of how our game was molesting </span><span class="line" data-startTime="1672">the networking stack and sending packets around. </span> <span class="line" data-startTime="1672">So let's talk about rendering. HTML5 is awesome. </span> <span class="line" data-startTime="1680">I always thought this was a great quote that </span><span class="line" data-startTime="1680">no one really laughs at, but "world domination </span><span class="line" data-startTime="1683">often starts as a misunderstood napkin doodle." </span><span class="line" data-startTime="1683">Like I don't know if you guys walk into a </span><span class="line" data-startTime="1687">bar and see some weird doodle that looks like </span><span class="line" data-startTime="1687">a dinosaur attacking Manhattan; I've got an </span><span class="line" data-startTime="1692">idea. At least in my mind, that's how it works. </span> <span class="line" data-startTime="1692">So again, let's go back to our mockup screen </span><span class="line" data-startTime="1699">here, again you've got a bunch of things, </span><span class="line" data-startTime="1699">you've got a bunch of pretty pixels that are </span><span class="line" data-startTime="1702">being displayed. In reality this is broken </span><span class="line" data-startTime="1702">down is that this is actually our background </span><span class="line" data-startTime="1706">layer. Our background layer is a bunch of </span><span class="line" data-startTime="1706">64 by 64 pixel sprites that an artist has </span><span class="line" data-startTime="1711">placed together on a large sheet. And we actually </span><span class="line" data-startTime="1711">render that data. On top of that, we actually </span><span class="line" data-startTime="1715">render our player Avatars which are animated </span><span class="line" data-startTime="1715">sprite sheets, and then all of our projectiles </span><span class="line" data-startTime="1720">and explosions are also animated sprite sheets </span><span class="line" data-startTime="1720">that are blended using a different composite </span><span class="line" data-startTime="1724">layer. In order to do this, and stay performance, </span><span class="line" data-startTime="1724">we actually heavily use the concept of atlasing. </span></p>

<p><span class="line" data-startTime="1732">Now, in the games industry we call it atlasing. </span> <span class="line" data-startTime="1732">I know in the HTML5 world or Web development </span><span class="line" data-startTime="1736">you call this sprite sheets, right? Nods. </span> <span class="line" data-startTime="1736">I don't see a nod. Everyone asleep already? </span><span class="line" data-startTime="1741">Cool. That dude game me a thumb's up. Get </span><span class="line" data-startTime="1741">him a T-shirt too. Thumb's up for T-Shirt. </span> <span class="line" data-startTime="1747">Anyhow, we actually atlas everything. In fact, </span><span class="line" data-startTime="1747">you're seeing, and what you're looking at </span><span class="line" data-startTime="1751">here are the only three atlases we actually </span><span class="line" data-startTime="1751">use in the game. That's it. Everything, every </span><span class="line" data-startTime="1755">piece of art, all of our menu data, all of </span><span class="line" data-startTime="1755">our in-game sprites are packed into these </span><span class="line" data-startTime="1758">three textures, and here's why. With one Atlas </span><span class="line" data-startTime="1758">request, let's say that you have got a 4k-by-4k </span><span class="line" data-startTime="1765">texture, about 100k of information total, </span><span class="line" data-startTime="1765">your total transfer time as measured by the </span><span class="line" data-startTime="1771">Chrome developer tools is about 240 milliseconds, </span><span class="line" data-startTime="1771">so this is nice, right? We have got a 4k-by-4k </span><span class="line" data-startTime="1776">texture, it comes down the line pretty quickly, </span><span class="line" data-startTime="1776">really fast, get it into the canvas render, </span><span class="line" data-startTime="1782">and we are doing good. </span></p>

<p><span class="line" data-startTime="1782">Now, if you were to say chop that 4k-by-4k </span><span class="line" data-startTime="1786">texture up into say 4096 individual requests, </span><span class="line" data-startTime="1786">each one is about 10k each at about 64 pixels </span><span class="line" data-startTime="1794">by 64 pixels, what you end up with is about </span><span class="line" data-startTime="1794">4.3 seconds of total load time. And the reason </span><span class="line" data-startTime="1801">for this is kind of two to threefold. Firstly </span><span class="line" data-startTime="1801">is that any given client connection to a server </span><span class="line" data-startTime="1807">can have &mdash; only have so many open connections, </span><span class="line" data-startTime="1807">so if you have got 4,000 connections sitting </span><span class="line" data-startTime="1811">around waiting to happen and your browser </span><span class="line" data-startTime="1811">has only allowed six at a time, basically </span><span class="line" data-startTime="1815">everything gets stacked. What you are looking </span><span class="line" data-startTime="1815">at in the Chrome tools here is that transparent </span><span class="line" data-startTime="1819">line, the long bar there, is actually Chrome </span><span class="line" data-startTime="1819">being blocked by the server saying "I'm sorry </span><span class="line" data-startTime="1824">you can't get this file yet because we're </span><span class="line" data-startTime="1824">still waiting on something else to complete." </span><span class="line" data-startTime="1828">So with all of these loose assets being requested, </span><span class="line" data-startTime="1828">you slow down your load time significantly. </span> <span class="line" data-startTime="1834">Now, you will also notice at the end of the </span><span class="line" data-startTime="1834">line is the little opaque circle. That opaque </span><span class="line" data-startTime="1838">circle actually represents the time once we've </span><span class="line" data-startTime="1838">actually received the file to decompress it, </span><span class="line" data-startTime="1843">get it on the screen, do all of the other </span><span class="line" data-startTime="1843">stuff, which is really fast process. We lose </span><span class="line" data-startTime="1846">almost, you know, we lose four seconds just </span><span class="line" data-startTime="1846">in waiting around for Chrome to do more connections. </span> <span class="line" data-startTime="1851">So in reality using Atlases saves your load </span><span class="line" data-startTime="1851">time significantly, which again a lot of Web </span><span class="line" data-startTime="1855">developers are starting to notice this, so </span><span class="line" data-startTime="1855">stop using the leaf assets, stop doing it, </span><span class="line" data-startTime="1859">or the robots will get you. </span></p>

<p><span class="line" data-startTime="1859">Now when our artists made our original map, </span><span class="line" data-startTime="1865">they actually came to us with a small set. </span> <span class="line" data-startTime="1865">They said, "Hey, we are going to use these </span><span class="line" data-startTime="1868">64-by-64 tiles, and we're going to draw them </span><span class="line" data-startTime="1868">everywhere." </span><span class="line" data-startTime="1870">We said, "That's fine." </span><span class="line" data-startTime="1870">When you look at the screen, you should really </span><span class="line" data-startTime="1873">look at it like this. Which is sort of how </span><span class="line" data-startTime="1873">the rendering engine looks at it, a bunch </span><span class="line" data-startTime="1876">of little tiles that are rendered on the canvas. </span> <span class="line" data-startTime="1876">Well, the issue we ran into was that each </span><span class="line" data-startTime="1880">one of those was actually a separate draw </span><span class="line" data-startTime="1880">call. And for each draw call you have sort </span><span class="line" data-startTime="1884">of an implicit API overhead that's involved </span><span class="line" data-startTime="1884">in the draw call. Now you'll see that there's </span><span class="line" data-startTime="1889">actually some nice blends here, we've got </span><span class="line" data-startTime="1889">a green background, we've got some of the </span><span class="line" data-startTime="1893">tiles, we've got some more of the little hexagons </span><span class="line" data-startTime="1893">that are blending on top of it, and then we've </span><span class="line" data-startTime="1896">got a dent in the universe, and then a little </span><span class="line" data-startTime="1896">thing there. That's like five to seven draws </span><span class="line" data-startTime="1902">per quadrant there. Now, this adds up over </span><span class="line" data-startTime="1902">time because artists want to make really pretty </span><span class="line" data-startTime="1906">art. That's usually accomplished by compositing </span><span class="line" data-startTime="1906">layers of art on top of itself to create this </span><span class="line" data-startTime="1911">really rich environment. Well, again, this </span><span class="line" data-startTime="1911">doesn't work for us, right? If you've got </span><span class="line" data-startTime="1914">a high-res monitor, and a lot of screen space, </span><span class="line" data-startTime="1914">this is going to be a lot of draws and a lot </span><span class="line" data-startTime="1919">of machines can't handle this. So what we </span><span class="line" data-startTime="1919">did to counteract this is actually used the </span><span class="line" data-startTime="1922">concept of off DOM canvas, where rather than </span><span class="line" data-startTime="1922">rendering each of these small tiles at run </span><span class="line" data-startTime="1927">time, we created a canvas object that's not </span><span class="line" data-startTime="1927">attached to the DOM and actually render each </span><span class="line" data-startTime="1931">of these tiles into that canvas, and then </span><span class="line" data-startTime="1931">later on we can simply do one draw call, offsetting </span><span class="line" data-startTime="1937">that large canvas wherever our ViewPort happens </span><span class="line" data-startTime="1937">to be. This actually was a huge savings for </span><span class="line" data-startTime="1942">us. </span></p>

<p><span class="line" data-startTime="1942">On some of our Linux machines this actually </span><span class="line" data-startTime="1945">took our frame rate from two frames a second </span><span class="line" data-startTime="1945">back up to 60. Just this one change. It was </span><span class="line" data-startTime="1950">about 10 minutes of code to get us that frame </span><span class="line" data-startTime="1950">rate back, which was fantastic. </span> <span class="line" data-startTime="1954">Of course, then the artist came back, said, </span><span class="line" data-startTime="1954">"Oh, by the way I've got a bigger map for </span><span class="line" data-startTime="1957">you," and then we ran into a different problem. </span> <span class="line" data-startTime="1957">[Laughter] </span><span class="line" data-startTime="1961">Which was now that we had a 24k by 24k pixel </span><span class="line" data-startTime="1961">map. [Laughter]. And we were doing one draw </span><span class="line" data-startTime="1967">call every frame for this massive pile of </span><span class="line" data-startTime="1967">pixels. And that put us back at two frames </span><span class="line" data-startTime="1974">a second. So all of my work was for naught. </span> <span class="line" data-startTime="1974">To counteract this, we had to do something </span><span class="line" data-startTime="1979">different. So let's say we have got our little </span><span class="line" data-startTime="1979">ViewPort there in pink because hot pink is </span><span class="line" data-startTime="1982">the cool thing to do on the internet. Cool </span><span class="line" data-startTime="1982">thing to do on the internet. [Laughter]. Cool </span><span class="line" data-startTime="1988">thing to do on the internet. Cool thing to </span><span class="line" data-startTime="1988">do &mdash; oh, man [Laughter]. </span></p>

<p class="speaker"><span class="line" data-starttime="1991"><span class="speakerName">Colt McAnlis</span>: Sorry, when you find a toy, </span><span class="line" data-startTime="1991">you've just got to play with it. </span> <span class="line" data-startTime="1995">Anyhow, what I actually do is I actually create </span><span class="line" data-startTime="1995">&mdash; in order to combat the fact that this one </span><span class="line" data-startTime="2000">draw call actually puts too many pixels on </span><span class="line" data-startTime="2000">the screen, because the canvas actually just </span><span class="line" data-startTime="2004">does a dumb draw. Right? It doesn't say this </span><span class="line" data-startTime="2004">pixel of this subtexture is or is not in your </span><span class="line" data-startTime="2009">ViewPort. It just blips the whole thing to </span><span class="line" data-startTime="2009">the screen, and lets the GPU figure out the </span><span class="line" data-startTime="2012">&mdash; for hardware accelerated &mdash; let's the GPU </span><span class="line" data-startTime="2012">figure out the details there. So what I actually </span><span class="line" data-startTime="2017">do to combat this, is we actually chunked </span><span class="line" data-startTime="2017">up our environment. So when you are actually </span><span class="line" data-startTime="2020">playing in the large maps in GRITS, we actually </span><span class="line" data-startTime="2020">chunk it up into 1024-by-1024 tiles, this </span><span class="line" data-startTime="2026">heuristic of 1024 versus 24 or 28 or anything </span><span class="line" data-startTime="2026">else, was actually sort of just done by trial </span><span class="line" data-startTime="2031">and error. We effectively said this looks </span><span class="line" data-startTime="2031">good on this Linux box, this Linux box is </span><span class="line" data-startTime="2035">not powered. So what this allows us to do </span><span class="line" data-startTime="2035">is we were doing one draw call for the little </span><span class="line" data-startTime="2040">pink box. We actually do two draw calls now, </span><span class="line" data-startTime="2040">but it's significantly less pixels that the </span><span class="line" data-startTime="2047">disband process has to actually deal with </span><span class="line" data-startTime="2047">or more importantly that the GPU has to deal </span><span class="line" data-startTime="2050">with, with rendering, clipping, figuring everything </span><span class="line" data-startTime="2050">else out. Now, let's talk about the tools. </span></p>

<p><span class="line" data-startTime="2058">So when you are writing games &mdash; actually </span><span class="line" data-startTime="2058">taking a step back, let's take a step back. </span> <span class="line" data-startTime="2064">So as a traditional game developer, I was </span><span class="line" data-startTime="2064">a game developer for about 10 years in the </span><span class="line" data-startTime="2068">industry, worked a lot of really cool places </span><span class="line" data-startTime="2068">doing really cool things. One of the most </span><span class="line" data-startTime="2071">important things that I worked on consistently </span><span class="line" data-startTime="2071">was creating really good tools that allowed </span><span class="line" data-startTime="2076">designers and artists to create amazing content </span><span class="line" data-startTime="2076">that really caused people to buy our games. </span> <span class="line" data-startTime="2081">Now, in my opinion, one of the biggest drawbacks </span><span class="line" data-startTime="2081">to HTML5 as a viable gaming technology is </span><span class="line" data-startTime="2087">the lack of good tools to allow content creators </span><span class="line" data-startTime="2087">to create great content. Now I'm not talking </span><span class="line" data-startTime="2093">about the language here. I'm talking about </span><span class="line" data-startTime="2093">the ability to create content in a way that </span><span class="line" data-startTime="2097">content creators can reflect with. </span> <span class="line" data-startTime="2097">So what we did with GRITS was we didn't try </span><span class="line" data-startTime="2102">to reinvent the wheel. Rather than trying </span><span class="line" data-startTime="2102">to create HTML5 specific tools, we went back </span><span class="line" data-startTime="2107">to the basics and used tools from standard </span><span class="line" data-startTime="2107">C++ game development and just made sure that </span><span class="line" data-startTime="2111">the data was read in by HTML5 properly. It </span><span class="line" data-startTime="2111">started with a great tool called Tiled. Tiled </span><span class="line" data-startTime="2118">is a free open sourceish map editor on the </span><span class="line" data-startTime="2118">internet, and using QT as a primary UI engine, </span><span class="line" data-startTime="2124">so that means that it runs across platform. </span> <span class="line" data-startTime="2124">Now Tiled does some really cool stuff. What </span><span class="line" data-startTime="2130">you are looking at here is actually our Atlas </span><span class="line" data-startTime="2130">of our map sprites and then of course our </span><span class="line" data-startTime="2134">map next to it, you can actually go in and </span><span class="line" data-startTime="2134">fill in your sprites, use cool brushes, and </span><span class="line" data-startTime="2139">use a blend effect and, you know, fill things </span><span class="line" data-startTime="2139">together. </span></p>

<p><span class="line" data-startTime="2142">Tiled also allows us to create collision objects </span><span class="line" data-startTime="2142">or just objects in general, then we can flag </span><span class="line" data-startTime="2147">them with collision values. So what you are </span><span class="line" data-startTime="2147">actually looking here is a the polygon tool </span><span class="line" data-startTime="2151">actually specifying out that, hey, this is </span><span class="line" data-startTime="2151">some object in the environment. You can see </span><span class="line" data-startTime="2156">on the side of the map over there, this is </span><span class="line" data-startTime="2156">actually the collision layer. Right? So when </span><span class="line" data-startTime="2160">the game reads it in, it says anything in </span><span class="line" data-startTime="2160">the collision layer we make an actual physics </span><span class="line" data-startTime="2164">object that you can't shoot through or run </span><span class="line" data-startTime="2164">through or teleport on top of or use the rune </span><span class="line" data-startTime="2168">of Antioch to destroy it. Really critical. </span> <span class="line" data-startTime="2168">This comes crucial into play when we do things </span><span class="line" data-startTime="2178">like teleporters or quad damage or picking </span><span class="line" data-startTime="2178">up energy capsules, because what it allows </span><span class="line" data-startTime="2183">us to do is put a little box on the map and </span><span class="line" data-startTime="2183">say, "Hey, this is a spawn item, this is a </span><span class="line" data-startTime="2188">help box," right? So we can actually specify </span><span class="line" data-startTime="2188">all of that stuff inside of tiles, we don't </span><span class="line" data-startTime="2192">have to write custom code for this. </span></p>

<p><span class="line" data-startTime="2192">In fact, the designer and the artist can use </span><span class="line" data-startTime="2195">this tool exclusively, then it just spits </span><span class="line" data-startTime="2195">out a nice JSON file, which Tiled does, by </span><span class="line" data-startTime="2201">the way, that we read into our game. And the </span><span class="line" data-startTime="2201">client and the server both read this information </span><span class="line" data-startTime="2205">so we know where collision objects are, we </span><span class="line" data-startTime="2205">know where teleporters are and more importantly </span><span class="line" data-startTime="2209">we know where quad damage is, because if you </span><span class="line" data-startTime="2209">don't have quad damage you are losing the </span><span class="line" data-startTime="2212">game, pro tip tweet that. Pro tip. </span> <span class="line" data-startTime="2212">The next tool we actually use is a great tool </span><span class="line" data-startTime="2220">called Texture Packer. Texture Packer is probably </span><span class="line" data-startTime="2220">one of &mdash; one of the most advanced tools that </span><span class="line" data-startTime="2226">I have seen for actually taking a whole bunch </span><span class="line" data-startTime="2226">of small textures and then packing them into </span><span class="line" data-startTime="2230">a big Atlas and then passing that data off </span><span class="line" data-startTime="2230">to you. </span></p>

<p><span class="line" data-startTime="2232">Now what you are looking at on the screen </span><span class="line" data-startTime="2232">here is all of our assets are actually listed </span><span class="line" data-startTime="2235">on the side over there. So the artist literally </span><span class="line" data-startTime="2235">grabbed them all and dragged them in the tool. </span> <span class="line" data-startTime="2238">What you see in the middle window is the result </span><span class="line" data-startTime="2238">of Texture Packer putting it all in. </span> <span class="line" data-startTime="2241">Now one of the real cool things that texture </span><span class="line" data-startTime="2241">packer does, is it will actually analyze the </span><span class="line" data-startTime="2246">true boundaries of an image. Let's say that </span><span class="line" data-startTime="2246">you make a 64-by-64 texture, put like a 5-by-5 </span><span class="line" data-startTime="2252">little sprite right in the middle of it. Texture </span><span class="line" data-startTime="2252">Packer will actually analyze that image and </span><span class="line" data-startTime="2256">realize that the true content bounds are actually </span><span class="line" data-startTime="2256">5-by-5 and it will actually crop it and only </span><span class="line" data-startTime="2262">put the 5-by-5 image in the map. Then it will </span><span class="line" data-startTime="2262">spit out a JSON file with the original bounding </span><span class="line" data-startTime="2267">values. So by using Texture Packer, you are </span><span class="line" data-startTime="2267">actually optimizing the number of pixels used </span><span class="line" data-startTime="2272">by your artists. Sometimes artists don't make </span><span class="line" data-startTime="2272">the best optimized art work. </span></p>

<p><span class="line" data-startTime="2277">[Laughter]. </span></p>

<p class="speaker"><span class="line" data-starttime="2277"><span class="speakerName">Colton McAnlis</span>: Maybe. This is also really </span><span class="line" data-startTime="2281">cool, too, actually we had to break up our </span><span class="line" data-startTime="2281">end game assets versus our start menu assets. </span> <span class="line" data-startTime="2287">That's why we actually have three Atlases, </span><span class="line" data-startTime="2287">right? This is actually all of our menu data. </span> <span class="line" data-startTime="2291">It's in a separate Atlas so that we can load </span><span class="line" data-startTime="2291">it to do all of our rendering in HTML or in </span><span class="line" data-startTime="2296">the DOM, so all of our menu stuff is done </span><span class="line" data-startTime="2296">in the DOM, all of the game play is done on </span><span class="line" data-startTime="2299">the canvas. So we can actually load this Atlas </span><span class="line" data-startTime="2299">ahead of time. Use CSS, use sprites, transition, </span><span class="line" data-startTime="2305">I think you guys saw impress.js, moving the </span><span class="line" data-startTime="2305">menus around in there. And that's all loaded </span><span class="line" data-startTime="2309">before you get into the game. So once we get </span><span class="line" data-startTime="2309">in the game, we can load the other two Atlases. </span> <span class="line" data-startTime="2313">So we reduce load time. Reduce pixel latency. </span> <span class="line" data-startTime="2313">And really it's all given to us by these two </span><span class="line" data-startTime="2318">simple tools. </span> <span class="line" data-startTime="2318">So &mdash; so the lessons, let's talk about what </span><span class="line" data-startTime="2324">we actually learned in this process. </span> <span class="line" data-startTime="2324">So first off, can you do player versus player </span><span class="line" data-startTime="2330">in HTML5? </span><span class="line" data-startTime="2330">Absolutely. Someone say mission accomplished. </span></p>

<p><span class="line" data-startTime="2333">I would plant a flag or hang a banner or something </span><span class="line" data-startTime="2333">like that, but they wouldn't let me put pyrotechnics </span><span class="line" data-startTime="2337">on the stage. I did ask, after they turned </span><span class="line" data-startTime="2337">down the skydiving thing, I was like well </span><span class="line" data-startTime="2341">what about pyrotechnics. It was like stop </span><span class="line" data-startTime="2341">talking. I was like, okay. </span> <span class="line" data-startTime="2344">Anyhow, you can actually do player versus </span><span class="line" data-startTime="2344">player in HTML5, it's a fantastic ability. </span> <span class="line" data-startTime="2348">We've got canvas rendering, we've got hardware </span><span class="line" data-startTime="2348">accelerated rendering, we've got WebSockets, </span><span class="line" data-startTime="2352">we have the ability to manipulate the bytes </span><span class="line" data-startTime="2352">that are sent over the line, which is probably </span><span class="line" data-startTime="2356">the most crucial thing in bandwidth reduction, </span><span class="line" data-startTime="2356">in latency optimization. Really it's there, </span><span class="line" data-startTime="2360">we can do it. From a game developer perspective, </span><span class="line" data-startTime="2360">the HTML5 APIs were not built for games. HTML5 </span><span class="line" data-startTime="2369">was built for a Web to transfer data and do </span><span class="line" data-startTime="2369">rich content, but they weren't built for games. </span> <span class="line" data-startTime="2373">The good news is that they're starting to </span><span class="line" data-startTime="2373">change. As you probably already have seen, </span><span class="line" data-startTime="2378">Chrome has been very proactive in adding APIs </span><span class="line" data-startTime="2378">for game development. We've added full-screen </span><span class="line" data-startTime="2383">support. Mouse lock support. We've added game </span><span class="line" data-startTime="2383">pad support, which usually when you say why </span><span class="line" data-startTime="2390">is Chrome putting in a game pad, am I going </span><span class="line" data-startTime="2390">to use a controller to navigate my FaceBook </span><span class="line" data-startTime="2394">page? </span><span class="line" data-startTime="2394">No, this is because we are putting in games. </span></p>

<p><span class="line" data-startTime="2396">We are being very proactive about understanding </span><span class="line" data-startTime="2396">the games more than any other technology pushed </span><span class="line" data-startTime="2401">the boundaries, pushed the envelope, and trying </span><span class="line" data-startTime="2401">to be a &mdash; a modern browser, Chrome is very </span><span class="line" data-startTime="2406">aggressive about this. </span> <span class="line" data-startTime="2406">For a player versus player game, bandwidth </span><span class="line" data-startTime="2411">reduction is crucial. In fact it's the only </span><span class="line" data-startTime="2411">thing that you really need to worry about </span><span class="line" data-startTime="2415">the world. Hiding the latency from the user, </span><span class="line" data-startTime="2415">reducing the number of bits on the line, this </span><span class="line" data-startTime="2419">is a full-time job. Again, we only had 120 </span><span class="line" data-startTime="2419">days. We had some really great results out </span><span class="line" data-startTime="2424">of that, you should probably spend a lot more </span><span class="line" data-startTime="2424">time optimizing that system if you are putting </span><span class="line" data-startTime="2428">out a commercial product that you're going </span><span class="line" data-startTime="2428">to use. </span> <span class="line" data-startTime="2432">Also, this sort of piggyback in it is that </span><span class="line" data-startTime="2432">the client side prediction algorithm, and </span><span class="line" data-startTime="2437">I encourage you to go Google this, there's </span><span class="line" data-startTime="2437">tons of papers out there by tons of first </span><span class="line" data-startTime="2442">person shooters and MMO RPGs and any of the </span><span class="line" data-startTime="2442">game developer conferences out there saying </span><span class="line" data-startTime="2447">"Hey, we solved it this way". I highly recommend </span><span class="line" data-startTime="2447">that you take a look at the GRITS source code, </span><span class="line" data-startTime="2451">see what we are doing, compare that against </span><span class="line" data-startTime="2451">what the industry is doing and figure out </span><span class="line" data-startTime="2455">a proper technique to use for your game, right? </span><span class="line" data-startTime="2455">What we provide should be considered a boilerplate </span><span class="line" data-startTime="2459">and starting base, then you need to move into </span><span class="line" data-startTime="2459">more advanced versions after that. WebSockets </span><span class="line" data-startTime="2464">work really well. In fact I would say probably </span><span class="line" data-startTime="2464">we had no problems with WebSockets once we </span><span class="line" data-startTime="2468">moved to socket I/O. We used it, sent packets, </span><span class="line" data-startTime="2468">received packets, it was fantastic and easy </span><span class="line" data-startTime="2475">to use. </span></p>

<p><span class="line" data-startTime="2475">As I said before, canvas, we did all of our </span><span class="line" data-startTime="2478">rendering in canvas. A hardware accelerated </span><span class="line" data-startTime="2478">canvas in Chrome is really fast and powerful. </span> <span class="line" data-startTime="2484">We didn't want to write a full WebGL version, </span><span class="line" data-startTime="2484">we didn't have time to worry about atlasing, </span><span class="line" data-startTime="2489">or UV sets, and whether or not we were rendering </span><span class="line" data-startTime="2489">middle of polygon, versus edge of polygon, </span><span class="line" data-startTime="2494">and what's the GPU doing and out of process </span><span class="line" data-startTime="2494">&mdash; no. Hardware accelerated canvas shielded </span><span class="line" data-startTime="2498">us from all of that information and gives </span><span class="line" data-startTime="2498">us the same performance, which is great. If </span><span class="line" data-startTime="2501">you are writing a 2D game in Chrome, consider </span><span class="line" data-startTime="2501">canvas first, and then if you run into performance </span><span class="line" data-startTime="2507">problems, optimize it until you absolutely </span><span class="line" data-startTime="2507">have to go over to GL for it. </span> <span class="line" data-startTime="2510">Now if you are doing 3D, you can't do canvas </span><span class="line" data-startTime="2510">in 3 d easily. Definitely take advantage of </span><span class="line" data-startTime="2516">off DOM canvas to accelerate any large bitmap </span><span class="line" data-startTime="2516">stuff, right? If you have a lot of static </span><span class="line" data-startTime="2520">data being rendered per frame, make sure that </span><span class="line" data-startTime="2520">you do that, but definitely make sure that </span><span class="line" data-startTime="2523">you segment it because the artist will keep </span><span class="line" data-startTime="2523">generating content that's going to make it </span><span class="line" data-startTime="2526">harder and harder for your frame rate to be </span><span class="line" data-startTime="2526">what you need it at. Again, use atlasing, </span><span class="line" data-startTime="2531">right? Going from 270 milliseconds for the </span><span class="line" data-startTime="2531">load time to 4.6 seconds is crazy. Right? </span><span class="line" data-startTime="2537">Especially if you are doing this stuff on </span><span class="line" data-startTime="2537">mobile, right? We are usually on mobile, if </span><span class="line" data-startTime="2541">my site takes more than a second to load, </span><span class="line" data-startTime="2541">I have already thrown the phone across the </span><span class="line" data-startTime="2544">room and started drinking heavily. </span></p>

<p><span class="line" data-startTime="2544">[Laughter] </span></p>

<p class="speaker"><span class="line" data-starttime="2546"><span class="speakerName">Colton McAnlis</span>: That's my Saturday night. </span> <span class="line" data-startTime="2546">Doesn't have to be your Saturday night. Utilizing </span><span class="line" data-startTime="2552">the HTML5, utilizing the DOM to do all of </span><span class="line" data-startTime="2552">our UI was a huge win. Coming from traditional </span><span class="line" data-startTime="2557">game development, we have a ton of packages </span><span class="line" data-startTime="2557">and middle ware out there that we spend a </span><span class="line" data-startTime="2560">lot of time trying to bend C++ into the will </span><span class="line" data-startTime="2560">of our UI system. The fact that HTML5 comes </span><span class="line" data-startTime="2567">with the DOM, the most advanced sophisticated </span><span class="line" data-startTime="2567">UI system in the world, Galaxy, I'm going </span><span class="line" data-startTime="2572">to say Galaxy because I think that it's that </span><span class="line" data-startTime="2572">cool. That was a huge win. To ignore that </span><span class="line" data-startTime="2576">or try to reproduce all of that stuff inside </span><span class="line" data-startTime="2576">of canvas, don't even try it, it's not even </span><span class="line" data-startTime="2581">worth it. So the game is live right now. Actually </span><span class="line" data-startTime="2581">been live for two weeks. Game's live. Gritsgame.appspot.com. </span></p>

<p><span class="line" data-startTime="2588">You can go play right now, hopefully the servers </span><span class="line" data-startTime="2588">are up, maybe they're not, I don't know, we'll </span><span class="line" data-startTime="2593">find out soon. The code is live. Code.google.com/p/GRITSgame. </span> <span class="line" data-startTime="2593">Go get the code. Start hacking on it. Please. </span> <span class="line" data-startTime="2602">We would love to hear what you're breaking </span><span class="line" data-startTime="2602">and how you're breaking it. </span> <span class="line" data-startTime="2605">We had a great question a couple weeks ago </span><span class="line" data-startTime="2605">from an internal Googler who said, "Hey, do </span><span class="line" data-startTime="2610">you mind if we write an AI system that cheats?" </span><span class="line" data-startTime="2610">I said, "Please do and then send me the patch." </span><span class="line" data-startTime="2618">More importantly, go to the Chrome Sandbox. </span> <span class="line" data-startTime="2618">Check out a game called Strike Fortress. What </span><span class="line" data-startTime="2625">I have done with GRITS, what our team has </span><span class="line" data-startTime="2625">done is a small subset of what you can do </span><span class="line" data-startTime="2629">in 120 days. EA, electronic arts, has had </span><span class="line" data-startTime="2629">a team working on a pure 3D HTML5 game, working </span><span class="line" data-startTime="2637">on it for a lot longer than we have, in the </span><span class="line" data-startTime="2637">Chrome Sandbox live right now that you can </span><span class="line" data-startTime="2642">play. The coolest part is you can actually </span><span class="line" data-startTime="2642">go up and scan the QR code, start influencing </span><span class="line" data-startTime="2647">the game with your phone. So while two people </span><span class="line" data-startTime="2647">are standing there actually playing, we are </span><span class="line" data-startTime="2652">utilizing the full power of the Web by letting </span><span class="line" data-startTime="2652">other developers actually drop bombs on people </span><span class="line" data-startTime="2657">on the phone. </span></p>

<p><span class="line" data-startTime="2657">It's a fantastic product. The guys have been </span><span class="line" data-startTime="2661">doing an amazing job. Please, leave the session, </span><span class="line" data-startTime="2661">walk right over there and play it and tell </span><span class="line" data-startTime="2665">them that I sent you because I get a T-shirt </span><span class="line" data-startTime="2665">every time you do. I run out of clothes really </span><span class="line" data-startTime="2670">fast. It's happens. </span> <span class="line" data-startTime="2670">So with that, hey, thank you all so much for </span><span class="line" data-startTime="2674">attending this talk. I'm excited to see what </span><span class="line" data-startTime="2674">HTML5 is doing with gaming. I'm excited to </span><span class="line" data-startTime="2678">see the room this packed. We've got people </span><span class="line" data-startTime="2678">sitting on the floor. Hi, I see you. T-shirt </span><span class="line" data-startTime="2681">for those guys. </span> <span class="line" data-startTime="2681">My name is Colt McAnlis. This is how you get </span><span class="line" data-startTime="2685">ahold of me. Thank you so much for the talk. </span> <span class="line" data-startTime="2685">We'll open it up for some questions now. </span> <span class="line" data-startTime="2690">[ Applause ] </span></p>

<p class="speaker"><span class="line" data-starttime="2690"><span class="speakerName">Colton McAnlis</span>: Please feel free to use </span><span class="line" data-startTime="2697">the microphone. And before we do that, hey, </span><span class="line" data-startTime="2697">a big round of applause for the typy person. </span><span class="line" data-startTime="2701">[ Applause ] </span></p>

<p class="speaker"><span class="line" data-starttime="2701"><span class="speakerName">Colton McAnlis</span>: Yes, you're awesome. You're </span><span class="line" data-startTime="2709">awesome with the typing. I'm a huge fan. </span><span class="line" data-startTime="2709">Questions. </span></p>

<p class="speaker"><span class="line" data-starttime="2712"><span class="speakerName">Audience member</span>: Yes. What do you see the overlap with </span><span class="line" data-startTime="2712">this and play-in? And also, how did you do </span><span class="line" data-startTime="2717">the server side application? Did you use the </span><span class="line" data-startTime="2717">same JavaScript code to validate the state? </span></p>

<p class="speaker"><span class="line" data-starttime="2722"><span class="speakerName">Colton McAnlis</span>: That's a great question. </span> <span class="line" data-startTime="2722">A two-part question there, which you're cheating, </span><span class="line" data-startTime="2726">you're only allowed one. </span> <span class="line" data-startTime="2726">Two-part question there. How does this overlap </span><span class="line" data-startTime="2729">with things like play-in and the second part </span><span class="line" data-startTime="2729">is how do we actually do our sharing or our </span><span class="line" data-startTime="2733">computation of state on the server side. </span> <span class="line" data-startTime="2733">The first one is play-in is a fantastic tool </span><span class="line" data-startTime="2738">framework that works more with Java to my </span><span class="line" data-startTime="2738">understanding of it to produce a sort of nice </span><span class="line" data-startTime="2743">games middleware setup. </span> <span class="line" data-startTime="2743">GRITS is not considered an engine and should </span><span class="line" data-startTime="2748">not be used in that vocabulary. GRITS is boilerplate </span><span class="line" data-startTime="2748">code. This is a setup and a bunch of things </span><span class="line" data-startTime="2754">that are not intended for you to use as an </span><span class="line" data-startTime="2754">entirety, but a bunch of little small capsules </span><span class="line" data-startTime="2758">that you can consume individually and then </span><span class="line" data-startTime="2758">take the knowledge from that and build off </span><span class="line" data-startTime="2761">of it. We're by no means creating a larger </span><span class="line" data-startTime="2761">ecosystem here. We're just trying to give </span><span class="line" data-startTime="2764">you guys sort of pebbles to feed the empire. </span> <span class="line" data-startTime="2764">The second question was how we're actually </span><span class="line" data-startTime="2769">splitting our code client server. We have </span><span class="line" data-startTime="2769">two metrics for that. First off, we have an </span><span class="line" data-startTime="2775">is server variable that is only defined on </span><span class="line" data-startTime="2775">the server side through NodeJS. So in our </span><span class="line" data-startTime="2780">shared code that's actually included in the </span><span class="line" data-startTime="2780">client's as well, we can actually say if it's </span><span class="line" data-startTime="2784">a server run this loop or run this set of </span><span class="line" data-startTime="2784">code. If it's not the server, exclude it. </span></p>

<p><span class="line" data-startTime="2789">Now, for some side classes we actually have </span><span class="line" data-startTime="2789">&mdash; for instance, if you want to load graphics </span><span class="line" data-startTime="2795">or do drawing, it doesn't make sense to have </span><span class="line" data-startTime="2795">any of that code sitting on the server side. </span> <span class="line" data-startTime="2799">So in those situations we actually split the </span><span class="line" data-startTime="2799">code. We actually have a server folder and </span><span class="line" data-startTime="2802">a client folder, and those are actually separate </span><span class="line" data-startTime="2802">modules that use object-oriented programming </span><span class="line" data-startTime="2807">to inherit from the server side classes. </span> <span class="line" data-startTime="2807">So fantastic question. For a lot more of that </span><span class="line" data-startTime="2812">I really encourage you to dig deep in the </span><span class="line" data-startTime="2812">source code. Check it out. </span></p>

<p><span class="line" data-startTime="2815">I believe you're next, sir. </span></p>

<p class="speaker"><span class="line" data-starttime="2815"><span class="speakerName">Audience member</span>: Quick one about the source code. Has it </span><span class="line" data-startTime="2819">been tested across different browser as well </span><span class="line" data-startTime="2819">or has it been optimized for Chrome? And are </span><span class="line" data-startTime="2824">the assets as far as peer posture as well, </span><span class="line" data-startTime="2824">like the tile tools and the original graphics? </span></p>

<p class="speaker"><span class="line" data-starttime="2829"><span class="speakerName">Colton McAnlis</span>: Absolutely. So the questions </span><span class="line" data-startTime="2829">were have we tested the source code across </span><span class="line" data-startTime="2832">multiple browsers and are the assets available </span><span class="line" data-startTime="2832">in the source code? We haven't had a time </span><span class="line" data-startTime="2837">to actually test the code in other browsers. </span><span class="line" data-startTime="2837">Right now I just kind of hack out and say </span><span class="line" data-startTime="2842">sorry, this is optimized for Chrome. I can't </span><span class="line" data-startTime="2842">fix the other issues. </span><span class="line" data-startTime="2845">The good news is that the assets for the game </span><span class="line" data-startTime="2845">in their atlased form are provided in the </span><span class="line" data-startTime="2850">source code under the license we provide. </span><span class="line" data-startTime="2850">We don't provide the PSD's or the originals </span><span class="line" data-startTime="2855">because of some weird thing, but it's all </span><span class="line" data-startTime="2855">there. And we provide the JSON files, too. </span><span class="line" data-startTime="2859">So you can actually scrape the JSON, scrape </span><span class="line" data-startTime="2859">the alias and generate all the loose asset </span><span class="line" data-startTime="2863">if you would like that. </span><span class="line" data-startTime="2863">Thank you. You were next, sir. </span></p>

<p class="speaker"><span class="line" data-starttime="2866"><span class="speakerName">Audience member</span>: Yeah, two questions. </span></p>

<p class="speaker"><span class="line" data-starttime="2866"><span class="speakerName">Colton McAnlis</span>: All you guys are cheating. </span><span class="line" data-startTime="2869">You're only supposed to have one. </span></p>

<p class="speaker"><span class="line" data-starttime="2869"><span class="speakerName">Audience member</span>: Not a real question. Why is it called </span><span class="line" data-startTime="2873">GRITS? And then how did you do any kind of </span><span class="line" data-startTime="2873">like automated testing for your game? </span></p>

<p class="speaker"><span class="line" data-starttime="2878"><span class="speakerName">Colton McAnlis</span>: Okay. Why is it called GRITS? </span><span class="line" data-startTime="2878">I'm a fan of grits, that's all there is to </span><span class="line" data-startTime="2883">it. </span> <span class="line" data-startTime="2883">There's only &mdash; let me put it this way, as </span><span class="line" data-startTime="2886">a Google employee you see a lot of projects </span><span class="line" data-startTime="2886">come through with secret code names and stuff </span><span class="line" data-startTime="2890">like that. And when you have a chance to name </span><span class="line" data-startTime="2890">one you kind of pick something kooky so someone </span><span class="line" data-startTime="2895">else didn't already steal it. Like you would </span><span class="line" data-startTime="2895">hate to have named your project Glass and </span><span class="line" data-startTime="2899">then have a dude skydive in and say "Here's </span><span class="line" data-startTime="2899">some Glass!" </span><span class="line" data-startTime="2904">So GRITS just kind of showed up one day. It's </span><span class="line" data-startTime="2904">not an acronym or anything. </span></p>

<p><span class="line" data-startTime="2909">And the second question was automated testing. </span> <span class="line" data-startTime="2909">We had some basic stuff to sort test load </span><span class="line" data-startTime="2914">balancing for App Engine, which Fred will </span><span class="line" data-startTime="2914">talk about in his talk a little later. How </span><span class="line" data-startTime="2919">to properly scale that sort of things forward. </span> <span class="line" data-startTime="2919">We didn't do any testing on the client side </span><span class="line" data-startTime="2924">code and we didn't have a lot of time in our </span><span class="line" data-startTime="2924">window to test the server side code. </span> <span class="line" data-startTime="2929">So other than sort of mandatory play test </span><span class="line" data-startTime="2929">for all six of our team members everyday, </span><span class="line" data-startTime="2933">we didn't get a chance to get much of a big </span><span class="line" data-startTime="2933">harness put together. That's kind of our fault </span><span class="line" data-startTime="2935">on our thing that we definitely would like </span><span class="line" data-startTime="2935">to see fixed. </span> <span class="line" data-startTime="2938">We're over here now. </span></p>

<p class="speaker"><span class="line" data-starttime="2938"><span class="speakerName">Audience member</span>: Hi. You talked about some prototype language </span><span class="line" data-startTime="2942">that allowed you to create both the client </span><span class="line" data-startTime="2942">and server side JavaScript, and I was wondering </span><span class="line" data-startTime="2946">if you could speak more about that or where </span><span class="line" data-startTime="2946">I can find out more information about that? </span></p>

<p class="speaker"><span class="line" data-starttime="2951"><span class="speakerName">Colton McAnlis</span>: Uh, okay. Yeah, so the question </span><span class="line" data-startTime="2951">was prototype languages that allow you to </span><span class="line" data-startTime="2956">generate both client and severer. Oh, so you're </span><span class="line" data-startTime="2956">talking about the code generation that we </span><span class="line" data-startTime="2959">do? Yes. So look at our source code. That's </span><span class="line" data-startTime="2959">actually the place. It's not actually a prototype </span><span class="line" data-startTime="2965">language. We actually define a structure in </span><span class="line" data-startTime="2965">JavaScript and then use JavaScript to scrape </span><span class="line" data-startTime="2969">that JavaScript and then omit JavaScript. </span><span class="line" data-startTime="2969">So we use JavaScript to code gen and then </span><span class="line" data-startTime="2974">move that file around. </span></p>

<p class="speaker"><span class="line" data-starttime="2974"><span class="speakerName">Audience member</span>: So it's not a third-party library? </span></p>

<p class="speaker"><span class="line" data-starttime="2977"><span class="speakerName">Colton McAnlis</span>: Nope. It's all in our code </span><span class="line" data-startTime="2977">base. In fact, the file you're looking for </span><span class="line" data-startTime="2980">in the source code is server/proto.js, the </span><span class="line" data-startTime="2980">exact file. You will find our definition and </span><span class="line" data-startTime="2987">then proto i is I think the one that actually </span><span class="line" data-startTime="2987">does the scraping of the code generation after </span><span class="line" data-startTime="2992">that. </span><span class="line" data-startTime="2992">Over here. </span></p>

<p class="speaker"><span class="line" data-starttime="2993"><span class="speakerName">Audience member</span>: So since Web socket is TCP only, did you </span><span class="line" data-startTime="2993">guys have any kind of evaluation of TCP versus </span><span class="line" data-startTime="2999">UDP and like how that behaves when you have </span><span class="line" data-startTime="2999">real network conditions and packet loss and </span><span class="line" data-startTime="3005">things like that? </span></p>

<p class="speaker"><span class="line" data-starttime="3005"><span class="speakerName">Colton McAnlis</span>: The question is did we get </span><span class="line" data-startTime="3009">a chance to evaluate TCP versus UDP versus </span><span class="line" data-startTime="3009">packet loss in real network conditions and </span><span class="line" data-startTime="3014">stuff like that? </span><span class="line" data-startTime="3014">I would love to have somebody do that testing </span><span class="line" data-startTime="3017">for us and let us know where it's falling </span><span class="line" data-startTime="3017">out. </span> <span class="line" data-startTime="3019">UDP wasn't really an option that we're able </span><span class="line" data-startTime="3019">to dive into a lot. We have Web sockets that </span><span class="line" data-startTime="3023">are available. There's very rich containers </span><span class="line" data-startTime="3023">and wrappers for that. </span> <span class="line" data-startTime="3027">So again, in standard C++ development you </span><span class="line" data-startTime="3027">run into a brick wall of like, Hey, there's </span><span class="line" data-startTime="3030">really no good library for UDP. You have to </span><span class="line" data-startTime="3030">reinvent the wheel every time. </span> <span class="line" data-startTime="3034">The fact that the JavaScript developer ecosystem </span><span class="line" data-startTime="3034">is very vibrant with people putting out open </span><span class="line" data-startTime="3039">source libraries, it didn't make sense for </span><span class="line" data-startTime="3039">us to just reinvent the wheel there. It made </span><span class="line" data-startTime="3044">more sense to use things like Socket I/O and </span><span class="line" data-startTime="3044">take advantage of that stuff. </span> <span class="line" data-startTime="3047">I will say that the guy who wrote all of our </span><span class="line" data-startTime="3047">networking code, Craig Tiller, absolutely </span><span class="line" data-startTime="3051">genius. He's from the games industry where </span><span class="line" data-startTime="3051">all he's done for his entire career is optimize </span><span class="line" data-startTime="3056">server side code and bandwidth and latency </span><span class="line" data-startTime="3056">hiding and everything. Definitely contact </span><span class="line" data-startTime="3060">him. He's that first portrait right there. </span></p>

<p><span class="line" data-startTime="3060">Very beautiful man. Contact him. Craig, if </span><span class="line" data-startTime="3066">you're watching... </span> <span class="line" data-startTime="3066">Yes, sir? </span></p>

<p class="speaker"><span class="line" data-starttime="3068"><span class="speakerName">Audience member</span>: So how did you host your NodeJS? </span></p>

<p class="speaker"><span class="line" data-starttime="3068"><span class="speakerName">Colton McAnlis</span>: Next question. </span><span class="line" data-startTime="3074">[Laughter] </span></p>

<p class="speaker"><span class="line" data-starttime="3074"><span class="speakerName">Colton McAnlis</span>: I like that. That was nice. </span><span class="line" data-startTime="3080">Going once... going twice... The live internet </span><span class="line" data-startTime="3080">feed, everyone is like refresh. </span><span class="line" data-startTime="3086">[Laughter] </span></p>

<p class="speaker"><span class="line" data-starttime="3086"><span class="speakerName">Colton McAnlis</span>: Hey, thank you guys so much </span><span class="line" data-startTime="3088">again for your time. I really appreciate it. </span><span class="line" data-startTime="3088">Go check out the EA game. I'm Colt McAnlis. </span><span class="line" data-startTime="3093">Send me an email. </span></p>