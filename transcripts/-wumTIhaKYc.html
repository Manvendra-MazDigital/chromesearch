<p><span class="line" data-startTime="0">[MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="33"><span class="speakerName">Male Speaker</span>: Shanghai </span><span class="line" data-startTime="33">GDG is a very </span><span class="line" data-startTime="34">interesting developer community. </span></p>

<p class="speaker"><span class="line" data-starttime="37"><span class="speakerName">Female Speaker</span>: I'm </span><span class="line" data-startTime="37">glad somebody </span><span class="line" data-startTime="37">has asked this question. </span></p>

<p class="speaker"><span class="line" data-starttime="38"><span class="speakerName">Male Speaker</span>: This is where </span><span class="line" data-startTime="38">the magic happens. </span></p>

<p class="speaker"><span class="line" data-starttime="40"><span class="speakerName">Female Speaker</span>: This is </span><span class="line" data-startTime="40">primarily a question and </span><span class="line" data-startTime="41">answer show. </span><span class="line" data-startTime="42">So if any of you out there would </span><span class="line" data-startTime="42">like to ask questions. </span></p>

<p class="speaker"><span class="line" data-starttime="53"><span class="speakerName">Pete LePage</span>: Well, </span><span class="line" data-startTime="53">welcome everyone. </span><span class="line" data-startTime="55">My name is Pete LePage. </span><span class="line" data-startTime="56">I'm a developer advocate </span><span class="line" data-startTime="56">on the Chrome team. </span><span class="line" data-startTime="58">And with me today, we have Paul </span><span class="line" data-startTime="58">Kinlan, who is here in </span><span class="line" data-startTime="63">London joining us. </span></p>

<p class="speaker"><span class="line" data-starttime="64"><span class="speakerName">Paul Kinlan</span>: Hello. </span></p>

<p class="speaker"><span class="line" data-starttime="65"><span class="speakerName">Pete LePage</span>: And we're here to </span><span class="line" data-startTime="65">talk about Chrome apps and </span><span class="line" data-startTime="68">talk about the networking </span><span class="line" data-startTime="68">stack. </span><span class="line" data-startTime="71">We decided to do something a </span><span class="line" data-startTime="71">little bit different, a little </span><span class="line" data-startTime="75">bit fun this week. </span><span class="line" data-startTime="76">This was actually Paul's idea </span><span class="line" data-startTime="76">to go a little bit deep and </span><span class="line" data-startTime="80">see if we could get a little bit </span><span class="line" data-startTime="80">meta, do something inside </span><span class="line" data-startTime="82">of something that normally </span><span class="line" data-startTime="82">hasn't been done before. </span><span class="line" data-startTime="85">So Paul, why don't you introduce </span><span class="line" data-startTime="85">us to some of the </span><span class="line" data-startTime="88">new networking APIs that </span><span class="line" data-startTime="88">are available? </span></p>

<p class="speaker"><span class="line" data-starttime="91"><span class="speakerName">Paul Kinlan</span>: Yeah, cool, </span><span class="line" data-startTime="91">so I'm Paul Kinlan. </span><span class="line" data-startTime="93">I'm based in London. </span><span class="line" data-startTime="94">You know Pete, you know </span><span class="line" data-startTime="94">what we forgot to do? </span></p>

<p class="speaker"><span class="line" data-starttime="96"><span class="speakerName">Pete LePage</span>: What is that? </span></p>

<p class="speaker"><span class="line" data-starttime="97"><span class="speakerName">Paul Kinlan</span>: We forgot to look </span><span class="line" data-startTime="97">at each other and high-five </span><span class="line" data-startTime="98">each other across </span><span class="line" data-startTime="98">the internet. </span></p>

<p class="speaker"><span class="line" data-starttime="100"><span class="speakerName">Pete LePage</span>: So we're ready. </span><span class="line" data-startTime="101">All right. </span></p>

<p class="speaker"><span class="line" data-starttime="101"><span class="speakerName">Paul Kinlan</span>: Are </span><span class="line" data-startTime="101">you good to go? </span></p>

<p class="speaker"><span class="line" data-starttime="102"><span class="speakerName">Pete LePage</span>: We're good to go. </span><span class="line" data-startTime="102">You ready? </span></p>

<p class="speaker"><span class="line" data-starttime="103"><span class="speakerName">Paul Kinlan</span>: Three, two, one. </span></p>

<p class="speaker"><span class="line" data-starttime="104"><span class="speakerName">Pete LePage</span>: Two, three. </span></p>

<p class="speaker"><span class="line" data-starttime="105"><span class="speakerName">Paul Kinlan</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="106"><span class="speakerName">Pete LePage</span>: Whoa. </span><span class="line" data-startTime="106">OK, well, that was a complete, </span><span class="line" data-startTime="106">total, utter fail. </span><span class="line" data-startTime="109">But that's OK. </span></p>

<p class="speaker"><span class="line" data-starttime="111"><span class="speakerName">Paul Kinlan</span>: It sounded good. </span></p>

<p class="speaker"><span class="line" data-starttime="111"><span class="speakerName">Pete LePage</span>: Yeah, </span><span class="line" data-startTime="111">it sounded good. </span><span class="line" data-startTime="112">And we tried. </span></p>

<p class="speaker"><span class="line" data-starttime="114"><span class="speakerName">Paul Kinlan</span>: We tried, right. </span></p>

<p class="speaker"><span class="line" data-starttime="115"><span class="speakerName">Pete LePage</span>: A for effort. </span></p>

<p class="speaker"><span class="line" data-starttime="117"><span class="speakerName">Paul Kinlan</span>: So yes, anyway, </span><span class="line" data-startTime="117">back on the subject. </span> <span class="line" data-startTime="119">We have a new set of </span><span class="line" data-startTime="119">APIs in Chrome. </span> <span class="line" data-startTime="121">I think in the past that we've </span><span class="line" data-startTime="121">talked about the Chrome socket </span><span class="line" data-startTime="124">API and space. </span> <span class="line" data-startTime="126">And one big glaring omission </span><span class="line" data-startTime="126">from that API was the ability </span><span class="line" data-startTime="129">to listen on port and </span><span class="line" data-startTime="129">bind to it by UDP. </span> <span class="line" data-startTime="133">That landed a little </span><span class="line" data-startTime="133">while ago. </span> <span class="line" data-startTime="134">So you can build a server, </span><span class="line" data-startTime="134">which basically </span><span class="line" data-startTime="137">receives UDP input. </span></p>

<p><span class="line" data-startTime="138">And when we showed you the Air </span><span class="line" data-startTime="138">Drone demo, about three or </span><span class="line" data-startTime="141">four weeks ago I think, that was </span><span class="line" data-startTime="141">using a UDP-based server. </span> <span class="line" data-startTime="146">But again, the next omission, </span><span class="line" data-startTime="146">from this whole API, was the </span><span class="line" data-startTime="149">ability to, actually in </span><span class="line" data-startTime="149">JavaScript and HTML, build a </span><span class="line" data-startTime="153">server that is TCP based </span><span class="line" data-startTime="153">inside the browser. </span> <span class="line" data-startTime="156">So we now have the ability. </span> <span class="line" data-startTime="158">And it landed recently. </span> <span class="line" data-startTime="159">It's only experimental. </span> <span class="line" data-startTime="160">It's only in Chrome Canary </span><span class="line" data-startTime="160">at the moment. </span> <span class="line" data-startTime="162">But we recently landed the </span><span class="line" data-startTime="162">ability to listen and accept </span><span class="line" data-startTime="169">API calls inside Chrome. </span> <span class="line" data-startTime="171">So what this enables you </span><span class="line" data-startTime="171">to do is basically </span><span class="line" data-startTime="173">build TCP based servers. </span> <span class="line" data-startTime="175">You could build an FTP server. </span> <span class="line" data-startTime="177">What we're going to talk about </span><span class="line" data-startTime="177">today, which is a web server </span><span class="line" data-startTime="180">that we've built and will </span><span class="line" data-startTime="180">be available in </span><span class="line" data-startTime="181">GitHub after the show. </span> <span class="line" data-startTime="184">Yeah, it's pretty powerful. </span> <span class="line" data-startTime="185">The fact that you can have a </span><span class="line" data-startTime="185">web server inside your web </span><span class="line" data-startTime="187">browser itself, inside </span><span class="line" data-startTime="187">your applications. </span></p>

<p><span class="line" data-startTime="190">I think it's been </span><span class="line" data-startTime="190">done by Opera. </span> <span class="line" data-startTime="192">And I think Firefox has </span><span class="line" data-startTime="192">had some stuff. </span> <span class="line" data-startTime="193">But now we've got pure access in </span><span class="line" data-startTime="193">JavaScript to be able to do </span><span class="line" data-startTime="196">these things. </span> <span class="line" data-startTime="196">And it's pretty exciting </span><span class="line" data-startTime="196">inside apps. </span></p>

<p class="speaker"><span class="line" data-starttime="198"><span class="speakerName">Pete LePage</span>: Yeah, </span><span class="line" data-startTime="198">it definitely is. </span><span class="line" data-startTime="199">And this is one of these things </span><span class="line" data-startTime="199">that I don't think </span><span class="line" data-startTime="201">really anybody's ever </span><span class="line" data-startTime="201">done before. </span><span class="line" data-startTime="205">And accessing these things is a </span><span class="line" data-startTime="205">really powerful thing to be </span><span class="line" data-startTime="208">able to do. </span></p>

<p class="speaker"><span class="line" data-starttime="210"><span class="speakerName">Paul Kinlan</span>: Yeah. </span><span class="line" data-startTime="211">I'ts pretty cool, right? </span></p>

<p class="speaker"><span class="line" data-starttime="211"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="211"><span class="speakerName">Paul Kinlan</span>: So we were </span><span class="line" data-startTime="211">discussing the different types </span><span class="line" data-startTime="214">of ideas, the things </span><span class="line" data-startTime="214">that we could do. </span> <span class="line" data-startTime="216">And you know, web server </span><span class="line" data-startTime="216">is the first one. </span> <span class="line" data-startTime="219">The first thing that most people </span><span class="line" data-startTime="219">try and do is a web </span><span class="line" data-startTime="220">server inside whatever it is, </span><span class="line" data-startTime="220">listen on port 80 or even get </span><span class="line" data-startTime="224">the GET requests </span><span class="line" data-startTime="224">coming back in. </span> <span class="line" data-startTime="226">But you could go even further. </span> <span class="line" data-startTime="227">You could build an </span><span class="line" data-startTime="227">SMTP server. </span> <span class="line" data-startTime="230">And the really important thing </span><span class="line" data-startTime="230">about these type of </span><span class="line" data-startTime="231">the things is that &mdash; </span><span class="line" data-startTime="232">I missed saying this before, </span><span class="line" data-startTime="232">and should have said it </span><span class="line" data-startTime="234">earlier on &mdash; </span><span class="line" data-startTime="235">I think, personally, this </span><span class="line" data-startTime="235">is really important </span><span class="line" data-startTime="237">for Chrome OS, right? </span><span class="line" data-startTime="238">We want the people and the </span><span class="line" data-startTime="238">developers to be able to use </span><span class="line" data-startTime="240">Chrome OS as a platform to </span><span class="line" data-startTime="240">be able to develop web </span><span class="line" data-startTime="243">applications and applications </span><span class="line" data-startTime="243">in general. </span></p>

<p><span class="line" data-startTime="244">And I think one of the things </span><span class="line" data-startTime="244">that has generally been </span><span class="line" data-startTime="246">missing is this ability to, when </span><span class="line" data-startTime="246">you're offline, connect </span><span class="line" data-startTime="250">to a local instance of a web </span><span class="line" data-startTime="250">server, build your application </span><span class="line" data-startTime="252">locally, your website locally, </span><span class="line" data-startTime="252">connect to it, and test it </span><span class="line" data-startTime="255">inside the browser. </span> <span class="line" data-startTime="257">And I think this API, this </span><span class="line" data-startTime="257">single API, the listen and </span><span class="line" data-startTime="260">accept APIs in the socket </span><span class="line" data-startTime="260">interface, they allow us to do </span><span class="line" data-startTime="263">those types of things. </span> <span class="line" data-startTime="264">It's going to be pretty cool </span><span class="line" data-startTime="264">in the future to see what </span><span class="line" data-startTime="265">comes out on this. </span></p>

<p class="speaker"><span class="line" data-starttime="266"><span class="speakerName">Pete LePage</span>: Yeah, absolutely. </span><span class="line" data-startTime="270">Go ahead. </span></p>

<p class="speaker"><span class="line" data-starttime="271"><span class="speakerName">Paul Kinlan</span>: Should we jump to </span><span class="line" data-startTime="271">a demo, just to prove it does </span><span class="line" data-startTime="273">work, and I'm not lying and </span><span class="line" data-startTime="273">bringing everyone on? </span></p>

<p class="speaker"><span class="line" data-starttime="276"><span class="speakerName">Pete LePage</span>: Yeah, I </span><span class="line" data-startTime="276">think we should. </span></p>

<p class="speaker"><span class="line" data-starttime="277"><span class="speakerName">Paul Kinlan</span>: Cool. </span></p>

<p class="speaker"><span class="line" data-starttime="280"><span class="speakerName">Pete LePage</span>: All right, so </span><span class="line" data-startTime="280">we've got your screen up. </span><span class="line" data-startTime="281">People can see your screen. </span></p>

<p class="speaker"><span class="line" data-starttime="283"><span class="speakerName">Paul Kinlan</span>: Yay. </span><span class="line" data-startTime="285">This is my app. </span><span class="line" data-startTime="286">It's like a semi standalone </span><span class="line" data-startTime="286">application build with the </span><span class="line" data-startTime="291">Chrome app APIs. </span><span class="line" data-startTime="293">And what it allows us to do &mdash; </span><span class="line" data-startTime="293">and I'll just reload it, </span><span class="line" data-startTime="295">because I was testing </span><span class="line" data-startTime="295">it before. </span><span class="line" data-startTime="297">Never say I never </span><span class="line" data-startTime="297">come prepared. </span><span class="line" data-startTime="299">I was testing it before. </span><span class="line" data-startTime="301">So pick a file. </span><span class="line" data-startTime="302">And it's this directory here, </span><span class="line" data-startTime="302">this app directory that I want </span><span class="line" data-startTime="305">to serve from my local machine, </span><span class="line" data-startTime="305">to obviously local </span><span class="line" data-startTime="309">connections. </span><span class="line" data-startTime="310">Press Select, Start. </span><span class="line" data-startTime="313">So the interesting thing </span><span class="line" data-startTime="313">about this, and I </span><span class="line" data-startTime="315">think I kind of like &mdash; </span><span class="line" data-startTime="316">oh, there's a big list of files </span><span class="line" data-startTime="316">it can actually serve. </span><span class="line" data-startTime="320">I've used the normal input type </span><span class="line" data-startTime="320">equals file attribute &mdash; </span><span class="line" data-startTime="323">method, sorry. </span><span class="line" data-startTime="325">Is it method? </span></p>

<p class="speaker"><span class="line" data-starttime="325"><span class="speakerName">Pete LePage</span>: The directory? </span></p>

<p class="speaker"><span class="line" data-starttime="326"><span class="speakerName">Paul Kinlan</span>: HTML tag. </span><span class="line" data-startTime="327">Yeah, the HTML5 tag, input type </span><span class="line" data-startTime="327">equals file, with WebKit </span><span class="line" data-startTime="331">Directory, so I can select </span><span class="line" data-startTime="331">directories. </span><span class="line" data-startTime="334">That returns, obviously, an </span><span class="line" data-startTime="334">on-change It gives us access </span><span class="line" data-startTime="336">to the list of files that </span><span class="line" data-startTime="336">we've selected. </span><span class="line" data-startTime="338">And I basically just take a </span><span class="line" data-startTime="338">reference to those file </span><span class="line" data-startTime="340">references. </span><span class="line" data-startTime="341">And then I'll serve them </span><span class="line" data-startTime="341">in the web or locally. </span><span class="line" data-startTime="345">So 127, there we go. </span><span class="line" data-startTime="349">That's it. </span><span class="line" data-startTime="350">It's kind of simple, Wotcha! </span><span class="line" data-startTime="352">Now live. </span><span class="line" data-startTime="352">This is an application </span><span class="line" data-startTime="352">I made with Yeoman </span><span class="line" data-startTime="354">in about two seconds. </span></p>

<p class="speaker"><span class="line" data-starttime="355"><span class="speakerName">Pete LePage</span>: Whoohoo. </span></p>

<p class="speaker"><span class="line" data-starttime="355"><span class="speakerName">Paul Kinlan</span>: Nice little </span><span class="line" data-startTime="355">plug to Yeoman. </span><span class="line" data-startTime="358">But it's the basic application, </span><span class="line" data-startTime="358">right? </span><span class="line" data-startTime="359">It's not styled up. </span><span class="line" data-startTime="360">But the interesting thing is if </span><span class="line" data-startTime="360">we go to Inspect Element &mdash; </span><span class="line" data-startTime="363">let me just detach that so we </span><span class="line" data-startTime="363">can see it inside the screen. </span></p>

<p class="speaker"><span class="line" data-starttime="365"><span class="speakerName">Pete LePage</span>: And just to mention </span><span class="line" data-startTime="365">this, for folks who </span><span class="line" data-startTime="369">are interested, if they want </span><span class="line" data-startTime="369">to check out the code for </span><span class="line" data-startTime="371">this, they can go to the </span><span class="line" data-startTime="371">URL on the screen. </span><span class="line" data-startTime="374">You can go download the sample </span><span class="line" data-startTime="374">at goo.gl/AZSTg. </span><span class="line" data-startTime="381">And you can see that </span><span class="line" data-startTime="381">capitalization and all that </span><span class="line" data-startTime="384">stuff there. </span><span class="line" data-startTime="384">But, all right, sorry. </span><span class="line" data-startTime="385">Go ahead, Paul. </span></p>

<p class="speaker"><span class="line" data-starttime="386"><span class="speakerName">Paul Kinlan</span>: Yeah, </span><span class="line" data-startTime="386">that's cool. </span> <span class="line" data-startTime="387">So we just push stuff to GitHub, </span><span class="line" data-startTime="387">so people can off and </span><span class="line" data-startTime="389">experiment with it now. </span> <span class="line" data-startTime="390">The caveat is, it's still </span><span class="line" data-startTime="390">experimental. </span> <span class="line" data-startTime="392">So you need to enable </span><span class="line" data-startTime="392">experimental </span><span class="line" data-startTime="394">APIs and about flags. </span> <span class="line" data-startTime="396">And it's also only available </span><span class="line" data-startTime="396">in Canary. </span> <span class="line" data-startTime="397">But once you enable those </span><span class="line" data-startTime="397">two things, you can </span><span class="line" data-startTime="399">actually play this API. </span> <span class="line" data-startTime="401">And if you look here, </span><span class="line" data-startTime="401">this is the code. </span> <span class="line" data-startTime="404">Sorry, not the code. </span> <span class="line" data-startTime="405">Sorry, this is the list of </span><span class="line" data-startTime="405">requests, just to prove that </span><span class="line" data-startTime="407">I'm actually making </span><span class="line" data-startTime="407">those requests </span><span class="line" data-startTime="409">from my local resource &mdash; </span><span class="line" data-startTime="411">script score slash vendor, for </span><span class="line" data-startTime="411">instance, forward slash </span><span class="line" data-startTime="414">modernizer dot min dot JS. </span> <span class="line" data-startTime="415">That's being served off </span><span class="line" data-startTime="415">of my local file </span><span class="line" data-startTime="417">system via this interface. </span></p>

<p><span class="line" data-startTime="419">So it's pretty cool. </span> <span class="line" data-startTime="420">It's pretty powerful. </span> <span class="line" data-startTime="421">And we're going to show </span><span class="line" data-startTime="421">you actually how </span><span class="line" data-startTime="424">to build these things &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="425"><span class="speakerName">Pete LePage</span>: Sweet. </span></p>

<p class="speaker"><span class="line" data-starttime="425"><span class="speakerName">Paul Kinlan</span>: Today. </span><span class="line" data-startTime="426">So should we jump into code? </span></p>

<p class="speaker"><span class="line" data-starttime="428"><span class="speakerName">Pete LePage</span>: Absolutely. </span></p>

<p class="speaker"><span class="line" data-starttime="430"><span class="speakerName">Paul Kinlan</span>: So, as we can see </span><span class="line" data-startTime="430">here, everybody who can see my </span><span class="line" data-startTime="433">screen, the first thing that </span><span class="line" data-startTime="433">we need to do when we're </span><span class="line" data-startTime="436">building this application, is </span><span class="line" data-startTime="436">actually change the manifest. </span> <span class="line" data-startTime="438">The reason why we need to do </span><span class="line" data-startTime="438">this, and I should've gotten </span><span class="line" data-startTime="442">rid of this earlier on, is by </span><span class="line" data-startTime="442">default we don't normally have </span><span class="line" data-startTime="444">experimental permissions enabled </span><span class="line" data-startTime="444">inside our manifest. </span> <span class="line" data-startTime="448">So if I just select this and </span><span class="line" data-startTime="448">see this here, you add </span><span class="line" data-startTime="452">experimental. </span></p>

<p><span class="line" data-startTime="453">This will enable your access </span><span class="line" data-startTime="453">to the advanced socket API. </span> <span class="line" data-startTime="458">You then ask for a socket </span><span class="line" data-startTime="458">permission. </span> <span class="line" data-startTime="460">And this is relatively </span><span class="line" data-startTime="460">new syntax. </span> <span class="line" data-startTime="461">It landed maybe about </span><span class="line" data-startTime="461">a month ago. </span></p>

<p class="speaker"><span class="line" data-starttime="463"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="464"><span class="speakerName">Paul Kinlan</span>: But it allows you </span><span class="line" data-startTime="464">to basically say and list </span><span class="line" data-startTime="466">different types of permissions </span><span class="line" data-startTime="466">that you want the socket </span><span class="line" data-startTime="468">interface to have inside </span><span class="line" data-startTime="468">your application. </span><span class="line" data-startTime="470">So if you're going to do UDP </span><span class="line" data-startTime="470">server or send UDP requests </span><span class="line" data-startTime="473">out from your client </span><span class="line" data-startTime="473">applications or remote server, </span><span class="line" data-startTime="476">you need to actually specify </span><span class="line" data-startTime="476">this up front, so that the </span><span class="line" data-startTime="479">user, when they install this </span><span class="line" data-startTime="479">application, they know the </span><span class="line" data-startTime="482">types of interactions with your </span><span class="line" data-startTime="482">native operating system </span><span class="line" data-startTime="485">that you're going to have. </span><span class="line" data-startTime="486">And in this case &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="487"><span class="speakerName">Pete LePage</span>: Yeah. </span><span class="line" data-startTime="488">I was going to say, Paul, so </span><span class="line" data-startTime="488">if I want to send UDP, I'm </span><span class="line" data-startTime="492">guessing it's probably not UDP </span><span class="line" data-startTime="492">connect and UDP listen is it? </span></p>

<p class="speaker"><span class="line" data-starttime="495"><span class="speakerName">Paul Kinlan</span>: No it's not. </span><span class="line" data-startTime="496">It's UDP sendto, I believe. </span><span class="line" data-startTime="499">And it will be UDP bind. </span></p>

<p class="speaker"><span class="line" data-starttime="501"><span class="speakerName">Pete LePage</span>: UDP sendto to send </span><span class="line" data-startTime="501">packets, and then UDP </span><span class="line" data-startTime="504">bind will allow you to bind to </span><span class="line" data-startTime="504">a port to listen for next </span><span class="line" data-startTime="508">stuff coming in? </span></p>

<p class="speaker"><span class="line" data-starttime="508"><span class="speakerName">Paul Kinlan</span>: Yeah. </span> <span class="line" data-startTime="509">And the sytax can get a little </span><span class="line" data-startTime="509">bit more complex. </span> <span class="line" data-startTime="511">So you can basically, in theory, </span><span class="line" data-startTime="511">bind to just a single </span><span class="line" data-startTime="515">address on a special port. </span> <span class="line" data-startTime="517">And what this is basically </span><span class="line" data-startTime="517">trying to say to do here is, </span><span class="line" data-startTime="521">well, if you say TCP listen, </span><span class="line" data-startTime="521">your application could bind to </span><span class="line" data-startTime="525">any port on the user's system. </span> <span class="line" data-startTime="526">I believe it's not under the </span><span class="line" data-startTime="526">root's permissions, so </span><span class="line" data-startTime="528">anything below. </span> <span class="line" data-startTime="530">1024, I think you can't </span><span class="line" data-startTime="530">bind to, but anything </span><span class="line" data-startTime="532">above that you can. </span> <span class="line" data-startTime="534">But when you're doing a UDP </span><span class="line" data-startTime="534">send or a TCP connect, in </span><span class="line" data-startTime="537">theory, you could connect </span><span class="line" data-startTime="537">to port 22 for TELNET </span><span class="line" data-startTime="539">and port 80 for HTTP. </span></p>

<p><span class="line" data-startTime="542">You just want to let the user </span><span class="line" data-startTime="542">know, for instance, those </span><span class="line" data-startTime="545">types of services. </span> <span class="line" data-startTime="546">I'm going to give them that </span><span class="line" data-startTime="546">little bit of extra trust that </span><span class="line" data-startTime="550">they get when they know the </span><span class="line" data-startTime="550">only things that they can </span><span class="line" data-startTime="552">access are the things you've </span><span class="line" data-startTime="552">listed up front. </span> <span class="line" data-startTime="554">But anyway, back on topic. </span> <span class="line" data-startTime="557">The most important thing </span><span class="line" data-startTime="557">here is TCP listen. </span> <span class="line" data-startTime="559">This is the new experimental </span><span class="line" data-startTime="559">permission that you need for </span><span class="line" data-startTime="563">the socket interface to be able </span><span class="line" data-startTime="563">to listen to ports and </span><span class="line" data-startTime="565">listen to incoming requests. </span> <span class="line" data-startTime="568">So if you add this in and you've </span><span class="line" data-startTime="568">already got a socket </span><span class="line" data-startTime="569">based application, you </span><span class="line" data-startTime="569">should be good to go. </span></p>

<p><span class="line" data-startTime="572">Now that doesn't mean that &mdash; </span><span class="line" data-startTime="574">sorry &mdash; </span><span class="line" data-startTime="575">doesn't mean, straight away, </span><span class="line" data-startTime="575">that you're going be able to </span><span class="line" data-startTime="577">start taking requests. </span> <span class="line" data-startTime="578">Obviously you have to </span><span class="line" data-startTime="578">program the API. </span> <span class="line" data-startTime="580">So I just want to show you, just </span><span class="line" data-startTime="580">to prove that all this is </span><span class="line" data-startTime="583">the same thing. </span> <span class="line" data-startTime="584">Ignore this styling stuff. </span> <span class="line" data-startTime="586">But let me go to the next </span><span class="line" data-startTime="586">input type equals file. </span> <span class="line" data-startTime="590">This is the HTML that's </span><span class="line" data-startTime="590">involved in actually </span><span class="line" data-startTime="593">constructing our </span><span class="line" data-startTime="593">user interface. </span> <span class="line" data-startTime="595">Input type equals file with an </span><span class="line" data-startTime="595">attribute of WebKit Directory </span><span class="line" data-startTime="598">and just an ID called </span><span class="line" data-startTime="598">directory. </span> <span class="line" data-startTime="601">Now the reason why I do WebKit </span><span class="line" data-startTime="601">Directory is, if you've never </span><span class="line" data-startTime="603">actually done this before, </span><span class="line" data-startTime="603">normally, input type equals </span><span class="line" data-startTime="606">file only allows you to </span><span class="line" data-startTime="606">select one file from </span><span class="line" data-startTime="610">the user's file system. </span> <span class="line" data-startTime="611">If you do input type equals </span><span class="line" data-startTime="611">file under a multiple </span><span class="line" data-startTime="614">attribute, then you can select </span><span class="line" data-startTime="614">multiple files on the user's </span><span class="line" data-startTime="617">system and get it brought back </span><span class="line" data-startTime="617">into your application. </span></p>

<p><span class="line" data-startTime="620">But if you do WebKit Directory, </span><span class="line" data-startTime="620">WebKit Directory </span><span class="line" data-startTime="622">basically gives you the entire </span><span class="line" data-startTime="622">list of files inside the </span><span class="line" data-startTime="626">directory that the </span><span class="line" data-startTime="626">user's selected. </span> <span class="line" data-startTime="627">So we went to the app demo </span><span class="line" data-startTime="627">before, and we saw the fact </span><span class="line" data-startTime="630">that I selected the app folder, </span><span class="line" data-startTime="630">everything inside that </span><span class="line" data-startTime="633">folder is now available </span><span class="line" data-startTime="633">to my application </span><span class="line" data-startTime="634">to be able to read. </span> <span class="line" data-startTime="636">You can't write to those </span><span class="line" data-startTime="636">applications. </span> <span class="line" data-startTime="638">That's actually a subject for </span><span class="line" data-startTime="638">another Hangout altogether is </span><span class="line" data-startTime="640">how to write to these files </span><span class="line" data-startTime="640">and actually you can get </span><span class="line" data-startTime="643">access to them once you've </span><span class="line" data-startTime="643">got a reference to it. </span></p>

<p><span class="line" data-startTime="646">But now it's only read-only. </span> <span class="line" data-startTime="647">And to be fair, that's kind of </span><span class="line" data-startTime="647">all we really need for our </span><span class="line" data-startTime="649">basic web service &mdash; </span><span class="line" data-startTime="650">to be able to read files that </span><span class="line" data-startTime="650">are contained in a directory </span><span class="line" data-startTime="653">that the user has chosen and </span><span class="line" data-startTime="653">granted you access to. </span> <span class="line" data-startTime="658">So anyway, let's jump </span><span class="line" data-startTime="658">into the code. </span> <span class="line" data-startTime="660">index.js is where it lives. </span> <span class="line" data-startTime="662">And as you can see, I've already </span><span class="line" data-startTime="662">got a whole lot of </span><span class="line" data-startTime="664">boilerplate. </span> <span class="line" data-startTime="664">I mean a lot of this code is </span><span class="line" data-startTime="664">actually just hooking up the </span><span class="line" data-startTime="667">user interface elements and </span><span class="line" data-startTime="667">then also doing stream </span><span class="line" data-startTime="672">conversions. </span> <span class="line" data-startTime="672">Because the interesting things </span><span class="line" data-startTime="672">to know about the socket API </span><span class="line" data-startTime="675">is it sends array </span><span class="line" data-startTime="675">buffer objects. </span></p>

<p><span class="line" data-startTime="678">And the array buffer object is </span><span class="line" data-startTime="678">not something that we normally </span><span class="line" data-startTime="680">deal with inside JavaScript. </span></p>

<p class="speaker"><span class="line" data-starttime="682"><span class="speakerName">Pete LePage</span>: Yeah, we're not </span><span class="line" data-startTime="682">used to that at all. </span><span class="line" data-startTime="684">So what's the difference between </span><span class="line" data-startTime="684">an array buffer and a </span><span class="line" data-startTime="688">string, if I haven't really </span><span class="line" data-startTime="688">played with those before? </span></p>

<p class="speaker"><span class="line" data-starttime="692"><span class="speakerName">Paul Kinlan</span>: Yes, so the main </span><span class="line" data-startTime="692">difference between an array </span><span class="line" data-startTime="694">buffer and a string, </span><span class="line" data-startTime="694">essentially, is the fact that, </span><span class="line" data-startTime="697">if you have ever done any kind </span><span class="line" data-startTime="697">of boundary manipulation on </span><span class="line" data-startTime="699">the string inside JavaScript, </span><span class="line" data-startTime="699">you know how hard is it. </span><span class="line" data-startTime="702">You have to take the high order </span><span class="line" data-startTime="702">byte and the lower order </span><span class="line" data-startTime="704">byte, because it's </span><span class="line" data-startTime="704">UTF16, I think. </span><span class="line" data-startTime="706">And you have to do a whole lot </span><span class="line" data-startTime="706">of manipulation just to access </span><span class="line" data-startTime="708">the core data. </span></p>

<p class="speaker"><span class="line" data-starttime="709"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="710"><span class="speakerName">Paul Kinlan</span>: And the array </span><span class="line" data-startTime="710">buffer allows you to have </span><span class="line" data-startTime="713">multiple different types of </span><span class="line" data-startTime="713">views on a piece of data. </span> <span class="line" data-startTime="715">So you can say my entire data, </span><span class="line" data-startTime="715">that's contained in array </span><span class="line" data-startTime="718">buffer, is of UInt array type or </span><span class="line" data-startTime="718">UInt8 array, UInt16 array, </span><span class="line" data-startTime="724">UInt32 array. </span> <span class="line" data-startTime="727">So you can say your array is </span><span class="line" data-startTime="727">of different types of data. </span> <span class="line" data-startTime="730">But, essentially, what it allows </span><span class="line" data-startTime="730">you to do is say, well, </span><span class="line" data-startTime="733">my view on this array buffer is </span><span class="line" data-startTime="733">an array of 8 bit integers, </span><span class="line" data-startTime="736">essentially. </span> <span class="line" data-startTime="737">And that allows you to then </span><span class="line" data-startTime="737">say, well, we just read </span><span class="line" data-startTime="740">through the bytes </span><span class="line" data-startTime="740">individually. </span> <span class="line" data-startTime="741">So as you can see here, if we </span><span class="line" data-startTime="741">go here, the view, we got a </span><span class="line" data-startTime="745">new array based on the array </span><span class="line" data-startTime="745">buffer of type UInt8 array. </span></p>

<p><span class="line" data-startTime="749">And then we just iterate across </span><span class="line" data-startTime="749">it and, basically, </span><span class="line" data-startTime="753">convert our string. </span> <span class="line" data-startTime="755">So we convert our string </span><span class="line" data-startTime="755">into UInt8 array. </span> <span class="line" data-startTime="757">So its written across our string </span><span class="line" data-startTime="757">and then pushing that </span><span class="line" data-startTime="761">value that's held in the array, </span><span class="line" data-startTime="761">directly into the </span><span class="line" data-startTime="764">actual array buffer itself. </span></p>

<p class="speaker"><span class="line" data-starttime="766"><span class="speakerName">Pete LePage</span>: Perfect. </span></p>

<p class="speaker"><span class="line" data-starttime="767"><span class="speakerName">Paul Kinlan</span>: And that's cool, </span><span class="line" data-startTime="767">because then you can handle </span><span class="line" data-startTime="770">big endian and little endian, </span><span class="line" data-startTime="770">when you try and deliver data. </span><span class="line" data-startTime="773">It's super important for the </span><span class="line" data-startTime="773">socket API, because the </span><span class="line" data-startTime="776">majority of time we're not </span><span class="line" data-startTime="776">really sending strings around. </span><span class="line" data-startTime="778">When doing a web socket, for </span><span class="line" data-startTime="778">instance, you might want to </span><span class="line" data-startTime="780">send a string, because </span><span class="line" data-startTime="780">it's an adjacent </span><span class="line" data-startTime="781">structure and that's fine. </span><span class="line" data-startTime="782">But actually, at the raw level </span><span class="line" data-startTime="782">for the socket API, you send </span><span class="line" data-startTime="787">raw binary data. </span><span class="line" data-startTime="788">And that's why we need these </span><span class="line" data-startTime="788">extra little functions. </span><span class="line" data-startTime="791">We also have an array buffer to </span><span class="line" data-startTime="791">string, which we just used </span><span class="line" data-startTime="794">to basically convert, obviously, </span><span class="line" data-startTime="794">an array buffer, </span><span class="line" data-startTime="796">the data that we receive back </span><span class="line" data-startTime="796">from the service to a string. </span></p>

<p class="speaker"><span class="line" data-starttime="799"><span class="speakerName">Pete LePage</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="799"><span class="speakerName">Paul Kinlan</span>: And the reason </span><span class="line" data-startTime="799">why we use this is that we </span><span class="line" data-startTime="801">have to parse out, for instance, </span><span class="line" data-startTime="801">when an HTTP request </span><span class="line" data-startTime="804">comes in, there's a very </span><span class="line" data-startTime="804">specific set of headers that </span><span class="line" data-startTime="808">you get through. </span><span class="line" data-startTime="809">And passing in binary, actually </span><span class="line" data-startTime="809">byte by byte, is just </span><span class="line" data-startTime="813">a bit of a pain. </span></p>

<p class="speaker"><span class="line" data-starttime="814"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="814"><span class="speakerName">Paul Kinlan</span>: So I convert </span><span class="line" data-startTime="814">it to a string and do </span><span class="line" data-startTime="816">some work onto it. </span><span class="line" data-startTime="816">You'll see that there's </span><span class="line" data-startTime="816">probably a big glaring </span><span class="line" data-startTime="817">security hole in it, where I </span><span class="line" data-startTime="817">just read the whole string. </span><span class="line" data-startTime="820">And if you send a big enough </span><span class="line" data-startTime="820">set of headers, like 1,000 </span><span class="line" data-startTime="823">megabytes or gigabytes of </span><span class="line" data-startTime="823">headers, my application will </span><span class="line" data-startTime="826">probably crash. </span><span class="line" data-startTime="827">But just to demonstrate the </span><span class="line" data-startTime="827">purpose of this, like I said </span><span class="line" data-startTime="830">to you guys, we're ignoring </span><span class="line" data-startTime="830">all of that type of stuff. </span></p>

<p class="speaker"><span class="line" data-starttime="832"><span class="speakerName">Pete LePage</span>: All right. </span><span class="line" data-startTime="832">And I think that's one other </span><span class="line" data-startTime="832">thing to point out. </span><span class="line" data-startTime="835">We wrote this as a really quick </span><span class="line" data-startTime="835">sample, not as something </span><span class="line" data-startTime="840">that is meant to be used as a </span><span class="line" data-startTime="840">key thing that you should copy </span><span class="line" data-startTime="844">everything from and sit </span><span class="line" data-startTime="844">down and write a web </span><span class="line" data-startTime="847">server using this. </span><span class="line" data-startTime="849">We just wanted to sort of get </span><span class="line" data-startTime="849">some of the concepts across. </span><span class="line" data-startTime="853">And there's a few things we </span><span class="line" data-startTime="853">could have done better. </span><span class="line" data-startTime="856">A few things we could </span><span class="line" data-startTime="856">have done worse. </span></p>

<p class="speaker"><span class="line" data-starttime="858"><span class="speakerName">Paul Kinlan</span>: I mean the demo's </span><span class="line" data-startTime="858">only going to show you how to </span><span class="line" data-startTime="859">handle get requests. </span><span class="line" data-startTime="861">So if you want to do cross </span><span class="line" data-startTime="861">origin and post puts and </span><span class="line" data-startTime="865">everything else, that's not </span><span class="line" data-startTime="865">going to work at the moment. </span><span class="line" data-startTime="867">But the concept is there. </span><span class="line" data-startTime="869">You can build a web server </span><span class="line" data-startTime="869">entirely in JavaScript that </span><span class="line" data-startTime="871">lives inside your browser. </span><span class="line" data-startTime="873">The place I always like this, </span><span class="line" data-startTime="873">and I don't think they're ever </span><span class="line" data-startTime="877">going to do it, but the App </span><span class="line" data-startTime="877">Engine SDK uploader. </span><span class="line" data-startTime="881">You kind of get your </span><span class="line" data-startTime="881">dev environment. </span><span class="line" data-startTime="883">You can basically run Python </span><span class="line" data-startTime="883">with mscript and whatever </span><span class="line" data-startTime="887">other technologies </span><span class="line" data-startTime="887">you want to use. </span><span class="line" data-startTime="888">You can have the App Engine's </span><span class="line" data-startTime="888">mini system just run inside </span><span class="line" data-startTime="891">the browser and upload. </span><span class="line" data-startTime="893">That's where I'd like to get </span><span class="line" data-startTime="893">to in 10 year's time. </span><span class="line" data-startTime="896">Actually, in 10 year's time, </span><span class="line" data-startTime="896">I'd like to be retired and </span><span class="line" data-startTime="898">living on the beach somewhere. </span></p>

<p class="speaker"><span class="line" data-starttime="899"><span class="speakerName">Pete LePage</span>: Well, yeah. </span><span class="line" data-startTime="900">Well, how about then, in nine </span><span class="line" data-startTime="900">years time, you get that done. </span><span class="line" data-startTime="904">And then in 10 years, you can </span><span class="line" data-startTime="904">retire, because everybody just </span><span class="line" data-startTime="906">thinks that's so awesome and </span><span class="line" data-startTime="906">they just make it happen. </span></p>

<p class="speaker"><span class="line" data-starttime="909"><span class="speakerName">Paul Kinlan</span>: Yeah. </span><span class="line" data-startTime="909">I think that's good. </span><span class="line" data-startTime="911">I think that's really good. </span><span class="line" data-startTime="911">Should we do it? </span></p>

<p class="speaker"><span class="line" data-starttime="912"><span class="speakerName">Pete LePage</span>: Yeah. </span><span class="line" data-startTime="912">Let's do it. </span><span class="line" data-startTime="913">Done. </span></p>

<p class="speaker"><span class="line" data-starttime="914"><span class="speakerName">Paul Kinlan</span>: Cool. </span><span class="line" data-startTime="915">Done. </span><span class="line" data-startTime="915">Let's ship it. </span><span class="line" data-startTime="917">I have to say, I'm not </span><span class="line" data-startTime="917">pre-announcing anything. </span><span class="line" data-startTime="921">So anyway, on that subject. </span><span class="line" data-startTime="926">So let's just jump through </span><span class="line" data-startTime="926">the code, right. </span></p>

<p class="speaker"><span class="line" data-starttime="928"><span class="speakerName">Pete LePage</span>: All right. </span></p>

<p class="speaker"><span class="line" data-starttime="929"><span class="speakerName">Paul Kinlan</span>: This is before </span><span class="line" data-startTime="929">the nitty-gritty, right. </span> <span class="line" data-startTime="930">I just want to show you the </span><span class="line" data-startTime="930">rest of the infrastructure </span><span class="line" data-startTime="932">that I've got ready </span><span class="line" data-startTime="932">for you guys. </span> <span class="line" data-startTime="934">They are doing dot onchange. </span> <span class="line" data-startTime="935">It's not the nicest way </span><span class="line" data-startTime="935">that we handle events. </span> <span class="line" data-startTime="937">But we're only going </span><span class="line" data-startTime="937">to bind to it once. </span> <span class="line" data-startTime="939">And I just thought, for brevity, </span><span class="line" data-startTime="939">it was going to be </span><span class="line" data-startTime="941">easier for everyone </span><span class="line" data-startTime="941">to understand. </span> <span class="line" data-startTime="943">When the user actually picks </span><span class="line" data-startTime="943">a directory, we get </span><span class="line" data-startTime="945">the onchange event. </span> <span class="line" data-startTime="946">In that onchange, we can get </span><span class="line" data-startTime="946">an access to list of files </span><span class="line" data-startTime="949">done by this little line of </span><span class="line" data-startTime="949">code, line 58, e.target.files. </span> <span class="line" data-startTime="954">That's a list of files inside </span><span class="line" data-startTime="954">the directory that the user </span><span class="line" data-startTime="956">has chosen. </span> <span class="line" data-startTime="957">We just iterate across them. </span> <span class="line" data-startTime="959">We take the Web Kit relative </span><span class="line" data-startTime="959">path, which gives us, </span><span class="line" data-startTime="962">basically, a relative path. </span> <span class="line" data-startTime="963">It doesn't give us the full </span><span class="line" data-startTime="963">directory structure, just the </span><span class="line" data-startTime="965">root of where it is, </span><span class="line" data-startTime="965">which is absolutely </span><span class="line" data-startTime="967">fine for a web server. </span></p>

<p><span class="line" data-startTime="968">Because we only ever deal, </span><span class="line" data-startTime="968">really, with absolute paths </span><span class="line" data-startTime="971">inside our own web app. </span> <span class="line" data-startTime="973">And then we just map that. </span> <span class="line" data-startTime="975">We take the path, map it into, </span><span class="line" data-startTime="975">basically, a hash. </span> <span class="line" data-startTime="979">So that whenever a web request </span><span class="line" data-startTime="979">comes in, I can then go and </span><span class="line" data-startTime="981">easily pick the file up from my </span><span class="line" data-startTime="981">in memory store and serve </span><span class="line" data-startTime="985">that back out to the user. </span> <span class="line" data-startTime="986">So that's all there is from </span><span class="line" data-startTime="986">actually getting access to the </span><span class="line" data-startTime="988">file system. </span> <span class="line" data-startTime="990">It's not the full file system. </span> <span class="line" data-startTime="991">It's just the directory and all </span><span class="line" data-startTime="991">the subdirectories that </span><span class="line" data-startTime="993">the user has chosen. </span> <span class="line" data-startTime="994">But we can do some </span><span class="line" data-startTime="994">nice things. </span> <span class="line" data-startTime="995">We can kind of serve them up </span><span class="line" data-startTime="995">inside our application. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="998"><span class="speakerName">Pete LePage</span>: And to be clear, </span><span class="line" data-startTime="998">this is the HTML5 file system, </span><span class="line" data-startTime="1002">or is this the file </span><span class="line" data-startTime="1002">system access that </span><span class="line" data-startTime="1004">comes with Chrome app? </span></p>

<p class="speaker"><span class="line" data-starttime="1007"><span class="speakerName">Paul Kinlan</span>: No, no. </span><span class="line" data-startTime="1007">It's neither actually. </span><span class="line" data-startTime="1008">Eh. </span><span class="line" data-startTime="1009">So we have a couple different </span><span class="line" data-startTime="1009">types of file systems living </span><span class="line" data-startTime="1012">in the user's device, </span><span class="line" data-startTime="1012">basically. </span><span class="line" data-startTime="1014">We have the HTML5 file system, </span><span class="line" data-startTime="1014">which is entirely sandboxed </span><span class="line" data-startTime="1018">and only available to the </span><span class="line" data-startTime="1018">application, in that domain, </span><span class="line" data-startTime="1022">and all the files are obfuscated </span><span class="line" data-startTime="1022">and a whole lot of </span><span class="line" data-startTime="1024">other stuff so can't go and </span><span class="line" data-startTime="1024">easily parse the files out on </span><span class="line" data-startTime="1026">the user's local machine. </span><span class="line" data-startTime="1028">We also have &mdash; </span><span class="line" data-startTime="1030">what was the second </span><span class="line" data-startTime="1030">one you asked? </span></p>

<p class="speaker"><span class="line" data-starttime="1032"><span class="speakerName">Pete LePage</span>: The Chrome </span><span class="line" data-startTime="1032">apps file system. </span></p>

<p class="speaker"><span class="line" data-starttime="1034"><span class="speakerName">Paul Kinlan</span>: Yeah, so we have </span><span class="line" data-startTime="1034">the Chrome apps file system. </span> <span class="line" data-startTime="1037">I tell you what. </span> <span class="line" data-startTime="1037">It's similar to the Chrome </span><span class="line" data-startTime="1037">apps file system API. </span> <span class="line" data-startTime="1040">The Chrome apps file system API </span><span class="line" data-startTime="1040">and the media gallery API </span><span class="line" data-startTime="1043">essentially allow you to get </span><span class="line" data-startTime="1043">elevated access to those </span><span class="line" data-startTime="1046">directories. </span> <span class="line" data-startTime="1047">So if you're using the file </span><span class="line" data-startTime="1047">system API, you can basically </span><span class="line" data-startTime="1049">say, well, the user's given </span><span class="line" data-startTime="1049">me a file, and I've got a </span><span class="line" data-startTime="1052">reference to that. </span> <span class="line" data-startTime="1053">I want to write back to it. </span> <span class="line" data-startTime="1054">And we don't need that in our </span><span class="line" data-startTime="1054">application, so we're not </span><span class="line" data-startTime="1056">using that part of the API. </span> <span class="line" data-startTime="1057">But it's using the same file </span><span class="line" data-startTime="1057">object that you get back from </span><span class="line" data-startTime="1060">the system. </span> <span class="line" data-startTime="1061">This is literally the user's </span><span class="line" data-startTime="1061">own file system itself. </span> <span class="line" data-startTime="1065">So it's pretty cool. </span> <span class="line" data-startTime="1066">It's just a file system, but </span><span class="line" data-startTime="1066">it's only the directory that </span><span class="line" data-startTime="1069">they've actually given </span><span class="line" data-startTime="1069">you access to. </span></p>

<p><span class="line" data-startTime="1071">So let's actually get into </span><span class="line" data-startTime="1071">the code, right. </span> <span class="line" data-startTime="1073">Start the onclick. </span> <span class="line" data-startTime="1074">This is the thing that's going </span><span class="line" data-startTime="1074">to start the server. </span> <span class="line" data-startTime="1076">So it's pretty simple, right? </span><span class="line" data-startTime="1077">We've already got the </span><span class="line" data-startTime="1077">permissions ready. </span> <span class="line" data-startTime="1078">So we're going to not call it </span><span class="line" data-startTime="1078">Isocket, because that's me </span><span class="line" data-startTime="1081">being silly with vim. </span> <span class="line" data-startTime="1083">We're going to create a socket </span><span class="line" data-startTime="1083">of TCP type, with no extra </span><span class="line" data-startTime="1087">information supplied. </span> <span class="line" data-startTime="1089">And then just take a function </span><span class="line" data-startTime="1089">call back, and call it </span><span class="line" data-startTime="1092">socketInfo. </span> <span class="line" data-startTime="1095">So this is the very start of the </span><span class="line" data-startTime="1095">thing that most people do </span><span class="line" data-startTime="1097">when they're building a </span><span class="line" data-startTime="1097">socket-based interface or an </span><span class="line" data-startTime="1099">application, is they need </span><span class="line" data-startTime="1099">to create the socket. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1101"><span class="speakerName">Pete LePage</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="1102"><span class="speakerName">Paul Kinlan</span>: So we need to do </span><span class="line" data-startTime="1102">a little bit more that that, </span><span class="line" data-startTime="1104">because that's not actually </span><span class="line" data-startTime="1104">doing anything. </span><span class="line" data-startTime="1107">For ease of use later on, I'm </span><span class="line" data-startTime="1107">going to bind the socket </span><span class="line" data-startTime="1111">information that we get </span><span class="line" data-startTime="1111">to a global variable. </span><span class="line" data-startTime="1114">Again, it's not the best type of </span><span class="line" data-startTime="1114">code, but it's just simple. </span><span class="line" data-startTime="1118">It works. </span></p>

<p class="speaker"><span class="line" data-starttime="1119"><span class="speakerName">Pete LePage</span>: Yeah. </span> <span class="line" data-startTime="1120">We're going to then operate our </span><span class="line" data-startTime="1120">socket to a server socket. </span> <span class="line" data-startTime="1123">So we're going to say, listen. </span> <span class="line" data-startTime="1125">And if we do listen &mdash; </span><span class="line" data-startTime="1127">oh god, sorry, I apologize. </span> <span class="line" data-startTime="1130">socketInfo.socketID. </span> <span class="line" data-startTime="1135">This is basically saying, for </span><span class="line" data-startTime="1135">the socket that we've just </span><span class="line" data-startTime="1137">created, we're going to turn </span><span class="line" data-startTime="1137">it into a server socket. </span> <span class="line" data-startTime="1140">It doesn't mean much yet, </span><span class="line" data-startTime="1140">because we haven't got an </span><span class="line" data-startTime="1142">address to bind it to. </span> <span class="line" data-startTime="1142">I'm just going to bind it to </span><span class="line" data-startTime="1142">local host on port 8081. </span> <span class="line" data-startTime="1150">This is untested now. </span> <span class="line" data-startTime="1151">So 8081, just to prove </span><span class="line" data-startTime="1151">that my demo later </span><span class="line" data-startTime="1153">on is going to work. </span> <span class="line" data-startTime="1155">And we're going to allow </span><span class="line" data-startTime="1155">20 requests to come </span><span class="line" data-startTime="1157">through at a time. </span> <span class="line" data-startTime="1158">So that's pretty much all you </span><span class="line" data-startTime="1158">have to do to get started to </span><span class="line" data-startTime="1161">make it into a server socket. </span></p>

<p><span class="line" data-startTime="1162">But the thing is, it's not that </span><span class="line" data-startTime="1163">interesting once you do that. </span> <span class="line" data-startTime="1165">You basically want to get </span><span class="line" data-startTime="1165">notification that it's all </span><span class="line" data-startTime="1167">worked and everything is fine. </span> <span class="line" data-startTime="1169">So if we've done it right, </span><span class="line" data-startTime="1169">console.log, I don't know, </span><span class="line" data-startTime="1175">listening, listen &mdash; you </span><span class="line" data-startTime="1175">know, I can't spell. </span> <span class="line" data-startTime="1178">I've found, in the past three </span><span class="line" data-startTime="1178">weeks, that my spelling is </span><span class="line" data-startTime="1182">absolutely atrocious. </span> <span class="line" data-startTime="1184">I just noticed a spelling </span><span class="line" data-startTime="1184">mistake, result. </span> <span class="line" data-startTime="1188">So basically the console will </span><span class="line" data-startTime="1188">just log the fact that we made </span><span class="line" data-startTime="1190">a connection and everything's </span><span class="line" data-startTime="1190">fine. </span> <span class="line" data-startTime="1192">If it's not fine, we'll get an </span><span class="line" data-startTime="1192">error here and an exception. </span> <span class="line" data-startTime="1195">So we won't be able to </span><span class="line" data-startTime="1195">do anything else. </span> <span class="line" data-startTime="1196">And now what we need to do is be </span><span class="line" data-startTime="1196">able to start to listen and </span><span class="line" data-startTime="1199">accept our first connection </span><span class="line" data-startTime="1199">coming in. </span></p>

<p><span class="line" data-startTime="1207">So let's just go over this a </span><span class="line" data-startTime="1207">little bit, because there's a </span><span class="line" data-startTime="1210">lot that's going on, </span><span class="line" data-startTime="1210">in a relatively </span><span class="line" data-startTime="1212">short amount of time. </span> <span class="line" data-startTime="1214">So in this case, we've made </span><span class="line" data-startTime="1214">our socket, created it. </span> <span class="line" data-startTime="1218">It's there. </span> <span class="line" data-startTime="1218">It's ready. </span> <span class="line" data-startTime="1218">The system knows about it. </span></p>

<p class="speaker"><span class="line" data-starttime="1220"><span class="speakerName">Pete LePage</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="1220"><span class="speakerName">Paul Kinlan</span>: And then we've </span><span class="line" data-startTime="1220">just said, listen. </span> <span class="line" data-startTime="1222">So the idea here normally is, </span><span class="line" data-startTime="1222">in a client application, you </span><span class="line" data-startTime="1224">do connect. </span> <span class="line" data-startTime="1226">You create a socket and then </span><span class="line" data-startTime="1226">you connect to a remote </span><span class="line" data-startTime="1228">service or you send some </span><span class="line" data-startTime="1228">data via a UDP request. </span> <span class="line" data-startTime="1231">That's not what we're doing. </span> <span class="line" data-startTime="1232">That's a client application. </span> <span class="line" data-startTime="1233">This is service application, </span><span class="line" data-startTime="1233">a server application. </span> <span class="line" data-startTime="1235">So we're just saying listen on </span><span class="line" data-startTime="1235">port &mdash; well, listen on IP </span><span class="line" data-startTime="1238">address 127.0.0.1 </span><span class="line" data-startTime="1238">on port 8081. </span></p>

<p><span class="line" data-startTime="1243">Now I've hard coded in 127, </span><span class="line" data-startTime="1243">just because it just </span><span class="line" data-startTime="1247">illustrates the point. </span> <span class="line" data-startTime="1248">You can actually get a list of </span><span class="line" data-startTime="1248">the network interfaces and let </span><span class="line" data-startTime="1251">the user choose which </span><span class="line" data-startTime="1251">IP address. </span></p>

<p class="speaker"><span class="line" data-starttime="1253"><span class="speakerName">Pete LePage</span>: Which IP address </span><span class="line" data-startTime="1253">they want or which network </span><span class="line" data-startTime="1255">adapter they want </span><span class="line" data-startTime="1255">to listen on. </span></p>

<p class="speaker"><span class="line" data-starttime="1257"><span class="speakerName">Paul Kinlan</span>: Yeah, essentially, </span><span class="line" data-startTime="1257">yeah. </span><span class="line" data-startTime="1258">So that then lets you </span><span class="line" data-startTime="1258">get the IP address. </span><span class="line" data-startTime="1260">And then you can listen on a </span><span class="line" data-startTime="1260">public IP address if your </span><span class="line" data-startTime="1263">browser was &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1265"><span class="speakerName">Pete LePage</span>: Multi-homed or </span><span class="line" data-startTime="1265">something like that, yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1268"><span class="speakerName">Paul Kinlan</span>: But I mean </span><span class="line" data-startTime="1268">normally, if you've got a </span><span class="line" data-startTime="1269">local network and you want to </span><span class="line" data-startTime="1269">try connect to it, then you </span><span class="line" data-startTime="1271">can bind to your Ethernet card </span><span class="line" data-startTime="1271">or your WiFi adapter and then </span><span class="line" data-startTime="1274">have the requests come in. </span></p>

<p class="speaker"><span class="line" data-starttime="1275"><span class="speakerName">Pete LePage</span>: Well this could be </span><span class="line" data-startTime="1275">an interesting scenario for </span><span class="line" data-startTime="1277">those people who want to write </span><span class="line" data-startTime="1277">a proxy server at home &mdash; and </span><span class="line" data-startTime="1281">have a proxy server sit at home, </span><span class="line" data-startTime="1281">that they could go and </span><span class="line" data-startTime="1284">just basically write something </span><span class="line" data-startTime="1284">that proxies out network </span><span class="line" data-startTime="1287">connections effectively. </span></p>

<p class="speaker"><span class="line" data-starttime="1290"><span class="speakerName">Paul Kinlan</span>: Yeah, you could </span><span class="line" data-startTime="1290">actually do that. </span><span class="line" data-startTime="1292">That's actually pretty cool. </span></p>

<p class="speaker"><span class="line" data-starttime="1293"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1294"><span class="speakerName">Paul Kinlan</span>: Yeah, and that's </span><span class="line" data-startTime="1294">all done by JavaScript HTML. </span></p>

<p class="speaker"><span class="line" data-starttime="1296"><span class="speakerName">Pete LePage</span>: Exactly. </span> <span class="line" data-startTime="1298">So one of things I want to call </span><span class="line" data-startTime="1298">out here that, when I </span><span class="line" data-startTime="1301">first started writing some of </span><span class="line" data-startTime="1301">these network connection </span><span class="line" data-startTime="1302">things, it took me a second to </span><span class="line" data-startTime="1302">go, oh, great, I love this. </span> <span class="line" data-startTime="1307">You do get into a bit of </span><span class="line" data-startTime="1307">call back fun, right? </span><span class="line" data-startTime="1311">So on the create, it actually </span><span class="line" data-startTime="1311">has a call back that says, </span><span class="line" data-startTime="1315">once it's created, call </span><span class="line" data-startTime="1315">this function. </span> <span class="line" data-startTime="1318">Then, once you've created the </span><span class="line" data-startTime="1318">socket, then you actually have </span><span class="line" data-startTime="1321">to tell the socket what to do. </span> <span class="line" data-startTime="1324">So you actually have to go </span><span class="line" data-startTime="1324">and work with a couple of </span><span class="line" data-startTime="1328">different pieces. </span> <span class="line" data-startTime="1329">So when you look at this, </span><span class="line" data-startTime="1329">remember, to think through, </span><span class="line" data-startTime="1333">OK, what's this call </span><span class="line" data-startTime="1333">back going to do? </span><span class="line" data-startTime="1335">How's this going to work, </span><span class="line" data-startTime="1335">in each of these pieces? </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1339"><span class="speakerName">Paul Kinlan</span>: I think that's the </span><span class="line" data-startTime="1339">important thing, right? </span><span class="line" data-startTime="1341">We're just using the call backs </span><span class="line" data-startTime="1341">here because it keeps </span><span class="line" data-startTime="1344">everything in one lump. </span><span class="line" data-startTime="1345">You probably want </span><span class="line" data-startTime="1345">to do a bind. </span><span class="line" data-startTime="1346">And you basically just pass </span><span class="line" data-startTime="1346">everything, like marginalize </span><span class="line" data-startTime="1349">your JavaScript a little </span><span class="line" data-startTime="1349">better than </span><span class="line" data-startTime="1351">we're going to do today. </span><span class="line" data-startTime="1352">Basically just bind and let the </span><span class="line" data-startTime="1352">the object and scope flow </span><span class="line" data-startTime="1356">through to function calls . </span><span class="line" data-startTime="1357">The interesting thing is that </span><span class="line" data-startTime="1357">this is a common problem that </span><span class="line" data-startTime="1361">JavaScript developers do. </span><span class="line" data-startTime="1362">And if you're using Node, for </span><span class="line" data-startTime="1362">instance, there's a whole of </span><span class="line" data-startTime="1364">NPM modules, which I try to make </span><span class="line" data-startTime="1364">asynchronous call back </span><span class="line" data-startTime="1368">management a lot easier. </span><span class="line" data-startTime="1371">Can I call that an </span><span class="line" data-startTime="1371">open challenge? </span></p>

<p class="speaker"><span class="line" data-starttime="1373"><span class="speakerName">Pete LePage</span>: Absolutely. </span></p>

<p class="speaker"><span class="line" data-starttime="1374"><span class="speakerName">Paul Kinlan</span>: I don't know. </span> <span class="line" data-startTime="1375">I don't know how I'm going </span><span class="line" data-startTime="1375">to do this just yet. </span> <span class="line" data-startTime="1377">But I would absolutely love to </span><span class="line" data-startTime="1377">see, now that we're getting </span><span class="line" data-startTime="1380">some parity between the features </span><span class="line" data-startTime="1380">and functionality </span><span class="line" data-startTime="1382">available on Node.js, is if we </span><span class="line" data-startTime="1382">can leverage some of the </span><span class="line" data-startTime="1385">functionality that people have </span><span class="line" data-startTime="1385">built in to Node, whether it's </span><span class="line" data-startTime="1388">connect, even like the web </span><span class="line" data-startTime="1388">socket servers and all this </span><span class="line" data-startTime="1392">type of stuff. </span> <span class="line" data-startTime="1394">All these functions, if we can </span><span class="line" data-startTime="1394">write in a light wrapper </span><span class="line" data-startTime="1396">around the APIs that are in </span><span class="line" data-startTime="1396">Node, that will be brilliant. </span> <span class="line" data-startTime="1399">If you just get them imported </span><span class="line" data-startTime="1399">into Chrome. </span> <span class="line" data-startTime="1400">And then we've got a similar </span><span class="line" data-startTime="1400">ecosystem across the server </span><span class="line" data-startTime="1403">and then also across </span><span class="line" data-startTime="1403">the browser. </span> <span class="line" data-startTime="1405">What you know is your server </span><span class="line" data-startTime="1405">inside the browser, which on </span><span class="line" data-startTime="1409">the client would be </span><span class="line" data-startTime="1409">pretty powerful. </span> <span class="line" data-startTime="1410">And then we've got big ecosystem </span><span class="line" data-startTime="1410">of application </span><span class="line" data-startTime="1413">functionality then available </span><span class="line" data-startTime="1413">to developers. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1415"><span class="speakerName">Pete LePage</span>: Yes. </span></p>

<p class="speaker"><span class="line" data-starttime="1416"><span class="speakerName">Paul Kinlan</span>: It would be cool. </span><span class="line" data-startTime="1417">Get Meteor on. </span><span class="line" data-startTime="1417">That would be brilliant, Meteor </span><span class="line" data-startTime="1417">in the browser talking </span><span class="line" data-startTime="1419">to the browser. </span></p>

<p class="speaker"><span class="line" data-starttime="1419"><span class="speakerName">Pete LePage</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="1420"><span class="speakerName">Paul Kinlan</span>: Sweet. </span><span class="line" data-startTime="1423">Yeah, I was going to say I'll </span><span class="line" data-startTime="1423">buy someone an Nexus </span><span class="line" data-startTime="1425">7 if they do that. </span><span class="line" data-startTime="1426">But I don't think I'm </span><span class="line" data-startTime="1426">allowed to say that. </span></p>

<p class="speaker"><span class="line" data-starttime="1427"><span class="speakerName">Pete LePage</span>: No, probably not. </span><span class="line" data-startTime="1429">Well, unless you wanted to buy </span><span class="line" data-startTime="1429">yourself an extra set &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1431"><span class="speakerName">Paul Kinlan</span>: I would buy </span><span class="line" data-startTime="1431">it myself, actually. </span><span class="line" data-startTime="1432">If someone did it, and they did </span><span class="line" data-startTime="1432">it I'd buy them a Nexus 7. </span></p>

<p class="speaker"><span class="line" data-starttime="1437"><span class="speakerName">Pete LePage</span>: So just to be </span><span class="line" data-startTime="1437">clear, it's not a promise. </span><span class="line" data-startTime="1440">But I think if they show </span><span class="line" data-startTime="1440">something pretty cool, I think </span><span class="line" data-startTime="1443">there might be some good </span><span class="line" data-startTime="1443">recognition for them. </span></p>

<p class="speaker"><span class="line" data-starttime="1447"><span class="speakerName">Paul Kinlan</span>: Yes. </span><span class="line" data-startTime="1448">Definitely. </span></p>

<p class="speaker"><span class="line" data-starttime="1451"><span class="speakerName">Pete LePage</span>: All right, so let's </span><span class="line" data-startTime="1451">hop back into this code. </span></p>

<p class="speaker"><span class="line" data-starttime="1453"><span class="speakerName">Paul Kinlan</span>: Yeah, I'm trying </span><span class="line" data-startTime="1453">to work out how much trouble </span><span class="line" data-startTime="1454">that we're going to be in. </span><span class="line" data-startTime="1455">Well, I'm going to be in now. </span></p>

<p class="speaker"><span class="line" data-starttime="1457"><span class="speakerName">Pete LePage</span>: Eh. </span></p>

<p class="speaker"><span class="line" data-starttime="1458"><span class="speakerName">Paul Kinlan</span>: So let's </span><span class="line" data-startTime="1458">jump in, right. </span><span class="line" data-startTime="1459">So we got the connection. </span><span class="line" data-startTime="1460">And I'm really sorry </span><span class="line" data-startTime="1460">about going up and </span><span class="line" data-startTime="1462">down through the code. </span><span class="line" data-startTime="1463">I just made a little </span><span class="line" data-startTime="1463">mistake then. </span><span class="line" data-startTime="1466">So I'll just jump in, right. </span><span class="line" data-startTime="1468">Let's split the window, so </span><span class="line" data-startTime="1468">you can see the code. </span><span class="line" data-startTime="1471">This is why I like </span><span class="line" data-startTime="1471">vim It's cool. </span><span class="line" data-startTime="1474">But also your preferred text </span><span class="line" data-startTime="1474">editor is also cool. </span><span class="line" data-startTime="1477">I'm not going to get into </span><span class="line" data-startTime="1477">a war about this. </span></p>

<p class="speaker"><span class="line" data-starttime="1479"><span class="speakerName">Pete LePage</span>: I was </span><span class="line" data-startTime="1479">going to say, I </span><span class="line" data-startTime="1480">think Sublime is awesome. </span><span class="line" data-startTime="1481">But you know. </span></p>

<p class="speaker"><span class="line" data-starttime="1482"><span class="speakerName">Paul Kinlan</span>: Yeah, I know. </span></p>

<p class="speaker"><span class="line" data-starttime="1484"><span class="speakerName">Pete LePage</span>: Whatever </span><span class="line" data-startTime="1484">floats your boat. </span><span class="line" data-startTime="1485">Actually while you get yourself </span><span class="line" data-startTime="1485">set up there, I do </span><span class="line" data-startTime="1489">want to mention one </span><span class="line" data-startTime="1489">thing real quick. </span><span class="line" data-startTime="1490">If people who are watching this </span><span class="line" data-startTime="1490">have questions, they want </span><span class="line" data-startTime="1493">to know maybe a little bit </span><span class="line" data-startTime="1493">deeper, please post your </span><span class="line" data-startTime="1496">questions on Moderator. </span><span class="line" data-startTime="1497">The link is there on </span><span class="line" data-startTime="1497">screen right now. </span><span class="line" data-startTime="1499">You can just go to Moderator </span><span class="line" data-startTime="1499">and post a few questions. </span><span class="line" data-startTime="1503">And we'll take those questions </span><span class="line" data-startTime="1503">as we get towards the end of </span><span class="line" data-startTime="1505">the session today. </span></p>

<p class="speaker"><span class="line" data-starttime="1506"><span class="speakerName">Paul Kinlan</span>: Yeah, that's </span><span class="line" data-startTime="1506">pretty cool. </span><span class="line" data-startTime="1507">We've got one or two &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1508"><span class="speakerName">Pete LePage</span>: Yeah, we got </span><span class="line" data-startTime="1508">a couple good ones. </span></p>

<p class="speaker"><span class="line" data-starttime="1510"><span class="speakerName">Paul Kinlan</span>: Which we will be </span><span class="line" data-startTime="1510">able to answer as well. </span><span class="line" data-startTime="1512">They're going to be good. </span></p>

<p class="speaker"><span class="line" data-starttime="1513"><span class="speakerName">Pete LePage</span>: Absolutely. </span><span class="line" data-startTime="1514">So stay tuned. </span></p>

<p class="speaker"><span class="line" data-starttime="1516"><span class="speakerName">Paul Kinlan</span>: Let's go </span><span class="line" data-startTime="1516">back to the code. </span><span class="line" data-startTime="1520">I apologize, two </span><span class="line" data-startTime="1520">seconds, again. </span><span class="line" data-startTime="1523">Hey. </span></p>

<p class="speaker"><span class="line" data-starttime="1523"><span class="speakerName">Pete LePage</span>: 1, 1,000, </span><span class="line" data-startTime="1523">2, 1,000. </span><span class="line" data-startTime="1526">I'm going to give you trouble. </span></p>

<p class="speaker"><span class="line" data-starttime="1528"><span class="speakerName">Paul Kinlan</span>: Yeah, dude. </span><span class="line" data-startTime="1529">I'm ready. </span><span class="line" data-startTime="1529">Don't worry. </span></p>

<p class="speaker"><span class="line" data-starttime="1530"><span class="speakerName">Pete LePage</span>: All right, </span><span class="line" data-startTime="1530">all you then. </span></p>

<p class="speaker"><span class="line" data-starttime="1533"><span class="speakerName">Paul Kinlan</span>: I was adding </span><span class="line" data-startTime="1533">to the suspense. </span> <span class="line" data-startTime="1534">So we talked about it before, </span><span class="line" data-startTime="1534">socket.accept. </span> <span class="line" data-startTime="1536">accept takes a connection that's </span><span class="line" data-startTime="1536">come in, off the queue, </span><span class="line" data-startTime="1540">and then allows you </span><span class="line" data-startTime="1540">to process it. </span> <span class="line" data-startTime="1541">So in theory, we </span><span class="line" data-startTime="1541">have this here. </span> <span class="line" data-startTime="1544">So we say, I need to accept the </span><span class="line" data-startTime="1544">connection that's coming </span><span class="line" data-startTime="1546">from the particular socket </span><span class="line" data-startTime="1546">that we've created. </span> <span class="line" data-startTime="1549">And there's a call back </span><span class="line" data-startTime="1549">called onaccept. </span> <span class="line" data-startTime="1551">And we're going to jump </span><span class="line" data-startTime="1551">to onaccept now </span><span class="line" data-startTime="1552">and fill that out. </span></p>

<p><span class="line" data-startTime="1553">Because what actually happens </span><span class="line" data-startTime="1553">is kind of interesting. </span> <span class="line" data-startTime="1557">It's part of the API. </span> <span class="line" data-startTime="1558">And it's something that I found </span><span class="line" data-startTime="1558">a little bit confusing, </span><span class="line" data-startTime="1560">when I first played with </span><span class="line" data-startTime="1560">it, is you can </span><span class="line" data-startTime="1561">only call accept once. </span> <span class="line" data-startTime="1563">And you can only process </span><span class="line" data-startTime="1563">one request that's </span><span class="line" data-startTime="1565">come in at a time. </span> <span class="line" data-startTime="1566">So it's very single threaded </span><span class="line" data-startTime="1566">in this sense. </span> <span class="line" data-startTime="1569">So if you're doing a whole lot </span><span class="line" data-startTime="1569">of processing and someone's </span><span class="line" data-startTime="1570">uploaded a big file to your </span><span class="line" data-startTime="1570">socket, then what you should </span><span class="line" data-startTime="1574">really do is try and delegate </span><span class="line" data-startTime="1574">that work off to a web worker </span><span class="line" data-startTime="1579">or something similar to that, </span><span class="line" data-startTime="1579">very much like you do in Node, </span><span class="line" data-startTime="1581">essentially, just maintain the </span><span class="line" data-startTime="1581">asychrononicity at least. </span> <span class="line" data-startTime="1585">onaccept is the call back that </span><span class="line" data-startTime="1585">happens when we know we've got </span><span class="line" data-startTime="1587">some data that's come back in. </span></p>

<p><span class="line" data-startTime="1589">So the very first time we do </span><span class="line" data-startTime="1589">this, there's going to be </span><span class="line" data-startTime="1591">nothing happening. </span> <span class="line" data-startTime="1592">Because I haven't gone back </span><span class="line" data-startTime="1592">to my browser and </span><span class="line" data-startTime="1593">actually made a request. </span> <span class="line" data-startTime="1595">When I do make a request, </span><span class="line" data-startTime="1595">onaccept will be called. </span> <span class="line" data-startTime="1598">And what we need to do is we </span><span class="line" data-startTime="1598">need to jump up to my previous </span><span class="line" data-startTime="1600">window and start filling </span><span class="line" data-startTime="1600">this out. </span> <span class="line" data-startTime="1603">Now what we do here is, </span><span class="line" data-startTime="1603">actually, we read the data </span><span class="line" data-startTime="1606">from the socket into </span><span class="line" data-startTime="1606">our application. </span> <span class="line" data-startTime="1610">I mean, we don't have to. </span> <span class="line" data-startTime="1612">But otherwise, it would </span><span class="line" data-startTime="1612">be a pretty rubbish </span><span class="line" data-startTime="1612">application, right? </span><span class="line" data-startTime="1613">So what we're going to do is </span><span class="line" data-startTime="1613">we're going to call a simple &mdash; </span><span class="line" data-startTime="1615">and there's a lot </span><span class="line" data-startTime="1615">of code in here. </span> <span class="line" data-startTime="1616">So please follow along. </span></p>

<p><span class="line" data-startTime="1620">It's going to be </span><span class="line" data-startTime="1620">a bit awkward. </span> <span class="line" data-startTime="1620">So acceptInfo.socketID </span><span class="line" data-startTime="1620">function readInfo. </span> <span class="line" data-startTime="1627">And this is where you're going </span><span class="line" data-startTime="1627">to see all the call backs that </span><span class="line" data-startTime="1630">we mentioned earlier on. </span></p>

<p class="speaker"><span class="line" data-starttime="1631"><span class="speakerName">Pete LePage</span>: Oh goody. </span><span class="line" data-startTime="1632">Oh goody. </span></p>

<p class="speaker"><span class="line" data-starttime="1633"><span class="speakerName">Paul Kinlan</span>: Yeah, </span><span class="line" data-startTime="1633">it's awesome. </span> <span class="line" data-startTime="1634">So what we've done here is, now </span><span class="line" data-startTime="1634">that we know that we've </span><span class="line" data-startTime="1636">been called, a connection has </span><span class="line" data-startTime="1636">been made to our server, we </span><span class="line" data-startTime="1640">say, we'll need to read </span><span class="line" data-startTime="1640">from the socket. </span> <span class="line" data-startTime="1642">Notice how we are using </span><span class="line" data-startTime="1642">acceptInfo socket, not </span><span class="line" data-startTime="1646">socketInfo as the variable. </span> <span class="line" data-startTime="1647">This is because the actual </span><span class="line" data-startTime="1647">request that's come in </span><span class="line" data-startTime="1651">basically isn't on the same </span><span class="line" data-startTime="1651">socket as the one that you're </span><span class="line" data-startTime="1653">listening on. </span> <span class="line" data-startTime="1654">The way that underlined system </span><span class="line" data-startTime="1654">works is it delegates it back </span><span class="line" data-startTime="1656">off to the system. </span> <span class="line" data-startTime="1657">And there's a separate channel </span><span class="line" data-startTime="1657">that enables you to </span><span class="line" data-startTime="1659">communicate back </span><span class="line" data-startTime="1659">to the service. </span> <span class="line" data-startTime="1660">So we've got a different </span><span class="line" data-startTime="1660">socket. </span></p>

<p><span class="line" data-startTime="1663">So that's fine. </span> <span class="line" data-startTime="1664">We'll read through it. </span> <span class="line" data-startTime="1665">We call a read. </span> <span class="line" data-startTime="1666">And, in theory, what you'd </span><span class="line" data-startTime="1666">see here now is &mdash; </span><span class="line" data-startTime="1670">I'm just going to put </span><span class="line" data-startTime="1670">it in so we know &mdash; </span><span class="line" data-startTime="1673">is you would see all the data </span><span class="line" data-startTime="1673">that's come back in. </span> <span class="line" data-startTime="1676">readInfo itself has got </span><span class="line" data-startTime="1676">a data property. </span> <span class="line" data-startTime="1678">So let's just get it off. </span> <span class="line" data-startTime="1681">Actually, let's convert </span><span class="line" data-startTime="1681">it to a string first. </span> <span class="line" data-startTime="1683">arrayBufferToString. </span> <span class="line" data-startTime="1686">And this is a function that </span><span class="line" data-startTime="1686">I've made myself. </span> <span class="line" data-startTime="1689">It's not in the call </span><span class="line" data-startTime="1689">library system. </span> <span class="line" data-startTime="1691">But there we go, right. </span> <span class="line" data-startTime="1691">So the idea behind this now is </span><span class="line" data-startTime="1691">that we've gone through, got </span><span class="line" data-startTime="1695">the data out, called </span><span class="line" data-startTime="1696">arrayBufferToString, which is here. </span> <span class="line" data-startTime="1701">We basically take the </span><span class="line" data-startTime="1701">array buffer, </span><span class="line" data-startTime="1702">convert it to a string. </span> <span class="line" data-startTime="1704">And the reason why we </span><span class="line" data-startTime="1704">do this is because &mdash; </span><span class="line" data-startTime="1706">wait for it &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1707"><span class="speakerName">Pete LePage</span>: I'm waiting. </span><span class="line" data-startTime="1708">I'm waiting. </span></p>

<p class="speaker"><span class="line" data-starttime="1709"><span class="speakerName">Paul Kinlan</span>: We need </span><span class="line" data-startTime="1709">to read from it. </span> <span class="line" data-startTime="1711">So what I do is I say &mdash; yeah, </span><span class="line" data-startTime="1711">it's exciting &mdash; indexOf. </span> <span class="line" data-startTime="1716">So we need to find the very </span><span class="line" data-startTime="1716">first part of the string. </span> <span class="line" data-startTime="1719">I'm going to put a </span><span class="line" data-startTime="1719">space in there, </span><span class="line" data-startTime="1720">because it could be wrong. </span> <span class="line" data-startTime="1723">Equals 0. </span> <span class="line" data-startTime="1724">And this is basically the HTTP </span><span class="line" data-startTime="1724">header that we've got back in. </span> <span class="line" data-startTime="1728">So we are reading from </span><span class="line" data-startTime="1728">the request. </span> <span class="line" data-startTime="1729">We're assuming that it's </span><span class="line" data-startTime="1729">a HTTP request. </span> <span class="line" data-startTime="1732">When it is a HTTP request, the </span><span class="line" data-startTime="1732">very first set of characters </span><span class="line" data-startTime="1735">in the string are the </span><span class="line" data-startTime="1735">actual method </span><span class="line" data-startTime="1738">that's going to be called. </span> <span class="line" data-startTime="1739">Not the underlined method, but </span><span class="line" data-startTime="1739">the post, get, put, delete, </span><span class="line" data-startTime="1743">all those types things. </span> <span class="line" data-startTime="1744">And in this case, we're </span><span class="line" data-startTime="1744">just going to look </span><span class="line" data-startTime="1745">for the word, get. </span></p>

<p><span class="line" data-startTime="1747">We're not going to handle </span><span class="line" data-startTime="1747">anything else. </span> <span class="line" data-startTime="1750">That's pretty cool. </span> <span class="line" data-startTime="1751">So if we get the word, get, </span><span class="line" data-startTime="1751">there, there's a strong </span><span class="line" data-startTime="1753">likelihood, at least, that the </span><span class="line" data-startTime="1753">data is a HTTP request. </span> <span class="line" data-startTime="1758">So let's parse it a </span><span class="line" data-startTime="1758">little bit more. </span> <span class="line" data-startTime="1759">And I'm going to take a whole </span><span class="line" data-startTime="1759">lot of liberties with this. </span> <span class="line" data-startTime="1764">We're going to get the </span><span class="line" data-startTime="1764">end of the URI. </span> <span class="line" data-startTime="1769">So the thing that comes after </span><span class="line" data-startTime="1769">the get request &mdash; </span><span class="line" data-startTime="1771">and I'm sorry for doing </span><span class="line" data-startTime="1771">an HTTP 101 here &mdash; </span><span class="line" data-startTime="1776">is actually the URL that </span><span class="line" data-startTime="1776">you're fetching. </span></p>

<p><span class="line" data-startTime="1779">So just substring uriEnd. </span> <span class="line" data-startTime="1782">So we're just going </span><span class="line" data-startTime="1782">to parse this out. </span> <span class="line" data-startTime="1784">And we're going to just assume </span><span class="line" data-startTime="1784">that it all works. </span> <span class="line" data-startTime="1786">And we're then going to get </span><span class="line" data-startTime="1786">the file from filesMap. </span> <span class="line" data-startTime="1791">That's what we said before. </span> <span class="line" data-startTime="1792">When we clicked on the </span><span class="line" data-startTime="1792">directory, like the file </span><span class="line" data-startTime="1794">picker button we have </span><span class="line" data-startTime="1794">the ability </span><span class="line" data-startTime="1799">to select the directory. </span> <span class="line" data-startTime="1800">We take all those files in that </span><span class="line" data-startTime="1800">directory and store them </span><span class="line" data-startTime="1802">in a hash with the URL, </span><span class="line" data-startTime="1802">basically, of </span><span class="line" data-startTime="1805">the local file system. </span> <span class="line" data-startTime="1806">And then we map that </span><span class="line" data-startTime="1806">on, using this. </span> <span class="line" data-startTime="1808">So what we'll see here is, if </span><span class="line" data-startTime="1808">a web request comes into our </span><span class="line" data-startTime="1812">server, forward slash index </span><span class="line" data-startTime="1812">dot HTML, we'll see that. </span></p>

<p><span class="line" data-startTime="1816">We'll get the URI out. </span> <span class="line" data-startTime="1817">And then we'll look for a file </span><span class="line" data-startTime="1817">called index dot HTML in our </span><span class="line" data-startTime="1820">memory collection of files. </span> <span class="line" data-startTime="1823">Which is pretty cool. </span> <span class="line" data-startTime="1823">And then this is going to </span><span class="line" data-startTime="1823">look silly, because it </span><span class="line" data-startTime="1827">doesn't exist yet. </span> <span class="line" data-startTime="1828">But write response is a function </span><span class="line" data-startTime="1828">that we've made. </span> <span class="line" data-startTime="1833">Info.socketId file. </span> <span class="line" data-startTime="1838">This is just a function </span><span class="line" data-startTime="1838">that we've made. </span> <span class="line" data-startTime="1838">And we're going to </span><span class="line" data-startTime="1838">go to it now. </span></p>

<p class="speaker"><span class="line" data-starttime="1841"><span class="speakerName">Pete LePage</span>: So before </span><span class="line" data-startTime="1841">you pop down there. </span><span class="line" data-startTime="1846">Where you've got your file, </span><span class="line" data-startTime="1846">when you went to hit your </span><span class="line" data-startTime="1848">semicolon, you actually </span><span class="line" data-startTime="1848">got an A in there, at </span><span class="line" data-startTime="1851">the end of that line. </span></p>

<p class="speaker"><span class="line" data-starttime="1852"><span class="speakerName">Paul Kinlan</span>: Dude, thank </span><span class="line" data-startTime="1852">you very much. </span></p>

<p class="speaker"><span class="line" data-starttime="1853"><span class="speakerName">Pete LePage</span>: Wow, </span><span class="line" data-startTime="1853">now we got an R. </span></p>

<p class="speaker"><span class="line" data-starttime="1855"><span class="speakerName">Paul Kinlan</span>: It's gone now. </span><span class="line" data-startTime="1856">It should be there. </span></p>

<p class="speaker"><span class="line" data-starttime="1856"><span class="speakerName">Pete LePage</span>: Now </span><span class="line" data-startTime="1856">write200Response. </span><span class="line" data-startTime="1859">Now why is it write200Response </span><span class="line" data-startTime="1859">versus writeResponse? </span></p>

<p class="speaker"><span class="line" data-starttime="1864"><span class="speakerName">Paul Kinlan</span>: Basically, it was </span><span class="line" data-startTime="1864">just the way I decided to try </span><span class="line" data-startTime="1865">and structure the application. </span><span class="line" data-startTime="1867">I was going to say that, if I </span><span class="line" data-startTime="1867">can't find the file, I would </span><span class="line" data-startTime="1869">try and write a 400 response, </span><span class="line" data-startTime="1869">going out. </span><span class="line" data-startTime="1873">From the verbosity of it, it </span><span class="line" data-startTime="1873">made sense when I was looking </span><span class="line" data-startTime="1875">at it, just to say </span><span class="line" data-startTime="1875">write200Response. </span><span class="line" data-startTime="1878">writeResponse with a status code </span><span class="line" data-startTime="1878">would probably be better. </span></p>

<p class="speaker"><span class="line" data-starttime="1881"><span class="speakerName">Pete LePage</span>: Fair enough. </span><span class="line" data-startTime="1882">OK. </span></p>

<p class="speaker"><span class="line" data-starttime="1882"><span class="speakerName">Paul Kinlan</span>: No, we </span><span class="line" data-startTime="1882">can refer to this. </span><span class="line" data-startTime="1883">And if anyone wants to take the </span><span class="line" data-startTime="1883">code, fork it, and make it </span><span class="line" data-startTime="1885">look a lot nicer, then </span><span class="line" data-startTime="1885">super-fine by me. </span></p>

<p class="speaker"><span class="line" data-starttime="1889"><span class="speakerName">Pete LePage</span>: That would </span><span class="line" data-startTime="1889">be super cool. </span></p>

<p class="speaker"><span class="line" data-starttime="1890"><span class="speakerName">Paul Kinlan</span>: This </span><span class="line" data-startTime="1890">is our function. </span> <span class="line" data-startTime="1892">We take the socketID. </span> <span class="line" data-startTime="1893">So the socketID, this is the </span><span class="line" data-startTime="1893">network socket the network </span><span class="line" data-startTime="1896">port that we're going to write </span><span class="line" data-startTime="1896">back to the client, write back </span><span class="line" data-startTime="1899">to the web browser </span><span class="line" data-startTime="1899">with the data on. </span> <span class="line" data-startTime="1903">So we have the file. </span> <span class="line" data-startTime="1905">We're going to work out </span><span class="line" data-startTime="1905">the contentType. </span> <span class="line" data-startTime="1906">Luckily the file object, in </span><span class="line" data-startTime="1906">a lot of cases, has the </span><span class="line" data-startTime="1908">contentType on. </span> <span class="line" data-startTime="1910">I'd just assume that, if the </span><span class="line" data-startTime="1910">contentType doesn't exist, </span><span class="line" data-startTime="1912">it's called text plain. </span></p>

<p><span class="line" data-startTime="1914">That's probably not the best </span><span class="line" data-startTime="1914">assumption, but it was </span><span class="line" data-startTime="1916">reasonable. </span> <span class="line" data-startTime="1918">contentLength, you're a good </span><span class="line" data-startTime="1918">web citizen if put the </span><span class="line" data-startTime="1921">contentLength on. </span> <span class="line" data-startTime="1922">So we get the file size. </span> <span class="line" data-startTime="1923">So the actual size of the </span><span class="line" data-startTime="1923">file is stored in </span><span class="line" data-startTime="1925">the file system object. </span> <span class="line" data-startTime="1926">It's pretty cool. </span> <span class="line" data-startTime="1928">And then we do this thing </span><span class="line" data-startTime="1928">called header. </span> <span class="line" data-startTime="1929">We make a header. </span> <span class="line" data-startTime="1930">And the reason why is because, </span><span class="line" data-startTime="1930">when you do a network </span><span class="line" data-startTime="1932">response, you have to put a </span><span class="line" data-startTime="1932">HTTP header at the top. </span> <span class="line" data-startTime="1935">And then you also, at the </span><span class="line" data-startTime="1935">bottom, you have to then put </span><span class="line" data-startTime="1937">the file contents. </span></p>

<p><span class="line" data-startTime="1937">And the HTTP header basically </span><span class="line" data-startTime="1937">says what type of protocol </span><span class="line" data-startTime="1940">you're using, whether </span><span class="line" data-startTime="1940">it's HTTP1, 1.1. </span> <span class="line" data-startTime="1943">The status code, 200 </span><span class="line" data-startTime="1943">in this case &mdash; </span><span class="line" data-startTime="1947">200 is success and </span><span class="line" data-startTime="1947">the word, OK. </span> <span class="line" data-startTime="1949">And then some extra </span><span class="line" data-startTime="1949">information, like </span><span class="line" data-startTime="1950">contentLength and contentType. </span> <span class="line" data-startTime="1952">Now we're using the inverse </span><span class="line" data-startTime="1952">of a stringToArrayBuffer &mdash; </span><span class="line" data-startTime="1956">oh sorry. </span> <span class="line" data-startTime="1957">PETE LEPAGE:arrayToStringBuffer. </span> <span class="line" data-startTime="1959">We're using stringToArrayBuffer. </span></p>

<p class="speaker"><span class="line" data-starttime="1960"><span class="speakerName">Paul Kinlan</span>: We're now making </span><span class="line" data-startTime="1960">an array buffer. </span> <span class="line" data-startTime="1962">So it's converting this single </span><span class="line" data-startTime="1962">string that we've got, which </span><span class="line" data-startTime="1964">is a collection of the header </span><span class="line" data-startTime="1964">information, essentially. </span> <span class="line" data-startTime="1968">Two, we're take basically taking </span><span class="line" data-startTime="1968">that data, making an </span><span class="line" data-startTime="1970">array buffer, so that we can </span><span class="line" data-startTime="1970">send that out to the client. </span> <span class="line" data-startTime="1974">Now the interesting thing, and </span><span class="line" data-startTime="1974">the way I've done this &mdash; and </span><span class="line" data-startTime="1977">it's probably not the best </span><span class="line" data-startTime="1977">way, again &mdash; is I've just </span><span class="line" data-startTime="1979">assumed that I want to </span><span class="line" data-startTime="1979">glob all the data &mdash; </span><span class="line" data-startTime="1981">the header and the response &mdash; </span><span class="line" data-startTime="1981">into one write. </span> <span class="line" data-startTime="1984">I don't have to do that. </span> <span class="line" data-startTime="1985">I probably shouldn't </span><span class="line" data-startTime="1985">do that that way. </span> <span class="line" data-startTime="1988">Anyway you have an output </span><span class="line" data-startTime="1988">buffer, which is the </span><span class="line" data-startTime="1990">combination of the HTTP header </span><span class="line" data-startTime="1990">and the actual file body </span><span class="line" data-startTime="1993">itself, the raw file data that </span><span class="line" data-startTime="1993">we're going to pull back in. </span> <span class="line" data-startTime="1996">Now we have this. </span> <span class="line" data-startTime="1998">Excuse me. </span></p>

<p><span class="line" data-startTime="1999">So we have the view. </span> <span class="line" data-startTime="2000">The view is basically just the </span><span class="line" data-startTime="2000">way that you can actually put </span><span class="line" data-startTime="2003">data into an array buffer. </span> <span class="line" data-startTime="2004">You can't put data into an array </span><span class="line" data-startTime="2004">buffer directly, so we </span><span class="line" data-startTime="2006">have to do some work. </span> <span class="line" data-startTime="2008">The array buffer itself </span><span class="line" data-startTime="2008">is the header length </span><span class="line" data-startTime="2010">plus the file length. </span> <span class="line" data-startTime="2012">We put the header at the very </span><span class="line" data-startTime="2012">start of the array buffer, </span><span class="line" data-startTime="2018">which is what you need. </span> <span class="line" data-startTime="2019">And then we need to put </span><span class="line" data-startTime="2019">the body at the end. </span> <span class="line" data-startTime="2021">Now the interesting thing </span><span class="line" data-startTime="2021">here is, this is the </span><span class="line" data-startTime="2023">asynchronous bit again. </span></p>

<p><span class="line" data-startTime="2024">You have to use the HTML5 file </span><span class="line" data-startTime="2024">reader API, because we've got </span><span class="line" data-startTime="2029">a file object. </span> <span class="line" data-startTime="2030">We don't have access </span><span class="line" data-startTime="2030">to the bytes. </span> <span class="line" data-startTime="2032">We need to basically ask the </span><span class="line" data-startTime="2032">system to give us that </span><span class="line" data-startTime="2034">information. </span> <span class="line" data-startTime="2035">So we use the file reader </span><span class="line" data-startTime="2035">API, in this case. </span> <span class="line" data-startTime="2038">It's one single call, </span><span class="line" data-startTime="2038">fileReader, listen to onload, </span><span class="line" data-startTime="2042">so that we know that the file's </span><span class="line" data-startTime="2042">been loaded up and is </span><span class="line" data-startTime="2043">all ready to go. </span> <span class="line" data-startTime="2046">And we then, finally say, </span><span class="line" data-startTime="2046">readAsArrayBuffer. </span> <span class="line" data-startTime="2049">So the file object can be </span><span class="line" data-startTime="2049">returned is an array buffer. </span> <span class="line" data-startTime="2052">And the idea behind what we're </span><span class="line" data-startTime="2052">going to do now is once the </span><span class="line" data-startTime="2055">file data's come in, we're going </span><span class="line" data-startTime="2055">to stuff that into the </span><span class="line" data-startTime="2058">array buffer itself, right at </span><span class="line" data-startTime="2058">the end, after the header. </span> <span class="line" data-startTime="2061">So we have this one big glob of </span><span class="line" data-startTime="2061">data that we're just going </span><span class="line" data-startTime="2063">to send out to the client. </span></p>

<p class="speaker"><span class="line" data-starttime="2065"><span class="speakerName">Pete LePage</span>: So Paul, one of the </span><span class="line" data-startTime="2065">things, if someone wanted </span><span class="line" data-startTime="2068">to refactor this, one way they </span><span class="line" data-startTime="2068">could do it, to make it </span><span class="line" data-startTime="2071">potentially a much faster web </span><span class="line" data-startTime="2071">server, is on start up, when </span><span class="line" data-startTime="2075">it reads that directory, </span><span class="line" data-startTime="2075">depending on how many files </span><span class="line" data-startTime="2079">there are, it could load all </span><span class="line" data-startTime="2079">of those files into memory. </span></p>

<p class="speaker"><span class="line" data-starttime="2082"><span class="speakerName">Paul Kinlan</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2083"><span class="speakerName">Pete LePage</span>: And then just keep </span><span class="line" data-startTime="2083">them there, so that it </span><span class="line" data-startTime="2085">just always was able to </span><span class="line" data-startTime="2085">immediately respond with them </span><span class="line" data-startTime="2088">and have them &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2089"><span class="speakerName">Paul Kinlan</span>: Yeah, so I mean it </span><span class="line" data-startTime="2089">seems a little heavyweight </span><span class="line" data-startTime="2091">to do what we're doing </span><span class="line" data-startTime="2091">right now, honestly. </span><span class="line" data-startTime="2093">But it's just there </span><span class="line" data-startTime="2093">to show the point. </span></p>

<p class="speaker"><span class="line" data-starttime="2094"><span class="speakerName">Pete LePage</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2095"><span class="speakerName">Paul Kinlan</span>: But the other </span><span class="line" data-startTime="2095">thing, as well, is you can </span><span class="line" data-startTime="2097">actually do two socket writes, </span><span class="line" data-startTime="2097">sending the data </span><span class="line" data-startTime="2099">back over the socket. </span><span class="line" data-startTime="2101">You could do two writes. </span><span class="line" data-startTime="2102">You could write the header </span><span class="line" data-startTime="2102">and then write </span><span class="line" data-startTime="2103">the body just after. </span><span class="line" data-startTime="2104">That's like two asynchronous </span><span class="line" data-startTime="2104">calls. </span><span class="line" data-startTime="2106">It's a little bit harder to </span><span class="line" data-startTime="2106">orchestrate, but then we don't </span><span class="line" data-startTime="2108">have to block the user interface </span><span class="line" data-startTime="2108">on trying to </span><span class="line" data-startTime="2111">construct these two larger </span><span class="line" data-startTime="2111">objects together. </span></p>

<p class="speaker"><span class="line" data-starttime="2114"><span class="speakerName">Pete LePage</span>: Though admittedly, </span><span class="line" data-startTime="2114">in this app, there </span><span class="line" data-startTime="2116">isn't much of a user </span><span class="line" data-startTime="2116">interface. </span><span class="line" data-startTime="2118">So blocking on that would </span><span class="line" data-startTime="2118">not be a huge deal. </span><span class="line" data-startTime="2120">But you still don't </span><span class="line" data-startTime="2120">want to do that. </span></p>

<p class="speaker"><span class="line" data-starttime="2122"><span class="speakerName">Paul Kinlan</span>: Yeah, exactly. </span><span class="line" data-startTime="2123">So let's go and see where </span><span class="line" data-startTime="2123">we can go from here. </span><span class="line" data-startTime="2126">So we want to do the </span><span class="line" data-startTime="2126">socket.write. </span><span class="line" data-startTime="2128">So we're going to write to the </span><span class="line" data-startTime="2128">socket, write the data from </span><span class="line" data-startTime="2131">the file system API to </span><span class="line" data-startTime="2131">the web, essentially. </span><span class="line" data-startTime="2135">It's pretty cool. </span></p>

<p class="speaker"><span class="line" data-starttime="2136"><span class="speakerName">Pete LePage</span>: Cool. </span></p>

<p class="speaker"><span class="line" data-starttime="2136"><span class="speakerName">Paul Kinlan</span>: And this should </span><span class="line" data-startTime="2136">be simple socketId </span><span class="line" data-startTime="2140">outputBuffer &mdash; </span><span class="line" data-startTime="2142">be careful how I spell </span><span class="line" data-startTime="2142">that one out &mdash; </span><span class="line" data-startTime="2144">function writeInfo. </span><span class="line" data-startTime="2148">And again, another nice, </span><span class="line" data-startTime="2148">very cute call back. </span></p>

<p class="speaker"><span class="line" data-starttime="2152"><span class="speakerName">Pete LePage</span>: Ah, got to </span><span class="line" data-startTime="2152">love those call backs. </span></p>

<p class="speaker"><span class="line" data-starttime="2155"><span class="speakerName">Paul Kinlan</span>: I believe </span><span class="line" data-startTime="2155">that is not needed. </span><span class="line" data-startTime="2160">And in theory, that's </span><span class="line" data-startTime="2160">it, right? </span><span class="line" data-startTime="2161">But we want a little bit </span><span class="line" data-startTime="2161">more information. </span><span class="line" data-startTime="2163">So we've taken the data and </span><span class="line" data-startTime="2163">we constructed the header </span><span class="line" data-startTime="2166">response and also the </span><span class="line" data-startTime="2166">body response. </span><span class="line" data-startTime="2168">And we've written it </span><span class="line" data-startTime="2168">out in one go. </span><span class="line" data-startTime="2170">To be a good citizen, actually, </span><span class="line" data-startTime="2170">what we need to do </span><span class="line" data-startTime="2173">is actually destroy </span><span class="line" data-startTime="2173">the socket. </span><span class="line" data-startTime="2175">So one of the things I found </span><span class="line" data-startTime="2175">out, when I was doing this is </span><span class="line" data-startTime="2179">the number of sockets, if you </span><span class="line" data-startTime="2179">don't destroy them, once </span><span class="line" data-startTime="2181">you've finished the connection, </span><span class="line" data-startTime="2181">and you've written </span><span class="line" data-startTime="2183">the data out, and you're happy </span><span class="line" data-startTime="2183">that the client's got the </span><span class="line" data-startTime="2184">data, the application will </span><span class="line" data-startTime="2184">probably crash at some point </span><span class="line" data-startTime="2188">in the future. </span></p>

<p class="speaker"><span class="line" data-starttime="2189"><span class="speakerName">Pete LePage</span>: Yeah, because </span><span class="line" data-startTime="2189">there are a </span><span class="line" data-startTime="2190">limited number of sockets. </span></p>

<p class="speaker"><span class="line" data-starttime="2192"><span class="speakerName">Paul Kinlan</span>: Yeah, </span><span class="line" data-startTime="2192">essentially. </span></p>

<p class="speaker"><span class="line" data-starttime="2192"><span class="speakerName">Pete LePage</span>: Now, do you </span><span class="line" data-startTime="2192">need to destroy and </span><span class="line" data-startTime="2194">close or just destroy? </span></p>

<p class="speaker"><span class="line" data-starttime="2196"><span class="speakerName">Paul Kinlan</span>: You might </span><span class="line" data-startTime="2196">need to close. </span> <span class="line" data-startTime="2197">I just did destroy, and </span><span class="line" data-startTime="2197">it seems to work. </span> <span class="line" data-startTime="2199">I should probably be a </span><span class="line" data-startTime="2199">better citizen and </span><span class="line" data-startTime="2201">also close it as well. </span> <span class="line" data-startTime="2202">But what I'm doing here, this </span><span class="line" data-startTime="2202">is the thing that got me </span><span class="line" data-startTime="2206">before when I was </span><span class="line" data-startTime="2206">starting this. </span> <span class="line" data-startTime="2207">Because overall, it took me </span><span class="line" data-startTime="2207">about an hour and a half to </span><span class="line" data-startTime="2210">make this whole application. </span> <span class="line" data-startTime="2211">It's pretty cool. </span> <span class="line" data-startTime="2212">socket.accept, you need to </span><span class="line" data-startTime="2212">call that again, because </span><span class="line" data-startTime="2215">you've handled the request. </span> <span class="line" data-startTime="2216">You basically need to tell the </span><span class="line" data-startTime="2216">system that you want to pick </span><span class="line" data-startTime="2218">off the next request again. </span></p>

<p><span class="line" data-startTime="2221">Because you can only have </span><span class="line" data-startTime="2221">one of those in flight. </span> <span class="line" data-startTime="2223">I chose to do it in this type of </span><span class="line" data-startTime="2223">queue here, because you can </span><span class="line" data-startTime="2226">only have one in flight. </span> <span class="line" data-startTime="2227">I need to know that what we've </span><span class="line" data-startTime="2227">done has completed </span><span class="line" data-startTime="2230">successfully, in which </span><span class="line" data-startTime="2230">case it's the write. </span> <span class="line" data-startTime="2233">And, in theory &mdash; </span><span class="line" data-startTime="2235">oh, tell you what. </span> <span class="line" data-startTime="2236">That should be it. </span> <span class="line" data-startTime="2237">Let me just go to the end. </span> <span class="line" data-startTime="2238">I know there's a Stop button. </span> <span class="line" data-startTime="2239">We should also do socket.destroy </span><span class="line" data-startTime="2239">to kill the </span><span class="line" data-startTime="2242">server socket. </span> <span class="line" data-startTime="2244">oh, info.socketId. </span> <span class="line" data-startTime="2250">And that is all we actually </span><span class="line" data-startTime="2250">need to do. </span> <span class="line" data-startTime="2254">We have our server. </span> <span class="line" data-startTime="2255">Shall we test it? </span></p>

<p class="speaker"><span class="line" data-starttime="2256"><span class="speakerName">Pete LePage</span>: Let's test it. </span></p>

<p class="speaker"><span class="line" data-starttime="2257"><span class="speakerName">Paul Kinlan</span>: Should </span><span class="line" data-startTime="2257">we test it live? </span></p>

<p class="speaker"><span class="line" data-starttime="2259"><span class="speakerName">Pete LePage</span>: Absolutely. </span></p>

<p class="speaker"><span class="line" data-starttime="2261"><span class="speakerName">Paul Kinlan</span>: So I have an </span><span class="line" data-startTime="2261">extension web server file. </span><span class="line" data-startTime="2266">It's not that one. </span><span class="line" data-startTime="2268">And it's not that one. </span><span class="line" data-startTime="2269">That was my test. </span><span class="line" data-startTime="2270">That was one of my </span><span class="line" data-startTime="2270">other tests. </span><span class="line" data-startTime="2272">Hey, funny. </span></p>

<p class="speaker"><span class="line" data-starttime="2273"><span class="speakerName">Pete LePage</span>: There you go. </span></p>

<p class="speaker"><span class="line" data-starttime="2275"><span class="speakerName">Paul Kinlan</span>: So it hasn't </span><span class="line" data-startTime="2275">crashed yet. </span></p>

<p class="speaker"><span class="line" data-starttime="2277"><span class="speakerName">Pete LePage</span>: Sweet. </span></p>

<p class="speaker"><span class="line" data-starttime="2279"><span class="speakerName">Paul Kinlan</span>: Launch. </span><span class="line" data-startTime="2281">Shall we see if there's </span><span class="line" data-startTime="2281">any errors? </span><span class="line" data-startTime="2284">No errors so far. </span><span class="line" data-startTime="2286">Choose files. </span><span class="line" data-startTime="2289">Choose that app directory. </span></p>

<p class="speaker"><span class="line" data-starttime="2291"><span class="speakerName">Pete LePage</span>: Nice. </span><span class="line" data-startTime="2292">Nice. </span></p>

<p class="speaker"><span class="line" data-starttime="2293"><span class="speakerName">Paul Kinlan</span>: No errors. </span><span class="line" data-startTime="2294">Start. </span><span class="line" data-startTime="2295">No errors. </span><span class="line" data-startTime="2296">Oh. </span></p>

<p class="speaker"><span class="line" data-starttime="2297"><span class="speakerName">Pete LePage</span>: No whammies, </span><span class="line" data-startTime="2297">no whammies, </span><span class="line" data-startTime="2298">no whammy, no whammy. </span></p>

<p class="speaker"><span class="line" data-starttime="2301"><span class="speakerName">Paul Kinlan</span>: 81, because &mdash; </span><span class="line" data-startTime="2307">yay! </span><span class="line" data-startTime="2308">It worked. </span></p>

<p class="speaker"><span class="line" data-starttime="2309"><span class="speakerName">Pete LePage</span>: Congratulations. </span><span class="line" data-startTime="2310">Nice job, sir. </span></p>

<p class="speaker"><span class="line" data-starttime="2312"><span class="speakerName">Paul Kinlan</span>: Oh my. </span> <span class="line" data-startTime="2316">That's it, right. </span> <span class="line" data-startTime="2317">That's the whole basic premise </span><span class="line" data-startTime="2317">of what we're trying to do </span><span class="line" data-startTime="2320">with this, in like 30 minutes. </span> <span class="line" data-startTime="2322">And we've gone through this. </span> <span class="line" data-startTime="2323">And we talked an obviously </span><span class="line" data-startTime="2323">long time here. </span> <span class="line" data-startTime="2325">We built a basic server that </span><span class="line" data-startTime="2325">allows you to serve data from </span><span class="line" data-startTime="2328">your local machine, your local </span><span class="line" data-startTime="2328">Chrome OS box, your MacBook, </span><span class="line" data-startTime="2332">all those types of things, serve </span><span class="line" data-startTime="2332">it directly to the user. </span> <span class="line" data-startTime="2335">Offline, online, however you </span><span class="line" data-startTime="2335">want to do it, you can do it. </span> <span class="line" data-startTime="2339">Obviously, it's a very </span><span class="line" data-startTime="2339">simple server. </span> <span class="line" data-startTime="2340">It only handles get requests. </span></p>

<p><span class="line" data-startTime="2341">It doesn't do pokes and all </span><span class="line" data-startTime="2341">that type of stuff. </span> <span class="line" data-startTime="2343">But you can see what's </span><span class="line" data-startTime="2343">going to happen. </span> <span class="line" data-startTime="2344">And like I said, if you can </span><span class="line" data-startTime="2344">get some of the Node based </span><span class="line" data-startTime="2346">spaces, like the server work, </span><span class="line" data-startTime="2346">a lot of people have already </span><span class="line" data-startTime="2349">done in that whole ecosystem. </span></p>

<p class="speaker"><span class="line" data-starttime="2350"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2351"><span class="speakerName">Paul Kinlan</span>: I know there's </span><span class="line" data-startTime="2351">quite a bit of mapping that </span><span class="line" data-startTime="2353">needs to be done, because </span><span class="line" data-startTime="2353">there's a buffer, which is </span><span class="line" data-startTime="2355">different to our array buffer </span><span class="line" data-startTime="2355">and all that type of stuff. </span> <span class="line" data-startTime="2356">So there needs to be some </span><span class="line" data-startTime="2356">marshalling and munging in </span><span class="line" data-startTime="2359">between the two bits there. </span> <span class="line" data-startTime="2362">And I think it's one of the </span><span class="line" data-startTime="2362">things, like it would be so </span><span class="line" data-startTime="2364">cool if you could test your </span><span class="line" data-startTime="2364">entire stack without </span><span class="line" data-startTime="2367">necessarily having to have </span><span class="line" data-startTime="2367">Node.js sever installed. </span> <span class="line" data-startTime="2370">On your MacBook Pro and your </span><span class="line" data-startTime="2370">Windows machine, you'll have </span><span class="line" data-startTime="2373">that on anyway. </span> <span class="line" data-startTime="2374">But if you've got a Chrome OS </span><span class="line" data-startTime="2374">box, right now, it's like &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2376"><span class="speakerName">Pete LePage</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="2376"><span class="speakerName">Paul Kinlan</span>: That would </span><span class="line" data-startTime="2376">be pretty sweet. </span><span class="line" data-startTime="2377">You could start to test out your </span><span class="line" data-startTime="2377">Node based application, </span><span class="line" data-startTime="2380">inside the browser, from </span><span class="line" data-startTime="2380">your Chrome OS machine. </span></p>

<p class="speaker"><span class="line" data-starttime="2383"><span class="speakerName">Pete LePage</span>: Or you could, </span><span class="line" data-startTime="2383">effectively, go and just do </span><span class="line" data-startTime="2386">any of the development that you </span><span class="line" data-startTime="2386">want to do on your Chrome </span><span class="line" data-startTime="2389">Book and have a server </span><span class="line" data-startTime="2389">running locally. </span> <span class="line" data-startTime="2393">So I just put the URL </span><span class="line" data-startTime="2393">for the network </span><span class="line" data-startTime="2395">documentation up on screen. </span> <span class="line" data-startTime="2397">So if you want to dive into this </span><span class="line" data-startTime="2397">a little bit deeper, you </span><span class="line" data-startTime="2399">can see the URL there. </span> <span class="line" data-startTime="2402">And that'll take you to the </span><span class="line" data-startTime="2402">Chrome apps documentation, </span><span class="line" data-startTime="2404">where all of this stuff goes </span><span class="line" data-startTime="2404">into much more detail, all of </span><span class="line" data-startTime="2408">the different APIs the connect, </span><span class="line" data-startTime="2408">the destroy, the </span><span class="line" data-startTime="2411">close, all of those fun </span><span class="line" data-startTime="2411">things that you do </span><span class="line" data-startTime="2414">need to know about. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2416"><span class="speakerName">Paul Kinlan</span>: The &mdash; </span><span class="line" data-startTime="2417">I'm sorry. </span></p>

<p class="speaker"><span class="line" data-starttime="2417"><span class="speakerName">Pete LePage</span>: No, go ahead. </span></p>

<p class="speaker"><span class="line" data-starttime="2419"><span class="speakerName">Paul Kinlan</span>: Yeah, the thing I'd </span><span class="line" data-startTime="2419">just like to say is that </span><span class="line" data-startTime="2420">this API is pretty cool. </span><span class="line" data-startTime="2421">It's very powerful. </span><span class="line" data-startTime="2422">It's something that we've </span><span class="line" data-startTime="2422">not seen inside </span><span class="line" data-startTime="2424">Chrome before, at least. </span><span class="line" data-startTime="2426">But the thing for me is it's </span><span class="line" data-startTime="2426">going to enable so </span><span class="line" data-startTime="2429">many more use cases. </span><span class="line" data-startTime="2430">It's going to be really cool. </span></p>

<p class="speaker"><span class="line" data-starttime="2431"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2431"><span class="speakerName">Paul Kinlan</span>: Personally, I'd </span><span class="line" data-startTime="2431">like more high level APIs. </span></p>

<p class="speaker"><span class="line" data-starttime="2433"><span class="speakerName">Pete LePage</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2434"><span class="speakerName">Paul Kinlan</span>: So if someone could </span><span class="line" data-startTime="2434">make like and FTP API or </span><span class="line" data-startTime="2436">DNS API and all those different </span><span class="line" data-startTime="2436">types of APIs that </span><span class="line" data-startTime="2439">other developers can just use </span><span class="line" data-startTime="2439">and say, you know what? </span><span class="line" data-startTime="2441">I want to connect to an FTP </span><span class="line" data-startTime="2441">client or an FTP service. </span><span class="line" data-startTime="2444">Or I want to make it </span><span class="line" data-startTime="2444">my own FTP service. </span><span class="line" data-startTime="2446">And it just works. </span></p>

<p class="speaker"><span class="line" data-starttime="2447"><span class="speakerName">Pete LePage</span>: Abolutely. </span></p>

<p class="speaker"><span class="line" data-starttime="2447"><span class="speakerName">Paul Kinlan</span>: I'd love </span><span class="line" data-startTime="2447">that to happen. </span><span class="line" data-startTime="2448">That would be absolutely </span><span class="line" data-startTime="2448">brilliant. </span></p>

<p class="speaker"><span class="line" data-starttime="2450"><span class="speakerName">Pete LePage</span>: So actually that's </span><span class="line" data-startTime="2450">a perfect segue into </span><span class="line" data-startTime="2452">some of the questions. </span><span class="line" data-startTime="2453">Because one of the first </span><span class="line" data-startTime="2453">questions that's in there is, </span><span class="line" data-startTime="2456">could you summarize, at a high </span><span class="line" data-startTime="2456">level, what the new use cases </span><span class="line" data-startTime="2460">you see in enabling </span><span class="line" data-startTime="2460">in our apps are? </span><span class="line" data-startTime="2463">Any particular use cases </span><span class="line" data-startTime="2463">that you want to see? </span></p>

<p class="speaker"><span class="line" data-starttime="2465"><span class="speakerName">Paul Kinlan</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2466"><span class="speakerName">Pete LePage</span>: So I know for me, </span><span class="line" data-startTime="2466">there's a couple that I've </span><span class="line" data-startTime="2468">been playing with lately. </span> <span class="line" data-startTime="2471">Things like there's a little box </span><span class="line" data-startTime="2471">that you can buy called an </span><span class="line" data-startTime="2474">IP to IR converter. </span> <span class="line" data-startTime="2477">And I've just been playing </span><span class="line" data-startTime="2477">with this. </span> <span class="line" data-startTime="2478">I know it's completely dorky. </span> <span class="line" data-startTime="2482">So it plugs into your </span><span class="line" data-startTime="2482">network port. </span> <span class="line" data-startTime="2483">And then it's got IR </span><span class="line" data-startTime="2483">blasters on it. </span> <span class="line" data-startTime="2486">So you can then use that to </span><span class="line" data-startTime="2486">control your TV, your anything </span><span class="line" data-startTime="2490">that's controlled via IR. </span> <span class="line" data-startTime="2492">So I'm working on writing a </span><span class="line" data-startTime="2492">little Chrome app that will </span><span class="line" data-startTime="2497">allow me to turn my air </span><span class="line" data-startTime="2497">conditioner on and off, will </span><span class="line" data-startTime="2499">allow me to turn the TV on and </span><span class="line" data-startTime="2499">off, do all sorts of crazy </span><span class="line" data-startTime="2503">little things like that. </span> <span class="line" data-startTime="2504">So that's one case. </span> <span class="line" data-startTime="2505">But other things are being able </span><span class="line" data-startTime="2505">to write servers, like we </span><span class="line" data-startTime="2509">talked about, being able to </span><span class="line" data-startTime="2509">go and communicate with </span><span class="line" data-startTime="2514">appliances that you normally </span><span class="line" data-startTime="2514">wouldn't be able to </span><span class="line" data-startTime="2516">communicate with. </span> <span class="line" data-startTime="2517">What are some of the ones that </span><span class="line" data-startTime="2517">you're excited about, Paul? </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2520"><span class="speakerName">Paul Kinlan</span>: Use cases </span><span class="line" data-startTime="2520">or appliances? </span></p>

<p class="speaker"><span class="line" data-starttime="2522"><span class="speakerName">Pete LePage</span>: Both. </span></p>

<p class="speaker"><span class="line" data-starttime="2523"><span class="speakerName">Paul Kinlan</span>: Both. </span><span class="line" data-startTime="2523">Appliances, ah, so many. </span><span class="line" data-startTime="2525">I really like the idea &mdash; </span><span class="line" data-startTime="2525">so we got a demo </span><span class="line" data-startTime="2527">for the Media Center. </span></p>

<p class="speaker"><span class="line" data-starttime="2528"><span class="speakerName">Pete LePage</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2529"><span class="speakerName">Paul Kinlan</span>: I want to be able </span><span class="line" data-startTime="2529">to access all my media around </span><span class="line" data-startTime="2530">my house, brings into </span><span class="line" data-startTime="2530">my Chrome app. </span><span class="line" data-startTime="2533">And if I go on a plane, I can </span><span class="line" data-startTime="2533">just download it straight to </span><span class="line" data-startTime="2536">my Chrome Book and still </span><span class="line" data-startTime="2536">play and listen to it. </span><span class="line" data-startTime="2537">It's pretty cool. </span><span class="line" data-startTime="2538">So we've got that </span><span class="line" data-startTime="2538">type of demo. </span><span class="line" data-startTime="2539">That type of interaction is </span><span class="line" data-startTime="2539">something you just don't get </span><span class="line" data-startTime="2542">in the browser, right? </span></p>

<p class="speaker"><span class="line" data-starttime="2543"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2543"><span class="speakerName">Paul Kinlan</span>: Right now. </span> <span class="line" data-startTime="2543">And it's pretty cool. </span> <span class="line" data-startTime="2545">Some of the other stuff, so </span><span class="line" data-startTime="2545">services, in an actual way, </span><span class="line" data-startTime="2547">this is important for me. </span> <span class="line" data-startTime="2548">You know, literally, I want us </span><span class="line" data-startTime="2548">to be able to build services </span><span class="line" data-startTime="2551">and services in our </span><span class="line" data-startTime="2551">applications. </span> <span class="line" data-startTime="2554">I think one of the questions </span><span class="line" data-startTime="2554">is I should've built a Bit </span><span class="line" data-startTime="2556">Torrent client. </span> <span class="line" data-startTime="2557">Yeah, we can build a </span><span class="line" data-startTime="2557">Bit Torrent client. </span> <span class="line" data-startTime="2558">I just don't know </span><span class="line" data-startTime="2558">how to do it. </span> <span class="line" data-startTime="2560">I don't know the protocol. </span> <span class="line" data-startTime="2561">It probably would've been a </span><span class="line" data-startTime="2561">bit longer than this talk. </span> <span class="line" data-startTime="2564">But yeah, those are the types of </span><span class="line" data-startTime="2564">things that we are enabled </span><span class="line" data-startTime="2566">to do now, in the sense </span><span class="line" data-startTime="2566">that we can have </span><span class="line" data-startTime="2568">a Bit Torrent client. </span> <span class="line" data-startTime="2569">And you could, in theory, just </span><span class="line" data-startTime="2569">open ports that you need to </span><span class="line" data-startTime="2571">listen to the requests coming in </span><span class="line" data-startTime="2571">to share the data back out. </span> <span class="line" data-startTime="2574">And so you could quite easily do </span><span class="line" data-startTime="2574">it &mdash; well, sort of easily. </span></p>

<p><span class="line" data-startTime="2577">The API is there for you </span><span class="line" data-startTime="2577">to be able do that. </span> <span class="line" data-startTime="2579">That would be pretty cool. </span> <span class="line" data-startTime="2580">FTP services, FTP servers, </span><span class="line" data-startTime="2580">FTP clients. </span> <span class="line" data-startTime="2584">You know, there's so many people </span><span class="line" data-startTime="2584">who still actually use </span><span class="line" data-startTime="2585">FTP, a lot of web developers </span><span class="line" data-startTime="2585">who use FTP. </span></p>

<p class="speaker"><span class="line" data-starttime="2587"><span class="speakerName">Pete LePage</span>: Absolutely. </span></p>

<p class="speaker"><span class="line" data-starttime="2588"><span class="speakerName">Paul Kinlan</span>: Not even FTPS, just </span><span class="line" data-startTime="2588">plain FTP to get the data </span><span class="line" data-startTime="2591">around places and up </span><span class="line" data-startTime="2591">on the web host, </span><span class="line" data-startTime="2593">those types of things. </span></p>

<p class="speaker"><span class="line" data-starttime="2594"><span class="speakerName">Pete LePage</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2595"><span class="speakerName">Paul Kinlan</span>: I was actually </span><span class="line" data-startTime="2595">thinking it might have been </span><span class="line" data-startTime="2596">cool for like a cURL </span><span class="line" data-startTime="2596">on the web. </span><span class="line" data-startTime="2598">You always see these things, </span><span class="line" data-startTime="2598">like cURL on the web, where </span><span class="line" data-startTime="2600">you don't serve it, necessarily, </span><span class="line" data-startTime="2600">but like a normal </span><span class="line" data-startTime="2604">client request. </span><span class="line" data-startTime="2605">Just debug the HTTP </span><span class="line" data-startTime="2605">requests, without </span><span class="line" data-startTime="2608">having to go into DevTools. </span><span class="line" data-startTime="2609">You can just put it all in. </span><span class="line" data-startTime="2610">And you don't need the remote </span><span class="line" data-startTime="2610">server to do it. </span><span class="line" data-startTime="2612">You can do all type of stuff. </span><span class="line" data-startTime="2614">The interesting thing, we don't </span><span class="line" data-startTime="2614">have any access to the </span><span class="line" data-startTime="2616">really, really low layers </span><span class="line" data-startTime="2616">of the API. </span><span class="line" data-startTime="2618">So you can't do pings. </span><span class="line" data-startTime="2619">Like [INAUDIBLE] stuff, </span><span class="line" data-startTime="2619">you can't do. </span></p>

<p class="speaker"><span class="line" data-starttime="2621"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="2621"><span class="speakerName">Paul Kinlan</span>: But </span><span class="line" data-startTime="2621">you can do DNS. </span><span class="line" data-startTime="2623">DNS clients, I want a whole load </span><span class="line" data-startTime="2623">of APIs available, high </span><span class="line" data-startTime="2625">level APIs available. </span><span class="line" data-startTime="2627">Let me just fire off </span><span class="line" data-startTime="2627">a DNS request or a </span><span class="line" data-startTime="2629">network time request. </span></p>

<p class="speaker"><span class="line" data-starttime="2630"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2630"><span class="speakerName">Paul Kinlan</span>: And all these types </span><span class="line" data-startTime="2630">of things would be cool. </span></p>

<p class="speaker"><span class="line" data-starttime="2632"><span class="speakerName">Pete LePage</span>: Yeah. </span><span class="line" data-startTime="2632">And then we can build </span><span class="line" data-startTime="2632">some really cool </span><span class="line" data-startTime="2633">applications on it. </span><span class="line" data-startTime="2635">The first one that always comes </span><span class="line" data-startTime="2635">to mind &mdash; and this is I </span><span class="line" data-startTime="2636">think why we did the web </span><span class="line" data-startTime="2636">developer, kind of the web </span><span class="line" data-startTime="2639">server, is because this is </span><span class="line" data-startTime="2639">something web developers want </span><span class="line" data-startTime="2642">to be able to do on their </span><span class="line" data-startTime="2642">Chrome Books. </span></p>

<p class="speaker"><span class="line" data-starttime="2643"><span class="speakerName">Pete LePage</span>: Absolutely. </span></p>

<p class="speaker"><span class="line" data-starttime="2644"><span class="speakerName">Paul Kinlan</span>: So I think </span><span class="line" data-startTime="2644">we can enable that. </span><span class="line" data-startTime="2645">And it would be pretty cool if </span><span class="line" data-startTime="2645">someone like Cloud Nine or </span><span class="line" data-startTime="2647">someone else comes along and </span><span class="line" data-startTime="2647">says, yeah, we can do that </span><span class="line" data-startTime="2649">while you're offline. </span><span class="line" data-startTime="2650">That would be cool. </span></p>

<p class="speaker"><span class="line" data-starttime="2650"><span class="speakerName">Pete LePage</span>: We'll pop that </span><span class="line" data-startTime="2650">into our development </span><span class="line" data-startTime="2652">environment. </span><span class="line" data-startTime="2653">So Louise, from Phoenix, wants </span><span class="line" data-startTime="2653">to know is there a way to do a </span><span class="line" data-startTime="2659">broadcast to find other servers </span><span class="line" data-startTime="2659">to use this for </span><span class="line" data-startTime="2663">LAN-based HTML5 game servers? </span><span class="line" data-startTime="2666">And the answer is, yes. </span><span class="line" data-startTime="2668">Right now, there's a bug </span><span class="line" data-startTime="2668">with UDP listen on </span><span class="line" data-startTime="2671">the broadcast port. </span><span class="line" data-startTime="2672">So that's not going to work. </span><span class="line" data-startTime="2674">And the engineers are aware </span><span class="line" data-startTime="2674">of that, and they're </span><span class="line" data-startTime="2677">looking into that one. </span><span class="line" data-startTime="2678">But you can, certainly, once </span><span class="line" data-startTime="2678">that gets fixed, you'll be </span><span class="line" data-startTime="2683">able to listen for UDP </span><span class="line" data-startTime="2683">broadcasts sent out. </span></p>

<p class="speaker"><span class="line" data-starttime="2689"><span class="speakerName">Paul Kinlan</span>: Yeah, our Media </span><span class="line" data-startTime="2689">Gallery sample on GitHub &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2692"><span class="speakerName">Pete LePage</span>: Yep. </span><span class="line" data-startTime="2692">That actually does that </span><span class="line" data-startTime="2692">type of thing. </span><span class="line" data-startTime="2694">But it's a little bit broken </span><span class="line" data-startTime="2694">at the moment. </span><span class="line" data-startTime="2696">The thing it does, it basically </span><span class="line" data-startTime="2696">fires off of, I </span><span class="line" data-startTime="2699">think, it's 239.245.255's </span><span class="line" data-startTime="2699">address. </span></p>

<p class="speaker"><span class="line" data-starttime="2702"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2702"><span class="speakerName">Paul Kinlan</span>: Which is like the </span><span class="line" data-startTime="2702">UDP broadcast, essentially, </span><span class="line" data-startTime="2704">for DNLA discovery. </span><span class="line" data-startTime="2708">And then basically, you </span><span class="line" data-startTime="2708">will fire that off. </span><span class="line" data-startTime="2710">That's fired and you can do </span><span class="line" data-startTime="2710">the broadcast, but at the </span><span class="line" data-startTime="2712">other end, you need to </span><span class="line" data-startTime="2712">be able to listen. </span><span class="line" data-startTime="2713">And like Pete said, </span><span class="line" data-startTime="2713">that API did work. </span><span class="line" data-startTime="2717">But I think someone stopped </span><span class="line" data-startTime="2717">working recently. </span><span class="line" data-startTime="2719">But should be able to find &mdash; </span><span class="line" data-startTime="2720">do a UDP bind to port 0 and </span><span class="line" data-startTime="2720">then receive all these </span><span class="line" data-startTime="2724">responses back in. </span></p>

<p class="speaker"><span class="line" data-starttime="2725"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2725"><span class="speakerName">Paul Kinlan</span>: And that </span><span class="line" data-startTime="2725">should all work. </span></p>

<p class="speaker"><span class="line" data-starttime="2727"><span class="speakerName">Pete LePage</span>: So we've got </span><span class="line" data-startTime="2727">another question of, how many </span><span class="line" data-startTime="2731">requests can it handle </span><span class="line" data-startTime="2731">at a time? </span><span class="line" data-startTime="2733">If you have to destroy and start </span><span class="line" data-startTime="2733">accepting again, does </span><span class="line" data-startTime="2737">that mean you can only accept </span><span class="line" data-startTime="2737">one request at a time? </span></p>

<p class="speaker"><span class="line" data-starttime="2741"><span class="speakerName">Paul Kinlan</span>: Yes is the answer </span><span class="line" data-startTime="2741">right now, only one </span><span class="line" data-startTime="2743">request at a time. </span> <span class="line" data-startTime="2744">But if you look at the way Node </span><span class="line" data-startTime="2744">works, its relatively </span><span class="line" data-startTime="2746">similar, right? </span><span class="line" data-startTime="2747">I mean Node only processes </span><span class="line" data-startTime="2747">one request. </span> <span class="line" data-startTime="2749">It trys to then delegate the </span><span class="line" data-startTime="2749">rest of the functionality to </span><span class="line" data-startTime="2751">other asynchronous parts of </span><span class="line" data-startTime="2751">the system, then handle </span><span class="line" data-startTime="2754">responses that way. </span> <span class="line" data-startTime="2756">And if you look at the Python </span><span class="line" data-startTime="2756">Tornado server, it was a </span><span class="line" data-startTime="2758">similar thing. </span> <span class="line" data-startTime="2759">You could only handle one </span><span class="line" data-startTime="2759">request at a time coming in. </span> <span class="line" data-startTime="2761">So yeah, right now, that's </span><span class="line" data-startTime="2761">the only way you </span><span class="line" data-startTime="2764">can do it just yet. </span></p>

<p><span class="line" data-startTime="2765">The idea is that you would </span><span class="line" data-startTime="2765">take the request. </span> <span class="line" data-startTime="2767">And you'd background it. </span> <span class="line" data-startTime="2770">I mean all these APIs </span><span class="line" data-startTime="2770">are asynchronous. </span> <span class="line" data-startTime="2771">So we might actually be </span><span class="line" data-startTime="2771">able to take multiple </span><span class="line" data-startTime="2774">ones, earlier on. </span> <span class="line" data-startTime="2777">I'm trying to think how </span><span class="line" data-startTime="2777">the accept works now. </span> <span class="line" data-startTime="2779">I haven't actually tested it </span><span class="line" data-startTime="2779">with trying to delegate these, </span><span class="line" data-startTime="2781">like finish the accept </span><span class="line" data-startTime="2781">off really early. </span> <span class="line" data-startTime="2783">So just say, you know what, we </span><span class="line" data-startTime="2783">finished with the accept, go </span><span class="line" data-startTime="2785">off and do whatever you want. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2786"><span class="speakerName">Pete LePage</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2786"><span class="speakerName">Paul Kinlan</span>: I haven't </span><span class="line" data-startTime="2786">tried that just yet. </span><span class="line" data-startTime="2787">But right now it's </span><span class="line" data-startTime="2787">one at a time. </span><span class="line" data-startTime="2790">It's pretty speedy for what </span><span class="line" data-startTime="2790">we're trying to do as basic </span><span class="line" data-startTime="2792">file serving. </span></p>

<p class="speaker"><span class="line" data-starttime="2795"><span class="speakerName">Pete LePage</span>: This is something </span><span class="line" data-startTime="2795">that I think works perfectly </span><span class="line" data-startTime="2797">for a development environment </span><span class="line" data-startTime="2797">or a little test environment </span><span class="line" data-startTime="2800">or maybe something you want to </span><span class="line" data-startTime="2800">write for controlling of an </span><span class="line" data-startTime="2805">application like the IP to IR </span><span class="line" data-startTime="2805">controller, where you're only </span><span class="line" data-startTime="2809">going to have a couple people </span><span class="line" data-startTime="2809">connecting to it at any time. </span> <span class="line" data-startTime="2811">You're not going to have </span><span class="line" data-startTime="2811">the entire world. </span> <span class="line" data-startTime="2813">It's not designed, in this </span><span class="line" data-startTime="2813">particular case, to scale. </span> <span class="line" data-startTime="2818">Now you absolutely could write </span><span class="line" data-startTime="2818">scale with this stuff. </span> <span class="line" data-startTime="2821">But the way we've written </span><span class="line" data-startTime="2821">it won't scale well. </span></p>

<p class="speaker"><span class="line" data-starttime="2825"><span class="speakerName">Paul Kinlan</span>: Yeah. </span> <span class="line" data-startTime="2826">The way I've written this </span><span class="line" data-startTime="2826">application it probably won't </span><span class="line" data-startTime="2827">scale well at all. </span> <span class="line" data-startTime="2830">I think it's a very </span><span class="line" data-startTime="2830">general API. </span> <span class="line" data-startTime="2836">It's the POSIX socket </span><span class="line" data-startTime="2836">API essentially. </span> <span class="line" data-startTime="2837">So we can build systems that </span><span class="line" data-startTime="2837">scale quite easily. </span> <span class="line" data-startTime="2840">This literally landed </span><span class="line" data-startTime="2840">last week. </span> <span class="line" data-startTime="2843">And what we're trying to do is </span><span class="line" data-startTime="2843">start off the conversation </span><span class="line" data-startTime="2845">about getting developers </span><span class="line" data-startTime="2845">excited about this API. </span> <span class="line" data-startTime="2848">And then we'll start to build </span><span class="line" data-startTime="2848">out the patterns and practices </span><span class="line" data-startTime="2850">about how this should actually </span><span class="line" data-startTime="2850">be managed, from the </span><span class="line" data-startTime="2853">application layer, if </span><span class="line" data-startTime="2853">that makes sense. </span> <span class="line" data-startTime="2855">So we're still early on. </span> <span class="line" data-startTime="2856">And if you guys want to play </span><span class="line" data-startTime="2856">with it, you just email me </span><span class="line" data-startTime="2858">PaulKinlan@Google or catch </span><span class="line" data-startTime="2858">me pm Google+ or Twitter. </span></p>

<p><span class="line" data-startTime="2863">And we'll just try and do </span><span class="line" data-startTime="2863">another show where we'll </span><span class="line" data-startTime="2866">promote some of these things, </span><span class="line" data-startTime="2866">some of the stuff </span><span class="line" data-startTime="2868">that you do as well. </span> <span class="line" data-startTime="2869">So that would be pretty cool. </span> <span class="line" data-startTime="2870">But we need to know how you </span><span class="line" data-startTime="2870">want to use these things. </span> <span class="line" data-startTime="2871">And the only way we'll know that </span><span class="line" data-startTime="2871">is by getting you guys to </span><span class="line" data-startTime="2874">experiment. </span></p>

<p class="speaker"><span class="line" data-starttime="2874"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2875"><span class="speakerName">Paul Kinlan</span>: So I encourage </span><span class="line" data-startTime="2875">everyone to play. </span></p>

<p class="speaker"><span class="line" data-starttime="2877"><span class="speakerName">Pete LePage</span>: Yep. </span> <span class="line" data-startTime="2878">So we've got time for, </span><span class="line" data-startTime="2878">I think, about </span><span class="line" data-startTime="2881">one or two more questions. </span> <span class="line" data-startTime="2884">Question was, does this work </span><span class="line" data-startTime="2884">over the internet? </span><span class="line" data-startTime="2888">Yeah, it absolutely would. </span> <span class="line" data-startTime="2890">The one thing you have to be </span><span class="line" data-startTime="2890">aware of is that the network </span><span class="line" data-startTime="2894">socket that you're listening on </span><span class="line" data-startTime="2894">has to be connected to an </span><span class="line" data-startTime="2897">internet port, right. </span> <span class="line" data-startTime="2898">So in our particular case, we're </span><span class="line" data-startTime="2898">listening to 127.0.0.1. </span> <span class="line" data-startTime="2902">So we're listening for </span><span class="line" data-startTime="2902">our own loop back. </span> <span class="line" data-startTime="2905">But Paul could have said hey, </span><span class="line" data-startTime="2905">what's the IP address on my </span><span class="line" data-startTime="2909">network port. </span> <span class="line" data-startTime="2910">And I want to listen on that. </span> <span class="line" data-startTime="2912">And then I could have, from here </span><span class="line" data-startTime="2912">in New York, connected to </span><span class="line" data-startTime="2915">him and been able to </span><span class="line" data-startTime="2915">listen to that. </span> <span class="line" data-startTime="2917">But I would have had to been </span><span class="line" data-startTime="2917">able to get to his IP address. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2922"><span class="speakerName">Paul Kinlan</span>: It's the same as </span><span class="line" data-startTime="2922">just general networking, so it </span><span class="line" data-startTime="2924">should be fine. </span></p>

<p class="speaker"><span class="line" data-starttime="2926"><span class="speakerName">Pete LePage</span>: Cool. </span></p>

<p class="speaker"><span class="line" data-starttime="2927"><span class="speakerName">Paul Kinlan</span>: Yeah. </span><span class="line" data-startTime="2928">Can we do one more question </span><span class="line" data-startTime="2928">or are we over time? </span><span class="line" data-startTime="2930">I think we're over time </span><span class="line" data-startTime="2930">now, aren't we? </span></p>

<p class="speaker"><span class="line" data-starttime="2931"><span class="speakerName">Pete LePage</span>: Yeah, I think we're </span><span class="line" data-startTime="2931">a little bit over time. </span><span class="line" data-startTime="2932">So with that, I want to say </span><span class="line" data-startTime="2932">thanks to Paul for joining me. </span><span class="line" data-startTime="2936">And thank you guys for </span><span class="line" data-startTime="2936">all joining us. </span><span class="line" data-startTime="2939">We'll be back next </span><span class="line" data-startTime="2939">week with another </span><span class="line" data-startTime="2941">installment of Chrome apps. </span><span class="line" data-startTime="2944">If there are things you want to </span><span class="line" data-startTime="2944">hear about, things you want </span><span class="line" data-startTime="2946">us to cover in more depth, </span><span class="line" data-startTime="2946">please be sure to reach out to </span><span class="line" data-startTime="2950">us, either through our own </span><span class="line" data-startTime="2950">Google+ pages &mdash; i'm Pete </span><span class="line" data-startTime="2953">LePage or you can reach </span><span class="line" data-startTime="2953">to Paul Kinlan. </span><span class="line" data-startTime="2956">Or leave a comment in one of </span><span class="line" data-startTime="2956">our Google+ pages for the </span><span class="line" data-startTime="2961">Chrome developers. </span><span class="line" data-startTime="2962">So with that, Paul, I think </span><span class="line" data-startTime="2962">we should try for </span><span class="line" data-startTime="2965">another high five. </span><span class="line" data-startTime="2967">All right, ready? </span></p>

<p class="speaker"><span class="line" data-starttime="2968"><span class="speakerName">Paul Kinlan</span>: Three, two, one. </span></p>

<p class="speaker"><span class="line" data-starttime="2969"><span class="speakerName">Pete LePage</span>: Two, one, go. </span></p>

<p class="speaker"><span class="line" data-starttime="2969"><span class="speakerName">Paul Kinlan</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2970"><span class="speakerName">Pete LePage</span>: Yes. </span><span class="line" data-startTime="2971">That was &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2972"><span class="speakerName">Paul Kinlan</span>: That didn't work? </span></p>

<p class="speaker"><span class="line" data-starttime="2972"><span class="speakerName">Pete LePage</span>: That was a lot </span><span class="line" data-startTime="2972">better than the first </span><span class="line" data-startTime="2974">time we tried it. </span><span class="line" data-startTime="2975">So all right, everybody. </span><span class="line" data-startTime="2977">Thanks very much. </span><span class="line" data-startTime="2978">Hope you have a wonderful day. </span><span class="line" data-startTime="2979">And talk to you soon. </span><span class="line" data-startTime="2981">Bye-bye. </span></p>

<p class="speaker"><span class="line" data-starttime="2982"><span class="speakerName">Paul Kinlan</span>: Thank you. </span><span class="line" data-startTime="2983">[MUSIC PLAYING] </span></p>