<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>Google I/O 2011: Kick-Ass Game Programming with Google Web Toolkit</h1>

<h2>Ray Cromwell, Bird, Rogers</h2>

<a class="video" href="http://youtu.be/F_sbusEUz5w">youtu.be/F_sbusEUz5w</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="1"><span class="speakerName">Ray Cromwell</span>: Hi, good afternoon. </span> <span class="line" data-startTime="2">My name is, uh, Ray Cromwell. </span> <span class="line" data-startTime="2">And this is Phil Rogers. </span> <span class="line" data-startTime="4">And we're members </span><span class="line" data-startTime="4">of the Google Web Toolkit team. </span> <span class="line" data-startTime="7">And today, our session is called </span><span class="line" data-startTime="9">"Kick-Ass Game Programming </span><span class="line" data-startTime="9">with Google Web Toolkit." </span><span class="line" data-startTime="11">Now you might be saying, </span><span class="line" data-startTime="13">what does "kick-ass </span><span class="line" data-startTime="13">game programming" mean? </span><span class="line" data-startTime="15">So we think it means </span><span class="line" data-startTime="15">two things &mdash; </span><span class="line" data-startTime="17">the first is </span><span class="line" data-startTime="17">that the kind of games </span><span class="line" data-startTime="18">that you'll be able to produce </span><span class="line" data-startTime="20">using some of the tools </span><span class="line" data-startTime="20">we're going to show you today </span><span class="line" data-startTime="22">are not kind of, like, </span><span class="line" data-startTime="22">HTML5 toys or prototypes </span><span class="line" data-startTime="25">or kind of, like, </span><span class="line" data-startTime="25">hobby curiosities. </span> <span class="line" data-startTime="27">But they'll be real games </span><span class="line" data-startTime="27">that, um, </span><span class="line" data-startTime="29">will be fun to play, </span><span class="line" data-startTime="30">and that people </span><span class="line" data-startTime="30">will be willing to pay for. </span></p>

<p><span class="line" data-startTime="32">And the second thing is, </span><span class="line" data-startTime="34">is that by using </span><span class="line" data-startTime="34">some of the tools, </span><span class="line" data-startTime="36">you'll get such a boost </span><span class="line" data-startTime="36">in productivity </span><span class="line" data-startTime="37">that you'll feel </span><span class="line" data-startTime="39">that just the programming </span><span class="line" data-startTime="39">itself kicks ass. </span> <span class="line" data-startTime="41">So if you remember </span><span class="line" data-startTime="41">from last year, </span><span class="line" data-startTime="43">um, we show &mdash; we showed </span><span class="line" data-startTime="43">the "Quake 2" port to HTML5 </span><span class="line" data-startTime="47">called "GWT Quake," </span><span class="line" data-startTime="47">and that was done with GWT also. </span> <span class="line" data-startTime="49">And, um, I thought that was </span><span class="line" data-startTime="49">a pretty kick-ass demo, </span><span class="line" data-startTime="52">but a lot of people came to me </span><span class="line" data-startTime="52">and said, you know, </span><span class="line" data-startTime="54">"Could you show me something </span><span class="line" data-startTime="54">more recent than 1997?" </span><span class="line" data-startTime="57">[laughter] </span></p>

<p class="speaker"><span class="line" data-starttime="57"><span class="speakerName">Ray Cromwell</span>: So, um, this year, </span><span class="line" data-startTime="59">we were happy to oblige, </span><span class="line" data-startTime="61">and in partnership with Rovio, </span><span class="line" data-startTime="63">who did an incredible job </span><span class="line" data-startTime="63">on short notice using its tools, </span><span class="line" data-startTime="66">um, we're happy to show you </span><span class="line" data-startTime="66">"Angry Birds," </span><span class="line" data-startTime="68">which you might've saw </span><span class="line" data-startTime="68">in the keynote. </span> <span class="line" data-startTime="70">And I'll tell you some things </span><span class="line" data-startTime="70">about it as Phil is playing it. </span> <span class="line" data-startTime="75">So one of the things, </span><span class="line" data-startTime="75">of course, </span><span class="line" data-startTime="77">is that it runs </span><span class="line" data-startTime="77">incredibly smoothly </span><span class="line" data-startTime="79">at 60 frames per second </span><span class="line" data-startTime="81">using, uh, WebGL </span><span class="line" data-startTime="83">or whatever technology </span><span class="line" data-startTime="83">your browser has </span><span class="line" data-startTime="85">to do the rendering. </span> <span class="line" data-startTime="87">And so as we were building this, </span><span class="line" data-startTime="89">one of the concerns we had was </span><span class="line" data-startTime="89">the physics performance. </span></p>

<p><span class="line" data-startTime="92">So, you know, "Angry Birds" </span><span class="line" data-startTime="93">is a computationally </span><span class="line" data-startTime="93">intensive game. </span> <span class="line" data-startTime="95">When you smash down the level, </span><span class="line" data-startTime="95">the, um &mdash; </span><span class="line" data-startTime="98">your engine </span><span class="line" data-startTime="98">basically has to calculate </span><span class="line" data-startTime="100">where each and every one </span><span class="line" data-startTime="100">of the pieces has to land </span><span class="line" data-startTime="103">in terms of their interactions </span><span class="line" data-startTime="103">and their collisions. </span> <span class="line" data-startTime="105">And that's very intensive, </span><span class="line" data-startTime="105">so we were wondering, </span><span class="line" data-startTime="107">Was JavaScript fast enough </span><span class="line" data-startTime="107">to run it? </span><span class="line" data-startTime="108">And thankfully, </span><span class="line" data-startTime="108">the answer is yes. </span> <span class="line" data-startTime="110">So with Chrome 11, </span><span class="line" data-startTime="110">V8 is just so incredibly fast </span><span class="line" data-startTime="113">that the physics layer runs </span><span class="line" data-startTime="113">buttery smooth. </span></p>

<p><span class="line" data-startTime="117">But three things I want to say </span><span class="line" data-startTime="117">about </span><span class="line" data-startTime="119">the actual implementation &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="119"><span class="speakerName">Bird</span>: Aah! Ow! </span></p>

<p class="speaker"><span class="line" data-starttime="121"><span class="speakerName">Ray Cromwell</span>: Don't get </span><span class="line" data-startTime="121">carried away, Phil. [laughs] </span><span class="line" data-startTime="123">Three things I want to say </span><span class="line" data-startTime="123">about the implementation are, </span><span class="line" data-startTime="125">is that, one, uh, </span><span class="line" data-startTime="125">it was built with GWT, </span><span class="line" data-startTime="128">two, it was built with &mdash; </span><span class="line" data-startTime="128">purely with HTML5 technology, </span><span class="line" data-startTime="132">and three, it was built </span><span class="line" data-startTime="132">with a new library for GWT </span><span class="line" data-startTime="135">that allows you to write games </span><span class="line" data-startTime="137">that we're going to present </span><span class="line" data-startTime="137">to you today. </span><span class="line" data-startTime="139">So, um, if, you know, </span><span class="line" data-startTime="139">Phil can manage </span><span class="line" data-startTime="141">to stop playing &mdash; </span><span class="line" data-startTime="143">and all right, </span><span class="line" data-startTime="143">I'll tell you what, </span><span class="line" data-startTime="145">I'll let you shoot </span><span class="line" data-startTime="145">one more bird. </span></p>

<p class="speaker"><span class="line" data-starttime="147"><span class="speakerName">Rogers</span>: All right. </span><span class="line" data-startTime="147">[chuckles] </span></p>

<p class="speaker"><span class="line" data-starttime="149"><span class="speakerName">Ray Cromwell</span>: All right. </span></p>

<p class="speaker"><span class="line" data-starttime="149"><span class="speakerName">Bird</span>: Aah! </span><span class="line" data-startTime="152">Oh... got it. </span><span class="line" data-startTime="152">[applause] </span></p>

<p class="speaker"><span class="line" data-starttime="156"><span class="speakerName">Ray Cromwell</span>: Okay, so the question </span><span class="line" data-startTime="156">some people might have </span><span class="line" data-startTime="159">is, "Why GWT"? </span><span class="line" data-startTime="159">What is GWT going to do for you? </span><span class="line" data-startTime="162">So if you're a seasoned </span><span class="line" data-startTime="162">GWT developer, </span><span class="line" data-startTime="164">you already know </span><span class="line" data-startTime="164">that GWT is pretty awesome </span><span class="line" data-startTime="167">for developing enterprise apps. </span> <span class="line" data-startTime="169">But, you know, games, you know &mdash; </span><span class="line" data-startTime="171">does enterprise have </span><span class="line" data-startTime="171">anything to do with games? </span><span class="line" data-startTime="173">Well, if you're </span><span class="line" data-startTime="173">a beginner JavaScript pro &mdash; </span><span class="line" data-startTime="176">um, GWT programmer, </span><span class="line" data-startTime="178">or JavaScript &mdash; </span><span class="line" data-startTime="178">JavaScript programmer, </span><span class="line" data-startTime="179">you might be saying, </span><span class="line" data-startTime="181">"I already know </span><span class="line" data-startTime="181">how to write JavaScript. </span> <span class="line" data-startTime="183">"I already know HTML5 </span><span class="line" data-startTime="183">and CSS and Canvas. </span> <span class="line" data-startTime="185">"Why would I </span><span class="line" data-startTime="185">write my game in GWT </span><span class="line" data-startTime="187">when I can just do it by hand? </span><span class="line" data-startTime="187">What &mdash; where's the benefit?" </span><span class="line" data-startTime="189">And I'm not going to say, </span><span class="line" data-startTime="189">actually, you should use GWT. </span></p>

<p><span class="line" data-startTime="192">Um, if you are most comfortable </span><span class="line" data-startTime="192">in JavaScript, </span><span class="line" data-startTime="195">or your team is most comfortable </span><span class="line" data-startTime="195">in JavaScript and HTML5, </span><span class="line" data-startTime="197">that's a very viable strategy, </span><span class="line" data-startTime="199">and it's a very good way </span><span class="line" data-startTime="199">to write a game. </span> <span class="line" data-startTime="200">And as many of the presentations </span><span class="line" data-startTime="200">that Google I/O has shown you, </span><span class="line" data-startTime="203">including Seth's awesome </span><span class="line" data-startTime="203">"Super Browser Turbo Mix HD," </span><span class="line" data-startTime="206">showed you yesterday, </span><span class="line" data-startTime="207">you can build a game very fast </span><span class="line" data-startTime="207">in HTML5 and JavaScript. </span> <span class="line" data-startTime="210">But hopefully, we can show you </span><span class="line" data-startTime="210">a few additional things </span><span class="line" data-startTime="213">that GWT can provide </span><span class="line" data-startTime="215">that might persuade you </span><span class="line" data-startTime="215">to just try it out, </span><span class="line" data-startTime="217">because, um, </span><span class="line" data-startTime="217">it's going to boost, um, </span><span class="line" data-startTime="220">some of your capabilities. </span></p>

<p><span class="line" data-startTime="221">So let's take a look </span><span class="line" data-startTime="221">at some of those. </span> <span class="line" data-startTime="224">First, um, it lets you leverage </span><span class="line" data-startTime="224">a familiar Java toolchain. </span> <span class="line" data-startTime="228">So if you're </span><span class="line" data-startTime="228">a Java programmer already, </span><span class="line" data-startTime="230">and you like Java IDE, </span><span class="line" data-startTime="232">if you like Eclipse </span><span class="line" data-startTime="232">or IntelliJ, </span><span class="line" data-startTime="233">you like your debug environment, </span><span class="line" data-startTime="233">you like your build system, </span><span class="line" data-startTime="236">you like your testing framework, </span><span class="line" data-startTime="238">um, you're gonna get </span><span class="line" data-startTime="238">all of that. </span> <span class="line" data-startTime="240">Plus, you can leverage </span><span class="line" data-startTime="240">a lot of libraries </span><span class="line" data-startTime="242">that are already out there </span><span class="line" data-startTime="242">in the ecosystem, </span><span class="line" data-startTime="244">like physics libraries, </span><span class="line" data-startTime="244">AI libraries, </span><span class="line" data-startTime="247">image processing libraries, </span><span class="line" data-startTime="247">and so on </span><span class="line" data-startTime="248">without having to do much work. </span></p>

<p><span class="line" data-startTime="250">So you sort of get </span><span class="line" data-startTime="250">to leverage stuff &mdash; </span><span class="line" data-startTime="252">work that people </span><span class="line" data-startTime="252">have already done. </span> <span class="line" data-startTime="254">The second thing is, </span><span class="line" data-startTime="254">is that you can share code </span><span class="line" data-startTime="256">between the client </span><span class="line" data-startTime="256">and the server. </span> <span class="line" data-startTime="257">So let's say you've got a game, </span><span class="line" data-startTime="259">and you want to put </span><span class="line" data-startTime="259">anti-cheat mechanisms in it. </span> <span class="line" data-startTime="262">So you're posting high scores </span><span class="line" data-startTime="262">back to the server, </span><span class="line" data-startTime="264">and you don't want people </span><span class="line" data-startTime="264">to just, like, </span><span class="line" data-startTime="266">do their own HTTP or XHR post </span><span class="line" data-startTime="266">to your server and say, </span><span class="line" data-startTime="269">"I got a million points." </span><span class="line" data-startTime="270">So how would you verify that? </span><span class="line" data-startTime="272">So one of the things you can do </span><span class="line" data-startTime="272">is you can take your game logic, </span><span class="line" data-startTime="274">like, um, your physics </span><span class="line" data-startTime="274">and your AI, </span><span class="line" data-startTime="277">and since it's written in Java, </span><span class="line" data-startTime="277">you can run 'em on the server, </span><span class="line" data-startTime="279">like an app engine, </span><span class="line" data-startTime="280">so that when you post </span><span class="line" data-startTime="280">a high score, </span><span class="line" data-startTime="282">you can send over </span><span class="line" data-startTime="282">a couple bits of data, </span><span class="line" data-startTime="284">like what the user actions were </span><span class="line" data-startTime="286">and what the random number </span><span class="line" data-startTime="286">generator seeds were, </span><span class="line" data-startTime="288">and replay the game </span><span class="line" data-startTime="289">in the server engine </span><span class="line" data-startTime="289">environment, </span><span class="line" data-startTime="291">and validate that actually </span><span class="line" data-startTime="291">what they were saying is true. </span> <span class="line" data-startTime="294">And that's actually, um, </span><span class="line" data-startTime="295">we've actually done </span><span class="line" data-startTime="295">some work on that, </span><span class="line" data-startTime="297">and it works pretty well. </span></p>

<p><span class="line" data-startTime="299">So you get to leverage code </span><span class="line" data-startTime="299">between platforms, </span><span class="line" data-startTime="301">including, say, Android. </span> <span class="line" data-startTime="302">So you might've </span><span class="line" data-startTime="302">written some code where &mdash; </span><span class="line" data-startTime="304">for your game on HTML5, </span><span class="line" data-startTime="304">but since it's written in Java, </span><span class="line" data-startTime="306">you could reuse those same </span><span class="line" data-startTime="306">classes for an Android game. </span> <span class="line" data-startTime="308">So that's another benefit </span><span class="line" data-startTime="308">you get. </span> <span class="line" data-startTime="310">And then you also get, </span><span class="line" data-startTime="310">of course, </span><span class="line" data-startTime="312">small, fast JavaScript. </span> <span class="line" data-startTime="314">So let's go to the next slide. </span> <span class="line" data-startTime="316">So as an example of leveraging </span><span class="line" data-startTime="316">familiar tools, </span><span class="line" data-startTime="319">you might be familiar </span><span class="line" data-startTime="319">with Box2D. </span> <span class="line" data-startTime="321">It was originally a C++ library </span><span class="line" data-startTime="323">to emulate rigid-body </span><span class="line" data-startTime="323">2-D physics. </span> <span class="line" data-startTime="325">And I don't know what </span><span class="line" data-startTime="325">the actual statistics are, </span><span class="line" data-startTime="328">but probably 90% </span><span class="line" data-startTime="328">of all the top games </span><span class="line" data-startTime="330">in the iPhone store </span><span class="line" data-startTime="330">were written using Box2D, </span><span class="line" data-startTime="332">including, like, "Angry Birds." </span><span class="line" data-startTime="334">So it's very, very popular </span><span class="line" data-startTime="334">for doing game engines. </span></p>

<p><span class="line" data-startTime="337">Um, now some guys </span><span class="line" data-startTime="337">actually went out </span><span class="line" data-startTime="340">and they ported it to Java. </span> <span class="line" data-startTime="340">It's called JBox2D. </span> <span class="line" data-startTime="342">And that's been around </span><span class="line" data-startTime="342">for a while, </span><span class="line" data-startTime="344">but I don't know very many </span><span class="line" data-startTime="344">people who are using it. </span> <span class="line" data-startTime="346">And that actually helped us </span><span class="line" data-startTime="346">out a lot, </span><span class="line" data-startTime="349">because a couple of guys </span><span class="line" data-startTime="349">at Google saw that library, </span><span class="line" data-startTime="352">and in just 30 minutes, </span><span class="line" data-startTime="352">they were able to port it </span><span class="line" data-startTime="354">and optimize it </span><span class="line" data-startTime="354">to run efficiently in V8 </span><span class="line" data-startTime="356">inside the browser with GWT. </span> <span class="line" data-startTime="358">So that demonstrates the ability </span><span class="line" data-startTime="360">to leverage </span><span class="line" data-startTime="360">the existing ecosystem </span><span class="line" data-startTime="362">very effectively with GWT </span><span class="line" data-startTime="364">and also to leverage, </span><span class="line" data-startTime="364">um, code-sharing, </span><span class="line" data-startTime="366">because it was originally </span><span class="line" data-startTime="366">written in Java </span><span class="line" data-startTime="368">for an &mdash; </span><span class="line" data-startTime="368">a whole nother platform, </span><span class="line" data-startTime="370">and we were able </span><span class="line" data-startTime="370">to repurpose it. </span></p>

<p><span class="line" data-startTime="373">So just to sort of, um, </span><span class="line" data-startTime="376">say a few things </span><span class="line" data-startTime="376">about the GWT Compiler, </span><span class="line" data-startTime="378">which actually I happen </span><span class="line" data-startTime="378">to work on. </span> <span class="line" data-startTime="380">Um, it basically is not just </span><span class="line" data-startTime="380">a Java-to-JavaScript translator. </span> <span class="line" data-startTime="383">It's an optimizing compiler </span><span class="line" data-startTime="383">like a regular C compiler. </span> <span class="line" data-startTime="385">And what it does </span><span class="line" data-startTime="385">is it does things </span><span class="line" data-startTime="387">like removing unused code. </span> <span class="line" data-startTime="389">It evaluates things that &mdash; </span><span class="line" data-startTime="389">in compile time </span><span class="line" data-startTime="391">that it doesn't need </span><span class="line" data-startTime="391">to do at run time. </span> <span class="line" data-startTime="393">It inlines functions, </span><span class="line" data-startTime="395">and it heavily obfuscates </span><span class="line" data-startTime="395">the result. </span> <span class="line" data-startTime="397">So, um, one aspect of that </span><span class="line" data-startTime="400">is that smaller code </span><span class="line" data-startTime="400">tends to load faster. </span></p>

<p><span class="line" data-startTime="402">So the smaller the code </span><span class="line" data-startTime="402">that's compiled, </span><span class="line" data-startTime="404">the faster your game's </span><span class="line" data-startTime="404">gonna load up. </span> <span class="line" data-startTime="406">Secondly, when it </span><span class="line" data-startTime="406">compiles the code, </span><span class="line" data-startTime="408">it computes a hash </span><span class="line" data-startTime="408">of the code, </span><span class="line" data-startTime="410">and it names the output file </span><span class="line" data-startTime="410">according to that hash. </span> <span class="line" data-startTime="413">Now that's very important, </span><span class="line" data-startTime="413">because it allows us </span><span class="line" data-startTime="415">to do something </span><span class="line" data-startTime="415">called perfect caching. </span> <span class="line" data-startTime="417">So when the user </span><span class="line" data-startTime="417">accesses your game, </span><span class="line" data-startTime="419">it &mdash; the file name is related </span><span class="line" data-startTime="419">to the actual bytes </span><span class="line" data-startTime="422">of the original source code. </span> <span class="line" data-startTime="424">And that &mdash; your browser's told </span><span class="line" data-startTime="424">to cache that forever. </span> <span class="line" data-startTime="427">So the next time you come </span><span class="line" data-startTime="427">to play the game, </span><span class="line" data-startTime="429">even if you're offline </span><span class="line" data-startTime="429">or online, </span><span class="line" data-startTime="431">it doesn't even go </span><span class="line" data-startTime="431">to the web server at all </span><span class="line" data-startTime="433">to even check if it's been </span><span class="line" data-startTime="433">updated or changed. </span></p>

<p><span class="line" data-startTime="435">It basically says, "Oh, </span><span class="line" data-startTime="435">I'm just gonna load that up. </span> <span class="line" data-startTime="437">It's cached forever </span><span class="line" data-startTime="437">right out of my cache." </span><span class="line" data-startTime="439">Now if you do happen </span><span class="line" data-startTime="439">to change the game, </span><span class="line" data-startTime="441">what happens is, is you get </span><span class="line" data-startTime="441">a new file on the server </span><span class="line" data-startTime="443">that has a different file name, </span><span class="line" data-startTime="445">and there's a very small GWT </span><span class="line" data-startTime="445">booster app script </span><span class="line" data-startTime="447">that checks, um &mdash; </span><span class="line" data-startTime="447">that &mdash; that is downloaded </span><span class="line" data-startTime="450">and basically points you </span><span class="line" data-startTime="450">at the new &mdash; </span><span class="line" data-startTime="452">redirects you to the new file. </span> <span class="line" data-startTime="453">But that's only gonna </span><span class="line" data-startTime="453">be downloaded once, </span><span class="line" data-startTime="455">so you only download </span><span class="line" data-startTime="455">when things change. </span> <span class="line" data-startTime="457">Actually, you might have to go </span><span class="line" data-startTime="457">the server to revalidate. </span> <span class="line" data-startTime="460">Last but not least, </span><span class="line" data-startTime="460">inlining the code </span><span class="line" data-startTime="462">actually helps the compiler </span><span class="line" data-startTime="462">make it smaller, </span><span class="line" data-startTime="464">believe it or not. </span> <span class="line" data-startTime="465">But for every function call </span><span class="line" data-startTime="465">you eliminate, </span><span class="line" data-startTime="467">that's excess overhead </span><span class="line" data-startTime="467">in your run time </span><span class="line" data-startTime="469">that the V8 engine </span><span class="line" data-startTime="469">doesn't have to worry </span><span class="line" data-startTime="471">about trying to optimize. </span></p>

<p><span class="line" data-startTime="473">So inlining also speeds </span><span class="line" data-startTime="473">things up, </span><span class="line" data-startTime="475">so you get smaller code </span><span class="line" data-startTime="475">and faster code. </span> <span class="line" data-startTime="478">So let's talk a little bit </span><span class="line" data-startTime="478">about HTML5, </span><span class="line" data-startTime="481">because HTML5 &mdash; </span><span class="line" data-startTime="481">when people use the term, </span><span class="line" data-startTime="485">it actually tends to mean </span><span class="line" data-startTime="485">two different things. </span> <span class="line" data-startTime="487">So there's the HTML5 spec </span><span class="line" data-startTime="488">that's in </span><span class="line" data-startTime="488">the standards committees, </span><span class="line" data-startTime="490">which is the formal HTML5 spec. </span> <span class="line" data-startTime="492">And that includes things like, </span><span class="line" data-startTime="492">you know, Canvas, </span><span class="line" data-startTime="494">and audio tags and video tags </span><span class="line" data-startTime="494">and the app cache, </span><span class="line" data-startTime="498">but it doesn't include things </span><span class="line" data-startTime="498">like WebGL </span><span class="line" data-startTime="500">or, um, say, </span><span class="line" data-startTime="500">the new web audio API. </span></p>

<p><span class="line" data-startTime="504">But when you go look around </span><span class="line" data-startTime="504">in the Twittersphere </span><span class="line" data-startTime="506">or the blogosphere, </span><span class="line" data-startTime="506">and people say "HTML5," </span><span class="line" data-startTime="508">what they really mean </span><span class="line" data-startTime="508">is colloquial HTML5. </span> <span class="line" data-startTime="510">They mean what's </span><span class="line" data-startTime="510">in the latest sort of tip </span><span class="line" data-startTime="513">of the source repositories </span><span class="line" data-startTime="513">of the browsers out there, </span><span class="line" data-startTime="515">the latest things they've added, </span><span class="line" data-startTime="517">because HTML5 is </span><span class="line" data-startTime="517">a continuously evolving spec. </span> <span class="line" data-startTime="520">And so that's what </span><span class="line" data-startTime="520">we're kind of targeting, </span><span class="line" data-startTime="522">and so throughout the rest </span><span class="line" data-startTime="522">of the presentation, </span><span class="line" data-startTime="524">when we talk about HTML5, </span><span class="line" data-startTime="524">that's what we're talking about. </span> <span class="line" data-startTime="527">But so what does HTML5 </span><span class="line" data-startTime="527">do for games? </span><span class="line" data-startTime="529">So WebGL is big. </span> <span class="line" data-startTime="531">Any browser </span><span class="line" data-startTime="531">that has WebGL will able &mdash; </span><span class="line" data-startTime="532">will be able to really, </span><span class="line" data-startTime="534">really accelerate </span><span class="line" data-startTime="534">graphics operations </span><span class="line" data-startTime="536">directly to the hardware. </span> <span class="line" data-startTime="538">You won't have </span><span class="line" data-startTime="538">much of JavaScript </span><span class="line" data-startTime="540">or the operating system </span><span class="line" data-startTime="540">getting in the way. </span></p>

<p><span class="line" data-startTime="542">If you don't happen </span><span class="line" data-startTime="542">to have that, </span><span class="line" data-startTime="543">um, CSS 3 is usually </span><span class="line" data-startTime="543">hardware-accelerated </span><span class="line" data-startTime="545">on many platforms, </span><span class="line" data-startTime="545">including mobile platforms, </span><span class="line" data-startTime="547">so that actually is </span><span class="line" data-startTime="547">a big help, as well. </span> <span class="line" data-startTime="549">And we're gonna show you </span><span class="line" data-startTime="549">in some demos later </span><span class="line" data-startTime="552">how we leverage those things. </span> <span class="line" data-startTime="554">So next slide. </span> <span class="line" data-startTime="557">So let's talk a little bit </span><span class="line" data-startTime="557">about the game &mdash; </span><span class="line" data-startTime="559">overview of a game architecture </span><span class="line" data-startTime="559">before we move on. </span> <span class="line" data-startTime="562">So typically, you need </span><span class="line" data-startTime="562">three things </span><span class="line" data-startTime="564">when you're programming a game. </span> <span class="line" data-startTime="566">First, your game </span><span class="line" data-startTime="566">needs to be able </span><span class="line" data-startTime="567">to communicate </span><span class="line" data-startTime="567">with the outside world. </span> <span class="line" data-startTime="569">And that means you need to be </span><span class="line" data-startTime="569">able to get input from the user, </span><span class="line" data-startTime="571">like he pulls the trigger </span><span class="line" data-startTime="571">to fire, </span><span class="line" data-startTime="573">or you get a packet </span><span class="line" data-startTime="573">over the network </span><span class="line" data-startTime="575">because some other person </span><span class="line" data-startTime="575">pulled a trigger, </span><span class="line" data-startTime="577">and he's firing at you. </span></p>

<p><span class="line" data-startTime="579">And you need output. </span> <span class="line" data-startTime="579">So you need to be able to, um, </span><span class="line" data-startTime="581">display those changes </span><span class="line" data-startTime="581">back to the user. </span> <span class="line" data-startTime="583">And you need to be able </span><span class="line" data-startTime="583">to play sounds, </span><span class="line" data-startTime="585">and you need to be able </span><span class="line" data-startTime="585">to send packets </span><span class="line" data-startTime="587">back to other people </span><span class="line" data-startTime="587">who you're connected to. </span> <span class="line" data-startTime="589">So you basically need </span><span class="line" data-startTime="589">an I/O system. </span> <span class="line" data-startTime="590">Secondly, although programming </span><span class="line" data-startTime="590">the code for the game </span><span class="line" data-startTime="593">takes up a lot of effort, </span><span class="line" data-startTime="595">for most really polished games, </span><span class="line" data-startTime="597">the art assets actually are </span><span class="line" data-startTime="597">the most important thing. </span> <span class="line" data-startTime="601">So dealing, like, </span><span class="line" data-startTime="601">for example, you know &mdash; </span><span class="line" data-startTime="603">probably "Angry Birds" </span><span class="line" data-startTime="605">or &mdash; or another game like that, </span><span class="line" data-startTime="606">the assets probably </span><span class="line" data-startTime="606">make up a factor </span><span class="line" data-startTime="608">of ten times or bigger </span><span class="line" data-startTime="608">than the actual code. </span> <span class="line" data-startTime="611">So being able to load </span><span class="line" data-startTime="611">those assets efficiently </span><span class="line" data-startTime="614">and cache them offline, </span><span class="line" data-startTime="616">um, and load them </span><span class="line" data-startTime="616">in the right order </span><span class="line" data-startTime="618">so you can get the person </span><span class="line" data-startTime="618">playing as soon as possible </span><span class="line" data-startTime="620">is very important. </span> <span class="line" data-startTime="622">So asset management </span><span class="line" data-startTime="622">is important. </span></p>

<p><span class="line" data-startTime="623">And then third is the game loop. </span> <span class="line" data-startTime="625">So most games have, </span><span class="line" data-startTime="625">like, an internal clock </span><span class="line" data-startTime="627">that's usually keyed </span><span class="line" data-startTime="627">to the, um, frame rate </span><span class="line" data-startTime="629">or the vertical sync period. </span> <span class="line" data-startTime="631">And what happens is, </span><span class="line" data-startTime="631">is at every tick of that clock, </span><span class="line" data-startTime="634">three things happen. </span> <span class="line" data-startTime="635">One is we process all input </span><span class="line" data-startTime="635">that &mdash; from the user. </span> <span class="line" data-startTime="638">So maybe, you know, the user </span><span class="line" data-startTime="638">pressed their mouse button </span><span class="line" data-startTime="642">or he &mdash; you know &mdash; </span><span class="line" data-startTime="642">he touched the tablet. </span> <span class="line" data-startTime="644">Maybe you got a packet </span><span class="line" data-startTime="644">from the network </span><span class="line" data-startTime="646">because somebody </span><span class="line" data-startTime="646">chatted with you. </span></p>

<p><span class="line" data-startTime="648">So you need to take those inputs </span><span class="line" data-startTime="649">and then feed them </span><span class="line" data-startTime="649">into the next stage, </span><span class="line" data-startTime="651">which is to update </span><span class="line" data-startTime="651">the state of the world </span><span class="line" data-startTime="653">based on those inputs. </span> <span class="line" data-startTime="655">And that usually takes </span><span class="line" data-startTime="655">into account things </span><span class="line" data-startTime="657">like running physics </span><span class="line" data-startTime="657">simulations, running AI, </span><span class="line" data-startTime="659">um, running game logic, </span><span class="line" data-startTime="662">like updating the scoreboard </span><span class="line" data-startTime="662">'cause someone got a kill, </span><span class="line" data-startTime="664">things like that. </span> <span class="line" data-startTime="665">And then finally, after you've </span><span class="line" data-startTime="665">updated the state of the world, </span><span class="line" data-startTime="668">you need to communicate </span><span class="line" data-startTime="668">the state of the world </span><span class="line" data-startTime="670">back to the user, </span><span class="line" data-startTime="671">and that means </span><span class="line" data-startTime="671">rendering graphics. </span> <span class="line" data-startTime="674">That means rendering, </span><span class="line" data-startTime="674">um, audio, </span><span class="line" data-startTime="676">and sending packets </span><span class="line" data-startTime="676">back out to other players. </span> <span class="line" data-startTime="678">So that's basically very briefly </span><span class="line" data-startTime="678">the three important things </span><span class="line" data-startTime="682">that make up a game engine. </span></p>

<p><span class="line" data-startTime="685">So let's discuss </span><span class="line" data-startTime="685">some of the challenges. </span> <span class="line" data-startTime="687">So when you're developing </span><span class="line" data-startTime="687">for multiple browsers </span><span class="line" data-startTime="690">or for multiple platforms, </span><span class="line" data-startTime="692">it's very difficult to get </span><span class="line" data-startTime="692">optimal versions </span><span class="line" data-startTime="695">of these components </span><span class="line" data-startTime="695">on various platforms. </span> <span class="line" data-startTime="698">Uh, to give you an example, </span><span class="line" data-startTime="699">let's say you're doing </span><span class="line" data-startTime="699">Canvas work. </span> <span class="line" data-startTime="701">Now Canvas &mdash; </span><span class="line" data-startTime="701">the Canvas API on some browsers </span><span class="line" data-startTime="703">is accelerated really well. </span> <span class="line" data-startTime="704">For example, IE9, </span><span class="line" data-startTime="704">believe it or not, </span><span class="line" data-startTime="706">does an amazing job </span><span class="line" data-startTime="706">with Canvas. </span></p>

<p><span class="line" data-startTime="708">And as you've seen, uh, </span><span class="line" data-startTime="710">Chrome 11 and Chrome 12 </span><span class="line" data-startTime="710">and later versions </span><span class="line" data-startTime="712">actually is doing </span><span class="line" data-startTime="712">really well with it now, too, </span><span class="line" data-startTime="714">but other browsers not so much. </span> <span class="line" data-startTime="716">So the problem is, is if you </span><span class="line" data-startTime="716">program directly to Canvas, </span><span class="line" data-startTime="719">you never know which particular </span><span class="line" data-startTime="719">draw call you're making </span><span class="line" data-startTime="722">is going to be </span><span class="line" data-startTime="722">the accelerated path, </span><span class="line" data-startTime="724">or which is going to be </span><span class="line" data-startTime="724">the slow path. </span> <span class="line" data-startTime="726">So that's sort of a minefield </span><span class="line" data-startTime="728">that you don't want </span><span class="line" data-startTime="728">to basically get into. </span></p>

<p><span class="line" data-startTime="730">You want someone to absolve you </span><span class="line" data-startTime="730">of that responsibility. </span> <span class="line" data-startTime="732">Then on other browsers, </span><span class="line" data-startTime="732">you have WebGL. </span> <span class="line" data-startTime="734">WebGL's pretty much always </span><span class="line" data-startTime="734">guaranteed to be fast. </span> <span class="line" data-startTime="736">However, some browsers </span><span class="line" data-startTime="736">don't have WebGL, </span><span class="line" data-startTime="738">so if you wrote your game </span><span class="line" data-startTime="738">purely to WebGL, </span><span class="line" data-startTime="740">you might kind of be stuck. </span> <span class="line" data-startTime="742">And last but not least, </span><span class="line" data-startTime="742">you know, </span><span class="line" data-startTime="744">maybe you're using CSS 3 </span><span class="line" data-startTime="744">to do all your sprite graphics, </span><span class="line" data-startTime="747">and they're not accelerated </span><span class="line" data-startTime="747">on a particular platform. </span></p>

<p><span class="line" data-startTime="750">So that's basically </span><span class="line" data-startTime="750">one of the big challenges. </span> <span class="line" data-startTime="753">Likewise, asset management &mdash; </span><span class="line" data-startTime="756">so each and every platform </span><span class="line" data-startTime="756">has a different &mdash; </span><span class="line" data-startTime="758">unfortunately, </span><span class="line" data-startTime="758">a different way of dealing </span><span class="line" data-startTime="760">with offline assets right now. </span> <span class="line" data-startTime="762">So some browsers implement, </span><span class="line" data-startTime="762">you know, app cache. </span> <span class="line" data-startTime="764">They have local storage. </span> <span class="line" data-startTime="765">They have index DB, DOM storage. </span> <span class="line" data-startTime="768">If you're on Android you have </span><span class="line" data-startTime="768">a different storage mechanism. </span> <span class="line" data-startTime="770">If you're using Flash, </span><span class="line" data-startTime="771">you've got a different way </span><span class="line" data-startTime="771">of controlling assets, </span><span class="line" data-startTime="773">so managing assets, </span><span class="line" data-startTime="773">loading them over the network, </span><span class="line" data-startTime="776">and caching them locally </span><span class="line" data-startTime="776">is typically a challenge. </span></p>

<p><span class="line" data-startTime="779">And then last but not least, </span><span class="line" data-startTime="779">the game loop &mdash; </span><span class="line" data-startTime="781">so you might have seen </span><span class="line" data-startTime="781">in several presentations here </span><span class="line" data-startTime="783">that traditionally, like, </span><span class="line" data-startTime="784">if you're </span><span class="line" data-startTime="784">a JavaScript programmer, </span><span class="line" data-startTime="786">you think in terms </span><span class="line" data-startTime="786">of using timers </span><span class="line" data-startTime="788">to kick off your rendering loop. </span> <span class="line" data-startTime="790">Well, that's pretty bad, </span><span class="line" data-startTime="790">because when you use, like, </span><span class="line" data-startTime="792">setTimeout in JavaScript, </span><span class="line" data-startTime="793">the browser doesn't really know </span><span class="line" data-startTime="793">what you're doing. </span> <span class="line" data-startTime="795">So you could be rendering, </span><span class="line" data-startTime="797">but you could be doing </span><span class="line" data-startTime="797">something else. </span> <span class="line" data-startTime="799">And that's unfortunate, </span><span class="line" data-startTime="800">because if you're </span><span class="line" data-startTime="800">in a different tab, </span><span class="line" data-startTime="802">uh, or you &mdash; </span><span class="line" data-startTime="802">or the window's minimized, </span><span class="line" data-startTime="804">the browser is just gonna </span><span class="line" data-startTime="804">keep firing that timer </span><span class="line" data-startTime="806">and doing tons of work. </span></p>

<p><span class="line" data-startTime="807">And it's gonna chew </span><span class="line" data-startTime="807">your battery life, </span><span class="line" data-startTime="809">and it's gonna heat up </span><span class="line" data-startTime="809">your machine. </span> <span class="line" data-startTime="811">So different platforms </span><span class="line" data-startTime="811">have different ways </span><span class="line" data-startTime="813">of syncing with the vertical </span><span class="line" data-startTime="813">blanking period, </span><span class="line" data-startTime="815">or the redraw period </span><span class="line" data-startTime="815">of the &mdash; of the platform. </span> <span class="line" data-startTime="817">So in the newer version </span><span class="line" data-startTime="817">of the browser, </span><span class="line" data-startTime="819">you should have </span><span class="line" data-startTime="819">this requestAnimationFrame </span><span class="line" data-startTime="820">in colloquial HTML5. </span> <span class="line" data-startTime="822">That sort of takes care </span><span class="line" data-startTime="822">of that for you. </span> <span class="line" data-startTime="824">But if you're deploying to, </span><span class="line" data-startTime="824">like, Flash, it's different, </span><span class="line" data-startTime="826">and if you're deploying to, </span><span class="line" data-startTime="826">like, Android, it's different. </span> <span class="line" data-startTime="828">So that's </span><span class="line" data-startTime="828">basically another challenge, </span><span class="line" data-startTime="830">is basically syncing &mdash; </span><span class="line" data-startTime="830">syncing video </span><span class="line" data-startTime="832">and timing events </span><span class="line" data-startTime="832">on different platforms. </span> <span class="line" data-startTime="834">So basically, I'm gonna hand it </span><span class="line" data-startTime="834">over to Phil right now, </span><span class="line" data-startTime="836">and he's actually gonna describe </span><span class="line" data-startTime="837">how we solve </span><span class="line" data-startTime="837">some of those problems </span><span class="line" data-startTime="839">with GWT and the new library </span><span class="line" data-startTime="839">we're introducing. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="841"><span class="speakerName">Rogers</span>: Cool, thanks. </span> <span class="line" data-startTime="843">So to answer these questions, </span><span class="line" data-startTime="843">abstraction is key. </span> <span class="line" data-startTime="845">Um, you might remember </span><span class="line" data-startTime="845">that GWT abstracts away </span><span class="line" data-startTime="848">the differences </span><span class="line" data-startTime="848">between browsers, </span><span class="line" data-startTime="849">which is Firefox 4 or IE9. </span> <span class="line" data-startTime="852">We can apply that same logic </span><span class="line" data-startTime="852">to games, </span><span class="line" data-startTime="854">abstracting away not only </span><span class="line" data-startTime="854">the browser differences, </span><span class="line" data-startTime="856">but the differences </span><span class="line" data-startTime="856">between platforms, as well, </span><span class="line" data-startTime="859">so the Java platform </span><span class="line" data-startTime="859">or Android as a platform </span><span class="line" data-startTime="861">or the browser as a platform. </span> <span class="line" data-startTime="863">So to do that, we wrote </span><span class="line" data-startTime="863">a library called ForPlay. </span> <span class="line" data-startTime="867">ForPlay is an abstraction layer </span><span class="line" data-startTime="867">for games </span><span class="line" data-startTime="869">written in Java, </span><span class="line" data-startTime="869">but is GWT compatible. </span> <span class="line" data-startTime="871">So you get all the benefits </span><span class="line" data-startTime="873">of your Java </span><span class="line" data-startTime="873">development environment, </span><span class="line" data-startTime="874">but you can also compile it </span><span class="line" data-startTime="876">onto fast and efficient </span><span class="line" data-startTime="876">JavaScript. </span> <span class="line" data-startTime="877">And this is all free </span><span class="line" data-startTime="877">and open source. </span></p>

<p><span class="line" data-startTime="880">It's a very alpha version </span><span class="line" data-startTime="880">at the moment, </span><span class="line" data-startTime="882">but as you can see, we wrote </span><span class="line" data-startTime="882">a kick-ass game with it, </span><span class="line" data-startTime="884">and we hope you guys will to. </span> <span class="line" data-startTime="885">The source is available here, </span><span class="line" data-startTime="885">as well as samples </span><span class="line" data-startTime="887">for everything we're gonna </span><span class="line" data-startTime="887">show from here on out. </span> <span class="line" data-startTime="890">So you might be thinking, </span><span class="line" data-startTime="892">service provider interface </span><span class="line" data-startTime="892">in Java, </span><span class="line" data-startTime="894">and that is what &mdash; </span><span class="line" data-startTime="894">what this is. </span> <span class="line" data-startTime="896">Basically, you write </span><span class="line" data-startTime="897">to a core game API </span><span class="line" data-startTime="897">called ForPlay, </span><span class="line" data-startTime="899">and we swap in </span><span class="line" data-startTime="899">the implementation </span><span class="line" data-startTime="901">for each platform. </span> <span class="line" data-startTime="903">For instance, </span><span class="line" data-startTime="903">if you're running on Java, </span><span class="line" data-startTime="905">we'll swap in the Java platform. </span> <span class="line" data-startTime="906">If you're on GWT, </span><span class="line" data-startTime="906">we'll swap in that platform, </span><span class="line" data-startTime="908">Android, and maybe even Flash &mdash; </span><span class="line" data-startTime="908">we'll show you later. </span></p>

<p><span class="line" data-startTime="911">So let me start with a demo &mdash; </span><span class="line" data-startTime="911">always fun. </span> <span class="line" data-startTime="915">And then we'll actually dive </span><span class="line" data-startTime="915">into the game and such. </span> <span class="line" data-startTime="917">So this is a game. </span> <span class="line" data-startTime="919">It's running in the browser, </span><span class="line" data-startTime="919">as you can see. </span> <span class="line" data-startTime="921">We're actually using </span><span class="line" data-startTime="921">WebGL here. </span> <span class="line" data-startTime="922">This is written using ForPlay. </span> <span class="line" data-startTime="924">And you can see, this is </span><span class="line" data-startTime="924">a simple sprite-based game. </span> <span class="line" data-startTime="926">I click the mouse. </span> <span class="line" data-startTime="926">We have physics. </span> <span class="line" data-startTime="928">We're using the Box2D </span><span class="line" data-startTime="928">physics engine here. </span> <span class="line" data-startTime="930">And you can see it's a &mdash; </span><span class="line" data-startTime="930">it's a fairly simple game. </span> <span class="line" data-startTime="932">You click our things. </span> <span class="line" data-startTime="932">They bounce. </span> <span class="line" data-startTime="934">We have different, say, </span><span class="line" data-startTime="934">physics properties </span><span class="line" data-startTime="936">on, say, this blue thing </span><span class="line" data-startTime="936">versus the box. </span> <span class="line" data-startTime="939">We even have some fun stuff </span><span class="line" data-startTime="939">in here. </span> <span class="line" data-startTime="943">[laughs] </span><span class="line" data-startTime="943">[laughter] </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="945"><span class="speakerName">Rogers</span>: And &mdash; and what's </span><span class="line" data-startTime="945">really cool about this is </span><span class="line" data-startTime="947">look at how, uh, </span><span class="line" data-startTime="947">performance it is. </span><span class="line" data-startTime="950">So this is, like, </span><span class="line" data-startTime="950">in the browser, </span><span class="line" data-startTime="952">and we're running </span><span class="line" data-startTime="952">lots and lots of physics. </span><span class="line" data-startTime="954">And, like, there's not </span><span class="line" data-startTime="954">really a problem here. </span><span class="line" data-startTime="956">So that's just kind of cool, </span><span class="line" data-startTime="956">actually. </span><span class="line" data-startTime="958">Let's see how far it'll go. </span><span class="line" data-startTime="960">[Cromwell speaking indistinctly] </span></p>

<p class="speaker"><span class="line" data-starttime="963"><span class="speakerName">Rogers</span>: Oh, they're all crowding </span><span class="line" data-startTime="963">in the portal now. </span> <span class="line" data-startTime="966">And now you can see the hacks </span><span class="line" data-startTime="966">I did to make this all work. </span> <span class="line" data-startTime="968">Oh, there we go. We've got </span><span class="line" data-startTime="968">the infinite loop going. </span> <span class="line" data-startTime="970">So... </span> <span class="line" data-startTime="975">So the components of ForPlay &mdash; </span><span class="line" data-startTime="977">uh, we have &mdash; these are </span><span class="line" data-startTime="977">the three main components </span><span class="line" data-startTime="979">we just talked about for games, </span><span class="line" data-startTime="979">abstracting out the game layers. </span> <span class="line" data-startTime="981">We have the game loop, </span><span class="line" data-startTime="981">the I/O system, </span><span class="line" data-startTime="983">and asset management. </span> <span class="line" data-startTime="985">ForPlay provides </span><span class="line" data-startTime="985">the abstractions for you </span><span class="line" data-startTime="988">and swaps in the appropriate, </span><span class="line" data-startTime="988">uh, code for each platform. </span> <span class="line" data-startTime="991">So for instance, </span><span class="line" data-startTime="991">on the browser, </span><span class="line" data-startTime="992">we'll use requestAnimationFrame </span><span class="line" data-startTime="992">where available </span><span class="line" data-startTime="994">for your I/O loop, </span><span class="line" data-startTime="996">whereas, say, </span><span class="line" data-startTime="996">on the desktop environment, </span><span class="line" data-startTime="998">we might sync to Vsync </span><span class="line" data-startTime="998">or something like that. </span></p>

<p><span class="line" data-startTime="1000">And, uh, so you can see here </span><span class="line" data-startTime="1002">in the game update loop, </span><span class="line" data-startTime="1002">we have init. </span> <span class="line" data-startTime="1004">So you write the game </span><span class="line" data-startTime="1004">to the core ForPlay game layer. </span> <span class="line" data-startTime="1007">You automatically get calls </span><span class="line" data-startTime="1007">to init, update, and paint. </span> <span class="line" data-startTime="1011">And so this is </span><span class="line" data-startTime="1011">actually for &mdash; </span><span class="line" data-startTime="1012">for instance, you might want </span><span class="line" data-startTime="1014">to run your physics update </span><span class="line" data-startTime="1014">at 30 FPS, </span><span class="line" data-startTime="1016">but you might want </span><span class="line" data-startTime="1016">to draw at 60 FPS. </span> <span class="line" data-startTime="1018">We actually even provide &mdash; </span><span class="line" data-startTime="1019">you can see a "float delta" </span><span class="line" data-startTime="1019">on the paint line. </span> <span class="line" data-startTime="1021">What that's for is so that you </span><span class="line" data-startTime="1021">can, say, interpolate. </span> <span class="line" data-startTime="1023">So you're drawing much faster </span><span class="line" data-startTime="1023">than you're updating, </span><span class="line" data-startTime="1025">and you want to interpolate </span><span class="line" data-startTime="1025">to make it really, like &mdash; </span><span class="line" data-startTime="1027">really smooth. </span></p>

<p><span class="line" data-startTime="1029">Uh, for your I/O system, </span><span class="line" data-startTime="1029">we have tons of stuff here &mdash; </span><span class="line" data-startTime="1031">uh, fast graphics </span><span class="line" data-startTime="1031">for 2-D sprite-based graphics. </span> <span class="line" data-startTime="1033">We have audio. </span> <span class="line" data-startTime="1033">We have nets. </span> <span class="line" data-startTime="1035">We have keyboard input/output, </span><span class="line" data-startTime="1035">touch input and output, </span><span class="line" data-startTime="1038">um, and all this </span><span class="line" data-startTime="1038">is kind of abstracted </span><span class="line" data-startTime="1040">in a really easy-to-use way, </span><span class="line" data-startTime="1042">and I'll show you that </span><span class="line" data-startTime="1042">a little bit later. </span> <span class="line" data-startTime="1044">Last, we have asset management. </span> <span class="line" data-startTime="1044">The web is asynchronous. </span> <span class="line" data-startTime="1046">There's a whole bunch </span><span class="line" data-startTime="1046">of issues there. </span> <span class="line" data-startTime="1048">It provides ways </span><span class="line" data-startTime="1048">to get your sound, </span><span class="line" data-startTime="1049">your input, your text, </span><span class="line" data-startTime="1049">including JSON </span><span class="line" data-startTime="1051">as well as callbacks </span><span class="line" data-startTime="1051">for when these things happen, </span><span class="line" data-startTime="1054">so you can make, say, </span><span class="line" data-startTime="1054">a loading screen </span><span class="line" data-startTime="1055">or something like that. </span> <span class="line" data-startTime="1057">ForPlay provides the &mdash; </span><span class="line" data-startTime="1057">the magic that happens </span><span class="line" data-startTime="1059">to swap in the correct platform </span><span class="line" data-startTime="1059">that you're running on. </span></p>

<p><span class="line" data-startTime="1061">So you really write </span><span class="line" data-startTime="1061">to one API, and you get &mdash; </span><span class="line" data-startTime="1063">you write very little, </span><span class="line" data-startTime="1063">actually one line of code, </span><span class="line" data-startTime="1067">or one &mdash; maybe five lines </span><span class="line" data-startTime="1067">of code per platform, </span><span class="line" data-startTime="1070">and you get swapped in </span><span class="line" data-startTime="1070">the correct one. </span> <span class="line" data-startTime="1072">I'll show you </span><span class="line" data-startTime="1072">a little bit later. </span> <span class="line" data-startTime="1074">So this is &mdash; this is kind of </span><span class="line" data-startTime="1074">the beginning of a game. </span> <span class="line" data-startTime="1076">This is, uh, </span><span class="line" data-startTime="1076">"My Game" we'll call it, </span><span class="line" data-startTime="1078">and this is how you would write </span><span class="line" data-startTime="1078">the ForPlay API. </span> <span class="line" data-startTime="1081">You simply implement </span><span class="line" data-startTime="1081">the game interface, </span><span class="line" data-startTime="1083">and we have init, update, </span><span class="line" data-startTime="1083">and paint. </span> <span class="line" data-startTime="1085">Like I said before, </span><span class="line" data-startTime="1085">these just get called for you </span><span class="line" data-startTime="1087">once you start your game. </span> <span class="line" data-startTime="1089">Let me go to the next line </span><span class="line" data-startTime="1091">and show you </span><span class="line" data-startTime="1091">the interpolation code. </span> <span class="line" data-startTime="1092">So again, you're, say, </span><span class="line" data-startTime="1092">drawing at 60 FPS, </span><span class="line" data-startTime="1094">but you're only running at 30 </span><span class="line" data-startTime="1094">on your physics update loop. </span> <span class="line" data-startTime="1097">And this is where &mdash; this is </span><span class="line" data-startTime="1097">how you could, for instance, </span><span class="line" data-startTime="1099">interpolate it in a 2-D game. </span></p>

<p><span class="line" data-startTime="1101">And you can see here, </span><span class="line" data-startTime="1101">we have interpolation code. </span> <span class="line" data-startTime="1103">It's fairly trivial. </span> <span class="line" data-startTime="1105">[Cromwell speaking indistinctly] </span></p>

<p class="speaker"><span class="line" data-starttime="1107"><span class="speakerName">Rogers</span>: Init is usually where </span><span class="line" data-startTime="1107">you'd load your resources, </span><span class="line" data-startTime="1110">and the update loop is usually </span><span class="line" data-startTime="1110">where you'd process the I/O </span><span class="line" data-startTime="1113">and basically update your </span><span class="line" data-startTime="1113">physics layer or run your AI. </span> <span class="line" data-startTime="1115">And then the paint </span><span class="line" data-startTime="1117">is basically where </span><span class="line" data-startTime="1117">you redisplay everything. </span> <span class="line" data-startTime="1119">Oh, yes, that's right. Sorry. </span> <span class="line" data-startTime="1120">Actually, we'll show you </span><span class="line" data-startTime="1120">in more detail &mdash; </span><span class="line" data-startTime="1122">actually, </span><span class="line" data-startTime="1122">I can show you the source </span><span class="line" data-startTime="1124">of the pea physics game. </span> <span class="line" data-startTime="1126">So, um, input devices &mdash; </span><span class="line" data-startTime="1129">this is kind of the basics </span><span class="line" data-startTime="1131">of how you would start </span><span class="line" data-startTime="1131">writing your game. </span> <span class="line" data-startTime="1133">The is the same MyGame </span><span class="line" data-startTime="1133">implementing Game, </span><span class="line" data-startTime="1134">but now we've added Pointer </span><span class="line" data-startTime="1134">and Keyboard. </span> <span class="line" data-startTime="1136">You can see we automatically </span><span class="line" data-startTime="1136">get callbacks </span><span class="line" data-startTime="1138">into onPointerMove </span><span class="line" data-startTime="1138">or onPointerScroll </span><span class="line" data-startTime="1141">or onKeyDown. </span> <span class="line" data-startTime="1143">And ForPlay handles the fact </span><span class="line" data-startTime="1145">that you're kind of running </span><span class="line" data-startTime="1145">asynchronous code sometimes </span><span class="line" data-startTime="1147">on some platforms, </span><span class="line" data-startTime="1149">so you're not gonna get </span><span class="line" data-startTime="1149">these callbacks in </span><span class="line" data-startTime="1150">while you're doing </span><span class="line" data-startTime="1150">your physics update loop </span><span class="line" data-startTime="1152">or in your paint loop. </span> <span class="line" data-startTime="1154">It's all gonna be </span><span class="line" data-startTime="1154">spliced correctly. </span></p>

<p><span class="line" data-startTime="1156">Now really, the &mdash; </span><span class="line" data-startTime="1156">the real meat to ForPlay </span><span class="line" data-startTime="1159">is handling of the image system. </span> <span class="line" data-startTime="1162">So there's three graphics </span><span class="line" data-startTime="1162">primitives ForPlay provides. </span> <span class="line" data-startTime="1165">We have Image, Surface, </span><span class="line" data-startTime="1165">and Canvas. </span> <span class="line" data-startTime="1167">Image is your fast-path, </span><span class="line" data-startTime="1167">simple drawing of images, </span><span class="line" data-startTime="1170">and this allows you to get stuff </span><span class="line" data-startTime="1170">on the screen, </span><span class="line" data-startTime="1172">rotate, scale, </span><span class="line" data-startTime="1172">and translate it. </span> <span class="line" data-startTime="1174">Surface takes image and takes it </span><span class="line" data-startTime="1174">a little bit further. </span> <span class="line" data-startTime="1177">What Surface really provides </span><span class="line" data-startTime="1177">is the fast path </span><span class="line" data-startTime="1179">to OpenGL or WebGL. </span> <span class="line" data-startTime="1181">What it provides is things </span><span class="line" data-startTime="1181">like fillRect or also drawImage. </span> <span class="line" data-startTime="1184">It can draw multiple images, </span><span class="line" data-startTime="1186">have them cached </span><span class="line" data-startTime="1186">on a single surface. </span> <span class="line" data-startTime="1188">Canvas is the superset </span><span class="line" data-startTime="1188">of both the previous two </span><span class="line" data-startTime="1191">and even more. </span> <span class="line" data-startTime="1192">It actually provides </span><span class="line" data-startTime="1192">what HTML5 Canvas provides. </span> <span class="line" data-startTime="1195">We've abstracted away </span><span class="line" data-startTime="1197">the different things </span><span class="line" data-startTime="1197">on different platforms. </span></p>

<p><span class="line" data-startTime="1199">so you could do things </span><span class="line" data-startTime="1199">like text, like strokes. </span> <span class="line" data-startTime="1202">And really, it comes at a cost, </span><span class="line" data-startTime="1202">because these things &mdash; </span><span class="line" data-startTime="1205">you don't want to be </span><span class="line" data-startTime="1205">updating a canvas at 60 FPS. </span> <span class="line" data-startTime="1208">So what we do is we let you </span><span class="line" data-startTime="1208">cache the canvas result </span><span class="line" data-startTime="1211">onto a surface </span><span class="line" data-startTime="1211">and then draw the surface fast. </span> <span class="line" data-startTime="1213">And this whole system is done </span><span class="line" data-startTime="1213">inside a layer &mdash; </span><span class="line" data-startTime="1215">layer system </span><span class="line" data-startTime="1215">really similar to Flash. </span> <span class="line" data-startTime="1218">So it allows you to put </span><span class="line" data-startTime="1218">a whole bunch of canvases </span><span class="line" data-startTime="1220">or surfaces or images </span><span class="line" data-startTime="1220">into the different layers </span><span class="line" data-startTime="1223">and move them around separately. </span> <span class="line" data-startTime="1225">I'll show you that </span><span class="line" data-startTime="1225">in more detail. </span> <span class="line" data-startTime="1227">So this is the pea physics </span><span class="line" data-startTime="1227">sample we saw before. </span> <span class="line" data-startTime="1230">Uh, we have three group layers </span><span class="line" data-startTime="1230">in this case. </span></p>

<p><span class="line" data-startTime="1233">In the first group layer, </span><span class="line" data-startTime="1234">we have a whole bunch </span><span class="line" data-startTime="1234">of image layers inside of it. </span> <span class="line" data-startTime="1236">this is where all our peas </span><span class="line" data-startTime="1236">are being drawn, </span><span class="line" data-startTime="1238">and they're being moved around. </span> <span class="line" data-startTime="1238">This is all dynamic. </span> <span class="line" data-startTime="1241">And the next layer &mdash; </span><span class="line" data-startTime="1243">this should really be </span><span class="line" data-startTime="1243">implemented as a surface layer. </span> <span class="line" data-startTime="1245">So on the initial init, </span><span class="line" data-startTime="1245">what we would do </span><span class="line" data-startTime="1247">is we would draw </span><span class="line" data-startTime="1247">a whole bunch of our blocks, </span><span class="line" data-startTime="1249">the static blocks. </span> <span class="line" data-startTime="1249">We'd have them cached there. </span> <span class="line" data-startTime="1251">Then we'd just redraw </span><span class="line" data-startTime="1251">this cached image each time. </span></p>

<p><span class="line" data-startTime="1253">So it's gonna be really fast. </span> <span class="line" data-startTime="1255">Lastly, we have </span><span class="line" data-startTime="1255">just a simple image </span><span class="line" data-startTime="1257">behind the whole thing that's </span><span class="line" data-startTime="1257">just being drawn by itself. </span> <span class="line" data-startTime="1261">So this is the asset management. </span> <span class="line" data-startTime="1264">You'd really want to do this </span><span class="line" data-startTime="1264">in your init cycle, </span><span class="line" data-startTime="1266">like Ray was saying. </span> <span class="line" data-startTime="1267">And what you're doing is &mdash; </span><span class="line" data-startTime="1269">this is a simple example </span><span class="line" data-startTime="1269">of how to load an image. </span> <span class="line" data-startTime="1271">So you simply say Image. </span> <span class="line" data-startTime="1273">You ask the assetManager for it. </span> <span class="line" data-startTime="1274">And if you want, you can </span><span class="line" data-startTime="1274">get a callback, as well, </span><span class="line" data-startTime="1276">when this is done loading. </span> <span class="line" data-startTime="1278">And so this is kind of </span><span class="line" data-startTime="1278">the simple way to do it. </span> <span class="line" data-startTime="1280">You can also have, like, </span><span class="line" data-startTime="1280">a loading screen. </span> <span class="line" data-startTime="1282">For instance, Rovio did this </span><span class="line" data-startTime="1282">with "Angry Birds." </span><span class="line" data-startTime="1284">And what &mdash; what we're doing here </span><span class="line" data-startTime="1284">is we're adding images </span><span class="line" data-startTime="1287">to our AssetWatcher, </span><span class="line" data-startTime="1288">and we get a callback </span><span class="line" data-startTime="1288">once they've all loaded. </span></p>

<p><span class="line" data-startTime="1290">So this is really great for &mdash; </span><span class="line" data-startTime="1292">for &mdash; kind of Rovio's </span><span class="line" data-startTime="1292">kind of situation. </span> <span class="line" data-startTime="1296">Now the cross-platform magic &mdash; </span><span class="line" data-startTime="1298">So, you know, all the &mdash; </span><span class="line" data-startTime="1298">what I've said so far, </span><span class="line" data-startTime="1300">everything you're writing to </span><span class="line" data-startTime="1300">is platform-agnostic. </span> <span class="line" data-startTime="1302">You don't know what platform </span><span class="line" data-startTime="1302">you're running on, </span><span class="line" data-startTime="1304">but this is where </span><span class="line" data-startTime="1304">the magic happens. </span> <span class="line" data-startTime="1306">This is those few lines </span><span class="line" data-startTime="1306">I said you had to write </span><span class="line" data-startTime="1308">that were platform-specific. </span> <span class="line" data-startTime="1309">We have up here </span><span class="line" data-startTime="1309">HTML and Java. </span> <span class="line" data-startTime="1311">One of these comp &mdash; </span><span class="line" data-startTime="1311">compiles down </span><span class="line" data-startTime="1313">into a JavaScript/HTML5 game. </span> <span class="line" data-startTime="1315">The other one compiles down </span><span class="line" data-startTime="1315">to a desktop app. </span></p>

<p><span class="line" data-startTime="1318">And you can see how similar </span><span class="line" data-startTime="1318">the two are. </span> <span class="line" data-startTime="1321">You're simply starting the game, </span><span class="line" data-startTime="1323">and the ForPlay magic is </span><span class="line" data-startTime="1323">getting swapped in behind you. </span> <span class="line" data-startTime="1327">So to wrap up a little bit, </span><span class="line" data-startTime="1330">ForPlay is open source. </span> <span class="line" data-startTime="1330">It's free. </span> <span class="line" data-startTime="1332">You write to a core </span><span class="line" data-startTime="1332">platform-agnostic API, </span><span class="line" data-startTime="1336">and you get swapped in </span><span class="line" data-startTime="1336">the correct code, </span><span class="line" data-startTime="1338">uh, to really </span><span class="line" data-startTime="1338">give you performance. </span> <span class="line" data-startTime="1341">It's written in Java, </span><span class="line" data-startTime="1342">so you get </span><span class="line" data-startTime="1342">your familiar desktop &mdash; </span><span class="line" data-startTime="1344">you get your familiar </span><span class="line" data-startTime="1344">debugging environment. </span> <span class="line" data-startTime="1346">I'm gonna show you some </span><span class="line" data-startTime="1346">really cool stuff with that </span><span class="line" data-startTime="1348">in just a second. </span></p>

<p><span class="line" data-startTime="1349">And, um, it compiles down </span><span class="line" data-startTime="1349">to HTML5, </span><span class="line" data-startTime="1351">so you get a really fast &mdash; </span><span class="line" data-startTime="1351">fast game, as well. </span> <span class="line" data-startTime="1353">So let me dive down </span><span class="line" data-startTime="1353">into the actual details </span><span class="line" data-startTime="1356">of writing a game </span><span class="line" data-startTime="1358">and show you some neat stuff </span><span class="line" data-startTime="1358">about that. </span> <span class="line" data-startTime="1361">So this &mdash; we're gonna be </span><span class="line" data-startTime="1361">using the pea sample. </span> <span class="line" data-startTime="1365">Remember that this is, uh, </span><span class="line" data-startTime="1365">this is available online, </span><span class="line" data-startTime="1368">so you can actually dive down </span><span class="line" data-startTime="1369">into the source </span><span class="line" data-startTime="1369">a little bit more. </span> <span class="line" data-startTime="1371">But what I'd like to show you </span><span class="line" data-startTime="1371">is how great it is </span><span class="line" data-startTime="1373">to debug in ForPlay. </span> <span class="line" data-startTime="1374">So up here, I have &mdash; </span><span class="line" data-startTime="1376">this is &mdash; this seems very similar </span><span class="line" data-startTime="1378">to what we showed </span><span class="line" data-startTime="1378">just a few slides ago. </span> <span class="line" data-startTime="1380">What this is, is the &mdash; </span><span class="line" data-startTime="1382">this is the game entry point, </span><span class="line" data-startTime="1382">essentially. </span></p>

<p><span class="line" data-startTime="1384">And we have </span><span class="line" data-startTime="1384">PeaPhysicsGame implements Game </span><span class="line" data-startTime="1387">and a listener for Pointer. </span> <span class="line" data-startTime="1390">And as I scroll down, </span><span class="line" data-startTime="1390">you can see, </span><span class="line" data-startTime="1392">this is </span><span class="line" data-startTime="1392">the initialization cycle. </span> <span class="line" data-startTime="1394">Now I don't expect you </span><span class="line" data-startTime="1394">to actually read this, </span><span class="line" data-startTime="1395">but the idea is </span><span class="line" data-startTime="1395">we just have, uh, a game, </span><span class="line" data-startTime="1398">we have some inits, </span><span class="line" data-startTime="1399">and we don't know what platform </span><span class="line" data-startTime="1399">we're running on in this case. </span> <span class="line" data-startTime="1402">Let me go down </span><span class="line" data-startTime="1402">a little bit further </span><span class="line" data-startTime="1405">to this group. </span> <span class="line" data-startTime="1407">What we're looking at here </span><span class="line" data-startTime="1407">is the onPointerStart callback. </span> <span class="line" data-startTime="1410">This is gonna get called </span><span class="line" data-startTime="1412">every time you click </span><span class="line" data-startTime="1412">on the game. </span> <span class="line" data-startTime="1414">Oh, embarrassing. </span></p>

<p><span class="line" data-startTime="1414">Cromwell: [laughs] </span></p>

<p class="speaker"><span class="line" data-starttime="1419"><span class="speakerName">Rogers</span>: There. </span><span class="line" data-startTime="1419">Um, sorry about that, guys. So &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1422"><span class="speakerName">Ray Cromwell</span>: This is what gets run </span><span class="line" data-startTime="1422">when you click to add peas, </span><span class="line" data-startTime="1424">when he was dropping peas. </span><span class="line" data-startTime="1426">So that's the line </span><span class="line" data-startTime="1426">of code he used. </span></p>

<p class="speaker"><span class="line" data-starttime="1427"><span class="speakerName">Rogers</span>: Exactly. </span><span class="line" data-startTime="1427">And what we're doing is </span><span class="line" data-startTime="1429">we create a new pea </span><span class="line" data-startTime="1429">when that happens, </span><span class="line" data-startTime="1431">and we add it to the world. </span></p>

<p class="speaker"><span class="line" data-starttime="1432"><span class="speakerName">Ray Cromwell</span>: And world is </span><span class="line" data-startTime="1432">a group layer that holds </span><span class="line" data-startTime="1434">multiple image layers, </span><span class="line" data-startTime="1434">which are the peas. </span></p>

<p class="speaker"><span class="line" data-starttime="1436"><span class="speakerName">Rogers</span>: Exactly. </span> <span class="line" data-startTime="1436">So let me actually dive down </span><span class="line" data-startTime="1438">into what a pea is. </span> <span class="line" data-startTime="1440">A pea is a simple </span><span class="line" data-startTime="1440">sprite-based thing. </span> <span class="line" data-startTime="1442">You might see something similar </span><span class="line" data-startTime="1442">in, say, "Angry Birds" </span><span class="line" data-startTime="1444">or any other 2-D sprite game. </span> <span class="line" data-startTime="1446">But what I'd really like </span><span class="line" data-startTime="1446">to show you </span><span class="line" data-startTime="1448">is some of the cool things </span><span class="line" data-startTime="1448">we can do </span><span class="line" data-startTime="1450">in the debugging environment. </span> <span class="line" data-startTime="1451">Remember that we're writing </span><span class="line" data-startTime="1451">in Java, </span><span class="line" data-startTime="1453">so this stuff is really easy. </span> <span class="line" data-startTime="1455">And watch this. </span> <span class="line" data-startTime="1455">I'm actually gonna run my game. </span> <span class="line" data-startTime="1458">We saw it before </span><span class="line" data-startTime="1460">running as an HTML5 app. </span> <span class="line" data-startTime="1464">Now let's see it here </span><span class="line" data-startTime="1464">running as a Java desktop app. </span> <span class="line" data-startTime="1468">You can see, it's the same game </span><span class="line" data-startTime="1468">we were talking about before. </span> <span class="line" data-startTime="1471">Nothing has changed. </span> <span class="line" data-startTime="1473">Let me go over here, </span><span class="line" data-startTime="1473">and let's say, um, </span><span class="line" data-startTime="1475">let's say my boss </span><span class="line" data-startTime="1475">comes in and wants &mdash; </span><span class="line" data-startTime="1477">wants me to change </span><span class="line" data-startTime="1477">some physics parameters. </span> <span class="line" data-startTime="1479">Or, you know, </span><span class="line" data-startTime="1479">Chrome is really big. </span> <span class="line" data-startTime="1481">Let's say we want to use </span><span class="line" data-startTime="1481">the Chrome image </span><span class="line" data-startTime="1483">instead of the pea image. </span> <span class="line" data-startTime="1484">Let me just go in here </span><span class="line" data-startTime="1484">and change the radius </span><span class="line" data-startTime="1487">of the little peas </span><span class="line" data-startTime="1487">that we were drawing. </span></p>

<p><span class="line" data-startTime="1490">Or let me use a different image. </span> <span class="line" data-startTime="1493">Instead of the pea image, </span><span class="line" data-startTime="1493">we're gonna use something else. </span> <span class="line" data-startTime="1495">Now remember that I haven't </span><span class="line" data-startTime="1495">actually restarted the game. </span> <span class="line" data-startTime="1499">It's still running here. </span> <span class="line" data-startTime="1501">And now we have Chrome balls. </span></p>

<p class="speaker"><span class="line" data-starttime="1501"><span class="speakerName">Ray Cromwell</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1503"><span class="speakerName">Rogers</span>: Thank you. </span><span class="line" data-startTime="1503">[applause] </span></p>

<p class="speaker"><span class="line" data-starttime="1506"><span class="speakerName">Ray Cromwell</span>: But just </span><span class="line" data-startTime="1506">to emphasize that, </span><span class="line" data-startTime="1509">so you think about when you </span><span class="line" data-startTime="1509">normally develop, </span><span class="line" data-startTime="1511">and you have an edit, </span><span class="line" data-startTime="1511">compile, and run cycle. </span><span class="line" data-startTime="1513">And even today, with JavaScript </span><span class="line" data-startTime="1513">and normal web programming, </span><span class="line" data-startTime="1516">you have an edit refresher. </span><span class="line" data-startTime="1518">You edit the JavaScript, you hit </span><span class="line" data-startTime="1518">"refresh" in your browser. </span><span class="line" data-startTime="1520">With GWT DevMode, you hit &mdash; </span><span class="line" data-startTime="1520">you edit the Java code, </span><span class="line" data-startTime="1522">and you hit "refresh." </span><span class="line" data-startTime="1522">How about just edit? </span><span class="line" data-startTime="1524">You edit, and as fast as you can </span><span class="line" data-startTime="1524">tab over to the window... </span><span class="line" data-startTime="1527">[snaps fingers] </span><span class="line" data-startTime="1527">it's already been updated. </span><span class="line" data-startTime="1529">I think that's &mdash; </span><span class="line" data-startTime="1529">I think that's kick-ass. </span></p>

<p class="speaker"><span class="line" data-starttime="1531"><span class="speakerName">Rogers</span>: Um... </span><span class="line" data-startTime="1531">[clears throat] </span><span class="line" data-startTime="1533">So &mdash; and also, </span><span class="line" data-startTime="1533">because we're running </span><span class="line" data-startTime="1534">in our familiar </span><span class="line" data-startTime="1534">environment of Eclipse &mdash; </span><span class="line" data-startTime="1536">a lot of you guys know this is </span><span class="line" data-startTime="1536">the standard GWT world &mdash; </span><span class="line" data-startTime="1539">uh, we have our </span><span class="line" data-startTime="1539">"push to app engine" button </span><span class="line" data-startTime="1541">at the very top, </span><span class="line" data-startTime="1543">and we can just push this </span><span class="line" data-startTime="1543">and push our game to app engine. </span></p>

<p class="speaker"><span class="line" data-starttime="1545"><span class="speakerName">Ray Cromwell</span>: But he's not </span><span class="line" data-startTime="1545">gonna do that today, </span><span class="line" data-startTime="1547">because of the Wi-Fi. </span><span class="line" data-startTime="1547">Rogers: [laughs] Yeah, right. </span><span class="line" data-startTime="1550">So because we can push </span><span class="line" data-startTime="1550">to app engine so easy, </span><span class="line" data-startTime="1553">how about pushing this </span><span class="line" data-startTime="1553">to the Chrome Web Store? </span><span class="line" data-startTime="1555">This is, like, three steps. </span><span class="line" data-startTime="1555">It is so easy. </span><span class="line" data-startTime="1558">You push &mdash; you've already pushed </span><span class="line" data-startTime="1558">your game to app engine. </span><span class="line" data-startTime="1561">You have it hosted in the cloud. </span><span class="line" data-startTime="1563">It's &mdash; it's awesome. </span><span class="line" data-startTime="1564">You now visit appmator.com. </span><span class="line" data-startTime="1567">You upload your URL. </span><span class="line" data-startTime="1567">You download a zip file. </span><span class="line" data-startTime="1569">You then go </span><span class="line" data-startTime="1569">to the Chrome Web Store </span><span class="line" data-startTime="1571">and upload that same ZIP file. </span><span class="line" data-startTime="1573">And then third is profit. </span><span class="line" data-startTime="1576">[laughter] </span><span class="line" data-startTime="1576">Cromwell: [laughs] </span></p>

<p class="speaker"><span class="line" data-starttime="1578"><span class="speakerName">Rogers</span>: Unlike the meme, </span><span class="line" data-startTime="1578">I mean, this is the real deal. </span><span class="line" data-startTime="1580">You can either sell your game, </span><span class="line" data-startTime="1580">or you can put ads on it. </span><span class="line" data-startTime="1582">It's really easy to do. </span></p>

<p class="speaker"><span class="line" data-starttime="1584"><span class="speakerName">Ray Cromwell</span>: Or you can do </span><span class="line" data-startTime="1584">in-game payments, </span><span class="line" data-startTime="1586">and we only take 5%. </span></p>

<p class="speaker"><span class="line" data-starttime="1586"><span class="speakerName">Rogers</span>: I know. </span><span class="line" data-startTime="1587">This is so awesome. </span><span class="line" data-startTime="1589">If they would've told us that </span><span class="line" data-startTime="1589">before the presentation, </span><span class="line" data-startTime="1591">we could've worked it in. </span><span class="line" data-startTime="1593">So I'll hand it over to Ray. </span></p>

<p class="speaker"><span class="line" data-starttime="1593"><span class="speakerName">Ray Cromwell</span>: Thanks, Phil. </span> <span class="line" data-startTime="1595">So Phil actually showed you </span><span class="line" data-startTime="1595">the game running as Java </span><span class="line" data-startTime="1599">and running in HTML. </span> <span class="line" data-startTime="1602">So we've kind of danced </span><span class="line" data-startTime="1602">around the fact </span><span class="line" data-startTime="1604">that we can also run the game </span><span class="line" data-startTime="1604">on other platforms. </span> <span class="line" data-startTime="1607">And so one of the things </span><span class="line" data-startTime="1607">you might be saying is, </span><span class="line" data-startTime="1609">"Well, maybe I don't want </span><span class="line" data-startTime="1609">to target the Chrome web store. </span> <span class="line" data-startTime="1612">"I'm not really sure </span><span class="line" data-startTime="1612">if I'm gonna target, you know, </span><span class="line" data-startTime="1614">"170 million Chrome users </span><span class="line" data-startTime="1614">or 100 million Android users. </span> <span class="line" data-startTime="1616">I'll figure that out later on </span><span class="line" data-startTime="1616">when I finish the game." </span><span class="line" data-startTime="1619">You might want </span><span class="line" data-startTime="1619">to defer your judgment </span><span class="line" data-startTime="1621">and target Android. </span> <span class="line" data-startTime="1623">Well, you can do that, </span><span class="line" data-startTime="1623">because &mdash; </span><span class="line" data-startTime="1625">because it's written in Java, </span><span class="line" data-startTime="1626">you can take the exact same game </span><span class="line" data-startTime="1626">and compi &mdash; </span><span class="line" data-startTime="1628">and just with a few lines </span><span class="line" data-startTime="1628">of code, </span><span class="line" data-startTime="1630">recompile it, deploy it </span><span class="line" data-startTime="1630">to any Android device, </span><span class="line" data-startTime="1632">and it should work </span><span class="line" data-startTime="1632">out of the box. </span> <span class="line" data-startTime="1634">So, um, if things go okay, </span><span class="line" data-startTime="1637">I'm gonna show you a demo. </span></p>

<p><span class="line" data-startTime="1638">So I didn't get, uh, </span><span class="line" data-startTime="1638">time to prepare </span><span class="line" data-startTime="1641">a way to show it to you </span><span class="line" data-startTime="1641">on the big screen, </span><span class="line" data-startTime="1643">but I'll just really quickly </span><span class="line" data-startTime="1643">just show &mdash; </span><span class="line" data-startTime="1644">you'll see something moving </span><span class="line" data-startTime="1644">on the screen. </span> <span class="line" data-startTime="1646">So this is the peas demo. </span> <span class="line" data-startTime="1648">I'll give the guy </span><span class="line" data-startTime="1648">maybe time to zoom in. </span> <span class="line" data-startTime="1650">But I can drop peas. </span> <span class="line" data-startTime="1650">You see it runs fast, real fast. </span> <span class="line" data-startTime="1653">I can drop, like, </span><span class="line" data-startTime="1653">hundreds of peas, so... </span> <span class="line" data-startTime="1656">[applause] </span></p>

<p class="speaker"><span class="line" data-starttime="1659"><span class="speakerName">Ray Cromwell</span>: It runs very fast </span><span class="line" data-startTime="1659">on Android, </span><span class="line" data-startTime="1661">so it &mdash; that's pretty cool. </span> <span class="line" data-startTime="1663">So &mdash; but what about &mdash; </span><span class="line" data-startTime="1665">well, I'll get to that </span><span class="line" data-startTime="1665">in a second. </span> <span class="line" data-startTime="1667">Let me just show you </span><span class="line" data-startTime="1667">what you have to do </span><span class="line" data-startTime="1669">to make it run on Android. </span> <span class="line" data-startTime="1671">So you create </span><span class="line" data-startTime="1671">your game entry point. </span> <span class="line" data-startTime="1673">And rather than saying </span><span class="line" data-startTime="1673">JavaPlatform.register </span><span class="line" data-startTime="1676">or HtmlPlatform.register, </span><span class="line" data-startTime="1677">you say </span><span class="line" data-startTime="1677">AndroidPlatform.register. </span> <span class="line" data-startTime="1679">We swap in the fastest </span><span class="line" data-startTime="1679">native pass to Android, </span><span class="line" data-startTime="1683">and your game basically runs. </span> <span class="line" data-startTime="1684">You just recompile, </span><span class="line" data-startTime="1684">package it as an APA, </span><span class="line" data-startTime="1686">put it in the Android Market, </span><span class="line" data-startTime="1686">and profit. </span> <span class="line" data-startTime="1689">[applause] </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1692"><span class="speakerName">Ray Cromwell</span>: Thank you. </span><span class="line" data-startTime="1695">But for some of you, </span><span class="line" data-startTime="1697">that still might not be enough. </span><span class="line" data-startTime="1700">So you might happen to have </span><span class="line" data-startTime="1703">some poor slobs coming to you </span><span class="line" data-startTime="1703">with IE6, </span><span class="line" data-startTime="1705">who haven't upgraded </span><span class="line" data-startTime="1705">to the latest HTML5 browser. </span><span class="line" data-startTime="1708">But you know they have Flash, </span><span class="line" data-startTime="1708">probably. </span><span class="line" data-startTime="1711">So wouldn't it be nice </span><span class="line" data-startTime="1713">if you could take the game </span><span class="line" data-startTime="1715">and actually run it in Flash? </span><span class="line" data-startTime="1718">And it turns out </span><span class="line" data-startTime="1718">you can do that. </span><span class="line" data-startTime="1721">So what I'm announcing today </span><span class="line" data-startTime="1721">is a new back end </span><span class="line" data-startTime="1723">to the GWT Compiler. </span><span class="line" data-startTime="1725">It's an add-on </span><span class="line" data-startTime="1726">that basically compiles Java </span><span class="line" data-startTime="1726">to ActionScript 3 </span><span class="line" data-startTime="1729">and builds a Flash application. </span><span class="line" data-startTime="1729">[applause] </span><span class="line" data-startTime="1732">[cheering] </span></p>

<p class="speaker"><span class="line" data-starttime="1735"><span class="speakerName">Ray Cromwell</span>: And so here's </span><span class="line" data-startTime="1735">an example of &mdash; </span><span class="line" data-startTime="1738">Well, first, let me </span><span class="line" data-startTime="1738">just show you a demo </span><span class="line" data-startTime="1740">before I get to the example &mdash; </span><span class="line" data-startTime="1740">the peas Flash game. </span> <span class="line" data-startTime="1742">So here &mdash; here's a version of it. </span> <span class="line" data-startTime="1744">This is actually </span><span class="line" data-startTime="1744">a different version. </span> <span class="line" data-startTime="1746">Because of the Wi-Fi, </span><span class="line" data-startTime="1746">I couldn't actually get </span><span class="line" data-startTime="1748">the most recent version </span><span class="line" data-startTime="1748">on here. </span> <span class="line" data-startTime="1750">So it doesn't have the portal, </span><span class="line" data-startTime="1750">for example, </span><span class="line" data-startTime="1752">and some of the physics </span><span class="line" data-startTime="1752">constantly turn, </span><span class="line" data-startTime="1753">but I'll show you </span><span class="line" data-startTime="1753">by right-clicking here </span><span class="line" data-startTime="1755">that it's Flash, so... </span> <span class="line" data-startTime="1757">[applause] </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1761"><span class="speakerName">Ray Cromwell</span>: So how does it &mdash; </span><span class="line" data-startTime="1761">what do you have to do </span><span class="line" data-startTime="1763">to get it to compile to Flash? </span><span class="line" data-startTime="1765">You have to do one thing. </span> <span class="line" data-startTime="1767">You say FlashPlatform.re &mdash; </span><span class="line" data-startTime="1767">two things, actually &mdash; </span><span class="line" data-startTime="1769">FlashPlatform.register, </span><span class="line" data-startTime="1771">and you have to make </span><span class="line" data-startTime="1771">a GWT module file </span><span class="line" data-startTime="1773">that inherits from, um, </span><span class="line" data-startTime="1775">the ActionScript compiler, </span><span class="line" data-startTime="1775">that .gwt.xml file. </span> <span class="line" data-startTime="1777">That's all you have to do. </span> <span class="line" data-startTime="1779">So let me just talk </span><span class="line" data-startTime="1779">a little bit </span><span class="line" data-startTime="1781">about the GWT to Flex compiler. </span></p>

<p><span class="line" data-startTime="1782">So it's not a fork </span><span class="line" data-startTime="1782">of the GWT Compiler. </span> <span class="line" data-startTime="1784">It's actually an add-on. </span> <span class="line" data-startTime="1784">So you just drop a JAR file </span><span class="line" data-startTime="1786">into any of your </span><span class="line" data-startTime="1786">normal GWT projects, </span><span class="line" data-startTime="1788">and you inherit from a module, </span><span class="line" data-startTime="1788">and this thing kicks in. </span> <span class="line" data-startTime="1791">And what does it do? </span><span class="line" data-startTime="1793">Well, basically, </span><span class="line" data-startTime="1793">it does a couple of things. </span> <span class="line" data-startTime="1795">First, because JavaScript </span><span class="line" data-startTime="1795">is similar to ActionScript, </span><span class="line" data-startTime="1797">it basically has a couple </span><span class="line" data-startTime="1797">of extra passes </span><span class="line" data-startTime="1799">that inits safe ActionScript </span><span class="line" data-startTime="1799">on the back end </span><span class="line" data-startTime="1802">so that this Flex compiler </span><span class="line" data-startTime="1802">can compile it. </span> <span class="line" data-startTime="1805">Secondly, I've wrapped a lot </span><span class="line" data-startTime="1807">of the flash.display media </span><span class="line" data-startTime="1810">and other APIs that are part </span><span class="line" data-startTime="1810">of the Flex SDK </span><span class="line" data-startTime="1812">with overlay types in GWT. </span> <span class="line" data-startTime="1814">So you can just call directly </span><span class="line" data-startTime="1814">into the native Flash platform </span><span class="line" data-startTime="1816">if you want to, </span><span class="line" data-startTime="1816">just from Java code, </span><span class="line" data-startTime="1818">like create a sprite </span><span class="line" data-startTime="1818">and add it somewhere. </span> <span class="line" data-startTime="1821">So you don't have to use </span><span class="line" data-startTime="1821">ForPlay, actually. </span></p>

<p><span class="line" data-startTime="1822">You can just write </span><span class="line" data-startTime="1822">a Flash-only app if you want, </span><span class="line" data-startTime="1825">your Flex app. </span> <span class="line" data-startTime="1827">And third, it has a specialized </span><span class="line" data-startTime="1827">set of linkers on the back end </span><span class="line" data-startTime="1830">that package up </span><span class="line" data-startTime="1830">ActionScript resources </span><span class="line" data-startTime="1833">and run the Flash compiler. </span> <span class="line" data-startTime="1834">And later on, actually, </span><span class="line" data-startTime="1834">they're gonna use swfmill </span><span class="line" data-startTime="1836">to do asset packaging. </span> <span class="line" data-startTime="1838">So it will package your </span><span class="line" data-startTime="1838">other images and artworks </span><span class="line" data-startTime="1841">directly into the SWF file, </span><span class="line" data-startTime="1841">um, for you. </span> <span class="line" data-startTime="1845">So... </span> <span class="line" data-startTime="1847">Let's wrap up. </span> <span class="line" data-startTime="1849">Um, why GWT? </span><span class="line" data-startTime="1852">Performance, </span><span class="line" data-startTime="1852">ease of writing code, </span><span class="line" data-startTime="1854">and portability. </span> <span class="line" data-startTime="1855">Um, I've showed you </span><span class="line" data-startTime="1855">the core components </span><span class="line" data-startTime="1858">of architecting a game &mdash; </span><span class="line" data-startTime="1858">the I/O system, </span><span class="line" data-startTime="1860">the asset management, </span><span class="line" data-startTime="1860">and the event loop. </span> <span class="line" data-startTime="1862">And we've shown that by using </span><span class="line" data-startTime="1862">an abstract platform </span><span class="line" data-startTime="1865">that's not really GWT-specific </span><span class="line" data-startTime="1865">or Android-specific, </span><span class="line" data-startTime="1867">you can write a game </span><span class="line" data-startTime="1867">that can target multiple, </span><span class="line" data-startTime="1870">including Flash. </span></p>

<p><span class="line" data-startTime="1871">Um, and the last thing </span><span class="line" data-startTime="1871">I'd like to say is, </span><span class="line" data-startTime="1874">um, go build a game. </span> <span class="line" data-startTime="1876">So download this library. </span> <span class="line" data-startTime="1876">It's in an alpha state. </span> <span class="line" data-startTime="1879">Documentation is kind of poor </span><span class="line" data-startTime="1879">right now. We apologize. </span> <span class="line" data-startTime="1881">We've been spending more time </span><span class="line" data-startTime="1881">preparing for presentation </span><span class="line" data-startTime="1884">than documenting, </span><span class="line" data-startTime="1886">but we're gonna be working on it </span><span class="line" data-startTime="1886">over the next couple days. </span> <span class="line" data-startTime="1888">But take a look at it </span><span class="line" data-startTime="1888">and have fun. </span> <span class="line" data-startTime="1890">And, um... </span> <span class="line" data-startTime="1892">we have a lot of time </span><span class="line" data-startTime="1892">to answer questions, </span><span class="line" data-startTime="1895">'cause we anticipated </span><span class="line" data-startTime="1895">there will be some. </span> <span class="line" data-startTime="1897">So it's question time. </span></p>

<p><span class="line" data-startTime="1899">Thank you. </span> <span class="line" data-startTime="1899">[applause] </span><span class="line" data-startTime="1908">man: Hi, um, </span><span class="line" data-startTime="1908">so is there, like, </span><span class="line" data-startTime="1910">the equivalent of JSNI </span><span class="line" data-startTime="1910">for the Flash pack-in? </span><span class="line" data-startTime="1913">So can we write </span><span class="line" data-startTime="1913">native ActionScript </span><span class="line" data-startTime="1915">to interface between </span><span class="line" data-startTime="1915">the Java world and the usable &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1917"><span class="speakerName">Rogers</span>: Would that &mdash; </span><span class="line" data-startTime="1917">would that be "ASNI?" </span><span class="line" data-startTime="1919">[laughter] </span></p>

<p class="speaker"><span class="line" data-starttime="1923"><span class="speakerName">Ray Cromwell</span>: So, um, yes, </span><span class="line" data-startTime="1923">and in fact, </span><span class="line" data-startTime="1925">that's how the ForPlay library </span><span class="line" data-startTime="1925">is written. </span><span class="line" data-startTime="1927">So there is a whole bunch </span><span class="line" data-startTime="1927">of JSNI classes </span><span class="line" data-startTime="1930">that are already there for you </span><span class="line" data-startTime="1932">to access, like, </span><span class="line" data-startTime="1932">flash.display, flash.advance, </span><span class="line" data-startTime="1934">flash.net, uh, flash.media. </span><span class="line" data-startTime="1937">So I've covered </span><span class="line" data-startTime="1937">sort of the minimal set </span><span class="line" data-startTime="1939">of Flash APIs already </span><span class="line" data-startTime="1939">that you'd want to call into </span><span class="line" data-startTime="1942">for the game, </span><span class="line" data-startTime="1943">but if you download </span><span class="line" data-startTime="1943">the source code, </span><span class="line" data-startTime="1945">you're welcome to actually write </span><span class="line" data-startTime="1945">your own JSNI classes. </span><span class="line" data-startTime="1947">man: And is the source </span><span class="line" data-startTime="1947">for that available, as well, </span><span class="line" data-startTime="1949">for that back end? Is that out </span><span class="line" data-startTime="1949">on the same web site? </span></p>

<p class="speaker"><span class="line" data-starttime="1951"><span class="speakerName">Ray Cromwell</span>: Yes. </span><span class="line" data-startTime="1951">Uh, they're &mdash; </span><span class="line" data-startTime="1953">they actually parallel &mdash; it's &mdash; </span><span class="line" data-startTime="1953">it's really easy to find. </span><span class="line" data-startTime="1955">You'll just see </span><span class="line" data-startTime="1955">a source directory, </span><span class="line" data-startTime="1957">and there'll be, like, </span><span class="line" data-startTime="1957">flash/net, flash/display, </span><span class="line" data-startTime="1960">so exactly parallel </span><span class="line" data-startTime="1960">to the Flash APIs. </span><span class="line" data-startTime="1963">man: Oh, great. Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="1965"><span class="speakerName">Ray Cromwell</span>: By the way, I think </span><span class="line" data-startTime="1965">I might not have checked in </span><span class="line" data-startTime="1967">a JAR file </span><span class="line" data-startTime="1967">for the Flash compiler yet. </span><span class="line" data-startTime="1969">So if &mdash; don't be disappointed. </span><span class="line" data-startTime="1969">After the session, </span><span class="line" data-startTime="1971">I'll go make sure </span><span class="line" data-startTime="1971">the web site has everything. </span><span class="line" data-startTime="1973">Uh, go ahead. </span><span class="line" data-startTime="1975">man: Uh, you mentioned that, </span><span class="line" data-startTime="1975">uh, you've abstracted the I/O </span><span class="line" data-startTime="1977">from the, uh, drawings </span><span class="line" data-startTime="1977">and the control input, </span><span class="line" data-startTime="1981">but what about stuff, </span><span class="line" data-startTime="1981">like, for networking </span><span class="line" data-startTime="1983">for multiplayer? </span></p>

<p class="speaker"><span class="line" data-starttime="1983"><span class="speakerName">Ray Cromwell</span>: Uh, good question. </span> <span class="line" data-startTime="1985">So actually, we have </span><span class="line" data-startTime="1985">a ForPlay.net class </span><span class="line" data-startTime="1988">that abstracts the network, </span><span class="line" data-startTime="1988">as well as &mdash; </span><span class="line" data-startTime="1991">so it doesn't do WebSockets yet, </span><span class="line" data-startTime="1993">but it abstracts asynchronous </span><span class="line" data-startTime="1993">push/pull response requests. </span> <span class="line" data-startTime="1996">And it even extracts &mdash; </span><span class="line" data-startTime="1996">um, abstracts JSON </span><span class="line" data-startTime="1999">across multiple platforms. </span> <span class="line" data-startTime="2001">So you can fetch &mdash; </span><span class="line" data-startTime="2001">for example, the level beta </span><span class="line" data-startTime="2003">to load, um, the peas level </span><span class="line" data-startTime="2003">as a JSON file, </span><span class="line" data-startTime="2006">and there's a parser on Android, </span><span class="line" data-startTime="2008">there's one on Flash, </span><span class="line" data-startTime="2010">and there's one on HTML5 </span><span class="line" data-startTime="2010">and Java. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2012"><span class="speakerName">Rogers</span>: Yeah, to take that </span><span class="line" data-startTime="2012">a step further, </span><span class="line" data-startTime="2014">this cross-platform JSON parser </span><span class="line" data-startTime="2014">is really useful, </span><span class="line" data-startTime="2016">for instance, </span><span class="line" data-startTime="2016">for sprite sheets. </span><span class="line" data-startTime="2018">And I think that Rovio used that </span><span class="line" data-startTime="2018">for "Angry Birds." </span><span class="line" data-startTime="2020">You essentially have </span><span class="line" data-startTime="2020">one single image, </span><span class="line" data-startTime="2022">and you have different </span><span class="line" data-startTime="2022">little sprite sheets on it, </span><span class="line" data-startTime="2024">and ForPlay's really good </span><span class="line" data-startTime="2024">at that stuff. </span><span class="line" data-startTime="2027">man: Does this use 2.3 </span><span class="line" data-startTime="2029">or does it require 2.4 beta? </span></p>

<p class="speaker"><span class="line" data-starttime="2031"><span class="speakerName">Ray Cromwell</span>: It uses 2.3 &mdash; </span><span class="line" data-startTime="2031">well, I built it with 2.3.3. </span><span class="line" data-startTime="2035">Um, so it should &mdash; </span><span class="line" data-startTime="2035">should work on there. </span><span class="line" data-startTime="2037">But I haven't tested it </span><span class="line" data-startTime="2037">on 3.0 yet. </span><span class="line" data-startTime="2039">Hopefully, it works there. </span><span class="line" data-startTime="2039">[chuckles] </span><span class="line" data-startTime="2041">[man speaking indistinctly] </span></p>

<p class="speaker"><span class="line" data-starttime="2043"><span class="speakerName">Ray Cromwell</span>: Okay, 2.4. </span><span class="line" data-startTime="2045">Oh, you were asking about GWT. </span><span class="line" data-startTime="2047">Ah, I thought you were </span><span class="line" data-startTime="2047">talking about Android. </span></p>

<p class="speaker"><span class="line" data-starttime="2049"><span class="speakerName">Rogers</span>: Uh, yeah. </span><span class="line" data-startTime="2049">No, it works on 2.3. </span></p>

<p class="speaker"><span class="line" data-starttime="2051"><span class="speakerName">Ray Cromwell</span>: It works on 2.3. </span></p>

<p class="speaker"><span class="line" data-starttime="2051"><span class="speakerName">Rogers</span>: The answer is yes. </span></p>

<p class="speaker"><span class="line" data-starttime="2053"><span class="speakerName">Ray Cromwell</span>: It just so happens </span><span class="line" data-startTime="2053">that I have 2.3 on my phone. </span><span class="line" data-startTime="2056">man: So hi, um, </span><span class="line" data-startTime="2056">how's the performance </span><span class="line" data-startTime="2058">compared from the HTML version </span><span class="line" data-startTime="2061">versus the Java </span><span class="line" data-startTime="2061">or Android version? </span><span class="line" data-startTime="2063">And have you tested </span><span class="line" data-startTime="2063">on other branded, uh, </span><span class="line" data-startTime="2067">mobile operating systems? </span></p>

<p class="speaker"><span class="line" data-starttime="2069"><span class="speakerName">Ray Cromwell</span>: Good question. </span> <span class="line" data-startTime="2070">So the performance </span><span class="line" data-startTime="2070">for desktop Java, </span><span class="line" data-startTime="2072">for Android, </span><span class="line" data-startTime="2072">and for HTML5 browsers, </span><span class="line" data-startTime="2075">at least the ones </span><span class="line" data-startTime="2075">that we all like, </span><span class="line" data-startTime="2078">uh, is actually very good, </span><span class="line" data-startTime="2078">as you saw with "Angry Birds." </span><span class="line" data-startTime="2080">The performance in Flash, </span><span class="line" data-startTime="2082">of executing the code in Flash, </span><span class="line" data-startTime="2085">is not quite as good as V8. </span> <span class="line" data-startTime="2087">Um, so the Flash game </span><span class="line" data-startTime="2087">is not quite as good as V8, </span><span class="line" data-startTime="2089">but it's also because the code </span><span class="line" data-startTime="2089">that I'm generating </span><span class="line" data-startTime="2091">out of the GWT compiler </span><span class="line" data-startTime="2091">is not optimal yet for Flash. </span> <span class="line" data-startTime="2094">So I generate </span><span class="line" data-startTime="2094">typeless ActionScript 3. </span> <span class="line" data-startTime="2097">And so I'm not giving </span><span class="line" data-startTime="2097">the Flash VM </span><span class="line" data-startTime="2100">the opportunity </span><span class="line" data-startTime="2100">to do more optimization. </span> <span class="line" data-startTime="2102">So later revisions </span><span class="line" data-startTime="2102">of the Flash compiler </span><span class="line" data-startTime="2105">will probably produce </span><span class="line" data-startTime="2105">more optimal code. </span></p>

<p><span class="line" data-startTime="2107">But in my testing, </span><span class="line" data-startTime="2108">it actually runs well enough </span><span class="line" data-startTime="2108">to do a game on Flash, as well. </span> <span class="line" data-startTime="2112">So &mdash; so to answer your question </span><span class="line" data-startTime="2112">about mobile platforms, </span><span class="line" data-startTime="2115">I don't know if we can </span><span class="line" data-startTime="2115">give numbers, </span><span class="line" data-startTime="2117">but I will say we have loaded up </span><span class="line" data-startTime="2117">some of the games we've done, </span><span class="line" data-startTime="2120">including "Angry Birds," </span><span class="line" data-startTime="2122">on, uh, an iPad 2. </span> <span class="line" data-startTime="2124">And the frame rate </span><span class="line" data-startTime="2124">was way above my expectations. </span> <span class="line" data-startTime="2127">I wouldn't say that people </span><span class="line" data-startTime="2127">would be happy about it </span><span class="line" data-startTime="2130">compared to the native version, </span><span class="line" data-startTime="2131">but what it gives &mdash; </span><span class="line" data-startTime="2131">says is that if they make </span><span class="line" data-startTime="2133">the browser slightly faster </span><span class="line" data-startTime="2133">on the mobile devices, </span><span class="line" data-startTime="2135">or if Moore's Law kicks in, </span><span class="line" data-startTime="2137">and the iPad 3 is, </span><span class="line" data-startTime="2137">like, twice as fast, </span><span class="line" data-startTime="2139">you might be able to get </span><span class="line" data-startTime="2139">60 frames per second </span><span class="line" data-startTime="2141">with an HTML5 game </span><span class="line" data-startTime="2141">on those devices. </span> <span class="line" data-startTime="2144">man: Um, yeah, you kind of </span><span class="line" data-startTime="2144">just answered my question </span><span class="line" data-startTime="2146">about the Flash player speed. </span></p>

<p><span class="line" data-startTime="2148">I wonder if you could elaborate </span><span class="line" data-startTime="2148">that on &mdash; you know, any more, </span><span class="line" data-startTime="2151">sort of what things </span><span class="line" data-startTime="2151">you might plan for that, </span><span class="line" data-startTime="2153">or if that was </span><span class="line" data-startTime="2153">just an example. </span></p>

<p class="speaker"><span class="line" data-starttime="2155"><span class="speakerName">Ray Cromwell</span>: Yeah, so, um, </span><span class="line" data-startTime="2155">there are a couple of things </span><span class="line" data-startTime="2157">that we're not doing </span><span class="line" data-startTime="2157">that we could do. </span> <span class="line" data-startTime="2159">So one is, we don't &mdash; </span><span class="line" data-startTime="2159">we don't generate, um, types. </span> <span class="line" data-startTime="2163">So we could generate </span><span class="line" data-startTime="2163">ActionScript 3 classes </span><span class="line" data-startTime="2165">for each Java class </span><span class="line" data-startTime="2167">and generate methods </span><span class="line" data-startTime="2167">instead of functions. </span> <span class="line" data-startTime="2170">So basically, we're using </span><span class="line" data-startTime="2171">the existing GWT back end </span><span class="line" data-startTime="2171">with modifications. </span> <span class="line" data-startTime="2173">So a lot of things just become </span><span class="line" data-startTime="2173">JavaScript functions </span><span class="line" data-startTime="2175">instead of ActionScript methods. </span> <span class="line" data-startTime="2177">So that compiles fine, </span><span class="line" data-startTime="2177">and it works, </span><span class="line" data-startTime="2178">but it probably </span><span class="line" data-startTime="2178">does not run optimally </span><span class="line" data-startTime="2180">in the Flash VM. </span></p>

<p><span class="line" data-startTime="2182">But, um, I'm &mdash; </span><span class="line" data-startTime="2182">that's the next step. </span> <span class="line" data-startTime="2184">So the next to-do for me </span><span class="line" data-startTime="2184">is to make the compiler </span><span class="line" data-startTime="2186">generate much more optimal </span><span class="line" data-startTime="2186">ActionScript 3 code. </span> <span class="line" data-startTime="2189">man: How about size &mdash; </span><span class="line" data-startTime="2189">how about size-wise? </span><span class="line" data-startTime="2191">Does it make a fairly large SWF, </span><span class="line" data-startTime="2191">or do you have, uh, </span><span class="line" data-startTime="2193">any way of making modules </span><span class="line" data-startTime="2193">or rCells or anything like that? </span></p>

<p class="speaker"><span class="line" data-starttime="2196"><span class="speakerName">Ray Cromwell</span>: So it &mdash; </span><span class="line" data-startTime="2196">it actually makes &mdash; </span><span class="line" data-startTime="2198">it makes actually </span><span class="line" data-startTime="2198">pretty small SWF. </span><span class="line" data-startTime="2200">I believe the peas game </span><span class="line" data-startTime="2200">was about 58k, </span><span class="line" data-startTime="2203">and there's some packaged </span><span class="line" data-startTime="2203">resources in there, </span><span class="line" data-startTime="2205">but it could &mdash; </span><span class="line" data-startTime="2205">it could be better. </span><span class="line" data-startTime="2207">Um, GWT, you know, </span><span class="line" data-startTime="2207">has code-splitting capability, </span><span class="line" data-startTime="2210">and, um, we could use that </span><span class="line" data-startTime="2210">to leverage </span><span class="line" data-startTime="2212">by splitting an application </span><span class="line" data-startTime="2212">across multiple SWFs </span><span class="line" data-startTime="2215">and loading them in </span><span class="line" data-startTime="2215">on the man &mdash; </span><span class="line" data-startTime="2217">but we haven't </span><span class="line" data-startTime="2217">investigated that yet. </span><span class="line" data-startTime="2219">That's a good question. </span><span class="line" data-startTime="2221">man: So I apologize if this </span><span class="line" data-startTime="2221">has been covered already, </span><span class="line" data-startTime="2223">but, uh, so does the ForPlay API </span><span class="line" data-startTime="2223">cover audio at all? </span></p>

<p class="speaker"><span class="line" data-starttime="2226"><span class="speakerName">Ray Cromwell</span>: Yes, it has &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2226"><span class="speakerName">Rogers</span>: That's a good point. </span></p>

<p class="speaker"><span class="line" data-starttime="2228"><span class="speakerName">Ray Cromwell</span>: Yeah, okay. </span></p>

<p class="speaker"><span class="line" data-starttime="2228"><span class="speakerName">Rogers</span>: Go ahead. </span></p>

<p class="speaker"><span class="line" data-starttime="2230"><span class="speakerName">Ray Cromwell</span>: So, uh, yes, but it </span><span class="line" data-startTime="2230">covers very primitive audio, </span><span class="line" data-startTime="2232">because when we started, uh, </span><span class="line" data-startTime="2232">we knew we had to target </span><span class="line" data-startTime="2235">basically what was enabled </span><span class="line" data-startTime="2235">in Chrome 11 </span><span class="line" data-startTime="2238">with just a regular audio tag, </span><span class="line" data-startTime="2240">which is basically just based </span><span class="line" data-startTime="2240">on streaming basic audio. </span><span class="line" data-startTime="2243">Um, so basically, yes, on Flash, </span><span class="line" data-startTime="2243">we used the Flash sound APIs </span><span class="line" data-startTime="2247">to play the audio. </span><span class="line" data-startTime="2249">On HTML5, we used the audio tag </span><span class="line" data-startTime="2251">or we'll use SoundManager 2 </span><span class="line" data-startTime="2251">Flash library to do it. </span><span class="line" data-startTime="2254">Or on Android, we used </span><span class="line" data-startTime="2254">a native sound API. </span><span class="line" data-startTime="2256">So sound is supported, </span><span class="line" data-startTime="2256">but it's very &mdash; it's very basic. </span><span class="line" data-startTime="2258">You can play, um, </span><span class="line" data-startTime="2258">OGG or MP3 or WAV files on cue, </span><span class="line" data-startTime="2262">but you can't do </span><span class="line" data-startTime="2262">much manipulation. </span><span class="line" data-startTime="2263">But that &mdash; </span><span class="line" data-startTime="2263">that will change. </span><span class="line" data-startTime="2265">man: Okay, thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2265"><span class="speakerName">Ray Cromwell</span>: Yep. </span><span class="line" data-startTime="2267">man: I'm kind of wondering </span><span class="line" data-startTime="2267">what your support is </span><span class="line" data-startTime="2269">for binary data over the wire </span><span class="line" data-startTime="2269">when it comes to AMF, </span><span class="line" data-startTime="2272">if you were sending it </span><span class="line" data-startTime="2272">to BlazeDS </span><span class="line" data-startTime="2274">or protocol buffers </span><span class="line" data-startTime="2274">or something else. </span><span class="line" data-startTime="2276">You talked about JSON, </span><span class="line" data-startTime="2276">but I don't know if you... </span></p>

<p class="speaker"><span class="line" data-starttime="2278"><span class="speakerName">Ray Cromwell</span>: Right. </span><span class="line" data-startTime="2278">man: Had any experience </span><span class="line" data-startTime="2280">dealing with mapping </span><span class="line" data-startTime="2280">ActionScript objects to POJOs </span><span class="line" data-startTime="2282">and cogenerating that </span><span class="line" data-startTime="2282">in JSON... </span></p>

<p class="speaker"><span class="line" data-starttime="2284"><span class="speakerName">Ray Cromwell</span>: Yeah, so we haven't </span><span class="line" data-startTime="2284">added any support yet, </span><span class="line" data-startTime="2286">because we kind of wanted &mdash; </span><span class="line" data-startTime="2287">we took the least common </span><span class="line" data-startTime="2287">denominator support for that. </span> <span class="line" data-startTime="2289">So you can fetch </span><span class="line" data-startTime="2289">known binary assets, </span><span class="line" data-startTime="2291">like, um, media assets, right, </span><span class="line" data-startTime="2291">as binary. </span> <span class="line" data-startTime="2294">And that works because </span><span class="line" data-startTime="2294">it basically translates </span><span class="line" data-startTime="2296">directly to the Flash </span><span class="line" data-startTime="2296">loader API or URL loader. </span> <span class="line" data-startTime="2300">But, um, </span><span class="line" data-startTime="2300">if you just want to load up </span><span class="line" data-startTime="2302">an arbitrary binary file, </span><span class="line" data-startTime="2302">we don't really support that, </span><span class="line" data-startTime="2304">because until very recently, </span><span class="line" data-startTime="2306">it was slow in HTML5 to load </span><span class="line" data-startTime="2306">large-scale binary objects. </span> <span class="line" data-startTime="2309">But that's changing now. </span> <span class="line" data-startTime="2311">There's the type, the RSpec, </span><span class="line" data-startTime="2312">and there's a couple </span><span class="line" data-startTime="2312">other APIs for doing it. </span></p>

<p><span class="line" data-startTime="2314">So that will </span><span class="line" data-startTime="2314">probably be added later. </span> <span class="line" data-startTime="2316">man: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2318"><span class="speakerName">Ray Cromwell</span>: Hey, </span><span class="line" data-startTime="2318">what are you doing here? </span></p>

<p class="speaker"><span class="line" data-starttime="2320"><span class="speakerName">Rogers</span>: Who let this guy in? </span><span class="line" data-startTime="2320">[laughs] </span><span class="line" data-startTime="2321">man: I actually have a question. </span><span class="line" data-startTime="2323">So actually, like, how do you </span><span class="line" data-startTime="2323">guys simulate the event loop </span><span class="line" data-startTime="2325">in &mdash; in JavaScript </span><span class="line" data-startTime="2325">on the web platform? </span><span class="line" data-startTime="2328">Because it's just &mdash; I don't know. </span><span class="line" data-startTime="2330">Do you &mdash; do you use time-outs? </span><span class="line" data-startTime="2330">I'm just curious. </span></p>

<p class="speaker"><span class="line" data-starttime="2332"><span class="speakerName">Ray Cromwell</span>: Okay, </span><span class="line" data-startTime="2332">so for the browser &mdash; </span><span class="line" data-startTime="2334">If your browser supports </span><span class="line" data-startTime="2334">requestAnimationFrame, </span><span class="line" data-startTime="2336">we use that. </span><span class="line" data-startTime="2338">And what happens </span><span class="line" data-startTime="2338">is the browser will &mdash; </span><span class="line" data-startTime="2340">when it's drawing &mdash; </span><span class="line" data-startTime="2341">so if you actually focus the tab </span><span class="line" data-startTime="2341">that's on the screen, </span><span class="line" data-startTime="2343">it's visible &mdash; when it's </span><span class="line" data-startTime="2343">drawing at 60 times a second, </span><span class="line" data-startTime="2346">it will call you, basically, </span><span class="line" data-startTime="2346">so on a schedule. </span><span class="line" data-startTime="2348">Uh, if your browser </span><span class="line" data-startTime="2348">doesn't have it, </span><span class="line" data-startTime="2350">then we'll fall back </span><span class="line" data-startTime="2350">to setTimeout or setInterval. </span><span class="line" data-startTime="2353">Um, obviously, not as efficient, </span><span class="line" data-startTime="2353">so it &mdash; </span><span class="line" data-startTime="2355">we basically take as efficient </span><span class="line" data-startTime="2355">a path as we can. </span><span class="line" data-startTime="2357">And on Android, of course, </span><span class="line" data-startTime="2357">we use multiple threads </span><span class="line" data-startTime="2359">and looper, um, </span><span class="line" data-startTime="2359">and handler objects </span><span class="line" data-startTime="2362">to basically, you know, have </span><span class="line" data-startTime="2362">everything run in one thread, </span><span class="line" data-startTime="2364">and then we post messages </span><span class="line" data-startTime="2364">to it with events. </span></p>

<p class="speaker"><span class="line" data-starttime="2367"><span class="speakerName">Rogers</span>: And what this means </span><span class="line" data-startTime="2367">is for something like peas &mdash; </span><span class="line" data-startTime="2369">your physics actually runs </span><span class="line" data-startTime="2369">in the background </span><span class="line" data-startTime="2371">using set time-outs. </span><span class="line" data-startTime="2372">but your phy &mdash; your drawing &mdash; </span><span class="line" data-startTime="2372">your paint update loop </span><span class="line" data-startTime="2374">doesn't run at all. </span></p>

<p class="speaker"><span class="line" data-starttime="2374"><span class="speakerName">Ray Cromwell</span>: Yeah, actually, </span><span class="line" data-startTime="2376">it's interesting on Android, </span><span class="line" data-startTime="2376">because Android supports </span><span class="line" data-startTime="2378">multiple threads, </span><span class="line" data-startTime="2378">unlike the browser. </span><span class="line" data-startTime="2380">Um, you actually get </span><span class="line" data-startTime="2380">a little bit of a boost, </span><span class="line" data-startTime="2382">because you can run the physics </span><span class="line" data-startTime="2382">and stuff in the background, </span><span class="line" data-startTime="2384">and you can run the paint loop </span><span class="line" data-startTime="2384">in a different thread, </span><span class="line" data-startTime="2386">which is pretty cool. </span><span class="line" data-startTime="2386">man: Thanks. </span><span class="line" data-startTime="2388">man: Is &mdash; is the new </span><span class="line" data-startTime="2388">Flash back end </span><span class="line" data-startTime="2390">gonna become a part of GWT, </span><span class="line" data-startTime="2390">or is it gonna &mdash; </span><span class="line" data-startTime="2392">is it gonna just be </span><span class="line" data-startTime="2392">part of ForPlay? </span><span class="line" data-startTime="2394">Is it gonna be, like, a &mdash; </span><span class="line" data-startTime="2394">will it be supported </span><span class="line" data-startTime="2396">for non-game use, I guess, </span><span class="line" data-startTime="2396">and those kind of things? </span></p>

<p class="speaker"><span class="line" data-starttime="2398"><span class="speakerName">Ray Cromwell</span>: So, uh, this is not </span><span class="line" data-startTime="2398">an official Google project. </span><span class="line" data-startTime="2400">This is kinda like </span><span class="line" data-startTime="2400">the personal pet project </span><span class="line" data-startTime="2402">of a bunch of people who have, </span><span class="line" data-startTime="2402">like, an itch to scratch. </span><span class="line" data-startTime="2405">But, uh, so it will be </span><span class="line" data-startTime="2405">part of ForPlay. </span><span class="line" data-startTime="2407">And, um, going forward, </span><span class="line" data-startTime="2410">um, we will be supporting it, </span><span class="line" data-startTime="2412">'cause we're gonna be using it </span><span class="line" data-startTime="2412">for multiple things. </span><span class="line" data-startTime="2414">So you don't need to use it </span><span class="line" data-startTime="2414">for games, actually. </span><span class="line" data-startTime="2416">So if you wanted to build </span><span class="line" data-startTime="2417">a traditional </span><span class="line" data-startTime="2417">enterprise Flex app, </span><span class="line" data-startTime="2419">but you wanted to use </span><span class="line" data-startTime="2419">Java to do it and Eclipse, </span><span class="line" data-startTime="2421">you could actually use </span><span class="line" data-startTime="2421">the Flash compiler to do it, </span><span class="line" data-startTime="2423">because we exposed </span><span class="line" data-startTime="2423">most of the Flex APIs, </span><span class="line" data-startTime="2426">and it's easy to expose more </span><span class="line" data-startTime="2427">with regular GWT JSNI methods. </span><span class="line" data-startTime="2429">And you could </span><span class="line" data-startTime="2429">theoretically build </span><span class="line" data-startTime="2431">a Flex &mdash; a Flex ML, </span><span class="line" data-startTime="2431">you know, application. </span><span class="line" data-startTime="2434">man: But you don't intend to </span><span class="line" data-startTime="2434">fold it back into mainline GWT. </span><span class="line" data-startTime="2436">It's gonna remain </span><span class="line" data-startTime="2436">a separate project? </span></p>

<p class="speaker"><span class="line" data-starttime="2438"><span class="speakerName">Rogers</span>: I don't think Google </span><span class="line" data-startTime="2438">would support </span><span class="line" data-startTime="2440">something called ForPlay. </span></p>

<p class="speaker"><span class="line" data-starttime="2440"><span class="speakerName">Ray Cromwell</span>: Yes. </span><span class="line" data-startTime="2442">[laughter] </span><span class="line" data-startTime="2444">man: I meant more </span><span class="line" data-startTime="2444">the Flash back end. </span><span class="line" data-startTime="2446">It's not gonna find its way </span><span class="line" data-startTime="2446">back into mainline GWT? </span></p>

<p class="speaker"><span class="line" data-starttime="2448"><span class="speakerName">Ray Cromwell</span>: No, this is actually </span><span class="line" data-startTime="2448">one of the first times &mdash; </span><span class="line" data-startTime="2449">'cause the compiler </span><span class="line" data-startTime="2449">does have some hooks </span><span class="line" data-startTime="2451">for attaching other back ends, </span><span class="line" data-startTime="2453">and this is sort of </span><span class="line" data-startTime="2453">the first real ever, like, </span><span class="line" data-startTime="2456">add-on back end </span><span class="line" data-startTime="2456">that's been made public. </span> <span class="line" data-startTime="2458">And there are other ones </span><span class="line" data-startTime="2458">in the pipeline, </span><span class="line" data-startTime="2459">so it's possible, </span><span class="line" data-startTime="2459">like, there might be </span><span class="line" data-startTime="2461">a separate web site, </span><span class="line" data-startTime="2461">like an incubator, </span><span class="line" data-startTime="2463">where we drop these things </span><span class="line" data-startTime="2463">in the future. </span></p>

<p><span class="line" data-startTime="2465">man: Thanks. </span> <span class="line" data-startTime="2465">man: Hi, I was wondering </span><span class="line" data-startTime="2467">if you could clarify </span><span class="line" data-startTime="2467">how ForPlay development </span><span class="line" data-startTime="2469">compares to </span><span class="line" data-startTime="2469">or, you know, interacts </span><span class="line" data-startTime="2472">with sort of normal </span><span class="line" data-startTime="2472">GWT development? </span><span class="line" data-startTime="2474">So, you know, </span><span class="line" data-startTime="2474">would it be possible </span><span class="line" data-startTime="2476">to sort of build </span><span class="line" data-startTime="2476">your game Chrome, </span><span class="line" data-startTime="2477">you know, your menus </span><span class="line" data-startTime="2477">and your launch screens </span><span class="line" data-startTime="2479">and everything </span><span class="line" data-startTime="2479">in sort of normal GWT, </span><span class="line" data-startTime="2481">and then have sort of </span><span class="line" data-startTime="2481">the play area be in ForPlay? </span><span class="line" data-startTime="2483">Or is it really </span><span class="line" data-startTime="2483">expected to be </span><span class="line" data-startTime="2485">an entirely ForPlay </span><span class="line" data-startTime="2485">Canvas-based thing? </span></p>

<p class="speaker"><span class="line" data-starttime="2488"><span class="speakerName">Rogers</span>: Sure, </span><span class="line" data-startTime="2488">I can kind of answer this. </span><span class="line" data-startTime="2489">It's kind of twofold. </span><span class="line" data-startTime="2491">One is ForPlay allows you </span><span class="line" data-startTime="2491">to call out into the browser, </span><span class="line" data-startTime="2493">if you want to, </span><span class="line" data-startTime="2495">so in this &mdash; with this mechanism, </span><span class="line" data-startTime="2497">um, you can definitely write it </span><span class="line" data-startTime="2497">in the standard GWT way. </span><span class="line" data-startTime="2500">But the core of ForPlay &mdash; </span><span class="line" data-startTime="2500">like, writing a game </span><span class="line" data-startTime="2503">to that &mdash; </span><span class="line" data-startTime="2503">to the ForPlay game layer </span><span class="line" data-startTime="2505">is you're really writing </span><span class="line" data-startTime="2505">in pure Java, </span><span class="line" data-startTime="2507">and GWT is kind of a side issue. </span><span class="line" data-startTime="2509">Um, so &mdash; yes. </span></p>

<p class="speaker"><span class="line" data-starttime="2509"><span class="speakerName">Ray Cromwell</span>: ForPlay development </span><span class="line" data-startTime="2511">is actually not really </span><span class="line" data-startTime="2511">GWT development. </span><span class="line" data-startTime="2512">But I &mdash; there's a caveat </span><span class="line" data-startTime="2512">to that. </span><span class="line" data-startTime="2514">You can actually match it up </span><span class="line" data-startTime="2514">with any arbitrary GWT app. </span><span class="line" data-startTime="2516">So, for example, I believe, </span><span class="line" data-startTime="2516">and correct me if I'm wrong, </span><span class="line" data-startTime="2519">but "Angry Birds" actually &mdash; </span><span class="line" data-startTime="2519">like, the &mdash; </span><span class="line" data-startTime="2521">some of the buttons... </span></p>

<p class="speaker"><span class="line" data-starttime="2521"><span class="speakerName">Rogers</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2523"><span class="speakerName">Ray Cromwell</span>: Surrounding it, </span><span class="line" data-startTime="2524">like switching </span><span class="line" data-startTime="2524">between HD and SD versions &mdash; </span><span class="line" data-startTime="2526">there are other things </span><span class="line" data-startTime="2526">around the actual game </span><span class="line" data-startTime="2528">that are actually done </span><span class="line" data-startTime="2528">as you would normally expect </span><span class="line" data-startTime="2530">in a GWT app. </span><span class="line" data-startTime="2530">man: Okay. </span><span class="line" data-startTime="2532">And then when you talk </span><span class="line" data-startTime="2532">about cross-platform support, </span><span class="line" data-startTime="2534">and &mdash; but that </span><span class="line" data-startTime="2534">that applies really </span><span class="line" data-startTime="2535">to just the sort of game area </span><span class="line" data-startTime="2535">part of the game, </span><span class="line" data-startTime="2539">the ForPlay part of the game </span><span class="line" data-startTime="2539">is what &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2541"><span class="speakerName">Ray Cromwell</span>: Yes, I'm &mdash; </span><span class="line" data-startTime="2543">man: And so you redo </span><span class="line" data-startTime="2543">your Chrome on each platform. </span></p>

<p class="speaker"><span class="line" data-starttime="2544"><span class="speakerName">Ray Cromwell</span>: That's right. </span><span class="line" data-startTime="2544">In theory, somebody could </span><span class="line" data-startTime="2546">create, like, a widget library </span><span class="line" data-startTime="2546">to abstract, like, </span><span class="line" data-startTime="2548">a list interface </span><span class="line" data-startTime="2548">and a tree interface and so on </span><span class="line" data-startTime="2550">and map those onto, like, </span><span class="line" data-startTime="2550">Android widgets </span><span class="line" data-startTime="2552">and onto GWT widgets, </span><span class="line" data-startTime="2552">and that would work. </span><span class="line" data-startTime="2554">Um, we kind of hope, actually, </span><span class="line" data-startTime="2554">by making it open source, </span><span class="line" data-startTime="2557">people might do </span><span class="line" data-startTime="2557">those sort of things, </span><span class="line" data-startTime="2558">sort of build things on top. </span><span class="line" data-startTime="2558">man: Okay. </span></p>

<p class="speaker"><span class="line" data-starttime="2560"><span class="speakerName">Ray Cromwell</span>: Um, actually, </span><span class="line" data-startTime="2560">one of the other things is </span><span class="line" data-startTime="2562">that there are people </span><span class="line" data-startTime="2562">in the audience who are experts </span><span class="line" data-startTime="2564">on, like, asset pipelines </span><span class="line" data-startTime="2564">in games. </span><span class="line" data-startTime="2565">One of the things </span><span class="line" data-startTime="2565">we actually need is &mdash; is, um &mdash; </span><span class="line" data-startTime="2567">ForPlay's asset management </span><span class="line" data-startTime="2567">is very basic, </span><span class="line" data-startTime="2570">and for importing things </span><span class="line" data-startTime="2570">like SVG or Collada models </span><span class="line" data-startTime="2573">and things like that and meshes, </span><span class="line" data-startTime="2575">it would be cool </span><span class="line" data-startTime="2575">if people sort of built tools </span><span class="line" data-startTime="2577">to sort of assist in that part, </span><span class="line" data-startTime="2578">tying into the rest </span><span class="line" data-startTime="2578">of the R pipeline. </span><span class="line" data-startTime="2580">There you go. </span><span class="line" data-startTime="2580">man: Thank you. </span><span class="line" data-startTime="2582">man: Hi, again. </span><span class="line" data-startTime="2583">Uh, we just tried to enter </span><span class="line" data-startTime="2583">the Chrome "Angry Birds." </span></p>

<p class="speaker"><span class="line" data-starttime="2587"><span class="speakerName">Ray Cromwell</span>: Uh-huh. </span><span class="line" data-startTime="2587">man: And it asked for Flash. </span><span class="line" data-startTime="2590">Is it compiled in Flash? </span></p>

<p class="speaker"><span class="line" data-starttime="2590"><span class="speakerName">Ray Cromwell</span>: No, it's not. </span> <span class="line" data-startTime="2593">Um, but what it is doing is, </span><span class="line" data-startTime="2593">is that, um, </span><span class="line" data-startTime="2596">it's using it for audio, </span><span class="line" data-startTime="2596">to play sounds. </span> <span class="line" data-startTime="2598">So we originally were using </span><span class="line" data-startTime="2598">the built-in HTML5 audio tag </span><span class="line" data-startTime="2601">to play audio. </span> <span class="line" data-startTime="2603">But we ran into some hiccups </span><span class="line" data-startTime="2603">at the last minute, </span><span class="line" data-startTime="2605">and I believe </span><span class="line" data-startTime="2605">those are being fixed </span><span class="line" data-startTime="2607">in newer versions </span><span class="line" data-startTime="2607">of the browser. </span> <span class="line" data-startTime="2609">But in order to make sure </span><span class="line" data-startTime="2609">that the game was smooth </span><span class="line" data-startTime="2611">and had &mdash; and basically was </span><span class="line" data-startTime="2611">as bug-free as possible, </span><span class="line" data-startTime="2614">we &mdash; we used Flash </span><span class="line" data-startTime="2614">for the audio for now. </span> <span class="line" data-startTime="2617">But &mdash; so that's not a &mdash; </span><span class="line" data-startTime="2617">sort of a knock </span><span class="line" data-startTime="2619">against HTML5 audio. </span> <span class="line" data-startTime="2620">It's just that there were </span><span class="line" data-startTime="2620">some problems, </span><span class="line" data-startTime="2622">and we wanted to make sure </span><span class="line" data-startTime="2622">that the game ran perfectly. </span> <span class="line" data-startTime="2625">man: So for multiple platforms, </span><span class="line" data-startTime="2627">how do you handle, like, </span><span class="line" data-startTime="2627">in-app purchases </span><span class="line" data-startTime="2629">and, uh, advertising? </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2631"><span class="speakerName">Rogers</span>: So there's callouts </span><span class="line" data-startTime="2631">into the browser. </span><span class="line" data-startTime="2633">Like I said, for instance, </span><span class="line" data-startTime="2633">in "Angry Birds," </span><span class="line" data-startTime="2634">what Rovio did was </span><span class="line" data-startTime="2634">when you click, I think, </span><span class="line" data-startTime="2636">some of the buttons </span><span class="line" data-startTime="2636">in the game, </span><span class="line" data-startTime="2638">that you're basically </span><span class="line" data-startTime="2638">calling out into the browser. </span><span class="line" data-startTime="2640">You do the same thing </span><span class="line" data-startTime="2640">for the &mdash; </span><span class="line" data-startTime="2642">for your in-app payments </span><span class="line" data-startTime="2642">or whatever. </span><span class="line" data-startTime="2645">Um, in terms </span><span class="line" data-startTime="2645">of architecting it, </span><span class="line" data-startTime="2647">you basically &mdash; your &mdash; </span><span class="line" data-startTime="2647">you have several entry points </span><span class="line" data-startTime="2650">for each platform that I showed, </span><span class="line" data-startTime="2650">those small snippets. </span><span class="line" data-startTime="2652">Um, you can basically stick </span><span class="line" data-startTime="2652">that kind of code </span><span class="line" data-startTime="2655">in &mdash; into the platform-specific </span><span class="line" data-startTime="2655">entry point </span><span class="line" data-startTime="2657">and call into it </span><span class="line" data-startTime="2657">in that manner. </span></p>

<p class="speaker"><span class="line" data-starttime="2659"><span class="speakerName">Ray Cromwell</span>: But to be </span><span class="line" data-startTime="2659">more specific, </span><span class="line" data-startTime="2661">there's no high-level </span><span class="line" data-startTime="2661">service-provider API </span><span class="line" data-startTime="2663">in there for that, </span><span class="line" data-startTime="2664">but that would be a nice thing </span><span class="line" data-startTime="2664">to add in, like, </span><span class="line" data-startTime="2666">the beta version, </span><span class="line" data-startTime="2667">uh, so that, like, </span><span class="line" data-startTime="2667">if you're in an Android app, </span><span class="line" data-startTime="2669">it uses the Android </span><span class="line" data-startTime="2669">in that purchase, </span><span class="line" data-startTime="2671">then if you're on Chrome, </span><span class="line" data-startTime="2671">it does that. </span><span class="line" data-startTime="2673">So that's a great idea. </span><span class="line" data-startTime="2673">And actually, so anybody </span><span class="line" data-startTime="2675">who doesn't want </span><span class="line" data-startTime="2675">to contribute code, </span><span class="line" data-startTime="2677">you can actually just go </span><span class="line" data-startTime="2677">to the issue tracker </span><span class="line" data-startTime="2679">and put in what you want, </span><span class="line" data-startTime="2679">and, you know, </span><span class="line" data-startTime="2680">maybe somebody will pick it up. </span></p>

<p class="speaker"><span class="line" data-starttime="2683"><span class="speakerName">Rogers</span>: I think that's it. </span><span class="line" data-startTime="2683">No more questions? </span></p>

<p class="speaker"><span class="line" data-starttime="2684"><span class="speakerName">Ray Cromwell</span>: So we're letting </span><span class="line" data-startTime="2684">you guys go home early today. </span><span class="line" data-startTime="2686">You can get out </span><span class="line" data-startTime="2686">and play with your &mdash; </span><span class="line" data-startTime="2688">play some more </span><span class="line" data-startTime="2688">with your tablets. </span><span class="line" data-startTime="2690">Thanks for coming to Google IO. </span></p>

<p class="speaker"><span class="line" data-starttime="2690"><span class="speakerName">Rogers</span>: Thanks. </span><span class="line" data-startTime="2692">[applause] </span></p>

<p class="speaker"><span class="line" data-starttime="2694"><span class="speakerName">Ray Cromwell</span>: And, uh, go forth </span><span class="line" data-startTime="2694">and make kick-ass games. </span></p></div>