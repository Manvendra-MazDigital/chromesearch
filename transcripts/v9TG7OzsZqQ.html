<p class="speaker"><span class="line" data-starttime="5"><span class="speakerName">Brad Abrams</span>: Good afternoon, and </span><span class="line" data-startTime="5">thank you for coming back </span><span class="line" data-startTime="7">from lunch. </span><span class="line" data-startTime="8">You know, whenever I speak at a </span><span class="line" data-startTime="8">big conference like this, I </span><span class="line" data-startTime="11">always ask them to put me </span><span class="line" data-startTime="11">right after lunch, when </span><span class="line" data-startTime="14">everybody's a little bit tired, </span><span class="line" data-startTime="14">because what I find is </span><span class="line" data-startTime="18">the people that come to the </span><span class="line" data-startTime="18">session right after lunch are </span><span class="line" data-startTime="21">the most interesting, engaged, </span><span class="line" data-startTime="21">smartest, best-looking </span><span class="line" data-startTime="26">audiences, don't you think? </span><span class="line" data-startTime="29">I think so. </span><span class="line" data-startTime="31">So we're really excited </span><span class="line" data-startTime="31">about this talk. </span><span class="line" data-startTime="33">Ido and I are going to go </span><span class="line" data-startTime="33">through how to use HTML5 and </span><span class="line" data-startTime="37">App Engine to build modern </span><span class="line" data-startTime="37">web applications. </span><span class="line" data-startTime="40">So I'm Brad Abrams, and I'm a </span><span class="line" data-startTime="40">product manager on the cloud </span><span class="line" data-startTime="43">platform team. </span></p>

<p class="speaker"><span class="line" data-starttime="44"><span class="speakerName">Ido Green</span>: And I'm Ido Green, </span><span class="line" data-startTime="44">and I'm a developer advocate </span><span class="line" data-startTime="45">for Chrome. </span></p>

<p class="speaker"><span class="line" data-starttime="47"><span class="speakerName">Brad Abrams</span>: So Ido, if we're </span><span class="line" data-startTime="47">going to talk about HTML5 and </span><span class="line" data-startTime="50">App Engine and building great </span><span class="line" data-startTime="50">modern web apps, maybe we </span><span class="line" data-startTime="53">should define for the audience </span><span class="line" data-startTime="53">what a modern </span><span class="line" data-startTime="55">web app really is. </span></p>

<p class="speaker"><span class="line" data-starttime="57"><span class="speakerName">Ido Green</span>: Absolutely. </span> <span class="line" data-startTime="57">So the web is changing so </span><span class="line" data-startTime="57">quickly that it's really hard </span><span class="line" data-startTime="61">to keep up with all the new </span><span class="line" data-startTime="61">capabilities and rich APIs </span><span class="line" data-startTime="63">that we're getting every </span><span class="line" data-startTime="63">six weeks, actually. </span> <span class="line" data-startTime="67">Things that we weren't able to </span><span class="line" data-startTime="67">do, like, 6 or 12 months ago, </span><span class="line" data-startTime="71">we're now able to </span><span class="line" data-startTime="71">do on the web. </span> <span class="line" data-startTime="73">And we saw in the keynote some </span><span class="line" data-startTime="73">really, really impressive </span><span class="line" data-startTime="75">demos for that. </span> <span class="line" data-startTime="77">So when we come to define web </span><span class="line" data-startTime="77">apps, it's actually quite </span><span class="line" data-startTime="79">hard, because we see lots of </span><span class="line" data-startTime="79">fragmentation on the web. </span> <span class="line" data-startTime="82">But however, there's a few </span><span class="line" data-startTime="82">things that we've found that </span><span class="line" data-startTime="85">are quite common in all of the </span><span class="line" data-startTime="85">great web apps that are out </span><span class="line" data-startTime="88">there today. </span> <span class="line" data-startTime="90">One, and foremost, the first </span><span class="line" data-startTime="90">goal for all those web apps is </span><span class="line" data-startTime="94">to be as easy as possible </span><span class="line" data-startTime="94">for the user to use. </span></p>

<p><span class="line" data-startTime="97">They want to let the user </span><span class="line" data-startTime="97">achieve their goals with as </span><span class="line" data-startTime="101">much efficiency as possible. </span> <span class="line" data-startTime="103">Some of them are built in </span><span class="line" data-startTime="103">offline first methodology. </span> <span class="line" data-startTime="106">And what that means is that </span><span class="line" data-startTime="106">you're thinking from the </span><span class="line" data-startTime="108">ground up how the app will look </span><span class="line" data-startTime="108">like and how the app will </span><span class="line" data-startTime="111">react when there's no </span><span class="line" data-startTime="111">connection, and then building </span><span class="line" data-startTime="114">on top of it. </span> <span class="line" data-startTime="114">So it's not like any other edit </span><span class="line" data-startTime="114">feature that you want to </span><span class="line" data-startTime="117">add to an existing app. </span> <span class="line" data-startTime="118">It's more of, let's think how </span><span class="line" data-startTime="118">this app will work when </span><span class="line" data-startTime="122">there's no connection, and </span><span class="line" data-startTime="122">build on top of it. </span> <span class="line" data-startTime="125">When we're moving more and more </span><span class="line" data-startTime="125">logic to the client side, </span><span class="line" data-startTime="128">we're dealing with more code. </span> <span class="line" data-startTime="129">And that's &mdash; </span><span class="line" data-startTime="130">I'm sure some of you </span><span class="line" data-startTime="130">are smiling &mdash; </span><span class="line" data-startTime="132">causing lots of spaghetti </span><span class="line" data-startTime="132">code. </span> <span class="line" data-startTime="134">And I think that's one of the </span><span class="line" data-startTime="134">main reasons why we see a huge </span><span class="line" data-startTime="137">movement and flourishing in MVC, </span><span class="line" data-startTime="137">or actually I should say </span><span class="line" data-startTime="141">MV*, because we have MVP and </span><span class="line" data-startTime="141">VVM, and lots of others, that </span><span class="line" data-startTime="145">are basically coming to make a </span><span class="line" data-startTime="145">clear separation between our </span><span class="line" data-startTime="148">data models and our UI, and </span><span class="line" data-startTime="148">make our code much more </span><span class="line" data-startTime="153">readable and maintainable. </span></p>

<p><span class="line" data-startTime="155">The last part is that we want </span><span class="line" data-startTime="155">those web apps to feel as </span><span class="line" data-startTime="158">native as possible, and we have </span><span class="line" data-startTime="158">today with HTML5 all the </span><span class="line" data-startTime="162">great APIs to do drag and drop </span><span class="line" data-startTime="162">transition, 3D, and others. </span> <span class="line" data-startTime="166">We want to reach 60 </span><span class="line" data-startTime="166">frames per second. </span> <span class="line" data-startTime="168">Why? </span><span class="line" data-startTime="169">Because above it, the </span><span class="line" data-startTime="169">eye couldn't tell. </span> <span class="line" data-startTime="171">And we want to save some CPU </span><span class="line" data-startTime="171">cycles, and make ourselves, </span><span class="line" data-startTime="175">our users, and Al Gore happy. </span> <span class="line" data-startTime="177">So those two parts are extremely </span><span class="line" data-startTime="177">important when </span><span class="line" data-startTime="180">you're thinking about </span><span class="line" data-startTime="180">your great web app. </span> <span class="line" data-startTime="183">Here is a great example, </span><span class="line" data-startTime="183">Hipmunk. </span> <span class="line" data-startTime="185">They are basically letting you </span><span class="line" data-startTime="185">do one thing and one thing </span><span class="line" data-startTime="189">only, find the best flight </span><span class="line" data-startTime="189">for your needs. </span> <span class="line" data-startTime="191">You could see how immersive it </span><span class="line" data-startTime="191">is, how functional it is, and </span><span class="line" data-startTime="194">if you're setting new </span><span class="line" data-startTime="194">parameters, or you just want </span><span class="line" data-startTime="197">to start a new search, you don't </span><span class="line" data-startTime="197">need to shift focus. </span> <span class="line" data-startTime="199">You are all in that app. </span></p>

<p><span class="line" data-startTime="202">Another great app that I had the </span><span class="line" data-startTime="202">pleasure to work with is </span><span class="line" data-startTime="205">My Chrome Theme. </span> <span class="line" data-startTime="206">It's basically letting you </span><span class="line" data-startTime="206">create your own personal </span><span class="line" data-startTime="208">Chrome theme and share with </span><span class="line" data-startTime="208">friends and family, and I </span><span class="line" data-startTime="211">highly encourage you </span><span class="line" data-startTime="211">to check it out. </span> <span class="line" data-startTime="213">It's using all the best </span><span class="line" data-startTime="213">technology, CSS3 and HTML5 in </span><span class="line" data-startTime="216">order to achieve this goal. </span> <span class="line" data-startTime="219">When we're coming to speak about </span><span class="line" data-startTime="219">client-side architecture </span><span class="line" data-startTime="222">and technology, there's </span><span class="line" data-startTime="222">a huge amount of </span><span class="line" data-startTime="225">different options out there. </span> <span class="line" data-startTime="227">And since we don't have time to </span><span class="line" data-startTime="227">get deeper, we just choose </span><span class="line" data-startTime="229">here three great examples </span><span class="line" data-startTime="229">to choose from. </span> <span class="line" data-startTime="232">And if you have a bit more time, </span><span class="line" data-startTime="232">my colleague and great </span><span class="line" data-startTime="235">mentor [INAUDIBLE] </span><span class="line" data-startTime="236">did a great job in terms of </span><span class="line" data-startTime="236">letting you know how all the </span><span class="line" data-startTime="239">different MV* framework will </span><span class="line" data-startTime="239">work in different use cases on </span><span class="line" data-startTime="244">a Hello World of the MVC </span><span class="line" data-startTime="244">framework, which </span><span class="line" data-startTime="246">is the to-do list. </span></p>

<p><span class="line" data-startTime="248">Why we do we need offline? </span><span class="line" data-startTime="250">It's a question that's coming </span><span class="line" data-startTime="250">again and again, and I would </span><span class="line" data-startTime="253">just point out that I think the </span><span class="line" data-startTime="253">best answer for that would </span><span class="line" data-startTime="256">be faster is better, and it's </span><span class="line" data-startTime="256">making your app much smoother, </span><span class="line" data-startTime="261">much snappier. </span> <span class="line" data-startTime="262">Users will enjoy it </span><span class="line" data-startTime="262">and appreciate it. </span> <span class="line" data-startTime="264">And of course, you get the </span><span class="line" data-startTime="264">benefit that your app will </span><span class="line" data-startTime="267">work perfectly when there's no </span><span class="line" data-startTime="267">connection or when there is a </span><span class="line" data-startTime="270">flaky connection. </span></p>

<p><span class="line" data-startTime="271">In our demo later, we'll use </span><span class="line" data-startTime="271">Lawnchair, which is a library </span><span class="line" data-startTime="274">that lets us actually work in </span><span class="line" data-startTime="274">an API that is above the </span><span class="line" data-startTime="277">normal APIs that </span><span class="line" data-startTime="277">HTML5 lets us. </span> <span class="line" data-startTime="279">And that's another benefit that </span><span class="line" data-startTime="279">we wanted to show you, </span><span class="line" data-startTime="281">because then later on if you </span><span class="line" data-startTime="281">want to move from, let's say, </span><span class="line" data-startTime="284">local storage or web storage </span><span class="line" data-startTime="284">to IndexedDB, </span><span class="line" data-startTime="287">it's very, very smoothly. </span> <span class="line" data-startTime="289">Other APIs that are under our </span><span class="line" data-startTime="289">hands today, and actually in </span><span class="line" data-startTime="293">our toolbox, it's of </span><span class="line" data-startTime="293">course AppCache. </span> <span class="line" data-startTime="295">AppCache is letting you save </span><span class="line" data-startTime="295">all the static information </span><span class="line" data-startTime="298">that you need. </span> <span class="line" data-startTime="299">So first of all, and foremost, </span><span class="line" data-startTime="299">it would be the HTML, </span><span class="line" data-startTime="302">JavaScript and CSS file </span><span class="line" data-startTime="302">that we need. </span> <span class="line" data-startTime="304">Usually it will be one </span><span class="line" data-startTime="304">single-page app. </span></p>

<p><span class="line" data-startTime="306">So it's one HTML file, and </span><span class="line" data-startTime="306">then a bunch of CSS and </span><span class="line" data-startTime="309">JavaScript, but also sound </span><span class="line" data-startTime="309">files and images. </span> <span class="line" data-startTime="312">And then for saving our </span><span class="line" data-startTime="312">persistent [? end ?] data, we </span><span class="line" data-startTime="316">could use local storage, </span><span class="line" data-startTime="316">which is a simple key </span><span class="line" data-startTime="318">value API, or IndexedDB. </span> <span class="line" data-startTime="321">And today with HTML5 file </span><span class="line" data-startTime="321">API, we could save </span><span class="line" data-startTime="324">binary does as well. </span> <span class="line" data-startTime="326">So offline, we touch about it. </span> <span class="line" data-startTime="328">I think the main challenge with </span><span class="line" data-startTime="328">offline is to write the </span><span class="line" data-startTime="330">right sync layer. </span> <span class="line" data-startTime="331">Because to save the data, we'll </span><span class="line" data-startTime="331">show you it's quite easy </span><span class="line" data-startTime="334">and inefficient. </span> <span class="line" data-startTime="335">The sync is the most </span><span class="line" data-startTime="335">problematic way. </span> <span class="line" data-startTime="337">How it will work best in your </span><span class="line" data-startTime="337">use case, and how your user </span><span class="line" data-startTime="340">will appreciate the fact, like </span><span class="line" data-startTime="340">we saw in the demo today of </span><span class="line" data-startTime="343">Google Docs, how easy is it to </span><span class="line" data-startTime="343">just notify the user slightly. </span></p>

<p><span class="line" data-startTime="346">They could still be productive, </span><span class="line" data-startTime="346">they could still </span><span class="line" data-startTime="348">work and write their manifesto, </span><span class="line" data-startTime="348">but then when we </span><span class="line" data-startTime="351">have the connection, we're doing </span><span class="line" data-startTime="351">the right thing in terms </span><span class="line" data-startTime="354">of syncing it immediately </span><span class="line" data-startTime="354">to the cloud. </span> <span class="line" data-startTime="356">I choose here to show you with </span><span class="line" data-startTime="356">one line of code we could </span><span class="line" data-startTime="360">check exactly, what </span><span class="line" data-startTime="360">is the status? </span><span class="line" data-startTime="361">Do we have connection or not? </span><span class="line" data-startTime="363">And based on that information, </span><span class="line" data-startTime="363">we could </span><span class="line" data-startTime="365">make the right decision. </span> <span class="line" data-startTime="367">Another great feature that </span><span class="line" data-startTime="367">[? Paul Kelly and I ?] </span><span class="line" data-startTime="370">work on is Web Intents. </span> <span class="line" data-startTime="371">Web Intents basically lets you </span><span class="line" data-startTime="371">have the Intents system that </span><span class="line" data-startTime="375">we saw in Android, and </span><span class="line" data-startTime="375">have it on the web. </span></p>

<p><span class="line" data-startTime="377">And that's, in my humble </span><span class="line" data-startTime="377">opinion, going to change the </span><span class="line" data-startTime="380">world of web apps, and we're </span><span class="line" data-startTime="380">going to see more and more web </span><span class="line" data-startTime="382">apps harnessing their users </span><span class="line" data-startTime="382">with more functionality </span><span class="line" data-startTime="385">without the pain on you, the </span><span class="line" data-startTime="385">developers, to code it against </span><span class="line" data-startTime="389">the vast majority of API that </span><span class="line" data-startTime="389">we see on the web today. </span> <span class="line" data-startTime="392">Just imagine the power of </span><span class="line" data-startTime="392">allowing your users to share </span><span class="line" data-startTime="396">anything on their favorite </span><span class="line" data-startTime="396">social networks. </span> <span class="line" data-startTime="401">I know that some of you are </span><span class="line" data-startTime="401">thinking, OK Ido, you're </span><span class="line" data-startTime="403">speaking about things 3,000 feet </span><span class="line" data-startTime="403">above, but we have lots </span><span class="line" data-startTime="407">of users that are still using </span><span class="line" data-startTime="407">older browsers that don't have </span><span class="line" data-startTime="411">all the capabilities </span><span class="line" data-startTime="411">and features that </span><span class="line" data-startTime="412">you are talking about. </span> <span class="line" data-startTime="414">And just to mention here, </span><span class="line" data-startTime="414">because I know that some of </span><span class="line" data-startTime="416">the guys are more through the </span><span class="line" data-startTime="416">app engine side, and are </span><span class="line" data-startTime="418">working in big organizations </span><span class="line" data-startTime="418">and big enterprises, </span><span class="line" data-startTime="421">organizations, for people that </span><span class="line" data-startTime="421">still have older browsers </span><span class="line" data-startTime="426">under their hands and heads, </span><span class="line" data-startTime="426">they could use </span><span class="line" data-startTime="429">Google Chrome Frame. </span></p>

<p><span class="line" data-startTime="430">It doesn't need any </span><span class="line" data-startTime="430">administrative rights, and </span><span class="line" data-startTime="432">once you install it, you get </span><span class="line" data-startTime="432">every six weeks the greatest </span><span class="line" data-startTime="435">and latest of Chrome, meaning </span><span class="line" data-startTime="435">security, speed, and </span><span class="line" data-startTime="438">simplicity inside IE. </span> <span class="line" data-startTime="440">So CSS transition, WebGL, drag </span><span class="line" data-startTime="440">and drop, all the great things </span><span class="line" data-startTime="445">that you want to accomplish in </span><span class="line" data-startTime="445">your web app are there, and </span><span class="line" data-startTime="448">they will stay there. </span> <span class="line" data-startTime="449">All you need is one line of </span><span class="line" data-startTime="449">code, one line of meta header, </span><span class="line" data-startTime="452">like it is here. </span> <span class="line" data-startTime="453">Or even better, if you have </span><span class="line" data-startTime="453">control of your server, just </span><span class="line" data-startTime="456">change the HTTP header. </span></p>

<p><span class="line" data-startTime="458">And you can choose and play </span><span class="line" data-startTime="458">and tune it to your needs. </span> <span class="line" data-startTime="461">If you want just certain </span><span class="line" data-startTime="461">versions of IE, </span><span class="line" data-startTime="463">it will work perfectly. </span> <span class="line" data-startTime="464">Now any modern web app &mdash; </span><span class="line" data-startTime="464">great web app &mdash; needs </span><span class="line" data-startTime="467">a very strong server. </span> <span class="line" data-startTime="469">I guess it's just the right time </span><span class="line" data-startTime="469">to ask Brad what's new in </span><span class="line" data-startTime="471">that kingdom. </span></p>

<p class="speaker"><span class="line" data-starttime="472"><span class="speakerName">Brad Abrams</span>: Absolutely, </span><span class="line" data-startTime="472">thanks Ido. </span> <span class="line" data-startTime="473">When I talk to web developers, </span><span class="line" data-startTime="473">most of them are very </span><span class="line" data-startTime="477">interested in a lot of the </span><span class="line" data-startTime="477">client-side functionality that </span><span class="line" data-startTime="479">Ido just talked about. </span> <span class="line" data-startTime="481">Building rich, interactive </span><span class="line" data-startTime="481">experiences on the client is </span><span class="line" data-startTime="485">the way to sort of focus on your </span><span class="line" data-startTime="485">users and make sure those </span><span class="line" data-startTime="487">needs are met. </span> <span class="line" data-startTime="489">And so the last thing you want </span><span class="line" data-startTime="489">to have to worry about is </span><span class="line" data-startTime="491">complexities related </span><span class="line" data-startTime="491">to the server. </span> <span class="line" data-startTime="493">You'd like to just have that </span><span class="line" data-startTime="493">taken care for you, but we do </span><span class="line" data-startTime="497">need server environments. </span> <span class="line" data-startTime="498">You have to serve the HTML, </span><span class="line" data-startTime="498">CSS and JavaScript. </span> <span class="line" data-startTime="501">You, a lot of times, can offload </span><span class="line" data-startTime="501">expensive computations </span><span class="line" data-startTime="505">to the server and </span><span class="line" data-startTime="505">do those there. </span> <span class="line" data-startTime="507">You can do sharing and </span><span class="line" data-startTime="507">collaboration on the server. </span></p>

<p><span class="line" data-startTime="510">But then there's a bunch of </span><span class="line" data-startTime="510">problems that you have as a </span><span class="line" data-startTime="512">web developer when you're </span><span class="line" data-startTime="512">dealing with the server </span><span class="line" data-startTime="515">environment. </span> <span class="line" data-startTime="515">Where are you going </span><span class="line" data-startTime="515">to host that? </span><span class="line" data-startTime="517">Are you going to maintain </span><span class="line" data-startTime="517">your own machine images? </span><span class="line" data-startTime="521">What if Linux has </span><span class="line" data-startTime="521">a security hole? </span><span class="line" data-startTime="523">Are you going to patch that? </span><span class="line" data-startTime="524">Are you going to keep up with </span><span class="line" data-startTime="524">all that infrastructure that </span><span class="line" data-startTime="526">needs to be done? </span><span class="line" data-startTime="528">And then specifically, when </span><span class="line" data-startTime="528">you're talking about the new </span><span class="line" data-startTime="530">sort of architecture, when using </span><span class="line" data-startTime="530">an MVC pattern on the </span><span class="line" data-startTime="533">client, communicating to the </span><span class="line" data-startTime="533">server via rest APIs, well, </span><span class="line" data-startTime="537">how are you going to do </span><span class="line" data-startTime="537">that serialization? </span><span class="line" data-startTime="539">How are you going to </span><span class="line" data-startTime="539">do authentication? </span><span class="line" data-startTime="541">How are you going to do the </span><span class="line" data-startTime="541">things we call the OAuth dance </span><span class="line" data-startTime="544">to get users' credentials </span><span class="line" data-startTime="544">and permissions? </span><span class="line" data-startTime="548">So as you might guess, I have an </span><span class="line" data-startTime="548">answer for you, and that's </span><span class="line" data-startTime="552">App Engine. </span></p>

<p><span class="line" data-startTime="553">So App Engine's been around </span><span class="line" data-startTime="553">for several years now. </span> <span class="line" data-startTime="555">It's a proven technology for </span><span class="line" data-startTime="555">building web apps and these </span><span class="line" data-startTime="559">modern web apps. </span> <span class="line" data-startTime="560">With App Engine, it's very easy </span><span class="line" data-startTime="560">to build and manage and </span><span class="line" data-startTime="563">run your applications. </span> <span class="line" data-startTime="564">You write code in Java or Python </span><span class="line" data-startTime="564">or Go and upload it </span><span class="line" data-startTime="568">into our data centers, and </span><span class="line" data-startTime="568">Google runs it in our large </span><span class="line" data-startTime="571">distributed data centers </span><span class="line" data-startTime="571">all over the world. </span> <span class="line" data-startTime="573">Our SRE team keeps your </span><span class="line" data-startTime="573">applications up. </span> <span class="line" data-startTime="579">Earlier today, we launched </span><span class="line" data-startTime="579">Google Cloud Endpoints. </span></p>

<p><span class="line" data-startTime="583">And Google Cloud Endpoints makes </span><span class="line" data-startTime="583">it significantly easier </span><span class="line" data-startTime="587">to build web APIs, to build </span><span class="line" data-startTime="587">REST-based endpoints that you </span><span class="line" data-startTime="591">expose from your App </span><span class="line" data-startTime="591">Engine app and </span><span class="line" data-startTime="594">consume that in clients. </span> <span class="line" data-startTime="596">So you can write your </span><span class="line" data-startTime="596">application in App Engine, </span><span class="line" data-startTime="600">expose these endpoints via </span><span class="line" data-startTime="600">standard REST-based </span><span class="line" data-startTime="604">interfaces. </span> <span class="line" data-startTime="605">We handle the serialization and </span><span class="line" data-startTime="605">the authentication, and we </span><span class="line" data-startTime="609">give you strongly typed clients </span><span class="line" data-startTime="609">for Java, for Android, </span><span class="line" data-startTime="614">Objective C, for iOS, and what </span><span class="line" data-startTime="614">we'll be talking about here is </span><span class="line" data-startTime="618">a modern JavaScript client </span><span class="line" data-startTime="618">library that you can go use. </span> <span class="line" data-startTime="622">And what's great is that all </span><span class="line" data-startTime="622">this technology that we're </span><span class="line" data-startTime="624">using here with for cloud </span><span class="line" data-startTime="624">endpoints is built on the same </span><span class="line" data-startTime="628">technology. </span> <span class="line" data-startTime="629">It's the same stack that Google </span><span class="line" data-startTime="629">uses to do billions of </span><span class="line" data-startTime="632">transactions with our Google </span><span class="line" data-startTime="632">APIs, like the Google+ APIs or </span><span class="line" data-startTime="638">many of the other Google APIs </span><span class="line" data-startTime="638">that are out there. </span> <span class="line" data-startTime="640">So you're using the exact </span><span class="line" data-startTime="640">same infrastructure and </span><span class="line" data-startTime="642">tools, as we'll see. </span></p>

<p><span class="line" data-startTime="646">Ido and I were sort of </span><span class="line" data-startTime="646">thinking about what &mdash; </span><span class="line" data-startTime="650">I don't want to give it away. </span> <span class="line" data-startTime="651">We were thinking about what we </span><span class="line" data-startTime="651">had in common, what sort of </span><span class="line" data-startTime="654">demo we should do. </span> <span class="line" data-startTime="655">We thought the best way to </span><span class="line" data-startTime="655">explain this to you would be </span><span class="line" data-startTime="657">to do a demo. </span> <span class="line" data-startTime="658">So we thought about what we </span><span class="line" data-startTime="658">would have in common, and we </span><span class="line" data-startTime="659">thought what you in the audience </span><span class="line" data-startTime="659">might appreciate. </span> <span class="line" data-startTime="662">So we sort of look at the </span><span class="line" data-startTime="662">demographics of I/O, and we </span><span class="line" data-startTime="665">came up with a plan. </span></p>

<p><span class="line" data-startTime="666">And we decided we would </span><span class="line" data-startTime="666">write an app to </span><span class="line" data-startTime="668">rate and review beers. </span> <span class="line" data-startTime="670">So this is the Birra </span><span class="line" data-startTime="670">sample application. </span> <span class="line" data-startTime="675">Actually, if it takes off, </span><span class="line" data-startTime="675">you won't Ido and </span><span class="line" data-startTime="677">I at I/O next year. </span> <span class="line" data-startTime="678">So we'll do our own little </span><span class="line" data-startTime="678">start up for </span><span class="line" data-startTime="680">beer rating and reviewing. </span> <span class="line" data-startTime="683">So it lets you enter beers </span><span class="line" data-startTime="683">from all over the world. </span> <span class="line" data-startTime="686">You can review those beers, </span><span class="line" data-startTime="686">you can comment on them. </span> <span class="line" data-startTime="689">And what we're going to for the </span><span class="line" data-startTime="689">next, say, 45 minutes or </span><span class="line" data-startTime="692">so is build out this application </span><span class="line" data-startTime="692">right here in </span><span class="line" data-startTime="695">front of you, so you can </span><span class="line" data-startTime="695">see how it goes. </span></p>

<p><span class="line" data-startTime="697">So let's make sure we </span><span class="line" data-startTime="697">understand, before we get </span><span class="line" data-startTime="700">started, the architecture </span><span class="line" data-startTime="700">of this app. </span> <span class="line" data-startTime="703">So the beer application, </span><span class="line" data-startTime="703">start with beer. </span> <span class="line" data-startTime="706">We're going to store the </span><span class="line" data-startTime="706">beers, or at least the </span><span class="line" data-startTime="709">metadata about the beers, in the </span><span class="line" data-startTime="709">largest NoSQL data store </span><span class="line" data-startTime="713">in production in the world, </span><span class="line" data-startTime="713">and that's in App Engine's </span><span class="line" data-startTime="716">NoSQL data store. </span> <span class="line" data-startTime="719">And then we're going to do some </span><span class="line" data-startTime="719">application logic in App </span><span class="line" data-startTime="722">Engine to do things like </span><span class="line" data-startTime="722">sorting, filtering of those </span><span class="line" data-startTime="725">beers, and we'll show you </span><span class="line" data-startTime="725">about how that works. </span> <span class="line" data-startTime="728">And then we're going to expose </span><span class="line" data-startTime="728">that over endpoints so that </span><span class="line" data-startTime="731">there's a REST-based </span><span class="line" data-startTime="731">interface for that. </span></p>

<p><span class="line" data-startTime="734">And then Ido's going to consume </span><span class="line" data-startTime="734">that in a modern </span><span class="line" data-startTime="738">JavaScript client </span><span class="line" data-startTime="738">using offline, </span><span class="line" data-startTime="740">using the MVC framework. </span> <span class="line" data-startTime="742">OK so it sounds good? </span><span class="line" data-startTime="743">Should we get started? </span><span class="line" data-startTime="745">OK, so let's get started here. </span> <span class="line" data-startTime="748">I'm going to start by building </span><span class="line" data-startTime="748">out the server side of the </span><span class="line" data-startTime="750">application. </span> <span class="line" data-startTime="752">And what I have installed on </span><span class="line" data-startTime="752">my Mac here is the standard </span><span class="line" data-startTime="755">version of Eclipse, and then I </span><span class="line" data-startTime="755">have the version of Google </span><span class="line" data-startTime="758">Plug-in for Eclipse that just </span><span class="line" data-startTime="758">shipped yesterday, so brand </span><span class="line" data-startTime="762">new bits, and we're going to </span><span class="line" data-startTime="762">use that to start out. </span> <span class="line" data-startTime="764">So I'll just say New </span><span class="line" data-startTime="764">Application. </span> <span class="line" data-startTime="767">We're going to call </span><span class="line" data-startTime="767">this Birra. </span> <span class="line" data-startTime="769">Anybody know why it's </span><span class="line" data-startTime="769">called Birra? </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="771"><span class="speakerName">Audience</span>: It's Hebrew. </span></p>

<p class="speaker"><span class="line" data-starttime="772"><span class="speakerName">Brad Abrams</span>: Hebrew. </span><span class="line" data-startTime="773">Hebrew for beer, yep. </span><span class="line" data-startTime="775">And we're not to use GWT for </span><span class="line" data-startTime="775">this, but we are going to use </span><span class="line" data-startTime="778">App Engine. </span><span class="line" data-startTime="779">And this will create a </span><span class="line" data-startTime="779">scaffolding application for us </span><span class="line" data-startTime="783">to have us get started. </span><span class="line" data-startTime="786">And here it is. </span><span class="line" data-startTime="786">Again, this is the server </span><span class="line" data-startTime="786">side of the code. </span><span class="line" data-startTime="789">And what we're going to </span><span class="line" data-startTime="789">do is come in here </span><span class="line" data-startTime="791">and add a new class. </span><span class="line" data-startTime="792">And as I mentioned, whenever you </span><span class="line" data-startTime="792">start with a beer review </span><span class="line" data-startTime="795">class application, you've </span><span class="line" data-startTime="795">gotta start with beer. </span><span class="line" data-startTime="798">It's central to our application, </span><span class="line" data-startTime="798">and it was </span><span class="line" data-startTime="801">central to the development </span><span class="line" data-startTime="801">of this demo as well. </span><span class="line" data-startTime="805">So we have this beer class, </span><span class="line" data-startTime="805">and this is a </span><span class="line" data-startTime="807">plain old Java object. </span><span class="line" data-startTime="809">Now we need to think, what </span><span class="line" data-startTime="809">is the data about </span><span class="line" data-startTime="811">beer we want to store? </span><span class="line" data-startTime="813">So what do you want to </span><span class="line" data-startTime="813">store about beer? </span><span class="line" data-startTime="816">Any thoughts from the </span><span class="line" data-startTime="816">audience here? </span></p>

<p class="speaker"><span class="line" data-starttime="818"><span class="speakerName">Audience</span>: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="819"><span class="speakerName">Brad Abrams</span>: Oh, the </span><span class="line" data-startTime="819">alcohol content. </span><span class="line" data-startTime="821">That's good. </span><span class="line" data-startTime="824">Alcohol content. </span></p>

<p class="speaker"><span class="line" data-starttime="825"><span class="speakerName">Ido Green</span>: Maybe name. </span></p>

<p class="speaker"><span class="line" data-starttime="826"><span class="speakerName">Brad Abrams</span>: The name. </span><span class="line" data-startTime="828">That's good. </span></p>

<p class="speaker"><span class="line" data-starttime="829"><span class="speakerName">Audience</span>: Color. </span></p>

<p class="speaker"><span class="line" data-starttime="830"><span class="speakerName">Brad Abrams</span>: The color </span><span class="line" data-startTime="830">of the beer. </span><span class="line" data-startTime="833">That's pretty good. </span></p>

<p class="speaker"><span class="line" data-starttime="834"><span class="speakerName">Audience</span>: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="835"><span class="speakerName">Brad Abrams</span>: OK, yeah, we need </span><span class="line" data-startTime="835">a double for the price. </span> <span class="line" data-startTime="841">So I cheated, and ahead of time, </span><span class="line" data-startTime="841">I had a version of the </span><span class="line" data-startTime="845">beer that actually works </span><span class="line" data-startTime="845">with the rest the demo. </span> <span class="line" data-startTime="850">But it is still a plain </span><span class="line" data-startTime="850">old Java object. </span> <span class="line" data-startTime="854">So what I've defined is just </span><span class="line" data-startTime="854">a set of properties that we </span><span class="line" data-startTime="858">have, a set of regular fields, </span><span class="line" data-startTime="858">and then just getters and </span><span class="line" data-startTime="861">setters for that. </span> <span class="line" data-startTime="862">So there's nothing funny here. </span> <span class="line" data-startTime="865">Now what we need to do is teach </span><span class="line" data-startTime="865">App Engine how to store </span><span class="line" data-startTime="868">this object. </span> <span class="line" data-startTime="869">Right now, it's just a </span><span class="line" data-startTime="869">plain Java object. </span> <span class="line" data-startTime="871">We need to teach App Engine how </span><span class="line" data-startTime="871">to store that, and to do </span><span class="line" data-startTime="873">that we're going to use the </span><span class="line" data-startTime="873">old tried and true JDO. </span> <span class="line" data-startTime="879">It's been around forever, </span><span class="line" data-startTime="879">but it's effective. </span></p>

<p><span class="line" data-startTime="882">Everything I'm going to show </span><span class="line" data-startTime="882">you, though, works with any </span><span class="line" data-startTime="884">persistence layer you'd </span><span class="line" data-startTime="884">like to use. </span> <span class="line" data-startTime="886">You can use cloud endpoints, </span><span class="line" data-startTime="886">however you want. </span> <span class="line" data-startTime="888">This just happens to work </span><span class="line" data-startTime="888">well for the tool. </span> <span class="line" data-startTime="893">So we've made it available </span><span class="line" data-startTime="893">with JDO, and </span><span class="line" data-startTime="896">now we have our object. </span> <span class="line" data-startTime="897">Now what we need to do is expose </span><span class="line" data-startTime="897">this in a way that Ido </span><span class="line" data-startTime="901">can consume from his client. </span> <span class="line" data-startTime="903">So to do that, we'll show off </span><span class="line" data-startTime="903">our first new feature of this, </span><span class="line" data-startTime="906">which is Generate Cloud </span><span class="line" data-startTime="906">Endpoint Class. </span> <span class="line" data-startTime="910">So we'll click on that, </span><span class="line" data-startTime="910">and hopefully &mdash; </span><span class="line" data-startTime="913">yeah, there it goes &mdash; </span><span class="line" data-startTime="913">we'll generate a beer </span><span class="line" data-startTime="913">endpoints class. </span></p>

<p><span class="line" data-startTime="918">And in this class, we have this </span><span class="line" data-startTime="918">@API attribute on it. </span> <span class="line" data-startTime="922">The @API attribute indicates </span><span class="line" data-startTime="922">that all the public methods on </span><span class="line" data-startTime="926">this class will be exposed </span><span class="line" data-startTime="926">as REST endpoints. </span> <span class="line" data-startTime="930">And we'll see how the URL for </span><span class="line" data-startTime="930">that looks in a second. </span> <span class="line" data-startTime="933">And we can change the name of </span><span class="line" data-startTime="933">that, which will show up on </span><span class="line" data-startTime="935">the URL, to Birra, </span><span class="line" data-startTime="935">so it matches. </span> <span class="line" data-startTime="938">And let's just take a brief </span><span class="line" data-startTime="938">look at what we have here. </span> <span class="line" data-startTime="941">We have a method to list </span><span class="line" data-startTime="941">all the beers that </span><span class="line" data-startTime="944">are in the data store. </span></p>

<p><span class="line" data-startTime="945">Now we've given you some </span><span class="line" data-startTime="945">scaffolding code just to get </span><span class="line" data-startTime="947">started with that. </span> <span class="line" data-startTime="949">And over the course of this </span><span class="line" data-startTime="949">demo, we'll go through and </span><span class="line" data-startTime="951">modify that. </span> <span class="line" data-startTime="952">And then when you write your </span><span class="line" data-startTime="952">real apps later tonight, or </span><span class="line" data-startTime="955">maybe next week, you'll be </span><span class="line" data-startTime="955">modifying it even more. </span> <span class="line" data-startTime="959">So it basically just iterates </span><span class="line" data-startTime="959">through the data store and </span><span class="line" data-startTime="961">returns all the results. </span> <span class="line" data-startTime="963">Notice I don't have to deal with </span><span class="line" data-startTime="963">any serialization logic </span><span class="line" data-startTime="965">or authentication logic. </span> <span class="line" data-startTime="966">All of that is going </span><span class="line" data-startTime="966">to be taken care of </span><span class="line" data-startTime="968">for us by the framework. </span> <span class="line" data-startTime="970">Then, same thing, I can get a </span><span class="line" data-startTime="970">particular beer by its ID. </span> <span class="line" data-startTime="974">That code is generated for us. </span> <span class="line" data-startTime="976">I can insert a beer. </span> <span class="line" data-startTime="978">And notice this is an </span><span class="line" data-startTime="978">HTTP POST method. </span></p>

<p><span class="line" data-startTime="981">For you people that are REST </span><span class="line" data-startTime="981">heads, and you're kind of into </span><span class="line" data-startTime="984">the REST pattern and making sure </span><span class="line" data-startTime="984">that works, we've tried </span><span class="line" data-startTime="987">to adhere to it nicely here, and </span><span class="line" data-startTime="987">you'll see you have a lot </span><span class="line" data-startTime="990">of control as we go through. </span> <span class="line" data-startTime="991">But one of the things we've done </span><span class="line" data-startTime="991">is expose this as a POST </span><span class="line" data-startTime="993">method because it's insert. </span> <span class="line" data-startTime="995">And then UPDATE is a put, </span><span class="line" data-startTime="995">same sort of thing. </span> <span class="line" data-startTime="998">And then of course we have </span><span class="line" data-startTime="998">this DELETE method here. </span></p>

<p class="speaker"><span class="line" data-starttime="1001"><span class="speakerName">Ido Green</span>: Remove. </span></p>

<p class="speaker"><span class="line" data-starttime="1002"><span class="speakerName">Brad Abrams</span>: Remove, ah, yes. </span></p>

<p class="speaker"><span class="line" data-starttime="1003"><span class="speakerName">Ido Green</span>: I would really, </span><span class="line" data-startTime="1003">really encourage you to put it </span><span class="line" data-startTime="1005">as a DELETE, because it's not </span><span class="line" data-startTime="1005">only me, but the community </span><span class="line" data-startTime="1007">would love to have </span><span class="line" data-startTime="1007">DELETE here. </span><span class="line" data-startTime="1009">It will fit perfectly. </span></p>

<p class="speaker"><span class="line" data-starttime="1010"><span class="speakerName">Brad Abrams</span>: Yes, so the problem </span><span class="line" data-startTime="1010">is this looks so nice </span><span class="line" data-startTime="1013">in my Java code, I don't want </span><span class="line" data-startTime="1013">to mess with my Java code. </span> <span class="line" data-startTime="1016">But I want to change what it </span><span class="line" data-startTime="1016">looks like for him on the </span><span class="line" data-startTime="1019">JavaScript side. </span> <span class="line" data-startTime="1020">And so what we have, I'm going </span><span class="line" data-startTime="1020">to introduce you to this </span><span class="line" data-startTime="1023">attribute we'll become </span><span class="line" data-startTime="1023">very familiar </span><span class="line" data-startTime="1025">with, the @API attribute. </span> <span class="line" data-startTime="1027">And what it does is it gives us </span><span class="line" data-startTime="1027">a way to customize the REST </span><span class="line" data-startTime="1031">endpoint that's generated </span><span class="line" data-startTime="1031">from this method. </span> <span class="line" data-startTime="1033">So in this case, I can change </span><span class="line" data-startTime="1033">the name to be beers.delete, </span><span class="line" data-startTime="1038">and that'll give us a nice </span><span class="line" data-startTime="1038">experience in the Java, IOS, </span><span class="line" data-startTime="1042">or in our case, JavaScript </span><span class="line" data-startTime="1042">client that this generates. </span> <span class="line" data-startTime="1045">OK, so I think we have a </span><span class="line" data-startTime="1045">basic interface here. </span> <span class="line" data-startTime="1048">Let's just do some </span><span class="line" data-startTime="1048">testing of it. </span></p>

<p><span class="line" data-startTime="1050">So I spun up the local </span><span class="line" data-startTime="1050">development time server, so </span><span class="line" data-startTime="1053">it's essentially a baby version </span><span class="line" data-startTime="1053">of App Engine running </span><span class="line" data-startTime="1055">on my laptop here. </span> <span class="line" data-startTime="1057">And then what I'm going to do </span><span class="line" data-startTime="1057">is use every web developer's </span><span class="line" data-startTime="1061">favorite tool, Curl. </span> <span class="line" data-startTime="1064">We're going to test this with </span><span class="line" data-startTime="1064">plain old Curl, just to make </span><span class="line" data-startTime="1066">sure everything is working </span><span class="line" data-startTime="1066">nicely before we </span><span class="line" data-startTime="1069">hand it off to Ido. </span> <span class="line" data-startTime="1070">So the first thing you'll </span><span class="line" data-startTime="1070">notice, if you're an App </span><span class="line" data-startTime="1073">Engine geek, you'll notice that </span><span class="line" data-startTime="1073">_ah, that's the reserve </span><span class="line" data-startTime="1077">namespace in App Engine. </span> <span class="line" data-startTime="1078">So none of the APIs you're </span><span class="line" data-startTime="1078">defining here will interfere </span><span class="line" data-startTime="1082">with the rest of your web </span><span class="line" data-startTime="1082">applications, because we've </span><span class="line" data-startTime="1084">put them in the reserve </span><span class="line" data-startTime="1084">namespace. </span> <span class="line" data-startTime="1086">Then we put them in </span><span class="line" data-startTime="1086">APIs and Birra. </span></p>

<p><span class="line" data-startTime="1088">If you recall, Birra was the </span><span class="line" data-startTime="1088">attribute that I put on </span><span class="line" data-startTime="1091">earlier, was there. </span> <span class="line" data-startTime="1093">And then the name of </span><span class="line" data-startTime="1093">the object is beer. </span> <span class="line" data-startTime="1096">And we just do an HTTP get to </span><span class="line" data-startTime="1096">it, and it returns all the </span><span class="line" data-startTime="1099">beers in the data store, </span><span class="line" data-startTime="1099">which is none. </span> <span class="line" data-startTime="1102">And notice that the return </span><span class="line" data-startTime="1102">is a nicely formatted </span><span class="line" data-startTime="1105">JSON object for us. </span> <span class="line" data-startTime="1107">So let's look at what it would </span><span class="line" data-startTime="1107">take to add something to that. </span> <span class="line" data-startTime="1111">So let me grab this Curl. </span> <span class="line" data-startTime="1116">So we'll do HTTP post, and </span><span class="line" data-startTime="1116">put a new beer in here. </span></p>

<p><span class="line" data-startTime="1120">And the beer name will be Bud. </span> <span class="line" data-startTime="1121">That's my brother's favorite </span><span class="line" data-startTime="1121">beer, so I'm trying not to </span><span class="line" data-startTime="1124">give him a hard time. </span></p>

<p class="speaker"><span class="line" data-starttime="1125"><span class="speakerName">Ido Green</span>: Be patient. </span></p>

<p class="speaker"><span class="line" data-starttime="1126"><span class="speakerName">Brad Abrams</span>: Patient </span><span class="line" data-startTime="1126">with him, yes. </span> <span class="line" data-startTime="1127">So what we've seen now is we did </span><span class="line" data-startTime="1127">a put, HTTP put, got that </span><span class="line" data-startTime="1131">beer in the database. </span> <span class="line" data-startTime="1133">We got an ID for it, ID 1, and </span><span class="line" data-startTime="1133">of course all the other fields </span><span class="line" data-startTime="1136">are null, but we get a </span><span class="line" data-startTime="1138">well-formatted JSON object here. </span> <span class="line" data-startTime="1140">Now what we can do is go back </span><span class="line" data-startTime="1140">and look, and the data story </span><span class="line" data-startTime="1144">isn't quite refreshed yet, </span><span class="line" data-startTime="1144">but there it is. </span> <span class="line" data-startTime="1149">It returns as a list, and then </span><span class="line" data-startTime="1149">in true REST style, I can just </span><span class="line" data-startTime="1153">put a URL parameter passing the </span><span class="line" data-startTime="1153">beer ID, and of course, </span><span class="line" data-startTime="1157">there it is. </span> <span class="line" data-startTime="1158">So no surprises there. </span> <span class="line" data-startTime="1159">So that looks pretty good, I </span><span class="line" data-startTime="1159">think we're almost ready to </span><span class="line" data-startTime="1162">hand it off. </span> <span class="line" data-startTime="1163">But I thought what I'd show </span><span class="line" data-startTime="1163">is a little bit more &mdash; </span><span class="line" data-startTime="1167">right before this talk, I went </span><span class="line" data-startTime="1167">and deployed one of these to </span><span class="line" data-startTime="1170">an endpoint. </span> <span class="line" data-startTime="1172">And I just wanted to show you a </span><span class="line" data-startTime="1172">little bit about some of the </span><span class="line" data-startTime="1174">infrastructure that's </span><span class="line" data-startTime="1174">there for you. </span></p>

<p><span class="line" data-startTime="1176">So if you go to _ah API, and </span><span class="line" data-startTime="1176">then hit the discovery point, </span><span class="line" data-startTime="1182">for any of your App Engine apps </span><span class="line" data-startTime="1182">that are using endpoints, </span><span class="line" data-startTime="1186">we provide a discovery </span><span class="line" data-startTime="1186">endpoint for that. </span> <span class="line" data-startTime="1188">And that discovery endpoint </span><span class="line" data-startTime="1188">gives you metadata about, in </span><span class="line" data-startTime="1192">this case, all of the APIs that </span><span class="line" data-startTime="1192">are available on that App </span><span class="line" data-startTime="1195">Engine app. </span> <span class="line" data-startTime="1196">So we have two. </span> <span class="line" data-startTime="1197">We have the discovery one, and </span><span class="line" data-startTime="1197">of course we ate our own dog </span><span class="line" data-startTime="1200">food and used cloud endpoints </span><span class="line" data-startTime="1200">to serve the discovery. </span></p>

<p><span class="line" data-startTime="1203">And then we have </span><span class="line" data-startTime="1203">our Birra one. </span> <span class="line" data-startTime="1204">So let's take a look at Birra, </span><span class="line" data-startTime="1204">and we bring that up. </span> <span class="line" data-startTime="1207">And if you look at this </span><span class="line" data-startTime="1207">endpoint, you'll see a full </span><span class="line" data-startTime="1212">description of all the types, </span><span class="line" data-startTime="1212">of all the methods and </span><span class="line" data-startTime="1216">operations that are </span><span class="line" data-startTime="1216">part of this. </span> <span class="line" data-startTime="1219">So this is a handy tool to debug </span><span class="line" data-startTime="1219">and use, but it's also </span><span class="line" data-startTime="1224">what we use to create the </span><span class="line" data-startTime="1224">strongly typed client </span><span class="line" data-startTime="1226">libraries in all the different </span><span class="line" data-startTime="1226">languages. </span> <span class="line" data-startTime="1229">In fact, as I mentioned, this </span><span class="line" data-startTime="1229">uses the same infrastructure </span><span class="line" data-startTime="1233">that the rest of Google's </span><span class="line" data-startTime="1233">APIs use. </span> <span class="line" data-startTime="1237">And because we use that same </span><span class="line" data-startTime="1237">infrastructure, we're able to </span><span class="line" data-startTime="1239">use tools like API Explorer. </span></p>

<p><span class="line" data-startTime="1242">So if you do slash APIs </span><span class="line" data-startTime="1242">Explorer, it'll give you a </span><span class="line" data-startTime="1245">nice interactive view </span><span class="line" data-startTime="1245">of your API. </span> <span class="line" data-startTime="1248">So those are all the </span><span class="line" data-startTime="1248">APIs, nicely named. </span> <span class="line" data-startTime="1251">And then I can click on them, </span><span class="line" data-startTime="1251">and I can execute that API </span><span class="line" data-startTime="1254">right here from this interactive </span><span class="line" data-startTime="1254">experience right </span><span class="line" data-startTime="1256">in the browser, without having </span><span class="line" data-startTime="1256">to write a client. </span> <span class="line" data-startTime="1258">So in this case, this App Engine </span><span class="line" data-startTime="1258">app has to spin up. </span> <span class="line" data-startTime="1261">But there it is. </span> <span class="line" data-startTime="1263">And you see a well-formatted get </span><span class="line" data-startTime="1263">request and exactly what </span><span class="line" data-startTime="1267">the response is supposed </span><span class="line" data-startTime="1267">to be. </span> <span class="line" data-startTime="1269">So as Ido and I were building </span><span class="line" data-startTime="1269">out this application, we found </span><span class="line" data-startTime="1272">this invaluable tool </span><span class="line" data-startTime="1272">we could use. </span></p>

<p><span class="line" data-startTime="1275">Because I could deploy an </span><span class="line" data-startTime="1275">application, I could test it </span><span class="line" data-startTime="1278">independent of his client. </span> <span class="line" data-startTime="1280">He could work. </span> <span class="line" data-startTime="1280">When he built his client, he </span><span class="line" data-startTime="1280">could play with it, figure out </span><span class="line" data-startTime="1283">what exactly the payloads were </span><span class="line" data-startTime="1283">supposed to be, and it was </span><span class="line" data-startTime="1286">really nice. </span> <span class="line" data-startTime="1287">It was also nice &mdash; so we could </span><span class="line" data-startTime="1287">shift blame between us. </span> <span class="line" data-startTime="1290">He would often claim it to be </span><span class="line" data-startTime="1290">a bug, and I would show that </span><span class="line" data-startTime="1293">it works nicely in Explorer, </span><span class="line" data-startTime="1293">so we knew </span><span class="line" data-startTime="1296">where to put the problem. </span> <span class="line" data-startTime="1297">And it was equally the other </span><span class="line" data-startTime="1297">way, I'll mention. </span> <span class="line" data-startTime="1300">OK, so that's the </span><span class="line" data-startTime="1300">basic Explorer. </span></p>

<p><span class="line" data-startTime="1303">I think we're ready for you to </span><span class="line" data-startTime="1303">start building our client. </span></p>

<p class="speaker"><span class="line" data-starttime="1305"><span class="speakerName">Ido Green</span>: Absolutely so as </span><span class="line" data-startTime="1305">we all know, in software </span><span class="line" data-startTime="1308">development we want to take </span><span class="line" data-startTime="1308">small steps and see that we </span><span class="line" data-startTime="1310">are on a good path. </span><span class="line" data-startTime="1313">So first, there's a very, very </span><span class="line" data-startTime="1313">simple, just plain vanilla </span><span class="line" data-startTime="1316">JavaScript example. </span><span class="line" data-startTime="1317">So as you can see here, I'm </span><span class="line" data-startTime="1317">having this URL, and as Brad </span><span class="line" data-startTime="1321">mentioned, on our new service, </span><span class="line" data-startTime="1321">I want a certain version. </span><span class="line" data-startTime="1326">And here, this simple AJAX, you </span><span class="line" data-startTime="1326">see, I just get a payload </span><span class="line" data-startTime="1330">of the list of beers. </span><span class="line" data-startTime="1331">Let's see how does it look. </span><span class="line" data-startTime="1334">Oops. </span></p>

<p class="speaker"><span class="line" data-starttime="1335"><span class="speakerName">Brad Abrams</span>: Oh, did </span><span class="line" data-startTime="1335">I not switch you? </span><span class="line" data-startTime="1336">I'm sorry. </span><span class="line" data-startTime="1337">Failing on my Java already. </span></p>

<p class="speaker"><span class="line" data-starttime="1338"><span class="speakerName">Ido Green</span>: Let's see again, </span><span class="line" data-startTime="1338">how does it look? </span><span class="line" data-startTime="1342">Yeah, so we got the </span><span class="line" data-startTime="1342">list of beers. </span> <span class="line" data-startTime="1344">What I said before, and you </span><span class="line" data-startTime="1344">couldn't see, this is the </span><span class="line" data-startTime="1347">simple endpoint that I'm </span><span class="line" data-startTime="1347">calling, and it's plain </span><span class="line" data-startTime="1349">vanilla JavaScript, so it's </span><span class="line" data-startTime="1349">simple AJAX code. </span> <span class="line" data-startTime="1353">So as you can see and imagine, </span><span class="line" data-startTime="1353">you could consume it and walk </span><span class="line" data-startTime="1356">with it, and it's </span><span class="line" data-startTime="1356">good and simple. </span> <span class="line" data-startTime="1358">However, we have another, even </span><span class="line" data-startTime="1358">better thing, and that's </span><span class="line" data-startTime="1361">Google API JavaScript library, </span><span class="line" data-startTime="1361">which actually takes some of </span><span class="line" data-startTime="1365">the load and gives you a better </span><span class="line" data-startTime="1365">API to work with when </span><span class="line" data-startTime="1367">you're working in the client. </span></p>

<p><span class="line" data-startTime="1369">And here all we need to do, as </span><span class="line" data-startTime="1369">you can see, is put the script </span><span class="line" data-startTime="1372">tag and load it asynchronously, </span><span class="line" data-startTime="1372">and of course </span><span class="line" data-startTime="1374">giving it a call back, so when </span><span class="line" data-startTime="1374">it will be loaded, it will run </span><span class="line" data-startTime="1377">our case of load API. </span> <span class="line" data-startTime="1380">We could set client ID, API </span><span class="line" data-startTime="1380">ID, et cetera, and load </span><span class="line" data-startTime="1385">several APIs. </span> <span class="line" data-startTime="1385">In our case, we'll keep it </span><span class="line" data-startTime="1385">simple, but you can imagine </span><span class="line" data-startTime="1388">how you could extend </span><span class="line" data-startTime="1388">it and build a big </span><span class="line" data-startTime="1390">application with it. </span> <span class="line" data-startTime="1391">When we're getting the beers, we </span><span class="line" data-startTime="1391">have this nice API, and if </span><span class="line" data-startTime="1394">you remember before, when Brad </span><span class="line" data-startTime="1394">was making those little </span><span class="line" data-startTime="1397">changes that make our life </span><span class="line" data-startTime="1397">easier and more readable, here </span><span class="line" data-startTime="1401">we're just calling the </span><span class="line" data-startTime="1401">exact same endpoints. </span> <span class="line" data-startTime="1403">And we're getting the </span><span class="line" data-startTime="1403">same results. </span> <span class="line" data-startTime="1406">Now, we've built this small test </span><span class="line" data-startTime="1406">page just so you'll have </span><span class="line" data-startTime="1410">a sense of how the code </span><span class="line" data-startTime="1410">looks like, and you </span><span class="line" data-startTime="1412">can play with it. </span></p>

<p><span class="line" data-startTime="1413">I will just mention that all the </span><span class="line" data-startTime="1413">code and all the examples </span><span class="line" data-startTime="1415">that we're showing you are on </span><span class="line" data-startTime="1415">GitHub, and we'll put the </span><span class="line" data-startTime="1418">links after the talk so you </span><span class="line" data-startTime="1418">could take it, fork it, work </span><span class="line" data-startTime="1421">with it, and join our startup </span><span class="line" data-startTime="1421">later, right? </span><span class="line" data-startTime="1424">So just feel free, if we're </span><span class="line" data-startTime="1424">running really fast on </span><span class="line" data-startTime="1426">examples, you'll be able to tap </span><span class="line" data-startTime="1426">into them later and just </span><span class="line" data-startTime="1429">work with them more </span><span class="line" data-startTime="1429">thoroughly. </span> <span class="line" data-startTime="1432">So let's see the example of </span><span class="line" data-startTime="1432">just showing the list of </span><span class="line" data-startTime="1435">beers, so let's work </span><span class="line" data-startTime="1435">here as well. </span></p>

<p><span class="line" data-startTime="1437">The code of it is extremely </span><span class="line" data-startTime="1437">simple. </span> <span class="line" data-startTime="1440">As we saw before, we we're just </span><span class="line" data-startTime="1440">running this entry point, </span><span class="line" data-startTime="1445">and we're showing the </span><span class="line" data-startTime="1445">list of beer. </span> <span class="line" data-startTime="1447">Let's see how we could &mdash; </span><span class="line" data-startTime="1452">What we're doing when we're </span><span class="line" data-startTime="1452">saving, when we're adding a </span><span class="line" data-startTime="1454">new beer, Basically it's just </span><span class="line" data-startTime="1454">boilerplate code to fetch the </span><span class="line" data-startTime="1457">information from the dialog </span><span class="line" data-startTime="1457">that will pop up </span><span class="line" data-startTime="1460">and call the insert. </span> <span class="line" data-startTime="1461">In our case, we know it's an </span><span class="line" data-startTime="1461">insert when we don't have any </span><span class="line" data-startTime="1464">beer ID, because we want the </span><span class="line" data-startTime="1464">server to make a unique ID for </span><span class="line" data-startTime="1467">each and every beer. </span> <span class="line" data-startTime="1468">If we got a beer ID, we're just </span><span class="line" data-startTime="1468">calling it an update. </span></p>

<p><span class="line" data-startTime="1471">Let's see how does it look like </span><span class="line" data-startTime="1471">on the amazing test page </span><span class="line" data-startTime="1474">that we did. </span> <span class="line" data-startTime="1475">We'll close it so we'll have </span><span class="line" data-startTime="1475">a bit of real estate. </span> <span class="line" data-startTime="1479">Let's try to add the new beer, </span><span class="line" data-startTime="1479">maybe because I have a good </span><span class="line" data-startTime="1482">friend from Australia. </span> <span class="line" data-startTime="1486">And another nice functionality </span><span class="line" data-startTime="1486">that we'll look at in the code </span><span class="line" data-startTime="1489">in a second is the ability to </span><span class="line" data-startTime="1489">take the little image here and </span><span class="line" data-startTime="1498">just drag and drop it. </span> <span class="line" data-startTime="1500">And of course you can see the </span><span class="line" data-startTime="1500">geo information that we just </span><span class="line" data-startTime="1503">got the information </span><span class="line" data-startTime="1503">from our browser. </span> <span class="line" data-startTime="1506">Let's save it. </span> <span class="line" data-startTime="1507">We got the confirmation. </span> <span class="line" data-startTime="1508">Now we could take this just to </span><span class="line" data-startTime="1508">make sure it's been saved in </span><span class="line" data-startTime="1512">our production. </span> <span class="line" data-startTime="1514">And sure enough, it is. </span> <span class="line" data-startTime="1516">And of course, we </span><span class="line" data-startTime="1516">could remove it. </span> <span class="line" data-startTime="1520">We're getting the answer that is </span><span class="line" data-startTime="1520">was removed, and now if we </span><span class="line" data-startTime="1522">try to fetch it, we're </span><span class="line" data-startTime="1522">getting nothing. </span> <span class="line" data-startTime="1524">So we saw, basically, the crude </span><span class="line" data-startTime="1524">operations that any app </span><span class="line" data-startTime="1529">will have to deal with. </span></p>

<p><span class="line" data-startTime="1530">It's very, very simple and </span><span class="line" data-startTime="1530">very easy to achieve. </span> <span class="line" data-startTime="1533">I will just show you </span><span class="line" data-startTime="1533">real quick how. </span> <span class="line" data-startTime="1539">So we saw the insert, we saw the </span><span class="line" data-startTime="1539">update, and this is what </span><span class="line" data-startTime="1542">we're doing when we get </span><span class="line" data-startTime="1542">the response back. </span> <span class="line" data-startTime="1544">We'll get the response back in </span><span class="line" data-startTime="1544">a JSON format, so if we'll </span><span class="line" data-startTime="1547">have arrows, we'll know how to </span><span class="line" data-startTime="1547">handle them and notify the </span><span class="line" data-startTime="1549">user what we need to </span><span class="line" data-startTime="1549">do in that case. </span> <span class="line" data-startTime="1552">I think that we have the basic </span><span class="line" data-startTime="1552">operations, but with all these </span><span class="line" data-startTime="1555">social movements, maybe we'll </span><span class="line" data-startTime="1555">let our friends have some </span><span class="line" data-startTime="1558">comments on the Birra ranking. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1559"><span class="speakerName">Brad Abrams</span>: Yes, comments. </span><span class="line" data-startTime="1560">Awesome. </span><span class="line" data-startTime="1561">You know, client guys always </span><span class="line" data-startTime="1561">want more features. </span><span class="line" data-startTime="1563">Have you noticed that? </span></p>

<p class="speaker"><span class="line" data-starttime="1564"><span class="speakerName">Ido Green</span>: Trying. </span></p>

<p class="speaker"><span class="line" data-starttime="1566"><span class="speakerName">Brad Abrams</span>: OK, I'm up. </span> <span class="line" data-startTime="1567">So let's go through and </span><span class="line" data-startTime="1567">see how you would add </span><span class="line" data-startTime="1570">comments to this app. </span> <span class="line" data-startTime="1572">So we've got beers. </span> <span class="line" data-startTime="1573">I think we should start with </span><span class="line" data-startTime="1573">comments exactly where we did </span><span class="line" data-startTime="1575">with beers. </span> <span class="line" data-startTime="1576">We'll just add a new class </span><span class="line" data-startTime="1576">called comment, and then it's </span><span class="line" data-startTime="1580">the same story we saw before. </span> <span class="line" data-startTime="1583">We'll go ahead and define a </span><span class="line" data-startTime="1583">plain old Java object and then </span><span class="line" data-startTime="1587">annotate it with the </span><span class="line" data-startTime="1587">JDO attributes. </span> <span class="line" data-startTime="1589">And here I just have an ID for </span><span class="line" data-startTime="1589">this, the user that made the </span><span class="line" data-startTime="1592">comment, when they made it, </span><span class="line" data-startTime="1592">the comment itself. </span> <span class="line" data-startTime="1596">And I'm using the beer ID. </span></p>

<p><span class="line" data-startTime="1599">So this is effectively </span><span class="line" data-startTime="1599">a foreign key. </span> <span class="line" data-startTime="1601">It's which beer is </span><span class="line" data-startTime="1601">this comment for? </span><span class="line" data-startTime="1604">And we'll look at that </span><span class="line" data-startTime="1604">a little bit later. </span> <span class="line" data-startTime="1606">OK, so I take this comment, </span><span class="line" data-startTime="1606">and I do the same thing. </span> <span class="line" data-startTime="1609">I generate a cloud </span><span class="line" data-startTime="1609">endpoint for it. </span> <span class="line" data-startTime="1611">So we're going to expose the </span><span class="line" data-startTime="1611">same sort of rest interface </span><span class="line" data-startTime="1613">here for comments. </span> <span class="line" data-startTime="1615">So there it is. </span> <span class="line" data-startTime="1616">And now we're going to change </span><span class="line" data-startTime="1616">the name of that to be Birra </span><span class="line" data-startTime="1619">so that these sort of are merged </span><span class="line" data-startTime="1619">into the same API. </span> <span class="line" data-startTime="1623">And now, when we look at this </span><span class="line" data-startTime="1623">list comments method, well </span><span class="line" data-startTime="1626">it's going to list all the </span><span class="line" data-startTime="1626">comments in the data store. </span></p>

<p><span class="line" data-startTime="1630">But that may not be </span><span class="line" data-startTime="1630">what Ido wants. </span> <span class="line" data-startTime="1632">Ido's probably going to </span><span class="line" data-startTime="1632">want a comment for a </span><span class="line" data-startTime="1634">particular beer ID, right? </span><span class="line" data-startTime="1636">So what we probably want to do </span><span class="line" data-startTime="1636">is pass in a beer ID here and </span><span class="line" data-startTime="1641">have that beer ID return </span><span class="line" data-startTime="1641">the comments only </span><span class="line" data-startTime="1644">associated with that. </span> <span class="line" data-startTime="1645">But we have to figure out how </span><span class="line" data-startTime="1645">to make that work for us in </span><span class="line" data-startTime="1648">the REST world. </span> <span class="line" data-startTime="1649">So again, our API method </span><span class="line" data-startTime="1649">attribute is </span><span class="line" data-startTime="1653">going to be our friend. </span> <span class="line" data-startTime="1653">So let me just import that </span><span class="line" data-startTime="1653">and grab this code. </span> <span class="line" data-startTime="1662">So what we're going to do here </span><span class="line" data-startTime="1662">is we change list comments to </span><span class="line" data-startTime="1665">have a parameter </span><span class="line" data-startTime="1665">called beer ID. </span></p>

<p><span class="line" data-startTime="1667">And notice we customize </span><span class="line" data-startTime="1667">the path here. </span> <span class="line" data-startTime="1670">So I imagine a few of you saw </span><span class="line" data-startTime="1670">the path earlier and thought, </span><span class="line" data-startTime="1672">oh, no, I hope they're not auto </span><span class="line" data-startTime="1672">generating that path. </span> <span class="line" data-startTime="1676">You have a lot of control over </span><span class="line" data-startTime="1676">exactly what the REST </span><span class="line" data-startTime="1679">interface looks like, so you can </span><span class="line" data-startTime="1679">make it look like the way </span><span class="line" data-startTime="1682">you need to. </span> <span class="line" data-startTime="1683">So in this case, I thought it </span><span class="line" data-startTime="1683">made more sense to put the </span><span class="line" data-startTime="1686">comments logically </span><span class="line" data-startTime="1686">underneath beers. </span> <span class="line" data-startTime="1688">So beers, the beer ID, and </span><span class="line" data-startTime="1688">then show me all the </span><span class="line" data-startTime="1692">comments for that. </span> <span class="line" data-startTime="1692">So that's what I've modeled </span><span class="line" data-startTime="1692">for you there. </span> <span class="line" data-startTime="1694">So we've done that for list. </span> <span class="line" data-startTime="1696">And then, of course, we need to </span><span class="line" data-startTime="1696">change the data store code. </span> <span class="line" data-startTime="1700">So luckily it's very easy. </span></p>

<p><span class="line" data-startTime="1701">We just say beer ID equals and </span><span class="line" data-startTime="1701">then the beer ID, and that </span><span class="line" data-startTime="1705">will do the filtering for us. </span> <span class="line" data-startTime="1706">You could imagine lots more rich </span><span class="line" data-startTime="1706">logic you could do here. </span> <span class="line" data-startTime="1709">We need to do a similar thing </span><span class="line" data-startTime="1709">for get, so let's go </span><span class="line" data-startTime="1713">ahead and do that. </span> <span class="line" data-startTime="1717">And notice here we're passing </span><span class="line" data-startTime="1717">beer ID and the </span><span class="line" data-startTime="1720">ID on the REST call. </span> <span class="line" data-startTime="1724">And then we need to do something </span><span class="line" data-startTime="1724">for insert as well. </span> <span class="line" data-startTime="1728">And then I'll leave the others </span><span class="line" data-startTime="1728">to do offline, but there's </span><span class="line" data-startTime="1732">just a few just to show you </span><span class="line" data-startTime="1732">what it looks like. </span> <span class="line" data-startTime="1735">So now we'll run it in the debug </span><span class="line" data-startTime="1735">server, and we'll take a </span><span class="line" data-startTime="1738">look at how we test this. </span> <span class="line" data-startTime="1741">So I will test it in Curl </span><span class="line" data-startTime="1741">as we saw before. </span> <span class="line" data-startTime="1746">Go ahead and try that, and </span><span class="line" data-startTime="1746">again, the data store has to </span><span class="line" data-startTime="1748">spin up, so it takes </span><span class="line" data-startTime="1748">just a second. </span> <span class="line" data-startTime="1750">OK, so there are no items, </span><span class="line" data-startTime="1750">no comments. </span></p>

<p><span class="line" data-startTime="1752">That's what we expected. </span> <span class="line" data-startTime="1754">And then what I'm going to do </span><span class="line" data-startTime="1754">now is add a new comment here </span><span class="line" data-startTime="1759">for that beer. </span> <span class="line" data-startTime="1760">And then we can go back and look </span><span class="line" data-startTime="1760">at comments for beer one </span><span class="line" data-startTime="1765">and see if there's </span><span class="line" data-startTime="1765">any comments. </span> <span class="line" data-startTime="1767">And there, there is. </span> <span class="line" data-startTime="1767">And then again in the </span><span class="line" data-startTime="1767">REST style I can </span><span class="line" data-startTime="1770">do for comment two. </span> <span class="line" data-startTime="1772">So that looks pretty </span><span class="line" data-startTime="1772">good, Ido. </span> <span class="line" data-startTime="1773">I think you're ready </span><span class="line" data-startTime="1773">add comments. </span></p>

<p class="speaker"><span class="line" data-starttime="1774"><span class="speakerName">Ido Green</span>: Oh yeah, beautiful. </span> <span class="line" data-startTime="1777">So first, let's see how it looks </span><span class="line" data-startTime="1777">when we're trying just </span><span class="line" data-startTime="1780">to add a simple comment to a </span><span class="line" data-startTime="1780">beer for I/O. And then we're </span><span class="line" data-startTime="1788">doing a simple get. </span> <span class="line" data-startTime="1789">We see all the comments </span><span class="line" data-startTime="1789">that we had. </span> <span class="line" data-startTime="1791">Let's look at the simple </span><span class="line" data-startTime="1791">code that does it. </span> <span class="line" data-startTime="1803">So basically, you could see here </span><span class="line" data-startTime="1803">when I'm clicking on the </span><span class="line" data-startTime="1805">Save button of the dialog that </span><span class="line" data-startTime="1805">I just showed you, I'm </span><span class="line" data-startTime="1807">gathering some information from </span><span class="line" data-startTime="1807">the user, and I'm getting </span><span class="line" data-startTime="1810">some information behind the </span><span class="line" data-startTime="1810">scene, like in the case of the </span><span class="line" data-startTime="1812">beers, I got the geolocation </span><span class="line" data-startTime="1812">here. </span> <span class="line" data-startTime="1814">I just want to take the exact </span><span class="line" data-startTime="1814">time that the user entered, </span><span class="line" data-startTime="1817">and you could think about </span><span class="line" data-startTime="1817">lots of other use cases. </span> <span class="line" data-startTime="1820">And then I'm just calling </span><span class="line" data-startTime="1820">the endpoint. </span> <span class="line" data-startTime="1822">Before that, I'm making sure </span><span class="line" data-startTime="1822">that I have some nice spinner </span><span class="line" data-startTime="1825">to show the users that some </span><span class="line" data-startTime="1825">work is being done. </span></p>

<p><span class="line" data-startTime="1828">And I'm inserting the beer into </span><span class="line" data-startTime="1828">the App Engine, and when </span><span class="line" data-startTime="1832">I'm returning the call, I'll </span><span class="line" data-startTime="1832">just show, in case of an </span><span class="line" data-startTime="1835">error, some alert. </span> <span class="line" data-startTime="1836">And if everything is </span><span class="line" data-startTime="1836">fine, I'm just </span><span class="line" data-startTime="1838">showing the list of comments. </span> <span class="line" data-startTime="1839">So we have comments, </span><span class="line" data-startTime="1839">and it's pretty </span><span class="line" data-startTime="1841">straightforward, of the beers. </span> <span class="line" data-startTime="1842">All the heavy handling has been </span><span class="line" data-startTime="1842">done for us for free in </span><span class="line" data-startTime="1846">the server side. </span> <span class="line" data-startTime="1848">One thing that I want to show </span><span class="line" data-startTime="1848">you, we spoke about offline </span><span class="line" data-startTime="1850">capabilities. </span> <span class="line" data-startTime="1851">How easy is it to achieve, </span><span class="line" data-startTime="1851">today, an offline capability </span><span class="line" data-startTime="1853">in terms of doing the initial </span><span class="line" data-startTime="1853">loading of, let's say, the top </span><span class="line" data-startTime="1857">15 beers, and saving them </span><span class="line" data-startTime="1857">locally in our browser? </span><span class="line" data-startTime="1861">So you can see here that when </span><span class="line" data-startTime="1861">I'm loading the API, I had </span><span class="line" data-startTime="1864">this commented. </span></p>

<p><span class="line" data-startTime="1868">Now I've uncommented it. </span> <span class="line" data-startTime="1870">Let's try and go over </span><span class="line" data-startTime="1870">it real quickly. </span> <span class="line" data-startTime="1873">Basically, I'm getting </span><span class="line" data-startTime="1873">a payload of data, </span><span class="line" data-startTime="1874">of items, of beers. </span> <span class="line" data-startTime="1875">And I'm going on each and every </span><span class="line" data-startTime="1875">one of them, and I'm </span><span class="line" data-startTime="1878">calling this object that </span><span class="line" data-startTime="1878">I defined Birra.db. </span> <span class="line" data-startTime="1883">What it basically does, it's </span><span class="line" data-startTime="1883">extending Lawnchair and giving </span><span class="line" data-startTime="1887">us the basic operation that you </span><span class="line" data-startTime="1887">will expect any layer, any </span><span class="line" data-startTime="1891">DB layer to do. </span> <span class="line" data-startTime="1892">In our case, it saves beer. </span> <span class="line" data-startTime="1894">Let's try now to run this </span><span class="line" data-startTime="1894">code from scratch. </span> <span class="line" data-startTime="1902">We'll open the Dev Tools just </span><span class="line" data-startTime="1902">to see what's going on, </span><span class="line" data-startTime="1905">because there are some really </span><span class="line" data-startTime="1905">nice capabilities in Dev Tools </span><span class="line" data-startTime="1907">that let you see what's going </span><span class="line" data-startTime="1907">on with your app. </span></p>

<p><span class="line" data-startTime="1911">Let's load it again. </span> <span class="line" data-startTime="1916">OK, we've got the beers. </span> <span class="line" data-startTime="1917">Now what you could do in Dev </span><span class="line" data-startTime="1917">Tools, which is pretty cool, </span><span class="line" data-startTime="1920">is go to Resources. </span> <span class="line" data-startTime="1922">And in Resources, you can go to </span><span class="line" data-startTime="1922">Local Host, and basically </span><span class="line" data-startTime="1925">you can see here that I got all </span><span class="line" data-startTime="1925">the beers with the keys. </span> <span class="line" data-startTime="1928">And Lawnchair actually did the </span><span class="line" data-startTime="1928">extra work for me and made </span><span class="line" data-startTime="1931">sure that I'll have </span><span class="line" data-startTime="1931">indexes here. </span> <span class="line" data-startTime="1933">So if I want to fetch </span><span class="line" data-startTime="1933">a range of beers, it </span><span class="line" data-startTime="1935">will be quite quickly. </span></p>

<p><span class="line" data-startTime="1937">Another nice thing that you </span><span class="line" data-startTime="1937">could see here is that I'm </span><span class="line" data-startTime="1939">having a global beer ID in </span><span class="line" data-startTime="1939">my test page, and that's </span><span class="line" data-startTime="1942">something really useful when </span><span class="line" data-startTime="1942">you're doing &mdash; because even </span><span class="line" data-startTime="1944">when I'm loading and I'm </span><span class="line" data-startTime="1944">wanting to work with a </span><span class="line" data-startTime="1946">specific beer, I could do it </span><span class="line" data-startTime="1946">quite efficiently, and I don't </span><span class="line" data-startTime="1948">need to remember what was the </span><span class="line" data-startTime="1948">last ID that I worked with. </span> <span class="line" data-startTime="1951">So we have the offline </span><span class="line" data-startTime="1951">capabilities. </span> <span class="line" data-startTime="1955">The sync layer will be in the </span><span class="line" data-startTime="1955">GitHub repository, so you </span><span class="line" data-startTime="1957">could check it out later. </span></p>

<p><span class="line" data-startTime="1959">And let's have a quick look </span><span class="line" data-startTime="1959">about how the simple code of </span><span class="line" data-startTime="1963">Lawnchair looks like. </span> <span class="line" data-startTime="1964">Basically, we're extending it, </span><span class="line" data-startTime="1964">giving it to our own name. </span> <span class="line" data-startTime="1967">And now you can see that, for </span><span class="line" data-startTime="1967">instance, saving, all we need </span><span class="line" data-startTime="1970">to do is take the object, </span><span class="line" data-startTime="1970">stringify it, because local </span><span class="line" data-startTime="1974">search will work with key </span><span class="line" data-startTime="1974">value of strings. </span> <span class="line" data-startTime="1978">And then just run it, and have </span><span class="line" data-startTime="1978">in the call back the response </span><span class="line" data-startTime="1984">that everything is OK. </span> <span class="line" data-startTime="1985">If not, of course, we need </span><span class="line" data-startTime="1985">to inform it to the user. </span> <span class="line" data-startTime="1989">What we did with that is that </span><span class="line" data-startTime="1989">you all know that the best </span><span class="line" data-startTime="1992">practices of software </span><span class="line" data-startTime="1992">development told us to have </span><span class="line" data-startTime="1995">continuous integration </span><span class="line" data-startTime="1995">and unit testing. </span> <span class="line" data-startTime="1998">And I want to show you a small </span><span class="line" data-startTime="1998">example of how we did it in </span><span class="line" data-startTime="2001">our small use case of saving </span><span class="line" data-startTime="2001">locally the beers. </span> <span class="line" data-startTime="2005">We created a [? Qedit ?] </span><span class="line" data-startTime="2006">page. </span> <span class="line" data-startTime="2007">It is done for you. </span></p>

<p><span class="line" data-startTime="2008">It's letting us know that for </span><span class="line" data-startTime="2008">each and every change that </span><span class="line" data-startTime="2011">we're doing, which tests are </span><span class="line" data-startTime="2011">passing and which are failing. </span> <span class="line" data-startTime="2014">You'll have it in the GitHub </span><span class="line" data-startTime="2014">repository to look at it </span><span class="line" data-startTime="2016">later, more thoroughly, but it's </span><span class="line" data-startTime="2016">just one of those things </span><span class="line" data-startTime="2019">that, up to now, we didn't have </span><span class="line" data-startTime="2019">on the client, and now we </span><span class="line" data-startTime="2022">could run with all the best </span><span class="line" data-startTime="2022">practices on the client, as </span><span class="line" data-startTime="2025">well as on the server. </span> <span class="line" data-startTime="2027">We have offline capabilities. </span> <span class="line" data-startTime="2029">We spoke about syncing. </span> <span class="line" data-startTime="2030">In that example I gave &mdash; and I </span><span class="line" data-startTime="2030">spoke about 15, 20 beers &mdash; </span><span class="line" data-startTime="2034">I have a good friend that </span><span class="line" data-startTime="2034">drinks quite a bit. </span></p>

<p><span class="line" data-startTime="2036">I think if we'll have maybe </span><span class="line" data-startTime="2036">pagination, it will be &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2039"><span class="speakerName">Brad Abrams</span>: Yes. </span> <span class="line" data-startTime="2040">Yes. </span> <span class="line" data-startTime="2040">See again, these client guys </span><span class="line" data-startTime="2040">with their features. </span> <span class="line" data-startTime="2044">Yeah, so what I showed you </span><span class="line" data-startTime="2044">before with the beers. </span> <span class="line" data-startTime="2046">So we're back on the </span><span class="line" data-startTime="2046">server, looking at </span><span class="line" data-startTime="2048">the list beers method. </span> <span class="line" data-startTime="2050">It returns all the beers </span><span class="line" data-startTime="2050">in our data store. </span> <span class="line" data-startTime="2054">Well that might work fine for </span><span class="line" data-startTime="2054">this demo, but we're going to </span><span class="line" data-startTime="2055">have a wildly successful </span><span class="line" data-startTime="2055">startup, right? </span><span class="line" data-startTime="2057">So we're going to have hundreds, </span><span class="line" data-startTime="2057">thousands, millions </span><span class="line" data-startTime="2060">of beers in data store. </span> <span class="line" data-startTime="2062">So we want to support </span><span class="line" data-startTime="2062">paging of that. </span></p>

<p><span class="line" data-startTime="2064">And to do that, I also want to </span><span class="line" data-startTime="2064">show you a few of the other </span><span class="line" data-startTime="2067">cool capabilities </span><span class="line" data-startTime="2067">of endpoints. </span> <span class="line" data-startTime="2070">So what I've done is, off stage, </span><span class="line" data-startTime="2070">while Ido was working </span><span class="line" data-startTime="2074">there, I wrote this </span><span class="line" data-startTime="2074">list beers method. </span> <span class="line" data-startTime="2076">I updated it a little bit. </span> <span class="line" data-startTime="2079">And I added a couple of </span><span class="line" data-startTime="2079">nullable parameters. </span> <span class="line" data-startTime="2081">So in endpoints, nullable </span><span class="line" data-startTime="2081">parameters are optional, so </span><span class="line" data-startTime="2085">you don't have to </span><span class="line" data-startTime="2085">pass those in. </span> <span class="line" data-startTime="2087">And so they show up as query </span><span class="line" data-startTime="2087">string parameters on the URL, </span><span class="line" data-startTime="2090">so anything you mark </span><span class="line" data-startTime="2090">nullable will be a </span><span class="line" data-startTime="2092">query string parameter. </span> <span class="line" data-startTime="2093">You can have any combination </span><span class="line" data-startTime="2093">of nullable and required as </span><span class="line" data-startTime="2096">you'd like. </span> <span class="line" data-startTime="2096">So in this case, I'm going to </span><span class="line" data-startTime="2096">take two nullable parameters. </span> <span class="line" data-startTime="2099">One is going to be the limit. </span> <span class="line" data-startTime="2101">That is, how many beers do you </span><span class="line" data-startTime="2101">want to return at this time? </span><span class="line" data-startTime="2105">And the other is the cursor </span><span class="line" data-startTime="2105">string, or the cursor. </span> <span class="line" data-startTime="2108">That is, where were you </span><span class="line" data-startTime="2108">last time you asked? </span><span class="line" data-startTime="2112">So the first time, obviously </span><span class="line" data-startTime="2112">you don't pass </span><span class="line" data-startTime="2114">anything in for that. </span> <span class="line" data-startTime="2115">The second time, you pass </span><span class="line" data-startTime="2115">in the result I </span><span class="line" data-startTime="2117">passed you last time. </span></p>

<p><span class="line" data-startTime="2118">And so luckily for us, App </span><span class="line" data-startTime="2118">Engine's data store has some </span><span class="line" data-startTime="2123">very nice support for that, </span><span class="line" data-startTime="2123">which we'll see. </span> <span class="line" data-startTime="2126">So that's the declaration. </span> <span class="line" data-startTime="2129">And then you can see if they </span><span class="line" data-startTime="2129">pass in a cursor string, then </span><span class="line" data-startTime="2132">we go ahead and set </span><span class="line" data-startTime="2132">that in the query. </span> <span class="line" data-startTime="2135">We set the cursor </span><span class="line" data-startTime="2135">they passed in. </span> <span class="line" data-startTime="2137">If they passed in a limit, </span><span class="line" data-startTime="2137">we set that as a range. </span> <span class="line" data-startTime="2142">And then what we do is we go </span><span class="line" data-startTime="2142">ahead and do our execute and </span><span class="line" data-startTime="2146">get all the results back </span><span class="line" data-startTime="2146">from data store. </span> <span class="line" data-startTime="2149">And then we save </span><span class="line" data-startTime="2149">off the cursor. </span> <span class="line" data-startTime="2151">So wherever you were, give </span><span class="line" data-startTime="2151">me a cursor for that. </span> <span class="line" data-startTime="2154">And then we get a web save </span><span class="line" data-startTime="2154">string, so that's effectively </span><span class="line" data-startTime="2157">a base 64 encoded string that's </span><span class="line" data-startTime="2157">unique for where this </span><span class="line" data-startTime="2161">user was, so that you can pass </span><span class="line" data-startTime="2161">it back at any time and get </span><span class="line" data-startTime="2165">back the next set of results. </span></p>

<p><span class="line" data-startTime="2167">So that's really </span><span class="line" data-startTime="2167">handy to have. </span> <span class="line" data-startTime="2169">And then what we do is we return </span><span class="line" data-startTime="2169">that, and notice we're </span><span class="line" data-startTime="2172">returning a complex </span><span class="line" data-startTime="2172">object this time. </span> <span class="line" data-startTime="2174">We're returning all of those </span><span class="line" data-startTime="2174">elements as we were before, </span><span class="line" data-startTime="2177">but we're also returning </span><span class="line" data-startTime="2177">that cursor string. </span> <span class="line" data-startTime="2181">Yep, so we go ahead </span><span class="line" data-startTime="2181">and save that. </span> <span class="line" data-startTime="2183">We want to run this in our local </span><span class="line" data-startTime="2183">development time server. </span> <span class="line" data-startTime="2186">And then to do a test of paging, </span><span class="line" data-startTime="2186">we need to go ahead </span><span class="line" data-startTime="2190">and add a couple of items </span><span class="line" data-startTime="2190">to our data store. </span> <span class="line" data-startTime="2193">So I'll add Mom's Home Brew and </span><span class="line" data-startTime="2193">Bob's Indian Pale Ale so </span><span class="line" data-startTime="2198">you can see all those </span><span class="line" data-startTime="2198">are there. </span> <span class="line" data-startTime="2201">And then let's look at all the </span><span class="line" data-startTime="2201">items in our data store. </span></p>

<p><span class="line" data-startTime="2210">OK, so there we go. </span> <span class="line" data-startTime="2212">That's two of them, so </span><span class="line" data-startTime="2212">that's pretty good. </span> <span class="line" data-startTime="2215">Maybe it'll wake </span><span class="line" data-startTime="2215">up in a second. </span> <span class="line" data-startTime="2218">OK, so [? great. ?] </span><span class="line" data-startTime="2219">We have all three of them. </span> <span class="line" data-startTime="2220">We have ID 1, ID 3, and ID 4. </span> <span class="line" data-startTime="2222">For those playing at home, </span><span class="line" data-startTime="2222">where was ID 2? </span><span class="line" data-startTime="2225">Where was ID 2? </span></p>

<p class="speaker"><span class="line" data-starttime="2226"><span class="speakerName">Audience</span>: [INAUDIBLE] </span></p>

<p class="speaker"><span class="line" data-starttime="2227"><span class="speakerName">Brad Abrams</span>: No, it was the </span><span class="line" data-startTime="2227">comment that we did. </span><span class="line" data-startTime="2230">The comment we put in. </span><span class="line" data-startTime="2231">Anyway, OK. </span><span class="line" data-startTime="2232">Data store trivia for you. </span><span class="line" data-startTime="2234">OK, so there's all those, and </span><span class="line" data-startTime="2234">now let's test out limit. </span><span class="line" data-startTime="2239">So we'll do that. </span><span class="line" data-startTime="2241">We'll pass a query string </span><span class="line" data-startTime="2241">parameter for limit, and you </span><span class="line" data-startTime="2246">see we just use the </span><span class="line" data-startTime="2246">query string. </span><span class="line" data-startTime="2248">And notice now we're getting </span><span class="line" data-startTime="2248">this next page token. </span><span class="line" data-startTime="2251">That tells us what to pass in </span><span class="line" data-startTime="2251">to get the next one, and I </span><span class="line" data-startTime="2256">have already got one of those as </span><span class="line" data-startTime="2256">well, just to save you from </span><span class="line" data-startTime="2261">watching me try to type that. </span><span class="line" data-startTime="2263">And so we pass in the limit and </span><span class="line" data-startTime="2263">the cursor string, and we </span><span class="line" data-startTime="2268">get the next one. </span><span class="line" data-startTime="2269">So Ido, you want to add paging </span><span class="line" data-startTime="2269">to the app there? </span></p>

<p class="speaker"><span class="line" data-starttime="2271"><span class="speakerName">Ido Green</span>: Yeah, it's </span><span class="line" data-startTime="2271">looking good. </span> <span class="line" data-startTime="2274">The client life is good. </span> <span class="line" data-startTime="2276">Now all we need to do is </span><span class="line" data-startTime="2276">to take these two extra </span><span class="line" data-startTime="2278">parameters that Brad just </span><span class="line" data-startTime="2278">mentioned, limit and cursor, </span><span class="line" data-startTime="2281">and just use them. </span> <span class="line" data-startTime="2281">So if you remember at the </span><span class="line" data-startTime="2281">beginning when I was calling </span><span class="line" data-startTime="2284">this endpoint, I was calling </span><span class="line" data-startTime="2284">just list with none of the </span><span class="line" data-startTime="2288">parameters. </span> <span class="line" data-startTime="2288">Now I'll use both of them. </span> <span class="line" data-startTime="2290">And basically what we'll </span><span class="line" data-startTime="2290">do, we'll save the </span><span class="line" data-startTime="2292">cursor as our pointer. </span> <span class="line" data-startTime="2294">And if we want, we'll know to </span><span class="line" data-startTime="2294">call it later and just make </span><span class="line" data-startTime="2297">sure that we're fetching the </span><span class="line" data-startTime="2297">extra amount of beers. </span> <span class="line" data-startTime="2300">Let's see how it looks like. </span> <span class="line" data-startTime="2303">Let's try to fetch one by one. </span></p>

<p><span class="line" data-startTime="2307">So we're getting the beer, and </span><span class="line" data-startTime="2307">then we get the button More, </span><span class="line" data-startTime="2309">because we know that now we've </span><span class="line" data-startTime="2309">got the cursor back, the next </span><span class="line" data-startTime="2311">token, and if we click, you see </span><span class="line" data-startTime="2311">here that it's Bud, it's </span><span class="line" data-startTime="2316">[? VB Gold, ?] </span><span class="line" data-startTime="2317">and we have more and more. </span> <span class="line" data-startTime="2318">So pagination is working </span><span class="line" data-startTime="2318">quite perfectly. </span> <span class="line" data-startTime="2321">What I'm thinking is that, after </span><span class="line" data-startTime="2321">all, we are a search </span><span class="line" data-startTime="2323">company, and maybe we'll </span><span class="line" data-startTime="2323">have search in our app. </span></p>

<p class="speaker"><span class="line" data-starttime="2327"><span class="speakerName">Brad Abrams</span>: Search, search. </span> <span class="line" data-startTime="2327">Do you see these features? </span><span class="line" data-startTime="2330">Yes, let's switch over </span><span class="line" data-startTime="2330">and see how we would </span><span class="line" data-startTime="2332">add search to this. </span> <span class="line" data-startTime="2333">And in the process, we'll learn </span><span class="line" data-startTime="2334">more about cloud endpoints. </span> <span class="line" data-startTime="2336">So App Engine, as you might be </span><span class="line" data-startTime="2336">aware, recently launched </span><span class="line" data-startTime="2339">support for search. </span> <span class="line" data-startTime="2340">It actually uses some of the </span><span class="line" data-startTime="2340">same underlying infrastructure </span><span class="line" data-startTime="2342">that we use for Google search. </span> <span class="line" data-startTime="2345">And so if you've studied the </span><span class="line" data-startTime="2345">search problem, the way search </span><span class="line" data-startTime="2349">starts is with an index. </span> <span class="line" data-startTime="2351">So we want to create an index of </span><span class="line" data-startTime="2351">all the items that we want </span><span class="line" data-startTime="2355">searchable. </span></p>

<p><span class="line" data-startTime="2356">So here's the basic code </span><span class="line" data-startTime="2356">to do that index. </span> <span class="line" data-startTime="2360">And we're going to call </span><span class="line" data-startTime="2360">it beerindex. </span> <span class="line" data-startTime="2361">We can set some constraints on </span><span class="line" data-startTime="2361">it that controls how fast </span><span class="line" data-startTime="2365">queries go based </span><span class="line" data-startTime="2365">on consistency, </span><span class="line" data-startTime="2368">guarantees, and whatnot. </span> <span class="line" data-startTime="2370">But we've done that </span><span class="line" data-startTime="2370">initialization. </span> <span class="line" data-startTime="2373">Now what we need to do is </span><span class="line" data-startTime="2373">populate our index. </span> <span class="line" data-startTime="2376">So what we'll do is add a new </span><span class="line" data-startTime="2376">method here, and we want to </span><span class="line" data-startTime="2380">customize what goes </span><span class="line" data-startTime="2380">in the index. </span> <span class="line" data-startTime="2382">For example, we may not want to </span><span class="line" data-startTime="2382">put the image in the index. </span> <span class="line" data-startTime="2386">That'll just bloat </span><span class="line" data-startTime="2386">up our index. </span> <span class="line" data-startTime="2387">So we want to have a little bit </span><span class="line" data-startTime="2387">of customization, which I </span><span class="line" data-startTime="2391">have written for you </span><span class="line" data-startTime="2391">ahead of time. </span> <span class="line" data-startTime="2396">So there we are. </span> <span class="line" data-startTime="2398">This is an add to search index </span><span class="line" data-startTime="2398">method, and what we're doing </span><span class="line" data-startTime="2401">is just creating a new </span><span class="line" data-startTime="2401">search document. </span></p>

<p><span class="line" data-startTime="2404">We're Google, so everything's </span><span class="line" data-startTime="2404">a document, even if you're </span><span class="line" data-startTime="2406">talking about beers. </span> <span class="line" data-startTime="2408">So we add a document, </span><span class="line" data-startTime="2408">and we set its name. </span> <span class="line" data-startTime="2413">And notice we're just pulling </span><span class="line" data-startTime="2413">these properties right out of </span><span class="line" data-startTime="2417">the beer objects. </span> <span class="line" data-startTime="2418">And notice sometimes, like </span><span class="line" data-startTime="2418">name, we're using text. </span> <span class="line" data-startTime="2421">And other times, when </span><span class="line" data-startTime="2421">we do score, we're </span><span class="line" data-startTime="2424">setting it as a number. </span> <span class="line" data-startTime="2425">So we're actually telling our </span><span class="line" data-startTime="2425">search index which things are </span><span class="line" data-startTime="2428">text, which things </span><span class="line" data-startTime="2428">are numbers. </span></p>

<p><span class="line" data-startTime="2430">And that's going to give </span><span class="line" data-startTime="2430">us some strong query </span><span class="line" data-startTime="2433">capabilities, which we'll </span><span class="line" data-startTime="2433">see in just a minute. </span> <span class="line" data-startTime="2435">OK, so that's that </span><span class="line" data-startTime="2435">basic thing. </span> <span class="line" data-startTime="2438">Now all we need to do is </span><span class="line" data-startTime="2438">actually add the beers to the </span><span class="line" data-startTime="2440">data store. </span> <span class="line" data-startTime="2441">So we need to call </span><span class="line" data-startTime="2441">this method. </span> <span class="line" data-startTime="2443">So let's start up </span><span class="line" data-startTime="2443">here at the top. </span> <span class="line" data-startTime="2447">Let's see, list is fine, </span><span class="line" data-startTime="2447">get is fine. </span> <span class="line" data-startTime="2450">Insert, when they add a new </span><span class="line" data-startTime="2450">item to the data store, we </span><span class="line" data-startTime="2454">need to go ahead and add that </span><span class="line" data-startTime="2454">to our search index. </span> <span class="line" data-startTime="2458">Update, when they update that </span><span class="line" data-startTime="2458">beer, we're just going to add </span><span class="line" data-startTime="2461">it to the data store, and as </span><span class="line" data-startTime="2461">long as the IDs match &mdash; </span><span class="line" data-startTime="2465">we need to add it </span><span class="line" data-startTime="2465">to our index &mdash; </span><span class="line" data-startTime="2466">and as long as the IDs </span><span class="line" data-startTime="2466">match, we'll be OK. </span> <span class="line" data-startTime="2469">It'll update. </span> <span class="line" data-startTime="2470">So that way our index will stay </span><span class="line" data-startTime="2470">fresh, and then in remove </span><span class="line" data-startTime="2475">we had a bug earlier that Ido </span><span class="line" data-startTime="2475">so skillfully found at the </span><span class="line" data-startTime="2479">last minute. </span></p>

<p><span class="line" data-startTime="2480">And in remove we need to go </span><span class="line" data-startTime="2480">ahead and make sure we remove </span><span class="line" data-startTime="2483">that beer from our </span><span class="line" data-startTime="2483">index as well. </span> <span class="line" data-startTime="2486">So that's that basic thing. </span> <span class="line" data-startTime="2488">I think we're ready to test </span><span class="line" data-startTime="2488">that, so I'll just spin up the </span><span class="line" data-startTime="2491">development time server again </span><span class="line" data-startTime="2491">as our pattern is, </span><span class="line" data-startTime="2494">and then do a search. </span> <span class="line" data-startTime="2496">So we actually need to add a new </span><span class="line" data-startTime="2496">beer to the data store so </span><span class="line" data-startTime="2499">that it actually gets indexed. </span> <span class="line" data-startTime="2501">And notice when I add this, look </span><span class="line" data-startTime="2501">down here at the bottom </span><span class="line" data-startTime="2504">of the console, you'll see the </span><span class="line" data-startTime="2504">search engine actually spin up </span><span class="line" data-startTime="2507">because now we're adding it to </span><span class="line" data-startTime="2507">an index, so we have to have </span><span class="line" data-startTime="2511">that service up and </span><span class="line" data-startTime="2511">running as well. </span></p>

<p><span class="line" data-startTime="2513">So that search started, so </span><span class="line" data-startTime="2513">hopefully that means we should </span><span class="line" data-startTime="2516">be able to query for </span><span class="line" data-startTime="2516">this and find it. </span> <span class="line" data-startTime="2519">Oh, actually, we can't query </span><span class="line" data-startTime="2519">for it because I didn't add </span><span class="line" data-startTime="2523">the query method. </span> <span class="line" data-startTime="2525">Let's go back. </span> <span class="line" data-startTime="2529">The whole point of that bit was </span><span class="line" data-startTime="2529">to add this search method, </span><span class="line" data-startTime="2534">to show you doing custom </span><span class="line" data-startTime="2534">methods in endpoints. </span> <span class="line" data-startTime="2540">So we'll add this, and notice </span><span class="line" data-startTime="2540">this is a list method that's </span><span class="line" data-startTime="2544">similar, but we're exposing </span><span class="line" data-startTime="2544">it as an HTTP get. </span> <span class="line" data-startTime="2547">So you get to customize the </span><span class="line" data-startTime="2547">verb, just like you get to </span><span class="line" data-startTime="2550">customize the path. </span></p>

<p><span class="line" data-startTime="2552">We pass in a required argument </span><span class="line" data-startTime="2552">for the query string, and then </span><span class="line" data-startTime="2556">all we're doing, really, is </span><span class="line" data-startTime="2556">passing that query string to </span><span class="line" data-startTime="2558">our search index. </span> <span class="line" data-startTime="2559">The search results come back. </span> <span class="line" data-startTime="2561">And we pull out the index from </span><span class="line" data-startTime="2561">the search results and call </span><span class="line" data-startTime="2566">that getBeer method that we </span><span class="line" data-startTime="2566">defined before, that will call </span><span class="line" data-startTime="2569">data store, get our beer. </span> <span class="line" data-startTime="2571">And then we return the </span><span class="line" data-startTime="2571">whole list of those. </span> <span class="line" data-startTime="2574">OK, so with that we should </span><span class="line" data-startTime="2574">be able to &mdash; </span><span class="line" data-startTime="2578">so we've added that item </span><span class="line" data-startTime="2578">to the data store. </span></p>

<p><span class="line" data-startTime="2581">Now we need to search for it. </span> <span class="line" data-startTime="2586">So we'll search for that cool </span><span class="line" data-startTime="2586">beer, and search engine will </span><span class="line" data-startTime="2590">start again. </span> <span class="line" data-startTime="2591">Oh, yeah. </span> <span class="line" data-startTime="2592">OK, tell you what. </span> <span class="line" data-startTime="2596">Because I had to start and </span><span class="line" data-startTime="2596">re-stop, let's skip </span><span class="line" data-startTime="2599">ahead to this part. </span> <span class="line" data-startTime="2602">So we added a couple of </span><span class="line" data-startTime="2602">different beers with score ID </span><span class="line" data-startTime="2604">11, with a score of 9, so with </span><span class="line" data-startTime="2604">various different scores. </span> <span class="line" data-startTime="2611">And I'll show you searching </span><span class="line" data-startTime="2611">for those. </span> <span class="line" data-startTime="2615">So notice that the search can </span><span class="line" data-startTime="2615">be pretty powerful here. </span> <span class="line" data-startTime="2618">We can say the score </span><span class="line" data-startTime="2618">equals something. </span></p>

<p><span class="line" data-startTime="2621">So we actually can </span><span class="line" data-startTime="2621">do math here. </span> <span class="line" data-startTime="2623">So I could actually say where </span><span class="line" data-startTime="2623">the score is less than this. </span> <span class="line" data-startTime="2627">So you see this, coupled with </span><span class="line" data-startTime="2627">the fact that it actually does </span><span class="line" data-startTime="2630">Boolean operators as well, gives </span><span class="line" data-startTime="2630">you some really powerful </span><span class="line" data-startTime="2633">query capability for </span><span class="line" data-startTime="2633">the service. </span> <span class="line" data-startTime="2635">So with this done, Ido, I think </span><span class="line" data-startTime="2635">we're ready for you to </span><span class="line" data-startTime="2638">take it off. </span></p>

<p class="speaker"><span class="line" data-starttime="2639"><span class="speakerName">Ido Green</span>: Perfect. </span> <span class="line" data-startTime="2641">Excellent. </span> <span class="line" data-startTime="2642">So they say that simplicity is </span><span class="line" data-startTime="2642">the ultimate sophistication. </span> <span class="line" data-startTime="2645">And I think in that case, you </span><span class="line" data-startTime="2645">must agree with me that it's </span><span class="line" data-startTime="2648">pretty simple, that </span><span class="line" data-startTime="2648">piece of code that </span><span class="line" data-startTime="2650">we have in the client. </span> <span class="line" data-startTime="2651">Basically what we're doing here, </span><span class="line" data-startTime="2651">you can all see it good? </span><span class="line" data-startTime="2654">I could make it larger. </span> <span class="line" data-startTime="2655">You see it well? </span><span class="line" data-startTime="2658">Maybe even larger. </span> <span class="line" data-startTime="2660">Basically, we're listening </span><span class="line" data-startTime="2660">to the keydown event. </span> <span class="line" data-startTime="2663">In our case, we want to catch </span><span class="line" data-startTime="2663">the Enter when the user is </span><span class="line" data-startTime="2665">finishing to click </span><span class="line" data-startTime="2665">the term in. </span> <span class="line" data-startTime="2668">And then we're just taking the </span><span class="line" data-startTime="2668">payload, the search term, </span><span class="line" data-startTime="2671">passing it to the search </span><span class="line" data-startTime="2671">endpoint, and let's see what's </span><span class="line" data-startTime="2674">going on here when we are </span><span class="line" data-startTime="2674">doing it for real. </span> <span class="line" data-startTime="2677">So you saw here that </span><span class="line" data-startTime="2677">I just put a break </span><span class="line" data-startTime="2682">point in Dev Tools. </span> <span class="line" data-startTime="2683">That allows it to now inspect </span><span class="line" data-startTime="2683">and see what's going on and </span><span class="line" data-startTime="2686">what we got back from </span><span class="line" data-startTime="2686">the server. </span></p>

<p><span class="line" data-startTime="2689">If you hover, you'll see that </span><span class="line" data-startTime="2689">we got an array of items. </span> <span class="line" data-startTime="2692">We could dive into them, see </span><span class="line" data-startTime="2692">exactly what's going on. </span> <span class="line" data-startTime="2695">And when we are happy, we could </span><span class="line" data-startTime="2695">just release it and see </span><span class="line" data-startTime="2698">that we got the list of </span><span class="line" data-startTime="2698">beers that we wanted. </span> <span class="line" data-startTime="2700">As Brad mentioned, it's much </span><span class="line" data-startTime="2700">more powerful than just that. </span> <span class="line" data-startTime="2703">You could do things like that, </span><span class="line" data-startTime="2703">and then let's leave it so we </span><span class="line" data-startTime="2706">could run properly, and get all </span><span class="line" data-startTime="2706">the beers that are from </span><span class="line" data-startTime="2709">score 3 and above. </span> <span class="line" data-startTime="2712">We could do even better than </span><span class="line" data-startTime="2712">that and go and play with some </span><span class="line" data-startTime="2716">geo queries, like this one, </span><span class="line" data-startTime="2716">which basically will give us a </span><span class="line" data-startTime="2722">view of beers around us, so </span><span class="line" data-startTime="2722">around the user of our app. </span> <span class="line" data-startTime="2728">Here I cheated a bit, and I just </span><span class="line" data-startTime="2728">gave a map that mimics </span><span class="line" data-startTime="2731">what the functionality </span><span class="line" data-startTime="2731">will be like. </span> <span class="line" data-startTime="2733">But you can how easy it is to </span><span class="line" data-startTime="2733">use the search from the client </span><span class="line" data-startTime="2737">and get some sophisticated </span><span class="line" data-startTime="2737">queries that you don't need to </span><span class="line" data-startTime="2739">code anything in order to </span><span class="line" data-startTime="2739">achieve them, and slice and </span><span class="line" data-startTime="2742">dice the data that you have in </span><span class="line" data-startTime="2742">your app in some clever ways, </span><span class="line" data-startTime="2746">thanks to the search </span><span class="line" data-startTime="2746">capabilities. </span></p>

<p><span class="line" data-startTime="2749">Now I don't know, I have a few </span><span class="line" data-startTime="2749">more requests, but I think </span><span class="line" data-startTime="2753">it's maybe time for </span><span class="line" data-startTime="2753">production. </span> <span class="line" data-startTime="2755">Maybe we could deploy it. </span></p>

<p class="speaker"><span class="line" data-starttime="2756"><span class="speakerName">Brad Abrams</span>: OK, ready to </span><span class="line" data-startTime="2756">deploy to production. </span> <span class="line" data-startTime="2757">OK, great. </span> <span class="line" data-startTime="2759">So it's very easy to do this. </span> <span class="line" data-startTime="2761">We have a set of command line </span><span class="line" data-startTime="2761">tools and stuff so you can </span><span class="line" data-startTime="2763">script them. </span> <span class="line" data-startTime="2764">But as a developer, it's nice </span><span class="line" data-startTime="2764">that right from Eclipse, you </span><span class="line" data-startTime="2767">can go ahead and deploy this. </span> <span class="line" data-startTime="2769">So while Ido was talking, I went </span><span class="line" data-startTime="2769">and set the application </span><span class="line" data-startTime="2772">ID for this. </span> <span class="line" data-startTime="2774">So if you just go to </span><span class="line" data-startTime="2774">appengine.com, everybody can </span><span class="line" data-startTime="2777">get 10 free apps that have a </span><span class="line" data-startTime="2777">pretty generous free quota, </span><span class="line" data-startTime="2781">and it's free and always </span><span class="line" data-startTime="2781">free for that tier. </span> <span class="line" data-startTime="2784">So you can go get your ID. </span> <span class="line" data-startTime="2786">I got Birra I/O 2012. </span></p>

<p><span class="line" data-startTime="2789">And then you just </span><span class="line" data-startTime="2789">click Deploy. </span> <span class="line" data-startTime="2791">And what's going to happen </span><span class="line" data-startTime="2791">now is it packages your </span><span class="line" data-startTime="2794">application locally and sends </span><span class="line" data-startTime="2794">it up to the server for </span><span class="line" data-startTime="2798">deployment. </span> <span class="line" data-startTime="2798">And this only takes a max of </span><span class="line" data-startTime="2798">two or three minutes over </span><span class="line" data-startTime="2802">normal Wi-Fi. </span> <span class="line" data-startTime="2805">Let's let that go. </span></p>

<p class="speaker"><span class="line" data-starttime="2806"><span class="speakerName">Ido Green</span>: Maybe I'll just </span><span class="line" data-startTime="2806">show them the Web </span><span class="line" data-startTime="2807">Intents that I forgot. </span></p>

<p class="speaker"><span class="line" data-starttime="2808"><span class="speakerName">Brad Abrams</span>: Oh, sure, </span><span class="line" data-startTime="2808">you want to </span><span class="line" data-startTime="2809">switch back to Web Intents? </span><span class="line" data-startTime="2810">OK. </span><span class="line" data-startTime="2811">And by then, this </span><span class="line" data-startTime="2811">will be done. </span></p>

<p class="speaker"><span class="line" data-starttime="2812"><span class="speakerName">Ido Green</span>: I'm really passionate </span><span class="line" data-startTime="2812">about this small </span><span class="line" data-startTime="2814">operation, and I just wanted to </span><span class="line" data-startTime="2814">show you how easy it is to </span><span class="line" data-startTime="2817">hook it up to your apps. </span> <span class="line" data-startTime="2819">So basically with Web Intent, </span><span class="line" data-startTime="2819">we're letting the user choose </span><span class="line" data-startTime="2822">how they want to achieve </span><span class="line" data-startTime="2822">an intent in action. </span> <span class="line" data-startTime="2825">In our case, let's try </span><span class="line" data-startTime="2825">and share our beer. </span> <span class="line" data-startTime="2827">So as you can see here, from </span><span class="line" data-startTime="2827">Chrome 19 and above it's </span><span class="line" data-startTime="2830">natively in the browser. </span> <span class="line" data-startTime="2832">When I'm clicking Share Beer, </span><span class="line" data-startTime="2832">I'm getting a few options here </span><span class="line" data-startTime="2836">that I found myself using a lot, </span><span class="line" data-startTime="2836">but you could add, and </span><span class="line" data-startTime="2839">there's plenty more </span><span class="line" data-startTime="2839">in the Chrome Web </span><span class="line" data-startTime="2841">Store to check around. </span> <span class="line" data-startTime="2843">And in my case, let's </span><span class="line" data-startTime="2843">see how it's done. </span> <span class="line" data-startTime="2846">I just want to send </span><span class="line" data-startTime="2846">it through Gmail. </span> <span class="line" data-startTime="2850">So you can see the payload, in </span><span class="line" data-startTime="2850">my case, it's just the beer </span><span class="line" data-startTime="2852">name, the score, and maybe some </span><span class="line" data-startTime="2852">link back to the app. </span> <span class="line" data-startTime="2855">Very simple. </span></p>

<p><span class="line" data-startTime="2856">And the power of it is that, </span><span class="line" data-startTime="2856">check this set of lines that </span><span class="line" data-startTime="2861">makes our life so much easier. </span> <span class="line" data-startTime="2863">So we're gathering in beer </span><span class="line" data-startTime="2863">details there, payload that we </span><span class="line" data-startTime="2866">want to send the intent. </span> <span class="line" data-startTime="2868">Then we're constructing a new </span><span class="line" data-startTime="2868">intent, and it could be share, </span><span class="line" data-startTime="2872">it could be edit a photo. </span> <span class="line" data-startTime="2873">So let's say that you want to </span><span class="line" data-startTime="2873">let your users edit a photo. </span> <span class="line" data-startTime="2877">You don't need to code this </span><span class="line" data-startTime="2877">again and again and </span><span class="line" data-startTime="2879">reinvent the wheel. </span> <span class="line" data-startTime="2880">You could use other services out </span><span class="line" data-startTime="2880">there that are focusing on </span><span class="line" data-startTime="2883">doing this work and excel in </span><span class="line" data-startTime="2883">it, and just let the users </span><span class="line" data-startTime="2886">talk to them. </span></p>

<p><span class="line" data-startTime="2887">And then we passing </span><span class="line" data-startTime="2887">the beer details. </span> <span class="line" data-startTime="2889">And when we're starting the </span><span class="line" data-startTime="2889">window.navigator object, we're </span><span class="line" data-startTime="2893">passing the intent, starting the </span><span class="line" data-startTime="2893">activity, and the user is </span><span class="line" data-startTime="2896">taking it from there. </span> <span class="line" data-startTime="2898">Very simple, very smooth, and of </span><span class="line" data-startTime="2898">course, we have JavaScript </span><span class="line" data-startTime="2902">chains to all the </span><span class="line" data-startTime="2902">other browsers. </span> <span class="line" data-startTime="2903">So in Chrome, it's </span><span class="line" data-startTime="2903">coming natively. </span> <span class="line" data-startTime="2905">In other browsers, the user </span><span class="line" data-startTime="2905">could achieve it with the </span><span class="line" data-startTime="2907">JavaScript chains </span><span class="line" data-startTime="2907">that we have. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2909"><span class="speakerName">Brad Abrams</span>: All right. </span><span class="line" data-startTime="2910">Awesome. </span><span class="line" data-startTime="2911">So that gave me plenty of time </span><span class="line" data-startTime="2911">to deploy the application to </span><span class="line" data-startTime="2914">production, just to give you a </span><span class="line" data-startTime="2914">sense of what it does, some </span><span class="line" data-startTime="2917">client-side stuff. </span><span class="line" data-startTime="2918">It uploads all the files and </span><span class="line" data-startTime="2918">then verifies that it's </span><span class="line" data-startTime="2921">available, updates all the </span><span class="line" data-startTime="2921">index, and it's deployed. </span><span class="line" data-startTime="2925">So as soon as it's deployed, the </span><span class="line" data-startTime="2925">next thing we wanted to do </span><span class="line" data-startTime="2928">is actually go do some </span><span class="line" data-startTime="2928">scalability &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2929"><span class="speakerName">Ido Green</span>: Whoa, don't </span><span class="line" data-startTime="2929">do it yet. </span></p>

<p class="speaker"><span class="line" data-starttime="2932"><span class="speakerName">Brad Abrams</span>: Well, whatever. </span><span class="line" data-startTime="2933">What we wanted to do is do some </span><span class="line" data-startTime="2934">scalability testing of it. </span><span class="line" data-startTime="2936">So we used ApacheBench, and this </span><span class="line" data-startTime="2936">is just very basic, off </span><span class="line" data-startTime="2940">the cuff scalability to give you </span><span class="line" data-startTime="2940">a sense of how this works. </span><span class="line" data-startTime="2944">ApacheBench is a widely </span><span class="line" data-startTime="2944">used open source </span><span class="line" data-startTime="2947">tool for doing this. </span><span class="line" data-startTime="2948">So we did 9,000. </span><span class="line" data-startTime="2950">This was on my laptop on our </span><span class="line" data-startTime="2950">Wi-Fi network at work, so we </span><span class="line" data-startTime="2956">did 9,000 connections, </span><span class="line" data-startTime="2956">100 at a time. </span><span class="line" data-startTime="2961">And you see the results we </span><span class="line" data-startTime="2961">got in percentile here. </span><span class="line" data-startTime="2964">So 90% of the requests </span><span class="line" data-startTime="2964">came back in </span><span class="line" data-startTime="2967">less than half a second. </span></p>

<p class="speaker"><span class="line" data-starttime="2968"><span class="speakerName">Ido Green</span>: It's not showing. </span></p>

<p class="speaker"><span class="line" data-starttime="2969"><span class="speakerName">Brad Abrams</span>: Oh, it's not? </span><span class="line" data-startTime="2970">I'm sorry. </span> <span class="line" data-startTime="2972">Great, thank you. </span> <span class="line" data-startTime="2973">So now you see that we </span><span class="line" data-startTime="2973">used ApacheBench. </span> <span class="line" data-startTime="2976">We got 90% of the requests came </span><span class="line" data-startTime="2976">back in half a second. </span> <span class="line" data-startTime="2980">So that's pretty decent. </span> <span class="line" data-startTime="2981">That's pretty good for a sort </span><span class="line" data-startTime="2981">of in-the-wild deployment. </span> <span class="line" data-startTime="2984">And again, we didn't have to </span><span class="line" data-startTime="2984">do anything to make our app </span><span class="line" data-startTime="2987">actually scale that way. </span> <span class="line" data-startTime="2989">So the next thing to do, I don't </span><span class="line" data-startTime="2989">know if you caught in </span><span class="line" data-startTime="2990">the keynote, we launched a new </span><span class="line" data-startTime="2990">sister project to App Engine. </span></p>

<p><span class="line" data-startTime="2994">Does anybody remember </span><span class="line" data-startTime="2994">what that's called? </span><span class="line" data-startTime="2996">Compute Engine? </span><span class="line" data-startTime="2997">I don't know if anybody </span><span class="line" data-startTime="2997">knows anything </span><span class="line" data-startTime="2999">about our data centers. </span> <span class="line" data-startTime="3000">One of the things Google does </span><span class="line" data-startTime="3000">pretty well with the data </span><span class="line" data-startTime="3002">centers is networking logic. </span> <span class="line" data-startTime="3005">So I thought it would be fun to </span><span class="line" data-startTime="3005">get a Compute Engine into </span><span class="line" data-startTime="3007">this and just see how quick that </span><span class="line" data-startTime="3007">would be to hit the App </span><span class="line" data-startTime="3011">Engine app from a Compute </span><span class="line" data-startTime="3011">Engine instance. </span> <span class="line" data-startTime="3014">It turns out they're actually </span><span class="line" data-startTime="3014">in different data centers. </span> <span class="line" data-startTime="3018">The App Engine app was running </span><span class="line" data-startTime="3018">in one data center, and the </span><span class="line" data-startTime="3020">Compute Engine was running </span><span class="line" data-startTime="3020">in another one. </span></p>

<p><span class="line" data-startTime="3022">But anyway, it's fun, </span><span class="line" data-startTime="3022">nonetheless, to see that 95% </span><span class="line" data-startTime="3026">of the requests came back in </span><span class="line" data-startTime="3026">less than seven milliseconds. </span> <span class="line" data-startTime="3030">So it's actually pretty fast. </span> <span class="line" data-startTime="3032">So if you're doing something, </span><span class="line" data-startTime="3032">you want to access your App </span><span class="line" data-startTime="3036">Engine app quickly, this </span><span class="line" data-startTime="3036">is the way to do it. </span></p>

<p class="speaker"><span class="line" data-starttime="3038"><span class="speakerName">Ido Green</span>: Rank a </span><span class="line" data-startTime="3038">lot of beers. </span></p>

<p class="speaker"><span class="line" data-starttime="3040"><span class="speakerName">Brad Abrams</span>: It turns out that </span><span class="line" data-startTime="3040">the way this actually works </span><span class="line" data-startTime="3043">with App Engine is a lot of this </span><span class="line" data-startTime="3043">is static content coming </span><span class="line" data-startTime="3047">from the HTML app, and that </span><span class="line" data-startTime="3047">gets stored in Google's </span><span class="line" data-startTime="3051">distributed cache. </span> <span class="line" data-startTime="3053">So it turns out it wasn't </span><span class="line" data-startTime="3053">actually hitting my App Engine </span><span class="line" data-startTime="3056">app at all. </span> <span class="line" data-startTime="3057">It hits it one time to get the </span><span class="line" data-startTime="3057">HTML, and then after that, it </span><span class="line" data-startTime="3060">serves it out of the cache, </span><span class="line" data-startTime="3060">and those caches are </span><span class="line" data-startTime="3062">distributed globally. </span> <span class="line" data-startTime="3064">And that's available for </span><span class="line" data-startTime="3064">all App Engine Apps. </span> <span class="line" data-startTime="3066">You sort of get that for free. </span> <span class="line" data-startTime="3068">So once we've figured that out, </span><span class="line" data-startTime="3068">we were actually playing </span><span class="line" data-startTime="3070">around with this, with different </span><span class="line" data-startTime="3070">arguments, had a </span><span class="line" data-startTime="3072">couple of machines playing </span><span class="line" data-startTime="3072">around with it just to see </span><span class="line" data-startTime="3074">sort of where we could get </span><span class="line" data-startTime="3074">the queries per second. </span></p>

<p><span class="line" data-startTime="3079">Have you seen the App </span><span class="line" data-startTime="3079">Engine graphs? </span><span class="line" data-startTime="3081">Like how many simultaneous </span><span class="line" data-startTime="3081">requests could we get? </span><span class="line" data-startTime="3083">We got a little crazy with the </span><span class="line" data-startTime="3083">ApacheBench tool, and we got </span><span class="line" data-startTime="3087">to 6,000 QPS just </span><span class="line" data-startTime="3087">playing around </span><span class="line" data-startTime="3091">with a couple of machines. </span> <span class="line" data-startTime="3093">So that's pretty good, and </span><span class="line" data-startTime="3093">it's literally the </span><span class="line" data-startTime="3096">code you saw today. </span> <span class="line" data-startTime="3098">Again, a lot of the QPS is </span><span class="line" data-startTime="3098">actually hitting the HTML </span><span class="line" data-startTime="3100">page, but it's really nice to </span><span class="line" data-startTime="3100">be able to know that you're </span><span class="line" data-startTime="3104">working on infrastructure that </span><span class="line" data-startTime="3104">you can just play around with </span><span class="line" data-startTime="3107">and get to 6,000 QPS. </span> <span class="line" data-startTime="3109">To give you an idea, 6,000 QPS </span><span class="line" data-startTime="3109">is like a quarter of a million </span><span class="line" data-startTime="3113">requests a minute. </span></p>

<p><span class="line" data-startTime="3115">So what is that, maybe </span><span class="line" data-startTime="3115">a few hundred </span><span class="line" data-startTime="3118">thousand concurrent users? </span><span class="line" data-startTime="3120">So just think about if you're </span><span class="line" data-startTime="3120">going to stand up your own </span><span class="line" data-startTime="3122">machine to go serve 100,000 </span><span class="line" data-startTime="3122">concurrent users, that might </span><span class="line" data-startTime="3127">take you a little while. </span> <span class="line" data-startTime="3128">You might have to think about </span><span class="line" data-startTime="3128">some sharding and whatever, </span><span class="line" data-startTime="3130">and we've done all that work </span><span class="line" data-startTime="3130">for you with App Engine. </span></p>

<p class="speaker"><span class="line" data-starttime="3134"><span class="speakerName">Ido Green</span>: So main take aways. </span> <span class="line" data-startTime="3135">I think we saw that it's pretty </span><span class="line" data-startTime="3135">nice today to be a </span><span class="line" data-startTime="3138">developer in terms of the </span><span class="line" data-startTime="3138">development experience. </span> <span class="line" data-startTime="3141">With Google App Engine, you can </span><span class="line" data-startTime="3141">leverage and tap into the </span><span class="line" data-startTime="3144">infrastructure and write your </span><span class="line" data-startTime="3144">own RESTful APIs quite easily. </span> <span class="line" data-startTime="3149">One of the nice things is that </span><span class="line" data-startTime="3149">not only do you not need to </span><span class="line" data-startTime="3151">think about scalability, you </span><span class="line" data-startTime="3151">could focus really on the API. </span> <span class="line" data-startTime="3154">The API is, in most of the </span><span class="line" data-startTime="3154">cases, the most challenging </span><span class="line" data-startTime="3157">aspect of the system itself. </span> <span class="line" data-startTime="3159">So now you could just devote the </span><span class="line" data-startTime="3159">vast majority of your time </span><span class="line" data-startTime="3161">to that critical section, and </span><span class="line" data-startTime="3161">of course, code it from the </span><span class="line" data-startTime="3165">client side with all the best </span><span class="line" data-startTime="3165">practices of HTML5 and the </span><span class="line" data-startTime="3168">newest APIs that are </span><span class="line" data-startTime="3168">under your hands. </span> <span class="line" data-startTime="3172">And I think we mentioned a few </span><span class="line" data-startTime="3172">very important points that I </span><span class="line" data-startTime="3174">would ask people just to keep in </span><span class="line" data-startTime="3174">mind when they're building </span><span class="line" data-startTime="3177">their next modern web apps, </span><span class="line" data-startTime="3177">mobile or desktop. </span> <span class="line" data-startTime="3181">One of the most important </span><span class="line" data-startTime="3181">features is, of course, the 60 </span><span class="line" data-startTime="3183">frames per second and the </span><span class="line" data-startTime="3183">smoothness, and that's coming </span><span class="line" data-startTime="3186">with the option to make </span><span class="line" data-startTime="3186">the app work offline. </span></p>

<p><span class="line" data-startTime="3189">And lots of users and lots of </span><span class="line" data-startTime="3189">great apps like the Financial </span><span class="line" data-startTime="3193">Times, the New York Times, </span><span class="line" data-startTime="3193">Google Docs, Gmail, and so on </span><span class="line" data-startTime="3196">are enjoying it today. </span> <span class="line" data-startTime="3198">And in the near future, we'll </span><span class="line" data-startTime="3198">see more and more users </span><span class="line" data-startTime="3200">expecting it. </span> <span class="line" data-startTime="3201">So that's something </span><span class="line" data-startTime="3201">to keep in mind. </span> <span class="line" data-startTime="3203">Web Intents, we showed you. </span> <span class="line" data-startTime="3205">You have no excuse </span><span class="line" data-startTime="3205">not to use it. </span> <span class="line" data-startTime="3206">It's so simple and trivial. </span> <span class="line" data-startTime="3208">And I would really like to thank </span><span class="line" data-startTime="3208">you for coming to hear </span><span class="line" data-startTime="3211">us after the heavy lunch </span><span class="line" data-startTime="3211">that we had. </span> <span class="line" data-startTime="3215">Both Brad and I will be in the </span><span class="line" data-startTime="3215">Sandbox if anyone has more </span><span class="line" data-startTime="3219">questions after we </span><span class="line" data-startTime="3219">have, of course, </span><span class="line" data-startTime="3221">the section for questions. </span></p>

<p><span class="line" data-startTime="3223">And as I mentioned before, you </span><span class="line" data-startTime="3223">could have all the source code </span><span class="line" data-startTime="3226">of all the examples, just to </span><span class="line" data-startTime="3226">play with them and see exactly </span><span class="line" data-startTime="3229">how it's working for you in </span><span class="line" data-startTime="3229">this GitHub repository. </span> <span class="line" data-startTime="3233">We'll put the slides once &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="3235"><span class="speakerName">Brad Abrams</span>: Oh, goodness. </span><span class="line" data-startTime="3236">I'm sorry. </span><span class="line" data-startTime="3236">You guys gotta help </span><span class="line" data-startTime="3236">me with this. </span></p>

<p class="speaker"><span class="line" data-starttime="3239"><span class="speakerName">Ido Green</span>: Yeah. </span> <span class="line" data-startTime="3239">So you have the link to </span><span class="line" data-startTime="3239">the GitHub repository. </span> <span class="line" data-startTime="3242">The code is actually there. </span> <span class="line" data-startTime="3247">We'll have all the slides </span><span class="line" data-startTime="3247">and the other </span><span class="line" data-startTime="3249">documentation below it. </span> <span class="line" data-startTime="3252">And of course, you could try </span><span class="line" data-startTime="3252">and test the app itself and </span><span class="line" data-startTime="3255">the endpoint itself </span><span class="line" data-startTime="3255">in birra-io2012. </span> <span class="line" data-startTime="3259">Hit it as hard as you want. </span> <span class="line" data-startTime="3261">We would love to see some </span><span class="line" data-startTime="3261">nice graphs on it. </span> <span class="line" data-startTime="3264">And of course, check out </span><span class="line" data-startTime="3264">the new Endpoint API. </span> <span class="line" data-startTime="3268">It's pretty powerful. </span> <span class="line" data-startTime="3270">If, by any chance, you didn't </span><span class="line" data-startTime="3270">reach to Brad or myself after </span><span class="line" data-startTime="3273">the talk or in the Sandbox, </span><span class="line" data-startTime="3273">please feel </span><span class="line" data-startTime="3276">free to use our G+. </span> <span class="line" data-startTime="3278">We both would be happy to answer </span><span class="line" data-startTime="3278">any questions that you </span><span class="line" data-startTime="3280">might have, or challenges or </span><span class="line" data-startTime="3280">problems that you might have </span><span class="line" data-startTime="3284">in the near future. </span> <span class="line" data-startTime="3285">So thank you very much, and if </span><span class="line" data-startTime="3285">we have questions, we'd be </span><span class="line" data-startTime="3287">happy to take them. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="3289"><span class="speakerName">Brad Abrams</span>: If you enjoyed the </span><span class="line" data-startTime="3289">show, we'd love for you to </span><span class="line" data-startTime="3292">vote with your little +1s. </span><span class="line" data-startTime="3294">Ido and I are always looking to </span><span class="line" data-startTime="3294">get better, so if you have </span><span class="line" data-startTime="3296">comments, there's the </span><span class="line" data-startTime="3296">URL on the back. </span></p>

<p class="speaker"><span class="line" data-starttime="3298"><span class="speakerName">Ido Green</span>: Absolutely. </span></p>

<p class="speaker"><span class="line" data-starttime="3298"><span class="speakerName">Brad Abrams</span>: Thank </span><span class="line" data-startTime="3298">you very much. </span></p>

<p class="speaker"><span class="line" data-starttime="3300"><span class="speakerName">Ido Green</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="3305"><span class="speakerName">Brad Abrams</span>: Should we just </span><span class="line" data-startTime="3305">do questions here? </span><span class="line" data-startTime="3308">Any questions? </span></p>

<p class="speaker"><span class="line" data-starttime="3310"><span class="speakerName">Ido Green</span>: If you ask </span><span class="line" data-startTime="3310">an easy question, </span><span class="line" data-startTime="3311">you're getting a sticker. </span><span class="line" data-startTime="3312">If it's a hard one, </span><span class="line" data-startTime="3312">no sticker. </span></p>

<p class="speaker"><span class="line" data-starttime="3314"><span class="speakerName">Audience</span>: I was wondering if </span><span class="line" data-startTime="3314">there's any plans on bringing </span><span class="line" data-startTime="3317">client-side adaptive images </span><span class="line" data-startTime="3317">into App Engine? </span></p>

<p class="speaker"><span class="line" data-starttime="3321"><span class="speakerName">Ido Green</span>: Do you </span><span class="line" data-startTime="3321">want to take it? </span></p>

<p class="speaker"><span class="line" data-starttime="3323"><span class="speakerName">Brad Abrams</span>: What do you mean </span><span class="line" data-startTime="3323">by adaptive images? </span></p>

<p class="speaker"><span class="line" data-starttime="3325"><span class="speakerName">Audience</span>: Serving up different </span><span class="line" data-startTime="3325">resolutions for the multitude </span><span class="line" data-startTime="3329">of devices we have. </span></p>

<p class="speaker"><span class="line" data-starttime="3330"><span class="speakerName">Brad Abrams</span>: Yep. </span><span class="line" data-startTime="3331">Yep. </span><span class="line" data-startTime="3331">We have heard that. </span><span class="line" data-startTime="3332">There's nothing that I have </span><span class="line" data-startTime="3332">right now for you. </span></p>

<p class="speaker"><span class="line" data-starttime="3334"><span class="speakerName">Ido Green</span>: What you can </span><span class="line" data-startTime="3334">use today is just &mdash; </span><span class="line" data-startTime="3338">you need to do the leg work, </span><span class="line" data-startTime="3338">but we have, of course, the </span><span class="line" data-startTime="3341">API to use it, but you need </span><span class="line" data-startTime="3341">to do the leg work for it. </span></p>

<p class="speaker"><span class="line" data-starttime="3344"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="3344">Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="3345"><span class="speakerName">Ido Green</span>: And now you </span><span class="line" data-startTime="3345">could get a sticker. </span></p>

<p class="speaker"><span class="line" data-starttime="3346"><span class="speakerName">Brad Abrams</span>: Yes. </span><span class="line" data-startTime="3347">Please. </span></p>

<p class="speaker"><span class="line" data-starttime="3347"><span class="speakerName">Ido Green</span>: It wasn't hard. </span><span class="line" data-startTime="3349">Yes, please? </span></p>

<p class="speaker"><span class="line" data-starttime="3350"><span class="speakerName">Audience</span>: Do you guys have any </span><span class="line" data-startTime="3350">best practice recommendations? </span><span class="line" data-startTime="3353">I saw you get bit by it a few </span><span class="line" data-startTime="3353">times where when you're in an </span><span class="line" data-startTime="3355">application going page by page, </span><span class="line" data-startTime="3355">wizardy style things, </span><span class="line" data-startTime="3360">you have to wait until the </span><span class="line" data-startTime="3360">data store has your data </span><span class="line" data-startTime="3364">before you can then re-query </span><span class="line" data-startTime="3364">it back in page two. </span><span class="line" data-startTime="3367">And like you said, oh, </span><span class="line" data-startTime="3367">it's not there yet. </span><span class="line" data-startTime="3369">You have to wait a second </span><span class="line" data-startTime="3369">and try it again. </span><span class="line" data-startTime="3371">When you're in an application, </span><span class="line" data-startTime="3371">is there a better way or a </span><span class="line" data-startTime="3373">notifying way to then be told </span><span class="line" data-startTime="3373">my data's there, now I can </span><span class="line" data-startTime="3378">move forward? </span></p>

<p class="speaker"><span class="line" data-starttime="3378"><span class="speakerName">Ido Green</span>: Yeah, absolutely. </span><span class="line" data-startTime="3379">And actually, that's one of the </span><span class="line" data-startTime="3379">benefits of building your </span><span class="line" data-startTime="3382">app from the ground up </span><span class="line" data-startTime="3382">with offlink in mind. </span><span class="line" data-startTime="3385">Because then you'll know that </span><span class="line" data-startTime="3385">you have the most common data </span><span class="line" data-startTime="3388">that the user is using, and </span><span class="line" data-startTime="3388">you could make a nice </span><span class="line" data-startTime="3391">heuristic about what you will </span><span class="line" data-startTime="3391">want next and just fetch it </span><span class="line" data-startTime="3394">immediately from the </span><span class="line" data-startTime="3394">local storage. </span><span class="line" data-startTime="3396">And that's actually why we see </span><span class="line" data-startTime="3396">lots of apps that are really </span><span class="line" data-startTime="3399">snappy and really fast, because </span><span class="line" data-startTime="3399">they don't need to do </span><span class="line" data-startTime="3401">the round trip to the server and </span><span class="line" data-startTime="3401">fetch the information in </span><span class="line" data-startTime="3404">order to show it. </span><span class="line" data-startTime="3405">They already have it locally. </span></p>

<p class="speaker"><span class="line" data-starttime="3406"><span class="speakerName">Audience</span>: So you're saying that </span><span class="line" data-startTime="3406">you just keep it locally </span><span class="line" data-startTime="3408">and don't actually put it in </span><span class="line" data-startTime="3408">the data store until later? </span></p>

<p class="speaker"><span class="line" data-starttime="3411"><span class="speakerName">Ido Green</span>: Yeah. </span><span class="line" data-startTime="3411">So do everything locally first, </span><span class="line" data-startTime="3411">and then sync it when </span><span class="line" data-startTime="3414">you have time for it. </span><span class="line" data-startTime="3416">And when you have the right </span><span class="line" data-startTime="3416">connection, the right </span><span class="line" data-startTime="3417">bandwidth &mdash; </span><span class="line" data-startTime="3418">I saw some modern web apps </span><span class="line" data-startTime="3418">actually checking how good the </span><span class="line" data-startTime="3422">connection is. </span><span class="line" data-startTime="3423">There are a few JavaScript </span><span class="line" data-startTime="3423">libraries that let you do that </span><span class="line" data-startTime="3425">and then doing the syncing </span><span class="line" data-startTime="3425">just in the right time. </span><span class="line" data-startTime="3428">So that's one thing. </span><span class="line" data-startTime="3429">The other thing is that with </span><span class="line" data-startTime="3429">Google JavaScript API library, </span><span class="line" data-startTime="3433">you could tap and do </span><span class="line" data-startTime="3433">batch requests. </span><span class="line" data-startTime="3435">So you, using a leveraging one </span><span class="line" data-startTime="3435">connection with multiple </span><span class="line" data-startTime="3439">requests on top of it, </span><span class="line" data-startTime="3439">and that's of course </span><span class="line" data-startTime="3440">working much better. </span><span class="line" data-startTime="3444">You can have a sticker. </span><span class="line" data-startTime="3446">It was hard, but we made it. </span></p>

<p class="speaker"><span class="line" data-starttime="3447"><span class="speakerName">Audience</span>: How do you handle </span><span class="line" data-startTime="3447">security and privacy, in </span><span class="line" data-startTime="3451">particular, like in a health </span><span class="line" data-startTime="3451">care setting, if you're </span><span class="line" data-startTime="3453">writing a health care app, </span><span class="line" data-startTime="3453">keeping with regulations and </span><span class="line" data-startTime="3454">all that sort of stuff? </span></p>

<p class="speaker"><span class="line" data-starttime="3455"><span class="speakerName">Ido Green</span>: That's a great </span><span class="line" data-startTime="3455">question, so you'll definitely </span><span class="line" data-startTime="3456">get a sticker. </span><span class="line" data-startTime="3458">We haven't shown it, because </span><span class="line" data-startTime="3458">we didn't have time, but </span><span class="line" data-startTime="3460">authentication is coming </span><span class="line" data-startTime="3460">out of the box. </span><span class="line" data-startTime="3462">So it's perfect, and the </span><span class="line" data-startTime="3462">question is actually amazingly </span><span class="line" data-startTime="3465">good, because in other cases you </span><span class="line" data-startTime="3465">need to work pretty hard </span><span class="line" data-startTime="3468">to make your app secure. </span><span class="line" data-startTime="3470">And in our case, both the </span><span class="line" data-startTime="3470">endpoint is supporting the </span><span class="line" data-startTime="3474">cross-region sharing resources </span><span class="line" data-startTime="3474">and authentication </span><span class="line" data-startTime="3478">just out of the box. </span><span class="line" data-startTime="3479">So we'll have in the code, </span><span class="line" data-startTime="3479">actually, in GitHub, and you </span><span class="line" data-startTime="3482">could see how easy it is to </span><span class="line" data-startTime="3482">have, let's say, authenticated </span><span class="line" data-startTime="3486">comments or beers. </span><span class="line" data-startTime="3487">So only users that are </span><span class="line" data-startTime="3487">authenticated could actually </span><span class="line" data-startTime="3490">work with the app. </span><span class="line" data-startTime="3491">So in terms of security, you're </span><span class="line" data-startTime="3491">getting quite nice </span><span class="line" data-startTime="3494">things that have already </span><span class="line" data-startTime="3494">been done for you. </span><span class="line" data-startTime="3496">So you don't need to work </span><span class="line" data-startTime="3496">for them yourself. </span></p>

<p class="speaker"><span class="line" data-starttime="3499"><span class="speakerName">Brad Abrams</span>: I can show </span><span class="line" data-startTime="3499">you an example. </span></p>

<p class="speaker"><span class="line" data-starttime="3500"><span class="speakerName">Audience</span>: So behind the scenes, </span><span class="line" data-startTime="3500">is Google indexing </span><span class="line" data-startTime="3506">patient data or whatever </span><span class="line" data-startTime="3506">information I'm storing? </span></p>

<p class="speaker"><span class="line" data-starttime="3509"><span class="speakerName">Brad Abrams</span>: No. </span><span class="line" data-startTime="3510">No. </span><span class="line" data-startTime="3510">Let me do this one. </span><span class="line" data-startTime="3512">It's very clear in the App </span><span class="line" data-startTime="3512">Engine terms of service, we </span><span class="line" data-startTime="3515">can't even see the data that </span><span class="line" data-startTime="3515">you're putting in App Engine. </span><span class="line" data-startTime="3518">The only thing we can do with </span><span class="line" data-startTime="3518">the data that you're putting </span><span class="line" data-startTime="3520">in App Engine is serve </span><span class="line" data-startTime="3520">it back to you. </span><span class="line" data-startTime="3523">So we're not indexing </span><span class="line" data-startTime="3523">it in any way. </span><span class="line" data-startTime="3526">It is completely your data. </span></p>

<p class="speaker"><span class="line" data-starttime="3528"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="3528">Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="3529"><span class="speakerName">Ido Green</span>: Sure. </span><span class="line" data-startTime="3530">BRAD ABRAMS:OK, one </span><span class="line" data-startTime="3530">more, probably. </span><span class="line" data-startTime="3532">Yeah. </span><span class="line" data-startTime="3533">You get to be the </span><span class="line" data-startTime="3533">last question. </span></p>

<p class="speaker"><span class="line" data-starttime="3534"><span class="speakerName">Audience</span>: Right on. </span><span class="line" data-startTime="3535">Hopefully it's an easy one, </span><span class="line" data-startTime="3535">and I'll get a sticker. </span></p>

<p class="speaker"><span class="line" data-starttime="3537"><span class="speakerName">Ido Green</span>: I hope so </span></p>

<p class="speaker"><span class="line" data-starttime="3538"><span class="speakerName">Audience</span>: Web sockets </span><span class="line" data-startTime="3538">on App Engine. </span><span class="line" data-startTime="3540">When is that gonna </span><span class="line" data-startTime="3540">be available? </span></p>

<p class="speaker"><span class="line" data-starttime="3542"><span class="speakerName">Brad Abrams</span>: Stay tuned. </span></p>

<p class="speaker"><span class="line" data-starttime="3544"><span class="speakerName">Ido Green</span>: I'm holding </span><span class="line" data-startTime="3544">my fingers as well. </span></p>

<p class="speaker"><span class="line" data-starttime="3546"><span class="speakerName">Brad Abrams</span>: Nothing's </span><span class="line" data-startTime="3546">due out right now. </span><span class="line" data-startTime="3549">That was so easy. </span></p>

<p class="speaker"><span class="line" data-starttime="3550"><span class="speakerName">Audience</span>: That was </span><span class="line" data-startTime="3550">a short one. </span><span class="line" data-startTime="3552">There are a few annotation </span><span class="line" data-startTime="3552">APIs like JAX-RS or </span><span class="line" data-startTime="3556">something like that. </span><span class="line" data-startTime="3557">I wanted to ask you what is @API </span><span class="line" data-startTime="3557">method, and what about </span><span class="line" data-startTime="3562">existing standards? </span></p>

<p class="speaker"><span class="line" data-starttime="3564"><span class="speakerName">Brad Abrams</span>: So we </span><span class="line" data-startTime="3564">discussed this. </span><span class="line" data-startTime="3565">We decided @API, @API methods </span><span class="line" data-startTime="3565">are ones that we created for </span><span class="line" data-startTime="3570">our cloud endpoint, because </span><span class="line" data-startTime="3570">there's a lot of things that's </span><span class="line" data-startTime="3573">very custom to that. </span><span class="line" data-startTime="3574">We definitely think it's </span><span class="line" data-startTime="3574">possible to layer on top of </span><span class="line" data-startTime="3577">that a standards-based </span><span class="line" data-startTime="3577">approach. </span><span class="line" data-startTime="3580">If somebody's interested in </span><span class="line" data-startTime="3580">doing an open source project </span><span class="line" data-startTime="3582">around that or what not, I'd </span><span class="line" data-startTime="3582">be happy to discuss some of </span><span class="line" data-startTime="3584">the details with you. </span></p>

<p class="speaker"><span class="line" data-starttime="3586"><span class="speakerName">Audience</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="3587"><span class="speakerName">Ido Green</span>: Thank </span><span class="line" data-startTime="3587">you very much. </span></p>

<p class="speaker"><span class="line" data-starttime="3588"><span class="speakerName">Brad Abrams</span>: Cool. </span><span class="line" data-startTime="3588">Great. </span><span class="line" data-startTime="3588">Thank you, guys. </span></p>