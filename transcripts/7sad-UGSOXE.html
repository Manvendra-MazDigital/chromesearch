<p><span class="line" data-startTime="1">Hi, welcome to the WebGL </span><span class="line" data-startTime="1">debugging screencast. In this </span><span class="line" data-startTime="5">screencast, I'm going to go </span><span class="line" data-startTime="5">through the basics of </span><span class="line" data-startTime="9">debugging your WebGL </span><span class="line" data-startTime="9">applications. </span> <span class="line" data-startTime="12">To get started, I have here the </span><span class="line" data-startTime="12">Khronos WebGL wiki page </span><span class="line" data-startTime="19">about debugging. </span> <span class="line" data-startTime="20">This is a nice source </span><span class="line" data-startTime="20">of links. </span> <span class="line" data-startTime="23">It links you to WebGL Inspector, </span><span class="line" data-startTime="23">which is nice for </span><span class="line" data-startTime="26">WebGL debugging. </span> <span class="line" data-startTime="28">It also has a link to the WebGL </span><span class="line" data-startTime="28">debug scripts, which is </span><span class="line" data-startTime="33">a little piece of JavaScript </span><span class="line" data-startTime="33">that gives you tools to debug </span><span class="line" data-startTime="37">your WebGL applications. </span> <span class="line" data-startTime="40">In particular, it has got a </span><span class="line" data-startTime="40">WebGL debug context, which is </span><span class="line" data-startTime="48">a special wrapper for a WebGL </span><span class="line" data-startTime="48">context that makes all GL </span><span class="line" data-startTime="55">errors show up in the </span><span class="line" data-startTime="55">JavaScript console. </span> <span class="line" data-startTime="59">So you can also customize </span><span class="line" data-startTime="59">it to do </span><span class="line" data-startTime="66">JavaScript style error handling. </span> <span class="line" data-startTime="68">So that instead of getting back </span><span class="line" data-startTime="68">an error number, you can </span><span class="line" data-startTime="74">make it actually throw an </span><span class="line" data-startTime="74">exception when you get an </span><span class="line" data-startTime="78">error on a GL call. </span> <span class="line" data-startTime="80">And what the debug context does </span><span class="line" data-startTime="80">is after each call to GL, </span><span class="line" data-startTime="85">it calls gl.geterror to </span><span class="line" data-startTime="85">get the error code. </span></p>

<p><span class="line" data-startTime="90">This causes a performance </span><span class="line" data-startTime="90">penalty if you use it in your </span><span class="line" data-startTime="97">production code. </span> <span class="line" data-startTime="98">But for debugging, it's great. </span> <span class="line" data-startTime="103">It also has this little </span><span class="line" data-startTime="103">function, </span><span class="line" data-startTime="108">WebGLDebugUtils.glEnumToString, </span><span class="line" data-startTime="108">which lets you take one of </span><span class="line" data-startTime="113">those cryptic error codes and </span><span class="line" data-startTime="113">gets the name for the error. </span> <span class="line" data-startTime="118">Very useful. </span> <span class="line" data-startTime="122">Next, I'm going to show you </span><span class="line" data-startTime="122">the WebGL Inspector. </span> <span class="line" data-startTime="127">So the WebGL Inspector </span><span class="line" data-startTime="127">is a little Chrome </span><span class="line" data-startTime="131">extension by Ben Vanik. </span> <span class="line" data-startTime="134">And it's probably easier to </span><span class="line" data-startTime="134">show you what it does. </span> <span class="line" data-startTime="140">So it is on GetHub, </span><span class="line" data-startTime="140">benvanik.gethub. </span> <span class="line" data-startTime="143">com/WebGL-Inspector. </span></p>

<p><span class="line" data-startTime="147">I'm going to show you the live </span><span class="line" data-startTime="147">demo of the WebGL Inspector. </span> <span class="line" data-startTime="153">So here we have a WebGL demo </span><span class="line" data-startTime="153">running on the screen. </span> <span class="line" data-startTime="157">And click on the UI button, we </span><span class="line" data-startTime="157">get the WebGL Inspector. </span> <span class="line" data-startTime="164">And now I'm going to go through </span><span class="line" data-startTime="167">some of the easy features. </span> <span class="line" data-startTime="169">So Programs tab, you have got </span><span class="line" data-startTime="169">the shaders and the GL </span><span class="line" data-startTime="178">programs. And these have the </span><span class="line" data-startTime="178">uniforms, the attributes, the </span><span class="line" data-startTime="185">shader sources, the status </span><span class="line" data-startTime="185">for the shaders. </span></p>

<p><span class="line" data-startTime="190">So if you've got problems </span><span class="line" data-startTime="190">with your shaders, </span><span class="line" data-startTime="193">you can see it here. </span> <span class="line" data-startTime="195">Then there's a Buffers pane, </span><span class="line" data-startTime="195">which shows you all the </span><span class="line" data-startTime="199">buffers used in your </span><span class="line" data-startTime="199">WebGL program. </span> <span class="line" data-startTime="204">And here you can see what is </span><span class="line" data-startTime="204">inside of buffer, what is the </span><span class="line" data-startTime="208">size of the buffer, and </span><span class="line" data-startTime="208">what has been done </span><span class="line" data-startTime="215">to the buffer recently. </span> <span class="line" data-startTime="219">If we look up &mdash; </span><span class="line" data-startTime="220">I think it's this one. </span> <span class="line" data-startTime="222">Yeah, here we have </span><span class="line" data-startTime="222">an 89k buffer. </span> <span class="line" data-startTime="229">And here is a 600k buffer. </span> <span class="line" data-startTime="232">And with these, you don't see </span><span class="line" data-startTime="232">the buffer contents directly. </span> <span class="line" data-startTime="236">But you have to click on this </span><span class="line" data-startTime="236">link to show them, which I'm </span><span class="line" data-startTime="240">not going to click, because I </span><span class="line" data-startTime="240">think it's going to crash the </span><span class="line" data-startTime="244">browser if I do that. </span></p>

<p><span class="line" data-startTime="249">I'll do that anyway. </span> <span class="line" data-startTime="250">Let's see what happens. </span> <span class="line" data-startTime="253">Yeah. </span> <span class="line" data-startTime="255">OK, well, that was surprisingly </span><span class="line" data-startTime="255">fast. So 89k </span><span class="line" data-startTime="259">buffer, perfectly OK. </span> <span class="line" data-startTime="262">No problem. </span> <span class="line" data-startTime="266">You also have a Textures pane </span><span class="line" data-startTime="266">that shows you all the </span><span class="line" data-startTime="269">textures in your WebGL </span><span class="line" data-startTime="269">application, texture settings </span><span class="line" data-startTime="275">and what has been done </span><span class="line" data-startTime="275">to the texture. </span> <span class="line" data-startTime="280">And in the Textures pane, you </span><span class="line" data-startTime="280">can see all the textures in </span><span class="line" data-startTime="285">your WebGL program. </span> <span class="line" data-startTime="286">And you can see the texture </span><span class="line" data-startTime="286">parameters for each texture </span><span class="line" data-startTime="291">and the texture content. </span> <span class="line" data-startTime="293">Because this is a texture that </span><span class="line" data-startTime="293">was passed as a null texture &mdash; </span><span class="line" data-startTime="299">that is it is a GPU site texture </span><span class="line" data-startTime="299">that the WebGL program </span><span class="line" data-startTime="304">is editing in the GPU &mdash; </span><span class="line" data-startTime="306">we don't see anything in </span><span class="line" data-startTime="306">the texture contents. </span></p>

<p><span class="line" data-startTime="311">This is one problem with WebGL </span><span class="line" data-startTime="311">Inspector at the moment which </span><span class="line" data-startTime="316">I think could be fixed. </span> <span class="line" data-startTime="321">But if you have a normal </span><span class="line" data-startTime="321">texture, you should see the </span><span class="line" data-startTime="324">contents of the texture A-OK. </span> <span class="line" data-startTime="329">In the State panel, you get a </span><span class="line" data-startTime="329">state snapshot of the current </span><span class="line" data-startTime="334">WebGL context state. </span> <span class="line" data-startTime="336">It has all the blending and </span><span class="line" data-startTime="336">the blend colors, color </span><span class="line" data-startTime="342">values, maximum attributes </span><span class="line" data-startTime="342">and such like. </span> <span class="line" data-startTime="351">In the Timeline pane, you can </span><span class="line" data-startTime="351">see what's happening in your </span><span class="line" data-startTime="357">WebGL program. </span> <span class="line" data-startTime="359">The timeline view shows you what </span><span class="line" data-startTime="359">you are doing with WebGL. </span> <span class="line" data-startTime="364">So it shows you how much time </span><span class="line" data-startTime="364">it takes per frame to render </span><span class="line" data-startTime="369">your WebGL scene. </span> <span class="line" data-startTime="370">And it shows you how many </span><span class="line" data-startTime="370">textures you are allocating, </span><span class="line" data-startTime="373">how many programs you are </span><span class="line" data-startTime="373">using, and so on. </span> <span class="line" data-startTime="379">Now If we go the Trace panel &mdash; </span><span class="line" data-startTime="381">this is the first panel, but </span><span class="line" data-startTime="381">I'm taking the class. </span></p>

<p><span class="line" data-startTime="384">So the Trace panel is the last </span><span class="line" data-startTime="384">panel that I'm going to go to. </span> <span class="line" data-startTime="387">And when I click on the Capture </span><span class="line" data-startTime="387">button, what I get </span><span class="line" data-startTime="390">here is what happened </span><span class="line" data-startTime="390">during this frame. </span> <span class="line" data-startTime="397">Here's the image that was drawn, </span><span class="line" data-startTime="397">and then all the DL </span><span class="line" data-startTime="403">calls we did to draw </span><span class="line" data-startTime="403">that frame. </span> <span class="line" data-startTime="410">Very useful, very nice. </span> <span class="line" data-startTime="413">Let's move on. </span> <span class="line" data-startTime="414">So for Unit Testing GL, the Maps </span><span class="line" data-startTime="414">GL team here at Google </span><span class="line" data-startTime="421">built this little thing, </span><span class="line" data-startTime="421">glsl-unit, which is a unit </span><span class="line" data-startTime="425">testing framework for GLSL </span><span class="line" data-startTime="425">code in the WebGL. </span> <span class="line" data-startTime="431">And &mdash; </span><span class="line" data-startTime="432">testing frameworks that allows </span><span class="line" data-startTime="432">you to write and run Unit </span><span class="line" data-startTime="435">Tests for your WebGL </span><span class="line" data-startTime="435">GLSL code. </span></p>

<p><span class="line" data-startTime="439">GLSL units will run your test </span><span class="line" data-startTime="439">code on the graphics card and </span><span class="line" data-startTime="442">extract the results. </span> <span class="line" data-startTime="444">So it will be identical to the </span><span class="line" data-startTime="444">execution environment of your </span><span class="line" data-startTime="447">shader coding production. </span> <span class="line" data-startTime="450">And that is the great thing </span><span class="line" data-startTime="450">about GLSL units. </span> <span class="line" data-startTime="456">If you want to hear more about </span><span class="line" data-startTime="456">GLSL units and how the Maps </span><span class="line" data-startTime="459">team was developing WebGL, you </span><span class="line" data-startTime="459">can go to this YouTube talk </span><span class="line" data-startTime="467">from GTAC 2011. </span> <span class="line" data-startTime="470">It's Developing and </span><span class="line" data-startTime="470">Testing WebGL. </span> <span class="line" data-startTime="475">It's by Roy Williams, one </span><span class="line" data-startTime="475">of the MapsGL engineers. </span></p>

<p><span class="line" data-startTime="479">And GTAC stands for Google Test </span><span class="line" data-startTime="479">Automation Conference. </span> <span class="line" data-startTime="485">And this is a great talk for </span><span class="line" data-startTime="485">real-life WebGL use in a </span><span class="line" data-startTime="491">non-game setting. </span> <span class="line" data-startTime="493">So go there and check it out. </span> <span class="line" data-startTime="497">This is about all I have </span><span class="line" data-startTime="497">to say about WebGL </span><span class="line" data-startTime="501">debugging for now. </span> <span class="line" data-startTime="502">So thanks for watching </span><span class="line" data-startTime="502">and get hacking. </span></p>