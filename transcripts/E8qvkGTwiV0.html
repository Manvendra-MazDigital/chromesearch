<p class="speaker"><span class="line" data-starttime="9"><span class="speakerName">Paul Irish</span>: Welcome to The </span><span class="line" data-startTime="9">Breakpoint with Paul Irish and </span><span class="line" data-startTime="11">Addy Osmani. </span> <span class="line" data-startTime="12">Today we're gonna show you some </span><span class="line" data-startTime="12">cool stuff inside the </span><span class="line" data-startTime="14">DevTools, tell you a little </span><span class="line" data-startTime="14">bit about hardware </span><span class="line" data-startTime="17">acceleration, and hopefully </span><span class="line" data-startTime="17">teach you about some </span><span class="line" data-startTime="20">JavaScript language tooling that </span><span class="line" data-startTime="20">should really help your </span><span class="line" data-startTime="23">kind of team productivity </span><span class="line" data-startTime="23">and ability to </span><span class="line" data-startTime="25">maintain large products. </span> <span class="line" data-startTime="27">So first off, we're gonna kick </span><span class="line" data-startTime="27">off immediately with a demo. </span></p>

<p><span class="line" data-startTime="30">And if we go to my screen, I'm </span><span class="line" data-startTime="30">gonna show Wikipedia here. </span> <span class="line" data-startTime="33">So we have just a standard &mdash; </span><span class="line" data-startTime="35">this is the Wikipedia </span><span class="line" data-startTime="35">page for Wikipedia. </span> <span class="line" data-startTime="39">Now what I want to do is I want </span><span class="line" data-startTime="39">to look at how it loads. </span> <span class="line" data-startTime="45">Some people on the Chrome team </span><span class="line" data-startTime="45">were actually looking at this </span><span class="line" data-startTime="48">on the Nexus 7 tablet. </span> <span class="line" data-startTime="50">And it has a little bit of </span><span class="line" data-startTime="50">a weight as the page is </span><span class="line" data-startTime="55">[INAUDIBLE]. </span> <span class="line" data-startTime="55">So, actually if I just </span><span class="line" data-startTime="55">load the page &mdash; </span><span class="line" data-startTime="58">I'll get rid of the </span><span class="line" data-startTime="58">DevTools for now &mdash; </span><span class="line" data-startTime="60">and I'm moving my hands </span><span class="line" data-startTime="60">on the track pad </span><span class="line" data-startTime="64">to scroll it a bunch. </span> <span class="line" data-startTime="67">You can see it's &mdash; </span><span class="line" data-startTime="70">OK, I kind of missed </span><span class="line" data-startTime="70">my target. </span> <span class="line" data-startTime="71">But there's a good three second </span><span class="line" data-startTime="71">delay as the page is </span><span class="line" data-startTime="76">loading before it starts </span><span class="line" data-startTime="76">getting responsive. </span></p>

<p><span class="line" data-startTime="79">You can test this out </span><span class="line" data-startTime="79">yourself right now. </span> <span class="line" data-startTime="82">But what I'm gonna do is I'm </span><span class="line" data-startTime="82">gonna show that in the </span><span class="line" data-startTime="83">DevTools timeline. </span> <span class="line" data-startTime="85">So, let's hit Record. </span> <span class="line" data-startTime="88">And now I'm gonna go back </span><span class="line" data-startTime="88">and refresh the page. </span> <span class="line" data-startTime="94">And we're waiting </span><span class="line" data-startTime="94">for the spike. </span> <span class="line" data-startTime="97">There it is. </span> <span class="line" data-startTime="99">All right. </span> <span class="line" data-startTime="100">So right here, this </span><span class="line" data-startTime="100">big yellow spike. </span> <span class="line" data-startTime="102">So yellow is JavaScript inside </span><span class="line" data-startTime="102">the timeline here. </span> <span class="line" data-startTime="105">And if I scroll down a bit &mdash; </span><span class="line" data-startTime="110">if there's too much blue for </span><span class="line" data-startTime="110">you, you can always just </span><span class="line" data-startTime="112">uncheck the blue on the very, </span><span class="line" data-startTime="112">very bottom down here. </span> <span class="line" data-startTime="116">I'll do that for now. </span> <span class="line" data-startTime="120">And you see this guy here. </span> <span class="line" data-startTime="122">So this is a 3.5 second frame, </span><span class="line" data-startTime="122">3.5 seconds where the </span><span class="line" data-startTime="126">browser's not responsive </span><span class="line" data-startTime="126">to the user at all. </span> <span class="line" data-startTime="131">So, this is pretty </span><span class="line" data-startTime="131">interesting. </span></p>

<p><span class="line" data-startTime="133">So we have these three big </span><span class="line" data-startTime="133">yellow blocks where it looks </span><span class="line" data-startTime="137">like we're evaluating </span><span class="line" data-startTime="137">script over here. </span> <span class="line" data-startTime="140">Let's open them up. </span> <span class="line" data-startTime="143">And looks interesting. </span> <span class="line" data-startTime="145">So we have kind of this </span><span class="line" data-startTime="145">waterfall look where there's a </span><span class="line" data-startTime="149">few things going on. </span> <span class="line" data-startTime="151">And if you look over on the </span><span class="line" data-startTime="151">right-hand side, it looks like </span><span class="line" data-startTime="154">a lot of recalculate style, </span><span class="line" data-startTime="154">recalculate style. </span> <span class="line" data-startTime="157">Here we have recalculate </span><span class="line" data-startTime="157">style going back </span><span class="line" data-startTime="159">and forth with layouts. </span> <span class="line" data-startTime="160">So this is the situation called </span><span class="line" data-startTime="160">layout thrashing. </span> <span class="line" data-startTime="166">For right now, let's focus </span><span class="line" data-startTime="166">on this layout style &mdash; </span><span class="line" data-startTime="171">sorry, recalculate style. </span> <span class="line" data-startTime="172">So, the fact it's doing the same </span><span class="line" data-startTime="172">thing over and over again </span><span class="line" data-startTime="176">is usually an indication </span><span class="line" data-startTime="176">to you that </span><span class="line" data-startTime="177">something might be wrong. </span></p>

<p><span class="line" data-startTime="179">And we can find out what's </span><span class="line" data-startTime="179">going on here. </span> <span class="line" data-startTime="181">So if we just hover in this </span><span class="line" data-startTime="181">area, we get the tool tip. </span> <span class="line" data-startTime="184">And we get the actual call </span><span class="line" data-startTime="184">stack on why we're </span><span class="line" data-startTime="187">recalculating the style. </span> <span class="line" data-startTime="188">First, our layouts were </span><span class="line" data-startTime="188">invalidated at some point </span><span class="line" data-startTime="190">during the add embedded CSS. </span> <span class="line" data-startTime="192">And then our recalc was </span><span class="line" data-startTime="192">forced, again, in </span><span class="line" data-startTime="196">add embedded CSS. </span> <span class="line" data-startTime="198">OK. </span> <span class="line" data-startTime="198">Interesting. </span> <span class="line" data-startTime="199">So, if I click through, well, </span><span class="line" data-startTime="199">it's all minified, but we can </span><span class="line" data-startTime="204">address that. </span> <span class="line" data-startTime="204">So I'm gonna click the pretty </span><span class="line" data-startTime="204">print on the very bottom. </span> <span class="line" data-startTime="208">We pretty print. </span></p>

<p><span class="line" data-startTime="209">And just to make sure that we're </span><span class="line" data-startTime="209">looking at the right </span><span class="line" data-startTime="211">spot, we're gonna go back </span><span class="line" data-startTime="211">to timeline and </span><span class="line" data-startTime="213">click through again. </span> <span class="line" data-startTime="215">And here we go. </span> <span class="line" data-startTime="216">So we're looking at embedded </span><span class="line" data-startTime="216">CSS right here. </span> <span class="line" data-startTime="220">And it jumped me to this </span><span class="line" data-startTime="220">line actually. </span> <span class="line" data-startTime="222">So what add embedded CSS is </span><span class="line" data-startTime="222">doing is Wikipedia loads a </span><span class="line" data-startTime="228">bunch of its modules into the </span><span class="line" data-startTime="228">page kind of lazily as this </span><span class="line" data-startTime="233">page is loading, and then </span><span class="line" data-startTime="233">if there's any styles </span><span class="line" data-startTime="236">associated with it. </span> <span class="line" data-startTime="237">So they actually have like </span><span class="line" data-startTime="237">a little tool tip module. </span> <span class="line" data-startTime="239">And they load in jQuery </span><span class="line" data-startTime="239">UI for a widget </span><span class="line" data-startTime="241">farther down the page. </span> <span class="line" data-startTime="243">And then CSS needs to </span><span class="line" data-startTime="243">go into the page. </span></p>

<p><span class="line" data-startTime="245">And, in order to deal with a </span><span class="line" data-startTime="245">IE bug where you could only </span><span class="line" data-startTime="250">have up to, I think, 32 style </span><span class="line" data-startTime="250">sheets per page, they reuse an </span><span class="line" data-startTime="254">existing style element. </span> <span class="line" data-startTime="256">So it's an inline style element, </span><span class="line" data-startTime="256">and they just append </span><span class="line" data-startTime="258">more content into the </span><span class="line" data-startTime="258">bottom of it. </span> <span class="line" data-startTime="262">Which makes sense if you only </span><span class="line" data-startTime="262">have a maximum of 32 possible </span><span class="line" data-startTime="266">style sheets available to you. </span> <span class="line" data-startTime="268">But it doesn't make a lot </span><span class="line" data-startTime="268">of sense otherwise. </span> <span class="line" data-startTime="272">So here we have, basically, </span><span class="line" data-startTime="272">there's a few techniques for </span><span class="line" data-startTime="276">adding in new styles. </span> <span class="line" data-startTime="277">One is using stylesheet.csstext </span><span class="line" data-startTime="277">which is </span><span class="line" data-startTime="279">only supported, I </span><span class="line" data-startTime="279">think, by IE. </span> <span class="line" data-startTime="281">But that might have changed. </span></p>

<p><span class="line" data-startTime="283">And otherwise, we create a </span><span class="line" data-startTime="283">little text node, and we just </span><span class="line" data-startTime="286">inject it into a </span><span class="line" data-startTime="286">style element. </span> <span class="line" data-startTime="288">Basically the same thing. </span> <span class="line" data-startTime="289">But what these two techniques </span><span class="line" data-startTime="289">do is it just says to the </span><span class="line" data-startTime="293">browser, hey, you know all those </span><span class="line" data-startTime="293">styles that you were </span><span class="line" data-startTime="296">keeping tracking of and you knew </span><span class="line" data-startTime="296">the computed style of all </span><span class="line" data-startTime="299">the elements of the page, throw </span><span class="line" data-startTime="299">all that out because I </span><span class="line" data-startTime="303">just changed the world and </span><span class="line" data-startTime="303">you're gonna have to </span><span class="line" data-startTime="305">recalculate everything else. </span> <span class="line" data-startTime="307">And so this, if we look at the </span><span class="line" data-startTime="307">timeline, happens about 20 </span><span class="line" data-startTime="312">times or so as the </span><span class="line" data-startTime="312">page is loading. </span></p>

<p><span class="line" data-startTime="316">And so the browser is just doing </span><span class="line" data-startTime="316">all this work again and </span><span class="line" data-startTime="319">again and again, doing the </span><span class="line" data-startTime="319">same recalculation of the </span><span class="line" data-startTime="321">style with a very small little </span><span class="line" data-startTime="321">difference at the end. </span> <span class="line" data-startTime="325">And it turns out WebKit </span><span class="line" data-startTime="325">actually &mdash; </span><span class="line" data-startTime="327">we were digging into this </span><span class="line" data-startTime="327">and we looked through </span><span class="line" data-startTime="329">the source of WebKit. </span> <span class="line" data-startTime="331">WebKit actually has a fast path </span><span class="line" data-startTime="331">for if you're just adding </span><span class="line" data-startTime="334">a few new actual styles at </span><span class="line" data-startTime="334">the end of the document. </span> <span class="line" data-startTime="339">And it doesn't have to </span><span class="line" data-startTime="339">recalculate the world. </span> <span class="line" data-startTime="341">It can just kind of augment </span><span class="line" data-startTime="341">what it knows </span><span class="line" data-startTime="342">with the new styles. </span> <span class="line" data-startTime="344">And it's fast. </span> <span class="line" data-startTime="345">But here, we're clearly not </span><span class="line" data-startTime="345">hitting this fast path because </span><span class="line" data-startTime="348">every single recalculate is </span><span class="line" data-startTime="348">taking, wow, 130 milliseconds. </span> <span class="line" data-startTime="358">When a frame is 16.6 </span><span class="line" data-startTime="358">milliseconds, 130 milliseconds </span><span class="line" data-startTime="362">is a long, long time. </span></p>

<p><span class="line" data-startTime="367">So this is a bit of a problem. </span> <span class="line" data-startTime="369">But luckily, we've gotten in </span><span class="line" data-startTime="369">touch with some of the </span><span class="line" data-startTime="372">developers at Wikipedia and </span><span class="line" data-startTime="372">Wikimedia to adjust this. </span> <span class="line" data-startTime="377">And we've fixed it </span><span class="line" data-startTime="377">in two places. </span> <span class="line" data-startTime="380">So one is this recalculation </span><span class="line" data-startTime="380">of style. </span> <span class="line" data-startTime="383">Like I said, these come </span><span class="line" data-startTime="383">in from modules. </span> <span class="line" data-startTime="385">And so one of the approaches </span><span class="line" data-startTime="385">that we did is we just batch </span><span class="line" data-startTime="390">it all together, right. </span> <span class="line" data-startTime="390">We have new styles come in from </span><span class="line" data-startTime="390">seven different places. </span> <span class="line" data-startTime="394">Let's just smush them all </span><span class="line" data-startTime="394">together into one string and </span><span class="line" data-startTime="396">inject it at once. </span> <span class="line" data-startTime="400">And so then we can basically </span><span class="line" data-startTime="400">take these 20 recalculations </span><span class="line" data-startTime="403">of styles and bring it down </span><span class="line" data-startTime="403">to about five or so. </span></p>

<p><span class="line" data-startTime="406">So that's a really big win. </span> <span class="line" data-startTime="408">The second is we're not gonna </span><span class="line" data-startTime="408">continue to augment an </span><span class="line" data-startTime="411">existing style tag, instead </span><span class="line" data-startTime="411">we're going to create new </span><span class="line" data-startTime="415">ones, except in the </span><span class="line" data-startTime="415">case of IE. </span> <span class="line" data-startTime="419">IE 6 through 9, where that style </span><span class="line" data-startTime="419">sheet limit is still in </span><span class="line" data-startTime="422">force, we'll still continue </span><span class="line" data-startTime="422">to do this little trick. </span> <span class="line" data-startTime="425">Lastly, I wanted to show this </span><span class="line" data-startTime="425">kind of layout thrashing. </span> <span class="line" data-startTime="429">So, what we can see, actually, </span><span class="line" data-startTime="429">on a hover of the layout where </span><span class="line" data-startTime="434">we have the little icon &mdash; </span><span class="line" data-startTime="437">so the icon is there because a </span><span class="line" data-startTime="437">forced synchronous layout is a </span><span class="line" data-startTime="440">possible performance </span><span class="line" data-startTime="440">bottleneck. </span> <span class="line" data-startTime="444">And so what this </span><span class="line" data-startTime="444">means is that &mdash; </span><span class="line" data-startTime="446">so we see that the layout </span><span class="line" data-startTime="446">was invalidated because </span><span class="line" data-startTime="448">we added new stuff. </span></p>

<p><span class="line" data-startTime="449">But the layout was </span><span class="line" data-startTime="449">forced here. </span> <span class="line" data-startTime="452">Basically, browser needs to </span><span class="line" data-startTime="452">deliver what the geometry of </span><span class="line" data-startTime="454">the page is to where we </span><span class="line" data-startTime="454">are in this curCSS. </span> <span class="line" data-startTime="459">This is actually inside </span><span class="line" data-startTime="459">of jQuery. </span> <span class="line" data-startTime="461">So if we look down, it looks </span><span class="line" data-startTime="461">like our loader that is bring </span><span class="line" data-startTime="464">in these modules is </span><span class="line" data-startTime="464">doing some stuff. </span> <span class="line" data-startTime="467">It's now injecting some </span><span class="line" data-startTime="467">styles into the page. </span> <span class="line" data-startTime="470">And now we're going </span><span class="line" data-startTime="470">through jQuery. </span> <span class="line" data-startTime="472">And looks like we have to </span><span class="line" data-startTime="472">augment with our height. </span> <span class="line" data-startTime="475">And if I click in this curCSS, </span><span class="line" data-startTime="475">yes, I just used </span><span class="line" data-startTime="480">get computed style. </span> <span class="line" data-startTime="482">And we're about to </span><span class="line" data-startTime="482">figure out what </span><span class="line" data-startTime="485">the style is of something. </span></p>

<p><span class="line" data-startTime="486">So apparently, right inside </span><span class="line" data-startTime="486">here, we have to do something </span><span class="line" data-startTime="494">that looks like we're setting </span><span class="line" data-startTime="494">the width of the page or the </span><span class="line" data-startTime="497">height of an element. </span> <span class="line" data-startTime="500">And in order to do that in </span><span class="line" data-startTime="500">jQuery, it needs to use get </span><span class="line" data-startTime="503">computed style. </span> <span class="line" data-startTime="504">So basically, the browser </span><span class="line" data-startTime="504">says, stop everything. </span> <span class="line" data-startTime="509">Let me get this value. </span> <span class="line" data-startTime="510">OK. </span> <span class="line" data-startTime="511">Here you go. </span> <span class="line" data-startTime="512">And then immediately after that, </span><span class="line" data-startTime="512">we're gonna recalculate </span><span class="line" data-startTime="514">all the styles again and </span><span class="line" data-startTime="514">again and again. </span></p>

<p><span class="line" data-startTime="516">So there's a few ways </span><span class="line" data-startTime="516">to address this. </span> <span class="line" data-startTime="520">In this case you can get all </span><span class="line" data-startTime="520">your truth out of the DOMs. </span> <span class="line" data-startTime="524">You need to get computed </span><span class="line" data-startTime="524">style. </span> <span class="line" data-startTime="526">You need to get an offset </span><span class="line" data-startTime="526">top, et cetera. </span> <span class="line" data-startTime="528">Do those all together, and then </span><span class="line" data-startTime="528">make changes to what the </span><span class="line" data-startTime="533">styles of the page should be. </span> <span class="line" data-startTime="536">That's probably the best </span><span class="line" data-startTime="536">way to handle this. </span> <span class="line" data-startTime="537">When you see a pattern going </span><span class="line" data-startTime="537">back and forth like this, you </span><span class="line" data-startTime="541">know that it could be better. </span> <span class="line" data-startTime="543">So. </span> <span class="line" data-startTime="544">Anyways, the good news here is </span><span class="line" data-startTime="544">every page on Wikipedia was </span><span class="line" data-startTime="548">slow before. </span> <span class="line" data-startTime="549">And the fix actually should </span><span class="line" data-startTime="549">be rolling out </span><span class="line" data-startTime="551">within a week or so. </span></p>

<p><span class="line" data-startTime="553">And so you should be seeing a </span><span class="line" data-startTime="553">benefit and be able to scroll </span><span class="line" data-startTime="556">immediately on both desktop and </span><span class="line" data-startTime="556">on tablet immediately upon </span><span class="line" data-startTime="562">loading the page, which I'm </span><span class="line" data-startTime="562">real excited about. </span> <span class="line" data-startTime="565">So Addy, how's it going? </span></p>

<p class="speaker"><span class="line" data-starttime="567"><span class="speakerName">Addy Osmani</span>: Really awesome. </span> <span class="line" data-startTime="567">So, I'm gonna be talking </span><span class="line" data-startTime="567">about GPU acceleration. </span> <span class="line" data-startTime="571">Now, traditionally, browsers </span><span class="line" data-startTime="571">have relied quite heavily on </span><span class="line" data-startTime="573">the CPU for rendering pages. </span> <span class="line" data-startTime="575">And it's only in the last few </span><span class="line" data-startTime="575">years that we've realized that </span><span class="line" data-startTime="578">involving the GPU in compositing </span><span class="line" data-startTime="578">those pages can </span><span class="line" data-startTime="581">yield us some really nice </span><span class="line" data-startTime="581">performance benefits. </span> <span class="line" data-startTime="584">In Chrome, we've actually for </span><span class="line" data-startTime="584">a while now had this concept </span><span class="line" data-startTime="586">of a composite layer for </span><span class="line" data-startTime="586">minimizing repaints and </span><span class="line" data-startTime="589">basically using GPU </span><span class="line" data-startTime="589">acceleration. </span> <span class="line" data-startTime="592">And the idea is if you're </span><span class="line" data-startTime="592">using something like </span><span class="line" data-startTime="595">Translate3d with a WebKit </span><span class="line" data-startTime="595">transform, that'll get </span><span class="line" data-startTime="598">promoted to a composition layer </span><span class="line" data-startTime="598">before it gets animated. </span> <span class="line" data-startTime="601">Now, GPU acceleration of your </span><span class="line" data-startTime="601">DOM elements has a number of </span><span class="line" data-startTime="605">different benefits. </span> <span class="line" data-startTime="606">It's a little bit more efficient </span><span class="line" data-startTime="606">to draw things to </span><span class="line" data-startTime="609">the screen. </span> <span class="line" data-startTime="610">And you avoid issues like </span><span class="line" data-startTime="610">hopping over really large </span><span class="line" data-startTime="612">amounts of data from the </span><span class="line" data-startTime="612">video to system memory. </span> <span class="line" data-startTime="615">So I'm actually gonna show you </span><span class="line" data-startTime="615">an example of a site that's </span><span class="line" data-startTime="617">taking advantage of </span><span class="line" data-startTime="617">GPU acceleration. </span> <span class="line" data-startTime="620">And it's this nice </span><span class="line" data-startTime="620">demo by David </span><span class="line" data-startTime="621">DeSandro called Undulate. </span></p>

<p><span class="line" data-startTime="623">So the idea is I move my cursor </span><span class="line" data-startTime="623">around and I get this </span><span class="line" data-startTime="626">really nice fluid animation. </span> <span class="line" data-startTime="628">If you open up your DevTools </span><span class="line" data-startTime="628">and you go to Settings, </span><span class="line" data-startTime="631">there's actually a really nice </span><span class="line" data-startTime="631">feature the gives you insights </span><span class="line" data-startTime="634">into what DOM elements are being </span><span class="line" data-startTime="634">manipulated at a GPU </span><span class="line" data-startTime="636">level called Show Composited </span><span class="line" data-startTime="636">Layer Borders under Rendering. </span> <span class="line" data-startTime="640">So I go and I enable Show </span><span class="line" data-startTime="640">Composited Layer Borders. </span> <span class="line" data-startTime="644">Now what you can now see is </span><span class="line" data-startTime="644">around each of the circles on </span><span class="line" data-startTime="646">screen, there's a little golden </span><span class="line" data-startTime="646">border indicating that </span><span class="line" data-startTime="649">that element is being </span><span class="line" data-startTime="649">manipulated at a GPU level, or </span><span class="line" data-startTime="652">that it's using hardware </span><span class="line" data-startTime="652">compositing. </span> <span class="line" data-startTime="654">Now that's really awesome. </span> <span class="line" data-startTime="656">Just to confirm again, remember </span><span class="line" data-startTime="656">I was talking about </span><span class="line" data-startTime="658">translate3d with a WebKit </span><span class="line" data-startTime="658">transform earlier, and that's </span><span class="line" data-startTime="661">basically what they're </span><span class="line" data-startTime="661">using here. </span></p>

<p><span class="line" data-startTime="662">So I've just shown </span><span class="line" data-startTime="662">you Undulate. </span> <span class="line" data-startTime="664">And the next example I'm gonna </span><span class="line" data-startTime="664">show you is Isotope, which is </span><span class="line" data-startTime="666">another plug-in by </span><span class="line" data-startTime="666">David DeSandro. </span> <span class="line" data-startTime="669">Now, if I go into my DevTools </span><span class="line" data-startTime="669">and I enable Show Composite </span><span class="line" data-startTime="672">Layer Borders once again, what </span><span class="line" data-startTime="672">you'll notice is that all of </span><span class="line" data-startTime="676">these elements, they're taking </span><span class="line" data-startTime="676">advantage of GPU acceleration, </span><span class="line" data-startTime="679">every single one of these. </span> <span class="line" data-startTime="681">And that's helping </span><span class="line" data-startTime="681">in this case. </span> <span class="line" data-startTime="683">This is actually using, once </span><span class="line" data-startTime="683">again, WebKit transform with </span><span class="line" data-startTime="686">translate3d. </span> <span class="line" data-startTime="687">And it's doing it properly. </span> <span class="line" data-startTime="688">Another thing you may have come </span><span class="line" data-startTime="688">across for the past few </span><span class="line" data-startTime="690">years is something called </span><span class="line" data-startTime="690">a null transform hack. </span></p>

<p><span class="line" data-startTime="693">Now the null transfer hack </span><span class="line" data-startTime="693">basically allows you to force </span><span class="line" data-startTime="696">GPU acceleration of a DOM </span><span class="line" data-startTime="696">element, meaning it's gonna </span><span class="line" data-startTime="699">get promoted to its own </span><span class="line" data-startTime="699">composite layer. </span> <span class="line" data-startTime="702">Now, a few years ago this hack </span><span class="line" data-startTime="702">was a lot more relevant. </span> <span class="line" data-startTime="704">It basically gave you some great </span><span class="line" data-startTime="704">mileage in your page </span><span class="line" data-startTime="707">whenever you found </span><span class="line" data-startTime="707">that it was slow. </span> <span class="line" data-startTime="710">And it played its part. </span> <span class="line" data-startTime="712">But Chrome has been getting </span><span class="line" data-startTime="712">much better at handling </span><span class="line" data-startTime="715">compositing in the background </span><span class="line" data-startTime="715">for you so that you don't have </span><span class="line" data-startTime="717">to use hacks like these. </span></p>

<p><span class="line" data-startTime="719">However, there are gonna be </span><span class="line" data-startTime="719">cases where you might get a </span><span class="line" data-startTime="721">little bit of mileage </span><span class="line" data-startTime="721">out of it. </span> <span class="line" data-startTime="723">Be careful when you're </span><span class="line" data-startTime="723">using it. </span> <span class="line" data-startTime="724">The only case where I suggest </span><span class="line" data-startTime="724">actually using translateZ is </span><span class="line" data-startTime="728">where you have a measurably </span><span class="line" data-startTime="728">high paint </span><span class="line" data-startTime="730">cost on a DOM element. </span> <span class="line" data-startTime="731">So if you have a measurably high </span><span class="line" data-startTime="731">paint cost, you've used </span><span class="line" data-startTime="733">timeline, you've used our other </span><span class="line" data-startTime="733">tools to figure out if </span><span class="line" data-startTime="736">there's a high paint cost on a </span><span class="line" data-startTime="736">DOM element, then maybe tryout </span><span class="line" data-startTime="740">the translateZ hack and see if </span><span class="line" data-startTime="740">you get some mileage from it. </span> <span class="line" data-startTime="742">One other demo that took </span><span class="line" data-startTime="742">advantage of the translateZ </span><span class="line" data-startTime="745">hack is Google Space </span><span class="line" data-startTime="745">by Mr. [? Dube. ?] </span><span class="line" data-startTime="747">Now, what he found was that he </span><span class="line" data-startTime="747">was animating this stuff in </span><span class="line" data-startTime="750">his page, and it was just going </span><span class="line" data-startTime="750">really, really slow. </span> <span class="line" data-startTime="753">He wasn't really sure why. </span></p>

<p><span class="line" data-startTime="754">And he took advantage of the </span><span class="line" data-startTime="754">null transform hack. </span> <span class="line" data-startTime="757">And basically, I've got </span><span class="line" data-startTime="757">composite layer borders on at </span><span class="line" data-startTime="759">the moment, and look </span><span class="line" data-startTime="759">what happens. </span> <span class="line" data-startTime="762">It's now animating a little </span><span class="line" data-startTime="762">bit more smoothly. </span> <span class="line" data-startTime="765">You can see the composite layer </span><span class="line" data-startTime="765">borders are on each of </span><span class="line" data-startTime="767">our elements. </span> <span class="line" data-startTime="768">And it's a little </span><span class="line" data-startTime="768">bit more smooth. </span> <span class="line" data-startTime="770">It's a little bit more buttery, </span><span class="line" data-startTime="770">and that looks good. </span> <span class="line" data-startTime="773">You have to be really, really </span><span class="line" data-startTime="773">careful when you're using the </span><span class="line" data-startTime="775">null transfer hack, however, </span><span class="line" data-startTime="775">because if you go and you </span><span class="line" data-startTime="778">apply it to every single element </span><span class="line" data-startTime="778">in your page, you're </span><span class="line" data-startTime="780">basically gonna offload a </span><span class="line" data-startTime="780">whole lot to the GPU. </span> <span class="line" data-startTime="783">You have a limited amount of </span><span class="line" data-startTime="783">VRAM on desktop, on mobile. </span> <span class="line" data-startTime="786">And you just want to make sure </span><span class="line" data-startTime="786">that you're not bursting that. </span></p>

<p><span class="line" data-startTime="789">It's less likely that it's gonna </span><span class="line" data-startTime="789">happen on desktop, a lot </span><span class="line" data-startTime="791">more mobile. </span> <span class="line" data-startTime="793">And I'm actually </span><span class="line" data-startTime="793">gonna show you. </span> <span class="line" data-startTime="795">So, The Guardian is a website </span><span class="line" data-startTime="795">that performs sort of OK. </span> <span class="line" data-startTime="798">So this is like a newspaper </span><span class="line" data-startTime="798">in the UK. </span> <span class="line" data-startTime="801">And this site performs sort </span><span class="line" data-startTime="801">of OK on desktop. </span> <span class="line" data-startTime="804">If I go back into sort of my </span><span class="line" data-startTime="804">DevTools, I've got Show </span><span class="line" data-startTime="809">Composite Layer Borders on. </span> <span class="line" data-startTime="811">And I go and I add basically a </span><span class="line" data-startTime="811">null transform to everything </span><span class="line" data-startTime="815">on the page &mdash; </span><span class="line" data-startTime="817">so WebKit transform </span><span class="line" data-startTime="817">translateZ(0). </span></p>

<p><span class="line" data-startTime="823">What you'll now see is that </span><span class="line" data-startTime="823">there is a composite layer </span><span class="line" data-startTime="825">border being drawn around </span><span class="line" data-startTime="825">everything 'cause it's all </span><span class="line" data-startTime="827">being promoted. </span> <span class="line" data-startTime="828">And this page is actually gonna </span><span class="line" data-startTime="828">run a little bit more </span><span class="line" data-startTime="830">slowly than it was before </span><span class="line" data-startTime="830">because absolutely everything </span><span class="line" data-startTime="833">is being offloaded to the GPU. </span> <span class="line" data-startTime="835">That's not a good thing. </span> <span class="line" data-startTime="837">Now let's take a look at what </span><span class="line" data-startTime="837">this does on mobile. </span> <span class="line" data-startTime="839">So, I've got my Android </span><span class="line" data-startTime="839">phone with me. </span> <span class="line" data-startTime="842">I've got Chrome beta </span><span class="line" data-startTime="842">currently running. </span> <span class="line" data-startTime="847">So this is the experience. </span> <span class="line" data-startTime="849">So let me show you </span><span class="line" data-startTime="849">what I've got. </span> <span class="line" data-startTime="850">This is what the experience </span><span class="line" data-startTime="850">looks like without me enabling </span><span class="line" data-startTime="854">the null transform hack </span><span class="line" data-startTime="854">on absolutely every </span><span class="line" data-startTime="856">element on this page. </span></p>

<p><span class="line" data-startTime="857">So I'm scrolling through. </span> <span class="line" data-startTime="858">Their mobile experience is </span><span class="line" data-startTime="858">actually pretty decent. </span> <span class="line" data-startTime="860">You see I'm able to scroll </span><span class="line" data-startTime="860">through the entire page. </span> <span class="line" data-startTime="862">And it's not too bad </span><span class="line" data-startTime="862">to be honest. </span> <span class="line" data-startTime="865">Let's go in, and let's see what </span><span class="line" data-startTime="865">happens if I actually </span><span class="line" data-startTime="868">enable this hack. </span> <span class="line" data-startTime="869">So, WebKit transform </span><span class="line" data-startTime="869">translateZ(0). </span> <span class="line" data-startTime="880">And now watch. </span> <span class="line" data-startTime="887">It actually takes a </span><span class="line" data-startTime="887">while to scroll. </span> <span class="line" data-startTime="889">I know it's, again, subtle, </span><span class="line" data-startTime="889">but it's actually taking a </span><span class="line" data-startTime="891">while to scroll through </span><span class="line" data-startTime="891">this page. </span> <span class="line" data-startTime="893">It is not as smooth </span><span class="line" data-startTime="893">as it was before. </span> <span class="line" data-startTime="898">And so you need to be very </span><span class="line" data-startTime="898">careful whenever you're using </span><span class="line" data-startTime="900">the translateZ hack. </span> <span class="line" data-startTime="902">You don't want to </span><span class="line" data-startTime="902">blow your VRAM. </span> <span class="line" data-startTime="903">You don't want to put too much </span><span class="line" data-startTime="903">pressure on your GPU. </span></p>

<p><span class="line" data-startTime="906">Now, for people that are </span><span class="line" data-startTime="906">wondering why isn't Chrome </span><span class="line" data-startTime="909">trying to do more of this stuff </span><span class="line" data-startTime="909">automatically for me? </span><span class="line" data-startTime="912">Why are people still needing to </span><span class="line" data-startTime="912">use these translateZ hacks? </span><span class="line" data-startTime="915">So if you go to Chrome Flags, </span><span class="line" data-startTime="915">you can actually take a look </span><span class="line" data-startTime="917">at some of the work we've been </span><span class="line" data-startTime="917">doing to further compositing. </span> <span class="line" data-startTime="920">And there are actually two </span><span class="line" data-startTime="920">experiments in particular that </span><span class="line" data-startTime="922">you can go and you </span><span class="line" data-startTime="922">can play with. </span> <span class="line" data-startTime="924">You can enable GPU compositing </span><span class="line" data-startTime="924">on basically all of the pages </span><span class="line" data-startTime="927">that you browse on. </span> <span class="line" data-startTime="928">And you can actually also enable </span><span class="line" data-startTime="928">threaded compositing </span><span class="line" data-startTime="931">which gives you an additional </span><span class="line" data-startTime="931">thread for web page </span><span class="line" data-startTime="933">compositing. </span> <span class="line" data-startTime="934">And it just gives you things </span><span class="line" data-startTime="934">like smooth scrolling, even </span><span class="line" data-startTime="937">when the main thread, which is </span><span class="line" data-startTime="937">where a lot of the action </span><span class="line" data-startTime="939">happens, is unresponsive. </span></p>

<p><span class="line" data-startTime="941">So go and play with </span><span class="line" data-startTime="941">those things. </span> <span class="line" data-startTime="942">We're currently still </span><span class="line" data-startTime="942">benchmarking performance of </span><span class="line" data-startTime="945">compositing across all pages. </span> <span class="line" data-startTime="946">But in most cases, it's actually </span><span class="line" data-startTime="946">gonna perform pretty </span><span class="line" data-startTime="948">well, at least as good as using </span><span class="line" data-startTime="948">the translateZ hack </span><span class="line" data-startTime="952">across all these elements </span><span class="line" data-startTime="952">on your page. </span> <span class="line" data-startTime="954">So the takeaway from this is </span><span class="line" data-startTime="954">be very careful when you're </span><span class="line" data-startTime="958">using null transfer hacks </span><span class="line" data-startTime="958">in your pages. </span> <span class="line" data-startTime="960">Make sure that if you're </span><span class="line" data-startTime="960">applying them that you have a </span><span class="line" data-startTime="963">measurably high paint cost on </span><span class="line" data-startTime="963">those DOM elements where you </span><span class="line" data-startTime="966">are applying them. </span> <span class="line" data-startTime="967">And just be careful when </span><span class="line" data-startTime="967">using these things. </span> <span class="line" data-startTime="968">Make sure to measure. </span></p>

<p><span class="line" data-startTime="969">Measurement is the most </span><span class="line" data-startTime="969">important thing when you're </span><span class="line" data-startTime="971">doing any sort of performance </span><span class="line" data-startTime="971">optimization on your pages. </span> <span class="line" data-startTime="974">So, yeah. </span> <span class="line" data-startTime="975">That's it for me. </span></p>

<p class="speaker"><span class="line" data-starttime="976"><span class="speakerName">Paul Irish</span>: I was just gonna add </span><span class="line" data-startTime="976">on a few things to that. </span> <span class="line" data-startTime="978">There's been a few updates in </span><span class="line" data-startTime="978">kind of the compositing </span><span class="line" data-startTime="984">situation in Chrome. </span> <span class="line" data-startTime="986">So, for any composited layers, </span><span class="line" data-startTime="986">if you've taken like a DIV </span><span class="line" data-startTime="994">before and rotated it 45 degrees </span><span class="line" data-startTime="994">and you had text </span><span class="line" data-startTime="998">inside there, you might have </span><span class="line" data-startTime="998">noticed that the text quality </span><span class="line" data-startTime="1000">is not so sharp. </span> <span class="line" data-startTime="1002">So, it'll now look great as </span><span class="line" data-startTime="1002">long as that DIV has a </span><span class="line" data-startTime="1005">background. </span> <span class="line" data-startTime="1006">So that's a somewhat recent </span><span class="line" data-startTime="1006">change, probably about two </span><span class="line" data-startTime="1009">weeks ago or so. </span></p>

<p><span class="line" data-startTime="1011">So it's opaque composited layers </span><span class="line" data-startTime="1011">get anti-aliasing. </span> <span class="line" data-startTime="1015">The other is that fixed position </span><span class="line" data-startTime="1015">layers are now </span><span class="line" data-startTime="1020">composited for you automatically </span><span class="line" data-startTime="1020">in a few </span><span class="line" data-startTime="1023">situations. </span> <span class="line" data-startTime="1024">One, if you're on Android, </span><span class="line" data-startTime="1024">then it's done for you. </span> <span class="line" data-startTime="1030">On desktop right now, it's in </span><span class="line" data-startTime="1030">many cases you may have to use </span><span class="line" data-startTime="1036">something like the null </span><span class="line" data-startTime="1036">transform if it's a situation </span><span class="line" data-startTime="1038">where it really has benefit. </span> <span class="line" data-startTime="1041">In high DPI situations. </span> <span class="line" data-startTime="1043">So you're on your retina machine </span><span class="line" data-startTime="1043">or on another laptop </span><span class="line" data-startTime="1047">with a really high resolution, </span><span class="line" data-startTime="1047">a Chrome Book pixel even, any </span><span class="line" data-startTime="1054">fixed position layers are </span><span class="line" data-startTime="1054">now composited as well. </span> <span class="line" data-startTime="1057">So you're gonna see the same </span><span class="line" data-startTime="1057">kind of performance increase. </span> <span class="line" data-startTime="1060">So it's a really good thing. </span></p>

<p><span class="line" data-startTime="1061">And this will be coming to </span><span class="line" data-startTime="1061">situations where it's not high </span><span class="line" data-startTime="1066">DPI very soon once we can get </span><span class="line" data-startTime="1066">text anti-aliasing on these </span><span class="line" data-startTime="1074">layers as well. </span> <span class="line" data-startTime="1075">So, we want to make sure the </span><span class="line" data-startTime="1075">type looks good before we flip </span><span class="line" data-startTime="1080">the switch and give the </span><span class="line" data-startTime="1080">compositing performance boost </span><span class="line" data-startTime="1084">to everyone. </span> <span class="line" data-startTime="1085">So, that's kind of the update. </span> <span class="line" data-startTime="1088">Lots of things have </span><span class="line" data-startTime="1088">been changing </span><span class="line" data-startTime="1089">in this area recently. </span> <span class="line" data-startTime="1090">So, there we go. </span> <span class="line" data-startTime="1092">Lastly, I wanted to show </span><span class="line" data-startTime="1092">just a few slides. </span> <span class="line" data-startTime="1097">And this is some great stuff </span><span class="line" data-startTime="1097">that a lot of this comes from </span><span class="line" data-startTime="1103">work and research done </span><span class="line" data-startTime="1103">by Ariya Hidayat. </span></p>

<p><span class="line" data-startTime="1106">And Ariya created Esprima, </span><span class="line" data-startTime="1106">also created PhantomJS. </span> <span class="line" data-startTime="1110">He's a platform architect </span><span class="line" data-startTime="1110">over at Sencha. </span> <span class="line" data-startTime="1114">But there's a lot of great </span><span class="line" data-startTime="1114">tools now available for </span><span class="line" data-startTime="1119">JavaScript language authoring </span><span class="line" data-startTime="1119">and editing, debugging, </span><span class="line" data-startTime="1124">continuous integration. </span> <span class="line" data-startTime="1125">And I want to show </span><span class="line" data-startTime="1125">a few of them. </span> <span class="line" data-startTime="1126">And the first thing that I want </span><span class="line" data-startTime="1126">to say is that a lot of </span><span class="line" data-startTime="1130">teams set up style guides, </span><span class="line" data-startTime="1130">especially for JavaScript. </span> <span class="line" data-startTime="1134">And I think this is </span><span class="line" data-startTime="1134">a great thing. </span> <span class="line" data-startTime="1135">And I think that things like </span><span class="line" data-startTime="1135">JSHint have really allowed us </span><span class="line" data-startTime="1138">to have maintainable rules that </span><span class="line" data-startTime="1138">we can kind of agree on </span><span class="line" data-startTime="1142">and say for this project, </span><span class="line" data-startTime="1142">this makes sense. </span> <span class="line" data-startTime="1146">And so, the most important thing </span><span class="line" data-startTime="1146">I think is that every </span><span class="line" data-startTime="1150">code style rule that </span><span class="line" data-startTime="1150">you have, it should </span><span class="line" data-startTime="1152">be backed by tooling. </span> <span class="line" data-startTime="1153">So you should not say something </span><span class="line" data-startTime="1153">about your use of </span><span class="line" data-startTime="1157">commas or spaces around </span><span class="line" data-startTime="1157">assignments that you cannot </span><span class="line" data-startTime="1161">enforce with tooling. </span> <span class="line" data-startTime="1162">Because it's a waste of our </span><span class="line" data-startTime="1162">time, like human's time, to be </span><span class="line" data-startTime="1166">worrying about style inside </span><span class="line" data-startTime="1166">our JavaScript. </span> <span class="line" data-startTime="1170">And I see this in open source </span><span class="line" data-startTime="1170">or poll request. </span></p>

<p><span class="line" data-startTime="1172">And the first comments will be </span><span class="line" data-startTime="1172">like, yeah, well, put some </span><span class="line" data-startTime="1175">more white space here. </span> <span class="line" data-startTime="1177">It's not a good use </span><span class="line" data-startTime="1177">of our time. </span> <span class="line" data-startTime="1179">So, I'm gonna show a few pieces </span><span class="line" data-startTime="1179">of tooling that exist </span><span class="line" data-startTime="1183">for this sort of thing and other </span><span class="line" data-startTime="1183">pieces of JavaScript </span><span class="line" data-startTime="1186">authorizing. </span> <span class="line" data-startTime="1188">First, a little bit ago, I </span><span class="line" data-startTime="1188">think back when I was in </span><span class="line" data-startTime="1192">London, Addy and I, and we had </span><span class="line" data-startTime="1192">on Sindre Sorhus, and he </span><span class="line" data-startTime="1197">talked a little bit about a </span><span class="line" data-startTime="1197">few of the project level </span><span class="line" data-startTime="1201">collaboration techniques. </span> <span class="line" data-startTime="1202">So one is setting up a </span><span class="line" data-startTime="1202">gitattributes file where you </span><span class="line" data-startTime="1205">specify * text=auto. </span> <span class="line" data-startTime="1207">Make sure that your line </span><span class="line" data-startTime="1207">endings are good. </span> <span class="line" data-startTime="1209">Do it. </span> <span class="line" data-startTime="1209">That's great. </span> <span class="line" data-startTime="1211">EditorConfig has gotten new </span><span class="line" data-startTime="1211">enhancements since we talked </span><span class="line" data-startTime="1215">about it last. </span></p>

<p><span class="line" data-startTime="1215">So it used to only define </span><span class="line" data-startTime="1215">how end of lines are </span><span class="line" data-startTime="1221">done, indent style. </span> <span class="line" data-startTime="1223">It now covers things like a </span><span class="line" data-startTime="1223">extra line at the end of the </span><span class="line" data-startTime="1226">file, a few other things. </span> <span class="line" data-startTime="1228">They're all really good, the </span><span class="line" data-startTime="1228">kinds of defaults that you go </span><span class="line" data-startTime="1230">up into your editor to make </span><span class="line" data-startTime="1230">sure that you apply. </span> <span class="line" data-startTime="1234">No trailing white space. </span> <span class="line" data-startTime="1236">Things like that. </span> <span class="line" data-startTime="1238">So, that's great for all code, </span><span class="line" data-startTime="1238">not just JavaScript. </span> <span class="line" data-startTime="1242">And really makes just </span><span class="line" data-startTime="1242">collaboration easier. </span> <span class="line" data-startTime="1246">Rules can be set per project. </span> <span class="line" data-startTime="1249">JSHint, which I just </span><span class="line" data-startTime="1249">mentioned. </span> <span class="line" data-startTime="1251">In a jshintrc file you </span><span class="line" data-startTime="1251">can define your </span><span class="line" data-startTime="1253">rules for the project. </span> <span class="line" data-startTime="1255">And every Sublime Text </span><span class="line" data-startTime="1255">and the VIM plug-ins </span><span class="line" data-startTime="1259">all honor this file. </span> <span class="line" data-startTime="1261">Grunt, as well, honors this </span><span class="line" data-startTime="1261">file if it's placed in the </span><span class="line" data-startTime="1263">root of your project. </span></p>

<p><span class="line" data-startTime="1265">So that even if a project </span><span class="line" data-startTime="1265">differs from another one, you </span><span class="line" data-startTime="1269">can define what your JSHint </span><span class="line" data-startTime="1269">settings are, and everyone </span><span class="line" data-startTime="1273">that's collaborating there </span><span class="line" data-startTime="1273">will honor them. </span> <span class="line" data-startTime="1276">It's really good. </span> <span class="line" data-startTime="1277">So a few more things that are </span><span class="line" data-startTime="1277">available for JavaScript </span><span class="line" data-startTime="1280">language tooling. </span> <span class="line" data-startTime="1281">So this is a use of a precommit </span><span class="line" data-startTime="1281">hook inside Git that </span><span class="line" data-startTime="1286">will validate that your code </span><span class="line" data-startTime="1286">is syntactically correct. </span> <span class="line" data-startTime="1290">So, we're using a binary </span><span class="line" data-startTime="1290">called esvalidate. </span></p>

<p><span class="line" data-startTime="1292">It uses Esprima, that's </span><span class="line" data-startTime="1292">a node binary. </span> <span class="line" data-startTime="1297">And basically, this just makes </span><span class="line" data-startTime="1297">sure that you cannot commit to </span><span class="line" data-startTime="1301">Git unless esvalidate </span><span class="line" data-startTime="1301">passes it. </span> <span class="line" data-startTime="1304">So this is not a linter. </span> <span class="line" data-startTime="1305">This is just a validator. </span> <span class="line" data-startTime="1308">So it's just like everything </span><span class="line" data-startTime="1308">is syntactically correct. </span> <span class="line" data-startTime="1312">It matches ECMAScript </span><span class="line" data-startTime="1312">standards. </span> <span class="line" data-startTime="1316">Plato is a fantastic project. </span> <span class="line" data-startTime="1317">So this is a visualization of </span><span class="line" data-startTime="1317">Plato data, but it exists is a </span><span class="line" data-startTime="1322">node binary as well. </span> <span class="line" data-startTime="1324">Gives some ideas around </span><span class="line" data-startTime="1324">maintainability index, an </span><span class="line" data-startTime="1328">estimated number of bugs, </span><span class="line" data-startTime="1328">which is a kind of </span><span class="line" data-startTime="1331">controversial idea. </span> <span class="line" data-startTime="1332">But it has a lot to do with the </span><span class="line" data-startTime="1332">cyclomatic complexity &mdash; </span><span class="line" data-startTime="1335">whatever that means &mdash; of </span><span class="line" data-startTime="1335">code, lint errors. </span></p>

<p><span class="line" data-startTime="1339">And so you can kind of </span><span class="line" data-startTime="1339">get a sense for &mdash; </span><span class="line" data-startTime="1342">one of the things I think is </span><span class="line" data-startTime="1342">really interesting is taking </span><span class="line" data-startTime="1345">something like the </span><span class="line" data-startTime="1345">maintainability index and </span><span class="line" data-startTime="1348">charting that over time and </span><span class="line" data-startTime="1348">kind of a continuous </span><span class="line" data-startTime="1350">integration thing. </span> <span class="line" data-startTime="1350">So being able to see that over </span><span class="line" data-startTime="1350">the life of a project and to </span><span class="line" data-startTime="1353">know that when some big new </span><span class="line" data-startTime="1353">feature landed in, the code </span><span class="line" data-startTime="1359">inside the project got </span><span class="line" data-startTime="1359">significantly more complex and </span><span class="line" data-startTime="1362">hard to maintain. </span> <span class="line" data-startTime="1363">I think that's a fantastic </span><span class="line" data-startTime="1363">thing to kind of </span><span class="line" data-startTime="1365">visualize for the team. </span> <span class="line" data-startTime="1367">This is a Boolean trap finder. </span> <span class="line" data-startTime="1369">So, Boolean traps is an API </span><span class="line" data-startTime="1369">design flaw where you use a </span><span class="line" data-startTime="1375">Boolean in your API </span><span class="line" data-startTime="1375">to define that. </span></p>

<p><span class="line" data-startTime="1379">So in this top one, this is </span><span class="line" data-startTime="1379">a real-world example. </span> <span class="line" data-startTime="1384">New slider false actually means </span><span class="line" data-startTime="1384">that it should be a </span><span class="line" data-startTime="1389">vertical slider and not </span><span class="line" data-startTime="1389">a horizontal slider. </span> <span class="line" data-startTime="1391">Bad API design. </span> <span class="line" data-startTime="1393">This could be much better. </span> <span class="line" data-startTime="1394">You pass in an object that says </span><span class="line" data-startTime="1394">vertical equals true. </span> <span class="line" data-startTime="1399">And we can just detect all these </span><span class="line" data-startTime="1399">across the project and </span><span class="line" data-startTime="1403">make sure that we aren't doing </span><span class="line" data-startTime="1403">something like this. </span> <span class="line" data-startTime="1408">So, polluting variables. </span> <span class="line" data-startTime="1409">So, if we have a variable that </span><span class="line" data-startTime="1409">we don't define in at least a </span><span class="line" data-startTime="1411">global, we should be notified </span><span class="line" data-startTime="1411">immediately. </span></p>

<p><span class="line" data-startTime="1413">JSHint captures much of this, </span><span class="line" data-startTime="1413">but using, in this case, </span><span class="line" data-startTime="1419">node-leaky does this by </span><span class="line" data-startTime="1419">using Esprima as well. </span> <span class="line" data-startTime="1422">Always smart to check. </span> <span class="line" data-startTime="1424">I've seen a few projects that </span><span class="line" data-startTime="1424">have changed their style guide </span><span class="line" data-startTime="1427">and said we were all double </span><span class="line" data-startTime="1427">quotes, and now we're </span><span class="line" data-startTime="1429">switching to all </span><span class="line" data-startTime="1429">single quotes. </span> <span class="line" data-startTime="1430">And it's a little bit hard to </span><span class="line" data-startTime="1430">search and replace for. </span> <span class="line" data-startTime="1433">But tooling can actually just </span><span class="line" data-startTime="1433">tackle this completely 'cause </span><span class="line" data-startTime="1436">we can just parse the text </span><span class="line" data-startTime="1436">into a JavaScript AST, or </span><span class="line" data-startTime="1441">abstract syntax tree, change </span><span class="line" data-startTime="1441">all of our quotes, and then </span><span class="line" data-startTime="1445">code generation it back </span><span class="line" data-startTime="1445">into our source. </span> <span class="line" data-startTime="1449">And we can be confident that </span><span class="line" data-startTime="1449">it will still be completely </span><span class="line" data-startTime="1454">valid JavaScript. </span> <span class="line" data-startTime="1458">Copy paste mistake detection. </span></p>

<p><span class="line" data-startTime="1460">I believe this is actually </span><span class="line" data-startTime="1460">already in WebStorm. </span> <span class="line" data-startTime="1463">So let's say if I copy this </span><span class="line" data-startTime="1463">first line here, paste it down </span><span class="line" data-startTime="1466">here, and I'm changing the </span><span class="line" data-startTime="1466">x1 to x2 but I forget </span><span class="line" data-startTime="1470">to do it over here. </span> <span class="line" data-startTime="1473">We had a pretty bad bug in </span><span class="line" data-startTime="1473">WebKit for one day where </span><span class="line" data-startTime="1478">someone did this. </span> <span class="line" data-startTime="1479">It's almost exactly this </span><span class="line" data-startTime="1479">code example, and it's </span><span class="line" data-startTime="1485">a copy paste mistake. </span> <span class="line" data-startTime="1486">So this can now be detected. </span> <span class="line" data-startTime="1489">And you can be notified. </span> <span class="line" data-startTime="1491">It's a really smart thing. </span> <span class="line" data-startTime="1493">Like I was talking about style </span><span class="line" data-startTime="1493">guides, CodePainter is a tool </span><span class="line" data-startTime="1497">that can reformat the JavaScript </span><span class="line" data-startTime="1497">that you're working </span><span class="line" data-startTime="1500">on to fit a style guide. </span> <span class="line" data-startTime="1503">So, single quotes, double </span><span class="line" data-startTime="1503">quotes, white space around </span><span class="line" data-startTime="1507">arguments, things like that, </span><span class="line" data-startTime="1507">CodePainter can just do the </span><span class="line" data-startTime="1510">formatting for you, which I </span><span class="line" data-startTime="1510">think it would dramatically </span><span class="line" data-startTime="1514">change a lot on how people </span><span class="line" data-startTime="1514">collaborate on projects and to </span><span class="line" data-startTime="1519">worry about things like style. </span></p>

<p><span class="line" data-startTime="1522">This is Travis. </span> <span class="line" data-startTime="1524">So Travis CI I is a free </span><span class="line" data-startTime="1524">hosted, open source, </span><span class="line" data-startTime="1528">continuous integration setup. </span> <span class="line" data-startTime="1529">So, this is a Dojo 2 running </span><span class="line" data-startTime="1529">inside Travis. </span> <span class="line" data-startTime="1534">So on every commit to this </span><span class="line" data-startTime="1534">repository, Travis goes pulls </span><span class="line" data-startTime="1537">down the latest, installs a </span><span class="line" data-startTime="1537">bunch of node dependencies, </span><span class="line" data-startTime="1541">and then it connects up to Sauce </span><span class="line" data-startTime="1541">Labs, which has a lot of </span><span class="line" data-startTime="1544">browsers in the cloud. </span> <span class="line" data-startTime="1547">Connect up with these browsers </span><span class="line" data-startTime="1547">using Selenium. </span> <span class="line" data-startTime="1549">And then we execute a test </span><span class="line" data-startTime="1549">suite inside all these </span><span class="line" data-startTime="1554">browsers, so Firefox and </span><span class="line" data-startTime="1554">Internet Explorer, and running </span><span class="line" data-startTime="1557">our test suite just </span><span class="line" data-startTime="1557">to make sure that, </span><span class="line" data-startTime="1559">indeed, everything passes. </span> <span class="line" data-startTime="1564">Really powerful stuff to get </span><span class="line" data-startTime="1564">that immediate feedback of for </span><span class="line" data-startTime="1568">every single commit, how am I </span><span class="line" data-startTime="1568">doing against all my platforms </span><span class="line" data-startTime="1571">and all my test suites with </span><span class="line" data-startTime="1571">every commit and every poll </span><span class="line" data-startTime="1574">request, too. </span> <span class="line" data-startTime="1579">Right now, Travis will come </span><span class="line" data-startTime="1579">back and give you a little </span><span class="line" data-startTime="1581">badge and say all </span><span class="line" data-startTime="1581">tests passing. </span></p>

<p><span class="line" data-startTime="1583">I'm excited about other products </span><span class="line" data-startTime="1583">doing this too using </span><span class="line" data-startTime="1585">something like the GitHub's </span><span class="line" data-startTime="1585">commit status API. </span> <span class="line" data-startTime="1588">So, for instance, for meeting </span><span class="line" data-startTime="1588">style guidelines or meeting </span><span class="line" data-startTime="1594">performance goals or not </span><span class="line" data-startTime="1594">making sure that that </span><span class="line" data-startTime="1597">maintainability complexity </span><span class="line" data-startTime="1597">thresholds are not violated. </span> <span class="line" data-startTime="1603">We can get that kind of </span><span class="line" data-startTime="1603">feedback immediately. </span> <span class="line" data-startTime="1605">And it should all be automatic </span><span class="line" data-startTime="1605">because we as humans should </span><span class="line" data-startTime="1608">not be testing these things </span><span class="line" data-startTime="1608">manually on every single time </span><span class="line" data-startTime="1613">and can let the tooling </span><span class="line" data-startTime="1613">support this for us. </span> <span class="line" data-startTime="1616">So I think we have a little </span><span class="line" data-startTime="1616">bit a room to grow there. </span> <span class="line" data-startTime="1618">So this is JIRA. </span></p>

<p><span class="line" data-startTime="1620">But this is just a view of all </span><span class="line" data-startTime="1620">the things that I just </span><span class="line" data-startTime="1622">mentioned could be looked at </span><span class="line" data-startTime="1622">over time over the life cycle </span><span class="line" data-startTime="1625">of a project in a continuous </span><span class="line" data-startTime="1625">integration environment. </span> <span class="line" data-startTime="1629">And the last one I have &mdash; </span><span class="line" data-startTime="1630">not really related but </span><span class="line" data-startTime="1630">I think it's cool &mdash; </span><span class="line" data-startTime="1633">so this is fighting-layout-bugs </span><span class="line" data-startTime="1633">is a CSS </span><span class="line" data-startTime="1636">testing tool that can be used </span><span class="line" data-startTime="1636">inside of a continuous </span><span class="line" data-startTime="1641">integration setup. </span> <span class="line" data-startTime="1641">It integrates very </span><span class="line" data-startTime="1641">well with Maven. </span> <span class="line" data-startTime="1644">So if you have a Java stack, </span><span class="line" data-startTime="1644">it's great for that. </span> <span class="line" data-startTime="1646">And so it does a few things. </span> <span class="line" data-startTime="1647">It detects some common layout </span><span class="line" data-startTime="1647">bugs where you might have made </span><span class="line" data-startTime="1653">a mistake in the CSS or </span><span class="line" data-startTime="1653">might have not tested. </span></p>

<p><span class="line" data-startTime="1656">So take for example </span><span class="line" data-startTime="1656">DetectTextNearOr </span><span class="line" data-startTime="1657">OverlappingVerticalEdge. </span> <span class="line" data-startTime="1661">And so what this does </span><span class="line" data-startTime="1661">is it actually just </span><span class="line" data-startTime="1665">looks at the page &mdash; </span><span class="line" data-startTime="1666">and I think it uses PhantomJS, </span><span class="line" data-startTime="1666">I believe &mdash; </span><span class="line" data-startTime="1670">and finds situations where text </span><span class="line" data-startTime="1670">overlaps or goes right up </span><span class="line" data-startTime="1674">against another element in a way </span><span class="line" data-startTime="1674">that the software thinks </span><span class="line" data-startTime="1678">is incorrect. </span> <span class="line" data-startTime="1679">And it will highlight it to you </span><span class="line" data-startTime="1679">to hopefully be like there </span><span class="line" data-startTime="1683">might be a layout bug here. </span> <span class="line" data-startTime="1688">This has actually been out for </span><span class="line" data-startTime="1688">about three years or so. </span></p>

<p><span class="line" data-startTime="1696">Some of these projects have </span><span class="line" data-startTime="1696">been out for a while, but </span><span class="line" data-startTime="1698">we're seeing a little bit more </span><span class="line" data-startTime="1698">adoption these days of them </span><span class="line" data-startTime="1701">which I think is really </span><span class="line" data-startTime="1701">good things. </span> <span class="line" data-startTime="1703">So, I guess that's </span><span class="line" data-startTime="1703">about it for me. </span> <span class="line" data-startTime="1707">How are we doing, Addy? </span><span class="line" data-startTime="1707">Does that all make sense? </span></p>

<p class="speaker"><span class="line" data-starttime="1709"><span class="speakerName">Addy Osmani</span>: Yeah. </span> <span class="line" data-startTime="1710">So we talked about snippets </span><span class="line" data-startTime="1710">a few episodes back. </span> <span class="line" data-startTime="1712">And they're basically a really </span><span class="line" data-startTime="1712">neat way to create, edit, </span><span class="line" data-startTime="1716">store, or execute JavaScript </span><span class="line" data-startTime="1716">inside the DevTools. </span> <span class="line" data-startTime="1719">So if there are like custom </span><span class="line" data-startTime="1719">utilities that you always like </span><span class="line" data-startTime="1721">having available at the console </span><span class="line" data-startTime="1721">or inside the tools, </span><span class="line" data-startTime="1724">you can just save those as a </span><span class="line" data-startTime="1724">snippet and always have them </span><span class="line" data-startTime="1726">available to you whenever </span><span class="line" data-startTime="1726">you restart Chrome. </span> <span class="line" data-startTime="1729">Now I've got some great </span><span class="line" data-startTime="1729">news to share today. </span> <span class="line" data-startTime="1731">Snippets are actually moving </span><span class="line" data-startTime="1731">out of experiments. </span> <span class="line" data-startTime="1733">And that's gonna be happening </span><span class="line" data-startTime="1733">sometime soon. </span></p>

<p><span class="line" data-startTime="1736">We've also added a really neat </span><span class="line" data-startTime="1736">shortcut to snippets. </span> <span class="line" data-startTime="1738">So if you have an existing </span><span class="line" data-startTime="1738">snippet and you just want to </span><span class="line" data-startTime="1740">run it without actually clicking </span><span class="line" data-startTime="1740">inside the interface, </span><span class="line" data-startTime="1742">there's a cool new keyboard </span><span class="line" data-startTime="1742">shortcut, which is control or </span><span class="line" data-startTime="1745">command plus enter. </span> <span class="line" data-startTime="1747">So here I've got a snippet </span><span class="line" data-startTime="1747">called GrepJS by Nick Decosta. </span> <span class="line" data-startTime="1750">It's a really nice </span><span class="line" data-startTime="1750">utility to have. </span> <span class="line" data-startTime="1752">It'll basically grep over </span><span class="line" data-startTime="1752">different objects and find </span><span class="line" data-startTime="1755">things for you. </span> <span class="line" data-startTime="1756">But, I'm basically grepping over </span><span class="line" data-startTime="1756">the navigator object for </span><span class="line" data-startTime="1759">geo because I'm looking for the </span><span class="line" data-startTime="1761">geolocation support in there. </span> <span class="line" data-startTime="1762">So I'm basically gonna go and </span><span class="line" data-startTime="1762">use my command-enter. </span></p>

<p><span class="line" data-startTime="1765">And as you can see, it's </span><span class="line" data-startTime="1765">gone and it's run </span><span class="line" data-startTime="1767">my snippet for me. </span> <span class="line" data-startTime="1768">I expand out, and I can see, </span><span class="line" data-startTime="1768">OK, well there's the </span><span class="line" data-startTime="1771">geolocation that I </span><span class="line" data-startTime="1771">was looking for. </span> <span class="line" data-startTime="1773">It's just really neat. </span> <span class="line" data-startTime="1774">I've seen a ton of people create </span><span class="line" data-startTime="1774">really useful utilities </span><span class="line" data-startTime="1778">and just saving them </span><span class="line" data-startTime="1778">as snippets. </span> <span class="line" data-startTime="1779">It's great to always have </span><span class="line" data-startTime="1779">access to them. </span> <span class="line" data-startTime="1781">So just check it out. </span> <span class="line" data-startTime="1783">Snippets are really, </span><span class="line" data-startTime="1783">really awesome. </span> <span class="line" data-startTime="1784">And, actually on this same page, </span><span class="line" data-startTime="1784">there is a post I was </span><span class="line" data-startTime="1789">hoping to suggest people </span><span class="line" data-startTime="1789">check out by my </span><span class="line" data-startTime="1791">colleague Paul Lewis. </span> <span class="line" data-startTime="1793">And it basically discusses a </span><span class="line" data-startTime="1793">little bit more about those </span><span class="line" data-startTime="1796">layer creation hacks and </span><span class="line" data-startTime="1796">the null transforms and </span><span class="line" data-startTime="1798">translateZs and all </span><span class="line" data-startTime="1798">that stuff. </span> <span class="line" data-startTime="1800">It's a really awesome post. </span></p>

<p><span class="line" data-startTime="1801">He goes into a lot more detail </span><span class="line" data-startTime="1801">about this stuff than I have. </span> <span class="line" data-startTime="1804">But check it out. </span> <span class="line" data-startTime="1805">We will link you up </span><span class="line" data-startTime="1805">to it later on. </span> <span class="line" data-startTime="1807">But, yeah, it's really useful. </span> <span class="line" data-startTime="1810">Paul also has a paint survey </span><span class="line" data-startTime="1810">out at the moment where he </span><span class="line" data-startTime="1814">asks developers do you have a </span><span class="line" data-startTime="1814">paint bottleneck in your apps </span><span class="line" data-startTime="1818">at the moment? </span><span class="line" data-startTime="1819">So far it looks like a lot of </span><span class="line" data-startTime="1819">people think they may have a </span><span class="line" data-startTime="1823">paint bottleneck but aren't </span><span class="line" data-startTime="1823">entirely sure how </span><span class="line" data-startTime="1824">to diagnosis things. </span> <span class="line" data-startTime="1826">We're gonna be looking at that </span><span class="line" data-startTime="1826">stuff sometime soon. </span> <span class="line" data-startTime="1828">And I think Paul's gonna talk a </span><span class="line" data-startTime="1828">little bit more about that. </span></p>

<p class="speaker"><span class="line" data-starttime="1831"><span class="speakerName">Paul Irish</span>: Paint cost </span><span class="line" data-startTime="1831">in another episode. </span><span class="line" data-startTime="1835">But we're really eager to hear </span><span class="line" data-startTime="1835">more from you guys on what are </span><span class="line" data-startTime="1840">your paint points when </span><span class="line" data-startTime="1840">identifying what is </span><span class="line" data-startTime="1843">contributing to paint issues, </span><span class="line" data-startTime="1843">both on mobile and desktop, </span><span class="line" data-startTime="1848">and figuring out how we can </span><span class="line" data-startTime="1848">better support you guys inside </span><span class="line" data-startTime="1850">the DevTools with good </span><span class="line" data-startTime="1850">solutions for that. </span><span class="line" data-startTime="1853">So, we'd love to get more of </span><span class="line" data-startTime="1853">your feedback regarding that </span><span class="line" data-startTime="1856">kind of stuff. </span></p>

<p class="speaker"><span class="line" data-starttime="1858"><span class="speakerName">Addy Osmani</span>: Defintely. </span></p>

<p class="speaker"><span class="line" data-starttime="1858"><span class="speakerName">Paul Irish</span>: Anyways, thank you </span><span class="line" data-startTime="1858">guys very much for watching. </span><span class="line" data-startTime="1860">It's been a pleasure. </span><span class="line" data-startTime="1861">And we'll see you again soon. </span></p>