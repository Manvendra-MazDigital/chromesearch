<p><span class="line" data-startTime="3">Teleprompter copy: </span><span class="line" data-startTime="3">Hi, I'm Matt, and I'm a software engineer </span><span class="line" data-startTime="3">working on Google Chrome. </span> <span class="line" data-startTime="7">I'm going to tell you about extension message </span><span class="line" data-startTime="7">passing, which allows the different components </span><span class="line" data-startTime="10">of your extension to communicate with each </span><span class="line" data-startTime="10">other. </span> <span class="line" data-startTime="13">Content scripts run in a separate JavaScript </span><span class="line" data-startTime="13">environment from the rest of your extension, </span><span class="line" data-startTime="17">to allow them direct access to a web page's </span><span class="line" data-startTime="17">DOM. </span> <span class="line" data-startTime="20">For security reasons, this JavaScript environment </span><span class="line" data-startTime="20">is unprivileged, just like the web page it </span><span class="line" data-startTime="25">affects. </span></p>

<p><span class="line" data-startTime="26">That means that if you want to access some </span><span class="line" data-startTime="26">extension API from your content script, you </span><span class="line" data-startTime="30">need a way to communicate between your content </span><span class="line" data-startTime="30">script and the privileged part of your extension. </span> <span class="line" data-startTime="35">This is where message passing comes in. </span> <span class="line" data-startTime="37">Message passing allows the different pieces </span><span class="line" data-startTime="37">of your extension to communicate. </span> <span class="line" data-startTime="41">Usually you'll want to send messages between </span><span class="line" data-startTime="41">a content script and a background page, but </span><span class="line" data-startTime="45">message passing works from any page to any </span><span class="line" data-startTime="45">other page or pages in your extension. </span> <span class="line" data-startTime="50">You can even send a message to another extension </span><span class="line" data-startTime="50">as long as you know that extension's unique </span><span class="line" data-startTime="53">ID. </span> <span class="line" data-startTime="54">Let's walk through a simple example to see </span><span class="line" data-startTime="54">how message passing works. </span> <span class="line" data-startTime="58">Let's say we want to write an RSS feed reading </span><span class="line" data-startTime="58">extension. </span></p>

<p><span class="line" data-startTime="61">We want a button to appear in the URL bar </span><span class="line" data-startTime="61">whenever the current page has an RSS feed </span><span class="line" data-startTime="66">available. </span> <span class="line" data-startTime="67">To start, we write a content script that examines </span><span class="line" data-startTime="67">the page to detect an RSS feed. </span> <span class="line" data-startTime="71">Since the content script doesn't have access </span><span class="line" data-startTime="71">to modify the browser UI, it needs to ask </span><span class="line" data-startTime="77">the background page to do that. </span> <span class="line" data-startTime="79">The call to sendRequest passes the list of </span><span class="line" data-startTime="79">feeds found by the content script up to the </span><span class="line" data-startTime="83">background page. </span> <span class="line" data-startTime="84">Our background page looks like this: </span><span class="line" data-startTime="86">The first line adds a listener to the onRequest </span><span class="line" data-startTime="86">event, which is fired when our content script </span><span class="line" data-startTime="91">calls sendRequest. </span> <span class="line" data-startTime="93">In our listener, we check if there were any </span><span class="line" data-startTime="93">feeds found, and if so, display the page action </span><span class="line" data-startTime="98">for that page. </span></p>

<p><span class="line" data-startTime="99">That's how you send a single request to your </span><span class="line" data-startTime="99">extension from a content script. </span> <span class="line" data-startTime="102">There is a slightly more involved API if you </span><span class="line" data-startTime="102">need to have a longer lived conversation with </span><span class="line" data-startTime="107">multiple back-and-forth messages. </span> <span class="line" data-startTime="109">To find out more details, visit the extension </span><span class="line" data-startTime="109">documentation page at code.google.com/chrome/extensions </span><span class="line" data-startTime="115"><show URL> </span><span class="line" data-startTime="115">http://code.google.com/chrome/extensions/index.html </span><span class="line" data-startTime="116"></url> </span></p>