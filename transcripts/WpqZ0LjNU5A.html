<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>The Breakpoint Ep. 4 â€”The Tour De Timeline</h1>

<h2>Paul Irish, Addy Osmani</h2>

<a class="video" href="http://youtu.be/WpqZ0LjNU5A">youtu.be/WpqZ0LjNU5A</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="21"><span class="speakerName">Paul Irish</span>: Hi, and welcome </span><span class="line" data-startTime="21">to the next episode of The </span><span class="line" data-startTime="24">Breakpoint, Breakpoint </span><span class="line" data-startTime="24">number four. </span> <span class="line" data-startTime="25">I'm Paul Irish. </span> <span class="line" data-startTime="29">Addy Osmani is joining </span><span class="line" data-startTime="29">us in London. </span> <span class="line" data-startTime="31">And we will be doing a </span><span class="line" data-startTime="31">Tour of the Timeline. </span> <span class="line" data-startTime="35">The Timeline is part of the </span><span class="line" data-startTime="35">Chrome Dev Tools to help give </span><span class="line" data-startTime="38">you a great view of the overall </span><span class="line" data-startTime="38">performance of the </span><span class="line" data-startTime="42">application from start </span><span class="line" data-startTime="42">to finish, </span><span class="line" data-startTime="44">including all the parts. </span> <span class="line" data-startTime="46">And so it really gives you this </span><span class="line" data-startTime="46">really nice, holistic </span><span class="line" data-startTime="50">view of how your application is </span><span class="line" data-startTime="50">performing so you can dig </span><span class="line" data-startTime="53">into the pieces that are </span><span class="line" data-startTime="53">giving you bottlenecks, </span><span class="line" data-startTime="56">whether they're JavaScript, </span><span class="line" data-startTime="56">paint times, reflows, or </span><span class="line" data-startTime="60">anything else. </span></p>

<p><span class="line" data-startTime="60">And we can help identify what </span><span class="line" data-startTime="60">is exactly slowing our app </span><span class="line" data-startTime="63">down and fix it. </span> <span class="line" data-startTime="66">So we're going to dive into how </span><span class="line" data-startTime="66">to use it, and the kinds </span><span class="line" data-startTime="69">of insights that it shows. </span> <span class="line" data-startTime="73">And generally, you should be </span><span class="line" data-startTime="73">able to walk away from this </span><span class="line" data-startTime="75">with a much better understanding </span><span class="line" data-startTime="75">of how browser </span><span class="line" data-startTime="78">internals work, how it </span><span class="line" data-startTime="78">interprets your page, and what </span><span class="line" data-startTime="81">you can do to make sure your </span><span class="line" data-startTime="81">app loads and interacts as </span><span class="line" data-startTime="85">fast as possible. </span> <span class="line" data-startTime="87">All Right. </span> <span class="line" data-startTime="88">So first things first, </span><span class="line" data-startTime="88">let me bring this up. </span> <span class="line" data-startTime="93">So inside the Chrome DevTools </span><span class="line" data-startTime="93">we have the Timeline. </span> <span class="line" data-startTime="96">It's about a fifth tab over. </span> <span class="line" data-startTime="99">And it's giving you </span><span class="line" data-startTime="99">this overall view. </span> <span class="line" data-startTime="102">One of the things that we have </span><span class="line" data-startTime="102">in there is a Events View. </span> <span class="line" data-startTime="109">And this is something that </span><span class="line" data-startTime="109">has been in there </span><span class="line" data-startTime="110">for quite some time. </span></p>

<p><span class="line" data-startTime="111">So I'm going to do a small </span><span class="line" data-startTime="111">little demo on the how this </span><span class="line" data-startTime="115">comes into practice. </span> <span class="line" data-startTime="116">I have up here The New </span><span class="line" data-startTime="116">York Times Skimmer. </span> <span class="line" data-startTime="118">A really well-done web </span><span class="line" data-startTime="118">application done by The New </span><span class="line" data-startTime="121">York Times to show today's </span><span class="line" data-startTime="121">news and such. </span> <span class="line" data-startTime="125">So I'm going to bring </span><span class="line" data-startTime="125">up the Timeline. </span> <span class="line" data-startTime="128">And it looks like I've got to </span><span class="line" data-startTime="128">wait for the page to kind of </span><span class="line" data-startTime="131">refresh here. </span> <span class="line" data-startTime="135">There we go, that looks good. </span> <span class="line" data-startTime="137">Now I want to record </span><span class="line" data-startTime="137">a new session. </span> <span class="line" data-startTime="142">So I can hit this </span><span class="line" data-startTime="142">Record button. </span> <span class="line" data-startTime="143">I can also hit Command-E. </span> <span class="line" data-startTime="143">It's a lot easier. </span> <span class="line" data-startTime="146">I'm just going to refresh </span><span class="line" data-startTime="146">the page first. </span> <span class="line" data-startTime="149">And now I'm going to scroll </span><span class="line" data-startTime="149">to some other sections. </span></p>

<p><span class="line" data-startTime="154">Hit Go, and I'll Open this story </span><span class="line" data-startTime="154">and Close the story. </span> <span class="line" data-startTime="158">So that's pretty good. </span> <span class="line" data-startTime="158">I'll stop this with Command-E. </span> <span class="line" data-startTime="162">And so down here, this </span><span class="line" data-startTime="162">is the full Timeline. </span> <span class="line" data-startTime="168">We can drill into a certain </span><span class="line" data-startTime="168">area up at the top by just </span><span class="line" data-startTime="172">clicking and scrolling. </span> <span class="line" data-startTime="175">We can also, with the trackpad, </span><span class="line" data-startTime="175">do a few little </span><span class="line" data-startTime="177">gestures to zoom </span><span class="line" data-startTime="177">in on the area. </span> <span class="line" data-startTime="179">So we can go up by </span><span class="line" data-startTime="179">scrolling up. </span> <span class="line" data-startTime="183">And we can narrow </span><span class="line" data-startTime="183">our focus here. </span> <span class="line" data-startTime="185">We can also scroll to the side </span><span class="line" data-startTime="185">and pan between them. </span> <span class="line" data-startTime="189">And you see all the events are </span><span class="line" data-startTime="189">updating on the bottom. </span> <span class="line" data-startTime="193">The other thing to orient </span><span class="line" data-startTime="193">yourself is very small here, </span><span class="line" data-startTime="197">but we have a small blue line </span><span class="line" data-startTime="197">and a red line, and these </span><span class="line" data-startTime="199">refer to DOM content loaded </span><span class="line" data-startTime="199">and the window.load event. </span></p>

<p><span class="line" data-startTime="207">So let's take a look and </span><span class="line" data-startTime="207">see what's going on. </span> <span class="line" data-startTime="212">The first thing that we have up </span><span class="line" data-startTime="212">here is the blue level, and </span><span class="line" data-startTime="215">so this is all network </span><span class="line" data-startTime="215">activity. </span> <span class="line" data-startTime="217">Underneath this is yellow </span><span class="line" data-startTime="217">JavaScript execution. </span> <span class="line" data-startTime="221">It's happening all the time. </span> <span class="line" data-startTime="223">And then the last is kind of </span><span class="line" data-startTime="223">rendering and screen layer. </span> <span class="line" data-startTime="226">So paint and rendering. </span> <span class="line" data-startTime="229">Purple and green share this </span><span class="line" data-startTime="229">third thing here. </span> <span class="line" data-startTime="233">And so I think I refreshed the </span><span class="line" data-startTime="233">page right around this area </span><span class="line" data-startTime="238">and things were happening. </span></p>

<p><span class="line" data-startTime="240">But while this does tell me the </span><span class="line" data-startTime="240">interaction between the </span><span class="line" data-startTime="244">layers or the browser as it </span><span class="line" data-startTime="244">loads the page, it doesn't </span><span class="line" data-startTime="246">really give me a good view of </span><span class="line" data-startTime="246">what was slow about anything. </span> <span class="line" data-startTime="249">It doesn't give me any </span><span class="line" data-startTime="249">good recommendations. </span> <span class="line" data-startTime="251">And I can look down and see for </span><span class="line" data-startTime="251">all these events how long </span><span class="line" data-startTime="255">they took and see the general </span><span class="line" data-startTime="255">waterfall events as they </span><span class="line" data-startTime="259">trickle over. </span> <span class="line" data-startTime="262">But over this course of a 10 </span><span class="line" data-startTime="262">second recording, I don't have </span><span class="line" data-startTime="267">a good idea about </span><span class="line" data-startTime="267">where to target. </span></p>

<p><span class="line" data-startTime="268">So to do that, I'm going </span><span class="line" data-startTime="268">to switch over to </span><span class="line" data-startTime="270">the new Frames mode. </span> <span class="line" data-startTime="272">So I can switch over </span><span class="line" data-startTime="272">to Frames mode. </span> <span class="line" data-startTime="274">Now this gives me a little </span><span class="line" data-startTime="274">bit different of a view. </span> <span class="line" data-startTime="278">One of the things in Frames </span><span class="line" data-startTime="278">View is over here on the </span><span class="line" data-startTime="281">right-hand side, we have </span><span class="line" data-startTime="281">these measures. </span> <span class="line" data-startTime="285">So the height of each bar in </span><span class="line" data-startTime="285">Frames View refers to the </span><span class="line" data-startTime="289">length of time that it took to </span><span class="line" data-startTime="289">complete that frame and send </span><span class="line" data-startTime="293">it up to the screen. </span> <span class="line" data-startTime="295">And so something that takes a </span><span class="line" data-startTime="295">short amount of time we could </span><span class="line" data-startTime="298">send up to GPU really quickly. </span> <span class="line" data-startTime="300">And this means that we can keep </span><span class="line" data-startTime="300">the refresh rate as fast </span><span class="line" data-startTime="302">as possible. </span> <span class="line" data-startTime="303">In most cases you want a target </span><span class="line" data-startTime="303">of 60 FPS frame rate. </span> <span class="line" data-startTime="307">But some high-end monitors run </span><span class="line" data-startTime="307">at 120 Hertz, and so the </span><span class="line" data-startTime="313">browser will actually be trying </span><span class="line" data-startTime="313">to send 120 updates per </span><span class="line" data-startTime="316">second to those monitors. </span></p>

<p><span class="line" data-startTime="318">Phones might have a 55 </span><span class="line" data-startTime="318">Hertz refresh rate. </span> <span class="line" data-startTime="324">So 60 is a general guideline. </span> <span class="line" data-startTime="327">Most machines and devices </span><span class="line" data-startTime="327">refresh at that rate. </span> <span class="line" data-startTime="331">So you could target that. </span> <span class="line" data-startTime="334">But once we have these very long </span><span class="line" data-startTime="334">bars, and that means that </span><span class="line" data-startTime="337">a frame rate is dipping below </span><span class="line" data-startTime="337">30 FPS, and that's not good. </span> <span class="line" data-startTime="344">So we want to identify what we </span><span class="line" data-startTime="344">can do to make that faster. </span> <span class="line" data-startTime="348">So let's see, we're going </span><span class="line" data-startTime="348">to take a look in here. </span> <span class="line" data-startTime="355">It looks like I might </span><span class="line" data-startTime="355">have found a small </span><span class="line" data-startTime="358">bug in Canary today. </span> <span class="line" data-startTime="361">I'm going to try refreshing </span><span class="line" data-startTime="361">this page and restarting a </span><span class="line" data-startTime="367">Timeline recording. </span></p>

<p><span class="line" data-startTime="372">Oh, this doesn't look good. </span> <span class="line" data-startTime="379">There we go. </span> <span class="line" data-startTime="388">What do you think, Addy? </span></p>

<p class="speaker"><span class="line" data-starttime="392"><span class="speakerName">Addy Osmani</span>: Oh, what's that? </span><span class="line" data-startTime="398">This is one of those very few </span><span class="line" data-startTime="398">times that using Canary might </span><span class="line" data-startTime="403">go a little south. </span></p>

<p class="speaker"><span class="line" data-starttime="404"><span class="speakerName">Paul Irish</span>: As you can see, I do </span><span class="line" data-startTime="404">have a Canary update that's </span><span class="line" data-startTime="406">waiting for me here. </span><span class="line" data-startTime="412">This is fine. </span><span class="line" data-startTime="414">We can adapt to this </span><span class="line" data-startTime="414">situation here. </span><span class="line" data-startTime="420">OK, I'm going to jump over </span><span class="line" data-startTime="420">to a fresh Chromium </span><span class="line" data-startTime="423">Build that I have. </span><span class="line" data-startTime="428">That's good. </span></p>

<p class="speaker"><span class="line" data-starttime="431"><span class="speakerName">Addy Osmani</span>: Paul, this is The </span><span class="line" data-startTime="431">Breakpoint, so things break in </span><span class="line" data-startTime="434">real time, right? </span></p>

<p class="speaker"><span class="line" data-starttime="435"><span class="speakerName">Paul Irish</span>: That's Exactly </span><span class="line" data-startTime="435">what happens. </span></p>

<p class="speaker"><span class="line" data-starttime="436"><span class="speakerName">Addy Osmani</span>: So I think </span><span class="line" data-startTime="436">the viewers get it. </span></p>

<p class="speaker"><span class="line" data-starttime="438"><span class="speakerName">Paul Irish</span>: All right, good. </span> <span class="line" data-startTime="439">I'm glad. </span> <span class="line" data-startTime="446">Now we should be good here. </span> <span class="line" data-startTime="448">Yeah, this is looking </span><span class="line" data-startTime="448">pretty sharp. </span> <span class="line" data-startTime="452">Nice. </span> <span class="line" data-startTime="453">We're going to scroll </span><span class="line" data-startTime="453">up to this page. </span> <span class="line" data-startTime="456">Oh, I have not saved anything. </span> <span class="line" data-startTime="457">OK, good. </span> <span class="line" data-startTime="458">And I'll open up this </span><span class="line" data-startTime="458">story, or not. </span> <span class="line" data-startTime="464">All right. </span> <span class="line" data-startTime="465">So now we've navigated around. </span> <span class="line" data-startTime="468">We've recorded a timeline. </span> <span class="line" data-startTime="469">If I Zoom in on the DevTools, </span><span class="line" data-startTime="469">you can just Command-Plus to </span><span class="line" data-startTime="473">always do that. </span></p>

<p><span class="line" data-startTime="475">We have a look. </span> <span class="line" data-startTime="476">And like I said, any tall bar </span><span class="line" data-startTime="476">gives an indication that </span><span class="line" data-startTime="479">things are not running as </span><span class="line" data-startTime="479">smooth as possible. </span> <span class="line" data-startTime="484">Especially, when I was </span><span class="line" data-startTime="484">navigating between these </span><span class="line" data-startTime="486">sections over here on the </span><span class="line" data-startTime="486">right-hand side, it took a </span><span class="line" data-startTime="489">little time for that transition </span><span class="line" data-startTime="489">to visually happen </span><span class="line" data-startTime="492">and for it just to complete. </span> <span class="line" data-startTime="494">So I was sitting there </span><span class="line" data-startTime="494">waiting a little bit. </span> <span class="line" data-startTime="498">So I want to find out </span><span class="line" data-startTime="498">what's going on. </span> <span class="line" data-startTime="501">my tab did cash. </span> <span class="line" data-startTime="503">And that's OK, because right now </span><span class="line" data-startTime="503">I'm just really interested </span><span class="line" data-startTime="506">in what's going on down </span><span class="line" data-startTime="506">at the bottom here. </span></p>

<p><span class="line" data-startTime="508">So if I scroll down </span><span class="line" data-startTime="508">a little bit &mdash; </span><span class="line" data-startTime="515">ah, my crash tab broke </span><span class="line" data-startTime="515">more things. </span> <span class="line" data-startTime="522">Oh, this is trouble. </span> <span class="line" data-startTime="532">OK. </span> <span class="line" data-startTime="536">All right. </span> <span class="line" data-startTime="537">I think we're good now. </span> <span class="line" data-startTime="538">Let's hope. </span> <span class="line" data-startTime="540">All right, so now we have </span><span class="line" data-startTime="540">a Timeline trace. </span> <span class="line" data-startTime="544">The colors that I mentioned </span><span class="line" data-startTime="544">before still apply here. </span> <span class="line" data-startTime="547">And so this frame, for </span><span class="line" data-startTime="547">instance, took 88 </span><span class="line" data-startTime="550">milliseconds. </span> <span class="line" data-startTime="552">88 milliseconds is a long </span><span class="line" data-startTime="552">time for a frame. </span> <span class="line" data-startTime="555">If we're keeping with 60 FPS, </span><span class="line" data-startTime="555">then each frame is a short </span><span class="line" data-startTime="561">16.6 milliseconds. </span> <span class="line" data-startTime="564">That's our target. </span> <span class="line" data-startTime="565">And when we take longer than </span><span class="line" data-startTime="565">that, then we're holding up </span><span class="line" data-startTime="568">the user from seeing that </span><span class="line" data-startTime="568">content quickly. </span></p>

<p><span class="line" data-startTime="571">So inside this 80 milliseconds </span><span class="line" data-startTime="571">frame, we have this long </span><span class="line" data-startTime="574">function call coming </span><span class="line" data-startTime="574">from SoloSource. </span> <span class="line" data-startTime="578">And let's look into what's </span><span class="line" data-startTime="578">going on inside that. </span> <span class="line" data-startTime="583">So it looks like there's all </span><span class="line" data-startTime="583">these small parse events, and </span><span class="line" data-startTime="588">there's a big, big waterfall </span><span class="line" data-startTime="588">of parsing. </span> <span class="line" data-startTime="590">Now parsing here in Thailand </span><span class="line" data-startTime="590">is just parsing HTML. </span> <span class="line" data-startTime="593">Let me show exactly what's </span><span class="line" data-startTime="593">going on here. </span> <span class="line" data-startTime="598">Now, I can hover over this and </span><span class="line" data-startTime="598">see actually a trace of why </span><span class="line" data-startTime="602">we're now parsing. </span> <span class="line" data-startTime="605">And it looks like we're inside </span><span class="line" data-startTime="605">of extend HTML5. </span></p>

<p><span class="line" data-startTime="608">So this is probably the HTML </span><span class="line" data-startTime="608">method inside jQuery. </span> <span class="line" data-startTime="612">But it was initially called </span><span class="line" data-startTime="612">somewhere in the application </span><span class="line" data-startTime="615">source called Section </span><span class="line" data-startTime="615">Layout Markup, Cash </span><span class="line" data-startTime="618">Callback Kindle Response. </span> <span class="line" data-startTime="619">So you see the traversal </span><span class="line" data-startTime="619">from New York Times </span><span class="line" data-startTime="623">Skimmer calling jQuery. </span> <span class="line" data-startTime="625">Now the cool thing is I can </span><span class="line" data-startTime="625">click into here and OK, yeah, </span><span class="line" data-startTime="629">it's going to lend 17 of jQuery, </span><span class="line" data-startTime="629">minify jQuery, not </span><span class="line" data-startTime="635">very useful to me </span><span class="line" data-startTime="636">Now, if I click the Pretty Print </span><span class="line" data-startTime="636">to get a Pretty Print </span><span class="line" data-startTime="640">jQuery, and i can hum back the </span><span class="line" data-startTime="640">timeline, you see that my line </span><span class="line" data-startTime="645">number here is now updated. </span></p>

<p><span class="line" data-startTime="647">So now I can actually click on </span><span class="line" data-startTime="647">line 2185, go to the new </span><span class="line" data-startTime="652">pretty printed line. </span> <span class="line" data-startTime="654">If I scroll over a little bit, </span><span class="line" data-startTime="654">you're going to see this </span><span class="line" data-startTime="656">innerHTML setting. </span> <span class="line" data-startTime="658">So here's exactly where the </span><span class="line" data-startTime="658">innerHTML on this element is </span><span class="line" data-startTime="661">being set, and that's why </span><span class="line" data-startTime="661">we're calling a parse. </span> <span class="line" data-startTime="665">And it looks like what </span><span class="line" data-startTime="665">happened is we had a </span><span class="line" data-startTime="668">succession of about 60 or so </span><span class="line" data-startTime="668">sequential instantiations of </span><span class="line" data-startTime="678">the HTML5 parsing algorithm. </span> <span class="line" data-startTime="681">In total, it adds up to about 62 </span><span class="line" data-startTime="681">milliseconds, which took a </span><span class="line" data-startTime="689">decent amount of time. </span> <span class="line" data-startTime="691">Now, let me see, I want to </span><span class="line" data-startTime="691">see if we can have &mdash; yes. </span></p>

<p><span class="line" data-startTime="694">So there was a small little </span><span class="line" data-startTime="694">hiccup here that we probably </span><span class="line" data-startTime="698">could have avoided. </span> <span class="line" data-startTime="701">So we're parsing HTML, then </span><span class="line" data-startTime="701">we recalc style here. </span> <span class="line" data-startTime="706">And then we parse some more. </span> <span class="line" data-startTime="707">We recalc style, we layout, </span><span class="line" data-startTime="707">and we paint. </span> <span class="line" data-startTime="710">And so recalculation of styles </span><span class="line" data-startTime="710">is taking all the styles in </span><span class="line" data-startTime="715">style sheets, in the browser's </span><span class="line" data-startTime="715">user agent style sheet, any </span><span class="line" data-startTime="718">inland styles, figuring out </span><span class="line" data-startTime="718">what the computed style of </span><span class="line" data-startTime="722">every DOM element on the </span><span class="line" data-startTime="722">page is against what </span><span class="line" data-startTime="726">the current DOM is. </span></p>

<p><span class="line" data-startTime="727">And now, it looks like we </span><span class="line" data-startTime="727">have to do that twice. </span> <span class="line" data-startTime="731">Go back to parsing HTML, and </span><span class="line" data-startTime="731">then do that all over again. </span> <span class="line" data-startTime="734">So it's probably likely that </span><span class="line" data-startTime="734">we actually did not need to </span><span class="line" data-startTime="738">force this recalc style. </span> <span class="line" data-startTime="740">The cool thing now is that we </span><span class="line" data-startTime="740">can just hover on recalc style </span><span class="line" data-startTime="743">and see exactly why these </span><span class="line" data-startTime="743">styles were necessary. </span> <span class="line" data-startTime="748">So it looks like the cells </span><span class="line" data-startTime="748">were both invalidated and </span><span class="line" data-startTime="752">every calculation was forced. </span> <span class="line" data-startTime="753">And we can see why exactly </span><span class="line" data-startTime="753">this is happening now. </span> <span class="line" data-startTime="756">So the styles were invalidated </span><span class="line" data-startTime="756">because on line 846 a class </span><span class="line" data-startTime="764">name was set. </span></p>

<p><span class="line" data-startTime="765">And any time a DOM </span><span class="line" data-startTime="765">changes, then the </span><span class="line" data-startTime="770">current DOM is discarded. </span> <span class="line" data-startTime="771">We need to find out new </span><span class="line" data-startTime="771">styles for that. </span> <span class="line" data-startTime="775">The other one is the style </span><span class="line" data-startTime="775">recalculation was forced. </span> <span class="line" data-startTime="778">Here inside line 655, we asked </span><span class="line" data-startTime="778">for offset height. </span> <span class="line" data-startTime="786">And asking for offset height </span><span class="line" data-startTime="786">basically says hold up </span><span class="line" data-startTime="788">browser, I know you're busy, but </span><span class="line" data-startTime="788">I need this number, and it </span><span class="line" data-startTime="794">needs to be correct. </span> <span class="line" data-startTime="795">So anything that you're doing, </span><span class="line" data-startTime="795">you need to pause and give me </span><span class="line" data-startTime="798">this number and make sure </span><span class="line" data-startTime="798">that it's correct. </span> <span class="line" data-startTime="800">So even if you're asking for </span><span class="line" data-startTime="800">offset height and then the </span><span class="line" data-startTime="803">second after you're setting some </span><span class="line" data-startTime="803">HTML it's going to like </span><span class="line" data-startTime="806">freeze everything, recalculate </span><span class="line" data-startTime="806">all the styles, which is going </span><span class="line" data-startTime="810">to pause the browser for a </span><span class="line" data-startTime="810">little bit, give you this </span><span class="line" data-startTime="812">number, and then it can continue </span><span class="line" data-startTime="812">on with the amount of </span><span class="line" data-startTime="814">work that it was doing. </span></p>

<p><span class="line" data-startTime="817">So there's a few properties </span><span class="line" data-startTime="817">that do this. </span> <span class="line" data-startTime="820">The other place you </span><span class="line" data-startTime="820">can go to is Tony </span><span class="line" data-startTime="822">Gentilcore, trigger, layout. </span> <span class="line" data-startTime="827">Tony Gentilcore is an engineer </span><span class="line" data-startTime="827">on the Chrome team. </span> <span class="line" data-startTime="830">And he has a great blog post on </span><span class="line" data-startTime="830">this where he just searched </span><span class="line" data-startTime="834">the web kit source for all the </span><span class="line" data-startTime="834">properties and methods that </span><span class="line" data-startTime="839">will force a reflow or a layout, </span><span class="line" data-startTime="839">which in turn forces </span><span class="line" data-startTime="844">styles to be recalced. </span> <span class="line" data-startTime="845">So inside here is all of them, </span><span class="line" data-startTime="845">and offset height and offset </span><span class="line" data-startTime="851">width are in here as well. </span></p>

<p><span class="line" data-startTime="853">Addy, is this making </span><span class="line" data-startTime="853">sense so far? </span></p>

<p class="speaker"><span class="line" data-starttime="856"><span class="speakerName">Addy Osmani</span>: Yeah. </span><span class="line" data-startTime="856">It looks good so far. </span></p>

<p class="speaker"><span class="line" data-starttime="858"><span class="speakerName">Paul Irish</span>: All right. </span> <span class="line" data-startTime="858">We're going to keep going. </span> <span class="line" data-startTime="863">So what happened here is we ask </span><span class="line" data-startTime="863">for these offset heights, </span><span class="line" data-startTime="866">and then we went right back </span><span class="line" data-startTime="866">into parsing our HTML. </span> <span class="line" data-startTime="871">We probably could have avoided </span><span class="line" data-startTime="871">these two pauses and just </span><span class="line" data-startTime="875">continued on. </span> <span class="line" data-startTime="876">A lot of times there'll be a </span><span class="line" data-startTime="876">sequence of things where we're </span><span class="line" data-startTime="880">setting into the DOM and then </span><span class="line" data-startTime="880">you're requesting things like </span><span class="line" data-startTime="884">offset height, offset </span><span class="line" data-startTime="884">width, and then </span><span class="line" data-startTime="888">you go back to setting. </span> <span class="line" data-startTime="889">And a good way to speed up the </span><span class="line" data-startTime="889">page is to make sure you do </span><span class="line" data-startTime="892">sets in a row and then </span><span class="line" data-startTime="892">gets in a row. </span> <span class="line" data-startTime="896">So eventually, when we finish </span><span class="line" data-startTime="896">this big sequence, we recalc </span><span class="line" data-startTime="900">style again. </span> <span class="line" data-startTime="902">We lay it out. </span> <span class="line" data-startTime="902">So we lay out the geometry of </span><span class="line" data-startTime="902">the page and how actually all </span><span class="line" data-startTime="905">the boxes are going </span><span class="line" data-startTime="905">to lay out. </span></p>

<p><span class="line" data-startTime="907">And then we paint. </span> <span class="line" data-startTime="908">And here, we can actually just </span><span class="line" data-startTime="908">see a little overlay of the </span><span class="line" data-startTime="912">area that was painted. </span> <span class="line" data-startTime="914">And it's a little bit </span><span class="line" data-startTime="914">off because I </span><span class="line" data-startTime="915">was resizing my DevTools. </span> <span class="line" data-startTime="917">But the main content section I </span><span class="line" data-startTime="917">got painted followed by the </span><span class="line" data-startTime="922">right navigation. </span> <span class="line" data-startTime="925">And so that's just the story </span><span class="line" data-startTime="925">of that single frame being </span><span class="line" data-startTime="930">computed and being sent </span><span class="line" data-startTime="930">up to the GPU. </span> <span class="line" data-startTime="934">But this thing can </span><span class="line" data-startTime="934">happen a lot. </span> <span class="line" data-startTime="935">So I'm going to look </span><span class="line" data-startTime="935">for something else. </span> <span class="line" data-startTime="938">Here's another big frame </span><span class="line" data-startTime="938">at 60 milliseconds. </span> <span class="line" data-startTime="942">And here, instead of a lot of </span><span class="line" data-startTime="942">HTML parsing cost, we actually </span><span class="line" data-startTime="946">had a good amount </span><span class="line" data-startTime="946">of paint cost. </span> <span class="line" data-startTime="948">And paint cost can be a little </span><span class="line" data-startTime="948">tricky to debug. </span></p>

<p><span class="line" data-startTime="951">So here we're just going </span><span class="line" data-startTime="951">to open up this guy </span><span class="line" data-startTime="953">and see what we have. </span> <span class="line" data-startTime="957">That's pretty interesting. </span> <span class="line" data-startTime="959">This top area got painted. </span> <span class="line" data-startTime="961">And inside here, we have </span><span class="line" data-startTime="961">an image decode. </span> <span class="line" data-startTime="965">So these image decodes we're </span><span class="line" data-startTime="965">actually added somewhat </span><span class="line" data-startTime="967">recently to the Chrome </span><span class="line" data-startTime="967">DevTools. </span> <span class="line" data-startTime="970">I don't think you'll see </span><span class="line" data-startTime="970">them in Stable, but </span><span class="line" data-startTime="971">you see them in Canary. </span> <span class="line" data-startTime="973">In this case we were just taking </span><span class="line" data-startTime="973">a JPEG and decoding it </span><span class="line" data-startTime="980">from JPEG into bitmap. </span> <span class="line" data-startTime="981">And it took a good 20 </span><span class="line" data-startTime="981">milliseconds to do that, which </span><span class="line" data-startTime="985">is a surprisingly long time. </span></p>

<p><span class="line" data-startTime="989">Another thing that is </span><span class="line" data-startTime="989">essentially captured inside </span><span class="line" data-startTime="991">this paint, and right now it's a </span><span class="line" data-startTime="991">small bug that we're fixing, </span><span class="line" data-startTime="996">is imagery sizing. </span> <span class="line" data-startTime="998">So in this case, we had a lot </span><span class="line" data-startTime="998">of images that came in like, </span><span class="line" data-startTime="1005">let's say this one. </span> <span class="line" data-startTime="1008">A lot of the source images </span><span class="line" data-startTime="1008">that were used in this </span><span class="line" data-startTime="1010">application came in at their </span><span class="line" data-startTime="1010">native size of 1024 pixels </span><span class="line" data-startTime="1013">wide or 600 pixels wide, and </span><span class="line" data-startTime="1013">they're just scaled to fit in </span><span class="line" data-startTime="1017">the area where they </span><span class="line" data-startTime="1017">should fit. </span> <span class="line" data-startTime="1020">A lot of times this </span><span class="line" data-startTime="1020">is necessary. </span> <span class="line" data-startTime="1021">And there's not much way </span><span class="line" data-startTime="1021">you can get around it. </span> <span class="line" data-startTime="1023">But the actual cost of doing </span><span class="line" data-startTime="1023">that resizing is something </span><span class="line" data-startTime="1025">that we're now able to see. </span> <span class="line" data-startTime="1029">So typically, an image decode </span><span class="line" data-startTime="1029">is always followed by an </span><span class="line" data-startTime="1032">imagery size. </span></p>

<p class="speaker"><span class="line" data-starttime="1035"><span class="speakerName">Addy Osmani</span>: Suppose the </span><span class="line" data-startTime="1035">suggestion there that people </span><span class="line" data-startTime="1037">use prescaled images. </span></p>

<p class="speaker"><span class="line" data-starttime="1038"><span class="speakerName">Paul Irish</span>: Yeah. </span> <span class="line" data-startTime="1039">That is pretty much </span><span class="line" data-startTime="1039">the suggestion. </span> <span class="line" data-startTime="1042">If you can definitely serve up </span><span class="line" data-startTime="1042">images that are scaled to the </span><span class="line" data-startTime="1046">correct resolution, the page is </span><span class="line" data-startTime="1046">going to load a lot faster, </span><span class="line" data-startTime="1049">and scrolling speed is also </span><span class="line" data-startTime="1049">going to be a lot faster </span><span class="line" data-startTime="1052">because images are decoded </span><span class="line" data-startTime="1052">lazily based on when the user </span><span class="line" data-startTime="1056">needs to see them. </span> <span class="line" data-startTime="1057">So we're not going to decode the </span><span class="line" data-startTime="1057">entire page worth even if </span><span class="line" data-startTime="1060">none of it's visible. </span> <span class="line" data-startTime="1061">So it's going to really speed up </span><span class="line" data-startTime="1061">scrolling and also speed up </span><span class="line" data-startTime="1064">something like this. </span></p>

<p><span class="line" data-startTime="1067">The other thing I should mention </span><span class="line" data-startTime="1067">is that in Chrome, </span><span class="line" data-startTime="1069">image decoding right now does </span><span class="line" data-startTime="1069">operate on the main thread. </span> <span class="line" data-startTime="1073">So we have to wait for this </span><span class="line" data-startTime="1073">image to decode before we can </span><span class="line" data-startTime="1076">run any JavaScript </span><span class="line" data-startTime="1076">for instance. </span> <span class="line" data-startTime="1078">That's the current </span><span class="line" data-startTime="1078">state of things. </span> <span class="line" data-startTime="1080">Although, that's improving. </span> <span class="line" data-startTime="1081">And we actually expect industry </span><span class="line" data-startTime="1081">codes to have an off </span><span class="line" data-startTime="1084">thread very soon, which is going </span><span class="line" data-startTime="1084">to speed up things quite </span><span class="line" data-startTime="1087">considerably. </span></p>

<p><span class="line" data-startTime="1088">So serve images scaled to the </span><span class="line" data-startTime="1088">resolution that you need them </span><span class="line" data-startTime="1094">at, and watch this area. </span> <span class="line" data-startTime="1099">Now, it looks like, yeah, we </span><span class="line" data-startTime="1099">painted this area up top. </span> <span class="line" data-startTime="1104">And sometimes with a view that </span><span class="line" data-startTime="1104">is not changing so much, we </span><span class="line" data-startTime="1110">can actually keep track and </span><span class="line" data-startTime="1110">identify which image it is and </span><span class="line" data-startTime="1113">where it was located. </span> <span class="line" data-startTime="1115">But in this case, because the </span><span class="line" data-startTime="1115">app has been moved around a </span><span class="line" data-startTime="1118">bit, it's a bit trickier. </span> <span class="line" data-startTime="1120">So overall, this is the way that </span><span class="line" data-startTime="1120">we can diagnose what's </span><span class="line" data-startTime="1126">going on with the application </span><span class="line" data-startTime="1126">from a performance perspective </span><span class="line" data-startTime="1129">and figure it out. </span> <span class="line" data-startTime="1130">And the thing that I also want </span><span class="line" data-startTime="1130">to point out here is that in </span><span class="line" data-startTime="1132">the past when something operates </span><span class="line" data-startTime="1132">pretty slow, people </span><span class="line" data-startTime="1138">normally dive into fiber of </span><span class="line" data-startTime="1138">the profiler or the CPU </span><span class="line" data-startTime="1141">profiler over here, and just </span><span class="line" data-startTime="1141">start recording and </span><span class="line" data-startTime="1145">identifying JavaScript that </span><span class="line" data-startTime="1145">is taking a long time. </span></p>

<p><span class="line" data-startTime="1148">But what we end up seeing in </span><span class="line" data-startTime="1148">this timeline trace is that </span><span class="line" data-startTime="1153">actually there's </span><span class="line" data-startTime="1153">a lot of cost. </span> <span class="line" data-startTime="1156">A lot of the time that's taking </span><span class="line" data-startTime="1156">the browser a little </span><span class="line" data-startTime="1161">bit of pause in delivering this </span><span class="line" data-startTime="1161">content to the user is </span><span class="line" data-startTime="1164">not JavaScript. </span> <span class="line" data-startTime="1165">And so I recommend to use the </span><span class="line" data-startTime="1165">timeline to record a session </span><span class="line" data-startTime="1169">of any slow interaction. </span> <span class="line" data-startTime="1171">Then identify what's going </span><span class="line" data-startTime="1171">on inside there. </span> <span class="line" data-startTime="1173">Maybe you do have really big </span><span class="line" data-startTime="1173">yellow spikes, but those </span><span class="line" data-startTime="1178">yellow spikes might just be a </span><span class="line" data-startTime="1178">bunch of HTML settings or </span><span class="line" data-startTime="1181">something else. </span> <span class="line" data-startTime="1182">So this is a good way to </span><span class="line" data-startTime="1182">identify where exactly your </span><span class="line" data-startTime="1185">bottleneck is. </span> <span class="line" data-startTime="1186">Is it in script or is it just </span><span class="line" data-startTime="1186">completely in rendering costs. </span> <span class="line" data-startTime="1192">So this is a good way to </span><span class="line" data-startTime="1192">prioritize exactly what your </span><span class="line" data-startTime="1197">performance costs are. </span></p>

<p><span class="line" data-startTime="1200">I think I got a pretty decent </span><span class="line" data-startTime="1200">coverage on that. </span></p>

<p class="speaker"><span class="line" data-starttime="1203"><span class="speakerName">Addy Osmani</span>: I think </span><span class="line" data-startTime="1203">you've got some </span><span class="line" data-startTime="1204">great coverage in there. </span></p>

<p class="speaker"><span class="line" data-starttime="1206"><span class="speakerName">Paul Irish</span>: All right. </span> <span class="line" data-startTime="1208">I wanted to see if there's </span><span class="line" data-startTime="1208">anything else </span><span class="line" data-startTime="1210">that I should mention. </span> <span class="line" data-startTime="1210">No, I think that's good. </span> <span class="line" data-startTime="1213">One thing I did want to show </span><span class="line" data-startTime="1213">real quickly is a new </span><span class="line" data-startTime="1216">experimental part that we're </span><span class="line" data-startTime="1216">playing with inside Chrome. </span> <span class="line" data-startTime="1221">And this is not yet available </span><span class="line" data-startTime="1221">for everyone, but we want to </span><span class="line" data-startTime="1225">see what you guys think of it. </span> <span class="line" data-startTime="1229">I went through and looked at </span><span class="line" data-startTime="1229">some of the properties that </span><span class="line" data-startTime="1231">are normally a little </span><span class="line" data-startTime="1231">bit slow. </span> <span class="line" data-startTime="1233">They can be slow in CSS. </span> <span class="line" data-startTime="1236">And I present this list with </span><span class="line" data-startTime="1236">a lot of hesitation. </span></p>

<p><span class="line" data-startTime="1241">Things that are slow now may </span><span class="line" data-startTime="1241">not be the things that are </span><span class="line" data-startTime="1244">still in the future. </span> <span class="line" data-startTime="1245">So do not take these as </span><span class="line" data-startTime="1245">guidelines or advice on what </span><span class="line" data-startTime="1250">to avoid, more just like this </span><span class="line" data-startTime="1250">is a snapshot of the current </span><span class="line" data-startTime="1254">present state. </span> <span class="line" data-startTime="1255">But the key here is to always </span><span class="line" data-startTime="1255">test for yourself because my </span><span class="line" data-startTime="1258">bottlenecks are not </span><span class="line" data-startTime="1258">your bottlenecks. </span> <span class="line" data-startTime="1261">For instance, Box Shadow is </span><span class="line" data-startTime="1261">kind of known as something </span><span class="line" data-startTime="1266">that's quite slow, at desktop </span><span class="line" data-startTime="1266">and on mobile. </span> <span class="line" data-startTime="1269">And I'm going to show you a </span><span class="line" data-startTime="1269">little bit about how to </span><span class="line" data-startTime="1270">actually see that now with </span><span class="line" data-startTime="1270">this experimental future. </span></p>

<p><span class="line" data-startTime="1274">So I'm going to come over </span><span class="line" data-startTime="1274">to this little demo. </span> <span class="line" data-startTime="1280">And in this demo, as I scroll </span><span class="line" data-startTime="1280">the page, I have a few dancing </span><span class="line" data-startTime="1286">Chrome logos. </span> <span class="line" data-startTime="1288">But I can also add this check </span><span class="line" data-startTime="1288">box, which adds in some CSS </span><span class="line" data-startTime="1291">gradients in there and </span><span class="line" data-startTime="1291">some box shadow. </span> <span class="line" data-startTime="1296">Now, if I record a timeline of </span><span class="line" data-startTime="1296">this section, this page, and I </span><span class="line" data-startTime="1303">make it dance a little bit, </span><span class="line" data-startTime="1303">you can see that &mdash; </span><span class="line" data-startTime="1308">I'm narrowing that focus </span><span class="line" data-startTime="1308">a little bit. </span> <span class="line" data-startTime="1311">You can see that I just have </span><span class="line" data-startTime="1311">really long pain times, 25 </span><span class="line" data-startTime="1314">milliseconds just to paint. </span> <span class="line" data-startTime="1318">Those are considerable. </span> <span class="line" data-startTime="1319">And I don't really have a good </span><span class="line" data-startTime="1319">idea on what is involved here. </span> <span class="line" data-startTime="1325">So what we can do actually </span><span class="line" data-startTime="1325">to identify exactly what </span><span class="line" data-startTime="1331">components are contributing to </span><span class="line" data-startTime="1331">this longer paint time is we </span><span class="line" data-startTime="1335">can turn on this new feature </span><span class="line" data-startTime="1335">called force repainting. </span></p>

<p><span class="line" data-startTime="1346">So now it might be a little </span><span class="line" data-startTime="1346">tough to see, but in the top </span><span class="line" data-startTime="1348">right corner, I have both a </span><span class="line" data-startTime="1348">meter that represents my </span><span class="line" data-startTime="1352">current frames per second and </span><span class="line" data-startTime="1352">also a rate of the paint rate. </span> <span class="line" data-startTime="1358">And what this mode is actually </span><span class="line" data-startTime="1358">doing is force </span><span class="line" data-startTime="1361">repainting all the time. </span> <span class="line" data-startTime="1363">Normally, the browser only </span><span class="line" data-startTime="1363">paints when it has to, but </span><span class="line" data-startTime="1367">this mode just says just keep </span><span class="line" data-startTime="1367">painting, just keep painting, </span><span class="line" data-startTime="1369">because we want to be able to </span><span class="line" data-startTime="1369">measure things and we're going </span><span class="line" data-startTime="1371">to change this situation. </span></p>

<p class="speaker"><span class="line" data-starttime="1375"><span class="speakerName">Addy Osmani</span>: Paul, if you're </span><span class="line" data-startTime="1375">constantly repeating, is that </span><span class="line" data-startTime="1378">something that's reflected in </span><span class="line" data-startTime="1378">the DevTools as well, like in </span><span class="line" data-startTime="1380">the timeline. </span></p>

<p class="speaker"><span class="line" data-starttime="1381"><span class="speakerName">Paul Irish</span>: Yeah, exactly. </span><span class="line" data-startTime="1382">So if I just turn this on, I'm </span><span class="line" data-startTime="1382">not touching anything, it's </span><span class="line" data-startTime="1385">just like &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1386"><span class="speakerName">Addy Osmani</span>: Wow! </span></p>

<p class="speaker"><span class="line" data-starttime="1386"><span class="speakerName">Paul Irish</span>:  &mdash; paint, paint, </span><span class="line" data-startTime="1386">paint, paint paint, paint. </span> <span class="line" data-startTime="1388">So there's no reason </span><span class="line" data-startTime="1388">that you'd need </span><span class="line" data-startTime="1390">this as a user certainly. </span> <span class="line" data-startTime="1392">But as a developer, you're able </span><span class="line" data-startTime="1392">to just replicate heavy </span><span class="line" data-startTime="1397">painting situations </span><span class="line" data-startTime="1397">repeatedly. </span> <span class="line" data-startTime="1399">And this enables you to </span><span class="line" data-startTime="1399">try some things out. </span> <span class="line" data-startTime="1402">So I'll actually, you know what, </span><span class="line" data-startTime="1402">I'll try and keep this </span><span class="line" data-startTime="1406">timeline on. </span> <span class="line" data-startTime="1407">And I'm going to come </span><span class="line" data-startTime="1407">over to Elements. </span> <span class="line" data-startTime="1410">I'm going to Select </span><span class="line" data-startTime="1410">this image. </span> <span class="line" data-startTime="1412">And I'm going to turn off </span><span class="line" data-startTime="1412">this CSS gradient. </span> <span class="line" data-startTime="1416">And I'm going to turn up </span><span class="line" data-startTime="1416">this background size, </span><span class="line" data-startTime="1420">and this box shadow. </span> <span class="line" data-startTime="1423">Now I'm going to come </span><span class="line" data-startTime="1423">back to timeline. </span> <span class="line" data-startTime="1425">Yeah, that should be a big, </span><span class="line" data-startTime="1425">dramatic difference. </span> <span class="line" data-startTime="1428">Nice. </span> <span class="line" data-startTime="1429">So we go from pretty long </span><span class="line" data-startTime="1429">paint sizes down </span><span class="line" data-startTime="1434">to very short ones. </span> <span class="line" data-startTime="1438">And over in the top right we </span><span class="line" data-startTime="1438">have this paint rate meter, </span><span class="line" data-startTime="1441">which is telling me </span><span class="line" data-startTime="1441">the million &mdash; </span><span class="line" data-startTime="1445">right now I'm painting about 220 </span><span class="line" data-startTime="1445">million pixels per second. </span></p>

<p><span class="line" data-startTime="1451">But when I have, let's see, </span><span class="line" data-startTime="1451">all the costly effects on, </span><span class="line" data-startTime="1457">that dives down to about 35. </span> <span class="line" data-startTime="1462">So this is a pretty big </span><span class="line" data-startTime="1462">jump from 35 to 220. </span> <span class="line" data-startTime="1468">So we're able to identify </span><span class="line" data-startTime="1468">exactly just by toggling </span><span class="line" data-startTime="1471">things on and off what's </span><span class="line" data-startTime="1471">contributing to paint times. </span> <span class="line" data-startTime="1474">Maybe it's individuals styles. </span> <span class="line" data-startTime="1478">In a lot of websites, there's </span><span class="line" data-startTime="1478">a very large div with a box </span><span class="line" data-startTime="1481">shadow around it. </span> <span class="line" data-startTime="1482">And you can toggle things off, </span><span class="line" data-startTime="1482">apply display, none, or </span><span class="line" data-startTime="1485">visibility hidden to them. </span> <span class="line" data-startTime="1488">See what the result is in </span><span class="line" data-startTime="1488">this mode or over in </span><span class="line" data-startTime="1492">timeline paint length. </span> <span class="line" data-startTime="1494">And then identify where </span><span class="line" data-startTime="1494">this is going. </span> <span class="line" data-startTime="1498">In the future that might be </span><span class="line" data-startTime="1498">something like a report, a </span><span class="line" data-startTime="1500">profiling report, where we can </span><span class="line" data-startTime="1500">identify by element, by style </span><span class="line" data-startTime="1503">what's contributing to paint. </span> <span class="line" data-startTime="1505">It's a little tricky because </span><span class="line" data-startTime="1505">these things are additive, but </span><span class="line" data-startTime="1507">for now, this is a great tool to </span><span class="line" data-startTime="1507">identify what is going on. </span></p>

<p><span class="line" data-startTime="1514">How that's sound? </span></p>

<p class="speaker"><span class="line" data-starttime="1516"><span class="speakerName">Addy Osmani</span>: That sounds </span><span class="line" data-startTime="1516">pretty cool. </span></p>

<p class="speaker"><span class="line" data-starttime="1518"><span class="speakerName">Paul Irish</span>: Cool. </span></p>

<p class="speaker"><span class="line" data-starttime="1519"><span class="speakerName">Addy Osmani</span>: So do you see when </span><span class="line" data-startTime="1519">people are developing </span><span class="line" data-startTime="1522">applications that are complex </span><span class="line" data-startTime="1522">and have rich animations, do </span><span class="line" data-startTime="1525">you see them actually making </span><span class="line" data-startTime="1525">perhaps design decisions based </span><span class="line" data-startTime="1530">on what some of this </span><span class="line" data-startTime="1530">is reporting back? </span></p>

<p class="speaker"><span class="line" data-starttime="1533"><span class="speakerName">Paul Irish</span>: Yeah. </span> <span class="line" data-startTime="1533">So it's a little trickier. </span> <span class="line" data-startTime="1537">So clearly, the fastest </span><span class="line" data-startTime="1537">situation here is just get rid </span><span class="line" data-startTime="1541">box shadow, get rid of CSS </span><span class="line" data-startTime="1541">gradients and box background </span><span class="line" data-startTime="1546">size et cetera. </span> <span class="line" data-startTime="1549">If you don't have any CSS, it's </span><span class="line" data-startTime="1549">going to be really fast. </span> <span class="line" data-startTime="1554">But that's not feasible. </span> <span class="line" data-startTime="1556">So there's a few ways </span><span class="line" data-startTime="1556">to deal with this. </span> <span class="line" data-startTime="1560">In diagnosing long paints, </span><span class="line" data-startTime="1560">like I said, we can just </span><span class="line" data-startTime="1562">Display-None to remove it out </span><span class="line" data-startTime="1562">of the geometry of the page, </span><span class="line" data-startTime="1565">and it won't contribute </span><span class="line" data-startTime="1565">to layout at all. </span> <span class="line" data-startTime="1568">With Visibility-hidden, it won't </span><span class="line" data-startTime="1568">contribute to paint. </span> <span class="line" data-startTime="1570">So we can just toggle entire </span><span class="line" data-startTime="1570">elements off and on like this. </span> <span class="line" data-startTime="1573">We measure it with either a </span><span class="line" data-startTime="1573">timeline recording like I </span><span class="line" data-startTime="1576">showed or this new experimental </span><span class="line" data-startTime="1576">mode, which we </span><span class="line" data-startTime="1579">hope to be able to share </span><span class="line" data-startTime="1579">in a public build soon. </span></p>

<p><span class="line" data-startTime="1583">And then just identify </span><span class="line" data-startTime="1583">and iterate. </span> <span class="line" data-startTime="1585">Now if there is a situation like </span><span class="line" data-startTime="1585">you're asking about where </span><span class="line" data-startTime="1588">it is bad, what do you do, you </span><span class="line" data-startTime="1588">can Remove Styles, you can try </span><span class="line" data-startTime="1592">and simplify some of the styles </span><span class="line" data-startTime="1592">maybe you don't need a </span><span class="line" data-startTime="1595">60 pixel blur on your box shadow </span><span class="line" data-startTime="1595">with like 0.2 alpha and </span><span class="line" data-startTime="1600">you could actually just change </span><span class="line" data-startTime="1600">it to be able to smaller and </span><span class="line" data-startTime="1603">harder alpha. </span> <span class="line" data-startTime="1605">Talk with your designer and </span><span class="line" data-startTime="1605">identify a different sort of </span><span class="line" data-startTime="1610">interaction frame. </span> <span class="line" data-startTime="1611">Let's say we had a modal alert </span><span class="line" data-startTime="1611">coming up, now I can't imagine </span><span class="line" data-startTime="1615">the situation where you would </span><span class="line" data-startTime="1615">animate a box shadow from </span><span class="line" data-startTime="1618">being really big into small. </span> <span class="line" data-startTime="1621">And that would look cool. </span> <span class="line" data-startTime="1623">But a much faster way of doing </span><span class="line" data-startTime="1623">this is doing a 2D transform </span><span class="line" data-startTime="1629">with translate just to scale it </span><span class="line" data-startTime="1629">in from the top right and </span><span class="line" data-startTime="1634">have a little bit of bounce. </span></p>

<p><span class="line" data-startTime="1636">That's going to sit </span><span class="line" data-startTime="1636">on the GPU. </span> <span class="line" data-startTime="1638">Be really, really fast. </span> <span class="line" data-startTime="1639">So there's some situations where </span><span class="line" data-startTime="1639">you can kind of work </span><span class="line" data-startTime="1641">with your designer to find a new </span><span class="line" data-startTime="1641">style of interaction that </span><span class="line" data-startTime="1644">works a lot better. </span> <span class="line" data-startTime="1646">And lastly, I know this is not </span><span class="line" data-startTime="1646">cool at all to say, but you </span><span class="line" data-startTime="1651">can use images instead </span><span class="line" data-startTime="1651">of using CSS. </span></p>

<p class="speaker"><span class="line" data-starttime="1654"><span class="speakerName">Addy Osmani</span>: Oh my god. </span></p>

<p class="speaker"><span class="line" data-starttime="1655"><span class="speakerName">Paul Irish</span>: I said it. </span><span class="line" data-startTime="1656">That was terrible. </span><span class="line" data-startTime="1658">So gradients or box shadow, </span><span class="line" data-startTime="1658">border image can work. </span><span class="line" data-startTime="1668">So look into it. </span><span class="line" data-startTime="1670">This is not like a guarantee </span><span class="line" data-startTime="1670">that images are </span><span class="line" data-startTime="1673">always faster than CSS. </span><span class="line" data-startTime="1674">But it's something that you want </span><span class="line" data-startTime="1674">to try out especially, if </span><span class="line" data-startTime="1676">you're measuring things and </span><span class="line" data-startTime="1676">identifying that these are </span><span class="line" data-startTime="1678">your bottlenecks and this is </span><span class="line" data-startTime="1678">possibly something to fix. </span><span class="line" data-startTime="1682">You always want to measure </span><span class="line" data-startTime="1682">before and after to identify </span><span class="line" data-startTime="1684">is this really worth </span><span class="line" data-startTime="1684">it, maybe not. </span><span class="line" data-startTime="1688">So that's essentially </span><span class="line" data-startTime="1688">what we can do. </span><span class="line" data-startTime="1692">Addy, can you talk a little bit </span><span class="line" data-startTime="1692">about another part of the </span><span class="line" data-startTime="1698">timeline that I didn't get to? </span></p>

<p class="speaker"><span class="line" data-starttime="1700"><span class="speakerName">Addy Osmani</span>: Sure. </span> <span class="line" data-startTime="1701">So we're going to be talking </span><span class="line" data-startTime="1701">about Memory mode. </span> <span class="line" data-startTime="1704">Paul talked about Events and </span><span class="line" data-startTime="1704">he talked about Frames. </span> <span class="line" data-startTime="1707">But Memory mode is really cool </span><span class="line" data-startTime="1707">because it gives you an </span><span class="line" data-startTime="1710">overview of your application's </span><span class="line" data-startTime="1710">memory usage over time. </span> <span class="line" data-startTime="1714">It can help you diagnose whether </span><span class="line" data-startTime="1714">some of the initial </span><span class="line" data-startTime="1717">symptoms about whether you </span><span class="line" data-startTime="1717">might have a memory link. </span> <span class="line" data-startTime="1720">So Paul has just opened </span><span class="line" data-startTime="1720">up a little demo </span><span class="line" data-startTime="1722">application we have. </span> <span class="line" data-startTime="1724">And we're going to switch over </span><span class="line" data-startTime="1724">to the Memory Paint. </span> <span class="line" data-startTime="1729">Now this application </span><span class="line" data-startTime="1729">is quite simple. </span></p>

<p><span class="line" data-startTime="1731">The Idea is that you scroll </span><span class="line" data-startTime="1731">through it, and it will keep </span><span class="line" data-startTime="1734">displaying new images. </span> <span class="line" data-startTime="1736">And when you click on an image, </span><span class="line" data-startTime="1736">it will display a </span><span class="line" data-startTime="1739">larger version of it. </span> <span class="line" data-startTime="1742">We've got a clear timeline, </span><span class="line" data-startTime="1742">let's record a new session and </span><span class="line" data-startTime="1745">perform some actions. </span> <span class="line" data-startTime="1751">So as you can see, our timeline </span><span class="line" data-startTime="1751">is populating. </span> <span class="line" data-startTime="1752">Can we click on some of those </span><span class="line" data-startTime="1752">images just to see </span><span class="line" data-startTime="1755">what impact that has? </span><span class="line" data-startTime="1759">Awesome. </span> <span class="line" data-startTime="1760">Let's stop that. </span> <span class="line" data-startTime="1763">So cool. </span> <span class="line" data-startTime="1765">Again, in the top view, you've </span><span class="line" data-startTime="1765">got your Summary view. </span> <span class="line" data-startTime="1766">And in the bottom, you've </span><span class="line" data-startTime="1766">got a Details view. </span> <span class="line" data-startTime="1769">And in the Summary view, you'll </span><span class="line" data-startTime="1769">notice the memory usage </span><span class="line" data-startTime="1772">increasing as you move between </span><span class="line" data-startTime="1772">the different parts of your </span><span class="line" data-startTime="1775">applications. </span> <span class="line" data-startTime="1776">The light-blue area represents </span><span class="line" data-startTime="1776">the amount of memory being </span><span class="line" data-startTime="1779">used by your app at </span><span class="line" data-startTime="1779">a particular time. </span> <span class="line" data-startTime="1782">And the remaining white area </span><span class="line" data-startTime="1782">represents the total amount of </span><span class="line" data-startTime="1785">allocated memory that </span><span class="line" data-startTime="1785">you've got. </span></p>

<p><span class="line" data-startTime="1787">And this is quite normal. </span> <span class="line" data-startTime="1788">This type of a curve is actually </span><span class="line" data-startTime="1788">quite normal because </span><span class="line" data-startTime="1791">garbage collection is going to </span><span class="line" data-startTime="1791">be happening during the course </span><span class="line" data-startTime="1793">of all the interactions. </span> <span class="line" data-startTime="1794">And v8, the JavaScript engine </span><span class="line" data-startTime="1794">being used by Chrome, is going </span><span class="line" data-startTime="1798">to be running rounds of garbage </span><span class="line" data-startTime="1798">collection when your </span><span class="line" data-startTime="1800">app is idle. </span> <span class="line" data-startTime="1802">Now, taking a look at the </span><span class="line" data-startTime="1802">Details view, which is one at </span><span class="line" data-startTime="1805">the very bottom, you can see </span><span class="line" data-startTime="1805">we've got some sort of curve. </span> <span class="line" data-startTime="1808">Now a few cycles after garbage </span><span class="line" data-startTime="1808">collection, ideally your </span><span class="line" data-startTime="1813">memory profile, so that </span><span class="line" data-startTime="1813">curve, should be going </span><span class="line" data-startTime="1816">a little bit flat. </span> <span class="line" data-startTime="1818">And if it's constantly going up </span><span class="line" data-startTime="1818">between different garbage </span><span class="line" data-startTime="1820">collection cycles, you might </span><span class="line" data-startTime="1820">have a memory leak. </span> <span class="line" data-startTime="1825">That's a problem. </span> <span class="line" data-startTime="1827">Now going back to the Summary </span><span class="line" data-startTime="1827">view at the very top, another </span><span class="line" data-startTime="1830">way that you can tell that there </span><span class="line" data-startTime="1830">might be a problem is if </span><span class="line" data-startTime="1833">you see a sawtooth. </span></p>

<p><span class="line" data-startTime="1835">Now, that basically represents </span><span class="line" data-startTime="1835">the cost of doing </span><span class="line" data-startTime="1838">business in your app. </span> <span class="line" data-startTime="1838">So let's say that you were using </span><span class="line" data-startTime="1838">RequestAnimationFrame, </span><span class="line" data-startTime="1843">that might give you a little </span><span class="line" data-startTime="1843">bit of garbage. </span> <span class="line" data-startTime="1845">But it's the steepness of your </span><span class="line" data-startTime="1845">curve that you need to keep an </span><span class="line" data-startTime="1847">eye on, because if that curve is </span><span class="line" data-startTime="1847">really steep, it means that </span><span class="line" data-startTime="1851">you're generating a </span><span class="line" data-startTime="1851">lot of garbage. </span> <span class="line" data-startTime="1853">Similarly, in the Details view, </span><span class="line" data-startTime="1853">if you've got a STUFF </span><span class="line" data-startTime="1857">function, that is also </span><span class="line" data-startTime="1857">a sign that you might </span><span class="line" data-startTime="1859">have a memory leak. </span> <span class="line" data-startTime="1863">On the next episode, we're </span><span class="line" data-startTime="1863">going to be talking you </span><span class="line" data-startTime="1866">through a tool called </span><span class="line" data-startTime="1866">the Heap Profiler. </span> <span class="line" data-startTime="1868">It will actually help you use </span><span class="line" data-startTime="1868">some of this information to go </span><span class="line" data-startTime="1872">and dig down and find out </span><span class="line" data-startTime="1872">exactly what is causing the </span><span class="line" data-startTime="1875">memory leak and how you can </span><span class="line" data-startTime="1875">go and you can fix it. </span></p>

<p><span class="line" data-startTime="1880">Now, one thing that I missed </span><span class="line" data-startTime="1880">out on, if we go back to </span><span class="line" data-startTime="1883">Timeline very quickly and take </span><span class="line" data-startTime="1883">a look at the left, is there </span><span class="line" data-startTime="1886">are three pieces of information </span><span class="line" data-startTime="1886">on the left. </span> <span class="line" data-startTime="1889">We've got the Document Count, </span><span class="line" data-startTime="1889">the Dome Node account, and the </span><span class="line" data-startTime="1892">Event Listener account. </span> <span class="line" data-startTime="1894">Now, the DOM Node count shows </span><span class="line" data-startTime="1894">the number of created DOM </span><span class="line" data-startTime="1896">nodes that are still being </span><span class="line" data-startTime="1896">held in memory. </span> <span class="line" data-startTime="1900">And the others represent the </span><span class="line" data-startTime="1900">same for your Event Listeners </span><span class="line" data-startTime="1903">and your Document instances, </span><span class="line" data-startTime="1903">like your IFrames. </span> <span class="line" data-startTime="1906">And the Timeline view allows you </span><span class="line" data-startTime="1906">to filter down on these. </span></p>

<p><span class="line" data-startTime="1909">So if you wanted to, for </span><span class="line" data-startTime="1909">example, just display the DOM </span><span class="line" data-startTime="1912">Node counts, you could just </span><span class="line" data-startTime="1912">deselect the other options as </span><span class="line" data-startTime="1915">Paul has just shown you. </span> <span class="line" data-startTime="1921">Just like any of the other </span><span class="line" data-startTime="1921">panels, you can select a range </span><span class="line" data-startTime="1924">in your Summary view and drill </span><span class="line" data-startTime="1924">down to more specific pieces </span><span class="line" data-startTime="1928">of information. </span> <span class="line" data-startTime="1929">And hopefully, on the next </span><span class="line" data-startTime="1929">episode, we're going to show </span><span class="line" data-startTime="1932">you how you can take this </span><span class="line" data-startTime="1932">information that might suggest </span><span class="line" data-startTime="1935">you have a memory leak and </span><span class="line" data-startTime="1935">actually help you fix it. </span></p>

<p class="speaker"><span class="line" data-starttime="1938"><span class="speakerName">Paul Irish</span>: Nice. </span><span class="line" data-startTime="1939">OK. </span><span class="line" data-startTime="1940">So one last thing I just want </span><span class="line" data-startTime="1940">to show real quick, which is </span><span class="line" data-startTime="1944">that for all these things we </span><span class="line" data-startTime="1944">can improve the situation, </span><span class="line" data-startTime="1948">especially on this machine. </span><span class="line" data-startTime="1950">This is a very recent machine. </span><span class="line" data-startTime="1952">And I can get 60 FPS or I could </span><span class="line" data-startTime="1952">kill my memory leaks, </span><span class="line" data-startTime="1956">but what about on a </span><span class="line" data-startTime="1956">mobile situation. </span><span class="line" data-startTime="1959">Now let's handle that. </span><span class="line" data-startTime="1962">So I want to show </span><span class="line" data-startTime="1962">this real quick. </span><span class="line" data-startTime="1966">So what I have on my phone </span><span class="line" data-startTime="1966">right here is I have an </span><span class="line" data-startTime="1969">instance of New York Times </span><span class="line" data-startTime="1969">Skimmer running </span><span class="line" data-startTime="1974">on Carbon on Android. </span><span class="line" data-startTime="1976">And I also have my Chrome </span><span class="line" data-startTime="1976">here connected to </span><span class="line" data-startTime="1983">remote debug that instance. </span><span class="line" data-startTime="1987">It looks like I need </span><span class="line" data-startTime="1987">to refresh this. </span><span class="line" data-startTime="1994">Come back. </span><span class="line" data-startTime="1999">There we go. </span><span class="line" data-startTime="2002">Nice. </span><span class="line" data-startTime="2004">All right. </span><span class="line" data-startTime="2005">So now I'm remote debugging </span><span class="line" data-startTime="2005">my Chrome on Android. </span><span class="line" data-startTime="2008">And what I'm going to do is </span><span class="line" data-startTime="2008">very similar to before. </span><span class="line" data-startTime="2015">Oh, it's this guy. </span><span class="line" data-startTime="2020">You might not be able to get </span><span class="line" data-startTime="2020">to see this unfortunately. </span></p>

<p class="speaker"><span class="line" data-starttime="2025"><span class="speakerName">Addy Osmani</span>: I imagine </span><span class="line" data-startTime="2025">it looks very cool. </span></p>

<p class="speaker"><span class="line" data-starttime="2027"><span class="speakerName">Paul Irish</span>: It looks so cool. </span> <span class="line" data-startTime="2030">Oh. </span> <span class="line" data-startTime="2033">All right, here we go. </span> <span class="line" data-startTime="2034">Great, so it's a little hard </span><span class="line" data-startTime="2034">to see in this situation. </span> <span class="line" data-startTime="2038">But I'm just navigating the </span><span class="line" data-startTime="2038">sections up and down before </span><span class="line" data-startTime="2041">like I was on the desktop. </span> <span class="line" data-startTime="2044">And we're able to see down </span><span class="line" data-startTime="2044">here a similar situation. </span> <span class="line" data-startTime="2049">But the difference is that what </span><span class="line" data-startTime="2049">the events actually show </span><span class="line" data-startTime="2055">is that whereas before, remember </span><span class="line" data-startTime="2055">I had that very long </span><span class="line" data-startTime="2060">sequence of parse events </span><span class="line" data-startTime="2060">that took about 60 </span><span class="line" data-startTime="2063">milliseconds on desktop. </span> <span class="line" data-startTime="2065">On the mobile situation, that </span><span class="line" data-startTime="2065">exact same sequences taken </span><span class="line" data-startTime="2068">around 250 milliseconds. </span> <span class="line" data-startTime="2070">So it gives you a little bit </span><span class="line" data-startTime="2070">of context as far as even </span><span class="line" data-startTime="2074">though you take care of an </span><span class="line" data-startTime="2074">optimization on desktop, you </span><span class="line" data-startTime="2077">really have to think </span><span class="line" data-startTime="2077">about what the </span><span class="line" data-startTime="2078">cost is here on mobile. </span></p>

<p><span class="line" data-startTime="2080">And I'm really excited about </span><span class="line" data-startTime="2080">these tools telling a much </span><span class="line" data-startTime="2083">richer story about how exactly </span><span class="line" data-startTime="2083">things are taking what are </span><span class="line" data-startTime="2090">your costs and expense of </span><span class="line" data-startTime="2090">operations on a mobile device </span><span class="line" data-startTime="2094">where the story is much more </span><span class="line" data-startTime="2094">different than what you're </span><span class="line" data-startTime="2096">used to on desktop. </span> <span class="line" data-startTime="2098">So I guess, again, to wrap up, </span><span class="line" data-startTime="2098">Timeline gives a great overall </span><span class="line" data-startTime="2102">view of the picture and allows </span><span class="line" data-startTime="2102">you to dive into exactly what </span><span class="line" data-startTime="2105">is causing you costs. </span> <span class="line" data-startTime="2107">A lot of these features that I </span><span class="line" data-startTime="2107">showed and that Addy showed </span><span class="line" data-startTime="2110">are in the Canary version </span><span class="line" data-startTime="2110">of Chrome that can run </span><span class="line" data-startTime="2113">side-by-side with Stable. </span> <span class="line" data-startTime="2114">We recommend trying that out. </span></p>

<p><span class="line" data-startTime="2119">But they're making their way </span><span class="line" data-startTime="2119">to Stable very quickly. </span> <span class="line" data-startTime="2122">And so that's about it. </span></p>

<p class="speaker"><span class="line" data-starttime="2126"><span class="speakerName">Addy Osmani</span>: Awesome. </span><span class="line" data-startTime="2127">So just take a look </span><span class="line" data-startTime="2127">at the questions </span><span class="line" data-startTime="2129">we've got real quick. </span><span class="line" data-startTime="2131">[? Tinta Suresh ?] </span><span class="line" data-startTime="2132">from New Delhi asks, "some </span><span class="line" data-startTime="2132">features in CSS3 are still </span><span class="line" data-startTime="2136">developing, and they're slow. </span><span class="line" data-startTime="2138">If RequestAnimationFrame is </span><span class="line" data-startTime="2138">used, will it affect the </span><span class="line" data-startTime="2141">performance of map?" </span></p>

<p class="speaker"><span class="line" data-starttime="2143"><span class="speakerName">Paul Irish</span>: What was the </span><span class="line" data-startTime="2143">last part of that? </span></p>

<p class="speaker"><span class="line" data-starttime="2146"><span class="speakerName">Addy Osmani</span>: If </span><span class="line" data-startTime="2146">RequestAnimationFrame is used </span><span class="line" data-startTime="2148">instead, will it affect the </span><span class="line" data-startTime="2148">performance of map? </span></p>

<p class="speaker"><span class="line" data-starttime="2151"><span class="speakerName">Paul Irish</span>: Yes. </span> <span class="line" data-startTime="2154">Good question. </span> <span class="line" data-startTime="2160">Yeah, there's a great </span><span class="line" data-startTime="2160">answer to this. </span> <span class="line" data-startTime="2166">You're probably used to doing </span><span class="line" data-startTime="2166">something like animating with </span><span class="line" data-startTime="2170">jQuery an element from </span><span class="line" data-startTime="2170">left to right. </span> <span class="line" data-startTime="2173">And so you'll grab the Element </span><span class="line" data-startTime="2173">in jQuery and you'll say </span><span class="line" data-startTime="2175">animate and give it a pixel </span><span class="line" data-startTime="2175">offset and give it a speed. </span> <span class="line" data-startTime="2179">And so what that is actually </span><span class="line" data-startTime="2179">doing is just running a set </span><span class="line" data-startTime="2181">timeout loop to operate about </span><span class="line" data-startTime="2181">every 10 milliseconds to </span><span class="line" data-startTime="2190">change the inline style. </span> <span class="line" data-startTime="2192">Now instead, you can use </span><span class="line" data-startTime="2192">something like the jQuery </span><span class="line" data-startTime="2197">RequestAnimationFrame plug-in </span><span class="line" data-startTime="2197">that just swaps in the </span><span class="line" data-startTime="2199">animation internals. </span> <span class="line" data-startTime="2200">It was written by a jQuery Core </span><span class="line" data-startTime="2200">Development team member. </span> <span class="line" data-startTime="2205">It swaps in the animation </span><span class="line" data-startTime="2205">internals to use </span><span class="line" data-startTime="2208">RequestAnimationFrame instead. </span> <span class="line" data-startTime="2210">The impact that this has </span><span class="line" data-startTime="2210">is pretty significant. </span></p>

<p><span class="line" data-startTime="2213">With a 10 milliseconds set </span><span class="line" data-startTime="2213">timeout, which is how jQuery </span><span class="line" data-startTime="2216">normally does it, you end </span><span class="line" data-startTime="2216">up missing frames. </span> <span class="line" data-startTime="2221">So if we're shooting to have a </span><span class="line" data-startTime="2221">new frame available to the GPU </span><span class="line" data-startTime="2226">60 times a second, giving the </span><span class="line" data-startTime="2226">browser something new every 10 </span><span class="line" data-startTime="2232">milliseconds does not </span><span class="line" data-startTime="2232">synchronize up well with </span><span class="line" data-startTime="2236">[INAUDIBLE], the screen </span><span class="line" data-startTime="2236">expecting </span><span class="line" data-startTime="2238">60 changes per second. </span> <span class="line" data-startTime="2240">And so about half of the </span><span class="line" data-startTime="2240">frames that jQuery is </span><span class="line" data-startTime="2244">generating by way of setting </span><span class="line" data-startTime="2244">an inline style never even </span><span class="line" data-startTime="2247">make it to the screen, </span><span class="line" data-startTime="2247">which is bad. </span> <span class="line" data-startTime="2251">You're doing all the work </span><span class="line" data-startTime="2251">and the users is </span><span class="line" data-startTime="2252">not getting the payoff. </span> <span class="line" data-startTime="2255">And so things can be </span><span class="line" data-startTime="2255">a lot less smooth. </span> <span class="line" data-startTime="2258">So always use </span><span class="line" data-startTime="2258">RequestAnimationFrame, </span><span class="line" data-startTime="2261">certainly if you're doing Canvas </span><span class="line" data-startTime="2261">or WebGL, but if you're </span><span class="line" data-startTime="2263">doing any sort of DOM animation, </span><span class="line" data-startTime="2263">like changing </span><span class="line" data-startTime="2266">inline styles. </span> <span class="line" data-startTime="2268">And if you're doing any </span><span class="line" data-startTime="2268">scrolling parallax situations </span><span class="line" data-startTime="2271">where as you scroll positions </span><span class="line" data-startTime="2271">are kind of </span><span class="line" data-startTime="2275">changing and things &mdash; </span><span class="line" data-startTime="2276">popular these days &mdash; </span><span class="line" data-startTime="2278">this is also another </span><span class="line" data-startTime="2278">great case to use </span><span class="line" data-startTime="2281">RequestAnimationFrame to send </span><span class="line" data-startTime="2281">up new updates to the screen </span><span class="line" data-startTime="2284">rather than putting </span><span class="line" data-startTime="2284">it all inside a </span><span class="line" data-startTime="2287">single on scroll handler. </span></p>

<p><span class="line" data-startTime="2290">And so that's basically </span><span class="line" data-startTime="2290">the best way </span><span class="line" data-startTime="2292">to handle that situation. </span></p>

<p class="speaker"><span class="line" data-starttime="2295"><span class="speakerName">Addy Osmani</span>: Cool. </span><span class="line" data-startTime="2296">And we'll be sure to show </span><span class="line" data-startTime="2296">the link to jQuery </span><span class="line" data-startTime="2298">RequestAnimationFrame at the </span><span class="line" data-startTime="2298">show frameworks, check it out. </span></p>

<p class="speaker"><span class="line" data-starttime="2300"><span class="speakerName">Paul Irish</span>: Yeah, absolutely. </span><span class="line" data-startTime="2303">Thank you everyone </span><span class="line" data-startTime="2303">for joining, and </span><span class="line" data-startTime="2304">see you next time. </span></p>

<p class="speaker"><span class="line" data-starttime="2306"><span class="speakerName">Addy Osmani</span>: See </span><span class="line" data-startTime="2306">you next time. </span><span class="line" data-startTime="2307">Bye. </span></p></div>