<p class="speaker"><span class="line" data-starttime="12"><span class="speakerName">Pete LePage</span>: Hey, everybody, and </span><span class="line" data-startTime="12">welcome to another edition </span><span class="line" data-startTime="14">of the Chrome Apps </span><span class="line" data-startTime="14">Office Hours. </span> <span class="line" data-startTime="17">Today we're joined by Joe </span><span class="line" data-startTime="17">Marini, who's going to be </span><span class="line" data-startTime="19">joining us in our Mountain </span><span class="line" data-startTime="19">View office. </span> <span class="line" data-startTime="21">Special thanks to Louis Gray </span><span class="line" data-startTime="21">and to Peter Lubbers for </span><span class="line" data-startTime="24">helping us get this set up. </span> <span class="line" data-startTime="26">Normally we broadcast out here </span><span class="line" data-startTime="26">in New York City and have </span><span class="line" data-startTime="29">people join from London, but we </span><span class="line" data-startTime="29">decided to switch things up </span><span class="line" data-startTime="32">a little bit today. </span> <span class="line" data-startTime="34">If you're joining us for the </span><span class="line" data-startTime="34">first time, and want to talk </span><span class="line" data-startTime="38">about this, be sure to add the </span><span class="line" data-startTime="38">Chrome Apps hashtag to any of </span><span class="line" data-startTime="41">your comments or any of the </span><span class="line" data-startTime="41">stuff that you want to talk </span><span class="line" data-startTime="44">about online. </span> <span class="line" data-startTime="46">Joe is going to be talking with </span><span class="line" data-startTime="46">the Media Galleries API. </span> <span class="line" data-startTime="49">The Media Galleries API is </span><span class="line" data-startTime="49">pretty slick in that it lets </span><span class="line" data-startTime="53">you get access to all of the </span><span class="line" data-startTime="53">videos, the pictures, and the </span><span class="line" data-startTime="58">music that's sitting on your </span><span class="line" data-startTime="58">computer, just like you would </span><span class="line" data-startTime="61">be able to do with any </span><span class="line" data-startTime="61">other native app. </span></p>

<p><span class="line" data-startTime="63">We wanted to make sure that </span><span class="line" data-startTime="63">Chrome Apps had this </span><span class="line" data-startTime="66">capability. </span> <span class="line" data-startTime="67">So with that, I'll pass it over </span><span class="line" data-startTime="67">to Joe who's going to </span><span class="line" data-startTime="69">start talking about the new </span><span class="line" data-startTime="69">Media Galleries API. </span></p>

<p class="speaker"><span class="line" data-starttime="72"><span class="speakerName">Joe Marini</span>: All right, </span><span class="line" data-startTime="72">thanks, Pete. </span> <span class="line" data-startTime="74">Hello, everyone. </span> <span class="line" data-startTime="74">Hello, developers. </span> <span class="line" data-startTime="75">Thanks for joining us. </span> <span class="line" data-startTime="76">I am Joe Marini. </span> <span class="line" data-startTime="77">I'm a developer advocate here </span><span class="line" data-startTime="77">at Google and Chrome Apps is </span><span class="line" data-startTime="80">one of the things I focus on. </span> <span class="line" data-startTime="82">As Pete mentioned, I'm going to </span><span class="line" data-startTime="82">be talking about the Media </span><span class="line" data-startTime="85">Galleries API. </span> <span class="line" data-startTime="86">If you want to follow along with </span><span class="line" data-startTime="86">us, there's a GitHub repo </span><span class="line" data-startTime="89">I'll show in a moment. </span> <span class="line" data-startTime="90">There's also the documentation </span><span class="line" data-startTime="90">available online at </span><span class="line" data-startTime="93">developer.chrome.com/apps. </span> <span class="line" data-startTime="95">And in fact, that's the window </span><span class="line" data-startTime="95">I'm showing right now. </span> <span class="line" data-startTime="97">So this is the API I will </span><span class="line" data-startTime="97">be talking about. </span> <span class="line" data-startTime="100">And as Pete mentioned, the </span><span class="line" data-startTime="100">Media Galleries API is </span><span class="line" data-startTime="103">essentially intended to provide </span><span class="line" data-startTime="103">access to the media </span><span class="line" data-startTime="106">that the user has stored on </span><span class="line" data-startTime="106">their device &mdash; their pictures, </span><span class="line" data-startTime="110">their music, their movies, </span><span class="line" data-startTime="110">and so on. </span> <span class="line" data-startTime="112">And this API gives you access </span><span class="line" data-startTime="112">to that via Chrome Apps. </span></p>

<p><span class="line" data-startTime="116">So it's a pretty simple API. </span> <span class="line" data-startTime="117">There's really only one function </span><span class="line" data-startTime="117">you have to worry </span><span class="line" data-startTime="120">about, and it's this </span><span class="line" data-startTime="120">one right here. </span> <span class="line" data-startTime="121">It's called get media </span><span class="line" data-startTime="121">file systems. </span> <span class="line" data-startTime="124">This function takes an object </span><span class="line" data-startTime="124">that describes the kind of </span><span class="line" data-startTime="128">media you're trying to access </span><span class="line" data-startTime="128">and then a callback function </span><span class="line" data-startTime="131">which will be called back with </span><span class="line" data-startTime="131">the file systems representing </span><span class="line" data-startTime="135">the various kinds of media </span><span class="line" data-startTime="135">on the user's system. </span> <span class="line" data-startTime="139">So that's the documentation if </span><span class="line" data-startTime="139">you want to read through it. </span> <span class="line" data-startTime="141">I prefer to actually </span><span class="line" data-startTime="141">work in live code. </span> <span class="line" data-startTime="143">So let's go over to the code and </span><span class="line" data-startTime="143">take a look at how this is </span><span class="line" data-startTime="147">actually written. </span> <span class="line" data-startTime="148">Well, actually before </span><span class="line" data-startTime="148">I do that let me &mdash; </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="149"><span class="speakerName">Pete LePage</span>: Actually, </span><span class="line" data-startTime="149">Joe, can I ask </span><span class="line" data-startTime="151">a real quick question? </span></p>

<p class="speaker"><span class="line" data-starttime="151"><span class="speakerName">Joe Marini</span>: Sure. </span></p>

<p class="speaker"><span class="line" data-starttime="152"><span class="speakerName">Pete LePage</span>: What's the </span><span class="line" data-startTime="152">difference between using the </span><span class="line" data-startTime="153">Media Galleries API and actually </span><span class="line" data-startTime="153">going and using like </span><span class="line" data-startTime="156">the HTML5 file system to go </span><span class="line" data-startTime="156">access a picture that the user </span><span class="line" data-startTime="160">has on their system? </span><span class="line" data-startTime="161">Why would I use one </span><span class="line" data-startTime="161">or the other? </span></p>

<p class="speaker"><span class="line" data-starttime="161"><span class="speakerName">Joe Marini</span>: Yeah, that's </span><span class="line" data-startTime="161">a great question. </span> <span class="line" data-startTime="164">Actually, they're </span><span class="line" data-startTime="164">complementary. </span> <span class="line" data-startTime="165">The callback that I just </span><span class="line" data-startTime="165">mentioned that the media file </span><span class="line" data-startTime="168">systems comes back </span><span class="line" data-startTime="168">with gives you an </span><span class="line" data-startTime="171">HTML5 file system object. </span> <span class="line" data-startTime="173">Well, actually, it's an array </span><span class="line" data-startTime="173">of these objects. </span> <span class="line" data-startTime="175">Each one of them represents the </span><span class="line" data-startTime="175">different media systems on </span><span class="line" data-startTime="177">the user's computer. </span> <span class="line" data-startTime="178">The main difference is that the </span><span class="line" data-startTime="178">media system that you get </span><span class="line" data-startTime="181">back only contains the media </span><span class="line" data-startTime="181">types that the Chrome Apps </span><span class="line" data-startTime="186">platform supports on </span><span class="line" data-startTime="186">the user's device. </span> <span class="line" data-startTime="188">So you don't have to worry about </span><span class="line" data-startTime="188">parsing through files </span><span class="line" data-startTime="190">that the system can't play back </span><span class="line" data-startTime="190">or anything like that. </span> <span class="line" data-startTime="193">So think of it as a convenience </span><span class="line" data-startTime="193">way of getting at </span><span class="line" data-startTime="196">the locations on the user's </span><span class="line" data-startTime="196">device of where </span><span class="line" data-startTime="198">the media is stored. </span> <span class="line" data-startTime="198">The system worries about where </span><span class="line" data-startTime="198">those things are located. </span></p>

<p><span class="line" data-startTime="200">You don't have to go traipsing </span><span class="line" data-startTime="200">through the user's device </span><span class="line" data-startTime="203">using the file system API. </span> <span class="line" data-startTime="205">It just makes things </span><span class="line" data-startTime="205">a lot easier. </span> <span class="line" data-startTime="206">But the objects that </span><span class="line" data-startTime="206">you get are </span><span class="line" data-startTime="208">actual file system objects. </span> <span class="line" data-startTime="209">So it's a nice little </span><span class="line" data-startTime="209">convenience thing. </span></p>

<p class="speaker"><span class="line" data-starttime="211"><span class="speakerName">Pete LePage</span>: And I think the </span><span class="line" data-startTime="211">other important thing to call </span><span class="line" data-startTime="212">out there is that the HTML5 </span><span class="line" data-startTime="212">file system API gives you </span><span class="line" data-startTime="215">access to a small sort of </span><span class="line" data-startTime="215">sandbox portion of the user's </span><span class="line" data-startTime="219">hard drive. </span><span class="line" data-startTime="220">It doesn't give you like full </span><span class="line" data-startTime="220">access to the user's hard </span><span class="line" data-startTime="223">drive, right? </span></p>

<p class="speaker"><span class="line" data-starttime="225"><span class="speakerName">Joe Marini</span>: Unless you </span><span class="line" data-startTime="225">specifically ask for the </span><span class="line" data-startTime="227">user's permission. </span><span class="line" data-startTime="229">If you're OK with throwing up </span><span class="line" data-startTime="229">an open dialogue or a save </span><span class="line" data-startTime="231">dialogue, then fine, you </span><span class="line" data-startTime="231">can go write files to </span><span class="line" data-startTime="233">your heart's content. </span><span class="line" data-startTime="234">But yes, this actually gives you </span><span class="line" data-startTime="234">access to an entire folder </span><span class="line" data-startTime="239">with the user's permission. </span><span class="line" data-startTime="240">So it's a nice convenience </span><span class="line" data-startTime="240">feature. </span></p>

<p class="speaker"><span class="line" data-starttime="242"><span class="speakerName">Pete LePage</span>: Awesome. </span></p>

<p class="speaker"><span class="line" data-starttime="243"><span class="speakerName">Joe Marini</span>: Yeah. </span> <span class="line" data-startTime="243">And in fact, the sample I'm </span><span class="line" data-startTime="243">going to be showing is in our </span><span class="line" data-startTime="247">Google Chrome GitHub repo. </span> <span class="line" data-startTime="249">And I'm showing that on </span><span class="line" data-startTime="249">the screen right now. </span> <span class="line" data-startTime="251">So if you go to github.com/googl </span><span class="line" data-startTime="252">echrome/chromeappsamples, and </span><span class="line" data-startTime="252">you scroll down to the Media </span><span class="line" data-startTime="257">Gallery folder right here, </span><span class="line" data-startTime="257">that's the code I'm going to </span><span class="line" data-startTime="259">be working in. </span> <span class="line" data-startTime="260">So if you want to follow along </span><span class="line" data-startTime="260">with me on your own </span><span class="line" data-startTime="261">machine, feel free. </span> <span class="line" data-startTime="264">Quickly, let me show you what </span><span class="line" data-startTime="264">the app looks like. </span> <span class="line" data-startTime="266">I'm going to jump over </span><span class="line" data-startTime="266">here to Chrome. </span> <span class="line" data-startTime="268">This is the Canary build, </span><span class="line" data-startTime="268">by the way. </span></p>

<p><span class="line" data-startTime="269">And I'm just going to launch </span><span class="line" data-startTime="269">this app right here. </span> <span class="line" data-startTime="272">And this is the Media </span><span class="line" data-startTime="272">Gallery Explorer. </span> <span class="line" data-startTime="273">This is the sample that's in </span><span class="line" data-startTime="273">that repo that I'm going to be </span><span class="line" data-startTime="276">talking about. </span> <span class="line" data-startTime="276">So let me just quickly show </span><span class="line" data-startTime="276">you how it works. </span> <span class="line" data-startTime="279">You can see the UI, I've got </span><span class="line" data-startTime="279">three buttons up here. </span> <span class="line" data-startTime="281">I've got a couple different </span><span class="line" data-startTime="281">places in the UI that show the </span><span class="line" data-startTime="284">various media information. </span> <span class="line" data-startTime="285">So I'm just going to click on </span><span class="line" data-startTime="285">the Get Galleries Info button. </span> <span class="line" data-startTime="288">And you can see that right here </span><span class="line" data-startTime="288">in this little div it </span><span class="line" data-startTime="290">says gallery count three &mdash; </span><span class="line" data-startTime="292">music, pictures, and movies. </span> <span class="line" data-startTime="294">Now it didn't ask me for </span><span class="line" data-startTime="294">permission because I've </span><span class="line" data-startTime="297">already run this app on my </span><span class="line" data-startTime="297">machine before and I </span><span class="line" data-startTime="300">specifically granted this </span><span class="line" data-startTime="300">application permission to go </span><span class="line" data-startTime="302">get those galleries. </span></p>

<p><span class="line" data-startTime="304">If I want to explicitly ask for </span><span class="line" data-startTime="304">permission or for the user </span><span class="line" data-startTime="307">to choose galleries, </span><span class="line" data-startTime="307">I can do that too. </span> <span class="line" data-startTime="309">So the Select Galleries button </span><span class="line" data-startTime="309">here brings up the UI that </span><span class="line" data-startTime="313">allows the user to specify </span><span class="line" data-startTime="313">which galleries </span><span class="line" data-startTime="315">I have access to. </span> <span class="line" data-startTime="316">So I can go ahead and turn </span><span class="line" data-startTime="316">off movies, for example. </span> <span class="line" data-startTime="318">Or if I want to add another </span><span class="line" data-startTime="318">folder, I can click the Add </span><span class="line" data-startTime="320">button and then add other </span><span class="line" data-startTime="320">folders to the default system </span><span class="line" data-startTime="325">folders for Media Galleries. </span></p>

<p class="speaker"><span class="line" data-starttime="326"><span class="speakerName">Pete LePage</span>: Oh, cool. </span></p>

<p class="speaker"><span class="line" data-starttime="326"><span class="speakerName">Joe Marini</span>: Yeah, it's </span><span class="line" data-startTime="326">pretty neat. </span> <span class="line" data-startTime="327">So when I click the Grant </span><span class="line" data-startTime="327">Permissions, now you'll see </span><span class="line" data-startTime="330">that that div has changed. </span> <span class="line" data-startTime="331">Now I only have access to the </span><span class="line" data-startTime="331">music and pictures folder. </span> <span class="line" data-startTime="335">So I'm going to go ahead and </span><span class="line" data-startTime="335">click the Scan Galleries </span><span class="line" data-startTime="337">button now. </span> <span class="line" data-startTime="337">And when I click Scan Galleries, </span><span class="line" data-startTime="337">you see on the </span><span class="line" data-startTime="339">left-hand side of the screen </span><span class="line" data-startTime="339">there in this div, I've got </span><span class="line" data-startTime="342">the contents my music and my </span><span class="line" data-startTime="342">pictures folder showing up. </span> <span class="line" data-startTime="346">And I'll just click on one </span><span class="line" data-startTime="346">of these pictures. </span> <span class="line" data-startTime="349">This is a photo that I took on </span><span class="line" data-startTime="349">the rooftop of the Google San </span><span class="line" data-startTime="353">Francisco offices. </span> <span class="line" data-startTime="354">You can see that here's </span><span class="line" data-startTime="354">our roof deck. </span> <span class="line" data-startTime="356">And it was a pretty nice day. </span> <span class="line" data-startTime="357">And I'm just going to </span><span class="line" data-startTime="357">scroll over, and </span><span class="line" data-startTime="357">there's the Bay Bridge. </span></p>

<p><span class="line" data-startTime="359">So I can go ahead and just </span><span class="line" data-startTime="359">take a look through these </span><span class="line" data-startTime="362">various pictures. </span> <span class="line" data-startTime="363">And you can see that the picture </span><span class="line" data-startTime="363">content is being read </span><span class="line" data-startTime="365">in and displayed in the div </span><span class="line" data-startTime="365">there on the right. </span> <span class="line" data-startTime="368">I could do the same </span><span class="line" data-startTime="368">thing with music. </span> <span class="line" data-startTime="369">If I click on a music file, </span><span class="line" data-startTime="369">you'll see that I get a music </span><span class="line" data-startTime="372">player control in the user </span><span class="line" data-startTime="372">interface there. </span> <span class="line" data-startTime="375">So this is the sample that </span><span class="line" data-startTime="375">I'm going to be talking </span><span class="line" data-startTime="377">about in the code. </span> <span class="line" data-startTime="378">So let's jump over </span><span class="line" data-startTime="378">to the code. </span> <span class="line" data-startTime="382">And I'm using Sublime Text here, </span><span class="line" data-startTime="382">but you can use whatever </span><span class="line" data-startTime="385">code editor you're </span><span class="line" data-startTime="385">happy with it. </span> <span class="line" data-startTime="386">So let's start off by </span><span class="line" data-startTime="386">taking a look at the </span><span class="line" data-startTime="388">manifest.json file. </span> <span class="line" data-startTime="390">This is the file that determines </span><span class="line" data-startTime="390">what permissions </span><span class="line" data-startTime="393">the application has and so on. </span></p>

<p><span class="line" data-startTime="394">And right here on line seven &mdash; </span><span class="line" data-startTime="396">this is the one you need </span><span class="line" data-startTime="396">to pay attention to &mdash; </span><span class="line" data-startTime="397">I'm asking for permission to </span><span class="line" data-startTime="397">the Media Galleries API. </span> <span class="line" data-startTime="402">And I'm requesting read </span><span class="line" data-startTime="402">access, and I'm also </span><span class="line" data-startTime="404">requesting that the system </span><span class="line" data-startTime="404">auto-detects where the media </span><span class="line" data-startTime="407">galleries are. </span> <span class="line" data-startTime="408">So when I call this, the system </span><span class="line" data-startTime="408">will say, well, sure, </span><span class="line" data-startTime="411">I'll tell you where they are to </span><span class="line" data-startTime="411">begin with and if the user </span><span class="line" data-startTime="413">wants to add more, they </span><span class="line" data-startTime="413">can add more. </span></p>

<p class="speaker"><span class="line" data-starttime="415"><span class="speakerName">Pete LePage</span>: Perfect. </span><span class="line" data-startTime="415">So that means, on a PC or on a </span><span class="line" data-startTime="415">Mac, you're always going to </span><span class="line" data-startTime="419">get the right path. </span><span class="line" data-startTime="421">You don't have to worry </span><span class="line" data-startTime="421">about, hey, where </span><span class="line" data-startTime="423">is this file located? </span><span class="line" data-startTime="425">Is it in like /users? </span></p>

<p class="speaker"><span class="line" data-starttime="428"><span class="speakerName">Joe Marini</span>: Exactly. </span><span class="line" data-startTime="429">You don't have to memorize what </span><span class="line" data-startTime="429">the default paths on the </span><span class="line" data-startTime="432">different platforms are. </span><span class="line" data-startTime="433">It just tells you. </span></p>

<p class="speaker"><span class="line" data-starttime="434"><span class="speakerName">Pete LePage</span>: And if it changes, </span><span class="line" data-startTime="434">you don't have to </span><span class="line" data-startTime="435">deal with it either. </span></p>

<p class="speaker"><span class="line" data-starttime="436"><span class="speakerName">Joe Marini</span>: Exactly. </span> <span class="line" data-startTime="436">If the user decides to change </span><span class="line" data-startTime="436">the locations, again, the </span><span class="line" data-startTime="439">system makes that transparent. </span> <span class="line" data-startTime="441">You don't have to worry </span><span class="line" data-startTime="441">about any of that. </span> <span class="line" data-startTime="443">So that's the manifest.json </span><span class="line" data-startTime="443">file. </span> <span class="line" data-startTime="445">Let's run over to what I call </span><span class="line" data-startTime="445">the runtime.js file. </span> <span class="line" data-startTime="448">This is basically the </span><span class="line" data-startTime="448">background page. </span> <span class="line" data-startTime="451">This controls the way the </span><span class="line" data-startTime="451">application is launched. </span> <span class="line" data-startTime="455">A couple of things </span><span class="line" data-startTime="455">I'm doing here. </span> <span class="line" data-startTime="456">First, I'm handling the </span><span class="line" data-startTime="456">onLaunched event right here. </span> <span class="line" data-startTime="459">I've got an addListener </span><span class="line" data-startTime="459">for onLaunched. </span> <span class="line" data-startTime="461">And what I'm doing is creating </span><span class="line" data-startTime="461">the window, and then inside </span><span class="line" data-startTime="464">that window I'm setting a </span><span class="line" data-startTime="464">global variable called </span><span class="line" data-startTime="467">mgabrestart. </span> <span class="line" data-startTime="469">And the reason I'm doing this </span><span class="line" data-startTime="469">is because I was playing </span><span class="line" data-startTime="471">around with the API for when </span><span class="line" data-startTime="471">apps are launched as opposed </span><span class="line" data-startTime="474">to being restarted. </span></p>

<p><span class="line" data-startTime="475">And I wanted to see if I </span><span class="line" data-startTime="475">could just make the app </span><span class="line" data-startTime="477">automatically read the gallery </span><span class="line" data-startTime="477">as if it was restarted versus </span><span class="line" data-startTime="480">being just initially launched. </span> <span class="line" data-startTime="481">So over down in the onRestarted </span><span class="line" data-startTime="481">event, I have the </span><span class="line" data-startTime="484">same kind of code where I create </span><span class="line" data-startTime="484">the window, but I set </span><span class="line" data-startTime="486">that variable to true to </span><span class="line" data-startTime="486">indicate that the app was </span><span class="line" data-startTime="489">restarted instead of launched. </span> <span class="line" data-startTime="491">That's all this does. </span> <span class="line" data-startTime="492">This is typical background </span><span class="line" data-startTime="492">page for a Chrome App. </span> <span class="line" data-startTime="495">The HTML files, also pretty </span><span class="line" data-startTime="495">straightforward, just got some </span><span class="line" data-startTime="498">buttons that control the UI. </span> <span class="line" data-startTime="499">I've got some divs that </span><span class="line" data-startTime="499">contain the content. </span></p>

<p><span class="line" data-startTime="502">I have the script tag right </span><span class="line" data-startTime="502">here that includes my code </span><span class="line" data-startTime="506">that actually runs the </span><span class="line" data-startTime="506">application, and that's </span><span class="line" data-startTime="508">media-gallery.js. </span> <span class="line" data-startTime="510">So let's jump over to that file </span><span class="line" data-startTime="510">because this is where the </span><span class="line" data-startTime="513">meat of the code is. </span> <span class="line" data-startTime="514">And I'm going to scroll all the </span><span class="line" data-startTime="514">way down to the bottom. </span></p>

<p class="speaker"><span class="line" data-starttime="516"><span class="speakerName">Male Speaker</span>: Hey, Joe, if it's </span><span class="line" data-startTime="516">possible, could you bump </span><span class="line" data-startTime="518">up your text? </span><span class="line" data-startTime="519">We've got some people on </span><span class="line" data-startTime="519">YouTube asking you </span><span class="line" data-startTime="520">to bump that up. </span></p>

<p class="speaker"><span class="line" data-starttime="521"><span class="speakerName">Joe Marini</span>: Oh, sure, yes. </span> <span class="line" data-startTime="522">I will be happy to </span><span class="line" data-startTime="522">bump the text up. </span> <span class="line" data-startTime="524">Hang on one second. </span> <span class="line" data-startTime="526">Let's go ahead and make </span><span class="line" data-startTime="526">the font size. </span> <span class="line" data-startTime="530">There we go out. </span> <span class="line" data-startTime="531">That should be easier to read. </span> <span class="line" data-startTime="535">Hopefully, that's better. </span> <span class="line" data-startTime="536">I got a nice full screen </span><span class="line" data-startTime="536">of code there. </span> <span class="line" data-startTime="538">All right, so here in my </span><span class="line" data-startTime="538">window.addEventListener for </span><span class="line" data-startTime="543">the loading event, I'm </span><span class="line" data-startTime="543">setting up the UI. </span></p>

<p><span class="line" data-startTime="547">I've got some addEventListener </span><span class="line" data-startTime="547">calls on the various buttons. </span> <span class="line" data-startTime="553">And then down here, I'm </span><span class="line" data-startTime="553">listening for the change event </span><span class="line" data-startTime="556">on that select [INAUDIBLE] </span><span class="line" data-startTime="558">that's on the left-hand </span><span class="line" data-startTime="558">side there. </span> <span class="line" data-startTime="559">So whenever the [INAUDIBLE] </span><span class="line" data-startTime="560">changes in the media gallery </span><span class="line" data-startTime="560">content of the list, I have an </span><span class="line" data-startTime="564">event that fires, and then </span><span class="line" data-startTime="564">I update the selection. </span> <span class="line" data-startTime="566">And this is where I read the </span><span class="line" data-startTime="566">picture, read the audio, </span><span class="line" data-startTime="569">whatever it is. </span> <span class="line" data-startTime="570">So let's actually take a </span><span class="line" data-startTime="570">look at how this works. </span> <span class="line" data-startTime="574">Right up here on line </span><span class="line" data-startTime="574">240, this is </span><span class="line" data-startTime="576">where the magic happens. </span> <span class="line" data-startTime="578">You can see right here that if </span><span class="line" data-startTime="578">the app was restarted, I call </span><span class="line" data-startTime="582">the getMediaFileSystems API. </span> <span class="line" data-startTime="584">This is the restart case. </span> <span class="line" data-startTime="586">For the launched case, I </span><span class="line" data-startTime="586">actually wait for the Scan </span><span class="line" data-startTime="589">Galleries button </span><span class="line" data-startTime="589">to be clicked. </span></p>

<p><span class="line" data-startTime="590">But it does the same thing, it </span><span class="line" data-startTime="590">calls getMediaFileSystems. </span> <span class="line" data-startTime="593">And it takes that little options </span><span class="line" data-startTime="593">object right there. </span> <span class="line" data-startTime="597">The property I'm passing in </span><span class="line" data-startTime="597">is called interactive. </span> <span class="line" data-startTime="599">And it says if_needed. </span> <span class="line" data-startTime="601">Now I can pass in if_needed, </span><span class="line" data-startTime="601">which means if the user hasn't </span><span class="line" data-startTime="604">already granted permission, </span><span class="line" data-startTime="604">it will be prompted to </span><span class="line" data-startTime="607">the user to do so. </span> <span class="line" data-startTime="609">However, if the user has already </span><span class="line" data-startTime="609">granted permissions, </span><span class="line" data-startTime="611">that dialog doesn't show up. </span> <span class="line" data-startTime="613">I could also pass in </span><span class="line" data-startTime="613">yes, which will </span><span class="line" data-startTime="615">always show the dialog. </span> <span class="line" data-startTime="616">Or I can pass in no, which means </span><span class="line" data-startTime="616">don't show the dialog if </span><span class="line" data-startTime="619">you don't have to. </span> <span class="line" data-startTime="620">So the getMediaFileSystems </span><span class="line" data-startTime="620">API call takes </span><span class="line" data-startTime="626">that options object. </span></p>

<p><span class="line" data-startTime="627">And here is the callback </span><span class="line" data-startTime="627">function. </span> <span class="line" data-startTime="630">It's called getGalleriesInfo. </span> <span class="line" data-startTime="631">So let's go ahead and </span><span class="line" data-startTime="631">scroll up to the </span><span class="line" data-startTime="633">getGalleriesInfo function. </span> <span class="line" data-startTime="634">That's right here. </span> <span class="line" data-startTime="636">The first thing I'm going </span><span class="line" data-startTime="636">to do is clear out </span><span class="line" data-startTime="638">that content div. </span> <span class="line" data-startTime="638">That's the div on the right-hand </span><span class="line" data-startTime="638">side that shows the </span><span class="line" data-startTime="640">pictures, the music, </span><span class="line" data-startTime="640">and so on. </span> <span class="line" data-startTime="643">And then, when this function </span><span class="line" data-startTime="643">is called, this parameter </span><span class="line" data-startTime="646">right here, the results </span><span class="line" data-startTime="646">parameter, that's going to be </span><span class="line" data-startTime="649">an array of HTML5 file system </span><span class="line" data-startTime="649">objects representing the </span><span class="line" data-startTime="653">various media galleries. </span> <span class="line" data-startTime="654">So the folder for pictures, </span><span class="line" data-startTime="654">the folder for </span><span class="line" data-startTime="656">music, and so on. </span></p>

<p class="speaker"><span class="line" data-starttime="658"><span class="speakerName">Pete LePage</span>: So logically, you </span><span class="line" data-startTime="658">should get three back, and </span><span class="line" data-startTime="660">then I would just [? zoom ?] </span><span class="line" data-startTime="660">within each of the folders. </span><span class="line" data-startTime="662">Oh, cool </span></p>

<p class="speaker"><span class="line" data-starttime="663"><span class="speakerName">Joe Marini</span>: Yeah, three, two, </span><span class="line" data-startTime="663">however many you requested, </span><span class="line" data-startTime="665">however many the user </span><span class="line" data-startTime="665">granted access to. </span> <span class="line" data-startTime="668">So I'm checking here to see if </span><span class="line" data-startTime="668">the length of that results </span><span class="line" data-startTime="671">array is greater than zero, </span><span class="line" data-startTime="671">because then I've </span><span class="line" data-startTime="673">got stuff to process. </span> <span class="line" data-startTime="674">And then I'm just using this </span><span class="line" data-startTime="674">forEach loop right here with </span><span class="line" data-startTime="677">this callback function to go </span><span class="line" data-startTime="677">over each one of the gallery </span><span class="line" data-startTime="683">pieces of information </span><span class="line" data-startTime="683">that comes back. </span> <span class="line" data-startTime="685">Now the gallery information </span><span class="line" data-startTime="685">comes back as a JSON string. </span> <span class="line" data-startTime="688">And it gives you an ID </span><span class="line" data-startTime="688">for the gallery and </span><span class="line" data-startTime="690">it gives you a name. </span></p>

<p><span class="line" data-startTime="691">The name is a human-readable </span><span class="line" data-startTime="691">string like music, or </span><span class="line" data-startTime="694">pictures, or whatever it is </span><span class="line" data-startTime="694">localized to your system. </span> <span class="line" data-startTime="697">The ID is a tag that you can use </span><span class="line" data-startTime="697">to uniquely identify the </span><span class="line" data-startTime="702">media gallery that you're </span><span class="line" data-startTime="702">working with. </span> <span class="line" data-startTime="704">So you can save that aside and </span><span class="line" data-startTime="704">use it to go back and get </span><span class="line" data-startTime="707">files at a later date </span><span class="line" data-startTime="707">or whatever. </span> <span class="line" data-startTime="709">So that's what I'm using </span><span class="line" data-startTime="709">that there for. </span> <span class="line" data-startTime="711">So I loop over each one of these </span><span class="line" data-startTime="711">IDs so that I know how </span><span class="line" data-startTime="714">many galleries I'm </span><span class="line" data-startTime="714">dealing with. </span> <span class="line" data-startTime="715">And I store those in this global </span><span class="line" data-startTime="715">variable right here </span><span class="line" data-startTime="719">that holds all the different </span><span class="line" data-startTime="719">pieces of arrays. </span></p>

<p><span class="line" data-startTime="723">And then that's how I get the </span><span class="line" data-startTime="723">information about what </span><span class="line" data-startTime="725">galleries are on the system. </span> <span class="line" data-startTime="727">Now the Scan Galleries button </span><span class="line" data-startTime="727">fires off of this function </span><span class="line" data-startTime="730">right here called </span><span class="line" data-startTime="730">scanGalleries. </span> <span class="line" data-startTime="732">And again, it takes </span><span class="line" data-startTime="732">an argument for a </span><span class="line" data-startTime="734">particular file system. </span> <span class="line" data-startTime="736">So what's going to happen is </span><span class="line" data-startTime="736">it's going to loop over each </span><span class="line" data-startTime="740">one of those array elements </span><span class="line" data-startTime="740">for however many </span><span class="line" data-startTime="742">galleries I got back. </span> <span class="line" data-startTime="744">And each time it's going to do </span><span class="line" data-startTime="744">that, it's going to call this </span><span class="line" data-startTime="746">addGallery function. </span> <span class="line" data-startTime="748">So I parse in the name </span><span class="line" data-startTime="748">object for the </span><span class="line" data-startTime="752">particular file system. </span> <span class="line" data-startTime="753">Again, that's an ID and </span><span class="line" data-startTime="753">a human-readable name. </span></p>

<p><span class="line" data-startTime="755">And then I'm going to call </span><span class="line" data-startTime="755">this addGallery function, </span><span class="line" data-startTime="758">which goes through each gallery </span><span class="line" data-startTime="758">and enumerates all the </span><span class="line" data-startTime="761">different file objects </span><span class="line" data-startTime="761">that are in there. </span> <span class="line" data-startTime="764">And so what I do is I create </span><span class="line" data-startTime="764">a new object called a </span><span class="line" data-startTime="766">GalleryData. </span> <span class="line" data-startTime="767">And you can see that </span><span class="line" data-startTime="767">in my code later. </span> <span class="line" data-startTime="769">That's just a little JavaScript </span><span class="line" data-startTime="769">object I have to </span><span class="line" data-startTime="771">keep track of the various file </span><span class="line" data-startTime="771">names, and sizes of files, and </span><span class="line" data-startTime="775">different things the </span><span class="line" data-startTime="775">app needs to do. </span> <span class="line" data-startTime="777">And then I call the createReader </span><span class="line" data-startTime="777">function. </span> <span class="line" data-startTime="780">Now this is a part of the </span><span class="line" data-startTime="780">HTML5 file system API. </span> <span class="line" data-startTime="784">Remember, earlier, I said that </span><span class="line" data-startTime="784">they're complimentary. </span> <span class="line" data-startTime="786">So you get a file system object </span><span class="line" data-startTime="786">and then you use the </span><span class="line" data-startTime="788">file system APIs on that </span><span class="line" data-startTime="788">gallery object </span><span class="line" data-startTime="791">to do the file reading. </span> <span class="line" data-startTime="793">So I create the reader. </span> <span class="line" data-startTime="794">And then on the reader I </span><span class="line" data-startTime="794">call the readEntries. </span></p>

<p><span class="line" data-startTime="797">Again, more HTML5 file system </span><span class="line" data-startTime="797">standard stuff. </span> <span class="line" data-startTime="801">I have a function here </span><span class="line" data-startTime="801">called scanGallery. </span> <span class="line" data-startTime="803">That's the callback that's going </span><span class="line" data-startTime="803">to get called by the </span><span class="line" data-startTime="805">file system to read </span><span class="line" data-startTime="805">the actual folder. </span> <span class="line" data-startTime="807">And that's up here, so </span><span class="line" data-startTime="807">I'll scroll up to </span><span class="line" data-startTime="810">the scanGallery function. </span> <span class="line" data-startTime="812">So the scanGallery function is </span><span class="line" data-startTime="812">going to get a whole bunch of </span><span class="line" data-startTime="814">file system entries. </span> <span class="line" data-startTime="816">These are the individual file </span><span class="line" data-startTime="816">entries for each particular </span><span class="line" data-startTime="820">file inside that gallery. </span> <span class="line" data-startTime="822">So I'm going see if the length </span><span class="line" data-startTime="822">of the entries array is zero. </span></p>

<p><span class="line" data-startTime="826">And when that happens, the </span><span class="line" data-startTime="826">file system API is done </span><span class="line" data-startTime="830">calling this callback. </span> <span class="line" data-startTime="831">It's processed all </span><span class="line" data-startTime="831">the elements in </span><span class="line" data-startTime="833">that particular folder. </span> <span class="line" data-startTime="834">And the reason that I need to do </span><span class="line" data-startTime="834">this is because the way the </span><span class="line" data-startTime="837">file system works, especially </span><span class="line" data-startTime="837">in the async version, this </span><span class="line" data-startTime="839">function is going to get called </span><span class="line" data-startTime="839">over and over again, </span><span class="line" data-startTime="841">because it may not get called </span><span class="line" data-startTime="841">with all of the entries in a </span><span class="line" data-startTime="844">particular folder the </span><span class="line" data-startTime="844">very first time. </span> <span class="line" data-startTime="846">The system is just going to </span><span class="line" data-startTime="846">keep calling this function </span><span class="line" data-startTime="848">until there's no more </span><span class="line" data-startTime="848">files and no more </span><span class="line" data-startTime="849">folders left to process. </span></p>

<p><span class="line" data-startTime="851">So if it's not equal to </span><span class="line" data-startTime="851">zero, that means I've </span><span class="line" data-startTime="853">got stuff to do. </span> <span class="line" data-startTime="854">So I'm going to have this loop </span><span class="line" data-startTime="854">here going from zero to the </span><span class="line" data-startTime="857">number of entries </span><span class="line" data-startTime="857">in the array. </span> <span class="line" data-startTime="859">I check to see if the </span><span class="line" data-startTime="859">entry is a file. </span> <span class="line" data-startTime="861">And if it is a file, I have a </span><span class="line" data-startTime="861">function here called addItem </span><span class="line" data-startTime="865">that's going to add the item to </span><span class="line" data-startTime="865">that little select list on </span><span class="line" data-startTime="867">the left-hand side there. </span> <span class="line" data-startTime="868">And then I've got this little </span><span class="line" data-startTime="868">closer function right here </span><span class="line" data-startTime="872">that's going to get </span><span class="line" data-startTime="872">the metadata for </span><span class="line" data-startTime="874">that particular file. </span> <span class="line" data-startTime="875">In this case, all I'm </span><span class="line" data-startTime="875">interested in </span><span class="line" data-startTime="877">is the size in bytes. </span> <span class="line" data-startTime="878">And I'm not really doing </span><span class="line" data-startTime="878">anything with it. </span> <span class="line" data-startTime="880">I'm just showing that </span><span class="line" data-startTime="880">it's possible to get </span><span class="line" data-startTime="881">information like this. </span> <span class="line" data-startTime="883">If it's a directory, on the </span><span class="line" data-startTime="883">other hand, and not a file, </span><span class="line" data-startTime="886">I'm going to push that directory </span><span class="line" data-startTime="886">onto a stack that </span><span class="line" data-startTime="889">I'm using to process </span><span class="line" data-startTime="889">subfolders. </span> <span class="line" data-startTime="892">And then down here at the </span><span class="line" data-startTime="892">bottom, I'm just going to call </span><span class="line" data-startTime="894">readEntries again. </span></p>

<p><span class="line" data-startTime="895">And so this function is going </span><span class="line" data-startTime="895">to keep calling itself over </span><span class="line" data-startTime="897">and over until there's </span><span class="line" data-startTime="897">no more files. </span> <span class="line" data-startTime="899">Now at the end of this function, </span><span class="line" data-startTime="899">that select list in </span><span class="line" data-startTime="903">the div on the left is going </span><span class="line" data-startTime="903">to be full of all the files </span><span class="line" data-startTime="906">that I've processed </span><span class="line" data-startTime="906">and read in. </span> <span class="line" data-startTime="908">So now let's go take a look at </span><span class="line" data-startTime="908">the function for the change </span><span class="line" data-startTime="911">handler and see what happens </span><span class="line" data-startTime="911">when the user actually makes a </span><span class="line" data-startTime="914">selection in the list. </span> <span class="line" data-startTime="915">So if I scroll back down here </span><span class="line" data-startTime="915">to the bottom, remember </span><span class="line" data-startTime="917">there's this function here </span><span class="line" data-startTime="917">called updateSelection. </span> <span class="line" data-startTime="920">So let's scroll on over to </span><span class="line" data-startTime="920">the updateSelection code. </span></p>

<p><span class="line" data-startTime="924">And that is right up here. </span></p>

<p class="speaker"><span class="line" data-starttime="933"><span class="speakerName">Pete LePage</span>: Joe, one thing I </span><span class="line" data-startTime="933">noticed in this particular </span><span class="line" data-startTime="935">example, you didn't use </span><span class="line" data-startTime="935">an MVC framework or </span><span class="line" data-startTime="938">anything like that. </span><span class="line" data-startTime="939">Is there a reason why in this </span><span class="line" data-startTime="939">sample you didn't do that? </span></p>

<p class="speaker"><span class="line" data-starttime="943"><span class="speakerName">Joe Marini</span>: Just </span><span class="line" data-startTime="943">hacking around. </span><span class="line" data-startTime="945">So I wanted to make a sample </span><span class="line" data-startTime="945">where the code for the Media </span><span class="line" data-startTime="948">Galleries API was the focus. </span><span class="line" data-startTime="950">And everybody's got their </span><span class="line" data-startTime="950">personal preferences. </span><span class="line" data-startTime="952">People bond with their </span><span class="line" data-startTime="952">MVC frameworks. </span></p>

<p class="speaker"><span class="line" data-starttime="954"><span class="speakerName">Pete LePage</span>: It's true, </span><span class="line" data-startTime="954">Angular rocks. </span></p>

<p class="speaker"><span class="line" data-starttime="956"><span class="speakerName">Joe Marini</span>: Absolutely, so </span><span class="line" data-startTime="956">please go use Angular. </span> <span class="line" data-startTime="958">But whatever MVC framework you </span><span class="line" data-startTime="958">feel like using, that's fine. </span> <span class="line" data-startTime="962">I just didn't want that to </span><span class="line" data-startTime="962">be getting in the way. </span> <span class="line" data-startTime="964">So here in the updateSelection </span><span class="line" data-startTime="964">code, I'm going over the </span><span class="line" data-startTime="967">length of the gallery array </span><span class="line" data-startTime="967">to get the system that the </span><span class="line" data-startTime="970">selected file belongs to. </span> <span class="line" data-startTime="972">Remember, I stored aside the ID, </span><span class="line" data-startTime="972">and now I'm going to take </span><span class="line" data-startTime="974">that file and figure out which </span><span class="line" data-startTime="974">gallery it's a part of. </span> <span class="line" data-startTime="976">It might be in music, it </span><span class="line" data-startTime="976">might be in pictures, </span><span class="line" data-startTime="979">it might be in movies. </span> <span class="line" data-startTime="980">And what I'm going to do is, </span><span class="line" data-startTime="980">based on the kind of file that </span><span class="line" data-startTime="983">it is, whether it's a picture, </span><span class="line" data-startTime="983">or music, or whatever, I'm </span><span class="line" data-startTime="988">going to add that content </span><span class="line" data-startTime="988">to the div. </span> <span class="line" data-startTime="991">The way that I'm doing that is </span><span class="line" data-startTime="991">up here I've got these arrays </span><span class="line" data-startTime="995">with the various </span><span class="line" data-startTime="995">file suffixes. </span> <span class="line" data-startTime="997">So I've got image formats like </span><span class="line" data-startTime="997">PNG, and BMP and JPEGs. </span> <span class="line" data-startTime="1001">For video, I've got MOV, and </span><span class="line" data-startTime="1001">MPEG, and WEBM and so on. </span></p>

<p><span class="line" data-startTime="1006">So that way, I could figure </span><span class="line" data-startTime="1006">out what kind of file is. </span> <span class="line" data-startTime="1008">So back down here, let's go back </span><span class="line" data-startTime="1008">down to the code where I </span><span class="line" data-startTime="1012">handle the selection. </span> <span class="line" data-startTime="1014">I'm using these HTML5 </span><span class="line" data-startTime="1014">data attributes. </span> <span class="line" data-startTime="1016">Each time an item is added to </span><span class="line" data-startTime="1016">the select list, I store the </span><span class="line" data-startTime="1020">path to the item as </span><span class="line" data-startTime="1020">a data attribute. </span> <span class="line" data-startTime="1023">So that way I can just </span><span class="line" data-startTime="1023">easily get it again. </span> <span class="line" data-startTime="1026">So that way, when I get the full </span><span class="line" data-startTime="1026">path to the item, again, </span><span class="line" data-startTime="1029">using the HTML5 file </span><span class="line" data-startTime="1029">system API right </span><span class="line" data-startTime="1032">here to get the file. </span> <span class="line" data-startTime="1034">And when that function callback </span><span class="line" data-startTime="1034">gets called, I have a </span><span class="line" data-startTime="1037">file entry. </span> <span class="line" data-startTime="1038">And all I do is clear out the </span><span class="line" data-startTime="1038">content div to clear out </span><span class="line" data-startTime="1042">whatever was in there before. </span></p>

<p><span class="line" data-startTime="1043">And then I have these various </span><span class="line" data-startTime="1043">functions, addImage, addAudio, </span><span class="line" data-startTime="1046">addVideo, and so on. </span> <span class="line" data-startTime="1048">Let's just take a look at the </span><span class="line" data-startTime="1048">addImage case because the rest </span><span class="line" data-startTime="1050">of them are just pretty </span><span class="line" data-startTime="1050">much carbon copies. </span> <span class="line" data-startTime="1052">So for adding a picture item, </span><span class="line" data-startTime="1052">this function right here, </span><span class="line" data-startTime="1059">addImageToContentDiv, </span><span class="line" data-startTime="1059">all it does is it </span><span class="line" data-startTime="1062">creates an image element. </span> <span class="line" data-startTime="1065">It appends the image element </span><span class="line" data-startTime="1065">into the content div, and then </span><span class="line" data-startTime="1069">returns that image element back </span><span class="line" data-startTime="1069">to the calling function, </span><span class="line" data-startTime="1073">so back down here. </span> <span class="line" data-startTime="1075">And assuming the new element was </span><span class="line" data-startTime="1075">created, I have a function </span><span class="line" data-startTime="1079">here that uses the HTML5 </span><span class="line" data-startTime="1079">file system to just </span><span class="line" data-startTime="1083">read the raw bytes. </span> <span class="line" data-startTime="1084">So I created a new File </span><span class="line" data-startTime="1084">Reader object. </span> <span class="line" data-startTime="1087">I set up onerror handler. </span> <span class="line" data-startTime="1089">I set up an onloadend handler </span><span class="line" data-startTime="1089">function right here. </span> <span class="line" data-startTime="1092">So when the data is finished </span><span class="line" data-startTime="1092">reading, I simply set the </span><span class="line" data-startTime="1095">source of the image element </span><span class="line" data-startTime="1095">to the result of </span><span class="line" data-startTime="1099">the file read operation. </span> <span class="line" data-startTime="1101">So this is going to come </span><span class="line" data-startTime="1101">back as a data URL. </span></p>

<p><span class="line" data-startTime="1104">Right here on the next line, </span><span class="line" data-startTime="1104">on 130, I'm calling </span><span class="line" data-startTime="1106">reader.readAsDataURL. </span> <span class="line" data-startTime="1109">So if it's an image, it will get </span><span class="line" data-startTime="1109">read in as an image data </span><span class="line" data-startTime="1111">URL versus music, versus </span><span class="line" data-startTime="1111">video, and so on. </span> <span class="line" data-startTime="1115">And then I just simply append </span><span class="line" data-startTime="1115">that content into the source </span><span class="line" data-startTime="1119">attribute for, say, the image, </span><span class="line" data-startTime="1119">or the movie, or the video. </span> <span class="line" data-startTime="1124">So that's basically all </span><span class="line" data-startTime="1124">there is to it. </span> <span class="line" data-startTime="1125">I'm using the HTML5 file system </span><span class="line" data-startTime="1125">to read the raw bytes. </span> <span class="line" data-startTime="1128">And I'm just relying on the </span><span class="line" data-startTime="1128">Media Gallery API to give me </span><span class="line" data-startTime="1132">access to the HTML5 file systems </span><span class="line" data-startTime="1132">that represent the </span><span class="line" data-startTime="1136">media galleries. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1139"><span class="speakerName">Pete LePage</span>: Cool. </span></p>

<p class="speaker"><span class="line" data-starttime="1140"><span class="speakerName">Joe Marini</span>: Pretty </span><span class="line" data-startTime="1140">straightforward, yeah. </span><span class="line" data-startTime="1142">Code is online. </span><span class="line" data-startTime="1143">This sample is in </span><span class="line" data-startTime="1143">our GitHub repo. </span><span class="line" data-startTime="1146">I encourage you to fork it, and </span><span class="line" data-startTime="1146">play with it, test it out. </span><span class="line" data-startTime="1150">And that's pretty much </span><span class="line" data-startTime="1150">all there is to it. </span><span class="line" data-startTime="1152">So if there's questions, we </span><span class="line" data-startTime="1152">can start taking those. </span></p>

<p class="speaker"><span class="line" data-starttime="1155"><span class="speakerName">Pete LePage</span>: Just one question </span><span class="line" data-startTime="1155">that I wanted to </span><span class="line" data-startTime="1156">shoot off the bat. </span><span class="line" data-startTime="1157">Is it read-write or is it just </span><span class="line" data-startTime="1157">read-only right now? </span></p>

<p class="speaker"><span class="line" data-starttime="1160"><span class="speakerName">Joe Marini</span>: So that's </span><span class="line" data-startTime="1160">a good question. </span><span class="line" data-startTime="1161">So the intention is when the API </span><span class="line" data-startTime="1161">is complete, you'll have </span><span class="line" data-startTime="1165">access to read-only, read-write, </span><span class="line" data-startTime="1165">and you'll also be </span><span class="line" data-startTime="1169">able to add new file content to </span><span class="line" data-startTime="1169">the user's media galleries. </span><span class="line" data-startTime="1173">So as the API stands today, we </span><span class="line" data-startTime="1173">only support read-only access. </span><span class="line" data-startTime="1178">So write is coming, add files </span><span class="line" data-startTime="1178">is coming, they're </span><span class="line" data-startTime="1181">just not there yet. </span></p>

<p class="speaker"><span class="line" data-starttime="1182"><span class="speakerName">Pete LePage</span>: OK, and I noticed </span><span class="line" data-startTime="1182">as I was looking through the </span><span class="line" data-startTime="1184">documentation preparing for this </span><span class="line" data-startTime="1184">that some of these things </span><span class="line" data-startTime="1187">are still under the experimental </span><span class="line" data-startTime="1187">and some are no </span><span class="line" data-startTime="1190">longer under experimental. </span><span class="line" data-startTime="1191">Do you want to talk to talk </span><span class="line" data-startTime="1191">just really quickly about </span><span class="line" data-startTime="1193">what's still under experimental, </span><span class="line" data-startTime="1193">what's not? </span></p>

<p class="speaker"><span class="line" data-starttime="1197"><span class="speakerName">Joe Marini</span>: If I remember </span><span class="line" data-startTime="1197">correctly, the actual code for </span><span class="line" data-startTime="1201">getting the media galleries, </span><span class="line" data-startTime="1201">let me bring </span><span class="line" data-startTime="1203">up that page again. </span><span class="line" data-startTime="1204">The Media Galleries API itself </span><span class="line" data-startTime="1204">was recently moved out from </span><span class="line" data-startTime="1208">experimental. </span></p>

<p class="speaker"><span class="line" data-starttime="1209"><span class="speakerName">Pete LePage</span>: Yeah, so that's </span><span class="line" data-startTime="1209">what it looked like. </span></p>

<p class="speaker"><span class="line" data-starttime="1210"><span class="speakerName">Joe Marini</span>: Yeah. </span><span class="line" data-startTime="1210">So you no longer need to put </span><span class="line" data-startTime="1210">the experimental keyword in </span><span class="line" data-startTime="1214">front of it. </span><span class="line" data-startTime="1216">It's ready to go. </span></p>

<p class="speaker"><span class="line" data-starttime="1217"><span class="speakerName">Pete LePage</span>: OK, awesome. </span><span class="line" data-startTime="1221">Let me bring up some of </span><span class="line" data-startTime="1221">the questions that </span><span class="line" data-startTime="1222">we've got over here. </span><span class="line" data-startTime="1224">So [? DJazz ?] </span><span class="line" data-startTime="1226">from Sweden wants to know if he </span><span class="line" data-startTime="1226">can access the local file </span><span class="line" data-startTime="1229">system using standard open, and </span><span class="line" data-startTime="1229">save, save as dialogs with </span><span class="line" data-startTime="1233">a permissions flag. </span><span class="line" data-startTime="1235">And I think this is </span><span class="line" data-startTime="1235">not necessarily </span><span class="line" data-startTime="1236">specifically with &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1238"><span class="speakerName">Joe Marini</span>: Yeah, this is not </span><span class="line" data-startTime="1238">a Media Galleries specific </span><span class="line" data-startTime="1241">question, but the </span><span class="line" data-startTime="1241">answer is yes. </span><span class="line" data-startTime="1243">If you're using the HTML5 file </span><span class="line" data-startTime="1243">system, you are able to invoke </span><span class="line" data-startTime="1248">an open or save dialog. </span><span class="line" data-startTime="1250">In fact, outside of the local </span><span class="line" data-startTime="1250">application sandbox, that's </span><span class="line" data-startTime="1254">the only way to get file </span><span class="line" data-startTime="1254">content onto the </span><span class="line" data-startTime="1257">user system, so yes. </span><span class="line" data-startTime="1258">But the answer is </span><span class="line" data-startTime="1258">yes, you can. </span><span class="line" data-startTime="1260">That was a rather long-winded </span><span class="line" data-startTime="1260">way of saying, yes. </span></p>

<p class="speaker"><span class="line" data-starttime="1262"><span class="speakerName">Pete LePage</span>: Excellent. </span><span class="line" data-startTime="1264">And then the second question </span><span class="line" data-startTime="1264">that we had, let me just </span><span class="line" data-startTime="1270">reread it here. </span><span class="line" data-startTime="1274">Sorry. </span><span class="line" data-startTime="1275">Web Intents, I'm going to </span><span class="line" data-startTime="1275">skip that question and </span><span class="line" data-startTime="1278">go to the next one. </span></p>

<p class="speaker"><span class="line" data-starttime="1278"><span class="speakerName">Joe Marini</span>: Oh, I think the </span><span class="line" data-startTime="1278">web's intents are good. </span></p>

<p class="speaker"><span class="line" data-starttime="1281"><span class="speakerName">Pete LePage</span>: Ba boom chang. </span> <span class="line" data-startTime="1282">Paul, that one was for you. </span> <span class="line" data-startTime="1286">All right. </span> <span class="line" data-startTime="1286">And actually, it looks like </span><span class="line" data-startTime="1286">that's all the questions that </span><span class="line" data-startTime="1289">we have today. </span> <span class="line" data-startTime="1289">So nice easy session. </span> <span class="line" data-startTime="1292">I want to thank everybody </span><span class="line" data-startTime="1292">for joining us. </span> <span class="line" data-startTime="1294">We'll be back next week. </span> <span class="line" data-startTime="1295">Renato and I are going </span><span class="line" data-startTime="1295">to be joining you. </span> <span class="line" data-startTime="1297">So Renato's going </span><span class="line" data-startTime="1297">to be joining, I </span><span class="line" data-startTime="1299">guess, me from Sao Paulo. </span> <span class="line" data-startTime="1304">And we're going to be talking, </span><span class="line" data-startTime="1304">I believe, about the Web View </span><span class="line" data-startTime="1309">API, so being able to actually </span><span class="line" data-startTime="1309">embed, effectively, a web view </span><span class="line" data-startTime="1315">within your Chrome </span><span class="line" data-startTime="1315">Application. </span> <span class="line" data-startTime="1318">So that's going to give you a </span><span class="line" data-startTime="1318">lot more flexibility to be </span><span class="line" data-startTime="1321">able to do some things that you </span><span class="line" data-startTime="1321">weren't really easily able </span><span class="line" data-startTime="1324">to do before or to be able to </span><span class="line" data-startTime="1324">add stuff to your page. </span> <span class="line" data-startTime="1329">With that, I want to thank </span><span class="line" data-startTime="1329">everybody for joining </span><span class="line" data-startTime="1331">us again this week. </span> <span class="line" data-startTime="1332">It was a really great session. </span> <span class="line" data-startTime="1334">Thanks to Joe. </span> <span class="line" data-startTime="1335">Thanks to Peter and Louis in </span><span class="line" data-startTime="1335">Mountain View for helping make </span><span class="line" data-startTime="1338">this happen. </span> <span class="line" data-startTime="1339">With that, we'll see </span><span class="line" data-startTime="1339">you guys next week. </span> <span class="line" data-startTime="1340">Thanks very much. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1341"><span class="speakerName">Joe Marini</span>: Thanks, everybody. </span><span class="line" data-startTime="1342">Hit me up on G+. </span><span class="line" data-startTime="1343">I'm Joe Marini on G+. </span></p>

<p class="speaker"><span class="line" data-starttime="1344"><span class="speakerName">Pete LePage</span>: Awesome. </span><span class="line" data-startTime="1345">Thanks, Joe. </span></p>