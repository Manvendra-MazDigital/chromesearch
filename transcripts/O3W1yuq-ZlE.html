<p class="speaker"><span class="line" data-starttime="9"><span class="speakerName">Paul Irish</span>: Hello, </span><span class="line" data-startTime="9">hi, so I'm going </span><span class="line" data-startTime="14">to show a little bit around </span><span class="line" data-startTime="14">using the Chrome Developer </span><span class="line" data-startTime="17">tools and how to have </span><span class="line" data-startTime="17">a productive workflow </span><span class="line" data-startTime="20">in developing, also </span><span class="line" data-startTime="20">capturing developing </span><span class="line" data-startTime="23">for the mobile web and some </span><span class="line" data-startTime="23">more performance stuff. </span> <span class="line" data-startTime="28">So first up, we're going </span><span class="line" data-startTime="28">to dive into workflow, </span><span class="line" data-startTime="30">and so optimizing </span><span class="line" data-startTime="30">how fast we can </span><span class="line" data-startTime="33">iterate when we're </span><span class="line" data-startTime="33">doing development. </span> <span class="line" data-startTime="37">To do this, I'm going to demo. </span> <span class="line" data-startTime="39">And so I'm going to try </span><span class="line" data-startTime="39">and put this in my pocket. </span> <span class="line" data-startTime="43">How's that? </span><span class="line" data-startTime="43">Does that work? </span><span class="line" data-startTime="45">OK, that's not awkward at all. </span></p>

<p><span class="line" data-startTime="48">All right, so we're going </span><span class="line" data-startTime="48">to come out to this. </span> <span class="line" data-startTime="53">This is a site that I work </span><span class="line" data-startTime="53">on with some friends called </span><span class="line" data-startTime="55">HTML5 Please. </span> <span class="line" data-startTime="57">And let's say I just want to </span><span class="line" data-startTime="57">make some changes on this site. </span> <span class="line" data-startTime="61">So I'm just hosting it. </span> <span class="line" data-startTime="62">I have a local server </span><span class="line" data-startTime="62">on localhost:8000. </span> <span class="line" data-startTime="66">And I want to make some changes. </span> <span class="line" data-startTime="68">All right, so let's </span><span class="line" data-startTime="68">see, I'm going </span><span class="line" data-startTime="71">to open up the Chrome </span><span class="line" data-startTime="71">Developer tools, </span><span class="line" data-startTime="73">select this, and </span><span class="line" data-startTime="73">make some changes. </span> <span class="line" data-startTime="76">Maybe I'm going to bring the </span><span class="line" data-startTime="76">font size down a little bit, </span><span class="line" data-startTime="79">add in a new color &mdash; it </span><span class="line" data-startTime="79">doesn't look very good. </span> <span class="line" data-startTime="88">Let me try &mdash; I'll </span><span class="line" data-startTime="88">change this over </span><span class="line" data-startTime="89">to blue for now &mdash; OK, sure. </span> <span class="line" data-startTime="92">Now normally how this works is </span><span class="line" data-startTime="92">that I will take this and take </span><span class="line" data-startTime="98">the changes that I like, and </span><span class="line" data-startTime="98">copy them, and then come over </span><span class="line" data-startTime="101">to my text file &mdash; say it's right </span><span class="line" data-startTime="101">here &mdash; and paste it in, right? </span><span class="line" data-startTime="108">And that's how I would </span><span class="line" data-startTime="108">probably normally do it. </span> <span class="line" data-startTime="112">But that's not very good. </span></p>

<p><span class="line" data-startTime="114">So what we can actually do </span><span class="line" data-startTime="114">is we can combine the two. </span> <span class="line" data-startTime="118">And so what we're </span><span class="line" data-startTime="118">going to do is use </span><span class="line" data-startTime="121">a new feature called Workspaces. </span> <span class="line" data-startTime="123">And this allows me </span><span class="line" data-startTime="123">to kind of mount </span><span class="line" data-startTime="125">in my code, my local </span><span class="line" data-startTime="125">development folder, into Chrome </span><span class="line" data-startTime="132">and just be able to save </span><span class="line" data-startTime="132">directly back to disk </span><span class="line" data-startTime="135">with all my changes. </span> <span class="line" data-startTime="136">So this is how it works. </span> <span class="line" data-startTime="141">First, I'll just </span><span class="line" data-startTime="141">refresh the page. </span> <span class="line" data-startTime="143">OK, and now I right click </span><span class="line" data-startTime="143">in the Sources panel. </span> <span class="line" data-startTime="148">And I can select Add </span><span class="line" data-startTime="148">Folder to Workspace. </span></p>

<p><span class="line" data-startTime="151">So everyone can see </span><span class="line" data-startTime="151">this &mdash; down there. </span> <span class="line" data-startTime="155">Now, that comes up. </span> <span class="line" data-startTime="156">And I want to select what </span><span class="line" data-startTime="156">folder I'm going to bring in. </span> <span class="line" data-startTime="158">And here's my local </span><span class="line" data-startTime="158">folder for this project. </span> <span class="line" data-startTime="162">So I say, Yes and Allow. </span> <span class="line" data-startTime="165">All right, now we </span><span class="line" data-startTime="165">can see it here. </span> <span class="line" data-startTime="168">And so here's my local folder. </span> <span class="line" data-startTime="170">And so this has </span><span class="line" data-startTime="170">everything, all the </span><span class="line" data-startTime="172">files in it, say, for </span><span class="line" data-startTime="172">instance, my configuration </span><span class="line" data-startTime="178">for Sass, my gitignore. </span> <span class="line" data-startTime="182">I can make any changes here. </span> <span class="line" data-startTime="184">And also, if, say </span><span class="line" data-startTime="184">for instance, I </span><span class="line" data-startTime="188">make a new file, </span><span class="line" data-startTime="188">that also comes in. </span> <span class="line" data-startTime="195">And I can see that. </span> <span class="line" data-startTime="196">So hello, hello, </span><span class="line" data-startTime="196">and then &mdash; right. </span> <span class="line" data-startTime="204">So, nice, I have a mapping </span><span class="line" data-startTime="204">between what I have on disk </span><span class="line" data-startTime="210">and what I have inside </span><span class="line" data-startTime="210">Chrome in full persistence. </span></p>

<p><span class="line" data-startTime="214">The way this gets </span><span class="line" data-startTime="214">interesting is being </span><span class="line" data-startTime="216">able to manipulate the </span><span class="line" data-startTime="216">styles, or whatever else, </span><span class="line" data-startTime="219">like we all want to. </span> <span class="line" data-startTime="221">So let's do some of that. </span> <span class="line" data-startTime="224">So I was making some </span><span class="line" data-startTime="224">changes here before. </span> <span class="line" data-startTime="227">And then, we'll bring down this </span><span class="line" data-startTime="227">font size and select this guy. </span> <span class="line" data-startTime="232">We'll change him &mdash; </span><span class="line" data-startTime="232">ooh, that's pretty. </span> <span class="line" data-startTime="234">That's nice. </span> <span class="line" data-startTime="235">I like this. </span> <span class="line" data-startTime="237">So that's good. </span> <span class="line" data-startTime="240">And now, when I come over </span><span class="line" data-startTime="240">to &mdash; ah, one mistake. </span> <span class="line" data-startTime="255">One thing that I need to do </span><span class="line" data-startTime="255">once I mount in this folder </span><span class="line" data-startTime="259">is to map it. </span> <span class="line" data-startTime="260">I need to map it </span><span class="line" data-startTime="260">to my other assets. </span> <span class="line" data-startTime="263">So I have my script that's </span><span class="line" data-startTime="263">coming from local host. </span> <span class="line" data-startTime="268">But I need to tell Chrome </span><span class="line" data-startTime="268">than it needs to match. </span></p>

<p><span class="line" data-startTime="272">So what I do &mdash; this </span><span class="line" data-startTime="272">is a one-time set-up &mdash; </span><span class="line" data-startTime="275">I need to map file </span><span class="line" data-startTime="275">to local resource. </span> <span class="line" data-startTime="279">So I select the </span><span class="line" data-startTime="279">one that matches. </span> <span class="line" data-startTime="281">And that's it &mdash; yes. </span> <span class="line" data-startTime="284">OK, OK, now I'm going </span><span class="line" data-startTime="284">to come back and make </span><span class="line" data-startTime="294">this change again. </span> <span class="line" data-startTime="299">And I'll add in a new color. </span> <span class="line" data-startTime="303">And now when I come </span><span class="line" data-startTime="303">over to my code, </span><span class="line" data-startTime="306">you can see my font </span><span class="line" data-startTime="306">size is now 3M. </span> <span class="line" data-startTime="309">My color is blue. </span> <span class="line" data-startTime="311">I'll add in a few more border &mdash; </span><span class="line" data-startTime="311">10px, solid gray, background, </span><span class="line" data-startTime="319">hmm, I don't know, green? </span><span class="line" data-startTime="322">Green &mdash; not improvements, </span><span class="line" data-startTime="322">but they're coming right in. </span></p>

<p><span class="line" data-startTime="328">So this is full </span><span class="line" data-startTime="328">persistence in there. </span> <span class="line" data-startTime="331">Now, another way I </span><span class="line" data-startTime="331">could do this is I </span><span class="line" data-startTime="333">could come in to the Sources </span><span class="line" data-startTime="333">panel and make any changes. </span> <span class="line" data-startTime="338">One new change </span><span class="line" data-startTime="338">that we just added </span><span class="line" data-startTime="340">is if you hold down </span><span class="line" data-startTime="340">the Alt key, you </span><span class="line" data-startTime="344">can now just hold down Alt </span><span class="line" data-startTime="344">and change these numbers </span><span class="line" data-startTime="348">just right with Up and Down. </span> <span class="line" data-startTime="351">So I can make changes here. </span> <span class="line" data-startTime="353">Or I could come over </span><span class="line" data-startTime="353">to my text editor </span><span class="line" data-startTime="357">and &mdash; say I don't </span><span class="line" data-startTime="357">like green anymore. </span> <span class="line" data-startTime="359">I really want purple. </span> <span class="line" data-startTime="361">I hit Save in Sublime. </span> <span class="line" data-startTime="363">And I come back here, and it's </span><span class="line" data-startTime="363">like, oh sure, no problem. </span> <span class="line" data-startTime="367">So this is really nice. </span></p>

<p><span class="line" data-startTime="369">If you do want to continue </span><span class="line" data-startTime="369">to develop over here and make </span><span class="line" data-startTime="374">any changes, it'll just </span><span class="line" data-startTime="374">come in immediately. </span> <span class="line" data-startTime="379">So this is pretty powerful. </span> <span class="line" data-startTime="381">And I've showed </span><span class="line" data-startTime="381">it with CSS here. </span> <span class="line" data-startTime="383">But it's also really </span><span class="line" data-startTime="383">useful with JavaScript. </span> <span class="line" data-startTime="386">So on this site, if </span><span class="line" data-startTime="386">I type in this box, </span><span class="line" data-startTime="392">we filter down the </span><span class="line" data-startTime="392">results of what's </span><span class="line" data-startTime="395">showing up here based on that. </span> <span class="line" data-startTime="397">But if I want to get a better </span><span class="line" data-startTime="397">understanding of how that </span><span class="line" data-startTime="399">works &mdash; maybe I want </span><span class="line" data-startTime="399">to add some console log </span><span class="line" data-startTime="403">like debug statements </span><span class="line" data-startTime="403">to figure this out. </span> <span class="line" data-startTime="406">So let me just close these. </span></p>

<p><span class="line" data-startTime="410">I'm going to hit Command-O </span><span class="line" data-startTime="410">and look for my script file. </span> <span class="line" data-startTime="415">And yeah, actually </span><span class="line" data-startTime="415">this is perfect. </span> <span class="line" data-startTime="424">So right now, when </span><span class="line" data-startTime="424">I type here, I </span><span class="line" data-startTime="431">want to get an idea of </span><span class="line" data-startTime="431">how these values come </span><span class="line" data-startTime="434">into the JavaScript </span><span class="line" data-startTime="434">that's handling this. </span> <span class="line" data-startTime="437">So what I can just </span><span class="line" data-startTime="437">do is immediately </span><span class="line" data-startTime="439">enter in a console </span><span class="line" data-startTime="439">log statement. </span> <span class="line" data-startTime="441">And so I'm in the </span><span class="line" data-startTime="441">Update Search Method. </span> <span class="line" data-startTime="445">And so I'm just going </span><span class="line" data-startTime="445">to blog that I'm there </span><span class="line" data-startTime="449">and see what the value is. </span> <span class="line" data-startTime="451">Now, when I hit Command-S right </span><span class="line" data-startTime="451">now, what Command-S is doing is </span><span class="line" data-startTime="458">it's persisting </span><span class="line" data-startTime="458">this change to disk. </span></p>

<p><span class="line" data-startTime="460">And then, it's also telling </span><span class="line" data-startTime="460">V8, the JavaScript engine, </span><span class="line" data-startTime="464">that it needs to now </span><span class="line" data-startTime="464">evaluate this new definition </span><span class="line" data-startTime="467">of this file. </span> <span class="line" data-startTime="469">So I'm hitting Command-S. I'm </span><span class="line" data-startTime="469">not refreshing the page at all. </span> <span class="line" data-startTime="473">And when I type here, </span><span class="line" data-startTime="473">it immediately changes. </span> <span class="line" data-startTime="479">So V8 has a new definition. </span> <span class="line" data-startTime="481">And now, if I go over, and </span><span class="line" data-startTime="481">I'll just double check, </span><span class="line" data-startTime="486">here's my changes that I </span><span class="line" data-startTime="486">made to disk on the styles. </span> <span class="line" data-startTime="492">Yup, and here's my change </span><span class="line" data-startTime="492">down here to the JavaScript. </span> <span class="line" data-startTime="495">So this is nice, because </span><span class="line" data-startTime="495">I can go really fast. </span> <span class="line" data-startTime="497">I'm not refreshing the page. </span> <span class="line" data-startTime="499">I'm changing both </span><span class="line" data-startTime="499">CSS and JavaScript </span><span class="line" data-startTime="502">and persisting all the </span><span class="line" data-startTime="502">changes that I like to disk. </span> <span class="line" data-startTime="507">One thing I didn't show is &mdash; </span><span class="line" data-startTime="507">let's see if this works. </span> <span class="line" data-startTime="510">We have full undo and redo. </span> <span class="line" data-startTime="512">So I'm going to try &mdash; oh </span><span class="line" data-startTime="512">no, I refreshed the page. </span></p>

<p><span class="line" data-startTime="521">Damn, all right, so if </span><span class="line" data-startTime="521">I make these changes, </span><span class="line" data-startTime="526">and I don't really </span><span class="line" data-startTime="526">like them, I can just </span><span class="line" data-startTime="530">hit Command-Z to </span><span class="line" data-startTime="530">bring them back. </span> <span class="line" data-startTime="536">So whether you make changes here </span><span class="line" data-startTime="536">inside the DevTools or changes </span><span class="line" data-startTime="541">over here, you can </span><span class="line" data-startTime="541">just hit Command-Z </span><span class="line" data-startTime="543">to kind of work your way back. </span> <span class="line" data-startTime="545">And all those changes will </span><span class="line" data-startTime="545">be maintained in the files. </span> <span class="line" data-startTime="549">So this gets really </span><span class="line" data-startTime="549">powerful, right? </span><span class="line" data-startTime="552">I can edit the entire project. </span></p>

<p><span class="line" data-startTime="555">Whether it's mark </span><span class="line" data-startTime="555">down files, PHP files, </span><span class="line" data-startTime="558">I can do it right </span><span class="line" data-startTime="558">there in the DevTools. </span> <span class="line" data-startTime="560">So the DevTools kind </span><span class="line" data-startTime="560">of becomes my editor. </span> <span class="line" data-startTime="563">All the changes persist </span><span class="line" data-startTime="563">to disk, full undo, redo, </span><span class="line" data-startTime="566">and it's nice because I </span><span class="line" data-startTime="566">can maintain my context. </span> <span class="line" data-startTime="568">If I'm setting break points in </span><span class="line" data-startTime="568">my JavaScript in the DevTools, </span><span class="line" data-startTime="573">I can also edit right there </span><span class="line" data-startTime="573">and make those changes </span><span class="line" data-startTime="575">and save those to desk. </span> <span class="line" data-startTime="577">All right, the next </span><span class="line" data-startTime="577">thing I want to show </span><span class="line" data-startTime="580">is the DevTools support </span><span class="line" data-startTime="580">for Sass and Less. </span> <span class="line" data-startTime="584">Who writes their </span><span class="line" data-startTime="584">styles using Sass? </span><span class="line" data-startTime="587">Raise your hand. </span> <span class="line" data-startTime="588">Yes, or Less &mdash; Less, a lot </span><span class="line" data-startTime="588">more people are using Less. </span></p>

<p><span class="line" data-startTime="593">Good, OK, this was just </span><span class="line" data-startTime="593">added like two weeks ago. </span> <span class="line" data-startTime="597">But let me show </span><span class="line" data-startTime="597">you how this works. </span> <span class="line" data-startTime="600">So now, one thing </span><span class="line" data-startTime="600">that you might notice </span><span class="line" data-startTime="616">is that &mdash; let's say I'm going </span><span class="line" data-startTime="616">to select this little item right </span><span class="line" data-startTime="620">here. </span> <span class="line" data-startTime="625">So this is the little &mdash; Use </span><span class="line" data-startTime="625">Item is what I'm selecting. </span> <span class="line" data-startTime="632">And if we look over here, </span><span class="line" data-startTime="632">we have a few styles on it. </span> <span class="line" data-startTime="635">And we have just this green and </span><span class="line" data-startTime="635">a green that's a little darker, </span><span class="line" data-startTime="637">and a green that's a </span><span class="line" data-startTime="637">little darker than that. </span> <span class="line" data-startTime="641">But you can see actually where </span><span class="line" data-startTime="641">this definition is coming from. </span> <span class="line" data-startTime="645">It's from an SESS file. </span></p>

<p><span class="line" data-startTime="647">So it's not a Sass file. </span> <span class="line" data-startTime="648">It's not a CSS file. </span> <span class="line" data-startTime="650">It's an SESS file. </span> <span class="line" data-startTime="652">So let me click through on </span><span class="line" data-startTime="652">that and see what's going on. </span> <span class="line" data-startTime="658">Oh, let me try that once more. </span> <span class="line" data-startTime="663">OK, so here, we're </span><span class="line" data-startTime="663">actually jumping </span><span class="line" data-startTime="667">to the definition of the mix in. </span> <span class="line" data-startTime="669">So the mix in that I wrote </span><span class="line" data-startTime="669">for this Sass kind of </span><span class="line" data-startTime="674">does some things. </span> <span class="line" data-startTime="675">I have a variable coming </span><span class="line" data-startTime="675">in with this color. </span> <span class="line" data-startTime="678">Here's the background box </span><span class="line" data-startTime="678">shot on boarder radius. </span> <span class="line" data-startTime="680">But it's taking this color, and </span><span class="line" data-startTime="680">it's kind of darkening it here. </span> <span class="line" data-startTime="683">It's darkening it here. </span> <span class="line" data-startTime="685">So we're doing some </span><span class="line" data-startTime="685">nice things in the Sass. </span> <span class="line" data-startTime="688">But if I want to make a change </span><span class="line" data-startTime="688">to this green, what I could do </span><span class="line" data-startTime="694">is just take this </span><span class="line" data-startTime="694">and change the color. </span></p>

<p><span class="line" data-startTime="697">But that doesn't </span><span class="line" data-startTime="697">really work, right? </span><span class="line" data-startTime="698">I have this stuff here. </span> <span class="line" data-startTime="702">So clearly, I'm not going </span><span class="line" data-startTime="702">to be able to do this </span><span class="line" data-startTime="705">by just editing the CSS. </span> <span class="line" data-startTime="706">I need to edit the </span><span class="line" data-startTime="706">Sass, the original Sass. </span> <span class="line" data-startTime="710">So let's try that. </span> <span class="line" data-startTime="715">So if you hold down the </span><span class="line" data-startTime="715">Command key or the Control key, </span><span class="line" data-startTime="721">you'll see an underline. </span> <span class="line" data-startTime="723">Let me zoom in on that. </span> <span class="line" data-startTime="728">So this command, this </span><span class="line" data-startTime="728">indicates that you </span><span class="line" data-startTime="731">can jump to the original </span><span class="line" data-startTime="731">location where this is defined. </span> <span class="line" data-startTime="734">So here, if I Command </span><span class="line" data-startTime="734">click on background, </span><span class="line" data-startTime="738">I jump to where </span><span class="line" data-startTime="738">the background is. </span> <span class="line" data-startTime="742">But I want to change the color. </span> <span class="line" data-startTime="745">So I want to Command click </span><span class="line" data-startTime="745">on that background color. </span></p>

<p><span class="line" data-startTime="749">And now &mdash; whoops. </span> <span class="line" data-startTime="761">Well, what I'm </span><span class="line" data-startTime="761">expecting it to do </span><span class="line" data-startTime="764">is to jump to this </span><span class="line" data-startTime="764">color definition, which </span><span class="line" data-startTime="766">is in my Variables Sass file. </span> <span class="line" data-startTime="769">So what's cool here </span><span class="line" data-startTime="769">is if I want to make </span><span class="line" data-startTime="772">this change to this </span><span class="line" data-startTime="772">variable definition &mdash; let's </span><span class="line" data-startTime="775">say I'm going to turn it to </span><span class="line" data-startTime="775">red &mdash; I just hit Command-S, </span><span class="line" data-startTime="780">and I wait. </span> <span class="line" data-startTime="781">And I get my changes. </span> <span class="line" data-startTime="783">So I just changed </span><span class="line" data-startTime="783">Sass in the DevTools. </span> <span class="line" data-startTime="787">And what happened on </span><span class="line" data-startTime="787">the back is over here, </span><span class="line" data-startTime="791">I actually have a tab that </span><span class="line" data-startTime="791">has a little watch, just </span><span class="line" data-startTime="797">to monitor changes, and have </span><span class="line" data-startTime="797">compass and Sass recompile </span><span class="line" data-startTime="800">the new CSS. </span> <span class="line" data-startTime="802">And so that happened. </span></p>

<p><span class="line" data-startTime="803">And then, DevTools </span><span class="line" data-startTime="803">picked up on the fact </span><span class="line" data-startTime="805">that the CSS file had changed </span><span class="line" data-startTime="805">and just refreshed it. </span> <span class="line" data-startTime="809">So now I can make any sort </span><span class="line" data-startTime="809">of change in the Sass. </span> <span class="line" data-startTime="816">And it takes a </span><span class="line" data-startTime="816">little bit of time </span><span class="line" data-startTime="819">to actually &mdash; there we </span><span class="line" data-startTime="819">go &mdash; for the change happen. </span> <span class="line" data-startTime="824">But this is really nice. </span> <span class="line" data-startTime="825">Because I can go very fast now. </span> <span class="line" data-startTime="828">All right, so that is a little </span><span class="line" data-startTime="828">bit of the DevTools support. </span> <span class="line" data-startTime="834">Like I mentioned, we've had </span><span class="line" data-startTime="834">support for Sass for awhile. </span> <span class="line" data-startTime="838">And the guys behind </span><span class="line" data-startTime="838">the Less project </span><span class="line" data-startTime="841">just added support </span><span class="line" data-startTime="841">inside their compiler </span><span class="line" data-startTime="844">for creating source </span><span class="line" data-startTime="844">maps, which is </span><span class="line" data-startTime="846">what powers this whole thing. </span> <span class="line" data-startTime="848">So we have support for both. </span> <span class="line" data-startTime="850">So this whole story </span><span class="line" data-startTime="850">really creates </span><span class="line" data-startTime="852">a compelling </span><span class="line" data-startTime="852">development environment </span><span class="line" data-startTime="855">where I can just &mdash; anywhere </span><span class="line" data-startTime="855">that I type, I can style, </span><span class="line" data-startTime="858">see the immediate results. </span> <span class="line" data-startTime="860">Everything is </span><span class="line" data-startTime="860">persistent to disk. </span></p>

<p><span class="line" data-startTime="861">And I get a lot of </span><span class="line" data-startTime="861">immediate feedback. </span> <span class="line" data-startTime="866">All right, but I want </span><span class="line" data-startTime="866">to take this stuff </span><span class="line" data-startTime="868">and go mobile with it. </span> <span class="line" data-startTime="869">So let's do that. </span> <span class="line" data-startTime="874">So we're going to </span><span class="line" data-startTime="874">come over here. </span> <span class="line" data-startTime="876">And I have my phone. </span> <span class="line" data-startTime="879">And this is my password. </span> <span class="line" data-startTime="885">All right, so let me </span><span class="line" data-startTime="885">just refresh this. </span> <span class="line" data-startTime="890">OK, cool &mdash; focus, yeah, good. </span> <span class="line" data-startTime="895">Now I want to do </span><span class="line" data-startTime="895">this development. </span> <span class="line" data-startTime="898">And I want to debug </span><span class="line" data-startTime="898">what's on my phone. </span> <span class="line" data-startTime="902">So let's try that out. </span> <span class="line" data-startTime="904">So I come over to </span><span class="line" data-startTime="904">Chrome Inspect. </span> <span class="line" data-startTime="908">You can also just </span><span class="line" data-startTime="908">type, "about inspect." </span><span class="line" data-startTime="911">And now, let's see, I want </span><span class="line" data-startTime="911">to get this on the screen </span><span class="line" data-startTime="916">at the same time. </span> <span class="line" data-startTime="918">There we go. </span> <span class="line" data-startTime="918">Now let's plug in the phone. </span></p>

<p><span class="line" data-startTime="923">Doo, doo, doo &mdash; yeah, </span><span class="line" data-startTime="923">woo, all right, cool, </span><span class="line" data-startTime="927">so it just found my phone. </span> <span class="line" data-startTime="929">Now raise your hand if you've </span><span class="line" data-startTime="929">done a remote debugging </span><span class="line" data-startTime="932">with Chrome on Android before &mdash; </span><span class="line" data-startTime="932">OK, cool, a few of you. </span> <span class="line" data-startTime="938">Before, it required some </span><span class="line" data-startTime="938">things around downloading </span><span class="line" data-startTime="940">the entire Android SDK. </span> <span class="line" data-startTime="942">It was really painful. </span> <span class="line" data-startTime="943">Now, just plug it in. </span> <span class="line" data-startTime="945">It just works. </span> <span class="line" data-startTime="947">So we see Chrome. </span> <span class="line" data-startTime="949">Chrome 31 is now here. </span> <span class="line" data-startTime="951">And I want to load a page. </span> <span class="line" data-startTime="955">So let's see, I don't </span><span class="line" data-startTime="955">know, load naver.com, sure. </span></p>

<p><span class="line" data-startTime="964">All right, cool &mdash; all right, so </span><span class="line" data-startTime="964">I'm just going to hit Inspect. </span> <span class="line" data-startTime="975">And all right, here's the </span><span class="line" data-startTime="975">DevTools, the full DevTools. </span> <span class="line" data-startTime="981">And so if I come </span><span class="line" data-startTime="981">over to Timeline, </span><span class="line" data-startTime="983">and I start a recording, </span><span class="line" data-startTime="983">and I scroll the page, </span><span class="line" data-startTime="987">I'm getting all that stuff. </span> <span class="line" data-startTime="988">So that's really cool. </span> <span class="line" data-startTime="993">Raise your hand if you have </span><span class="line" data-startTime="993">one of these cameras here </span><span class="line" data-startTime="996">that can take a picture of your </span><span class="line" data-startTime="996">camera and put it on your &mdash; OK, </span><span class="line" data-startTime="999">probably not. </span> <span class="line" data-startTime="1000">So we thought that </span><span class="line" data-startTime="1000">this is a problem. </span> <span class="line" data-startTime="1003">So let's solve this. </span></p>

<p><span class="line" data-startTime="1004">So I'm going to kill this video. </span> <span class="line" data-startTime="1007">And I'm going to </span><span class="line" data-startTime="1007">go into Settings </span><span class="line" data-startTime="1009">and turn on a new experiment </span><span class="line" data-startTime="1009">that we've been working on. </span> <span class="line" data-startTime="1012">This is called Screencast. </span> <span class="line" data-startTime="1016">This is the first time that </span><span class="line" data-startTime="1016">I've ever showed this publicly. </span> <span class="line" data-startTime="1020">So this is the debut </span><span class="line" data-startTime="1020">of this feature. </span> <span class="line" data-startTime="1023">I'm really excited. </span> <span class="line" data-startTime="1024">All right, so what we do is we </span><span class="line" data-startTime="1024">close that down and bring that </span><span class="line" data-startTime="1030">back up. </span> <span class="line" data-startTime="1035">Ahh, and now &mdash; yes. </span> <span class="line" data-startTime="1039">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="1042"><span class="speakerName">Paul Irish</span>: So this </span><span class="line" data-startTime="1042">is really cool. </span> <span class="line" data-startTime="1044">So I have &mdash; as I just </span><span class="line" data-startTime="1044">scroll, I can see immediately </span><span class="line" data-startTime="1048">what's going on. </span> <span class="line" data-startTime="1051">So I can just do the same thing. </span> <span class="line" data-startTime="1055">Right, so that's really nice. </span> <span class="line" data-startTime="1057">I don't have to go back </span><span class="line" data-startTime="1057">and look down at the phone </span><span class="line" data-startTime="1060">and come over here. </span> <span class="line" data-startTime="1060">Because it's all right </span><span class="line" data-startTime="1060">here on the screen. </span> <span class="line" data-startTime="1063">So let's do a search. </span> <span class="line" data-startTime="1067">So I can type and </span><span class="line" data-startTime="1067">be like, Chrome. </span> <span class="line" data-startTime="1072">OK, but this is taking a while. </span> <span class="line" data-startTime="1073">I'd much rather just </span><span class="line" data-startTime="1073">type here on my keyboard. </span> <span class="line" data-startTime="1075">So let's try that. </span> <span class="line" data-startTime="1076">Ah, OK, cool, so I can type. </span> <span class="line" data-startTime="1082">And let's see. </span> <span class="line" data-startTime="1083">Let's check. </span></p>

<p><span class="line" data-startTime="1089">Yeah, all right, I can click. </span> <span class="line" data-startTime="1096">And the last thing </span><span class="line" data-startTime="1096">I want to show here </span><span class="line" data-startTime="1097">is that I can just Inspect </span><span class="line" data-startTime="1097">Element, and Inspect Element </span><span class="line" data-startTime="1101">works, too. </span> <span class="line" data-startTime="1102">So I can just select the item. </span> <span class="line" data-startTime="1105">And my DOM view comes up. </span> <span class="line" data-startTime="1109">So this is really powerful. </span> <span class="line" data-startTime="1111">This means that I don't </span><span class="line" data-startTime="1111">have to go and muck back </span><span class="line" data-startTime="1114">with my device. </span> <span class="line" data-startTime="1115">I have it all right </span><span class="line" data-startTime="1115">here on screen. </span> <span class="line" data-startTime="1118">And I have the full </span><span class="line" data-startTime="1118">DevTools to support it. </span> <span class="line" data-startTime="1121">But let's go back to the project </span><span class="line" data-startTime="1121">that I was developing before. </span> <span class="line" data-startTime="1125">It was this, localhost:8000. </span> <span class="line" data-startTime="1132">And so we'll just open up a </span><span class="line" data-startTime="1132">tab with that and inspect it. </span></p>

<p><span class="line" data-startTime="1145">Hmm, so one thing &mdash; there we go. </span> <span class="line" data-startTime="1155">So one thing that happens a </span><span class="line" data-startTime="1155">lot is that you want to develop </span><span class="line" data-startTime="1160">localhost:8000. </span> <span class="line" data-startTime="1161">But your phone doesn't know </span><span class="line" data-startTime="1161">what localhost:8000 is. </span> <span class="line" data-startTime="1166">Because that's your machine. </span> <span class="line" data-startTime="1168">So the feature that </span><span class="line" data-startTime="1168">we have available </span><span class="line" data-startTime="1170">now is port forwarding. </span> <span class="line" data-startTime="1171">So you can just say, I want </span><span class="line" data-startTime="1171">whatever's on this machine. </span> <span class="line" data-startTime="1174">And I want to have it </span><span class="line" data-startTime="1174">available on my phone. </span> <span class="line" data-startTime="1179">So now we have this project </span><span class="line" data-startTime="1179">right here on the phone. </span> <span class="line" data-startTime="1184">And everything that I </span><span class="line" data-startTime="1184">showed just a moment ago </span><span class="line" data-startTime="1187">with Workspaces still works. </span> <span class="line" data-startTime="1190">So let's try &mdash; first step, we're </span><span class="line" data-startTime="1190">just going to select this text </span><span class="line" data-startTime="1195">and try a different </span><span class="line" data-startTime="1195">selection color. </span></p>

<p><span class="line" data-startTime="1198">Ooh yeah, that's nice &mdash; </span><span class="line" data-startTime="1198">something like that? </span><span class="line" data-startTime="1203">OK, good &mdash; come over, </span><span class="line" data-startTime="1203">select this text, this H1. </span> <span class="line" data-startTime="1210">And again, we'll change the font </span><span class="line" data-startTime="1210">size to be really big &mdash; yeah. </span> <span class="line" data-startTime="1218">And what's great about this is </span><span class="line" data-startTime="1218">that these changes that I just </span><span class="line" data-startTime="1223">made here while I'm </span><span class="line" data-startTime="1223">debugging my phone, </span><span class="line" data-startTime="1229">these just saved to disk. </span> <span class="line" data-startTime="1231">So if I now come over </span><span class="line" data-startTime="1231">to my other window, </span><span class="line" data-startTime="1236">this one &mdash; see, this </span><span class="line" data-startTime="1236">one &mdash; I refresh. </span> <span class="line" data-startTime="1243">Wow, yes &mdash; cool. </span> <span class="line" data-startTime="1245">So this means I basically can </span><span class="line" data-startTime="1245">choose where I want to develop, </span><span class="line" data-startTime="1248">and it's all saving </span><span class="line" data-startTime="1248">back to disk, which </span><span class="line" data-startTime="1250">means that I can go really fast, </span><span class="line" data-startTime="1250">make changes, and not worry </span><span class="line" data-startTime="1254">about where I have to copy what. </span> <span class="line" data-startTime="1257">All right, so this is how </span><span class="line" data-startTime="1257">remote debugging works now. </span></p>

<p><span class="line" data-startTime="1263">We have a very </span><span class="line" data-startTime="1263">powerful feature set. </span> <span class="line" data-startTime="1265">Everything that you can </span><span class="line" data-startTime="1265">do in regular developer </span><span class="line" data-startTime="1267">tools you can do while </span><span class="line" data-startTime="1267">you debug your phone &mdash; </span><span class="line" data-startTime="1271">the screen casting </span><span class="line" data-startTime="1271">feature, port forwarding. </span> <span class="line" data-startTime="1274">And it's a lot easier to set </span><span class="line" data-startTime="1274">up than it ever was before. </span> <span class="line" data-startTime="1279">All right, I'm going to </span><span class="line" data-startTime="1279">move on to performance. </span> <span class="line" data-startTime="1282">So first up, these are actually </span><span class="line" data-startTime="1282">graphs from Internet Explorer. </span> <span class="line" data-startTime="1289">They were talking about what </span><span class="line" data-startTime="1289">sorts of operations the browser </span><span class="line" data-startTime="1292">does when it's loading </span><span class="line" data-startTime="1292">and using pages. </span> <span class="line" data-startTime="1295">So they looked at the top </span><span class="line" data-startTime="1295">100 sites and the top Ajax </span><span class="line" data-startTime="1299">sites, JavaScript-heavy </span><span class="line" data-startTime="1299">sites, and looked </span><span class="line" data-startTime="1302">at what the browser is </span><span class="line" data-startTime="1302">busy doing on those sites. </span> <span class="line" data-startTime="1305">And in these cases, the amount </span><span class="line" data-startTime="1305">of time actually executing </span><span class="line" data-startTime="1310">JavaScript is pretty low. </span> <span class="line" data-startTime="1312">A lot of time is just spent </span><span class="line" data-startTime="1312">in layout rendering and kind </span><span class="line" data-startTime="1315">of manifesting the page. </span></p>

<p><span class="line" data-startTime="1318">So this basically means </span><span class="line" data-startTime="1318">that JavaScript is often not </span><span class="line" data-startTime="1322">the bottleneck in </span><span class="line" data-startTime="1322">many, many cases. </span> <span class="line" data-startTime="1324">And you want to be </span><span class="line" data-startTime="1324">able to look at and get </span><span class="line" data-startTime="1326">an idea of the performance </span><span class="line" data-startTime="1326">of the other parts of what </span><span class="line" data-startTime="1328">the browser has </span><span class="line" data-startTime="1328">to do, so not just </span><span class="line" data-startTime="1330">running the JavaScript profile. </span> <span class="line" data-startTime="1332">So let's talk about </span><span class="line" data-startTime="1332">how some of that works. </span> <span class="line" data-startTime="1334">And to show it, I'm going </span><span class="line" data-startTime="1334">to do a little demo where </span><span class="line" data-startTime="1337">I do a performance </span><span class="line" data-startTime="1337">audit of this site. </span> <span class="line" data-startTime="1340">So this is a festival in Canada. </span> <span class="line" data-startTime="1345">And they have a nice website. </span> <span class="line" data-startTime="1348">But it could be faster. </span> <span class="line" data-startTime="1351">So I loaded up the page. </span> <span class="line" data-startTime="1354">And as I scrolled out &mdash; </span><span class="line" data-startTime="1354">it might be hard to see. </span></p>

<p><span class="line" data-startTime="1357">But it's a little &mdash; </span><span class="line" data-startTime="1357">it doesn't feel </span><span class="line" data-startTime="1365">very smooth as I'm </span><span class="line" data-startTime="1365">scrolling here. </span> <span class="line" data-startTime="1367">It feels like it's stuttering. </span> <span class="line" data-startTime="1370">So I'm going to take </span><span class="line" data-startTime="1370">a look at the DevTools </span><span class="line" data-startTime="1373">and see what they're </span><span class="line" data-startTime="1373">telling me about this. </span> <span class="line" data-startTime="1376">So I'm going to go </span><span class="line" data-startTime="1376">to the timeline. </span> <span class="line" data-startTime="1378">The timeline is where </span><span class="line" data-startTime="1378">you want to start </span><span class="line" data-startTime="1379">all of your performance </span><span class="line" data-startTime="1379">investigations. </span> <span class="line" data-startTime="1382">And I'm going to </span><span class="line" data-startTime="1382">start recording. </span> <span class="line" data-startTime="1384">And here we go. </span> <span class="line" data-startTime="1387">So immediately, this is giving </span><span class="line" data-startTime="1387">me back a lot of information. </span> <span class="line" data-startTime="1391">And what I'm seeing is a </span><span class="line" data-startTime="1391">lot of purple here, right? </span><span class="line" data-startTime="1394">And the purple, when I look, </span><span class="line" data-startTime="1394">is a lot of recalc style. </span></p>

<p><span class="line" data-startTime="1399">Let me raise this up just </span><span class="line" data-startTime="1399">so that everyone can see. </span> <span class="line" data-startTime="1403">So recalc style in </span><span class="line" data-startTime="1403">jQuery &mdash; OK, interesting. </span> <span class="line" data-startTime="1408">So we can look at </span><span class="line" data-startTime="1408">what exactly the call </span><span class="line" data-startTime="1410">stack is that forced this. </span> <span class="line" data-startTime="1413">Add class &mdash; OK, so </span><span class="line" data-startTime="1413">we're manipulating </span><span class="line" data-startTime="1416">the class of an element. </span> <span class="line" data-startTime="1417">And we come down to where the </span><span class="line" data-startTime="1417">actual application code is. </span> <span class="line" data-startTime="1420">And let me just click </span><span class="line" data-startTime="1420">through on that. </span> <span class="line" data-startTime="1424">And it went right here. </span> <span class="line" data-startTime="1429">So the cursor is telling me </span><span class="line" data-startTime="1429">that this is where it happened. </span> <span class="line" data-startTime="1433">We called toggleClass. </span> <span class="line" data-startTime="1436">And we're calling toggleClass </span><span class="line" data-startTime="1436">inside the Scroll Handler. </span> <span class="line" data-startTime="1440">So on every single </span><span class="line" data-startTime="1440">scroll event, we're </span><span class="line" data-startTime="1444">manipulating the class </span><span class="line" data-startTime="1444">of the HTML element. </span> <span class="line" data-startTime="1448">This &mdash; you know how </span><span class="line" data-startTime="1448">people tell you to not </span><span class="line" data-startTime="1451">touch the DOM too much? </span><span class="line" data-startTime="1453">This is usually why. </span></p>

<p><span class="line" data-startTime="1455">You're manipulating the </span><span class="line" data-startTime="1455">class of the HTML element. </span> <span class="line" data-startTime="1458">And what it's causing is a </span><span class="line" data-startTime="1458">lot of performance problems, </span><span class="line" data-startTime="1463">all this purple here. </span> <span class="line" data-startTime="1465">So let's try changing </span><span class="line" data-startTime="1465">this and fixing it. </span> <span class="line" data-startTime="1468">One quick fix that we can do is </span><span class="line" data-startTime="1468">using &mdash; instead of toggleClass, </span><span class="line" data-startTime="1474">I'm going to use an HTML5 API, </span><span class="line" data-startTime="1474">here we go, called classList. </span> <span class="line" data-startTime="1484">And classList.toggle actually </span><span class="line" data-startTime="1484">has the exact same method </span><span class="line" data-startTime="1490">signature, the same </span><span class="line" data-startTime="1490">arguments, as toggleClass. </span> <span class="line" data-startTime="1495">So we can just keep </span><span class="line" data-startTime="1495">that there, keep this, </span><span class="line" data-startTime="1499">and now I'm just going </span><span class="line" data-startTime="1499">to hit Command-S. </span></p>

<p><span class="line" data-startTime="1503">And that should just </span><span class="line" data-startTime="1503">send it immediately </span><span class="line" data-startTime="1509">to the JavaScript engine. </span> <span class="line" data-startTime="1511">So now, when I come back </span><span class="line" data-startTime="1511">to Timeline, and I hit </span><span class="line" data-startTime="1514">Record again &mdash; ahh. </span> <span class="line" data-startTime="1516">OK, cool &mdash; it's a </span><span class="line" data-startTime="1516">big change, right? </span><span class="line" data-startTime="1519">There's no more purple. </span> <span class="line" data-startTime="1521">There's no more </span><span class="line" data-startTime="1521">recalculate style. </span> <span class="line" data-startTime="1525">Still, there is a good amount </span><span class="line" data-startTime="1525">of green, of painting happening. </span> <span class="line" data-startTime="1530">So we want to figure </span><span class="line" data-startTime="1530">out what that is. </span> <span class="line" data-startTime="1533">So I'm going to go into </span><span class="line" data-startTime="1533">the DevTools settings, </span><span class="line" data-startTime="1535">and I'm going to turn on a mode </span><span class="line" data-startTime="1535">called Show Paint Rectangles. </span> <span class="line" data-startTime="1540">I'm also going to turn on </span><span class="line" data-startTime="1540">Show Composited Layer Borders. </span> <span class="line" data-startTime="1543">I'm going to get into what </span><span class="line" data-startTime="1543">these mean in a second, </span><span class="line" data-startTime="1545">but I just kind of want to </span><span class="line" data-startTime="1545">figure out what's happening. </span></p>

<p><span class="line" data-startTime="1548">OK, interesting &mdash; so </span><span class="line" data-startTime="1548">you can see as I scroll, </span><span class="line" data-startTime="1553">there's this rectangle </span><span class="line" data-startTime="1553">above the top nav. </span> <span class="line" data-startTime="1559">So it's being repainted. </span> <span class="line" data-startTime="1560">Every single time I </span><span class="line" data-startTime="1560">scroll, the browser </span><span class="line" data-startTime="1563">has to re-figure out what </span><span class="line" data-startTime="1563">the top of that looks like. </span> <span class="line" data-startTime="1565">You can't just put the </span><span class="line" data-startTime="1565">layers on top of each other. </span> <span class="line" data-startTime="1568">It's doing a lot of work here. </span> <span class="line" data-startTime="1570">I want to make that easier. </span> <span class="line" data-startTime="1572">And so I'm going to </span><span class="line" data-startTime="1572">try a few tricks. </span> <span class="line" data-startTime="1575">So we're going to come in here. </span> <span class="line" data-startTime="1578">Here's the main navigation. </span> <span class="line" data-startTime="1580">A quick tip is you can </span><span class="line" data-startTime="1580">hit H on the keyboard, </span><span class="line" data-startTime="1585">and it'll just hide </span><span class="line" data-startTime="1585">whatever element </span><span class="line" data-startTime="1586">you're looking at, all right? </span><span class="line" data-startTime="1590">So we have this top nav. </span> <span class="line" data-startTime="1594">And it's actually </span><span class="line" data-startTime="1594">position fixed right? </span><span class="line" data-startTime="1599">Or &mdash; here we go, it's position </span><span class="line" data-startTime="1599">absolute, interesting. </span> <span class="line" data-startTime="1608">Let me try and see </span><span class="line" data-startTime="1608">if we can fix this. </span></p>

<p><span class="line" data-startTime="1610">So I'm going to change </span><span class="line" data-startTime="1610">this to position fixed. </span> <span class="line" data-startTime="1616">And &mdash; ahh, OK, here we go. </span> <span class="line" data-startTime="1624">All right, position </span><span class="line" data-startTime="1624">fixed, and I'm </span><span class="line" data-startTime="1628">going to use a trick </span><span class="line" data-startTime="1628">called promoting a layer. </span> <span class="line" data-startTime="1633">And you might have </span><span class="line" data-startTime="1633">seen this before. </span> <span class="line" data-startTime="1635">It's often called </span><span class="line" data-startTime="1635">the translateZ(0) </span><span class="line" data-startTime="1638">or the translate3d hack. </span> <span class="line" data-startTime="1643">So now I've just </span><span class="line" data-startTime="1643">promoted it to a layer. </span> <span class="line" data-startTime="1645">And you can actually </span><span class="line" data-startTime="1645">see this gold border </span><span class="line" data-startTime="1648">around it &mdash; indicates </span><span class="line" data-startTime="1648">that it's now a layer. </span> <span class="line" data-startTime="1652">And now when I try </span><span class="line" data-startTime="1652">scrolling, I don't </span><span class="line" data-startTime="1654">have that red paint </span><span class="line" data-startTime="1654">rectangle around it. </span> <span class="line" data-startTime="1657">And I can verify </span><span class="line" data-startTime="1657">here in the Timeline </span><span class="line" data-startTime="1660">by just scrolling </span><span class="line" data-startTime="1660">up and down &mdash; yeah. </span> <span class="line" data-startTime="1664">And I've taken care </span><span class="line" data-startTime="1664">of that concern. </span> <span class="line" data-startTime="1666">This particular </span><span class="line" data-startTime="1666">trick often happens </span><span class="line" data-startTime="1669">with position fixed elements. </span> <span class="line" data-startTime="1672">And right now, it's only </span><span class="line" data-startTime="1672">particular to Chrome </span><span class="line" data-startTime="1675">on desktop. </span></p>

<p><span class="line" data-startTime="1676">Pretty much all other browsers, </span><span class="line" data-startTime="1676">including mobile browsers, </span><span class="line" data-startTime="1679">have ways of dealing with this. </span> <span class="line" data-startTime="1681">But it's something </span><span class="line" data-startTime="1681">to look out for. </span> <span class="line" data-startTime="1684">All right, so those are a few </span><span class="line" data-startTime="1684">of the tricks that you can use. </span> <span class="line" data-startTime="1691">But I want to walk through what </span><span class="line" data-startTime="1691">some of those operations were. </span> <span class="line" data-startTime="1694">The first that you </span><span class="line" data-startTime="1694">see is recalc style. </span> <span class="line" data-startTime="1697">So recalculation of style </span><span class="line" data-startTime="1697">gets all the style rules </span><span class="line" data-startTime="1700">in the document. </span> <span class="line" data-startTime="1700">Whether it's in a CSS style </span><span class="line" data-startTime="1700">sheet, an in-line style, </span><span class="line" data-startTime="1704">a style tag, it </span><span class="line" data-startTime="1704">gets all of them. </span> <span class="line" data-startTime="1707">And then, it looks at </span><span class="line" data-startTime="1707">what all the selectors are </span><span class="line" data-startTime="1710">and matches them </span><span class="line" data-startTime="1710">against the DOM. </span> <span class="line" data-startTime="1713">It figures out what elements it </span><span class="line" data-startTime="1713">needs to evaluate the style of </span><span class="line" data-startTime="1718">and gets a computed style </span><span class="line" data-startTime="1718">of every CSS property </span><span class="line" data-startTime="1721">for every element in the DOM. </span> <span class="line" data-startTime="1725">All right, once it knows what </span><span class="line" data-startTime="1725">all the styles should be, </span><span class="line" data-startTime="1729">it needs to apply it. </span></p>

<p><span class="line" data-startTime="1730">And this is called the layout. </span> <span class="line" data-startTime="1732">Layout is the first step </span><span class="line" data-startTime="1732">where it just figures out </span><span class="line" data-startTime="1734">the geometry of where </span><span class="line" data-startTime="1734">everything goes in the document. </span> <span class="line" data-startTime="1740">I want to show a problem </span><span class="line" data-startTime="1740">called layout thrashing. </span> <span class="line" data-startTime="1745">Layout thrashing happens because </span><span class="line" data-startTime="1745">when a browser is laying out </span><span class="line" data-startTime="1752">the geometry of </span><span class="line" data-startTime="1752">the page, it also </span><span class="line" data-startTime="1754">needs to figure </span><span class="line" data-startTime="1754">out &mdash; if you ask it </span><span class="line" data-startTime="1758">for the current position </span><span class="line" data-startTime="1758">or the current width, </span><span class="line" data-startTime="1761">the current size of an element, </span><span class="line" data-startTime="1761">the browser's like, oh, OK, </span><span class="line" data-startTime="1765">I'll go get that. </span> <span class="line" data-startTime="1766">But then, if you change </span><span class="line" data-startTime="1766">something, it re-lays it out. </span> <span class="line" data-startTime="1769">And then, there's a bad pattern </span><span class="line" data-startTime="1769">that people often fall into. </span> <span class="line" data-startTime="1772">I'm going to show a little </span><span class="line" data-startTime="1772">demonstration right now. </span></p>

<p><span class="line" data-startTime="1778">All right, come </span><span class="line" data-startTime="1778">on &mdash; OK, all right, </span><span class="line" data-startTime="1796">so in this little </span><span class="line" data-startTime="1796">demonstration, I </span><span class="line" data-startTime="1799">can change the size of </span><span class="line" data-startTime="1799">the green rectangle. </span> <span class="line" data-startTime="1802">And when I hit Set </span><span class="line" data-startTime="1802">Block Width, it goes </span><span class="line" data-startTime="1805">and it sets the width of </span><span class="line" data-startTime="1805">all the other text blocks. </span> <span class="line" data-startTime="1811">You can see &mdash; click, </span><span class="line" data-startTime="1811">ugh, it takes a while. </span> <span class="line" data-startTime="1818">Now, there's another </span><span class="line" data-startTime="1818">way to do this. </span> <span class="line" data-startTime="1822">And if I try that </span><span class="line" data-startTime="1822">way &mdash; ahh much faster. </span> <span class="line" data-startTime="1828">OK, so what's the </span><span class="line" data-startTime="1828">difference between the two? </span><span class="line" data-startTime="1832">Let's open up the DevTools. </span> <span class="line" data-startTime="1836">First, I'll turn off these guys. </span> <span class="line" data-startTime="1840">And I'm going to start </span><span class="line" data-startTime="1840">our Timeline recording </span><span class="line" data-startTime="1844">and set that block width. </span></p>

<p><span class="line" data-startTime="1848">Ooh, OK, so here, you can see </span><span class="line" data-startTime="1848">that big pause, that big chunk, </span><span class="line" data-startTime="1855">after I clicked. </span> <span class="line" data-startTime="1859">All right, so I'll </span><span class="line" data-startTime="1859">bring this up. </span> <span class="line" data-startTime="1861">Now, you can see here, this </span><span class="line" data-startTime="1861">pattern &mdash; recalc style layout, </span><span class="line" data-startTime="1864">recalc style layout, </span><span class="line" data-startTime="1864">recalc style layout, </span><span class="line" data-startTime="1866">recalc style layout. </span> <span class="line" data-startTime="1869">And there's this little </span><span class="line" data-startTime="1869">warning indicator telling you </span><span class="line" data-startTime="1873">that there might be a problem. </span> <span class="line" data-startTime="1875">And it says, "Forced </span><span class="line" data-startTime="1875">synchronous layout </span><span class="line" data-startTime="1877">is a possible </span><span class="line" data-startTime="1877">performance bottleneck." </span><span class="line" data-startTime="1880">And you can see right here </span><span class="line" data-startTime="1880">what it's telling you. </span> <span class="line" data-startTime="1884">There was a layout that was </span><span class="line" data-startTime="1884">invalidated at line 125. </span> <span class="line" data-startTime="1887">And the layout was forced to </span><span class="line" data-startTime="1887">be recomputed at line 124. </span></p>

<p><span class="line" data-startTime="1893">So let's go look at those lines. </span> <span class="line" data-startTime="1897">All right, so here is line 124. </span> <span class="line" data-startTime="1902">What we have is </span><span class="line" data-startTime="1902">a big while loop. </span> <span class="line" data-startTime="1904">It's just looping over all </span><span class="line" data-startTime="1904">those little text blocks. </span> <span class="line" data-startTime="1908">And inside that loop, </span><span class="line" data-startTime="1908">we get the offset width </span><span class="line" data-startTime="1911">of that green </span><span class="line" data-startTime="1911">block, of this guy. </span> <span class="line" data-startTime="1916">And then, we come in and we </span><span class="line" data-startTime="1916">set the width of each element. </span> <span class="line" data-startTime="1920">So we're setting the </span><span class="line" data-startTime="1920">width of each element. </span> <span class="line" data-startTime="1922">We're going to </span><span class="line" data-startTime="1922">look into the size. </span> <span class="line" data-startTime="1923">We're setting the width, </span><span class="line" data-startTime="1923">going to look into the size. </span> <span class="line" data-startTime="1927">In the fast version, </span><span class="line" data-startTime="1927">which is right here, </span><span class="line" data-startTime="1929">we go and we look up the </span><span class="line" data-startTime="1929">width of that block once. </span> <span class="line" data-startTime="1933">And then, we go and </span><span class="line" data-startTime="1933">we do all of our sets </span><span class="line" data-startTime="1935">where we set the widths. </span> <span class="line" data-startTime="1937">So the big thing </span><span class="line" data-startTime="1937">to learn here is </span><span class="line" data-startTime="1941">that if you need to figure out </span><span class="line" data-startTime="1941">the dimensions, if you need </span><span class="line" data-startTime="1948">to ask the DOM </span><span class="line" data-startTime="1948">for the dimensions </span><span class="line" data-startTime="1951">or sizes of an element, </span><span class="line" data-startTime="1951">try and do that only once </span><span class="line" data-startTime="1955">and not interleave it </span><span class="line" data-startTime="1955">with changes that you're </span><span class="line" data-startTime="1957">making to the DOM. </span></p>

<p><span class="line" data-startTime="1961">But if you ever </span><span class="line" data-startTime="1961">have any question, </span><span class="line" data-startTime="1963">just open up the Timeline. </span> <span class="line" data-startTime="1964">And you'll probably end </span><span class="line" data-startTime="1964">up seeing this pattern. </span> <span class="line" data-startTime="1967">It happens a lot of times. </span> <span class="line" data-startTime="1971">All right, the next is paint. </span> <span class="line" data-startTime="1973">Painting often </span><span class="line" data-startTime="1973">captures a lot of time. </span> <span class="line" data-startTime="1977">We were seeing </span><span class="line" data-startTime="1977">before all the green. </span> <span class="line" data-startTime="1979">There's a lot of </span><span class="line" data-startTime="1979">time spent in paint. </span> <span class="line" data-startTime="1981">There's a few ways </span><span class="line" data-startTime="1981">to debug when you're </span><span class="line" data-startTime="1985">having a lot of painting. </span> <span class="line" data-startTime="1986">And the first is </span><span class="line" data-startTime="1986">Continuous Paint mode. </span> <span class="line" data-startTime="1989">So Continuous Paint </span><span class="line" data-startTime="1989">mode allows you </span><span class="line" data-startTime="1992">to look at how long </span><span class="line" data-startTime="1992">it takes to paint, </span><span class="line" data-startTime="1996">and it allows you to </span><span class="line" data-startTime="1996">kind of figure out </span><span class="line" data-startTime="1999">what is contributing to it. </span> <span class="line" data-startTime="2000">So I'm going to turn it on now. </span> <span class="line" data-startTime="2004">You'll see right here, Enable </span><span class="line" data-startTime="2004">Continuous Page Repainting. </span> <span class="line" data-startTime="2009">All right, so this is it. </span></p>

<p><span class="line" data-startTime="2011">What it's telling me is it's </span><span class="line" data-startTime="2011">taking about three to four </span><span class="line" data-startTime="2016">milliseconds to paint this page. </span> <span class="line" data-startTime="2020">And it's just doing it </span><span class="line" data-startTime="2020">over and over again. </span> <span class="line" data-startTime="2022">I can verify that down here </span><span class="line" data-startTime="2022">by opening the timeline. </span> <span class="line" data-startTime="2027">All right, so what </span><span class="line" data-startTime="2027">this allows us to do </span><span class="line" data-startTime="2030">is we can make some </span><span class="line" data-startTime="2030">changes and figure out </span><span class="line" data-startTime="2032">how to kind of manipulate </span><span class="line" data-startTime="2032">what that looks like. </span> <span class="line" data-startTime="2037">So I'm going to come over </span><span class="line" data-startTime="2037">and turn on some box shadows. </span> <span class="line" data-startTime="2042">Wow, OK, cool, so box </span><span class="line" data-startTime="2042">shadows definitely </span><span class="line" data-startTime="2048">take a lot more time to paint. </span> <span class="line" data-startTime="2050">And so that's why we're seeing </span><span class="line" data-startTime="2050">the graph really spike up. </span> <span class="line" data-startTime="2055">I could also, let's see, </span><span class="line" data-startTime="2055">try &mdash; if, for instance, </span><span class="line" data-startTime="2060">I take this box show, and right </span><span class="line" data-startTime="2060">now it has a blur radius of 120 </span><span class="line" data-startTime="2065">pixels, if I just change that </span><span class="line" data-startTime="2065">down to 20 pixels, it's faster. </span></p>

<p><span class="line" data-startTime="2072">Bring it down even more &mdash; yeah. </span> <span class="line" data-startTime="2075">So this allows you to kind </span><span class="line" data-startTime="2075">of see what affects paint. </span> <span class="line" data-startTime="2079">Oftentimes, box shadow does </span><span class="line" data-startTime="2079">currently impact paint cost </span><span class="line" data-startTime="2084">quite a lot. </span> <span class="line" data-startTime="2085">But Chrome is always </span><span class="line" data-startTime="2085">improving things. </span> <span class="line" data-startTime="2087">So that might not be </span><span class="line" data-startTime="2087">the same case tomorrow. </span> <span class="line" data-startTime="2093">The next situation </span><span class="line" data-startTime="2093">I want to introduce </span><span class="line" data-startTime="2095">is &mdash; we call it paint storms. </span> <span class="line" data-startTime="2097">And pant storms basically </span><span class="line" data-startTime="2097">refers to the browser </span><span class="line" data-startTime="2101">is painting the page a lot. </span> <span class="line" data-startTime="2102">But it really shouldn't have to. </span></p>

<p><span class="line" data-startTime="2105">So let's take a look at a </span><span class="line" data-startTime="2105">situation where that happens. </span> <span class="line" data-startTime="2111">So I'm going to come in here </span><span class="line" data-startTime="2111">and set this background &mdash; </span><span class="line" data-startTime="2115">all right. </span> <span class="line" data-startTime="2122">I'm going to come </span><span class="line" data-startTime="2122">over to Timeline </span><span class="line" data-startTime="2125">and turn off Continuous </span><span class="line" data-startTime="2125">Paint for now. </span> <span class="line" data-startTime="2129">And if I turn on Show Paint </span><span class="line" data-startTime="2129">Recs, you can see &mdash; actually, </span><span class="line" data-startTime="2135">it's a little hard to see. </span> <span class="line" data-startTime="2137">But the entire </span><span class="line" data-startTime="2137">screen is repainting </span><span class="line" data-startTime="2141">on every single scroll. </span> <span class="line" data-startTime="2143">We can see the paint </span><span class="line" data-startTime="2143">action down here. </span> <span class="line" data-startTime="2146">It has to figure out &mdash; let </span><span class="line" data-startTime="2146">me turn on a box shadow, </span><span class="line" data-startTime="2150">too, so it hurts even more. </span> <span class="line" data-startTime="2154">Uhh, yeah, that </span><span class="line" data-startTime="2154">feels bad, right? </span><span class="line" data-startTime="2158">Ouch &mdash; all right, </span><span class="line" data-startTime="2158">so what's happening </span><span class="line" data-startTime="2162">is that there's the fixed </span><span class="line" data-startTime="2162">background behind all </span><span class="line" data-startTime="2165">this content. </span> <span class="line" data-startTime="2166">And the browser is </span><span class="line" data-startTime="2166">being really slow </span><span class="line" data-startTime="2169">in figuring out &mdash; on </span><span class="line" data-startTime="2169">every single scroll, </span><span class="line" data-startTime="2172">it is recomputing how that looks </span><span class="line" data-startTime="2172">underneath all this content. </span></p>

<p><span class="line" data-startTime="2178">I'm going to quickly try </span><span class="line" data-startTime="2178">and fix this &mdash; we'll see. </span> <span class="line" data-startTime="2184">Doo, doo, doo &mdash; I'm going to </span><span class="line" data-startTime="2184">take the fixed background that </span><span class="line" data-startTime="2191">is on the body, and I'm going </span><span class="line" data-startTime="2191">to create a brand new element. </span> <span class="line" data-startTime="2203">Let's put him right here. </span> <span class="line" data-startTime="2206">And I'm going to cheat. </span> <span class="line" data-startTime="2210">And I have some code &mdash; hey. </span> <span class="line" data-startTime="2215">Hey, what? </span><span class="line" data-startTime="2217">No, definitely not &mdash; </span><span class="line" data-startTime="2217">OK, there we go. </span> <span class="line" data-startTime="2223">So I have my div. </span> <span class="line" data-startTime="2225">And let's drop in that. </span> <span class="line" data-startTime="2228">OK, yeah, that </span><span class="line" data-startTime="2228">seems pretty good. </span> <span class="line" data-startTime="2232">With 100% cover &mdash; there we go. </span> <span class="line" data-startTime="2238">OK, cool, now &mdash; </span><span class="line" data-startTime="2238">so I've basically </span><span class="line" data-startTime="2243">shifted the background from </span><span class="line" data-startTime="2243">the background of the body </span><span class="line" data-startTime="2246">to a div that's within it and </span><span class="line" data-startTime="2246">just put z-index as negative 1 </span><span class="line" data-startTime="2252">to kind of put it </span><span class="line" data-startTime="2252">behind everything. </span></p>

<p><span class="line" data-startTime="2254">And I use that trick again, </span><span class="line" data-startTime="2254">the translateZ(0) trick, </span><span class="line" data-startTime="2257">because it is position fixed. </span> <span class="line" data-startTime="2261">And so you can see now, </span><span class="line" data-startTime="2261">there's no red outline. </span> <span class="line" data-startTime="2265">And if I look in the </span><span class="line" data-startTime="2265">timeline, there's no activity. </span> <span class="line" data-startTime="2271">Just to kind of verify that </span><span class="line" data-startTime="2271">this indeed does change things, </span><span class="line" data-startTime="2275">I take off that translateZ(0). </span> <span class="line" data-startTime="2281">It's back. </span> <span class="line" data-startTime="2286">It's gone. </span> <span class="line" data-startTime="2287">Cool, so that can be a trick </span><span class="line" data-startTime="2287">for fixed backgrounds or fixed </span><span class="line" data-startTime="2294">position elements. </span> <span class="line" data-startTime="2296">But the big thing that </span><span class="line" data-startTime="2296">you want to look for </span><span class="line" data-startTime="2298">is turning on Show </span><span class="line" data-startTime="2298">Paint Rectangles </span><span class="line" data-startTime="2301">and seeing if the </span><span class="line" data-startTime="2301">entire page is flashing, </span><span class="line" data-startTime="2303">or one section of </span><span class="line" data-startTime="2303">the page is flashing, </span><span class="line" data-startTime="2305">while you're scrolling the </span><span class="line" data-startTime="2305">page, or while some behavior is </span><span class="line" data-startTime="2307">happening. </span></p>

<p><span class="line" data-startTime="2308">That's often a way you can &mdash; </span><span class="line" data-startTime="2308">there is some improvement </span><span class="line" data-startTime="2312">that you could make. </span> <span class="line" data-startTime="2313">And you want to </span><span class="line" data-startTime="2313">investigate what you </span><span class="line" data-startTime="2315">can do there to make the </span><span class="line" data-startTime="2315">experience a lot smoother. </span> <span class="line" data-startTime="2319">All right, moving forward &mdash; </span><span class="line" data-startTime="2319">I just kind of want </span><span class="line" data-startTime="2328">to point out, if you spend a </span><span class="line" data-startTime="2328">lot of time in the timeline, </span><span class="line" data-startTime="2330">you want to get a flow </span><span class="line" data-startTime="2330">for what operations </span><span class="line" data-startTime="2332">are supposed to happen. </span> <span class="line" data-startTime="2334">And this is the </span><span class="line" data-startTime="2334">correct kind of flow. </span> <span class="line" data-startTime="2336">So oftentimes, you'll </span><span class="line" data-startTime="2336">have JavaScript that runs. </span> <span class="line" data-startTime="2339">After that, the styles </span><span class="line" data-startTime="2339">need to be recalculated. </span> <span class="line" data-startTime="2342">The geometry of the page </span><span class="line" data-startTime="2342">needs to be laid out. </span></p>

<p><span class="line" data-startTime="2344">Maybe there's paint set-up. </span> <span class="line" data-startTime="2346">We have to show what </span><span class="line" data-startTime="2346">things look like. </span> <span class="line" data-startTime="2348">And then, we have </span><span class="line" data-startTime="2348">to kind of send it </span><span class="line" data-startTime="2349">to the GPU and composite </span><span class="line" data-startTime="2349">layers together. </span> <span class="line" data-startTime="2355">When doing performance </span><span class="line" data-startTime="2355">work with the timeline, </span><span class="line" data-startTime="2357">this is kind of a cheat sheet </span><span class="line" data-startTime="2357">for what tool to use when. </span> <span class="line" data-startTime="2362">If you profile </span><span class="line" data-startTime="2362">with the timeline, </span><span class="line" data-startTime="2365">and you're spending a </span><span class="line" data-startTime="2365">lot of time in script, </span><span class="line" data-startTime="2367">just go to the </span><span class="line" data-startTime="2367">JavaScript Profiler. </span> <span class="line" data-startTime="2370">If you're spending a lot of </span><span class="line" data-startTime="2370">time in layout, look and figure </span><span class="line" data-startTime="2374">out if you have layout </span><span class="line" data-startTime="2374">thrashing, things like that. </span></p>

<p><span class="line" data-startTime="2377">Paint &mdash; I covered this. </span> <span class="line" data-startTime="2379">Paint recs, layer borders &mdash; </span><span class="line" data-startTime="2379">use Continuous Paint mode. </span> <span class="line" data-startTime="2384">And there's a pro </span><span class="line" data-startTime="2384">level feature called </span><span class="line" data-startTime="2387">About Tracing, which dives </span><span class="line" data-startTime="2387">into the guts of Chrome, </span><span class="line" data-startTime="2391">that you can use if none of </span><span class="line" data-startTime="2391">these are working for you. </span> <span class="line" data-startTime="2397">All right, but how do </span><span class="line" data-startTime="2397">these all map to CSS? </span><span class="line" data-startTime="2401">Just your general </span><span class="line" data-startTime="2401">CSS that you write &mdash; </span><span class="line" data-startTime="2407">the CSS Selector gets </span><span class="line" data-startTime="2407">recomputed in recalc style. </span> <span class="line" data-startTime="2410">The height, because it's </span><span class="line" data-startTime="2410">the geometry of the element, </span><span class="line" data-startTime="2413">is what size it is </span><span class="line" data-startTime="2413">and its position. </span> <span class="line" data-startTime="2416">That affects layout. </span> <span class="line" data-startTime="2417">And a text shadow doesn't affect </span><span class="line" data-startTime="2417">the layout of the page at all. </span> <span class="line" data-startTime="2421">It only affects how it looks. </span></p>

<p><span class="line" data-startTime="2422">It's a visual effect. </span> <span class="line" data-startTime="2423">And so that's captured </span><span class="line" data-startTime="2423">underneath paint. </span> <span class="line" data-startTime="2428">So there's actually &mdash; </span><span class="line" data-startTime="2428">between all </span><span class="line" data-startTime="2431">the different CSS </span><span class="line" data-startTime="2431">properties, they </span><span class="line" data-startTime="2433">affect different parts </span><span class="line" data-startTime="2433">of all these operations. </span> <span class="line" data-startTime="2438">Transform and opacity can </span><span class="line" data-startTime="2438">be operated 100% on the GPU. </span> <span class="line" data-startTime="2444">This is really good. </span> <span class="line" data-startTime="2447">Basically, GPUs are </span><span class="line" data-startTime="2447">fantastic at doing </span><span class="line" data-startTime="2451">these sorts of operations. </span> <span class="line" data-startTime="2452">But everything else needs to go </span><span class="line" data-startTime="2452">through a little bit more work. </span> <span class="line" data-startTime="2455">Box shadow, border </span><span class="line" data-startTime="2455">radius, and background </span><span class="line" data-startTime="2457">just need to be painted. </span> <span class="line" data-startTime="2459">But they don't affect </span><span class="line" data-startTime="2459">the geometry, the layout. </span></p>

<p><span class="line" data-startTime="2462">And like I mentioned, </span><span class="line" data-startTime="2462">width, margin, border, </span><span class="line" data-startTime="2464">those sorts of things, </span><span class="line" data-startTime="2464">those do layout. </span> <span class="line" data-startTime="2467">So if you're doing an </span><span class="line" data-startTime="2467">animation, like you're </span><span class="line" data-startTime="2470">animating an item </span><span class="line" data-startTime="2470">across the page, </span><span class="line" data-startTime="2472">or you're increasing the </span><span class="line" data-startTime="2472">height of an element, the less </span><span class="line" data-startTime="2476">work that you can </span><span class="line" data-startTime="2476">do, the better. </span> <span class="line" data-startTime="2479">If all you can change is just </span><span class="line" data-startTime="2479">the transform and opacity, </span><span class="line" data-startTime="2483">it's probably going to be a </span><span class="line" data-startTime="2483">lot faster than if you try </span><span class="line" data-startTime="2485">and animate left </span><span class="line" data-startTime="2485">and top or width. </span> <span class="line" data-startTime="2489">So try and animate these guys. </span> <span class="line" data-startTime="2495">Here's another way </span><span class="line" data-startTime="2495">to look at that. </span> <span class="line" data-startTime="2498">There's four things that a </span><span class="line" data-startTime="2498">browser can transition really </span><span class="line" data-startTime="2501">fast. </span></p>

<p><span class="line" data-startTime="2502">They can scale, move, </span><span class="line" data-startTime="2502">rotate, and fade. </span> <span class="line" data-startTime="2505">That maps over to our </span><span class="line" data-startTime="2505">transforms and our opacity. </span> <span class="line" data-startTime="2511">Sometimes, you do need to </span><span class="line" data-startTime="2511">apply that translateZ(0). </span> <span class="line" data-startTime="2516">Everything else that you </span><span class="line" data-startTime="2516">translate, that you animate, </span><span class="line" data-startTime="2519">might take more work. </span> <span class="line" data-startTime="2520">And so just be aware of that. </span> <span class="line" data-startTime="2522">Especially on older </span><span class="line" data-startTime="2522">phones, animating something </span><span class="line" data-startTime="2525">like left and top or </span><span class="line" data-startTime="2525">width is going to be slow. </span> <span class="line" data-startTime="2530">So if you want things </span><span class="line" data-startTime="2530">to be fast on mobile, </span><span class="line" data-startTime="2533">try and animate </span><span class="line" data-startTime="2533">only those things. </span> <span class="line" data-startTime="2538">All right, I just want </span><span class="line" data-startTime="2538">to quickly try and show </span><span class="line" data-startTime="2544">the difference of what this </span><span class="line" data-startTime="2544">looks like in the DevTools. </span></p>

<p><span class="line" data-startTime="2549">I have this table here. </span> <span class="line" data-startTime="2551">And this is kind of </span><span class="line" data-startTime="2551">a fun little app that </span><span class="line" data-startTime="2554">lets you see how different </span><span class="line" data-startTime="2554">CSS properties animate. </span> <span class="line" data-startTime="2559">It's nice. </span> <span class="line" data-startTime="2562">Let's take a look </span><span class="line" data-startTime="2562">at what changes </span><span class="line" data-startTime="2564">all these things affect </span><span class="line" data-startTime="2564">in the web browser. </span> <span class="line" data-startTime="2567">So we'll open up the </span><span class="line" data-startTime="2567">DevTools and come down here. </span> <span class="line" data-startTime="2575">All right, so </span><span class="line" data-startTime="2575">here, we have left. </span> <span class="line" data-startTime="2579">Here we have top. </span> <span class="line" data-startTime="2580">We're animating the top. </span> <span class="line" data-startTime="2582">And here's transform. </span> <span class="line" data-startTime="2584">And if I come in, </span><span class="line" data-startTime="2584">I'm going to turn off </span><span class="line" data-startTime="2585">Show Paint Rectangles for </span><span class="line" data-startTime="2585">now and go to Timeline &mdash; yes. </span></p>

<p><span class="line" data-startTime="2590">I'll do a recording. </span> <span class="line" data-startTime="2595">There we go. </span> <span class="line" data-startTime="2597">So here, in this </span><span class="line" data-startTime="2597">recording, you can </span><span class="line" data-startTime="2598">see we're going through </span><span class="line" data-startTime="2598">recalc style, layout, paint, </span><span class="line" data-startTime="2602">composite layers. </span> <span class="line" data-startTime="2606">When I do transform &mdash; </span><span class="line" data-startTime="2606">oops &mdash; all we're doing </span><span class="line" data-startTime="2613">is just painting and </span><span class="line" data-startTime="2613">composite layers. </span> <span class="line" data-startTime="2616">And that's all the </span><span class="line" data-startTime="2616">work that we do. </span> <span class="line" data-startTime="2620">Yeah, so the best ways to </span><span class="line" data-startTime="2620">do an animation, if you can, </span><span class="line" data-startTime="2628">is to not use JavaScript. </span></p>

<p><span class="line" data-startTime="2629">If you can do it completely in </span><span class="line" data-startTime="2629">key frame animations or a CSS </span><span class="line" data-startTime="2633">transition, browsers can </span><span class="line" data-startTime="2633">optimize that really, </span><span class="line" data-startTime="2636">really well. </span> <span class="line" data-startTime="2637">Once you use jQuery to animate, </span><span class="line" data-startTime="2637">it's going to be a lot slower. </span> <span class="line" data-startTime="2642">Because the browser can't </span><span class="line" data-startTime="2642">predict what's happening next. </span> <span class="line" data-startTime="2647">All right, let's move on. </span> <span class="line" data-startTime="2654">I was going to talk a little </span><span class="line" data-startTime="2654">bit about how to figure out </span><span class="line" data-startTime="2658">when sites are done loading. </span> <span class="line" data-startTime="2661">And there's a </span><span class="line" data-startTime="2661">fantastic measurement. </span> <span class="line" data-startTime="2663">And it's called the speed index. </span> <span class="line" data-startTime="2665">It basically </span><span class="line" data-startTime="2665">evaluates how long it </span><span class="line" data-startTime="2668">takes to get a visual </span><span class="line" data-startTime="2668">on the page of what </span><span class="line" data-startTime="2671">the page is supposed </span><span class="line" data-startTime="2671">to look like. </span></p>

<p><span class="line" data-startTime="2674">It's a really nice </span><span class="line" data-startTime="2674">metric and captures </span><span class="line" data-startTime="2676">when the page has completed </span><span class="line" data-startTime="2676">loading a lot better </span><span class="line" data-startTime="2679">than window.load or </span><span class="line" data-startTime="2679">DOM content ready. </span> <span class="line" data-startTime="2683">So it's called the speed index. </span> <span class="line" data-startTime="2684">And right now, you can use </span><span class="line" data-startTime="2684">Web Page Test to look at it. </span> <span class="line" data-startTime="2690">Web Page Test &mdash; raise </span><span class="line" data-startTime="2690">your hand if you've </span><span class="line" data-startTime="2692">used Web Page Test before. </span> <span class="line" data-startTime="2694">A few people, yeah &mdash; </span><span class="line" data-startTime="2694">it's really fantastic. </span> <span class="line" data-startTime="2698">So I'm going to show quickly </span><span class="line" data-startTime="2698">what the results look like. </span> <span class="line" data-startTime="2702">So I did an analysis for </span><span class="line" data-startTime="2702">a site called RetailMeNot. </span> <span class="line" data-startTime="2707">And in it, you get </span><span class="line" data-startTime="2707">the network waterfall. </span> <span class="line" data-startTime="2712">But a really nice view </span><span class="line" data-startTime="2712">is the film strip view </span><span class="line" data-startTime="2716">where you can see </span><span class="line" data-startTime="2716">this network waterfall </span><span class="line" data-startTime="2721">against the visual </span><span class="line" data-startTime="2721">representation. </span> <span class="line" data-startTime="2724">So I can scroll and </span><span class="line" data-startTime="2724">kind of see as resources </span><span class="line" data-startTime="2727">were loaded what did </span><span class="line" data-startTime="2727">the page look like. </span> <span class="line" data-startTime="2729">And here, at 0.9 seconds, we </span><span class="line" data-startTime="2729">finally got to see something. </span></p>

<p><span class="line" data-startTime="2736">It can also capture what the </span><span class="line" data-startTime="2736">Chrome DevTools Timeline will </span><span class="line" data-startTime="2742">look like for this </span><span class="line" data-startTime="2742">exact recording. </span> <span class="line" data-startTime="2745">The Chrome DevTools </span><span class="line" data-startTime="2745">is a web app. </span> <span class="line" data-startTime="2747">So we can just load up </span><span class="line" data-startTime="2747">the Chrome DevTools using </span><span class="line" data-startTime="2751">that recording and see if we </span><span class="line" data-startTime="2751">see any of those patterns. </span> <span class="line" data-startTime="2757">Big layout, timers &mdash; yeah, </span><span class="line" data-startTime="2757">this site was really fast, </span><span class="line" data-startTime="2763">so there's not much optimize. </span> <span class="line" data-startTime="2770">And lastly, they also do Show </span><span class="line" data-startTime="2770">and Capture the Speed Index. </span> <span class="line" data-startTime="2775">So a really nice </span><span class="line" data-startTime="2775">thing that you can do </span><span class="line" data-startTime="2776">is have Web Page Test track </span><span class="line" data-startTime="2776">the performance of your page. </span> <span class="line" data-startTime="2784">Do a test once a day, and you </span><span class="line" data-startTime="2784">can see its progress over time, </span><span class="line" data-startTime="2788">and see if you're </span><span class="line" data-startTime="2788">actually improving </span><span class="line" data-startTime="2790">how fast that page loads. </span> <span class="line" data-startTime="2794">It's possible to run a </span><span class="line" data-startTime="2794">completely private instance. </span></p>

<p><span class="line" data-startTime="2797">You can send it. </span> <span class="line" data-startTime="2798">You can ask a Chrome or </span><span class="line" data-startTime="2798">an IE8 or IE9 in the cloud </span><span class="line" data-startTime="2804">to evaluate the page. </span> <span class="line" data-startTime="2805">Or you can also </span><span class="line" data-startTime="2805">run it internally </span><span class="line" data-startTime="2806">if you want to evaluate </span><span class="line" data-startTime="2806">it against a site that's </span><span class="line" data-startTime="2808">in development. </span> <span class="line" data-startTime="2811">All right, so to sum up, users </span><span class="line" data-startTime="2811">expect things to be fast. </span> <span class="line" data-startTime="2819">Under 100 milliseconds </span><span class="line" data-startTime="2819">is good for showing </span><span class="line" data-startTime="2823">a user that it's happening. </span> <span class="line" data-startTime="2825">But it starts to </span><span class="line" data-startTime="2825">get really stuttery </span><span class="line" data-startTime="2827">when it comes to animation. </span> <span class="line" data-startTime="2829">Anything longer than </span><span class="line" data-startTime="2829">one second is just </span><span class="line" data-startTime="2832">going to take way too long. </span></p>

<p><span class="line" data-startTime="2833">So you want to be really attuned </span><span class="line" data-startTime="2833">to how fast your page loads </span><span class="line" data-startTime="2836">and how fast the </span><span class="line" data-startTime="2836">interactions are. </span> <span class="line" data-startTime="2839">These are some </span><span class="line" data-startTime="2839">aggressive but good goals </span><span class="line" data-startTime="2842">to kind of think about. </span> <span class="line" data-startTime="2844">When it comes to delivering </span><span class="line" data-startTime="2844">an experience on mobile, </span><span class="line" data-startTime="2847">you really want to </span><span class="line" data-startTime="2847">show the content that's </span><span class="line" data-startTime="2849">above the fold, the content that </span><span class="line" data-startTime="2849">the user sees when they first </span><span class="line" data-startTime="2852">load up the page, in under </span><span class="line" data-startTime="2852">one second from after they </span><span class="line" data-startTime="2856">click a button, click a link, </span><span class="line" data-startTime="2856">or finish typing in a URL. </span> <span class="line" data-startTime="2860">Under one second is a good goal. </span> <span class="line" data-startTime="2863">One of the things that has to </span><span class="line" data-startTime="2863">happen to be able to do this </span><span class="line" data-startTime="2866">is serve all the </span><span class="line" data-startTime="2866">content that you </span><span class="line" data-startTime="2868">need to for that above the </span><span class="line" data-startTime="2868">fold content in under 14K. </span> <span class="line" data-startTime="2875">That includes any CSS that </span><span class="line" data-startTime="2875">is required for that section. </span></p>

<p><span class="line" data-startTime="2878">But if you have CSS that </span><span class="line" data-startTime="2878">applies to the rest of the page, </span><span class="line" data-startTime="2881">you can defer that and </span><span class="line" data-startTime="2881">send that part later. </span> <span class="line" data-startTime="2885">Oh, well, OK, all right, </span><span class="line" data-startTime="2885">lastly &mdash; a maximum </span><span class="line" data-startTime="2894">of 200 milliseconds </span><span class="line" data-startTime="2894">for the server </span><span class="line" data-startTime="2896">to respond with the page, 60 FPS </span><span class="line" data-startTime="2896">scrolling, 60 FPS transitions, </span><span class="line" data-startTime="2901">keep things fast, and a </span><span class="line" data-startTime="2901">speed index under 1,000. </span> <span class="line" data-startTime="2908">I showed you a lot of things </span><span class="line" data-startTime="2908">in the Chrome Developer tools </span><span class="line" data-startTime="2910">today. </span></p>

<p><span class="line" data-startTime="2911">We have been working </span><span class="line" data-startTime="2911">on our documentation. </span> <span class="line" data-startTime="2914">So this covers a lot of </span><span class="line" data-startTime="2914">the functionality that's </span><span class="line" data-startTime="2916">in there, things that </span><span class="line" data-startTime="2916">you might not expect. </span> <span class="line" data-startTime="2918">So I encourage you </span><span class="line" data-startTime="2918">to go check that out. </span> <span class="line" data-startTime="2922">And everything that I showed </span><span class="line" data-startTime="2922">is available in Chrome Canary </span><span class="line" data-startTime="2926">today. </span> <span class="line" data-startTime="2928">And one more thing &mdash; </span><span class="line" data-startTime="2928">is Jimmy Moon here? </span><span class="line" data-startTime="2932">He is, oh good. </span> <span class="line" data-startTime="2934">OK, great, hi, Jimmy. </span> <span class="line" data-startTime="2936">Jimmy's awesome. </span> <span class="line" data-startTime="2938">And we met actually at </span><span class="line" data-startTime="2938">Google I/O not too long ago. </span> <span class="line" data-startTime="2941">He's a JavaScript </span><span class="line" data-startTime="2941">developer here in Seoul. </span> <span class="line" data-startTime="2944">And he's been really active </span><span class="line" data-startTime="2944">on the Yeomen project. </span> <span class="line" data-startTime="2948">He also maintains the generators </span><span class="line" data-startTime="2948">for the Chrome apps and Chrome </span><span class="line" data-startTime="2952">extensions. </span> <span class="line" data-startTime="2953">And a lot of people use these. </span> <span class="line" data-startTime="2955">He's also working </span><span class="line" data-startTime="2955">on a brand new site </span><span class="line" data-startTime="2957">that I encourage </span><span class="line" data-startTime="2957">you to check out. </span></p>

<p><span class="line" data-startTime="2958">It's called Chromist. </span> <span class="line" data-startTime="2960">And he wrote about Polymer </span><span class="line" data-startTime="2960">just the other day. </span> <span class="line" data-startTime="2963">And it's really fantastic. </span> <span class="line" data-startTime="2964">So I encourage you </span><span class="line" data-startTime="2964">to check that out. </span> <span class="line" data-startTime="2965">And I just wanted </span><span class="line" data-startTime="2965">to thank you, Jimmy, </span><span class="line" data-startTime="2967">because you're fantastic. </span> <span class="line" data-startTime="2968">So thank you very much. </span> <span class="line" data-startTime="2969">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="2972"><span class="speakerName">Paul Irish</span>: And </span><span class="line" data-startTime="2972">that's it for me, too. </span><span class="line" data-startTime="2974">Thank you guys very </span><span class="line" data-startTime="2974">much &mdash; appreciate it. </span><span class="line" data-startTime="2976">[APPLAUSE] </span></p>