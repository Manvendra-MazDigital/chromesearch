<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>Google I/O 2013 &mdash; JAM with Chrome: How We Built a Massive Multiplayer Music App Using Web Technology</h1>

<h2>Xavier Barrade, Oskar Eriksson</h2>

<a class="video" href="http://youtu.be/eQxUaUQdWYQ">youtu.be/eQxUaUQdWYQ</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="2"><span class="speakerName">Xavier Barrade</span>: We are </span><span class="line" data-startTime="2">here to talk to you </span><span class="line" data-startTime="3">about JAM with Chrome. </span> <span class="line" data-startTime="6">So when we started the project, </span><span class="line" data-startTime="6">we wanted to make </span><span class="line" data-startTime="8">something that would allow </span><span class="line" data-startTime="8">people to come together around </span><span class="line" data-startTime="11">the Chrome browser. </span> <span class="line" data-startTime="13">But, of course, most people </span><span class="line" data-startTime="13">don't treat the Chrome browser </span><span class="line" data-startTime="16">as a thing and they're </span><span class="line" data-startTime="16">interested in things like </span><span class="line" data-startTime="19">food, sport, and in </span><span class="line" data-startTime="19">this case, music. </span> <span class="line" data-startTime="22">And we wondered if it would be </span><span class="line" data-startTime="22">possible to let people go on </span><span class="line" data-startTime="25">the website, invite their </span><span class="line" data-startTime="25">friends, and play music in </span><span class="line" data-startTime="28">real time instantly, so </span><span class="line" data-startTime="28">kind of be a rockstar. </span> <span class="line" data-startTime="34">So as you can see, there is a </span><span class="line" data-startTime="34">URL on top of the slides, so </span><span class="line" data-startTime="36">you can have a play with the </span><span class="line" data-startTime="36">website while we talk, but </span><span class="line" data-startTime="39">please keep a bit of your </span><span class="line" data-startTime="39">attention for us. </span> <span class="line" data-startTime="41">And in a few minutes, we will </span><span class="line" data-startTime="41">make sure to demo, and at the </span><span class="line" data-startTime="43">end of the talk we will </span><span class="line" data-startTime="43">jam with you. </span> <span class="line" data-startTime="47">So when we started the project, </span><span class="line" data-startTime="47">things looked quite </span><span class="line" data-startTime="49">simple, but as we progressed, </span><span class="line" data-startTime="49">it got more exciting, but it </span><span class="line" data-startTime="56">also got bigger. </span></p>

<p><span class="line" data-startTime="57">So just so you know, there's </span><span class="line" data-startTime="57">19 different instruments in </span><span class="line" data-startTime="60">JAM, and we have </span><span class="line" data-startTime="60">[? to sample ?] </span><span class="line" data-startTime="61">more than 1,000 songs </span><span class="line" data-startTime="61">from instruments. </span> <span class="line" data-startTime="65">And as you can imagine, the </span><span class="line" data-startTime="65">project had its fair share of </span><span class="line" data-startTime="68">complexity and challenges. </span> <span class="line" data-startTime="71">So we're going to start to demo </span><span class="line" data-startTime="71">the website so you know </span><span class="line" data-startTime="74">what we're talking about, and </span><span class="line" data-startTime="74">then we will talk about the </span><span class="line" data-startTime="76">main challenges we faced </span><span class="line" data-startTime="76">when we built it. </span> <span class="line" data-startTime="84">So this is JAM with Chrome. </span> <span class="line" data-startTime="85">I enter the website. </span> <span class="line" data-startTime="90">[MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="94"><span class="speakerName">Xavier Barrade</span>: So as </span><span class="line" data-startTime="94">I enter [INAUDIBLE] </span><span class="line" data-startTime="96">19 different instruments. </span> <span class="line" data-startTime="97">You have drums, you have </span><span class="line" data-startTime="97">drum machines. </span> <span class="line" data-startTime="106">Different kind of keyboards. </span> <span class="line" data-startTime="115">Bass guitars. </span> <span class="line" data-startTime="121">And of course, electric </span><span class="line" data-startTime="121">guitars. </span> <span class="line" data-startTime="126">I'm going to start </span><span class="line" data-startTime="126">with the drums. </span> <span class="line" data-startTime="137">So a JAM room was just created </span><span class="line" data-startTime="137">right now, and now I'm in it. </span> <span class="line" data-startTime="141">And as you can see, </span><span class="line" data-startTime="141">the drum is here. </span> <span class="line" data-startTime="143">I can make noise. </span> <span class="line" data-startTime="144">I can stop and play music </span><span class="line" data-startTime="144">really quickly. </span> <span class="line" data-startTime="155">So, of course, it wouldn't be </span><span class="line" data-startTime="155">a jam if I'm alone, so I'm </span><span class="line" data-startTime="158">going to invite a friend. </span> <span class="line" data-startTime="160">So I'm going to invite Oskar. </span> <span class="line" data-startTime="163">So there's a shortcut that </span><span class="line" data-startTime="163">you can send by instant </span><span class="line" data-startTime="167">messaging to anyone. </span> <span class="line" data-startTime="173">So Oskar just entered the </span><span class="line" data-startTime="173">shortcut on his computer, and </span><span class="line" data-startTime="176">as we see, we can already see </span><span class="line" data-startTime="176">that he's going to come. </span></p>

<p class="speaker"><span class="line" data-starttime="183"><span class="speakerName">Oskar Eriksson</span>: So I'm going to </span><span class="line" data-startTime="183">play some guitar, because </span><span class="line" data-startTime="188">I'm cooler than you. </span></p>

<p class="speaker"><span class="line" data-starttime="189"><span class="speakerName">Xavier Barrade</span>: I like drums. </span><span class="line" data-startTime="190">So Oskar is here. </span><span class="line" data-startTime="191">I'm the drummer, he's the </span><span class="line" data-startTime="191">guitarist, and we're going to </span><span class="line" data-startTime="193">give you a little demo. </span><span class="line" data-startTime="196">[ROCK AND ROLL MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="228"><span class="speakerName">Xavier Barrade</span>: Thank you. </span><span class="line" data-startTime="228">So because there's 19 different </span><span class="line" data-startTime="228">instruments, you </span><span class="line" data-startTime="230">cannot only play rock and roll, </span><span class="line" data-startTime="230">but you can play lots of </span><span class="line" data-startTime="233">different kinds of music. </span><span class="line" data-startTime="234">So for example, let's play </span><span class="line" data-startTime="234">some tasty techno music. </span><span class="line" data-startTime="238">So I'm taking a keyboard. </span><span class="line" data-startTime="241">Oskar is going to get </span><span class="line" data-startTime="241">a drum machine. </span><span class="line" data-startTime="245">Here we go. </span><span class="line" data-startTime="246">[TECHNO MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="272"><span class="speakerName">Xavier Barrade</span>: So this is </span><span class="line" data-startTime="272">basically what JAM is. </span> <span class="line" data-startTime="274">So this was the easy mode where </span><span class="line" data-startTime="274">you play with patterns, </span><span class="line" data-startTime="276">and there's also play mode &mdash; </span><span class="line" data-startTime="278">Pro Mode where you can </span><span class="line" data-startTime="278">play note by note. </span> <span class="line" data-startTime="281">So as you can imagine, we had </span><span class="line" data-startTime="281">lots of challenging building </span><span class="line" data-startTime="283">this project. </span> <span class="line" data-startTime="284">So today, we're going to talk </span><span class="line" data-startTime="284">about the two main we faced. </span> <span class="line" data-startTime="287">So first, let's go to Backstage, </span><span class="line" data-startTime="287">which is auto </span><span class="line" data-startTime="290">creator of virtual JAM room. </span> <span class="line" data-startTime="292">[INAUDIBLE] </span><span class="line" data-startTime="293">it is possible and you allow </span><span class="line" data-startTime="293">people to join it. </span> <span class="line" data-startTime="297">And then there's the music, </span><span class="line" data-startTime="297">which is, how do you create a </span><span class="line" data-startTime="300">music tool with 19 different </span><span class="line" data-startTime="300">instruments. </span> <span class="line" data-startTime="303">All the instrument a </span><span class="line" data-startTime="303">full set of tones. </span></p>

<p><span class="line" data-startTime="305">They have different effects </span><span class="line" data-startTime="305">just using web technology. </span> <span class="line" data-startTime="311">So first, we serve </span><span class="line" data-startTime="311">the application. </span> <span class="line" data-startTime="313">So as you can see here, the </span><span class="line" data-startTime="313">client is going to request </span><span class="line" data-startTime="317">files from app engine, so he's </span><span class="line" data-startTime="317">going to get to the CSS or </span><span class="line" data-startTime="320">HTML and the Javascript. </span> <span class="line" data-startTime="323">And notice the device which are </span><span class="line" data-startTime="323">called from the HTML are </span><span class="line" data-startTime="327">served from cloud storage. </span> <span class="line" data-startTime="329">And then each client creates or </span><span class="line" data-startTime="329">joins a jam session, which </span><span class="line" data-startTime="332">is hosted on a Websocket </span><span class="line" data-startTime="332">server. </span> <span class="line" data-startTime="336">And this Websocket server in </span><span class="line" data-startTime="336">different data centers across </span><span class="line" data-startTime="340">the world to optimize </span><span class="line" data-startTime="340">the latency. </span> <span class="line" data-startTime="344">The App Engine needs to know </span><span class="line" data-startTime="344">what all these Websocket </span><span class="line" data-startTime="347">servers are up to, so what </span><span class="line" data-startTime="347">happens is, every five seconds </span><span class="line" data-startTime="351">every Websocket server is going </span><span class="line" data-startTime="351">to set an outbeat to App </span><span class="line" data-startTime="353">Engine, and this outbeat </span><span class="line" data-startTime="353">contains the IP address, the </span><span class="line" data-startTime="357">zone, the CP load, the </span><span class="line" data-startTime="357">number of game and </span><span class="line" data-startTime="360">the number of clients. </span></p>

<p><span class="line" data-startTime="363">And then, the client is going to </span><span class="line" data-startTime="363">request this listed server </span><span class="line" data-startTime="366">to App Engine. </span> <span class="line" data-startTime="367">So App Engine gives them the </span><span class="line" data-startTime="367">free lowest latency server </span><span class="line" data-startTime="370">from each zone. </span> <span class="line" data-startTime="373">Then the client is going to </span><span class="line" data-startTime="373">ping the servers, so he's </span><span class="line" data-startTime="375">going to ping them five times </span><span class="line" data-startTime="375">each and he's going to select </span><span class="line" data-startTime="378">the one with the best </span><span class="line" data-startTime="378">performance, so which is the </span><span class="line" data-startTime="381">lowest ping and the least </span><span class="line" data-startTime="381">amount of packets lost. </span> <span class="line" data-startTime="385">And when the client selected a </span><span class="line" data-startTime="385">server, informed App Engine of </span><span class="line" data-startTime="388">the selection, the jam </span><span class="line" data-startTime="388">session is created. </span></p>

<p><span class="line" data-startTime="391">And the client gets a shortcut </span><span class="line" data-startTime="391">URL which he an share to </span><span class="line" data-startTime="394">invite people to his session. </span> <span class="line" data-startTime="397">And now, I'm going to let Oskar </span><span class="line" data-startTime="397">talk to you about other </span><span class="line" data-startTime="399">client things. </span></p>

<p class="speaker"><span class="line" data-starttime="402"><span class="speakerName">Oskar Eriksson</span>: So as any decent </span><span class="line" data-startTime="402">musician will tell you, </span><span class="line" data-startTime="406">one of the most important things </span><span class="line" data-startTime="406">when playing together </span><span class="line" data-startTime="409">is to play in sync for the </span><span class="line" data-startTime="409">music not to stink. </span> <span class="line" data-startTime="413">So this is one of the biggest </span><span class="line" data-startTime="413">challenges we had in JAM. </span> <span class="line" data-startTime="417">How do we enable people at </span><span class="line" data-startTime="417">totally different locations </span><span class="line" data-startTime="420">across the globe to play </span><span class="line" data-startTime="420">together and hear the same </span><span class="line" data-startTime="423">thing at the same time? </span><span class="line" data-startTime="427">Excuse me. </span> <span class="line" data-startTime="430">And an audio system will always </span><span class="line" data-startTime="430">have a certain amount </span><span class="line" data-startTime="433">of latency, and that is the time </span><span class="line" data-startTime="433">from when you press a key </span><span class="line" data-startTime="438">until you actually </span><span class="line" data-startTime="438">hear the notes. </span> <span class="line" data-startTime="440">And we really especially have </span><span class="line" data-startTime="440">a lot of latency when the </span><span class="line" data-startTime="444">audio system is distributed </span><span class="line" data-startTime="444">across </span><span class="line" data-startTime="446">continents like in chat. </span></p>

<p><span class="line" data-startTime="448">So we did some experimentation </span><span class="line" data-startTime="448">and we came up with some </span><span class="line" data-startTime="452">numbers, and we say that in the </span><span class="line" data-startTime="452">Pro Mode, we can have up </span><span class="line" data-startTime="457">to 100 milliseconds of latency, </span><span class="line" data-startTime="457">and in the easy mode, </span><span class="line" data-startTime="461">you can accept upwards of 600 </span><span class="line" data-startTime="461">milliseconds of latency before </span><span class="line" data-startTime="465">you start feeling like you're </span><span class="line" data-startTime="465">losing control. </span> <span class="line" data-startTime="468">And these are actually rather </span><span class="line" data-startTime="468">high numbers when talking </span><span class="line" data-startTime="471">about audio, but the </span><span class="line" data-startTime="471">mind adapts and </span><span class="line" data-startTime="474">compensates rather quickly. </span> <span class="line" data-startTime="476">And also, these numbers aren't </span><span class="line" data-startTime="476">impossible to achieve with </span><span class="line" data-startTime="479">Websockets. </span> <span class="line" data-startTime="480">So what we had to do was just to </span><span class="line" data-startTime="480">make sure that the clients </span><span class="line" data-startTime="482">are in perfect sync once </span><span class="line" data-startTime="482">they start playing. </span> <span class="line" data-startTime="485">So how did we do that? </span><span class="line" data-startTime="488">The first thing you need to </span><span class="line" data-startTime="488">know is, no, we don't swim </span><span class="line" data-startTime="492">actual order files across </span><span class="line" data-startTime="492">the network. </span> <span class="line" data-startTime="494">We send events that </span><span class="line" data-startTime="494">trigger play back </span><span class="line" data-startTime="496">on the local clients. </span> <span class="line" data-startTime="498">And most of these events needs </span><span class="line" data-startTime="498">to be handled at the exact </span><span class="line" data-startTime="501">same time at all times </span><span class="line" data-startTime="501">for the players to </span><span class="line" data-startTime="503">hear the same thing. </span></p>

<p><span class="line" data-startTime="505">And for this to happen, </span><span class="line" data-startTime="505">we need to have </span><span class="line" data-startTime="507">a common time reference. </span> <span class="line" data-startTime="511">So to establish this common time </span><span class="line" data-startTime="511">reference, we developed </span><span class="line" data-startTime="514">the sync algorithm that we run </span><span class="line" data-startTime="514">each time a player leaves or </span><span class="line" data-startTime="517">joins the jam session. </span> <span class="line" data-startTime="520">And each client has a local </span><span class="line" data-startTime="520">time, but we need a common </span><span class="line" data-startTime="522">time that these local times </span><span class="line" data-startTime="522">can be related to. </span> <span class="line" data-startTime="526">So when we say play at this </span><span class="line" data-startTime="526">time, everyone knows which </span><span class="line" data-startTime="529">time we mean. </span> <span class="line" data-startTime="531">And before I move on, thinking </span><span class="line" data-startTime="531">about time can be very </span><span class="line" data-startTime="535">confusing, but this will be </span><span class="line" data-startTime="535">recorded and available </span><span class="line" data-startTime="537">afterwards. </span> <span class="line" data-startTime="538">So don't sweat it if and </span><span class="line" data-startTime="538">when you get lost. </span> <span class="line" data-startTime="542">So to sync the clients, we start </span><span class="line" data-startTime="542">off by making 10 sets of </span><span class="line" data-startTime="546">pings to the WebSocket </span><span class="line" data-startTime="546">server, like so. </span> <span class="line" data-startTime="550">First, the client sends a </span><span class="line" data-startTime="550">message with its own local </span><span class="line" data-startTime="553">time, and the server receives </span><span class="line" data-startTime="553">this and sends back the </span><span class="line" data-startTime="558">received time as well as the </span><span class="line" data-startTime="558">local time on the server. </span></p>

<p><span class="line" data-startTime="565">And for each time we </span><span class="line" data-startTime="565">do this, the client </span><span class="line" data-startTime="568">calculates two values. </span> <span class="line" data-startTime="570">The time it took for the message </span><span class="line" data-startTime="570">to go back and forth, </span><span class="line" data-startTime="572">which is the travel time. </span> <span class="line" data-startTime="575">And the difference between the </span><span class="line" data-startTime="575">local time and time on the </span><span class="line" data-startTime="578">server, which is the </span><span class="line" data-startTime="578">time offset. </span> <span class="line" data-startTime="581">And when we have done this 10 </span><span class="line" data-startTime="581">times, we calculate the mean </span><span class="line" data-startTime="584">value for the travel times, </span><span class="line" data-startTime="584">which is this client's </span><span class="line" data-startTime="587">latency, and send that </span><span class="line" data-startTime="587">value to the server. </span> <span class="line" data-startTime="592">We then calculate the mean value </span><span class="line" data-startTime="592">for the time offsets, </span><span class="line" data-startTime="595">which is the difference between </span><span class="line" data-startTime="595">the local time and the </span><span class="line" data-startTime="597">server time. </span> <span class="line" data-startTime="599">And when all the clients have </span><span class="line" data-startTime="599">done this and sent their </span><span class="line" data-startTime="601">latency to the server, the </span><span class="line" data-startTime="601">server sends out the highest </span><span class="line" data-startTime="605">latency reported for all </span><span class="line" data-startTime="605">the clients to use. </span> <span class="line" data-startTime="608">And this means that all clients </span><span class="line" data-startTime="608">should be able to </span><span class="line" data-startTime="611">handle events at the exact same </span><span class="line" data-startTime="611">time since they have the </span><span class="line" data-startTime="614">same latency as the client with </span><span class="line" data-startTime="614">the poorest connection, </span><span class="line" data-startTime="618">and they all know the time of </span><span class="line" data-startTime="618">their own local time in </span><span class="line" data-startTime="622">relation to the server time. </span></p>

<p><span class="line" data-startTime="625">So now that we have a common </span><span class="line" data-startTime="625">time reference, we can start </span><span class="line" data-startTime="628">sending messages </span><span class="line" data-startTime="628">back and forth. </span> <span class="line" data-startTime="630">And so let's see how we </span><span class="line" data-startTime="630">calculate these times. </span> <span class="line" data-startTime="635">So when an event is to be </span><span class="line" data-startTime="635">broadcasted over the network, </span><span class="line" data-startTime="639">we calculate a local event time, </span><span class="line" data-startTime="639">it should happen now, </span><span class="line" data-startTime="643">and then we add the server </span><span class="line" data-startTime="643">offset to that time, and then </span><span class="line" data-startTime="646">we have the event time expressed </span><span class="line" data-startTime="646">in server time. </span> <span class="line" data-startTime="649">And the server doesn't really </span><span class="line" data-startTime="649">care what an event &mdash; what it's </span><span class="line" data-startTime="652">all about, it just broadcasts </span><span class="line" data-startTime="652">it to all </span><span class="line" data-startTime="654">the connected clients. </span> <span class="line" data-startTime="656">And then, when it's received </span><span class="line" data-startTime="656">on another client, that </span><span class="line" data-startTime="659">client's server offset is </span><span class="line" data-startTime="659">subtracted and they have the </span><span class="line" data-startTime="662">event time expressed in that </span><span class="line" data-startTime="662">client's local time. </span></p>

<p><span class="line" data-startTime="665">And that's where the </span><span class="line" data-startTime="665">magic happen. </span> <span class="line" data-startTime="669">On the client from which the </span><span class="line" data-startTime="669">event originates, the event is </span><span class="line" data-startTime="672">scheduled locally using the same </span><span class="line" data-startTime="672">calculations, but without </span><span class="line" data-startTime="676">sending the event over the </span><span class="line" data-startTime="676">network, which makes sure that </span><span class="line" data-startTime="679">the time will always be </span><span class="line" data-startTime="679">consistent for what the player </span><span class="line" data-startTime="682">does herself, even if </span><span class="line" data-startTime="682">the network acts up. </span> <span class="line" data-startTime="686">And if the player is alone in a </span><span class="line" data-startTime="686">jam session, the application </span><span class="line" data-startTime="690">goes into a solo mode where no </span><span class="line" data-startTime="690">events are sent across the </span><span class="line" data-startTime="693">network and the latency is set </span><span class="line" data-startTime="693">as low as possible, which </span><span class="line" data-startTime="697">enables the users to play the </span><span class="line" data-startTime="698">instruments with great precision. </span></p>

<p class="speaker"><span class="line" data-starttime="703"><span class="speakerName">Xavier Barrade</span>: So one of the </span><span class="line" data-startTime="703">things that was important for </span><span class="line" data-startTime="705">us when we worked on JAM was </span><span class="line" data-startTime="705">that anybody could come and </span><span class="line" data-startTime="708">play instantly, and we also </span><span class="line" data-startTime="708">wanted a real musician, who </span><span class="line" data-startTime="712">can play real music, to be </span><span class="line" data-startTime="712">able to do it on JAM. </span><span class="line" data-startTime="716">So I'm going to demo easy mode </span><span class="line" data-startTime="716">quickly, and then Oskar is </span><span class="line" data-startTime="721">going to explain to you </span><span class="line" data-startTime="721">how we made it. </span><span class="line" data-startTime="724">So this is easy mode </span><span class="line" data-startTime="724">work with patterns. </span><span class="line" data-startTime="726">Imagine the tracks and each time </span><span class="line" data-startTime="726">you click on a different </span><span class="line" data-startTime="730">part of the drum, it's going </span><span class="line" data-startTime="730">from one track to another. </span><span class="line" data-startTime="733">So for example &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="749"><span class="speakerName">Oskar Eriksson</span>: So what you </span><span class="line" data-startTime="749">just heard is not a </span><span class="line" data-startTime="751">prerecorded piece, it's </span><span class="line" data-startTime="751">a sampler playing the </span><span class="line" data-startTime="754">notes in real time. </span> <span class="line" data-startTime="756">And I'll talk about the sampler </span><span class="line" data-startTime="756">in a bit, but first, </span><span class="line" data-startTime="759">let's talk about </span><span class="line" data-startTime="759">these patterns. </span> <span class="line" data-startTime="762">So the concept of a pattern </span><span class="line" data-startTime="762">is really simple. </span> <span class="line" data-startTime="765">It's just a collection of </span><span class="line" data-startTime="765">events that contain </span><span class="line" data-startTime="768">information about what note </span><span class="line" data-startTime="768">should we play that together </span><span class="line" data-startTime="771">make up a piece of music. </span> <span class="line" data-startTime="773">And we used MIDI as the format </span><span class="line" data-startTime="773">for expressing what these </span><span class="line" data-startTime="777">patterns should sound like. </span> <span class="line" data-startTime="779">And by parsing these MIDI files, </span><span class="line" data-startTime="779">the application got a </span><span class="line" data-startTime="781">collection of events, the </span><span class="line" data-startTime="781">information about what notes </span><span class="line" data-startTime="784">should be played and when, and </span><span class="line" data-startTime="784">any other meet data needed to </span><span class="line" data-startTime="788">make the sampler play </span><span class="line" data-startTime="788">the notes properly. </span> <span class="line" data-startTime="791">So we start by downloading these </span><span class="line" data-startTime="791">MIDI files to the client </span><span class="line" data-startTime="794">and parse them there, and </span><span class="line" data-startTime="794">keeping the patterns as MIDI </span><span class="line" data-startTime="799">gives us an easy workflow since </span><span class="line" data-startTime="799">our music editors can </span><span class="line" data-startTime="802">use the tools that they </span><span class="line" data-startTime="802">are already used to. </span></p>

<p><span class="line" data-startTime="804">And also MIDI is a lightweight </span><span class="line" data-startTime="804">format when compared to </span><span class="line" data-startTime="809">keeping the patterns as </span><span class="line" data-startTime="809">JSON for example. </span> <span class="line" data-startTime="812">So when we have parsed these </span><span class="line" data-startTime="812">patterns and we're ready to </span><span class="line" data-startTime="815">start playing, we thought a </span><span class="line" data-startTime="815">pattern engine that loops, </span><span class="line" data-startTime="818">much like a game engine loops, </span><span class="line" data-startTime="818">if that's more familiar to </span><span class="line" data-startTime="821">you, and then the engine looks </span><span class="line" data-startTime="821">ahead into a point in the </span><span class="line" data-startTime="825">future, maybe 30 milliseconds </span><span class="line" data-startTime="825">or so, for events in the </span><span class="line" data-startTime="829">pattern that we're playing that </span><span class="line" data-startTime="829">will happen between now </span><span class="line" data-startTime="832">and that point in the future. </span> <span class="line" data-startTime="834">And if there are any such </span><span class="line" data-startTime="834">events, we send those to the </span><span class="line" data-startTime="837">sampler that are playing </span><span class="line" data-startTime="837">the pattern. </span></p>

<p><span class="line" data-startTime="840">Now, we don't send all the </span><span class="line" data-startTime="840">events that come from the </span><span class="line" data-startTime="843">pattern over the network. </span> <span class="line" data-startTime="846">We'd rather just send events </span><span class="line" data-startTime="846">that start playback on all the </span><span class="line" data-startTime="850">clients at the same </span><span class="line" data-startTime="850">time instead. </span> <span class="line" data-startTime="852">And when a player, for example, </span><span class="line" data-startTime="852">changes the stream on </span><span class="line" data-startTime="855">the guitar, an event for that </span><span class="line" data-startTime="855">interaction is sent to all the </span><span class="line" data-startTime="860">connected clients, and we have </span><span class="line" data-startTime="860">a logic unit that calculates </span><span class="line" data-startTime="863">which pattern we should switch </span><span class="line" data-startTime="863">to based on what sting and </span><span class="line" data-startTime="867">where on that string interaction </span><span class="line" data-startTime="867">happened. </span> <span class="line" data-startTime="871">So our pattern engine allows </span><span class="line" data-startTime="871">us to find where we want to </span><span class="line" data-startTime="874">add the new pattern, be it the </span><span class="line" data-startTime="874">next bar, next beat, or as in </span><span class="line" data-startTime="879">JAM, as soon as possible. </span> <span class="line" data-startTime="881">And if you think of the pattern </span><span class="line" data-startTime="881">engine as a musician, </span><span class="line" data-startTime="884">and the logic engine as the </span><span class="line" data-startTime="884">conductor, one can imagine the </span><span class="line" data-startTime="888">logic engine replacing the sheet </span><span class="line" data-startTime="888">music for the pattern </span><span class="line" data-startTime="890">engine from the old pattern to </span><span class="line" data-startTime="890">the new one and the pattern </span><span class="line" data-startTime="893">engine is no more </span><span class="line" data-startTime="893">wiser for it. </span></p>

<p><span class="line" data-startTime="896">So when the pattern engine then </span><span class="line" data-startTime="896">looks into the future for </span><span class="line" data-startTime="899">upcoming events, it sees events </span><span class="line" data-startTime="899">from the new pattern, </span><span class="line" data-startTime="902">and we get the seamless </span><span class="line" data-startTime="902">transition </span><span class="line" data-startTime="904">between those patterns. </span></p>

<p class="speaker"><span class="line" data-starttime="908"><span class="speakerName">Xavier Barrade</span>: So as I said, </span><span class="line" data-startTime="908">we wanted a good musician to </span><span class="line" data-startTime="911">be able to play what they wanted </span><span class="line" data-startTime="911">so this was a really </span><span class="line" data-startTime="913">challenging part of the tour </span><span class="line" data-startTime="913">because I need to demo the Pro </span><span class="line" data-startTime="916">Mode to you. </span><span class="line" data-startTime="917">So it's basically, like on </span><span class="line" data-startTime="917">almost every music software, </span><span class="line" data-startTime="922">one key I get a one note, so I'm </span><span class="line" data-startTime="922">going to play you a little </span><span class="line" data-startTime="925">non-copyrighted piece </span><span class="line" data-startTime="925">of music. </span><span class="line" data-startTime="926">It may be really bad. </span></p>

<p class="speaker"><span class="line" data-starttime="939"><span class="speakerName">Oskar Eriksson</span>: So as you heard </span><span class="line" data-startTime="939">Pro Mode takes more </span><span class="line" data-startTime="941">skill from the user, but it's </span><span class="line" data-startTime="941">much easier for the developer. </span> <span class="line" data-startTime="947">So instead of having a logic </span><span class="line" data-startTime="947">unit and a pattern engine, we </span><span class="line" data-startTime="951">simply create the same kind </span><span class="line" data-startTime="951">of events based on user </span><span class="line" data-startTime="954">interaction with the </span><span class="line" data-startTime="954">UI instead . </span> <span class="line" data-startTime="957">And unlike the events that come </span><span class="line" data-startTime="957">from the patterns, these </span><span class="line" data-startTime="961">interaction events are all </span><span class="line" data-startTime="961">sent one by one over the </span><span class="line" data-startTime="963">network, but still scheduled </span><span class="line" data-startTime="963">locally from the client from </span><span class="line" data-startTime="966">which it came. </span> <span class="line" data-startTime="968">So let's talk about </span><span class="line" data-startTime="968">the sampler. </span> <span class="line" data-startTime="972">A sampler is an instrument </span><span class="line" data-startTime="972">that plays </span><span class="line" data-startTime="975">prerecorded audio files. </span> <span class="line" data-startTime="977">And in its most simple form, we </span><span class="line" data-startTime="977">assign one sample per key </span><span class="line" data-startTime="981">on a keyboard. </span> <span class="line" data-startTime="984">In JAM, we took this concept one </span><span class="line" data-startTime="984">step further, and used the </span><span class="line" data-startTime="989">playback rates property of the </span><span class="line" data-startTime="989">audio source nodes to pitch </span><span class="line" data-startTime="992">the samples, and this allows </span><span class="line" data-startTime="992">us to use fewer samples to </span><span class="line" data-startTime="996">cover bigger frequency ranges. </span></p>

<p><span class="line" data-startTime="1000">And this cuts the number of </span><span class="line" data-startTime="1000">samples we have to use by a </span><span class="line" data-startTime="1003">lot and also the rate of the </span><span class="line" data-startTime="1003">application obviously. </span> <span class="line" data-startTime="1009">And the events for starting </span><span class="line" data-startTime="1009">notes that we've been sending </span><span class="line" data-startTime="1011">back and forth over the network </span><span class="line" data-startTime="1011">and generated by a </span><span class="line" data-startTime="1014">pattern, so user interaction, </span><span class="line" data-startTime="1014">all end up at the </span><span class="line" data-startTime="1017">sampler in the end. </span> <span class="line" data-startTime="1018">And these events contain a start </span><span class="line" data-startTime="1018">time, a stop time, a </span><span class="line" data-startTime="1023">velocity, and what </span><span class="line" data-startTime="1023">note to play. </span> <span class="line" data-startTime="1026">And when we get one of these </span><span class="line" data-startTime="1026">events, the sampler checks </span><span class="line" data-startTime="1029">which sample relates to this </span><span class="line" data-startTime="1029">note that we're going to play. </span> <span class="line" data-startTime="1032">So in this case, we're looking </span><span class="line" data-startTime="1032">for an F note, and we can see </span><span class="line" data-startTime="1035">that sample S3 is the </span><span class="line" data-startTime="1035">one we should play. </span></p>

<p><span class="line" data-startTime="1039">We can then start it with the </span><span class="line" data-startTime="1039">proper playback rate setting </span><span class="line" data-startTime="1042">at the given start time. </span> <span class="line" data-startTime="1044">And this method of feeding the </span><span class="line" data-startTime="1044">sampler events gives us a neat </span><span class="line" data-startTime="1048">separation of code and </span><span class="line" data-startTime="1048">instant reusability. </span> <span class="line" data-startTime="1052">The sampler just smiles and </span><span class="line" data-startTime="1052">plays whatever it's told, just </span><span class="line" data-startTime="1056">like a drummer. </span> <span class="line" data-startTime="1060">So, of course, we didn't </span><span class="line" data-startTime="1060">stop there in JAM. </span> <span class="line" data-startTime="1063">Since we get a velocity property </span><span class="line" data-startTime="1063">with our events, we </span><span class="line" data-startTime="1066">can add another layer of realism </span><span class="line" data-startTime="1066">by having multiple </span><span class="line" data-startTime="1070">variations of the same sample. </span> <span class="line" data-startTime="1073">So here we have three different </span><span class="line" data-startTime="1073">velocity levels of </span><span class="line" data-startTime="1076">samples stacked on each other, </span><span class="line" data-startTime="1076">which means that when we </span><span class="line" data-startTime="1079">recorded these instruments, we </span><span class="line" data-startTime="1079">had to make three samples for </span><span class="line" data-startTime="1082">each note at different </span><span class="line" data-startTime="1082">velocities. </span></p>

<p><span class="line" data-startTime="1086">So if you get a note with a low </span><span class="line" data-startTime="1086">velocity, we choose a soft </span><span class="line" data-startTime="1089">sample, and a higher velocity, </span><span class="line" data-startTime="1089">we choose the harder sample. </span> <span class="line" data-startTime="1093">And to illustrate, we're going </span><span class="line" data-startTime="1093">to play you a piano, and what </span><span class="line" data-startTime="1098">you're going to hear is first, a </span><span class="line" data-startTime="1098">low velocity note and then a </span><span class="line" data-startTime="1102">high velocity note. </span> <span class="line" data-startTime="1105">As soon as Xavier finds </span><span class="line" data-startTime="1105">the right file. </span> <span class="line" data-startTime="1119">Here we go. </span></p>

<p class="speaker"><span class="line" data-starttime="1120"><span class="speakerName">Xavier Barrade</span>: The piano </span><span class="line" data-startTime="1120">sounds like this. </span><span class="line" data-startTime="1125">[PIANO MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="1128"><span class="speakerName">Oskar Eriksson</span>: So let's </span><span class="line" data-startTime="1128">play that again. </span><span class="line" data-startTime="1129">First, the soft sample </span><span class="line" data-startTime="1129">then a hard sample. </span><span class="line" data-startTime="1131">[PIANO MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="1137"><span class="speakerName">Oskar Eriksson</span>: So to give you </span><span class="line" data-startTime="1137">another example of the level </span><span class="line" data-startTime="1140">of detail that went </span><span class="line" data-startTime="1140">into the project. </span><span class="line" data-startTime="1142">Let's have a look at playing </span><span class="line" data-startTime="1142">the guitar in Pro Mode. </span><span class="line" data-startTime="1145">So if you first play one note </span><span class="line" data-startTime="1145">on one string, and then play </span><span class="line" data-startTime="1149">another note on the same string </span><span class="line" data-startTime="1149">while still keeping the </span><span class="line" data-startTime="1152">first key pressed down, you get </span><span class="line" data-startTime="1152">another variation of the </span><span class="line" data-startTime="1156">sample called a puller note if </span><span class="line" data-startTime="1156">there are any guitarists here, </span><span class="line" data-startTime="1159">and it sounds like this. </span><span class="line" data-startTime="1161">[GUITAR NOTES PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="1165"><span class="speakerName">Oskar Eriksson</span>: So what you </span><span class="line" data-startTime="1165">first heard are two notes </span><span class="line" data-startTime="1167">played normally, and then, on </span><span class="line" data-startTime="1167">the second round, it's one </span><span class="line" data-startTime="1170">note played normally and </span><span class="line" data-startTime="1170">then a puller note. </span><span class="line" data-startTime="1173">[GUITAR NOTES PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="1177"><span class="speakerName">Oskar Eriksson</span>: And these are </span><span class="line" data-startTime="1177">the kind of nuances that are </span><span class="line" data-startTime="1180">really important to create </span><span class="line" data-startTime="1180">realistic instruments, but </span><span class="line" data-startTime="1183">it's also the kind of details </span><span class="line" data-startTime="1183">that eats up all of your </span><span class="line" data-startTime="1186">developing time if you're </span><span class="line" data-startTime="1186">not careful. </span><span class="line" data-startTime="1188">Take it from me. </span><span class="line" data-startTime="1189">And so on top of this, each </span><span class="line" data-startTime="1189">instrument has two sets of </span><span class="line" data-startTime="1193">effects that are generated with </span><span class="line" data-startTime="1193">Web Audio in real time, . </span><span class="line" data-startTime="1198">And Xavier is going to give </span><span class="line" data-startTime="1198">you a demo of that. </span></p>

<p class="speaker"><span class="line" data-starttime="1200"><span class="speakerName">Xavier Barrade</span>: Yeah, so the </span><span class="line" data-startTime="1200">effect is one of the coolest </span><span class="line" data-startTime="1203">parts in JAM, especially if you </span><span class="line" data-startTime="1203">consider that it was done </span><span class="line" data-startTime="1205">entirely using Web Audio. </span><span class="line" data-startTime="1207">So to demonstrate, I'm going to </span><span class="line" data-startTime="1207">pick the best instrument of </span><span class="line" data-startTime="1211">the website, which is </span><span class="line" data-startTime="1211">the metallic guitar. </span><span class="line" data-startTime="1216">So if you play a metal guitar </span><span class="line" data-startTime="1216">without any effect, it doesn't </span><span class="line" data-startTime="1220">sound very rock and roll. </span><span class="line" data-startTime="1222">[GUITAR PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="1229"><span class="speakerName">Xavier Barrade</span>: But you can </span><span class="line" data-startTime="1229">see that I use a slight </span><span class="line" data-startTime="1231">[INAUDIBLE] of distortion </span><span class="line" data-startTime="1231">up to the max, and now. </span><span class="line" data-startTime="1235">[GUITAR PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="1244"><span class="speakerName">Xavier Barrade</span>: And if I want a </span><span class="line" data-startTime="1244">pretty good spacey feeling, </span><span class="line" data-startTime="1246">I can just put the flanger up. </span><span class="line" data-startTime="1252">[GUITAR PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="1262"><span class="speakerName">Oskar Eriksson</span>: So first, let's </span><span class="line" data-startTime="1262">talk a bit basic about </span><span class="line" data-startTime="1267">what it is. </span> <span class="line" data-startTime="1268">So to explain Web Audio for </span><span class="line" data-startTime="1268">someone who's never used it, I </span><span class="line" data-startTime="1271">think that the concept of an </span><span class="line" data-startTime="1271">assembly line often brings the </span><span class="line" data-startTime="1275">bird into nest. </span> <span class="line" data-startTime="1276">So you have an assembly line </span><span class="line" data-startTime="1276">with agents that produce and </span><span class="line" data-startTime="1279">refine a product, and </span><span class="line" data-startTime="1279">in Web Audio, these </span><span class="line" data-startTime="1283">agents are called nodes. </span> <span class="line" data-startTime="1285">And there are nodes for </span><span class="line" data-startTime="1285">generating the raw material, </span><span class="line" data-startTime="1288">or audio that is, and nodes </span><span class="line" data-startTime="1288">for modifying the audio. </span> <span class="line" data-startTime="1299">And this is just like </span><span class="line" data-startTime="1299">the keynote. </span> <span class="line" data-startTime="1307">Sorry. </span></p>

<p><span class="line" data-startTime="1309">And so there are quite a </span><span class="line" data-startTime="1309">manageable number of these </span><span class="line" data-startTime="1313">nodes natively in Web Audio, </span><span class="line" data-startTime="1313">but for more advanced audio </span><span class="line" data-startTime="1317">applications, you might want </span><span class="line" data-startTime="1317">to create your own. </span> <span class="line" data-startTime="1321">And to enable us to do this in </span><span class="line" data-startTime="1321">JAM, we created this model </span><span class="line" data-startTime="1324">that we used, which allows us to </span><span class="line" data-startTime="1324">use our custom nodes, much </span><span class="line" data-startTime="1328">like the native nodes. </span> <span class="line" data-startTime="1335">So we have an input and an </span><span class="line" data-startTime="1335">output property, and we have a </span><span class="line" data-startTime="1338">connect and disconnect method. </span> <span class="line" data-startTime="1340">And that's it. </span> <span class="line" data-startTime="1342">So to use it, we do exactly the </span><span class="line" data-startTime="1342">same as we do with normal </span><span class="line" data-startTime="1346">nodes , with the exception that </span><span class="line" data-startTime="1346">we need to connect to the </span><span class="line" data-startTime="1349">custom nodes input properly </span><span class="line" data-startTime="1349">instead of the node itself. </span> <span class="line" data-startTime="1355">And the conception model </span><span class="line" data-startTime="1355">is really easy and </span><span class="line" data-startTime="1358">it looks like this. </span> <span class="line" data-startTime="1361">So here we have a gain node </span><span class="line" data-startTime="1361">and another gain node, and </span><span class="line" data-startTime="1364">then the custom node </span><span class="line" data-startTime="1364">in the middle. </span> <span class="line" data-startTime="1367">So using this model, we can </span><span class="line" data-startTime="1367">create our samplers or maybe, </span><span class="line" data-startTime="1372">our own audio effects. </span></p>

<p><span class="line" data-startTime="1373">So let's create a </span><span class="line" data-startTime="1373">delay effect. </span> <span class="line" data-startTime="1377">So the structure is really </span><span class="line" data-startTime="1377">similar to the basic model. </span> <span class="line" data-startTime="1380">We have just added a delay </span><span class="line" data-startTime="1380">node, and a wet level and </span><span class="line" data-startTime="1384">feedback at gain nodes. </span> <span class="line" data-startTime="1387">So the delay node delays the </span><span class="line" data-startTime="1387">signal and sends it to the wet </span><span class="line" data-startTime="1391">level gain node and the </span><span class="line" data-startTime="1391">feedback gain node. </span> <span class="line" data-startTime="1395">And the feedback sends back a </span><span class="line" data-startTime="1395">diminished version of the </span><span class="line" data-startTime="1398">signal to the delay node, which </span><span class="line" data-startTime="1398">then delays it again, </span><span class="line" data-startTime="1403">and we have a feedback loop. </span> <span class="line" data-startTime="1405">And the wet level node lets us </span><span class="line" data-startTime="1405">change how much of the delayed </span><span class="line" data-startTime="1408">signal we want to send </span><span class="line" data-startTime="1408">to the output and mix </span><span class="line" data-startTime="1411">with the clean signal. </span> <span class="line" data-startTime="1414">And the codes that implement </span><span class="line" data-startTime="1414">this, looks like this, and I </span><span class="line" data-startTime="1417">don't expect you to </span><span class="line" data-startTime="1417">see what it says. </span> <span class="line" data-startTime="1419">But let's just say that it's </span><span class="line" data-startTime="1419">really condensed considering </span><span class="line" data-startTime="1423">all the work that is being </span><span class="line" data-startTime="1423">done behind the scenes. </span></p>

<p><span class="line" data-startTime="1427">So we simply create the nodes </span><span class="line" data-startTime="1427">and then set the values for </span><span class="line" data-startTime="1430">the delay and feedback that we </span><span class="line" data-startTime="1430">want, and then we make sure </span><span class="line" data-startTime="1433">that the routing looks </span><span class="line" data-startTime="1433">as it does in the </span><span class="line" data-startTime="1435">model and that's it. </span> <span class="line" data-startTime="1436">No math needed. </span> <span class="line" data-startTime="1439">And the results sounds </span><span class="line" data-startTime="1439">like this. </span> <span class="line" data-startTime="1444">[GUITAR NOTE] </span></p>

<p class="speaker"><span class="line" data-starttime="1445"><span class="speakerName">Oskar Eriksson</span>: That's dry. </span><span class="line" data-startTime="1446">[GUITAR NOTE] </span></p>

<p class="speaker"><span class="line" data-starttime="1447"><span class="speakerName">Oskar Eriksson</span>: And that's </span><span class="line" data-startTime="1447">with the delay. </span><span class="line" data-startTime="1450">[GUITAR NOTE] </span></p>

<p class="speaker"><span class="line" data-starttime="1452"><span class="speakerName">Oskar Eriksson</span>: And it's a </span><span class="line" data-startTime="1452">really big room so I didn't </span><span class="line" data-startTime="1454">really have a difference, </span><span class="line" data-startTime="1454">but the second </span><span class="line" data-startTime="1456">one is a bit delayed. </span><span class="line" data-startTime="1459">And this is a lengthy article </span><span class="line" data-startTime="1459">that I wrote on the subject </span><span class="line" data-startTime="1462">that you can read at </span><span class="line" data-startTime="1462">age HTML5Rocks.com. </span><span class="line" data-startTime="1465">But if you felt this was way too </span><span class="line" data-startTime="1465">much work, we release the </span><span class="line" data-startTime="1469">effects that we use in </span><span class="line" data-startTime="1469">JAM as tuna JS for </span><span class="line" data-startTime="1473">your comfort and pleasure. </span><span class="line" data-startTime="1475">So please feel free to </span><span class="line" data-startTime="1475">hack away and give </span><span class="line" data-startTime="1478">us more pulled requests. </span><span class="line" data-startTime="1479">There are still many effects </span><span class="line" data-startTime="1479">that need to be made. </span><span class="line" data-startTime="1485">And that's what I have to say. </span></p>

<p class="speaker"><span class="line" data-starttime="1488"><span class="speakerName">Xavier Barrade</span>: So JAM was a </span><span class="line" data-startTime="1488">really interesting project to </span><span class="line" data-startTime="1490">work on because when we started, </span><span class="line" data-startTime="1490">we were excited by </span><span class="line" data-startTime="1493">Websockets, by Google Compute, </span><span class="line" data-startTime="1493">by Go, by Web Audio. </span><span class="line" data-startTime="1497">And we already had people we </span><span class="line" data-startTime="1497">managed to take demo and make </span><span class="line" data-startTime="1502">it something that lots of people </span><span class="line" data-startTime="1502">used and connected </span><span class="line" data-startTime="1505">over, and used the web in </span><span class="line" data-startTime="1505">a pretty different way. </span><span class="line" data-startTime="1509">So to give you an idea, we had </span><span class="line" data-startTime="1509">more than 3 million visits </span><span class="line" data-startTime="1512">with an average visit duration </span><span class="line" data-startTime="1512">of more than 10 minutes, and </span><span class="line" data-startTime="1517">we would like to conclude by </span><span class="line" data-startTime="1517">showing you a little movie we </span><span class="line" data-startTime="1519">did when we launched </span><span class="line" data-startTime="1519">the application. </span><span class="line" data-startTime="1522">And it features the most </span><span class="line" data-startTime="1522">famous musician on the </span><span class="line" data-startTime="1525">internet, which is </span><span class="line" data-startTime="1525">Keyboard Cat. </span><span class="line" data-startTime="1529">[MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="1588"><span class="speakerName">Xavier Barrade</span>: Thank you. </span><span class="line" data-startTime="1593">So if anybody has any questions, </span><span class="line" data-startTime="1593">you can go to the </span><span class="line" data-startTime="1596">two microphones on the sides. </span></p>

<p class="speaker"><span class="line" data-starttime="1603"><span class="speakerName">Audience</span>: Hi, guys. </span><span class="line" data-startTime="1604">Is this on? </span></p>

<p class="speaker"><span class="line" data-starttime="1605"><span class="speakerName">Xavier Barrade</span>: Yes. </span></p>

<p class="speaker"><span class="line" data-starttime="1606"><span class="speakerName">Audience</span>: Thank you for that </span><span class="line" data-startTime="1606">really, really amazing </span><span class="line" data-startTime="1608">application. </span><span class="line" data-startTime="1611">The biggest question mark in </span><span class="line" data-startTime="1611">my mind are custom nodes in </span><span class="line" data-startTime="1615">the Web Audio API. </span><span class="line" data-startTime="1616">Now, I've seen it before, </span><span class="line" data-startTime="1616">including at last year's </span><span class="line" data-startTime="1619">Google I/O, but it seems like </span><span class="line" data-startTime="1619">that's a really deep down </span><span class="line" data-startTime="1624">magic kind of black box thing. </span><span class="line" data-startTime="1626">How do I learn how </span><span class="line" data-startTime="1626">to start becoming </span><span class="line" data-startTime="1629">proficient with those? </span></p>

<p class="speaker"><span class="line" data-starttime="1631"><span class="speakerName">Oskar Eriksson</span>: That's a </span><span class="line" data-startTime="1631">really good question. </span><span class="line" data-startTime="1634">Well, as you said, it is a </span><span class="line" data-startTime="1634">black box and the audio </span><span class="line" data-startTime="1639">communities &mdash; </span><span class="line" data-startTime="1641">it's very technical, but there </span><span class="line" data-startTime="1641">is this one site, which I </span><span class="line" data-startTime="1645">can't remember from my head that </span><span class="line" data-startTime="1645">has a lot of algorithms </span><span class="line" data-startTime="1649">and structures ready to use. </span><span class="line" data-startTime="1652">And if you follow me </span><span class="line" data-startTime="1652">on Google+, I will </span><span class="line" data-startTime="1657">post a link for you. </span><span class="line" data-startTime="1659">That's a good way to start. </span><span class="line" data-startTime="1662">And I can post some books </span><span class="line" data-startTime="1662">too, I think. </span><span class="line" data-startTime="1665">So that's the best I can </span><span class="line" data-startTime="1665">give you right now. </span></p>

<p class="speaker"><span class="line" data-starttime="1671"><span class="speakerName">Audience</span>: Hi, I'm </span><span class="line" data-startTime="1671">James Hardik. </span><span class="line" data-startTime="1673">I had a question, how long or </span><span class="line" data-startTime="1673">how often, I guess, are you </span><span class="line" data-startTime="1677">doing the time syncing. </span><span class="line" data-startTime="1679">I don't know if you </span><span class="line" data-startTime="1679">mentioned that. </span><span class="line" data-startTime="1680">But if you do it just at the </span><span class="line" data-startTime="1680">beginning and for some reason, </span><span class="line" data-startTime="1683">the latency of a person's </span><span class="line" data-startTime="1683">internet connection changes, </span><span class="line" data-startTime="1686">how often do you do that and </span><span class="line" data-startTime="1686">keep that kind of up to date </span><span class="line" data-startTime="1689">per client? </span></p>

<p class="speaker"><span class="line" data-starttime="1690"><span class="speakerName">Oskar Eriksson</span>: We actually </span><span class="line" data-startTime="1690">do two rounds of pings. </span><span class="line" data-startTime="1693">First when we join a session, </span><span class="line" data-startTime="1693">and that has nothing to do </span><span class="line" data-startTime="1697">with the syncing of the clients, </span><span class="line" data-startTime="1697">just rather selecting </span><span class="line" data-startTime="1699">the servers. </span><span class="line" data-startTime="1700">And then we do it again to </span><span class="line" data-startTime="1700">actually sync the clients, and </span><span class="line" data-startTime="1704">we do this just once. </span><span class="line" data-startTime="1707">But every time someone leaves or </span><span class="line" data-startTime="1707">joins the jam, and then we </span><span class="line" data-startTime="1710">do it for all of the clients. </span><span class="line" data-startTime="1711">So we just assume that the </span><span class="line" data-startTime="1711">latency will be consistent as </span><span class="line" data-startTime="1716">long as the same players are in </span><span class="line" data-startTime="1716">the jam, and this actually </span><span class="line" data-startTime="1719">works out rather well. </span><span class="line" data-startTime="1721">We tested us into </span><span class="line" data-startTime="1721">that assumption. </span></p>

<p class="speaker"><span class="line" data-starttime="1726"><span class="speakerName">Audience</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="1730"><span class="speakerName">Oskar Eriksson</span>: Did I do that? </span></p>

<p class="speaker"><span class="line" data-starttime="1733"><span class="speakerName">Xavier Barrade</span>: Yeah, </span><span class="line" data-startTime="1733">I took a screenshot. </span><span class="line" data-startTime="1735">So if there's not any more </span><span class="line" data-startTime="1735">questions, we are going to put </span><span class="line" data-startTime="1738">a shortcut on the screen and </span><span class="line" data-startTime="1738">the three first people who </span><span class="line" data-startTime="1741">enter the shortcut </span><span class="line" data-startTime="1741">will be able to </span><span class="line" data-startTime="1743">jam live on the screen. </span><span class="line" data-startTime="1747">If I can. </span><span class="line" data-startTime="1749">The [? bell ?] is </span><span class="line" data-startTime="1749">not going up. </span></p>

<p class="speaker"><span class="line" data-starttime="1755"><span class="speakerName">Oskar Eriksson</span>: So only people </span><span class="line" data-startTime="1755">with really good </span><span class="line" data-startTime="1757">eyesight can jam. </span></p>

<p class="speaker"><span class="line" data-starttime="1758"><span class="speakerName">Xavier Barrade</span>: Interesting. </span><span class="line" data-startTime="1760">I know. </span><span class="line" data-startTime="1766">So this is the screenshot </span><span class="line" data-startTime="1766">I just &mdash; </span><span class="line" data-startTime="1771">Now that I closed the website, </span><span class="line" data-startTime="1771">I have to take a new one. </span><span class="line" data-startTime="1773">Sorry, guys. </span></p>

<p class="speaker"><span class="line" data-starttime="1779"><span class="speakerName">Oskar Eriksson</span>: So </span><span class="line" data-startTime="1779">you can still ask </span><span class="line" data-startTime="1781">questions if you want. </span></p>

<p class="speaker"><span class="line" data-starttime="1782"><span class="speakerName">Xavier Barrade</span>: Yeah, if you </span><span class="line" data-startTime="1782">have more questions while </span><span class="line" data-startTime="1784">[INAUDIBLE]. </span><span class="line" data-startTime="1809">Ah, someone is joining </span><span class="line" data-startTime="1809">over there. </span><span class="line" data-startTime="1814">OK, so I'm going to </span><span class="line" data-startTime="1814">zoom that in. </span><span class="line" data-startTime="1819">It's case sensitive, yes. </span><span class="line" data-startTime="1821">Extra challenge. </span><span class="line" data-startTime="1831">So it's only going to work </span><span class="line" data-startTime="1831">if you have a laptop. </span><span class="line" data-startTime="1834">Web Audio is not yet activated </span><span class="line" data-startTime="1834">on mobile. </span></p>

<p class="speaker"><span class="line" data-starttime="1838"><span class="speakerName">Audience</span>: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1840"><span class="speakerName">Xavier Barrade</span>: Yeah, but we </span><span class="line" data-startTime="1840">haven't optimized the website </span><span class="line" data-startTime="1842">for mobile yet, so it's going </span><span class="line" data-startTime="1842">to work better on laptop. </span></p>

<p class="speaker"><span class="line" data-starttime="1845"><span class="speakerName">Oskar Eriksson</span>: Give it </span><span class="line" data-startTime="1845">a try, you never know. </span></p>

<p class="speaker"><span class="line" data-starttime="1849"><span class="speakerName">Xavier Barrade</span>: Yes. </span></p>

<p class="speaker"><span class="line" data-starttime="1851"><span class="speakerName">Audience</span>: You went through </span><span class="line" data-startTime="1851">before how the sampling you </span><span class="line" data-startTime="1853">needed to do for each of </span><span class="line" data-startTime="1853">these, you said 19 </span><span class="line" data-startTime="1855">instruments. </span><span class="line" data-startTime="1858">What would the process be like </span><span class="line" data-startTime="1858">at some point in the future. </span><span class="line" data-startTime="1862">Obviously, not a feature you </span><span class="line" data-startTime="1862">have right now, but at some </span><span class="line" data-startTime="1865">point in the future, where you </span><span class="line" data-startTime="1865">might allow somebody to </span><span class="line" data-startTime="1869">attempt to get a new instrument </span><span class="line" data-startTime="1869">into your system. </span><span class="line" data-startTime="1871">What kinds of things would they </span><span class="line" data-startTime="1871">need to upload in order </span><span class="line" data-startTime="1875">for that to be a possibility? </span></p>

<p class="speaker"><span class="line" data-starttime="1878"><span class="speakerName">Xavier Barrade</span>: This </span><span class="line" data-startTime="1878">is one of &mdash; </span><span class="line" data-startTime="1879">When we work on this project, </span><span class="line" data-startTime="1879">we had lots of things we &mdash; </span><span class="line" data-startTime="1884">it was an experimental project </span><span class="line" data-startTime="1884">so there was lots of things we </span><span class="line" data-startTime="1887">could have done or not, and this </span><span class="line" data-startTime="1887">is one of the things that </span><span class="line" data-startTime="1890">we might investigate. </span><span class="line" data-startTime="1892">So if you follow me on Google+, </span><span class="line" data-startTime="1892">if you'll search for </span><span class="line" data-startTime="1894">Xavier Barrade on Google+, I can </span><span class="line" data-startTime="1894">come back to you on this </span><span class="line" data-startTime="1897">question later. </span><span class="line" data-startTime="1899">Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="1900"><span class="speakerName">Audience</span>: Second, short &mdash; </span><span class="line" data-startTime="1904">I was working on a similar </span><span class="line" data-startTime="1904">project but not with musical </span><span class="line" data-startTime="1907">instruments, actually attempting </span><span class="line" data-startTime="1907">to do voice </span><span class="line" data-startTime="1909">recording in a group. </span><span class="line" data-startTime="1911">And of course, doing that we </span><span class="line" data-startTime="1911">can't rely on MIDI, to resolve </span><span class="line" data-startTime="1917">the latency issues. </span><span class="line" data-startTime="1919">The attempt was to actually do </span><span class="line" data-startTime="1919">dramatic recording with people </span><span class="line" data-startTime="1923">hearing each other in remote </span><span class="line" data-startTime="1923">locations as opposed to </span><span class="line" data-startTime="1926">everybody recording individually </span><span class="line" data-startTime="1926">not getting to </span><span class="line" data-startTime="1927">hear each other when they </span><span class="line" data-startTime="1927">were doing their pieces. </span><span class="line" data-startTime="1931">Did you try any other ways of </span><span class="line" data-startTime="1931">dealing with the latency, even </span><span class="line" data-startTime="1937">ones you abandoned that might </span><span class="line" data-startTime="1937">help people trying to resolve </span><span class="line" data-startTime="1941">the problem in other ways? </span></p>

<p class="speaker"><span class="line" data-starttime="1943"><span class="speakerName">Oskar Eriksson</span>: Well, actually, </span><span class="line" data-startTime="1943">when singing, it's </span><span class="line" data-startTime="1946">even more &mdash; </span><span class="line" data-startTime="1948">latency is even a bigger issue, </span><span class="line" data-startTime="1948">and I don't want to say </span><span class="line" data-startTime="1955">it's not possible, but I would </span><span class="line" data-startTime="1955">say it's really hard today. </span><span class="line" data-startTime="1960">I don't really have any </span><span class="line" data-startTime="1960">great ideas for you. </span><span class="line" data-startTime="1964">It's a really good problem, and </span><span class="line" data-startTime="1964">a really good question. </span><span class="line" data-startTime="1968">So let me know if you come </span><span class="line" data-startTime="1968">up with anything. </span></p>

<p class="speaker"><span class="line" data-starttime="1972"><span class="speakerName">Xavier Barrade</span>: OK, so I think </span><span class="line" data-startTime="1972">the band is ready. </span><span class="line" data-startTime="1976">Let's go. </span><span class="line" data-startTime="1978">[MUSIC PLAYING] </span><span class="line" data-startTime="1997">XAVIER BARRADE: [INAUDIBLE] </span><span class="line" data-startTime="2000">guitar. </span><span class="line" data-startTime="2001">[MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="2040"><span class="speakerName">Oskar Eriksson</span>: Yeah, I would </span><span class="line" data-startTime="2040">pay to hear that. </span><span class="line" data-startTime="2042">That's a good one. </span></p>

<p class="speaker"><span class="line" data-starttime="2043"><span class="speakerName">Xavier Barrade</span>: That's </span><span class="line" data-startTime="2043">pretty good. </span><span class="line" data-startTime="2044">So as you see, even in easy </span><span class="line" data-startTime="2044">mode, it kind of requires a </span><span class="line" data-startTime="2047">bit of skill to come to </span><span class="line" data-startTime="2047">a nice piece of music. </span><span class="line" data-startTime="2053">So thank you, guys. </span><span class="line" data-startTime="2054">I think we're done. </span><span class="line" data-startTime="2057">Yes? </span></p>

<p class="speaker"><span class="line" data-starttime="2057"><span class="speakerName">Audience</span>: Question, did you </span><span class="line" data-startTime="2057">check out Justin Frankel, the </span><span class="line" data-startTime="2061">guy who did Winamp? </span><span class="line" data-startTime="2062">He made a collaboration </span><span class="line" data-startTime="2062">program where it puts </span><span class="line" data-startTime="2066">everybody like a bar ahead so </span><span class="line" data-startTime="2066">that you can jam in a groove </span><span class="line" data-startTime="2071">instead of repeat like that so </span><span class="line" data-startTime="2071">you're actually always playing </span><span class="line" data-startTime="2075">in real time with the music, so </span><span class="line" data-startTime="2075">is your latency for what's </span><span class="line" data-startTime="2077">being recorded. </span> <span class="line" data-startTime="2079">But what you hear is everybody </span><span class="line" data-startTime="2079">else's previous bar or like </span><span class="line" data-startTime="2083">four bars so it's </span><span class="line" data-startTime="2083">configurable. </span> <span class="line" data-startTime="2085">So I don't know if </span><span class="line" data-startTime="2085">you saw that? </span><span class="line" data-startTime="2087">From your expression, </span><span class="line" data-startTime="2087">probably not, but </span><span class="line" data-startTime="2088">that's also a cool approach. </span></p>

<p class="speaker"><span class="line" data-starttime="2091"><span class="speakerName">Oskar Eriksson</span>: That sounds </span><span class="line" data-startTime="2091">hard to play a </span><span class="line" data-startTime="2093">real song though . </span><span class="line" data-startTime="2095">If you have to play </span><span class="line" data-startTime="2095">one bar ahead. </span></p>

<p class="speaker"><span class="line" data-starttime="2097"><span class="speakerName">Audience</span>: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="2101"><span class="speakerName">Oskar Eriksson</span>: Cool. </span><span class="line" data-startTime="2104">So thank you. </span><span class="line" data-startTime="2105">Thank you very much. </span></p></div>