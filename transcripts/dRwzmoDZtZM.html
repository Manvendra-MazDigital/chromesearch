<p class="speaker"><span class="line" data-starttime="3"><span class="speakerName">Paul Irish</span>: Hi, and welcome </span><span class="line" data-startTime="3">to The Breakpoint. </span><span class="line" data-startTime="5">This time, I'm joined </span><span class="line" data-startTime="5">by John McCutchan. </span></p>

<p class="speaker"><span class="line" data-starttime="7"><span class="speakerName">John McCutchan</span>: Hey, everyone. </span></p>

<p class="speaker"><span class="line" data-starttime="8"><span class="speakerName">Paul Irish</span>: And we're going to </span><span class="line" data-startTime="8">talk about remote debugging </span><span class="line" data-startTime="11">and getting a lot more insight </span><span class="line" data-startTime="11">as far as what's going on on </span><span class="line" data-startTime="14">your mobile device. </span> <span class="line" data-startTime="15">There's a lot of tools inside </span><span class="line" data-startTime="15">of Chrome DevTools to deal </span><span class="line" data-startTime="17">with this and specifically </span><span class="line" data-startTime="17">identify the pain points that </span><span class="line" data-startTime="20">you're having with performance </span><span class="line" data-startTime="20">that you encounter on mobile. </span> <span class="line" data-startTime="24">We're going to show a few </span><span class="line" data-startTime="24">cool things today. </span> <span class="line" data-startTime="26">We're going to show seeing the </span><span class="line" data-startTime="26">things that are unique to </span><span class="line" data-startTime="30">mobile inside the DevTools </span><span class="line" data-startTime="30">Timeline. </span></p>

<p><span class="line" data-startTime="32">We're going to cover </span><span class="line" data-startTime="32">about:tracing and extracting </span><span class="line" data-startTime="34">one of those traces from the </span><span class="line" data-startTime="34">phone, show off things like </span><span class="line" data-startTime="39">Continuous Paint, and </span><span class="line" data-startTime="39">talk about why all </span><span class="line" data-startTime="40">this matters so much. </span> <span class="line" data-startTime="42">Sound good? </span></p>

<p class="speaker"><span class="line" data-starttime="42"><span class="speakerName">John McCutchan</span>: Yeah, </span><span class="line" data-startTime="42">that sounds great. </span></p>

<p class="speaker"><span class="line" data-starttime="43"><span class="speakerName">Paul Irish</span>: All right, so first </span><span class="line" data-startTime="43">up, we're going to dive </span><span class="line" data-startTime="45">into an app by the </span><span class="line" data-startTime="45">"New York Times" </span><span class="line" data-startTime="47">called the Times Skimmer. </span> <span class="line" data-startTime="49">And we're going to take a look </span><span class="line" data-startTime="49">at the timeline of it. </span> <span class="line" data-startTime="51">So I have this up here </span><span class="line" data-startTime="51">on my phone. </span> <span class="line" data-startTime="53">And meanwhile, I'm also </span><span class="line" data-startTime="53">in Chrome DevTools. </span> <span class="line" data-startTime="57">So I've already set this up </span><span class="line" data-startTime="57">to do remote debugging. </span> <span class="line" data-startTime="59">We'll show that in </span><span class="line" data-startTime="59">a little bit. </span> <span class="line" data-startTime="60">But I'm going to come over here </span><span class="line" data-startTime="60">to the timeline and start </span><span class="line" data-startTime="64">a new recording. </span> <span class="line" data-startTime="66">And now that I've got that </span><span class="line" data-startTime="66">going, I'm just going to </span><span class="line" data-startTime="68">navigate to the new section </span><span class="line" data-startTime="68">on my phone. </span> <span class="line" data-startTime="70">So Times Skimmer is just going </span><span class="line" data-startTime="70">to navigate over to &mdash; </span><span class="line" data-startTime="77">there he goes. </span></p>

<p><span class="line" data-startTime="79">And that's going to come in. </span> <span class="line" data-startTime="82">So I got a few things </span><span class="line" data-startTime="82">going on. </span> <span class="line" data-startTime="83">That's why the phone is </span><span class="line" data-startTime="83">a little sleepy here. </span> <span class="line" data-startTime="88">But we're going to end </span><span class="line" data-startTime="88">the recording. </span> <span class="line" data-startTime="90">You can hit Command-E as </span><span class="line" data-startTime="90">a little shortcut. </span> <span class="line" data-startTime="93">And we can dive in to what's </span><span class="line" data-startTime="93">going on here. </span> <span class="line" data-startTime="95">So it looks like quite a bit. </span> <span class="line" data-startTime="99">One of the things we see &mdash; </span><span class="line" data-startTime="101">this, actually, right here, so </span><span class="line" data-startTime="101">this is a Rasterize call. </span> <span class="line" data-startTime="106">And the reason why it's an </span><span class="line" data-startTime="106">empty, hollow bar is because </span><span class="line" data-startTime="111">it happens off the </span><span class="line" data-startTime="111">main thread. </span> <span class="line" data-startTime="113">There's a lot of things on </span><span class="line" data-startTime="113">Chrome on Android that do not </span><span class="line" data-startTime="115">happen inside the UI thread. </span> <span class="line" data-startTime="117">Whereas on desktop, currently </span><span class="line" data-startTime="117">some of them do. </span></p>

<p><span class="line" data-startTime="119">And this hollow bar indicates </span><span class="line" data-startTime="119">that that is happening </span><span class="line" data-startTime="124">off-thread, which means that </span><span class="line" data-startTime="124">this click event handler where </span><span class="line" data-startTime="127">we go into jQuery and we start </span><span class="line" data-startTime="127">doing things, this can all be </span><span class="line" data-startTime="131">happening in parallel because </span><span class="line" data-startTime="131">this is operating on a </span><span class="line" data-startTime="133">separate thread. </span></p>

<p class="speaker"><span class="line" data-starttime="134"><span class="speakerName">John McCutchan</span>: Nice. </span></p>

<p class="speaker"><span class="line" data-starttime="136"><span class="speakerName">Paul Irish</span>: We go down here. </span><span class="line" data-startTime="137">We see all these paint and paint </span><span class="line" data-startTime="137">and paint and paint and </span><span class="line" data-startTime="138">paint and paint and paint. </span><span class="line" data-startTime="139">All of them, they're very small, </span><span class="line" data-startTime="139">and they're not taking </span><span class="line" data-startTime="141">up a lot of time. </span></p>

<p class="speaker"><span class="line" data-starttime="143"><span class="speakerName">John McCutchan</span>: How long </span><span class="line" data-startTime="143">are they taking? </span></p>

<p class="speaker"><span class="line" data-starttime="144"><span class="speakerName">Paul Irish</span>: Let's see. </span><span class="line" data-startTime="146">So we've got about a </span><span class="line" data-startTime="146">millisecond each. </span><span class="line" data-startTime="150">That adds up. </span><span class="line" data-startTime="151">So we're targeting 16.6 </span><span class="line" data-startTime="151">milliseconds for 60 FPS, so at </span><span class="line" data-startTime="157">almost a millisecond </span><span class="line" data-startTime="157">each, this is &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="160"><span class="speakerName">John McCutchan</span>: It's going </span><span class="line" data-startTime="160">to take a while. </span></p>

<p class="speaker"><span class="line" data-starttime="161"><span class="speakerName">Paul Irish</span>: It's going to </span><span class="line" data-startTime="161">absorb quite a bit. </span> <span class="line" data-startTime="163">So this is going to be </span><span class="line" data-startTime="163">a little chunky. </span> <span class="line" data-startTime="165">But sometimes it's hard to </span><span class="line" data-startTime="165">identify what's going on here. </span> <span class="line" data-startTime="167">So what I'm going to do is I'm </span><span class="line" data-startTime="167">going to turn on another mode </span><span class="line" data-startTime="171">that we have. </span> <span class="line" data-startTime="171">So I'm going over </span><span class="line" data-startTime="171">to the Settings. </span> <span class="line" data-startTime="173">I'm using the question mark &mdash; </span><span class="line" data-startTime="176">it's a little shortcut &mdash; </span><span class="line" data-startTime="176">to get into Shortcuts. </span> <span class="line" data-startTime="178">I go over to General. </span> <span class="line" data-startTime="179">I'm going to turn on Show pane </span><span class="line" data-startTime="179">rectangles and composited </span><span class="line" data-startTime="181">layer borders. </span> <span class="line" data-startTime="183">Now, I come back. </span></p>

<p><span class="line" data-startTime="185">And on the phone, what we're </span><span class="line" data-startTime="185">going to see is anything that </span><span class="line" data-startTime="189">gets painted is going to be </span><span class="line" data-startTime="189">rendered in a red rectangle. </span> <span class="line" data-startTime="193">Anything that is composited </span><span class="line" data-startTime="193">as a layer onto the </span><span class="line" data-startTime="195">GPU has gold borders. </span> <span class="line" data-startTime="197">And so this time, I'll try </span><span class="line" data-startTime="197">recording in Timeline again. </span> <span class="line" data-startTime="204">And we're going to navigate </span><span class="line" data-startTime="204">once more. </span> <span class="line" data-startTime="207">And now you see a few things. </span> <span class="line" data-startTime="208">You see that there was just a </span><span class="line" data-startTime="208">moment where there were gold </span><span class="line" data-startTime="213">borders around all the icons on </span><span class="line" data-startTime="213">the side of the navigation. </span> <span class="line" data-startTime="218">And then there was </span><span class="line" data-startTime="218">a blink of red &mdash; </span><span class="line" data-startTime="221">red paints again. </span></p>

<p><span class="line" data-startTime="223">And the content is on its way. </span> <span class="line" data-startTime="228">But now when we take a look </span><span class="line" data-startTime="228">at what's going on in our </span><span class="line" data-startTime="231">Timeline, these small little </span><span class="line" data-startTime="231">42 by 45 paints make a lot </span><span class="line" data-startTime="237">more sense. </span> <span class="line" data-startTime="239">Even if I hover over them, we </span><span class="line" data-startTime="239">see on the phone, a little </span><span class="line" data-startTime="243">blue area indicating the </span><span class="line" data-startTime="243">dimensions of where that is. </span> <span class="line" data-startTime="247">So right now, it's showing up </span><span class="line" data-startTime="247">in the top left corner. </span> <span class="line" data-startTime="251">And in about a week from now, </span><span class="line" data-startTime="251">that'll be showing up right on </span><span class="line" data-startTime="254">the space where that </span><span class="line" data-startTime="254">paint was done. </span> <span class="line" data-startTime="256">But you're getting a good idea </span><span class="line" data-startTime="256">of the dimensions of that </span><span class="line" data-startTime="258">paint and seeing where </span><span class="line" data-startTime="258">it came from. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="261"><span class="speakerName">John McCutchan</span>: So that means </span><span class="line" data-startTime="261">I'll be able to, from within </span><span class="line" data-startTime="263">Timeline, hover over a paint </span><span class="line" data-startTime="263">and see the visible </span><span class="line" data-startTime="265">region on the phone? </span></p>

<p class="speaker"><span class="line" data-starttime="266"><span class="speakerName">Paul Irish</span>: Exactly. </span><span class="line" data-startTime="266">Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="266"><span class="speakerName">John McCutchan</span>: That's </span><span class="line" data-startTime="266">awesome. </span></p>

<p class="speaker"><span class="line" data-starttime="267"><span class="speakerName">Paul Irish</span>: So not just the </span><span class="line" data-startTime="267">duration of it, but we have a </span><span class="line" data-startTime="271">map of the location on where it </span><span class="line" data-startTime="271">happened and the dimensions </span><span class="line" data-startTime="274">of the paint itself. </span> <span class="line" data-startTime="275">And like I mentioned, there's a </span><span class="line" data-startTime="275">small bug in location right </span><span class="line" data-startTime="277">now, but that's on </span><span class="line" data-startTime="277">its way out. </span> <span class="line" data-startTime="280">So this is pretty cool. </span> <span class="line" data-startTime="283">So I'm getting a sense of not </span><span class="line" data-startTime="283">only the full performance </span><span class="line" data-startTime="287">view, not just what's happening </span><span class="line" data-startTime="287">in JavaScript, but </span><span class="line" data-startTime="290">all my paint costs as well, </span><span class="line" data-startTime="290">and it can identify </span><span class="line" data-startTime="292">what's going on. </span> <span class="line" data-startTime="293">And so this is a good example </span><span class="line" data-startTime="293">here where it looks like we're </span><span class="line" data-startTime="297">parsing a bunch of HTML. </span> <span class="line" data-startTime="298">It's taking a while. </span> <span class="line" data-startTime="299">We're still parsing HTML. </span> <span class="line" data-startTime="301">I think some JSON has come back </span><span class="line" data-startTime="301">from this XHR, and we're </span><span class="line" data-startTime="308">now sending it through a </span><span class="line" data-startTime="308">templating engine and piping </span><span class="line" data-startTime="311">it into the DOM. </span> <span class="line" data-startTime="313">And it looks like this indicator </span><span class="line" data-startTime="313">is telling us that </span><span class="line" data-startTime="316">we have a forced synchronous </span><span class="line" data-startTime="316">layout as a possible </span><span class="line" data-startTime="319">performance bottleneck. </span></p>

<p><span class="line" data-startTime="320">And why is it forced? </span><span class="line" data-startTime="322">It's happening inside here. </span></p>

<p class="speaker"><span class="line" data-starttime="325"><span class="speakerName">John McCutchan</span>: So is </span><span class="line" data-startTime="325">this the call stack? </span></p>

<p class="speaker"><span class="line" data-starttime="327"><span class="speakerName">Paul Irish</span>: Yeah, so this is the </span><span class="line" data-startTime="327">call stack of what led up </span><span class="line" data-startTime="329">to the layout being forced. </span></p>

<p class="speaker"><span class="line" data-starttime="331"><span class="speakerName">John McCutchan</span>: And so this is </span><span class="line" data-startTime="331">where the layout was forced in </span><span class="line" data-startTime="333">the bottom left. </span></p>

<p class="speaker"><span class="line" data-starttime="335"><span class="speakerName">Paul Irish</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="335"><span class="speakerName">John McCutchan</span>: OK, great. </span></p>

<p class="speaker"><span class="line" data-starttime="336"><span class="speakerName">Paul Irish</span>: So I can click in </span><span class="line" data-startTime="336">here and identify that &mdash; </span><span class="line" data-startTime="340">so, inside app source, it's </span><span class="line" data-startTime="340">this guy right here. </span><span class="line" data-startTime="344">This.offsetHeight is a known </span><span class="line" data-startTime="344">property that forces layout. </span><span class="line" data-startTime="347">The browser has figure out the </span><span class="line" data-startTime="347">new geometry of the page. </span><span class="line" data-startTime="351">And so I know where </span><span class="line" data-startTime="351">this is happening. </span><span class="line" data-startTime="354">And then if I want to get a good </span><span class="line" data-startTime="354">idea of why we needed to </span><span class="line" data-startTime="356">even call that, we can watch </span><span class="line" data-startTime="356">this call stack and see that </span><span class="line" data-startTime="360">we were in mark, notify. </span><span class="line" data-startTime="361">We were getting JSON </span><span class="line" data-startTime="361">back here. </span><span class="line" data-startTime="364">But we needed to do some work </span><span class="line" data-startTime="364">in order to figure this out. </span></p>

<p class="speaker"><span class="line" data-starttime="368"><span class="speakerName">John McCutchan</span>: That's </span><span class="line" data-startTime="368">really cool. </span><span class="line" data-startTime="370">To be able to see on the </span><span class="line" data-startTime="370">Timeline that there's a really </span><span class="line" data-startTime="373">expensive layout operation going </span><span class="line" data-startTime="373">on and then just jump </span><span class="line" data-startTime="375">right to the call stack, that </span><span class="line" data-startTime="375">gets you right to the source </span><span class="line" data-startTime="379">of the problem. </span></p>

<p class="speaker"><span class="line" data-starttime="379"><span class="speakerName">Paul Irish</span>: Right. </span><span class="line" data-startTime="380">And so then the next thing best </span><span class="line" data-startTime="380">to do at this point is to </span><span class="line" data-startTime="384">eradicate this. </span><span class="line" data-startTime="385">Basically, anytime you see this </span><span class="line" data-startTime="385">little indicator, we want </span><span class="line" data-startTime="388">to get rid of it. </span><span class="line" data-startTime="390">And so in this case, if we can </span><span class="line" data-startTime="390">avoid hitting offset top at </span><span class="line" data-startTime="393">this point &mdash; maybe we can ask </span><span class="line" data-startTime="393">for offset top earlier in the </span><span class="line" data-startTime="396">application, cache that, and </span><span class="line" data-startTime="396">then just apply that value </span><span class="line" data-startTime="400">inside here so that we don't </span><span class="line" data-startTime="400">have to go ask the DOM, hey, </span><span class="line" data-startTime="403">what's the news story in the </span><span class="line" data-startTime="403">geometry of the page? </span><span class="line" data-startTime="406">That would mean that we don't </span><span class="line" data-startTime="406">have this big jump between </span><span class="line" data-startTime="409">these operations, and then it </span><span class="line" data-startTime="409">would be a lot more snappy. </span></p>

<p class="speaker"><span class="line" data-starttime="412"><span class="speakerName">John McCutchan</span>: That's cool. </span></p>

<p class="speaker"><span class="line" data-starttime="413"><span class="speakerName">Paul Irish</span>: Yeah, so that's a </span><span class="line" data-startTime="413">very quick summary of the </span><span class="line" data-startTime="415">power of the DevTools Timeline </span><span class="line" data-startTime="415">on mobile and getting a good </span><span class="line" data-startTime="420">sense of what's actually </span><span class="line" data-startTime="420">happening. </span><span class="line" data-startTime="421">There's things that I didn't </span><span class="line" data-startTime="421">show as far as image decodes </span><span class="line" data-startTime="423">and image resizes. </span><span class="line" data-startTime="424">If you've seen these times on </span><span class="line" data-startTime="424">desktop, you can expect them </span><span class="line" data-startTime="430">to take, on mobile, around 6 to </span><span class="line" data-startTime="430">10 times the duration that </span><span class="line" data-startTime="435">you're used to on desktop. </span><span class="line" data-startTime="436">So all those costs are much more </span><span class="line" data-startTime="436">expensive on the mobile. </span></p>

<p class="speaker"><span class="line" data-starttime="440"><span class="speakerName">John McCutchan</span>: So that means is </span><span class="line" data-startTime="440">if your site is running in, </span><span class="line" data-startTime="442">say, maybe 10 milliseconds per </span><span class="line" data-startTime="442">update frame on desktop, then </span><span class="line" data-startTime="448">you could expect 100 </span><span class="line" data-startTime="448">milliseconds, maybe? </span></p>

<p class="speaker"><span class="line" data-starttime="450"><span class="speakerName">Paul Irish</span>: Pretty much. </span></p>

<p class="speaker"><span class="line" data-starttime="451"><span class="speakerName">John McCutchan</span>: That's </span><span class="line" data-startTime="451">a big difference. </span></p>

<p class="speaker"><span class="line" data-starttime="453"><span class="speakerName">Paul Irish</span>: It hurts. </span></p>

<p class="speaker"><span class="line" data-starttime="454"><span class="speakerName">John McCutchan</span>: So the most </span><span class="line" data-startTime="454">exciting thing for me about </span><span class="line" data-startTime="456">DevTools on mobile is that </span><span class="line" data-startTime="456">it's the exact same as </span><span class="line" data-startTime="461">DevTools on desktop. </span><span class="line" data-startTime="462">So everything that you learn in </span><span class="line" data-startTime="462">using the tools on desktop </span><span class="line" data-startTime="467">is applicable on </span><span class="line" data-startTime="467">mobile as well. </span><span class="line" data-startTime="469">It looks like we just lost </span><span class="line" data-startTime="469">our connection, but we'll </span><span class="line" data-startTime="472">reestablish that. </span></p>

<p class="speaker"><span class="line" data-starttime="473"><span class="speakerName">Paul Irish</span>: We should </span><span class="line" data-startTime="473">have that back. </span><span class="line" data-startTime="475">There we go. </span></p>

<p class="speaker"><span class="line" data-starttime="475"><span class="speakerName">John McCutchan</span>: There we go. </span></p>

<p class="speaker"><span class="line" data-starttime="477"><span class="speakerName">Paul Irish</span>: Cool. </span><span class="line" data-startTime="477">So we'll take out these </span><span class="line" data-startTime="477">settings for now. </span><span class="line" data-startTime="485">Yeah. </span><span class="line" data-startTime="485">So do you want to show a little </span><span class="line" data-startTime="485">bit more about:tracing? </span></p>

<p class="speaker"><span class="line" data-starttime="491"><span class="speakerName">John McCutchan</span>: Yeah. </span> <span class="line" data-startTime="492">Yeah. </span> <span class="line" data-startTime="492">So for those of you aren't </span><span class="line" data-startTime="492">familiar with about:tracing, </span><span class="line" data-startTime="495">this is a real low-level staring </span><span class="line" data-startTime="495">at the guts of what </span><span class="line" data-startTime="499">Chrome is doing when it's </span><span class="line" data-startTime="499">rendering your site. </span> <span class="line" data-startTime="502">And so the way you access this </span><span class="line" data-startTime="502">on the desktop is you navigate </span><span class="line" data-startTime="506">to about:tracing. </span> <span class="line" data-startTime="507">And you can start a capture, </span><span class="line" data-startTime="507">and it captures it. </span> <span class="line" data-startTime="509">But since this is a mobile, it's </span><span class="line" data-startTime="509">a little bit different. </span> <span class="line" data-startTime="512">And I've been maintaining </span><span class="line" data-startTime="512">a Python script </span><span class="line" data-startTime="515">that activates it. </span> <span class="line" data-startTime="517">And so let me just </span><span class="line" data-startTime="517">run it right now. </span> <span class="line" data-startTime="519">And when I do this, Paul, could </span><span class="line" data-startTime="519">you just navigate a </span><span class="line" data-startTime="522">little bit on the device? </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="523"><span class="speakerName">Paul Irish</span>: Sure. </span></p>

<p class="speaker"><span class="line" data-starttime="524"><span class="speakerName">John McCutchan</span>: OK, </span><span class="line" data-startTime="524">are we ready? </span></p>

<p class="speaker"><span class="line" data-starttime="525"><span class="speakerName">Paul Irish</span>: Ready. </span></p>

<p class="speaker"><span class="line" data-starttime="529"><span class="speakerName">John McCutchan</span>: So there's a </span><span class="line" data-startTime="529">little balloon pop up, and </span><span class="line" data-startTime="531">Paul's going to navigate, </span><span class="line" data-startTime="531">maybe scroll around. </span><span class="line" data-startTime="537">How are we doing? </span></p>

<p class="speaker"><span class="line" data-starttime="539"><span class="speakerName">Paul Irish</span>: There we go. </span><span class="line" data-startTime="539">We've got both things, scrolling </span><span class="line" data-startTime="539">and navigating, so </span><span class="line" data-startTime="542">we're good. </span></p>

<p class="speaker"><span class="line" data-starttime="543"><span class="speakerName">John McCutchan</span>: All right, so </span><span class="line" data-startTime="543">we're going to press Enter </span><span class="line" data-startTime="543">there, and the balloon will pop </span><span class="line" data-startTime="543">up on the mobile device </span><span class="line" data-startTime="546">saying that the capture is </span><span class="line" data-startTime="546">complete and that it's going </span><span class="line" data-startTime="549">to copy it over to </span><span class="line" data-startTime="549">the desktop. </span><span class="line" data-startTime="557">So I'll just load </span><span class="line" data-startTime="557">up chrome.json. </span><span class="line" data-startTime="558">Wow, 16 megs &mdash; a lot </span><span class="line" data-startTime="558">of data in there. </span><span class="line" data-startTime="562">This is pretty low level. </span><span class="line" data-startTime="565">Oh, now this is starting </span><span class="line" data-startTime="565">to look interesting. </span><span class="line" data-startTime="568">So we have some animations </span><span class="line" data-startTime="568">here, stacked </span><span class="line" data-startTime="570">on top of each other. </span></p>

<p class="speaker"><span class="line" data-starttime="571"><span class="speakerName">Paul Irish</span>: Are these keyframe </span><span class="line" data-startTime="571">CSS animation? </span></p>

<p class="speaker"><span class="line" data-starttime="575"><span class="speakerName">John McCutchan</span>: There's comps </span><span class="line" data-startTime="575">that are animation. </span><span class="line" data-startTime="577">So let's see here. </span><span class="line" data-startTime="581">We'll zoom in. </span><span class="line" data-startTime="584">So there's the VSync tick, so </span><span class="line" data-startTime="584">this is kicking off the draw. </span><span class="line" data-startTime="587">And now, here you can see that </span><span class="line" data-startTime="587">we're preparing to draw. </span><span class="line" data-startTime="591">We're doing the layout. </span><span class="line" data-startTime="592">Everything is being updated. </span><span class="line" data-startTime="594">When you really need to get this </span><span class="line" data-startTime="594">low-level, nothing beats </span><span class="line" data-startTime="597">Chrome://tracing. </span><span class="line" data-startTime="599">And it works just like it does </span><span class="line" data-startTime="599">on the desktop once you've </span><span class="line" data-startTime="601">captured the data. </span></p>

<p class="speaker"><span class="line" data-starttime="602"><span class="speakerName">Paul Irish</span>: And actually, you </span><span class="line" data-startTime="602">have a whole other GDL session </span><span class="line" data-startTime="605">on this tool, what </span><span class="line" data-startTime="605">you can learn. </span></p>

<p class="speaker"><span class="line" data-starttime="608"><span class="speakerName">John McCutchan</span>: Yeah, I did a </span><span class="line" data-startTime="608">GDL on Make the Web Faster in </span><span class="line" data-startTime="612">December of last year, </span><span class="line" data-startTime="612">so check it out. </span><span class="line" data-startTime="614">I go into a lot of detail on the </span><span class="line" data-startTime="614">value of this tool and how </span><span class="line" data-startTime="617">you can use it to actually </span><span class="line" data-startTime="617">instrument your JavaScript </span><span class="line" data-startTime="620">code on top of just </span><span class="line" data-startTime="620">instrumenting the </span><span class="line" data-startTime="621">internals of Chrome. </span><span class="line" data-startTime="623">I highly recommend it. </span></p>

<p class="speaker"><span class="line" data-starttime="624"><span class="speakerName">Paul Irish</span>: It's good. </span><span class="line" data-startTime="625">You look at this interface, </span><span class="line" data-startTime="625">and it's </span><span class="line" data-startTime="626">pretty daunting at first. </span><span class="line" data-startTime="629">And there's a fantastic amount </span><span class="line" data-startTime="629">of information there. </span><span class="line" data-startTime="632">And once you get used to reading </span><span class="line" data-startTime="632">it, you can extract </span><span class="line" data-startTime="635">some really useful </span><span class="line" data-startTime="635">insights in it. </span></p>

<p class="speaker"><span class="line" data-starttime="636"><span class="speakerName">John McCutchan</span>: Yeah. </span><span class="line" data-startTime="637">To give you an idea, we spent </span><span class="line" data-startTime="637">about an hour and a half </span><span class="line" data-startTime="640">discussing Chrome://tracing in </span><span class="line" data-startTime="640">this Make the Web Faster GDL, </span><span class="line" data-startTime="644">and we're still just scratching </span><span class="line" data-startTime="644">the surface. </span><span class="line" data-startTime="646">So this is a tool for experts, </span><span class="line" data-startTime="646">but you need it to truly </span><span class="line" data-startTime="650">understand what's happening. </span></p>

<p class="speaker"><span class="line" data-starttime="653"><span class="speakerName">Paul Irish</span>: And one last thing </span><span class="line" data-startTime="653">we'll show you is that there's </span><span class="line" data-startTime="656">a new feature that we're working </span><span class="line" data-startTime="656">on that we want to </span><span class="line" data-startTime="659">show off that's called </span><span class="line" data-startTime="659">continuous </span><span class="line" data-startTime="660">page repainting mode. </span> <span class="line" data-startTime="662">And so we're going to come </span><span class="line" data-startTime="662">back to the DevTools, and </span><span class="line" data-startTime="665">we're looking at one of the </span><span class="line" data-startTime="665">pages inside Times Skimmer. </span> <span class="line" data-startTime="668">So we're going to turn on </span><span class="line" data-startTime="668">continuous page repainting. </span> <span class="line" data-startTime="670">So what this does is it </span><span class="line" data-startTime="670">basically says, browser, just </span><span class="line" data-startTime="673">continue to paint, again </span><span class="line" data-startTime="673">and again and again. </span></p>

<p><span class="line" data-startTime="675">I know that you've painted it </span><span class="line" data-startTime="675">once, but paint it over </span><span class="line" data-startTime="679">because I am going </span><span class="line" data-startTime="679">to do some work. </span> <span class="line" data-startTime="682">I'm going to play around </span><span class="line" data-startTime="682">a little bit. </span> <span class="line" data-startTime="683">So once we turn it on, we have </span><span class="line" data-startTime="683">the little feedback on how </span><span class="line" data-startTime="687">long our paints are taking </span><span class="line" data-startTime="687">on the phone. </span> <span class="line" data-startTime="690">And then we can go inside of </span><span class="line" data-startTime="690">the DOM and start to play </span><span class="line" data-startTime="694">around a little bit. </span> <span class="line" data-startTime="694">So in this case, I'm </span><span class="line" data-startTime="694">going to go in &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="697"><span class="speakerName">John McCutchan</span>: So, hold on. </span> <span class="line" data-startTime="697">Before you do that, why don't </span><span class="line" data-startTime="697">we talk about the graph, </span><span class="line" data-startTime="699">actually, that is partially </span><span class="line" data-startTime="699">visible in the upper </span><span class="line" data-startTime="702">right-hand corner of </span><span class="line" data-startTime="702">the mobile device? </span><span class="line" data-startTime="704">So when mobile painting is </span><span class="line" data-startTime="704">turned on, you get a min and a </span><span class="line" data-startTime="707">max paint time and the previous </span><span class="line" data-startTime="707">frame's paint time </span><span class="line" data-startTime="711">and then a graph of </span><span class="line" data-startTime="711">all of this data. </span> <span class="line" data-startTime="713">So it's really interesting </span><span class="line" data-startTime="713">to see. </span> <span class="line" data-startTime="716">And the workflow here is you can </span><span class="line" data-startTime="716">toggle on and off elements </span><span class="line" data-startTime="719">and toggle on and off styles, </span><span class="line" data-startTime="719">and you can try and determine </span><span class="line" data-startTime="722">the cost of painting a specific </span><span class="line" data-startTime="722">element with its </span><span class="line" data-startTime="725">style, which Paul's going to </span><span class="line" data-startTime="725">demonstrate right now. </span></p>

<p class="speaker"><span class="line" data-starttime="729"><span class="speakerName">Paul Irish</span>: First thing, I'm </span><span class="line" data-startTime="729">just going to bring us back to </span><span class="line" data-startTime="731">the page we were looking at. </span></p>

<p class="speaker"><span class="line" data-starttime="733"><span class="speakerName">John McCutchan</span>: Cool. </span><span class="line" data-startTime="736">There we go. </span></p>

<p class="speaker"><span class="line" data-starttime="738"><span class="speakerName">Paul Irish</span>: All right. </span><span class="line" data-startTime="740">So now that we're back here, </span><span class="line" data-startTime="740">one thing that we can </span><span class="line" data-startTime="744">experiment with in continuous </span><span class="line" data-startTime="744">page repainting is taking </span><span class="line" data-startTime="748">things off. </span><span class="line" data-startTime="749">So there's a H shortcut. </span><span class="line" data-startTime="750">Now, you can use it all </span><span class="line" data-startTime="750">the time if you just </span><span class="line" data-startTime="752">want to hide something. </span><span class="line" data-startTime="754">So just hit H, and it will </span><span class="line" data-startTime="754">hide that DOM node. </span><span class="line" data-startTime="759">And so in page repainting mode, </span><span class="line" data-startTime="759">what we're looking for </span><span class="line" data-startTime="764">is what effect not painting that </span><span class="line" data-startTime="764">element at all has on the </span><span class="line" data-startTime="770">time to repaint. </span><span class="line" data-startTime="772">So if it has a big, significant </span><span class="line" data-startTime="772">drop, then we know </span><span class="line" data-startTime="776">that this element and its </span><span class="line" data-startTime="776">children are currently </span><span class="line" data-startTime="779">contributing quite a bit to </span><span class="line" data-startTime="779">the cost of painting. </span></p>

<p class="speaker"><span class="line" data-starttime="783"><span class="speakerName">John McCutchan</span>: Yeah, </span><span class="line" data-startTime="783">that's exactly it. </span><span class="line" data-startTime="784">You're playing the </span><span class="line" data-startTime="784">subtraction game. </span><span class="line" data-startTime="787">If I turn this element off or </span><span class="line" data-startTime="787">disable a style on it, the </span><span class="line" data-startTime="791">time goes from being 100 </span><span class="line" data-startTime="791">milliseconds to 90 </span><span class="line" data-startTime="794">milliseconds. </span><span class="line" data-startTime="795">So you can conclude that </span><span class="line" data-startTime="795">that element cost 10. </span></p>

<p class="speaker"><span class="line" data-starttime="798"><span class="speakerName">Paul Irish</span>: And then once we </span><span class="line" data-startTime="798">find out the elements that are </span><span class="line" data-startTime="801">costly, we can start working </span><span class="line" data-startTime="801">through our styles in here in </span><span class="line" data-startTime="805">the DevTools, toggle them on </span><span class="line" data-startTime="805">and off, and identify what </span><span class="line" data-startTime="809">parts of things are </span><span class="line" data-startTime="809">contributing. </span> <span class="line" data-startTime="811">And sometimes just images will </span><span class="line" data-startTime="811">be contributing, like a large </span><span class="line" data-startTime="814">image will have a pretty </span><span class="line" data-startTime="814">significant paint cost. </span> <span class="line" data-startTime="816">Other times, you'll be finding </span><span class="line" data-startTime="816">box shadow and border radius, </span><span class="line" data-startTime="819">and maybe some other CSS styles </span><span class="line" data-startTime="819">will be contributing. </span> <span class="line" data-startTime="824">But here, you'll finally get an </span><span class="line" data-startTime="824">idea as far as if you are </span><span class="line" data-startTime="826">seeing large paint times in your </span><span class="line" data-startTime="826">Timeline, we can identify </span><span class="line" data-startTime="832">what exactly is really </span><span class="line" data-startTime="832">contributing to those. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="835"><span class="speakerName">John McCutchan</span>: Yeah, just like </span><span class="line" data-startTime="835">we were able to find the </span><span class="line" data-startTime="838">call stack for the expensive </span><span class="line" data-startTime="838">forced layout, you're </span><span class="line" data-startTime="842">searching in that same sense for </span><span class="line" data-startTime="842">the needle in the haystack </span><span class="line" data-startTime="845">of why is paint so expensive? </span><span class="line" data-startTime="848">And you can determine that just </span><span class="line" data-startTime="848">by subtracting the paint </span><span class="line" data-startTime="851">time for each element. </span><span class="line" data-startTime="853">And you'll find one element </span><span class="line" data-startTime="853">or a few elements that are </span><span class="line" data-startTime="855">particularly expensive. </span></p>

<p class="speaker"><span class="line" data-starttime="857"><span class="speakerName">Paul Irish</span>: Right. </span> <span class="line" data-startTime="858">I think the last thing we should </span><span class="line" data-startTime="858">add here is why this is </span><span class="line" data-startTime="861">all important. </span> <span class="line" data-startTime="862">One of the big things that comes </span><span class="line" data-startTime="862">up again and again when </span><span class="line" data-startTime="864">it comes to performance and </span><span class="line" data-startTime="864">mobile is that a lot of times, </span><span class="line" data-startTime="870">the mobile web experience isn't </span><span class="line" data-startTime="870">as fast as it could be. </span> <span class="line" data-startTime="873">So this is really critical </span><span class="line" data-startTime="873">to understanding, why? </span><span class="line" data-startTime="876">What is going on? </span><span class="line" data-startTime="876">It might not just be your </span><span class="line" data-startTime="876">JavaScript is taking slow. </span> <span class="line" data-startTime="879">It might be things like paint. </span> <span class="line" data-startTime="880">But you really want to get </span><span class="line" data-startTime="880">an idea of what are your </span><span class="line" data-startTime="882">bottlenecks, so you </span><span class="line" data-startTime="882">can adjust them. </span> <span class="line" data-startTime="885">The speed of scrolling is </span><span class="line" data-startTime="885">something that we didn't </span><span class="line" data-startTime="887">really touch on too much. </span> <span class="line" data-startTime="889">But you can also test this </span><span class="line" data-startTime="889">inside the DevTools by going </span><span class="line" data-startTime="892">into settings and trying </span><span class="line" data-startTime="892">out the FPS meter. </span> <span class="line" data-startTime="896">So this is similar to continuous </span><span class="line" data-startTime="896">page repainting. </span></p>

<p><span class="line" data-startTime="898">It gives you a little meter on </span><span class="line" data-startTime="898">what the frames per second is, </span><span class="line" data-startTime="902">and I can scroll the page </span><span class="line" data-startTime="902">and identify how </span><span class="line" data-startTime="905">well things are doing. </span> <span class="line" data-startTime="907">Maybe something on the page </span><span class="line" data-startTime="907">is really affecting </span><span class="line" data-startTime="909">my scrolling speed. </span> <span class="line" data-startTime="912">But knowing that your page can </span><span class="line" data-startTime="912">scroll fast means a huge </span><span class="line" data-startTime="916">difference to your users when </span><span class="line" data-startTime="916">they're using your site or </span><span class="line" data-startTime="919">application. </span></p>

<p class="speaker"><span class="line" data-starttime="920"><span class="speakerName">John McCutchan</span>: What was the </span><span class="line" data-startTime="920">quote from Facebook where they </span><span class="line" data-startTime="923">went down from 60 frames per </span><span class="line" data-startTime="923">second to 30 frames per second </span><span class="line" data-startTime="927">and saw a significant </span><span class="line" data-startTime="927">drop in their users? </span></p>

<p class="speaker"><span class="line" data-starttime="930"><span class="speakerName">Paul Irish</span>: Yeah. </span><span class="line" data-startTime="930">So having a less fidelity </span><span class="line" data-startTime="930">scrolling experience really </span><span class="line" data-startTime="936">hurts the engagement that </span><span class="line" data-startTime="936">people &mdash; like Facebook, who </span><span class="line" data-startTime="940">ran an experiment and </span><span class="line" data-startTime="940">got data on this &mdash; </span><span class="line" data-startTime="942">have been seeing. </span><span class="line" data-startTime="943">So targeting your scrolling </span><span class="line" data-startTime="943">performance and your start-up </span><span class="line" data-startTime="948">performance on mobile is really </span><span class="line" data-startTime="948">key to holding on to </span><span class="line" data-startTime="951">your user's attention </span><span class="line" data-startTime="951">and engagement. </span></p>

<p class="speaker"><span class="line" data-starttime="953"><span class="speakerName">John McCutchan</span>: Yeah, </span><span class="line" data-startTime="953">and you hit on a </span><span class="line" data-startTime="953">really important point. </span><span class="line" data-startTime="954">It's very important when </span><span class="line" data-startTime="954">doing performance </span><span class="line" data-startTime="956">work to measure first. </span><span class="line" data-startTime="957">You always want to measure and </span><span class="line" data-startTime="957">determine, oh, it wasn't the </span><span class="line" data-startTime="960">scripts that were slow. </span><span class="line" data-startTime="961">It was actually this image </span><span class="line" data-startTime="961">decode or a certain paint. </span><span class="line" data-startTime="965">Once you have that data, you can </span><span class="line" data-startTime="965">take the right action to </span><span class="line" data-startTime="969">make the biggest impact. </span></p>

<p class="speaker"><span class="line" data-starttime="970"><span class="speakerName">Paul Irish</span>: Yeah. </span><span class="line" data-startTime="972">Lastly, we started this up </span><span class="line" data-startTime="972">really fast, so we didn't show </span><span class="line" data-startTime="977">off exactly how we got remote </span><span class="line" data-startTime="977">debugging started. </span><span class="line" data-startTime="981">If you just look up remote </span><span class="line" data-startTime="981">debugging in Chrome DevTools, </span><span class="line" data-startTime="984">this is a recently released </span><span class="line" data-startTime="984">article all about </span><span class="line" data-startTime="987">how to get set up. </span><span class="line" data-startTime="989">Right now, so you'll have to </span><span class="line" data-startTime="989">grab the Android SDK, and </span><span class="line" data-startTime="993">you're going to use a little </span><span class="line" data-startTime="993">tool called ADB that connects </span><span class="line" data-startTime="996">your phone to your machine </span><span class="line" data-startTime="996">over USB and sets </span><span class="line" data-startTime="999">up that data transfer. </span><span class="line" data-startTime="1002">But the instructions </span><span class="line" data-startTime="1002">are all here. </span><span class="line" data-startTime="1003">It's pretty straightforward </span><span class="line" data-startTime="1003">to get started there. </span></p>

<p class="speaker"><span class="line" data-starttime="1005"><span class="speakerName">John McCutchan</span>: Yeah, the </span><span class="line" data-startTime="1005">instructions are on </span><span class="line" data-startTime="1006">developers.google.com, and I </span><span class="line" data-startTime="1006">have an article on HTML5 </span><span class="line" data-startTime="1010">Rocks, which also goes over </span><span class="line" data-startTime="1010">continuous paint mode on </span><span class="line" data-startTime="1013">mobile and getting your </span><span class="line" data-startTime="1013">device connected. </span></p>

<p class="speaker"><span class="line" data-starttime="1015"><span class="speakerName">Paul Irish</span>: Is that out? </span></p>

<p class="speaker"><span class="line" data-starttime="1016"><span class="speakerName">John McCutchan</span>: It's coming </span><span class="line" data-startTime="1016">out next Tuesday. </span></p>

<p class="speaker"><span class="line" data-starttime="1018"><span class="speakerName">Paul Irish</span>: Nice. </span></p>

<p class="speaker"><span class="line" data-starttime="1019"><span class="speakerName">John McCutchan</span>: So by the </span><span class="line" data-startTime="1019">time you watch this &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1021"><span class="speakerName">Paul Irish</span>: So check out </span><span class="line" data-startTime="1021">html5rocks.com, covering </span><span class="line" data-startTime="1025">pretty much all the stuff </span><span class="line" data-startTime="1025">that we just talked </span><span class="line" data-startTime="1026">about in this episode &mdash; </span><span class="line" data-startTime="1028">how to get set up and how to </span><span class="line" data-startTime="1028">identify and improve the </span><span class="line" data-startTime="1031">performance on your mobile web </span><span class="line" data-startTime="1034">applications and mobile websites. </span></p>

<p class="speaker"><span class="line" data-starttime="1035"><span class="speakerName">John McCutchan</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1036"><span class="speakerName">Paul Irish</span>: Cool. </span><span class="line" data-startTime="1037">Thanks very much for </span><span class="line" data-startTime="1037">watching, guys. </span></p>

<p class="speaker"><span class="line" data-starttime="1038"><span class="speakerName">John McCutchan</span>: Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="1039"><span class="speakerName">Paul Irish</span>: Cheers. </span><span class="line" data-startTime="1047">[MUSIC PLAYING] </span></p>