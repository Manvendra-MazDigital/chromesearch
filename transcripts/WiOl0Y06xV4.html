<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>Your browser is talking behind your back by Jake Archibald (#perfmatters at SFHTML5)</h1>

<h2></h2>

<a class="video" href="http://youtu.be/WiOl0Y06xV4">youtu.be/WiOl0Y06xV4</a><div id="transcript"><p><span class="line" data-startTime="8">So, yeah, I'm going to </span><span class="line" data-startTime="8">try out something </span><span class="line" data-startTime="10">a little bit different. </span> <span class="line" data-startTime="12">And it kind of depends </span><span class="line" data-startTime="12">on the Wi-Fi working. </span> <span class="line" data-startTime="14">It's been a bit of </span><span class="line" data-startTime="14">a nightmare. </span> <span class="line" data-startTime="15">It's probably a stupid idea. </span> <span class="line" data-startTime="16">So let's find out. </span> <span class="line" data-startTime="17">We're going to do an </span><span class="line" data-startTime="17">interactive quiz. </span> <span class="line" data-startTime="19">These slides are going </span><span class="line" data-startTime="19">to be interactive. </span> <span class="line" data-startTime="20">So, if you don't have a </span><span class="line" data-startTime="20">web-enabled device in front of </span><span class="line" data-startTime="24">you now, get it in </span><span class="line" data-startTime="24">front of you. </span></p>

<p><span class="line" data-startTime="26">A laptop or a phone. </span> <span class="line" data-startTime="27">It will work on both. </span> <span class="line" data-startTime="28">But make sure you've </span><span class="line" data-startTime="28">got that ready. </span> <span class="line" data-startTime="31">It's a quiz, but it's really </span><span class="line" data-startTime="31">just an excuse to string </span><span class="line" data-startTime="33">together some bits of browser </span><span class="line" data-startTime="33">trivia, to relate it to </span><span class="line" data-startTime="37">performance stuff. </span> <span class="line" data-startTime="38">So what you'll need to do is get </span><span class="line" data-startTime="38">on the Google guest Wi-Fi. </span> <span class="line" data-startTime="41">That's the SSID there. </span> <span class="line" data-startTime="43">And then, if you go to this </span><span class="line" data-startTime="43">lovely URL, which is my laptop </span><span class="line" data-startTime="46">here, so that's 192.168.156.69 </span><span class="line" data-startTime="46">port 3000. </span> <span class="line" data-startTime="51">And there's a clue. </span> <span class="line" data-startTime="52">Yes, it's a node server. </span> <span class="line" data-startTime="53">Fair enough. </span> <span class="line" data-startTime="54">Yeah, if you're watching the </span><span class="line" data-startTime="54">live stream, nah, that's not </span><span class="line" data-startTime="57">going to work. </span> <span class="line" data-startTime="57">Sorry, just play the game using </span><span class="line" data-startTime="57">your mind or whatever. </span> <span class="line" data-startTime="61">Just play with yourself. </span> <span class="line" data-startTime="62">No, wait, doesn't matter. </span> <span class="line" data-startTime="63">OK, just move on. </span> <span class="line" data-startTime="65">Once you go to this URL you'll </span><span class="line" data-startTime="65">be asked to enter a username </span><span class="line" data-startTime="67">and password. </span> <span class="line" data-startTime="69">Just make up any old password. </span> <span class="line" data-startTime="71">It's going to be stored in </span><span class="line" data-startTime="71">plain text on my machine. </span></p>

<p><span class="line" data-startTime="73">So don't use your credit card </span><span class="line" data-startTime="73">number unless you wish to make </span><span class="line" data-startTime="76">a donation. </span> <span class="line" data-startTime="77">All donations are gratefully </span><span class="line" data-startTime="77">received. </span> <span class="line" data-startTime="80">The reason I'm asking for a </span><span class="line" data-startTime="80">password is if you want to </span><span class="line" data-startTime="82">switch devices halfway through, </span><span class="line" data-startTime="82">like if you start </span><span class="line" data-startTime="83">running out of batteries </span><span class="line" data-startTime="83">or whenever. </span> <span class="line" data-startTime="85">You can just enter the username </span><span class="line" data-startTime="85">and password again on </span><span class="line" data-startTime="87">another device and pick up </span><span class="line" data-startTime="87">from where you left off. </span> <span class="line" data-startTime="90">Now I hacked this thing together </span><span class="line" data-startTime="90">quite quickly. </span> <span class="line" data-startTime="94">You could probably break it </span><span class="line" data-startTime="94">by trying to break it. </span> <span class="line" data-startTime="97">So please don't do that. </span> <span class="line" data-startTime="99">I've at least made sure little </span><span class="line" data-startTime="99">Bobby Tables can play. </span> <span class="line" data-startTime="102">So if you're in the room, </span><span class="line" data-startTime="102">you're all right. </span></p>

<p><span class="line" data-startTime="105">Is everyone getting </span><span class="line" data-startTime="105">access to it? </span><span class="line" data-startTime="107">Is it kind of working? </span><span class="line" data-startTime="108">Wow, brilliant! </span><span class="line" data-startTime="109">I want to stress that this quiz </span><span class="line" data-startTime="109">is tough, and I've seen </span><span class="line" data-startTime="111">it catch out people who do </span><span class="line" data-startTime="111">this sort of stuff &mdash; this </span><span class="line" data-startTime="115">minor details of browsers &mdash; </span><span class="line" data-startTime="115">for a living. </span> <span class="line" data-startTime="116">It catches them out. </span> <span class="line" data-startTime="117">So if you're the kind of person </span><span class="line" data-startTime="117">who flips tables over </span><span class="line" data-startTime="120">when you don't win, then maybe </span><span class="line" data-startTime="120">stay away from tables for a </span><span class="line" data-startTime="123">little bit, because this </span><span class="line" data-startTime="123">could get rough. </span> <span class="line" data-startTime="126">OK, I'm going to get this huge, </span><span class="line" data-startTime="126">horrible Helvetica off </span><span class="line" data-startTime="128">the screen. </span> <span class="line" data-startTime="128">Oh, of course, what kind of quiz </span><span class="line" data-startTime="128">would be complete without </span><span class="line" data-startTime="132">a grand prize? </span><span class="line" data-startTime="134">The Chromebook Pixel is Google's </span><span class="line" data-startTime="134">latest laptop, </span><span class="line" data-startTime="137">featuring an i5 1.8 gigahertz </span><span class="line" data-startTime="137">processor, four gigabytes of </span><span class="line" data-startTime="141">RAM, and a touchscreen with a </span><span class="line" data-startTime="141">higher GPI than a MacBook Pro. </span> <span class="line" data-startTime="145">Couldn't get ahold </span><span class="line" data-startTime="145">of one of those. </span> <span class="line" data-startTime="146">Sorry, they wouldn't </span><span class="line" data-startTime="146">give me one. </span></p>

<p><span class="line" data-startTime="149">Never mind. </span> <span class="line" data-startTime="150">But if you do win, then </span><span class="line" data-startTime="150">we will swag you. </span> <span class="line" data-startTime="153">We will swag you good. </span> <span class="line" data-startTime="160">You're quite dazzled by that. </span> <span class="line" data-startTime="162">I thought you might not, so I </span><span class="line" data-startTime="162">thought I'd go all in, like, </span><span class="line" data-startTime="165">yeah, look at that stuff, </span><span class="line" data-startTime="165">a neon thing! </span><span class="line" data-startTime="168">A Glass! </span><span class="line" data-startTime="169">Have you seen one </span><span class="line" data-startTime="169">of those before? </span><span class="line" data-startTime="170">And a cup. </span> <span class="line" data-startTime="170">Brilliant. </span> <span class="line" data-startTime="171">OK. </span> <span class="line" data-startTime="172">The lens flares are </span><span class="line" data-startTime="172">sold separately. </span> <span class="line" data-startTime="173">Sorry about that. </span> <span class="line" data-startTime="174">Let's get started. </span> <span class="line" data-startTime="177">We're going to start </span><span class="line" data-startTime="177">off really simple. </span> <span class="line" data-startTime="179">Image in HTML. </span> <span class="line" data-startTime="180">You've done that before. </span> <span class="line" data-startTime="181">Fair enough. </span> <span class="line" data-startTime="182">OK here is a div. </span> <span class="line" data-startTime="185">The div has a source, </span><span class="line" data-startTime="185">like an image might. </span> <span class="line" data-startTime="189">Which browsers do you think </span><span class="line" data-startTime="189">are going to make </span><span class="line" data-startTime="191">a request for that? </span><span class="line" data-startTime="192">Now on your phones, on your </span><span class="line" data-startTime="192">laptops at the moment it </span><span class="line" data-startTime="195">should have given you the </span><span class="line" data-startTime="195">options for this question. </span> <span class="line" data-startTime="197">If it hasn't, just </span><span class="line" data-startTime="197">hit refresh, and </span><span class="line" data-startTime="199">you should get them. </span></p>

<p><span class="line" data-startTime="200">Now when we're talking about </span><span class="line" data-startTime="200">these browsers, we're talking </span><span class="line" data-startTime="202">about the latest version </span><span class="line" data-startTime="202">of them, the </span><span class="line" data-startTime="204">latest stable release. </span> <span class="line" data-startTime="206">You get one point for each one </span><span class="line" data-startTime="206">you get right, and you will </span><span class="line" data-startTime="209">lose a point for each </span><span class="line" data-startTime="209">one you get wrong. </span> <span class="line" data-startTime="211">So if you say Firefox doesn't </span><span class="line" data-startTime="211">make a request, and it does, </span><span class="line" data-startTime="213">you will lose a point there. </span> <span class="line" data-startTime="216">You can assume the </span><span class="line" data-startTime="216">HTML5 doctype. </span> <span class="line" data-startTime="217">And there's nothing funky in the </span><span class="line" data-startTime="217">head, like a BaseType that </span><span class="line" data-startTime="220">might throw things off. </span> <span class="line" data-startTime="221">There's nothing &mdash; </span><span class="line" data-startTime="222">there's no trickery going on. </span></p>

<p><span class="line" data-startTime="224">And what we're seeing here is a </span><span class="line" data-startTime="224">live read-out of the opinion </span><span class="line" data-startTime="228">of the room. </span> <span class="line" data-startTime="229">So the needle will swing one </span><span class="line" data-startTime="229">way when you think yes, it </span><span class="line" data-startTime="231">will swing the other way when </span><span class="line" data-startTime="231">you think no, though the </span><span class="line" data-startTime="233">direction is randomized for each </span><span class="line" data-startTime="233">question so you cannot </span><span class="line" data-startTime="236">just vote along with the room. </span> <span class="line" data-startTime="238">You will be probably getting </span><span class="line" data-startTime="238">it wrong if you do that. </span> <span class="line" data-startTime="241">Right, OK that's probably </span><span class="line" data-startTime="241">enough time. </span> <span class="line" data-startTime="243">If you haven't answered yet, </span><span class="line" data-startTime="243">answer quickly because I'm </span><span class="line" data-startTime="245">going to close the question </span><span class="line" data-startTime="245">in three, two, one. </span> <span class="line" data-startTime="248">And OK, so the needle's kind of </span><span class="line" data-startTime="248">going roughly in the middle </span><span class="line" data-startTime="250">which means, collectively </span><span class="line" data-startTime="250">you don't have a clue. </span></p>

<p><span class="line" data-startTime="252">Well done, everyone. </span> <span class="line" data-startTime="254">You're kind of thinking yes </span><span class="line" data-startTime="254">in, well, most of the </span><span class="line" data-startTime="257">browsers, kind of, more strongly </span><span class="line" data-startTime="257">in Internet Explorer. </span> <span class="line" data-startTime="260">It's almost like you've </span><span class="line" data-startTime="260">been bitten by that </span><span class="line" data-startTime="261">browser in the past. </span> <span class="line" data-startTime="263">The answer is, of </span><span class="line" data-startTime="263">course, none. </span> <span class="line" data-startTime="267">Not in any of the browsers. </span> <span class="line" data-startTime="269">None of them going to do that. </span> <span class="line" data-startTime="270">Well done, the people </span><span class="line" data-startTime="270">who got it right. </span> <span class="line" data-startTime="272">Four people by the sounds </span><span class="line" data-startTime="272">of things, actually. </span> <span class="line" data-startTime="273">Well done. </span> <span class="line" data-startTime="274">But this is not as </span><span class="line" data-startTime="274">mad as it seems. </span> <span class="line" data-startTime="277">So in XHTML2 you </span><span class="line" data-startTime="277">could do this. </span> <span class="line" data-startTime="279">You could have any elements, </span><span class="line" data-startTime="279">such as a div with a source, </span><span class="line" data-startTime="282">and the browser would replace </span><span class="line" data-startTime="282">the element with the content </span><span class="line" data-startTime="285">of that resource. </span> <span class="line" data-startTime="285">And it was kind of a good </span><span class="line" data-startTime="285">idea, or it was the </span><span class="line" data-startTime="287">start of a good idea. </span></p>

<p><span class="line" data-startTime="288">Because you could take rich </span><span class="line" data-startTime="288">semantic content, and replace </span><span class="line" data-startTime="291">it with an image. </span> <span class="line" data-startTime="291">It may be Alt attribute </span><span class="line" data-startTime="291">completely redundant. </span> <span class="line" data-startTime="294">Pretty cool. </span> <span class="line" data-startTime="295">But XHTML2 had the backwoods </span><span class="line" data-startTime="295">incompatibility issues, and it </span><span class="line" data-startTime="299">carried with it XML's draconian </span><span class="line" data-startTime="299">error handling. </span> <span class="line" data-startTime="302">And once you invite XML into </span><span class="line" data-startTime="302">your home, it XML's </span><span class="line" data-startTime="304">everything. </span> <span class="line" data-startTime="305">It XMLs all over the carpet, </span><span class="line" data-startTime="305">up the walls. </span> <span class="line" data-startTime="307">And in the same way that Smurfs </span><span class="line" data-startTime="307">stick the word Smurf in </span><span class="line" data-startTime="311">front of everything to make it a </span><span class="line" data-startTime="311">Smurf thing, XML sticks X at </span><span class="line" data-startTime="314">the start of everything. </span> <span class="line" data-startTime="315">You don't want HTML. </span> <span class="line" data-startTime="316">You want XHTML. </span> <span class="line" data-startTime="318">You don't want Frames. </span> <span class="line" data-startTime="319">You want XFrames. </span> <span class="line" data-startTime="321">You don't want Forms. </span> <span class="line" data-startTime="322">You can have XForms. </span></p>

<p><span class="line" data-startTime="325">If you let XML take over your </span><span class="line" data-startTime="325">life, it will turn your </span><span class="line" data-startTime="328">boyfriend or girlfriend into an </span><span class="line" data-startTime="328">exboyfriend or girlfriend. </span> <span class="line" data-startTime="332">And XML's cool with that because </span><span class="line" data-startTime="332">you don't need a </span><span class="line" data-startTime="334">partner because you've got XML </span><span class="line" data-startTime="334">to look after you now. </span> <span class="line" data-startTime="337">It seems fitting that in </span><span class="line" data-startTime="337">2009 XHTML2 became an </span><span class="line" data-startTime="340">ex-specification, and we didn't </span><span class="line" data-startTime="340">care about it anymore. </span> <span class="line" data-startTime="343">And no browser's ever </span><span class="line" data-startTime="343">implemented source on </span><span class="line" data-startTime="346">something like a div. </span> <span class="line" data-startTime="348">But what about this. </span> <span class="line" data-startTime="350">We've got an image element. </span> <span class="line" data-startTime="350">It's got a source. </span> <span class="line" data-startTime="352">Which browsers are going </span><span class="line" data-startTime="352">to make a request? </span><span class="line" data-startTime="353">Now, notice that I have spelled </span><span class="line" data-startTime="353">"image" incorrectly in </span><span class="line" data-startTime="356">terms of HTML. </span> <span class="line" data-startTime="358">Does the browser treat this </span><span class="line" data-startTime="358">like an unknown element? </span><span class="line" data-startTime="360">Or does it do something </span><span class="line" data-startTime="360">special? </span><span class="line" data-startTime="362">I mean, we saw XML was </span><span class="line" data-startTime="362">too draconian, too </span><span class="line" data-startTime="364">strict for the web. </span> <span class="line" data-startTime="365">But is HTML this lenient, or are </span><span class="line" data-startTime="365">the browsers more lenient </span><span class="line" data-startTime="369">than the spec in this case? </span><span class="line" data-startTime="371">So we're seeing you're kind of </span><span class="line" data-startTime="371">leaning towards one way in </span><span class="line" data-startTime="374">pretty much all the browsers. </span></p>

<p><span class="line" data-startTime="375">Ah, you're changing your mind, </span><span class="line" data-startTime="375">going back into the middle. </span> <span class="line" data-startTime="377">We're going to keep this </span><span class="line" data-startTime="377">moving quickly. </span> <span class="line" data-startTime="378">So just make a decision. </span> <span class="line" data-startTime="380">I'm going to close the question </span><span class="line" data-startTime="380">in three, two, one, </span><span class="line" data-startTime="383">and it's closed. </span> <span class="line" data-startTime="384">So, you're kind of thinking, </span><span class="line" data-startTime="384">pretty much </span><span class="line" data-startTime="386">yes in all the browsers. </span> <span class="line" data-startTime="388">And you would be absolutely </span><span class="line" data-startTime="388">correct. </span> <span class="line" data-startTime="390">In all of them, it will make </span><span class="line" data-startTime="390">a request for the image. </span> <span class="line" data-startTime="393">I know in these situations it </span><span class="line" data-startTime="393">doesn't have to show the </span><span class="line" data-startTime="395">image, we're just talking </span><span class="line" data-startTime="395">about making a request. </span> <span class="line" data-startTime="396">But in this case, all of the </span><span class="line" data-startTime="396">browsers will actually show </span><span class="line" data-startTime="399">the image as well. </span> <span class="line" data-startTime="401">You see, back in the past &mdash; </span><span class="line" data-startTime="403">I don't know if you remember </span><span class="line" data-startTime="403">the past &mdash; but one browser </span><span class="line" data-startTime="405">decided that I-M-G was too </span><span class="line" data-startTime="405">difficult for developers to </span><span class="line" data-startTime="409">remember, and that image </span><span class="line" data-startTime="409">should work as well. </span> <span class="line" data-startTime="412">And we've been stuck with </span><span class="line" data-startTime="412">that ever since. </span></p>

<p><span class="line" data-startTime="414">Now which browser vendor </span><span class="line" data-startTime="414">do you think we have </span><span class="line" data-startTime="416">to blame for this? </span><span class="line" data-startTime="418">Oh yes, of course, it is </span><span class="line" data-startTime="418">Mosaic, back in 1993. </span> <span class="line" data-startTime="424">The people who invented </span><span class="line" data-startTime="424">the image tag. </span> <span class="line" data-startTime="425">They did this. </span> <span class="line" data-startTime="426">And a study in 2005 showed that </span><span class="line" data-startTime="426">like 0.2% of pages were </span><span class="line" data-startTime="430">using this incorrectly spelled </span><span class="line" data-startTime="430">image, so all the browsers </span><span class="line" data-startTime="433">have to support it for pretty </span><span class="line" data-startTime="433">much forevermore. </span> <span class="line" data-startTime="436">The World WG recognized this </span><span class="line" data-startTime="436">and added it to the spec. </span> <span class="line" data-startTime="438">This is the pausing spec, and </span><span class="line" data-startTime="438">you can see there, start tag </span><span class="line" data-startTime="441">if it's image, change the </span><span class="line" data-startTime="441">token names to img and </span><span class="line" data-startTime="444">reprocess it. </span> <span class="line" data-startTime="445">Don't ask. </span> <span class="line" data-startTime="447">But recently I-M-A-G-E was </span><span class="line" data-startTime="447">using a clever hack. </span></p>

<p><span class="line" data-startTime="452">Alexie10 came up with this. </span> <span class="line" data-startTime="454">So you would use this on your </span><span class="line" data-startTime="454">page instead of an image, this </span><span class="line" data-startTime="457">block of sort of svg with </span><span class="line" data-startTime="457">an image inside it. </span> <span class="line" data-startTime="460">And what it'll do is it'll throw </span><span class="line" data-startTime="460">and svg in browsers that </span><span class="line" data-startTime="462">support svg, and it'll do </span><span class="line" data-startTime="462">a png in other browsers. </span> <span class="line" data-startTime="467">So a modern browser will </span><span class="line" data-startTime="467">parse it like this. </span> <span class="line" data-startTime="469">Ah, OK, that's an svg element. </span> <span class="line" data-startTime="472">OK, it's going to </span><span class="line" data-startTime="472">be 100 by 100. </span> <span class="line" data-startTime="474">That's fine. </span> <span class="line" data-startTime="475">Oh, and this is an svg image, </span><span class="line" data-startTime="475">because in svg, image elements </span><span class="line" data-startTime="478">are spelled fully, I-M-A-G-E. </span> <span class="line" data-startTime="478">Oh, it's got </span><span class="line" data-startTime="481">a width and a height. </span> <span class="line" data-startTime="482">That's great. </span> <span class="line" data-startTime="483">And I'm going to load img.svg. </span></p>

<p><span class="line" data-startTime="486">Because this is how you define </span><span class="line" data-startTime="486">the source for an image in svg </span><span class="line" data-startTime="489">because it's part of XML. </span> <span class="line" data-startTime="491">And why have a link when </span><span class="line" data-startTime="491">you can have an XLink? </span><span class="line" data-startTime="496">And then it sees this, </span><span class="line" data-startTime="496">and it goes pfffft. </span> <span class="line" data-startTime="497">That means absolutely nothing </span><span class="line" data-startTime="497">to svg images, so I'm </span><span class="line" data-startTime="501">going to ignore it. </span> <span class="line" data-startTime="501">Whereas an older browser, maybe </span><span class="line" data-startTime="501">Android2, IE8, they'll </span><span class="line" data-startTime="507">parse it like this, [GRUNTS], I </span><span class="line" data-startTime="507">mean, going to ignore that. </span> <span class="line" data-startTime="512">Oh look, the developer </span><span class="line" data-startTime="512">spelled image wrong. </span> <span class="line" data-startTime="514">OK I'm going to use that. </span> <span class="line" data-startTime="516">It's 100 by 100. </span> <span class="line" data-startTime="518">Pffft, Woah. </span> <span class="line" data-startTime="522">Developer got high. </span> <span class="line" data-startTime="523">I'm going to ignore that. </span> <span class="line" data-startTime="524">And I'm going to load img.png. </span> <span class="line" data-startTime="526">It's great, so you've got this </span><span class="line" data-startTime="526">kind that doesn't require </span><span class="line" data-startTime="528">JavaScript. </span> <span class="line" data-startTime="528">And you're switching between </span><span class="line" data-startTime="528">the two image formats. </span> <span class="line" data-startTime="530">So we got kind of excited </span><span class="line" data-startTime="530">about it. </span></p>

<p><span class="line" data-startTime="532">And we started tweeting </span><span class="line" data-startTime="532">about it. </span> <span class="line" data-startTime="534">The mistake we made is </span><span class="line" data-startTime="534">we didn't test it. </span> <span class="line" data-startTime="537">So a few of us started testing </span><span class="line" data-startTime="537">it and we found something </span><span class="line" data-startTime="540">interesting. </span> <span class="line" data-startTime="542">All of these browsers </span><span class="line" data-startTime="542">spot svg. </span> <span class="line" data-startTime="544">Which ones download </span><span class="line" data-startTime="544">both images? </span><span class="line" data-startTime="547">They shouldn't. </span> <span class="line" data-startTime="548">And I'll give you a clue. </span> <span class="line" data-startTime="550">It's doesn't go one way or the </span><span class="line" data-startTime="550">other for all browsers. </span> <span class="line" data-startTime="552">Some of the browser are </span><span class="line" data-startTime="552">doing it differently. </span> <span class="line" data-startTime="554">So you're going to have to pick </span><span class="line" data-startTime="554">the browser or browsers </span><span class="line" data-startTime="556">that you think get this </span><span class="line" data-startTime="556">wrong because not all </span><span class="line" data-startTime="558">of them get it wrong. </span></p>

<p><span class="line" data-startTime="560">I'm going to close </span><span class="line" data-startTime="560">the question &mdash; </span><span class="line" data-startTime="561">woah, oh dear &mdash; </span><span class="line" data-startTime="565">oh no, no, OK, we've got some </span><span class="line" data-startTime="565">IE fans in the room. </span> <span class="line" data-startTime="568">Closing the question </span><span class="line" data-startTime="568">in three, two, one. </span> <span class="line" data-startTime="572">OK, so you're edging towards </span><span class="line" data-startTime="572">Internet Explorer being the </span><span class="line" data-startTime="575">bad guy here. </span> <span class="line" data-startTime="575">And in this case you </span><span class="line" data-startTime="575">are correct. </span> <span class="line" data-startTime="577">As a group you're doing </span><span class="line" data-startTime="577">quite well. </span> <span class="line" data-startTime="580">You should all form a company </span><span class="line" data-startTime="580">of something. </span> <span class="line" data-startTime="581">It's great. </span> <span class="line" data-startTime="582">So all the browsers here, all </span><span class="line" data-startTime="582">the latest versions, they have </span><span class="line" data-startTime="586">two parsers inside. </span> <span class="line" data-startTime="589">Relatively new thing for </span><span class="line" data-startTime="589">browsers to have. </span> <span class="line" data-startTime="590">But these ones, they </span><span class="line" data-startTime="590">all have it. </span></p>

<p><span class="line" data-startTime="592">One parser runs ahead as quickly </span><span class="line" data-startTime="592">as it can and picks up </span><span class="line" data-startTime="595">things that it should download, </span><span class="line" data-startTime="595">like images, </span><span class="line" data-startTime="597">scripts, all of that </span><span class="line" data-startTime="597">sort of stuff. </span> <span class="line" data-startTime="599">The other parser does the heavy </span><span class="line" data-startTime="599">lifting, like building </span><span class="line" data-startTime="601">that the DOM tree and passing </span><span class="line" data-startTime="601">scripts and all that stuff. </span> <span class="line" data-startTime="604">This has a surprisingly large </span><span class="line" data-startTime="604">benefit &mdash; you know, Illya was </span><span class="line" data-startTime="607">posting about this. </span> <span class="line" data-startTime="608">This study that was done </span><span class="line" data-startTime="608">through 2000 sites. </span> <span class="line" data-startTime="610">And it had a 20% speed </span><span class="line" data-startTime="610">improvement. </span> <span class="line" data-startTime="612">That's pretty incredible. </span> <span class="line" data-startTime="613">That's time to get to </span><span class="line" data-startTime="613">DOM content loaded. </span></p>

<p><span class="line" data-startTime="616">In order to be quick, this of a </span><span class="line" data-startTime="616">pre-parser, this first one, </span><span class="line" data-startTime="619">is a little bit stupid. </span> <span class="line" data-startTime="621">In Internet Explorer, it's </span><span class="line" data-startTime="621">a little bit too stupid. </span> <span class="line" data-startTime="623">And it kind of gets </span><span class="line" data-startTime="623">over excited. </span> <span class="line" data-startTime="625">And it's like, I'm going to show </span><span class="line" data-startTime="625">a png, I'm going to show </span><span class="line" data-startTime="627">a png, yep, here I go, I'm going </span><span class="line" data-startTime="627">to show png, here is </span><span class="line" data-startTime="630">goes, no, actually no, it's </span><span class="line" data-startTime="630">an svg, never mind. </span> <span class="line" data-startTime="636">It kind of sees the image but it </span><span class="line" data-startTime="636">misses the svg context, so </span><span class="line" data-startTime="639">it picks up the wrong source. </span> <span class="line" data-startTime="641">And then the main parser comes </span><span class="line" data-startTime="641">along and goes pfft, </span><span class="line" data-startTime="643">what are you doing? </span><span class="line" data-startTime="644">No, this is as svg thing, and </span><span class="line" data-startTime="644">downloads the correct thing. </span> <span class="line" data-startTime="647">The moral here is, don't just &mdash; </span><span class="line" data-startTime="647">like, if there's some </span><span class="line" data-startTime="649">kind of performance advice </span><span class="line" data-startTime="649">going on, don't just </span><span class="line" data-startTime="651">blindly trust it. </span> <span class="line" data-startTime="653">In Chrome, we say, use </span><span class="line" data-startTime="653">tools not rules. </span></p>

<p><span class="line" data-startTime="656">And it rhymes so it must </span><span class="line" data-startTime="656">be true, right? </span><span class="line" data-startTime="659">So be on the look &mdash; but </span><span class="line" data-startTime="659">also be on the lookout </span><span class="line" data-startTime="660">for existing tests. </span> <span class="line" data-startTime="661">If someone's done the legwork </span><span class="line" data-startTime="661">for you, and you can just sort </span><span class="line" data-startTime="664">of run that test yourself. </span> <span class="line" data-startTime="666">One of my favorite stories in </span><span class="line" data-startTime="666">science involves this guy, </span><span class="line" data-startTime="668">August Weismann. </span> <span class="line" data-startTime="670">He wanted to disprove that </span><span class="line" data-startTime="670">evolution was learned. </span> <span class="line" data-startTime="673">Like, if you had some kind of </span><span class="line" data-startTime="673">life experiences, that that </span><span class="line" data-startTime="675">would be passed to </span><span class="line" data-startTime="675">your children. </span> <span class="line" data-startTime="677">He wanted to disprove that was a </span><span class="line" data-startTime="677">thing, because it wasn't the </span><span class="line" data-startTime="680">Darwin evolution. </span> <span class="line" data-startTime="681">So he took some mice, and he cut </span><span class="line" data-startTime="681">their tails off, and bred </span><span class="line" data-startTime="684">them together. </span></p>

<p><span class="line" data-startTime="685">And then the next generation, </span><span class="line" data-startTime="685">he cut their tails off and </span><span class="line" data-startTime="687">bred them together as well. </span> <span class="line" data-startTime="688">And the theory was, well if </span><span class="line" data-startTime="688">evolution is learned, we're </span><span class="line" data-startTime="691">going to start getting mice </span><span class="line" data-startTime="691">born without tails. </span> <span class="line" data-startTime="694">And he was quite a way into this </span><span class="line" data-startTime="694">research, until someone </span><span class="line" data-startTime="696">went, ah you do realize, August, </span><span class="line" data-startTime="696">that the Jewish people </span><span class="line" data-startTime="699">have been carrying out </span><span class="line" data-startTime="699">this test a lot </span><span class="line" data-startTime="700">longer than you have. </span> <span class="line" data-startTime="702">[LAUGHTER] </span><span class="line" data-startTime="705">And he was like, [INAUDIBLE]. </span> <span class="line" data-startTime="706">Fair enough, I'll just. </span> <span class="line" data-startTime="707">I'll &mdash; </span><span class="line" data-startTime="707">Yeah, OK, job done. </span> <span class="line" data-startTime="708">So yeah, don't reinvent the </span><span class="line" data-startTime="708">wheel unless you want to learn </span><span class="line" data-startTime="711">a lot about wheels. </span> <span class="line" data-startTime="711">And that could be </span><span class="line" data-startTime="711">cool sometimes. </span></p>

<p><span class="line" data-startTime="712">OK, what about this? </span><span class="line" data-startTime="714">I've got an image. </span> <span class="line" data-startTime="715">It's inside a div that </span><span class="line" data-startTime="715">is display none. </span> <span class="line" data-startTime="716">This image is not going </span><span class="line" data-startTime="716">to be displayed. </span> <span class="line" data-startTime="719">But which browsers are going </span><span class="line" data-startTime="719">to request the URL and </span><span class="line" data-startTime="722">download the image regardless? </span><span class="line" data-startTime="724">So, we'll do it quickly. </span> <span class="line" data-startTime="726">We're going to go for &mdash; oh, are </span><span class="line" data-startTime="726">we starting to think IE is </span><span class="line" data-startTime="728">going to do some different? </span><span class="line" data-startTime="729">People are thinking Firefox </span><span class="line" data-startTime="729">is going to </span><span class="line" data-startTime="730">do something different. </span> <span class="line" data-startTime="731">I'm going to close the question </span><span class="line" data-startTime="731">in three, two, one. </span> <span class="line" data-startTime="735">There we go. </span> <span class="line" data-startTime="736">The countdown's going to old, </span><span class="line" data-startTime="736">but I'm going to do it for </span><span class="line" data-startTime="737">every question anyway. </span> <span class="line" data-startTime="738">OK, so we're sort of </span><span class="line" data-startTime="738">saying, yes in IE. </span> <span class="line" data-startTime="740">Maybe no in Safari. </span></p>

<p><span class="line" data-startTime="741">No in Chrome. </span> <span class="line" data-startTime="742">And meh, maybe in Firefox. </span> <span class="line" data-startTime="744">The answer is yes </span><span class="line" data-startTime="744">in all of them. </span> <span class="line" data-startTime="746">They are all going to download </span><span class="line" data-startTime="746">the image in this case. </span> <span class="line" data-startTime="750">And this behavior is part of </span><span class="line" data-startTime="750">the specification as well. </span> <span class="line" data-startTime="753">In the beginning, there </span><span class="line" data-startTime="753">is nothing. </span> <span class="line" data-startTime="754">Right? </span><span class="line" data-startTime="755">And then the browser gets </span><span class="line" data-startTime="755">sprayed with HTML text. </span> <span class="line" data-startTime="759">And then from that, it's going </span><span class="line" data-startTime="759">to construct this tree of </span><span class="line" data-startTime="761">elements that, as Paul </span><span class="line" data-startTime="761">was explaining </span><span class="line" data-startTime="763">earlier, is the DOM. </span> <span class="line" data-startTime="765">When one of these things is </span><span class="line" data-startTime="765">constructed, the constructor </span><span class="line" data-startTime="768">steps for that elements </span><span class="line" data-startTime="768">are run. </span> <span class="line" data-startTime="770">And if we look at the spec for </span><span class="line" data-startTime="770">image, it's quite complicated, </span><span class="line" data-startTime="772">for you know when you'd think </span><span class="line" data-startTime="772">it'd be a very simple thing. </span></p>

<p><span class="line" data-startTime="774">But this is the image stuff. </span> <span class="line" data-startTime="775">They all run synchronously. </span> <span class="line" data-startTime="776">Step 14, fetch the image. </span> <span class="line" data-startTime="779">No mention of CSS. </span> <span class="line" data-startTime="780">No mention of anything </span><span class="line" data-startTime="780">like that. </span> <span class="line" data-startTime="781">And that's good in some ways, </span><span class="line" data-startTime="781">because it means the browser </span><span class="line" data-startTime="783">can start the image downloading </span><span class="line" data-startTime="784">before the CSS is there. </span> <span class="line" data-startTime="786">The pre-parser can </span><span class="line" data-startTime="786">deal with it. </span> <span class="line" data-startTime="788">Downside is, well we couldn't </span><span class="line" data-startTime="788">do polyfills to things like </span><span class="line" data-startTime="791">responsive images because by the </span><span class="line" data-startTime="791">time JavaScript gets there </span><span class="line" data-startTime="794">to do something clever, the </span><span class="line" data-startTime="794">images already started </span><span class="line" data-startTime="797">downloading. </span> <span class="line" data-startTime="797">You're just going to trigger </span><span class="line" data-startTime="797">a second request by </span><span class="line" data-startTime="799">changing the source. </span></p>

<p><span class="line" data-startTime="801">This won't be a problem </span><span class="line" data-startTime="801">in the future. </span> <span class="line" data-startTime="803">The resources, priority spec has </span><span class="line" data-startTime="803">this postpone attribute, </span><span class="line" data-startTime="807">which means the image won't </span><span class="line" data-startTime="807">download if it's display none. </span> <span class="line" data-startTime="809">And it allows the browser to </span><span class="line" data-startTime="809">avoid downloading it even if </span><span class="line" data-startTime="813">it's just out-of-view </span><span class="line" data-startTime="813">on the page as well. </span> <span class="line" data-startTime="814">So you don't have to rely on </span><span class="line" data-startTime="814">these heavy scroll events for </span><span class="line" data-startTime="817">image lazy loading. </span> <span class="line" data-startTime="820">OK, what if we're using CSS? </span><span class="line" data-startTime="821">Does visibility matter then? </span><span class="line" data-startTime="823">Once again that image is not </span><span class="line" data-startTime="823">going to display because it's </span><span class="line" data-startTime="825">inside an element that </span><span class="line" data-startTime="825">is display none. </span></p>

<p><span class="line" data-startTime="827">We saw here that the image would </span><span class="line" data-startTime="827">download in this case. </span> <span class="line" data-startTime="831">But what about in CSS? </span><span class="line" data-startTime="833">Is it going to do something </span><span class="line" data-startTime="833">different? </span><span class="line" data-startTime="834">Does visibility matter here? </span><span class="line" data-startTime="835">Some of the browsers going to </span><span class="line" data-startTime="835">do something different? </span><span class="line" data-startTime="838">I'm going to close the question </span><span class="line" data-startTime="838">in three, two &mdash; </span><span class="line" data-startTime="842">ooh, going right </span><span class="line" data-startTime="842">to the middle. </span> <span class="line" data-startTime="843">Collectively, once </span><span class="line" data-startTime="843">again, no clue. </span> <span class="line" data-startTime="845">Don't worry about it, guys. </span> <span class="line" data-startTime="846">It's quite difficult. </span> <span class="line" data-startTime="848">What's the answer? </span><span class="line" data-startTime="850">None of the browsers will </span><span class="line" data-startTime="850">make a request here. </span> <span class="line" data-startTime="852">And that's kind of </span><span class="line" data-startTime="852">cool, right? </span><span class="line" data-startTime="853">We want to be able to rely </span><span class="line" data-startTime="853">on that kind of behavior. </span> <span class="line" data-startTime="857">Slightly different one. </span> <span class="line" data-startTime="858">What about now? </span><span class="line" data-startTime="859">Same thing again. </span></p>

<p><span class="line" data-startTime="860">The image is not going to be </span><span class="line" data-startTime="860">rendered because it's on a </span><span class="line" data-startTime="861">display none element. </span> <span class="line" data-startTime="862">But it's not inside a display </span><span class="line" data-startTime="862">none element, It is on a </span><span class="line" data-startTime="865">display none element. </span> <span class="line" data-startTime="867">So we saw it was, the browsers </span><span class="line" data-startTime="867">weren't downloading before. </span> <span class="line" data-startTime="869">What about now? </span><span class="line" data-startTime="870">Do the browsers do something </span><span class="line" data-startTime="870">different? </span><span class="line" data-startTime="873">Do they all download it? </span><span class="line" data-startTime="874">Do they all not download it? </span><span class="line" data-startTime="875">I mean, they don't need it. </span> <span class="line" data-startTime="876">It's not going to be rendered. </span> <span class="line" data-startTime="877">I'm going to close </span><span class="line" data-startTime="877">the question in </span><span class="line" data-startTime="878">three, two, one, done. </span></p>

<p><span class="line" data-startTime="882">All right, we're saying no in </span><span class="line" data-startTime="882">pretty much every browser. </span> <span class="line" data-startTime="887">Most browsers will download </span><span class="line" data-startTime="887">it in this case. </span> <span class="line" data-startTime="889">Only Firefox won't. </span> <span class="line" data-startTime="891">So what's going on here? </span><span class="line" data-startTime="893">Well once you've got some DOM </span><span class="line" data-startTime="893">elements on the page, as Paul </span><span class="line" data-startTime="896">was explaining before, they're </span><span class="line" data-startTime="896">going to get their styles </span><span class="line" data-startTime="898">calculated where the browser </span><span class="line" data-startTime="898">goes to see which of your </span><span class="line" data-startTime="901">cascaded styles of your font </span><span class="line" data-startTime="901">tags, if you're from the '90s, </span><span class="line" data-startTime="904">which styles apply to each </span><span class="line" data-startTime="904">element individually? </span><span class="line" data-startTime="908">But not all &mdash; not everything </span><span class="line" data-startTime="908">gets its style calculated. </span> <span class="line" data-startTime="910">So you've got these two elements </span><span class="line" data-startTime="910">at the bottom. </span> <span class="line" data-startTime="912">No style calculation. </span></p>

<p><span class="line" data-startTime="913">And the reason is, this div at </span><span class="line" data-startTime="913">the top here turned out to be </span><span class="line" data-startTime="916">display none. </span> <span class="line" data-startTime="917">And the browsers shortcuts </span><span class="line" data-startTime="917">because it knows the styles of </span><span class="line" data-startTime="919">these elements have no impact on </span><span class="line" data-startTime="919">the rendering of the page. </span> <span class="line" data-startTime="922">So it doesn't bother. </span> <span class="line" data-startTime="923">It takes a shortcut. </span> <span class="line" data-startTime="924">So if these have background </span><span class="line" data-startTime="924">images, the browser never </span><span class="line" data-startTime="926">finds out about it. </span> <span class="line" data-startTime="928">If the display none element has </span><span class="line" data-startTime="928">a background image, the </span><span class="line" data-startTime="930">browser does find </span><span class="line" data-startTime="930">out about it. </span> <span class="line" data-startTime="932">And that's why we see most </span><span class="line" data-startTime="932">browsers downloading it at </span><span class="line" data-startTime="934">that point. </span></p>

<p><span class="line" data-startTime="935">Firefox is a little </span><span class="line" data-startTime="935">bit smarter here. </span> <span class="line" data-startTime="937">But if you use something like </span><span class="line" data-startTime="937">visibility hidden or opacity </span><span class="line" data-startTime="939">zero, Firefox will be </span><span class="line" data-startTime="939">downloading as well. </span> <span class="line" data-startTime="943">Who's getting it right </span><span class="line" data-startTime="943">according to the </span><span class="line" data-startTime="944">specification? </span><span class="line" data-startTime="946">Everyone is! </span><span class="line" data-startTime="947">Great! </span><span class="line" data-startTime="947">The specification says </span><span class="line" data-startTime="947">absolutely nothing about this. </span> <span class="line" data-startTime="949">There's this tiny note that says </span><span class="line" data-startTime="949">the browser may optimize. </span> <span class="line" data-startTime="952">It may avoid downloading images </span><span class="line" data-startTime="952">that are out of view, </span><span class="line" data-startTime="955">even if there's another </span><span class="line" data-startTime="955">element over the top. </span> <span class="line" data-startTime="957">The browser may avoid </span><span class="line" data-startTime="957">downloading at this point. </span></p>

<p><span class="line" data-startTime="960">No browsers are that </span><span class="line" data-startTime="960">smart yet. </span> <span class="line" data-startTime="962">This kind of freedom in the </span><span class="line" data-startTime="962">specifications is great </span><span class="line" data-startTime="965">because it means the browser can </span><span class="line" data-startTime="965">do what's right given the </span><span class="line" data-startTime="968">situation, and the kind of </span><span class="line" data-startTime="968">device, and the network </span><span class="line" data-startTime="970">connectivity, et cetera, </span><span class="line" data-startTime="970">et cetera. </span> <span class="line" data-startTime="972">But it's also kind of scary </span><span class="line" data-startTime="972">because this is where you're </span><span class="line" data-startTime="973">going to get the browsers </span><span class="line" data-startTime="973">doing different </span><span class="line" data-startTime="975">things, as we saw here. </span> <span class="line" data-startTime="977">But I kind of like that. </span> <span class="line" data-startTime="978">I think that's the diversity </span><span class="line" data-startTime="978">that makes the web great. </span> <span class="line" data-startTime="980">It's not one company </span><span class="line" data-startTime="980">driving forward </span><span class="line" data-startTime="982">with its own interests. </span></p>

<p><span class="line" data-startTime="983">It's lots of companies driving </span><span class="line" data-startTime="983">forward in different </span><span class="line" data-startTime="986">directions. </span> <span class="line" data-startTime="987">And we get this sort of car </span><span class="line" data-startTime="987">crash, but a car crash with a </span><span class="line" data-startTime="989">happy ending. </span> <span class="line" data-startTime="991">And that web that </span><span class="line" data-startTime="991">we have today. </span> <span class="line" data-startTime="995">So if you want to avoid </span><span class="line" data-startTime="995">downloading backgrounds in </span><span class="line" data-startTime="997">CSS, hiding the element </span><span class="line" data-startTime="997">isn't enough. </span> <span class="line" data-startTime="999">You need to put it inside </span><span class="line" data-startTime="999">something that is hidden so </span><span class="line" data-startTime="1002">the virus won't find &mdash; </span><span class="line" data-startTime="1004">it won't even look </span><span class="line" data-startTime="1004">at that element. </span> <span class="line" data-startTime="1005">But when you do that, realize </span><span class="line" data-startTime="1005">you are relying on just what </span><span class="line" data-startTime="1007">the browsers do. </span> <span class="line" data-startTime="1008">It is not specs' behavior. </span> <span class="line" data-startTime="1009">The only surefire way is, don't </span><span class="line" data-startTime="1009">let the browser find out </span><span class="line" data-startTime="1012">about the background image. </span></p>

<p><span class="line" data-startTime="1013">Take the class off until </span><span class="line" data-startTime="1013">you need it. </span> <span class="line" data-startTime="1015">Or don't put the element in </span><span class="line" data-startTime="1015">the DOM until you need it. </span> <span class="line" data-startTime="1018">All right, things have been </span><span class="line" data-startTime="1018">quite easy so far. </span> <span class="line" data-startTime="1020">Let's get JavaScript involved. </span> <span class="line" data-startTime="1023">What do you think? </span><span class="line" data-startTime="1025">Creating an image elements &mdash; </span><span class="line" data-startTime="1025">once again I've </span><span class="line" data-startTime="1027">spelled image wrong &mdash; </span><span class="line" data-startTime="1028">I'm applying a source to it. </span> <span class="line" data-startTime="1029">It is not in the document. </span> <span class="line" data-startTime="1031">So it's not going to </span><span class="line" data-startTime="1031">be displayed yet. </span> <span class="line" data-startTime="1033">I have it spelled wrong. </span> <span class="line" data-startTime="1035">We saw the browsers correcting </span><span class="line" data-startTime="1035">for that before. </span> <span class="line" data-startTime="1037">But that was in HTML. </span> <span class="line" data-startTime="1039">What about in the DOM? </span><span class="line" data-startTime="1040">Is it going to be different? </span><span class="line" data-startTime="1042">I'm going to close the question </span><span class="line" data-startTime="1042">in three, two, one, </span><span class="line" data-startTime="1046">all right, done. </span> <span class="line" data-startTime="1048">OK so we're kind of edging </span><span class="line" data-startTime="1048">towards yes in most browsers. </span> <span class="line" data-startTime="1053">It is yes in most browsers, </span><span class="line" data-startTime="1053">except Firefox. </span> <span class="line" data-startTime="1055">Firefox does something </span><span class="line" data-startTime="1055">different here. </span></p>

<p><span class="line" data-startTime="1057">And there are two parts </span><span class="line" data-startTime="1057">to this explanation. </span> <span class="line" data-startTime="1060">We saw before that the DOM </span><span class="line" data-startTime="1060">builds up and these creation </span><span class="line" data-startTime="1063">steps for elements are run. </span> <span class="line" data-startTime="1064">But even if you create the </span><span class="line" data-startTime="1064">elements and it's not part of </span><span class="line" data-startTime="1067">a document, that's still going </span><span class="line" data-startTime="1067">to run those creation steps. </span> <span class="line" data-startTime="1069">And we saw before, step </span><span class="line" data-startTime="1069">14, fetch the image. </span> <span class="line" data-startTime="1073">We can use this to our advantage </span><span class="line" data-startTime="1073">because you can make </span><span class="line" data-startTime="1075">a GET request to any URL by </span><span class="line" data-startTime="1075">making the image elements in </span><span class="line" data-startTime="1078">assigning a source. </span> <span class="line" data-startTime="1079">And you could use the image </span><span class="line" data-startTime="1079">element constructor. </span> <span class="line" data-startTime="1081">It's a tiny bit of code. </span> <span class="line" data-startTime="1083">You can make a request </span><span class="line" data-startTime="1083">anywhere. </span> <span class="line" data-startTime="1084">This is kind of how Google </span><span class="line" data-startTime="1084">Analytics communicates back to </span><span class="line" data-startTime="1087">the server. </span> <span class="line" data-startTime="1089">Oh yeah, but Firefox didn't </span><span class="line" data-startTime="1089">make a request. </span> <span class="line" data-startTime="1091">So what's going on there? </span><span class="line" data-startTime="1093">It's because we spelled image </span><span class="line" data-startTime="1093">wrong, and most browsers &mdash; </span><span class="line" data-startTime="1097">Chrome, Safari, IE &mdash; will give </span><span class="line" data-startTime="1097">us an HTML image element when </span><span class="line" data-startTime="1100">we do that. </span></p>

<p><span class="line" data-startTime="1101">Firefox will give us </span><span class="line" data-startTime="1101">an HTML element. </span> <span class="line" data-startTime="1103">It's not an image. </span> <span class="line" data-startTime="1104">You add it to the page. </span> <span class="line" data-startTime="1105">It will not show an image. </span> <span class="line" data-startTime="1107">And do you know what, it's the </span><span class="line" data-startTime="1107">only one getting it right. </span> <span class="line" data-startTime="1110">We saw before that the </span><span class="line" data-startTime="1110">specification says, if you </span><span class="line" data-startTime="1112">encounter a start tag, </span><span class="line" data-startTime="1112">you can correct it. </span> <span class="line" data-startTime="1114">But this is the parsing spec. </span> <span class="line" data-startTime="1116">We bypass the parsing spec by </span><span class="line" data-startTime="1116">creating the element in </span><span class="line" data-startTime="1119">JavaScript. </span></p>

<p><span class="line" data-startTime="1120">So, yeah, actually technically </span><span class="line" data-startTime="1120">it should have returned an </span><span class="line" data-startTime="1123">HTML unknown element, but you </span><span class="line" data-startTime="1123">know, it's getting it closer </span><span class="line" data-startTime="1126">to right than the </span><span class="line" data-startTime="1126">other browsers. </span> <span class="line" data-startTime="1129">I think I kind of preferred it </span><span class="line" data-startTime="1129">when the web, before all the </span><span class="line" data-startTime="1131">browsers, like there was one </span><span class="line" data-startTime="1131">bad guy, and all the other </span><span class="line" data-startTime="1134">browsers seemed perfect. </span> <span class="line" data-startTime="1135">It was like an orchestra and </span><span class="line" data-startTime="1135">Internet Explorer 8 was just </span><span class="line" data-startTime="1138">this screaming child hitting </span><span class="line" data-startTime="1138">two cymbals together. </span> <span class="line" data-startTime="1142">But then we finally got </span><span class="line" data-startTime="1142">rid of the screaming </span><span class="line" data-startTime="1144">child with the cymbal. </span> <span class="line" data-startTime="1145">And then we started conducting </span><span class="line" data-startTime="1145">again and we went, oh, </span><span class="line" data-startTime="1147">actually everyone's </span><span class="line" data-startTime="1147">out of tune. </span></p>

<p><span class="line" data-startTime="1149">We just didn't notice because of </span><span class="line" data-startTime="1149">the screaming cymbal child. </span> <span class="line" data-startTime="1152">Oh. </span> <span class="line" data-startTime="1153">All right, let's get </span><span class="line" data-startTime="1153">CSS involved again. </span> <span class="line" data-startTime="1155">What about this? </span><span class="line" data-startTime="1156">So, as before, creating a div, </span><span class="line" data-startTime="1156">I'm going to give it a </span><span class="line" data-startTime="1160">background image. </span> <span class="line" data-startTime="1161">So I'm not creating an image. </span> <span class="line" data-startTime="1161">I'm creating a div, giving </span><span class="line" data-startTime="1161">it a background image. </span> <span class="line" data-startTime="1163">We saw here that images were </span><span class="line" data-startTime="1163">downloaded at this point. </span> <span class="line" data-startTime="1166">Is it different with CSS? </span><span class="line" data-startTime="1168">Do different browsers </span><span class="line" data-startTime="1168">do different stuff? </span><span class="line" data-startTime="1171">So we are kind of hedging </span><span class="line" data-startTime="1171">towards the [INAUDIBLE]. </span> <span class="line" data-startTime="1173">Oh wow, it sort of swung </span><span class="line" data-startTime="1173">the other way. </span> <span class="line" data-startTime="1174">Closing the question </span><span class="line" data-startTime="1174">in three, two, one. </span> <span class="line" data-startTime="1178">All right, so we're edging </span><span class="line" data-startTime="1178">towards yes in everything. </span></p>

<p><span class="line" data-startTime="1181">Wrong ends the lot of you. </span> <span class="line" data-startTime="1183">No browser will download here. </span> <span class="line" data-startTime="1185">And this is kind of the same </span><span class="line" data-startTime="1185">as the display non case. </span> <span class="line" data-startTime="1187">It's not in the document, so the </span><span class="line" data-startTime="1187">browser's not going to go </span><span class="line" data-startTime="1190">looking for the styles, because </span><span class="line" data-startTime="1190">it doesn't need to </span><span class="line" data-startTime="1191">know the style information </span><span class="line" data-startTime="1191">because it knows it's not </span><span class="line" data-startTime="1194">going to render. </span> <span class="line" data-startTime="1196">All right, going to be cruel. </span> <span class="line" data-startTime="1199">Same thing, but I'm going </span><span class="line" data-startTime="1199">to add it to the DOM. </span> <span class="line" data-startTime="1201">And then I'm going </span><span class="line" data-startTime="1201">to take it away. </span> <span class="line" data-startTime="1203">In the same block of JavaScript, </span><span class="line" data-startTime="1203">will the browser </span><span class="line" data-startTime="1206">see that element in the document </span><span class="line" data-startTime="1206">long enough to </span><span class="line" data-startTime="1208">actually trigger the download? </span><span class="line" data-startTime="1210">What do you think? </span><span class="line" data-startTime="1216">I'm going to close the question </span><span class="line" data-startTime="1216">in three, two, one. </span> <span class="line" data-startTime="1221">We're edging towards </span><span class="line" data-startTime="1221">yes in everything. </span> <span class="line" data-startTime="1223">Wrong again. </span></p>

<p><span class="line" data-startTime="1225">None of the browsers. </span> <span class="line" data-startTime="1226">None of them. </span> <span class="line" data-startTime="1227">The browser doesn't think about </span><span class="line" data-startTime="1227">styles or layout until </span><span class="line" data-startTime="1230">as late as possible, which </span><span class="line" data-startTime="1230">normally means when it needs </span><span class="line" data-startTime="1232">to render something. </span> <span class="line" data-startTime="1234">And this is going to change </span><span class="line" data-startTime="1234">any pixels because </span><span class="line" data-startTime="1237">JavaScript's going to be </span><span class="line" data-startTime="1237">blocking the chance to do some </span><span class="line" data-startTime="1239">of that painting stuff. </span> <span class="line" data-startTime="1241">What about this? </span><span class="line" data-startTime="1243">I'm adding it to the document. </span> <span class="line" data-startTime="1245">I'm going to ask for </span><span class="line" data-startTime="1245">its text content. </span> <span class="line" data-startTime="1246">It's an empty element. </span> <span class="line" data-startTime="1247">Text content is going </span><span class="line" data-startTime="1247">to be empty as well. </span></p>

<p><span class="line" data-startTime="1249">And I'm going to remove </span><span class="line" data-startTime="1249">it again. </span> <span class="line" data-startTime="1250">Does that trigger different </span><span class="line" data-startTime="1250">behavior in the browser? </span><span class="line" data-startTime="1254">Element's completely empty. </span> <span class="line" data-startTime="1255">So you know. </span> <span class="line" data-startTime="1257">But is that going to trigger </span><span class="line" data-startTime="1257">the browser to go, ah yeah, </span><span class="line" data-startTime="1259">I'm actually going to get </span><span class="line" data-startTime="1259">that background image. </span> <span class="line" data-startTime="1261">I'm going to close the question </span><span class="line" data-startTime="1261">in three, two, one. </span> <span class="line" data-startTime="1265">What have you said? </span><span class="line" data-startTime="1267">Ugh, you don't know. </span> <span class="line" data-startTime="1268">Fair enough. </span> <span class="line" data-startTime="1268">Yes, is tricky. </span> <span class="line" data-startTime="1270">No, none of the browser </span><span class="line" data-startTime="1270">at this point. </span> <span class="line" data-startTime="1272">I am going somewhere </span><span class="line" data-startTime="1272">with this. </span> <span class="line" data-startTime="1274">I promise you. </span></p>

<p><span class="line" data-startTime="1276">Getting the text content of </span><span class="line" data-startTime="1276">an element is pretty easy. </span> <span class="line" data-startTime="1278">It's just going to go and pick </span><span class="line" data-startTime="1278">up the text notes, doesn't </span><span class="line" data-startTime="1279">need to look at the </span><span class="line" data-startTime="1279">style or anything. </span> <span class="line" data-startTime="1281">What about this one? </span><span class="line" data-startTime="1281">Inner HTML? </span><span class="line" data-startTime="1283">Same as before, but instead of </span><span class="line" data-startTime="1283">text content, going to ask for </span><span class="line" data-startTime="1285">the older innerHTML. </span> <span class="line" data-startTime="1286">Oh wow, IE's doing something </span><span class="line" data-startTime="1286">different from everyone else. </span> <span class="line" data-startTime="1289">Interesting. </span> <span class="line" data-startTime="1290">Going to close the question </span><span class="line" data-startTime="1290">in three, two, one. </span> <span class="line" data-startTime="1295">All right, so you said yes in IE </span><span class="line" data-startTime="1295">and no in everything else. </span> <span class="line" data-startTime="1299">Bloody hell, you're right. </span> <span class="line" data-startTime="1301">Well done. </span> <span class="line" data-startTime="1301">Yeah, IE makes a request. </span> <span class="line" data-startTime="1303">And the reason for </span><span class="line" data-startTime="1303">that is because &mdash; </span><span class="line" data-startTime="1306">I don't know. </span></p>

<p><span class="line" data-startTime="1310">Some things in the world </span><span class="line" data-startTime="1310">cannot be explained. </span> <span class="line" data-startTime="1312">Like why it takes three attempts </span><span class="line" data-startTime="1312">to plug in a USB </span><span class="line" data-startTime="1314">cable, even though there's </span><span class="line" data-startTime="1314">only two possibilities. </span> <span class="line" data-startTime="1316">These things just cannot </span><span class="line" data-startTime="1316">be explained. </span> <span class="line" data-startTime="1319">Moving on. </span> <span class="line" data-startTime="1322">Similar again. </span> <span class="line" data-startTime="1323">Instead of inner HTML, </span><span class="line" data-startTime="1323">it's inner text. </span> <span class="line" data-startTime="1326">What do the browsers do here? </span><span class="line" data-startTime="1327">Do they do something </span><span class="line" data-startTime="1327">different? </span><span class="line" data-startTime="1328">We saw IE's quite request-happy </span><span class="line" data-startTime="1328">with innerHTML. </span></p>

<p><span class="line" data-startTime="1332">Does it do something different </span><span class="line" data-startTime="1332">within the text? </span><span class="line" data-startTime="1334">Does it trigger requests in </span><span class="line" data-startTime="1334">any of the other browsers? </span><span class="line" data-startTime="1337">I can promise you I am going </span><span class="line" data-startTime="1337">somewhere with this. </span> <span class="line" data-startTime="1339">Closing the question </span><span class="line" data-startTime="1339">in three, two, one. </span> <span class="line" data-startTime="1343">There's quite a strong opinion </span><span class="line" data-startTime="1343">of no across all the browsers. </span> <span class="line" data-startTime="1346">Sorry, guys. </span> <span class="line" data-startTime="1347">Yes, in everything </span><span class="line" data-startTime="1347">except Firefox. </span> <span class="line" data-startTime="1350">And this actually makes sense. </span> <span class="line" data-startTime="1353">Let's make a div. </span> <span class="line" data-startTime="1354">We make a div, we give it </span><span class="line" data-startTime="1354">a background image. </span> <span class="line" data-startTime="1355">I'm going to give inner HTML, </span><span class="line" data-startTime="1355">where it's got Hello World, </span><span class="line" data-startTime="1358">and the div is a div around </span><span class="line" data-startTime="1358">the world or whatever. </span> <span class="line" data-startTime="1362">Text content is Hello World. </span> <span class="line" data-startTime="1363">As you might expect, the inner </span><span class="line" data-startTime="1363">text has a line break in it. </span> <span class="line" data-startTime="1367">And &mdash; well this is how it in </span><span class="line" data-startTime="1367">IE, Chrome, and Safari &mdash; </span><span class="line" data-startTime="1370">because inner text is more like </span><span class="line" data-startTime="1370">what you would get if you </span><span class="line" data-startTime="1372">copy and pasted the elements, </span><span class="line" data-startTime="1372">the text of the elements. </span> <span class="line" data-startTime="1375">And because is a block-level </span><span class="line" data-startTime="1375">element &mdash; or it certainly is </span><span class="line" data-startTime="1378">in this example &mdash; </span><span class="line" data-startTime="1379">it gets a new line. </span> <span class="line" data-startTime="1381">So if we run this, the browser </span><span class="line" data-startTime="1381">goes, yeah, yeah, yeah. </span> <span class="line" data-startTime="1384">Text content, easy enough. </span></p>

<p><span class="line" data-startTime="1385">Inner text &mdash; </span><span class="line" data-startTime="1386">oh! </span><span class="line" data-startTime="1386">Inner text is style dependant. </span> <span class="line" data-startTime="1387">So I'm going to have a look at </span><span class="line" data-startTime="1387">the styles of the elements. </span> <span class="line" data-startTime="1389">And oh! </span><span class="line" data-startTime="1390">It's got a background image. </span> <span class="line" data-startTime="1391">That's interesting. </span> <span class="line" data-startTime="1392">I'll download that. </span> <span class="line" data-startTime="1393">And that's why we see most </span><span class="line" data-startTime="1393">browsers doing it. </span> <span class="line" data-startTime="1395">Firefox doesn't download at this </span><span class="line" data-startTime="1395">point, because it doesn't </span><span class="line" data-startTime="1397">support inner text. </span> <span class="line" data-startTime="1398">It's the only browser </span><span class="line" data-startTime="1398">that doesn't. </span> <span class="line" data-startTime="1400">So it just returns undefined </span><span class="line" data-startTime="1400">at that point. </span></p>

<p><span class="line" data-startTime="1402">But if you use any of these, </span><span class="line" data-startTime="1402">apart from inner text, like </span><span class="line" data-startTime="1405">anything that's going to get </span><span class="line" data-startTime="1405">some style data from the page, </span><span class="line" data-startTime="1407">FireFox would have started </span><span class="line" data-startTime="1407">the download as well. </span> <span class="line" data-startTime="1411">So Paul was talking about </span><span class="line" data-startTime="1411">this earlier. </span> <span class="line" data-startTime="1412">You can start doing layout </span><span class="line" data-startTime="1412">thrashing if you start doing </span><span class="line" data-startTime="1415">these reads and writes. </span> <span class="line" data-startTime="1416">So you'll trigger extra </span><span class="line" data-startTime="1416">layouts, et cetera. </span> <span class="line" data-startTime="1420">The browser is quite clever </span><span class="line" data-startTime="1420">about this stuff. </span> <span class="line" data-startTime="1421">It will batch changes </span><span class="line" data-startTime="1421">together . </span> <span class="line" data-startTime="1423">If you do this, like display </span><span class="line" data-startTime="1423">non-block, non-block, et </span><span class="line" data-startTime="1425">cetera, et cetera, it </span><span class="line" data-startTime="1425">loads the width. </span></p>

<p><span class="line" data-startTime="1427">This is actually a really </span><span class="line" data-startTime="1427">light piece of code. </span> <span class="line" data-startTime="1429">It's not tricky for the browser </span><span class="line" data-startTime="1429">the understand because </span><span class="line" data-startTime="1431">it's going to ignore &mdash; </span><span class="line" data-startTime="1433">all right, I hope that's not </span><span class="line" data-startTime="1433">my cue to get off because </span><span class="line" data-startTime="1435">that's very passive </span><span class="line" data-startTime="1435">aggressive. </span> <span class="line" data-startTime="1439">So it will just take the last </span><span class="line" data-startTime="1439">change that you make. </span> <span class="line" data-startTime="1442">Oh that's nice. </span> <span class="line" data-startTime="1445">This is great but it can lead </span><span class="line" data-startTime="1445">to unexpected results. </span> <span class="line" data-startTime="1447">Let's have a look at a </span><span class="line" data-startTime="1447">practical example. </span> <span class="line" data-startTime="1448">Paul and I, we want </span><span class="line" data-startTime="1448">to go over there. </span> <span class="line" data-startTime="1450">You can tell because </span><span class="line" data-startTime="1450">we're pointing. </span> <span class="line" data-startTime="1453">Let's do it with code. </span></p>

<p><span class="line" data-startTime="1454">We're going to start </span><span class="line" data-startTime="1454">at left zero. </span> <span class="line" data-startTime="1455">We're going to transition left </span><span class="line" data-startTime="1455">one second, go to 100%. </span> <span class="line" data-startTime="1457">We run that code, </span><span class="line" data-startTime="1457">and it works. </span> <span class="line" data-startTime="1459">Yay, we solve the world's </span><span class="line" data-startTime="1459">problems with code. </span> <span class="line" data-startTime="1461">Now, we're very happy </span><span class="line" data-startTime="1461">at this point. </span> <span class="line" data-startTime="1464">But let's run the code again. </span> <span class="line" data-startTime="1467">Nothing happened. </span> <span class="line" data-startTime="1468">And this is because the browser </span><span class="line" data-startTime="1468">is going to ignore </span><span class="line" data-startTime="1471">this first right of left. </span> <span class="line" data-startTime="1472">It's just going to batch </span><span class="line" data-startTime="1472">them together. </span> <span class="line" data-startTime="1473">It's only going to listen </span><span class="line" data-startTime="1473">to our last right here. </span></p>

<p><span class="line" data-startTime="1476">And it's 100%, we're 100% </span><span class="line" data-startTime="1476">already, so nothing happens. </span> <span class="line" data-startTime="1479">We can fix this by enforcing </span><span class="line" data-startTime="1479">a synchronous layout here. </span> <span class="line" data-startTime="1483">Because that forces the browser </span><span class="line" data-startTime="1483">to go and look at all </span><span class="line" data-startTime="1485">the styles of all the elements </span><span class="line" data-startTime="1485">in the page, and it realizes, </span><span class="line" data-startTime="1488">oh yeah, we are supposed </span><span class="line" data-startTime="1488">to be at left zero. </span> <span class="line" data-startTime="1490">So when we make the </span><span class="line" data-startTime="1490">next changes, it </span><span class="line" data-startTime="1492">will start from zero. </span> <span class="line" data-startTime="1492">We run this code as many times </span><span class="line" data-startTime="1492">as we want, and it works. </span> <span class="line" data-startTime="1495">You might have encountered </span><span class="line" data-startTime="1495">this kind of behavior and </span><span class="line" data-startTime="1497">tried to use set timer or </span><span class="line" data-startTime="1497">something to get around it. </span></p>

<p><span class="line" data-startTime="1500">No, you can just force </span><span class="line" data-startTime="1500">a layout like this. </span> <span class="line" data-startTime="1503">Right, OK last question. </span> <span class="line" data-startTime="1504">Let's go through this quickly </span><span class="line" data-startTime="1504">because I'm going to be </span><span class="line" data-startTime="1506">chucked off the stage </span><span class="line" data-startTime="1506">in a few seconds. </span> <span class="line" data-startTime="1507">Imagine a page full </span><span class="line" data-startTime="1507">of lorem ipsum. </span> <span class="line" data-startTime="1508">It looks like this. </span> <span class="line" data-startTime="1509">595 pixels across. </span> <span class="line" data-startTime="1511">Media query, min width 600. </span> <span class="line" data-startTime="1514">Min width, so you know, </span><span class="line" data-startTime="1514">we wouldn't really </span><span class="line" data-startTime="1515">be expected to display. </span> <span class="line" data-startTime="1516">Which browsers are going to </span><span class="line" data-startTime="1516">download that gif anyway? </span><span class="line" data-startTime="1520">Are the browsers going to </span><span class="line" data-startTime="1520">do something different? </span><span class="line" data-startTime="1522">And you say, you know, would </span><span class="line" data-startTime="1522">we expect it to even </span><span class="line" data-startTime="1524">display that gif? </span><span class="line" data-startTime="1525">You know, who knows? </span><span class="line" data-startTime="1527">Last question, so make </span><span class="line" data-startTime="1527">it a good one. </span></p>

<p><span class="line" data-startTime="1528">Closing it in three, two, one. </span> <span class="line" data-startTime="1532">Straight down the middle. </span> <span class="line" data-startTime="1533">I have &mdash; </span><span class="line" data-startTime="1534">I feel like I've broken </span><span class="line" data-startTime="1534">you as an audience. </span> <span class="line" data-startTime="1536">I'm very sorry. </span> <span class="line" data-startTime="1538">What happens here? </span><span class="line" data-startTime="1541">IE and Firefox will download. </span> <span class="line" data-startTime="1543">And they will actually display </span><span class="line" data-startTime="1543">the background as well. </span> <span class="line" data-startTime="1547">And this is quite sneaky. </span> <span class="line" data-startTime="1550">My measurements did not include </span><span class="line" data-startTime="1550">the scroll bar. </span> <span class="line" data-startTime="1553">With the scroll bar it brings </span><span class="line" data-startTime="1553">it over 600 pixels. </span> <span class="line" data-startTime="1557">Now, they don't call </span><span class="line" data-startTime="1557">me cunning Jake &mdash; </span><span class="line" data-startTime="1561">they don't actually call </span><span class="line" data-startTime="1561">me cunning Jake &mdash; </span><span class="line" data-startTime="1563">fair enough. </span> <span class="line" data-startTime="1564">This seems insane to me, to </span><span class="line" data-startTime="1564">include this scroll bar width. </span> <span class="line" data-startTime="1566">What's the use? </span><span class="line" data-startTime="1567">It's has a 200 pixel </span><span class="line" data-startTime="1567">scrollbar. </span></p>

<p><span class="line" data-startTime="1568">Why should I care about that? </span><span class="line" data-startTime="1570">But including the scrollbar is </span><span class="line" data-startTime="1570">mandated by the specification. </span> <span class="line" data-startTime="1574">It's interesting. </span> <span class="line" data-startTime="1575">And Chrome and Safari are </span><span class="line" data-startTime="1575">breaking the spec here. </span> <span class="line" data-startTime="1578">It's fixed in the Chrome </span><span class="line" data-startTime="1578">nightlies. </span> <span class="line" data-startTime="1579">It's not fixed in the </span><span class="line" data-startTime="1579">WebKit nightlies. </span> <span class="line" data-startTime="1581">Why is the scrollbar included? </span><span class="line" data-startTime="1583">Well, imagine this </span><span class="line" data-startTime="1583">bit of code. </span> <span class="line" data-startTime="1584">I'm no scrollbar. </span> <span class="line" data-startTime="1586">And then when the width gets to </span><span class="line" data-startTime="1586">600, I'm going to introduce </span><span class="line" data-startTime="1589">a scroll bar. </span> <span class="line" data-startTime="1589">500 pixels, that's fine. </span></p>

<p><span class="line" data-startTime="1591">We get 601. </span> <span class="line" data-startTime="1592">Ah, we need to put </span><span class="line" data-startTime="1592">a scroll bar in. </span> <span class="line" data-startTime="1594">Oh, no we're less </span><span class="line" data-startTime="1594">than 600 pixels. </span> <span class="line" data-startTime="1596">We'll take it away. </span> <span class="line" data-startTime="1597">And so on and so on and so on. </span> <span class="line" data-startTime="1602">In reality, it doesn't get stuck </span><span class="line" data-startTime="1602">in a loop, but here we </span><span class="line" data-startTime="1603">can see what Safari does. </span> <span class="line" data-startTime="1605">I've got a background picture </span><span class="line" data-startTime="1605">and a scrollbar coming in at a </span><span class="line" data-startTime="1607">particular width. </span> <span class="line" data-startTime="1608">And we'll see, as I'm </span><span class="line" data-startTime="1608">only moving &mdash; </span><span class="line" data-startTime="1610">I'm only making it bigger. </span> <span class="line" data-startTime="1612">I'm not, you know, </span><span class="line" data-startTime="1612">moving both ways. </span> <span class="line" data-startTime="1614">Now we can see that the </span><span class="line" data-startTime="1614">background image </span><span class="line" data-startTime="1615">flickers on and off. </span> <span class="line" data-startTime="1616">And then once we get beyond the </span><span class="line" data-startTime="1616">width of the scroll bar, </span><span class="line" data-startTime="1618">it stabilizes. </span></p>

<p><span class="line" data-startTime="1620">And that it. </span> <span class="line" data-startTime="1623">Let's have a look </span><span class="line" data-startTime="1623">at the rankings. </span> <span class="line" data-startTime="1625">Don't worry, if you haven't </span><span class="line" data-startTime="1625">scored great, it won't </span><span class="line" data-startTime="1629">actually show your name </span><span class="line" data-startTime="1629">on the screen. </span> <span class="line" data-startTime="1630">And it's only going to </span><span class="line" data-startTime="1630">show the top 10. </span> <span class="line" data-startTime="1632">So don't worry too much. </span> <span class="line" data-startTime="1633">Who've we got? </span><span class="line" data-startTime="1634">prettyFlyForAWiFi Very good. </span> <span class="line" data-startTime="1636">Who's that? </span><span class="line" data-startTime="1637">Excellent. </span> <span class="line" data-startTime="1638">Right. </span> <span class="line" data-startTime="1638">So I will swag you </span><span class="line" data-startTime="1638">good and proper. </span> <span class="line" data-startTime="1641">Oh god, you've done quite </span><span class="line" data-startTime="1641">really, really well. </span> <span class="line" data-startTime="1643">OK that's my time. </span> <span class="line" data-startTime="1645">Thank you very much guys. </span> <span class="line" data-startTime="1646">Cheers, bye! </span><span class="line" data-startTime="1648">[APPLAUSE] </span></p></div>