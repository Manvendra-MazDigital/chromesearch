<p><span class="line" data-startTime="0">[MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="155"><span class="speakerName">Rick Viscomi</span>: Hello, world. </span> <span class="line" data-startTime="156">Welcome to Google </span><span class="line" data-startTime="156">Developers Live. </span> <span class="line" data-startTime="158">My name is Rick Viscomi, and I'm </span><span class="line" data-startTime="158">going to be presenting on </span><span class="line" data-startTime="160">waterfall antipatterns. </span> <span class="line" data-startTime="162">So to kick it off, waterfall </span><span class="line" data-startTime="162">antipatterns has to do with </span><span class="line" data-startTime="167">web performance. </span> <span class="line" data-startTime="167">And measuring web performance </span><span class="line" data-startTime="167">is kind of a tricky subject, </span><span class="line" data-startTime="171">because it comes in two parts. </span> <span class="line" data-startTime="173">Number one is getting your </span><span class="line" data-startTime="173">company to care about web </span><span class="line" data-startTime="177">performance. </span></p>

<p><span class="line" data-startTime="177">And I think we're in the &mdash; </span><span class="line" data-startTime="182">we're lucky, right now, </span><span class="line" data-startTime="182">because companies are </span><span class="line" data-startTime="184">recognizing that web performance </span><span class="line" data-startTime="184">is directly </span><span class="line" data-startTime="187">related to all the metrics that </span><span class="line" data-startTime="187">they care about, like </span><span class="line" data-startTime="190">returning visitors, ad </span><span class="line" data-startTime="190">conversions, things like this. </span> <span class="line" data-startTime="196">When a company decides to care </span><span class="line" data-startTime="196">about web performance, they </span><span class="line" data-startTime="199">ask their engineers to fire </span><span class="line" data-startTime="199">up a tool and measure the </span><span class="line" data-startTime="203">performance, so they know </span><span class="line" data-startTime="203">how fast they are. </span> <span class="line" data-startTime="206">And we're lucky to have a </span><span class="line" data-startTime="206">tool called WebPagetest. </span> <span class="line" data-startTime="209">And this tool was created by </span><span class="line" data-startTime="209">Patrick Meenan at AOL, and he </span><span class="line" data-startTime="213">now works at Google. </span></p>

<p><span class="line" data-startTime="215">So this is a tool that would </span><span class="line" data-startTime="215">synthetically measure the </span><span class="line" data-startTime="219">performance of a website. </span> <span class="line" data-startTime="221">And here in red, I've </span><span class="line" data-startTime="221">highlighted some areas that </span><span class="line" data-startTime="223">you should focus on before you </span><span class="line" data-startTime="223">run your test, to make sure </span><span class="line" data-startTime="226">that you have all the </span><span class="line" data-startTime="226">information needed to get an </span><span class="line" data-startTime="229">informed decision about how </span><span class="line" data-startTime="229">your performance is. </span> <span class="line" data-startTime="232">So the first thing I'll point </span><span class="line" data-startTime="232">out is that the number of </span><span class="line" data-startTime="234">tests to run is set to nine. </span> <span class="line" data-startTime="236">You might notice on the left </span><span class="line" data-startTime="236">it says, up to 10. </span> <span class="line" data-startTime="239">But we've chosen an odd number </span><span class="line" data-startTime="239">here, and I'll show </span><span class="line" data-startTime="242">you why in a second. </span> <span class="line" data-startTime="244">Also, right below that, Repeat </span><span class="line" data-startTime="244">View is set to both first view </span><span class="line" data-startTime="247">and repeat view. </span> <span class="line" data-startTime="249">And this is so that we can hit </span><span class="line" data-startTime="249">the page once with a clear </span><span class="line" data-startTime="253">cache, and then hit it again </span><span class="line" data-startTime="253">just to see how well we are </span><span class="line" data-startTime="257">caching our resources. </span> <span class="line" data-startTime="259">And up and to the right, we </span><span class="line" data-startTime="259">see that the Video tab is </span><span class="line" data-startTime="261">highlighted. </span></p>

<p><span class="line" data-startTime="262">Capturing video is important </span><span class="line" data-startTime="262">so that we can get what's </span><span class="line" data-startTime="265">known as perceived performance </span><span class="line" data-startTime="265">metrics. </span> <span class="line" data-startTime="268">Capturing a video is basically </span><span class="line" data-startTime="268">taking snapshots every tenth </span><span class="line" data-startTime="271">of a second of the web page. </span> <span class="line" data-startTime="273">And using these snapshots, we </span><span class="line" data-startTime="273">could see just like a live </span><span class="line" data-startTime="278">playback of how the </span><span class="line" data-startTime="278">page is loading. </span> <span class="line" data-startTime="281">And this could tell us the </span><span class="line" data-startTime="281">sequencing of where things are </span><span class="line" data-startTime="285">loading in on the page, and how </span><span class="line" data-startTime="285">quickly that compares to </span><span class="line" data-startTime="289">other websites and other test </span><span class="line" data-startTime="289">runs of the same page. </span> <span class="line" data-startTime="293">So one thing to note is that I </span><span class="line" data-startTime="293">mentioned that WebPagetest is </span><span class="line" data-startTime="297">a synthetic tool. </span> <span class="line" data-startTime="299">There are two categories of </span><span class="line" data-startTime="299">performance monitoring and </span><span class="line" data-startTime="302">measurement, and that's </span><span class="line" data-startTime="302">RUM, Real User </span><span class="line" data-startTime="304">Monitoring, and synthetic. </span> <span class="line" data-startTime="307">Real user monitoring measures </span><span class="line" data-startTime="307">the performance experience of </span><span class="line" data-startTime="309">the actual users </span><span class="line" data-startTime="309">of a web page. </span> <span class="line" data-startTime="312">There's lots of variability </span><span class="line" data-startTime="312">here. </span> <span class="line" data-startTime="314">Users are coming from all </span><span class="line" data-startTime="314">around the world. </span> <span class="line" data-startTime="316">Many different browsers, many </span><span class="line" data-startTime="316">different connection speeds. </span> <span class="line" data-startTime="319">And they basically count for </span><span class="line" data-startTime="319">many, if not all of the edge </span><span class="line" data-startTime="322">cases of how many people could </span><span class="line" data-startTime="322">be hitting your site, and </span><span class="line" data-startTime="326">under what conditions. </span></p>

<p><span class="line" data-startTime="327">Synthetic testing is </span><span class="line" data-startTime="327">almost like clean </span><span class="line" data-startTime="329">room laboratory testing. </span> <span class="line" data-startTime="331">As you can see, WebPagetest lets </span><span class="line" data-startTime="331">you control almost all </span><span class="line" data-startTime="334">the variables, the connection </span><span class="line" data-startTime="334">speed, the </span><span class="line" data-startTime="336">location, the browser. </span> <span class="line" data-startTime="338">And there's very little </span><span class="line" data-startTime="338">variation between the tests, </span><span class="line" data-startTime="342">if you want it to be so. </span> <span class="line" data-startTime="344">So they sort of answer two </span><span class="line" data-startTime="344">different questions. </span> <span class="line" data-startTime="346">With RUM, it's answering the </span><span class="line" data-startTime="346">question, how fast is my page? </span><span class="line" data-startTime="350">And for synthetic, it's </span><span class="line" data-startTime="350">answering the question, how </span><span class="line" data-startTime="353">can I make my page faster? </span><span class="line" data-startTime="354">And so today, we're going to </span><span class="line" data-startTime="354">focus on synthetic, and how we </span><span class="line" data-startTime="357">can use WebPagetest, and </span><span class="line" data-startTime="357">specifically, waterfall chart </span><span class="line" data-startTime="360">to make our pages faster. </span> <span class="line" data-startTime="363">So I mentioned that nine runs </span><span class="line" data-startTime="363">is better than 10 runs. </span> <span class="line" data-startTime="368">And I'll explain that with a </span><span class="line" data-startTime="368">little bit of mathematics. </span></p>

<p><span class="line" data-startTime="372">So when you have nine runs, </span><span class="line" data-startTime="372">it's an odd number. </span> <span class="line" data-startTime="375">And so when you take the median </span><span class="line" data-startTime="375">of nine runs, you're </span><span class="line" data-startTime="378">left with the fifth </span><span class="line" data-startTime="378">one in the series. </span> <span class="line" data-startTime="381">As opposed to 10 runs, you're </span><span class="line" data-startTime="381">left with five and six in the </span><span class="line" data-startTime="384">middle, and you're left with </span><span class="line" data-startTime="384">some sort of decision about </span><span class="line" data-startTime="386">which one to take. </span> <span class="line" data-startTime="387">So when you have nine runs, </span><span class="line" data-startTime="387">you're always going to have </span><span class="line" data-startTime="390">one test run to pick, and </span><span class="line" data-startTime="390">there's no ambiguity. </span> <span class="line" data-startTime="393">So that's just a demonstration </span><span class="line" data-startTime="393">of nine versus 10, and nine is </span><span class="line" data-startTime="398">recommended. </span> <span class="line" data-startTime="401">So moving on, this is the </span><span class="line" data-startTime="401">waterfall that you'll actually </span><span class="line" data-startTime="404">see when you run a test. </span></p>

<p><span class="line" data-startTime="406">And it's shrunken down here, to </span><span class="line" data-startTime="406">give us a high level view </span><span class="line" data-startTime="410">of what's going on. </span> <span class="line" data-startTime="412">When we run our test, and we see </span><span class="line" data-startTime="412">this waterfall, at first </span><span class="line" data-startTime="417">we're sort of wondering, </span><span class="line" data-startTime="417">what is going on here? </span><span class="line" data-startTime="419">We're wondering, what are </span><span class="line" data-startTime="419">we supposed to look for? </span><span class="line" data-startTime="423">You might notice, oh, at the </span><span class="line" data-startTime="423">top of the page, it says it </span><span class="line" data-startTime="425">ran in 15 seconds. </span> <span class="line" data-startTime="426">That's great. </span> <span class="line" data-startTime="427">We have a number. </span> <span class="line" data-startTime="428">But what does that number </span><span class="line" data-startTime="428">actually mean, and what can we </span><span class="line" data-startTime="432">derive from that 15 seconds? </span><span class="line" data-startTime="434">The truth is that 15 seconds </span><span class="line" data-startTime="434">is one particular load time </span><span class="line" data-startTime="439">for this one particular test. </span></p>

<p><span class="line" data-startTime="441">It's not representative </span><span class="line" data-startTime="441">of all your users. </span> <span class="line" data-startTime="443">That's the difference between </span><span class="line" data-startTime="443">RUM and synthetic. </span> <span class="line" data-startTime="446">And the other thing to note is </span><span class="line" data-startTime="446">that this specific test felt </span><span class="line" data-startTime="450">like 15 seconds, but when I </span><span class="line" data-startTime="450">loaded on my own, in my own </span><span class="line" data-startTime="452">browser, it feels like </span><span class="line" data-startTime="452">three seconds. </span> <span class="line" data-startTime="455">So that difference has to </span><span class="line" data-startTime="455">do with this clean room </span><span class="line" data-startTime="458">laboratory testing environment </span><span class="line" data-startTime="458">on WebPagetest. </span> <span class="line" data-startTime="460">It clears all the caches, and </span><span class="line" data-startTime="460">in your own private browser, </span><span class="line" data-startTime="465">it contains a lot of information </span><span class="line" data-startTime="465">about your </span><span class="line" data-startTime="467">previous history. </span> <span class="line" data-startTime="468">So something to note here </span><span class="line" data-startTime="468">is that time is not very </span><span class="line" data-startTime="471">important, which might </span><span class="line" data-startTime="471">sound strange. </span> <span class="line" data-startTime="473">But time is not very important, </span><span class="line" data-startTime="473">because it's not </span><span class="line" data-startTime="475">representative of </span><span class="line" data-startTime="475">all your users. </span> <span class="line" data-startTime="477">Time is important when you </span><span class="line" data-startTime="477">compare it against other </span><span class="line" data-startTime="479">WebPagetest results. </span></p>

<p><span class="line" data-startTime="483">Also, timing could also be </span><span class="line" data-startTime="483">thrown off by anomalies over </span><span class="line" data-startTime="487">the network. </span> <span class="line" data-startTime="488">And this is why we run nine </span><span class="line" data-startTime="488">tests, so that you can choose </span><span class="line" data-startTime="490">a median run that will sort of </span><span class="line" data-startTime="490">smooth over the differences. </span> <span class="line" data-startTime="497">So when we look at a waterfall </span><span class="line" data-startTime="497">from this high level, one </span><span class="line" data-startTime="501">technique that I've learned to </span><span class="line" data-startTime="501">use is by looking at something </span><span class="line" data-startTime="503">called waterfall slope. </span> <span class="line" data-startTime="505">And slope is the rate at </span><span class="line" data-startTime="505">which requests are </span><span class="line" data-startTime="507">being made over time. </span> <span class="line" data-startTime="509">So we have the requests running </span><span class="line" data-startTime="509">down the page from top </span><span class="line" data-startTime="512">to bottom, and from left to </span><span class="line" data-startTime="512">right is the time axis, </span><span class="line" data-startTime="516">starting at 0 in the top left. </span> <span class="line" data-startTime="518">And so what we want to see </span><span class="line" data-startTime="518">is a vertical line </span><span class="line" data-startTime="522">going straight down. </span></p>

<p><span class="line" data-startTime="523">Think of this like Niagara </span><span class="line" data-startTime="523">Falls, just flowing straight </span><span class="line" data-startTime="525">down, quickly. </span> <span class="line" data-startTime="527">So that means that we're doing </span><span class="line" data-startTime="527">more in less time. </span> <span class="line" data-startTime="529">We are able to get more requests </span><span class="line" data-startTime="529">out in a shorter </span><span class="line" data-startTime="533">amount of time. </span> <span class="line" data-startTime="534">These horizontal lines, like </span><span class="line" data-startTime="534">the one second to last, is </span><span class="line" data-startTime="537">pretty bad. </span> <span class="line" data-startTime="538">That means that we're doing </span><span class="line" data-startTime="538">less in more time. </span> <span class="line" data-startTime="541">This is an indicator that we </span><span class="line" data-startTime="541">could be more efficiently </span><span class="line" data-startTime="544">using our bandwidth to get more </span><span class="line" data-startTime="544">content over the network. </span> <span class="line" data-startTime="551">So waterfall slope isn't really </span><span class="line" data-startTime="551">something that's talked </span><span class="line" data-startTime="553">about a lot. </span> <span class="line" data-startTime="556">And what I really like about </span><span class="line" data-startTime="556">slope is that it's something </span><span class="line" data-startTime="559">that could be quantified. </span> <span class="line" data-startTime="561">You could measure the slope of </span><span class="line" data-startTime="561">a waterfall, and compare it </span><span class="line" data-startTime="565">against other pages. </span></p>

<p><span class="line" data-startTime="567">So this is one way to </span><span class="line" data-startTime="567">quantitatively compare </span><span class="line" data-startTime="569">waterfalls, other than the </span><span class="line" data-startTime="569">standard way of just </span><span class="line" data-startTime="573">qualitatively looking at them </span><span class="line" data-startTime="573">side by side and wondering </span><span class="line" data-startTime="575">what's different. </span> <span class="line" data-startTime="577">So these horizontal lines can </span><span class="line" data-startTime="577">be made up of all of these </span><span class="line" data-startTime="581">little antipatterns. </span> <span class="line" data-startTime="582">And these arrows are showing </span><span class="line" data-startTime="582">you each antipattern. </span> <span class="line" data-startTime="585">And right now, it looks </span><span class="line" data-startTime="585">like a mess. </span> <span class="line" data-startTime="587">They're sort of scattered </span><span class="line" data-startTime="587">around. </span></p>

<p><span class="line" data-startTime="589">And they are, there's </span><span class="line" data-startTime="589">a lot going on here. </span> <span class="line" data-startTime="591">And hopefully, at the end of </span><span class="line" data-startTime="591">this talk, you'll be able to </span><span class="line" data-startTime="594">spot them and pick them out. </span> <span class="line" data-startTime="597">So this is the high level </span><span class="line" data-startTime="597">view of a waterfall. </span> <span class="line" data-startTime="600">Let's dig down and look at </span><span class="line" data-startTime="600">the anatomy of a request. </span> <span class="line" data-startTime="603">And starting all the way at the </span><span class="line" data-startTime="603">left, we see that there's </span><span class="line" data-startTime="606">a little padlock icon. </span> <span class="line" data-startTime="607">And this is to show us that </span><span class="line" data-startTime="607">this is a secure request. </span> <span class="line" data-startTime="609">Not all requests are secure. </span> <span class="line" data-startTime="612">And it usually will go along </span><span class="line" data-startTime="612">with this purple </span><span class="line" data-startTime="615">bar towards the right. </span> <span class="line" data-startTime="617">So if you see a padlock, that's </span><span class="line" data-startTime="617">indicating that the </span><span class="line" data-startTime="619">request was made over SSL. </span> <span class="line" data-startTime="622">Next is the number two. </span> <span class="line" data-startTime="623">This is to indicate that this </span><span class="line" data-startTime="623">was the second request to </span><span class="line" data-startTime="626">occur, followed by a center </span><span class="line" data-startTime="626">truncated domain name and </span><span class="line" data-startTime="631">resource name. </span> <span class="line" data-startTime="632">So we see that the domain here </span><span class="line" data-startTime="632">is fb static, and the </span><span class="line" data-startTime="635">resources is a bunch of numbers </span><span class="line" data-startTime="635">and letters .css. </span> <span class="line" data-startTime="639">This is helpful, just at a </span><span class="line" data-startTime="639">glance, to see what type of </span><span class="line" data-startTime="642">request this is, and for </span><span class="line" data-startTime="642">what resource it is. </span></p>

<p><span class="line" data-startTime="647">The next thing is a solid black </span><span class="line" data-startTime="647">line, followed by some </span><span class="line" data-startTime="652">gray lines. </span> <span class="line" data-startTime="653">And the spacing between that </span><span class="line" data-startTime="653">solid black line and the first </span><span class="line" data-startTime="657">colored bar is what's known </span><span class="line" data-startTime="657">as the start offset. </span> <span class="line" data-startTime="659">This is the amount of time that </span><span class="line" data-startTime="659">has passed since the page </span><span class="line" data-startTime="663">has started to load to the </span><span class="line" data-startTime="663">time that the request was </span><span class="line" data-startTime="666">first made. </span> <span class="line" data-startTime="668">And we come now to the DNS </span><span class="line" data-startTime="668">lookup, that teal bar, which </span><span class="line" data-startTime="672">is basically the resolution </span><span class="line" data-startTime="672">of example.com to its </span><span class="line" data-startTime="677">machine-readable IP address. </span> <span class="line" data-startTime="680">DNS lookup looks short </span><span class="line" data-startTime="680">and innocent here. </span> <span class="line" data-startTime="682">But it could actually trip you </span><span class="line" data-startTime="682">up, in that if example.com is </span><span class="line" data-startTime="688">trying to be resolved to its </span><span class="line" data-startTime="688">IP, there could be a server </span><span class="line" data-startTime="693">that doesn't know </span><span class="line" data-startTime="693">the IP address. </span></p>

<p><span class="line" data-startTime="694">And that server has to </span><span class="line" data-startTime="694">ask another server </span><span class="line" data-startTime="696">later on in the chain. </span> <span class="line" data-startTime="698">And so this lookup chain can </span><span class="line" data-startTime="698">be unpredictably long. </span> <span class="line" data-startTime="704">And so a best practice is to </span><span class="line" data-startTime="704">always minimize the number of </span><span class="line" data-startTime="708">unique domains that you use, </span><span class="line" data-startTime="708">to minimize this penalty of </span><span class="line" data-startTime="712">DNS lookup. </span> <span class="line" data-startTime="713">Although it looks short </span><span class="line" data-startTime="713">and fast here, that's </span><span class="line" data-startTime="716">not always the case. </span> <span class="line" data-startTime="719">Moving on to initial </span><span class="line" data-startTime="719">connection, this </span><span class="line" data-startTime="720">is the orange bar. </span> <span class="line" data-startTime="722">And initial connection </span><span class="line" data-startTime="722">is the TCP setup. </span> <span class="line" data-startTime="725">And after you've established </span><span class="line" data-startTime="725">your connection, after you've </span><span class="line" data-startTime="729">established the address of the </span><span class="line" data-startTime="729">server, the client or the </span><span class="line" data-startTime="733">browser needs to establish </span><span class="line" data-startTime="733">a connection. </span></p>

<p><span class="line" data-startTime="735">And this also looks short and </span><span class="line" data-startTime="735">fast, but it might not always </span><span class="line" data-startTime="740">be the case. </span> <span class="line" data-startTime="742">There's a thing called </span><span class="line" data-startTime="742">TCP slow start. </span> <span class="line" data-startTime="744">So not every connection </span><span class="line" data-startTime="744">will be as fast. </span> <span class="line" data-startTime="748">And this also is incurred </span><span class="line" data-startTime="748">every time that a new </span><span class="line" data-startTime="751">connection needs to be opened. </span> <span class="line" data-startTime="752">There's a technique that we'll </span><span class="line" data-startTime="752">see later to reuse </span><span class="line" data-startTime="754">connections. </span> <span class="line" data-startTime="757">Next is SSL negotiation. </span> <span class="line" data-startTime="758">Again, this goes hand in hand </span><span class="line" data-startTime="758">with that padlock icon. </span> <span class="line" data-startTime="761">And SSL negotiation is </span><span class="line" data-startTime="761">ensuring that you can </span><span class="line" data-startTime="765">communicate securely </span><span class="line" data-startTime="765">with the server. </span> <span class="line" data-startTime="767">So just a back step, we've </span><span class="line" data-startTime="767">established the address of the </span><span class="line" data-startTime="771">server, we've made a connection </span><span class="line" data-startTime="771">to that server, and </span><span class="line" data-startTime="773">now client and server are </span><span class="line" data-startTime="773">going to come up with an </span><span class="line" data-startTime="776">agreement about a secure channel </span><span class="line" data-startTime="776">of communication. </span></p>

<p><span class="line" data-startTime="779">And all of this is happening </span><span class="line" data-startTime="779">before the server has even </span><span class="line" data-startTime="783">done anything with what we're </span><span class="line" data-startTime="783">trying to request. </span> <span class="line" data-startTime="785">None of this so far has had </span><span class="line" data-startTime="785">anything to do with CSS. </span> <span class="line" data-startTime="788">And so that's what TTFB, or </span><span class="line" data-startTime="788">Time To First Byte, does. </span> <span class="line" data-startTime="792">So the server finally receives </span><span class="line" data-startTime="792">those request headers for the </span><span class="line" data-startTime="795">CSS resource, and it does some </span><span class="line" data-startTime="795">back end processing to get </span><span class="line" data-startTime="799">that ready for delivery. </span> <span class="line" data-startTime="802">And the width of this green </span><span class="line" data-startTime="802">bar is showing you the </span><span class="line" data-startTime="804">duration of time that </span><span class="line" data-startTime="804">the server takes to </span><span class="line" data-startTime="807">process this request. </span> <span class="line" data-startTime="809">And as with every bar that we're </span><span class="line" data-startTime="809">going to see here, it </span><span class="line" data-startTime="812">should be as small </span><span class="line" data-startTime="812">as possible. </span> <span class="line" data-startTime="815">Moving on, this blue content </span><span class="line" data-startTime="815">download bar is </span><span class="line" data-startTime="817">showing us the time. </span> <span class="line" data-startTime="820">The leftmost line on this blue </span><span class="line" data-startTime="820">chart, this blue bar, is </span><span class="line" data-startTime="823">showing you the time that the </span><span class="line" data-startTime="823">server has started to send </span><span class="line" data-startTime="827">some information back </span><span class="line" data-startTime="827">to the browser. </span></p>

<p><span class="line" data-startTime="829">And the width is time it </span><span class="line" data-startTime="829">takes to load all of </span><span class="line" data-startTime="831">the information back. </span> <span class="line" data-startTime="833">And of course, we want this to </span><span class="line" data-startTime="833">be as small as possible. </span> <span class="line" data-startTime="836">So we could try to minimize the </span><span class="line" data-startTime="836">size of the CSS resource, </span><span class="line" data-startTime="841">to ensure that it's sent more </span><span class="line" data-startTime="841">quickly, or we could have our </span><span class="line" data-startTime="846">user on a faster network, so you </span><span class="line" data-startTime="846">can send more information </span><span class="line" data-startTime="848">in less time. </span> <span class="line" data-startTime="851">We can't control that. </span> <span class="line" data-startTime="852">But what we can control is </span><span class="line" data-startTime="852">the size of the resource. </span> <span class="line" data-startTime="857">The last thing here is the </span><span class="line" data-startTime="857">number 1,247 ms. This is </span><span class="line" data-startTime="861">basically one and a </span><span class="line" data-startTime="861">quarter second to </span><span class="line" data-startTime="863">process the entire request. </span> <span class="line" data-startTime="865">And that's the leftmost edge </span><span class="line" data-startTime="865">of the teal bar to the </span><span class="line" data-startTime="868">rightmost edge of </span><span class="line" data-startTime="868">that blue bar. </span> <span class="line" data-startTime="871">Some other things of importance </span><span class="line" data-startTime="871">to note is that </span><span class="line" data-startTime="876">some colors might be missing. </span> <span class="line" data-startTime="877">You're not always loading </span><span class="line" data-startTime="877">things over SSL. </span></p>

<p><span class="line" data-startTime="880">You're not always setting </span><span class="line" data-startTime="880">up that TCP connection. </span> <span class="line" data-startTime="885">And the other thing is that it's </span><span class="line" data-startTime="885">not always contiguous. </span> <span class="line" data-startTime="887">Here, you see all colors </span><span class="line" data-startTime="887">next to each other. </span> <span class="line" data-startTime="889">But you might see DNS lookup </span><span class="line" data-startTime="889">and initial connection </span><span class="line" data-startTime="893">separated from time to first </span><span class="line" data-startTime="893">byte and content download. </span> <span class="line" data-startTime="895">It looks a little strange </span><span class="line" data-startTime="895">at first. </span> <span class="line" data-startTime="897">You might wonder if </span><span class="line" data-startTime="897">something broke. </span> <span class="line" data-startTime="898">It's totally OK. </span> <span class="line" data-startTime="899">It's actually a good thing. </span> <span class="line" data-startTime="900">This means that you're </span><span class="line" data-startTime="900">pre-fetching, or </span><span class="line" data-startTime="902">pre-connecting to the server. </span> <span class="line" data-startTime="906">This is more typical in newer </span><span class="line" data-startTime="906">browsers, and it's something </span><span class="line" data-startTime="909">that you can control using HTML </span><span class="line" data-startTime="909">meta tags in the head. </span> <span class="line" data-startTime="918">OK, so for every request, </span><span class="line" data-startTime="918">there is a response. </span> <span class="line" data-startTime="922">And sometimes, those responses </span><span class="line" data-startTime="922">are to say that what you </span><span class="line" data-startTime="927">wanted was not actually in </span><span class="line" data-startTime="927">the location at which you </span><span class="line" data-startTime="929">requested it. </span></p>

<p><span class="line" data-startTime="930">And in this example, </span><span class="line" data-startTime="930">we're loading </span><span class="line" data-startTime="934">facebook.com over HTTP. </span> <span class="line" data-startTime="937">And facebook.com has </span><span class="line" data-startTime="937">a 302 redirect. </span> <span class="line" data-startTime="941">302 is found. </span> <span class="line" data-startTime="943">Found is basically saying, </span><span class="line" data-startTime="943">it moved temporarily. </span> <span class="line" data-startTime="946">You can continue to use </span><span class="line" data-startTime="946">this resource URI. </span> <span class="line" data-startTime="949">And after facebook.com </span><span class="line" data-startTime="949">redirects to https </span><span class="line" data-startTime="952">facebook.com, it does another </span><span class="line" data-startTime="952">TCP connection. </span> <span class="line" data-startTime="957">It does SSL negotiation now, </span><span class="line" data-startTime="957">because we're on a secure </span><span class="line" data-startTime="959">request, and then there's some </span><span class="line" data-startTime="959">time to first byte back end </span><span class="line" data-startTime="963">processing time. </span> <span class="line" data-startTime="964">And finally, after one and a </span><span class="line" data-startTime="964">half seconds, it does a 301 </span><span class="line" data-startTime="968">Moved Permanently redirect to </span><span class="line" data-startTime="968">https://www.facebook.com. </span></p>

<p><span class="line" data-startTime="972">I'm not trying to pick </span><span class="line" data-startTime="972">on Facebook. </span> <span class="line" data-startTime="974">This is just a really good </span><span class="line" data-startTime="974">example of redirects, and the </span><span class="line" data-startTime="977">penalty it can incur. </span> <span class="line" data-startTime="979">So we see that, after all is </span><span class="line" data-startTime="979">said and done, the start </span><span class="line" data-startTime="982">offset for the third request </span><span class="line" data-startTime="982">is about two seconds. </span> <span class="line" data-startTime="987">So is Facebook wrong to do </span><span class="line" data-startTime="987">this type of redirect? </span><span class="line" data-startTime="991">No. </span> <span class="line" data-startTime="991">This is probably a deliberate </span><span class="line" data-startTime="991">move to funnel </span><span class="line" data-startTime="994">people to https www. </span> <span class="line" data-startTime="997">And in fact, this screen shot </span><span class="line" data-startTime="997">was taken a few months ago, </span><span class="line" data-startTime="1001">and they've since improved it so </span><span class="line" data-startTime="1001">that request one does a 301 </span><span class="line" data-startTime="1005">directly to request three, </span><span class="line" data-startTime="1005">which is very good. </span> <span class="line" data-startTime="1008">And so in that case, instead </span><span class="line" data-startTime="1008">of loading at two seconds, </span><span class="line" data-startTime="1011">request three, in theory, should </span><span class="line" data-startTime="1011">load at half a second, </span><span class="line" data-startTime="1013">which is a great improvement. </span></p>

<p><span class="line" data-startTime="1016">And that 301 Moved Permanently, </span><span class="line" data-startTime="1016">just as a side </span><span class="line" data-startTime="1019">note, is just saying that you </span><span class="line" data-startTime="1019">should cache this redirect, </span><span class="line" data-startTime="1024">because you should not </span><span class="line" data-startTime="1024">make this request </span><span class="line" data-startTime="1026">again in the future. </span> <span class="line" data-startTime="1027">So as long as that's in cache, </span><span class="line" data-startTime="1027">hitting facebook.com over http </span><span class="line" data-startTime="1031">should redirect on the client </span><span class="line" data-startTime="1031">side to https www. </span> <span class="line" data-startTime="1036">And that's an efficiency </span><span class="line" data-startTime="1036">on the client side. </span> <span class="line" data-startTime="1040">Moving on. </span> <span class="line" data-startTime="1040">Some other types of responses </span><span class="line" data-startTime="1040">have to do </span><span class="line" data-startTime="1043">with caching, again. </span> <span class="line" data-startTime="1044">In this case, we're looking </span><span class="line" data-startTime="1044">at Not Modified. </span></p>

<p><span class="line" data-startTime="1047">And this is made on what's </span><span class="line" data-startTime="1047">known as the </span><span class="line" data-startTime="1048">Conditional GET request. </span> <span class="line" data-startTime="1050">This happens when there's some </span><span class="line" data-startTime="1050">information that the client </span><span class="line" data-startTime="1054">knows about the resource, but it </span><span class="line" data-startTime="1054">doesn't know if it's still </span><span class="line" data-startTime="1057">fresh, or if it should </span><span class="line" data-startTime="1057">continue to </span><span class="line" data-startTime="1059">use it from the cache. </span> <span class="line" data-startTime="1060">And so this is typically done </span><span class="line" data-startTime="1060">when the resource is missing, </span><span class="line" data-startTime="1066">and expires, or a cache-control </span><span class="line" data-startTime="1066">max-age header. </span> <span class="line" data-startTime="1069">And these headers tell the </span><span class="line" data-startTime="1069">client to keep the resource in </span><span class="line" data-startTime="1072">cache for a certain </span><span class="line" data-startTime="1072">amount of time. </span> <span class="line" data-startTime="1075">And when the client lacks </span><span class="line" data-startTime="1075">this information, it </span><span class="line" data-startTime="1078">has to ask the server. </span> <span class="line" data-startTime="1079">And so we see in the chart to </span><span class="line" data-startTime="1079">the left the time to first </span><span class="line" data-startTime="1085">byte, but no blue content </span><span class="line" data-startTime="1085">download. </span> <span class="line" data-startTime="1087">So there is no content download </span><span class="line" data-startTime="1087">because the 304 </span><span class="line" data-startTime="1090">response is telling the client </span><span class="line" data-startTime="1090">to continue to use </span><span class="line" data-startTime="1093">what it has in cache. </span></p>

<p><span class="line" data-startTime="1094">Caching is a great thing. </span> <span class="line" data-startTime="1096">It should continue to be used. </span> <span class="line" data-startTime="1098">But so why could this be </span><span class="line" data-startTime="1098">a bad antipattern? </span><span class="line" data-startTime="1102">So if the client has it in </span><span class="line" data-startTime="1102">cache, it should continue to </span><span class="line" data-startTime="1106">use it in cache, and it should </span><span class="line" data-startTime="1106">know how long it's fresh. </span> <span class="line" data-startTime="1110">When it doesn't have that </span><span class="line" data-startTime="1110">information, it </span><span class="line" data-startTime="1111">has to ask the server. </span> <span class="line" data-startTime="1113">And so when it's all said and </span><span class="line" data-startTime="1113">done, these green lines add </span><span class="line" data-startTime="1117">up, and it comes out to </span><span class="line" data-startTime="1117">be about 10 seconds. </span> <span class="line" data-startTime="1120">So instead of instantly using </span><span class="line" data-startTime="1120">what it has in cache, it has </span><span class="line" data-startTime="1123">to wait another 10 seconds. </span> <span class="line" data-startTime="1126">And there's a lot </span><span class="line" data-startTime="1126">going on here. </span> <span class="line" data-startTime="1129">There are many, many requests </span><span class="line" data-startTime="1129">having to be made. </span> <span class="line" data-startTime="1132">So what we can do in this second </span><span class="line" data-startTime="1132">bullet point is to say </span><span class="line" data-startTime="1135">that we should cache static </span><span class="line" data-startTime="1135">content with a long TTL, or </span><span class="line" data-startTime="1138">Time To Live. </span> <span class="line" data-startTime="1140">But we could do that with a </span><span class="line" data-startTime="1140">cache-control max-age header. </span> <span class="line" data-startTime="1143">And this pretty big number. </span></p>

<p><span class="line" data-startTime="1145">31,536, is the number of </span><span class="line" data-startTime="1145">seconds in a year. </span> <span class="line" data-startTime="1150">So one year is the longest </span><span class="line" data-startTime="1150">time to indicate that a </span><span class="line" data-startTime="1157">resource should be cached </span><span class="line" data-startTime="1157">indefinitely. </span> <span class="line" data-startTime="1160">In theory, you could say, I want </span><span class="line" data-startTime="1160">this to be cached for 10 </span><span class="line" data-startTime="1163">years, or something. </span> <span class="line" data-startTime="1164">But that actually violates </span><span class="line" data-startTime="1164">the written spec. </span> <span class="line" data-startTime="1167">So when cache-control is used </span><span class="line" data-startTime="1167">in conjunction with </span><span class="line" data-startTime="1170">last-modified, we have two </span><span class="line" data-startTime="1170">bits of information. </span> <span class="line" data-startTime="1173">We know the last time that this </span><span class="line" data-startTime="1173">resource was touched, and </span><span class="line" data-startTime="1177">that happens to be </span><span class="line" data-startTime="1177">today's date. </span> <span class="line" data-startTime="1178">And we know that it should </span><span class="line" data-startTime="1178">continue to be served from </span><span class="line" data-startTime="1181">cache for the next year. </span> <span class="line" data-startTime="1183">And some people sort of get </span><span class="line" data-startTime="1183">nervous when they see this </span><span class="line" data-startTime="1187">type of information being sent </span><span class="line" data-startTime="1187">to the client, because they </span><span class="line" data-startTime="1190">might think, well, if it's going </span><span class="line" data-startTime="1190">to be cached for a year, </span><span class="line" data-startTime="1194">what if I want to make </span><span class="line" data-startTime="1194">a change tomorrow? </span><span class="line" data-startTime="1196">And how will I ensure that they </span><span class="line" data-startTime="1196">don't just have the old, </span><span class="line" data-startTime="1199">outdated information? </span><span class="line" data-startTime="1200">This could be serious, if you're </span><span class="line" data-startTime="1200">serving, like making a </span><span class="line" data-startTime="1203">security patch. </span></p>

<p><span class="line" data-startTime="1204">So there's a technique known </span><span class="line" data-startTime="1204">as cache-busting. </span> <span class="line" data-startTime="1208">And there are a couple </span><span class="line" data-startTime="1208">ways to do it. </span> <span class="line" data-startTime="1210">One is to append a query string </span><span class="line" data-startTime="1210">parameter at the end of </span><span class="line" data-startTime="1213">the resource. </span> <span class="line" data-startTime="1214">And the other suggested way </span><span class="line" data-startTime="1214">here is to just change the </span><span class="line" data-startTime="1217">file name itself. </span> <span class="line" data-startTime="1219">In this example, instead of </span><span class="line" data-startTime="1219">serving style.css, we have </span><span class="line" data-startTime="1223">style underscore and then </span><span class="line" data-startTime="1223">some date stamp. </span> <span class="line" data-startTime="1226">And we can change that date </span><span class="line" data-startTime="1226">stamp to whatever we want. </span></p>

<p><span class="line" data-startTime="1229">Most commonly, it's the date </span><span class="line" data-startTime="1229">that the file was modified. </span> <span class="line" data-startTime="1233">And so tomorrow, we might </span><span class="line" data-startTime="1233">set this to 2013 06 14. </span> <span class="line" data-startTime="1237">And so what happens when </span><span class="line" data-startTime="1237">there is a new </span><span class="line" data-startTime="1241">resource being requested? </span><span class="line" data-startTime="1244">It totally ignores </span><span class="line" data-startTime="1244">what's in cache. </span> <span class="line" data-startTime="1245">So if the cache is full, it </span><span class="line" data-startTime="1245">might see this new resource </span><span class="line" data-startTime="1250">being come in, and then eject </span><span class="line" data-startTime="1250">the old one, thus making room </span><span class="line" data-startTime="1253">for this new resource. </span> <span class="line" data-startTime="1255">So caching is very important. </span> <span class="line" data-startTime="1257">It's said, sometimes, that the </span><span class="line" data-startTime="1257">fastest request is the one you </span><span class="line" data-startTime="1260">never even have to make </span><span class="line" data-startTime="1260">in the first place. </span> <span class="line" data-startTime="1262">So by leveraging caching, and </span><span class="line" data-startTime="1262">doing so effectively, you're </span><span class="line" data-startTime="1266">tremendously speeding up the </span><span class="line" data-startTime="1266">client-side experience on </span><span class="line" data-startTime="1269">subsequent repeat views. </span></p>

<p><span class="line" data-startTime="1272">Caching does not help them so </span><span class="line" data-startTime="1272">much when they're hitting your </span><span class="line" data-startTime="1275">website for the first time. </span> <span class="line" data-startTime="1279">So the other type of response </span><span class="line" data-startTime="1279">is an error. </span> <span class="line" data-startTime="1281">And I think we're all familiar </span><span class="line" data-startTime="1281">with what a 404 Not Found </span><span class="line" data-startTime="1284">error message is. </span> <span class="line" data-startTime="1286">So I won't spend a </span><span class="line" data-startTime="1286">lot of time here. </span> <span class="line" data-startTime="1287">But this waterfall gives us an </span><span class="line" data-startTime="1287">opportunity to sort of think </span><span class="line" data-startTime="1294">about what might have </span><span class="line" data-startTime="1294">gone wrong here. </span> <span class="line" data-startTime="1296">It's interesting, 45, 46, and </span><span class="line" data-startTime="1296">47, are for resources named </span><span class="line" data-startTime="1301">menu two, three, and four, and </span><span class="line" data-startTime="1301">48 through 50 are for an </span><span class="line" data-startTime="1305">undefined resource. </span> <span class="line" data-startTime="1307">So we might wonder what </span><span class="line" data-startTime="1307">happened here. </span> <span class="line" data-startTime="1310">And I laugh, because in my </span><span class="line" data-startTime="1310">mind, when I saw this </span><span class="line" data-startTime="1314">waterfall, I thought maybe </span><span class="line" data-startTime="1314">they were in some type of </span><span class="line" data-startTime="1316">JavaScript loop, and they ran </span><span class="line" data-startTime="1316">outside the edge of their </span><span class="line" data-startTime="1320">array, and they had no more </span><span class="line" data-startTime="1320">resources to fetch. </span></p>

<p><span class="line" data-startTime="1323">So it's sort of funny to see it </span><span class="line" data-startTime="1323">like this, but it is a bad </span><span class="line" data-startTime="1327">pattern, because it's holding </span><span class="line" data-startTime="1327">up everything after it. </span> <span class="line" data-startTime="1330">We can see the delay </span><span class="line" data-startTime="1330">that this incurs. </span> <span class="line" data-startTime="1331">It takes half a second </span><span class="line" data-startTime="1331">each, with </span><span class="line" data-startTime="1333">maybe a second in between. </span> <span class="line" data-startTime="1335">These gray lines, these gray </span><span class="line" data-startTime="1335">vertical lines, are probably </span><span class="line" data-startTime="1338">one second indicators. </span> <span class="line" data-startTime="1340">And so requests 51 and below </span><span class="line" data-startTime="1340">are being held up by these </span><span class="line" data-startTime="1345">404-ing responses. </span> <span class="line" data-startTime="1347">So it's important to spot </span><span class="line" data-startTime="1347">these red lines. </span> <span class="line" data-startTime="1351">That's why they stand out so </span><span class="line" data-startTime="1351">much in your waterfall. </span> <span class="line" data-startTime="1354">And take care of that as </span><span class="line" data-startTime="1354">soon as you could. </span></p>

<p><span class="line" data-startTime="1359">The other type of response or </span><span class="line" data-startTime="1359">message you might see in a </span><span class="line" data-startTime="1364">waterfall is for request </span><span class="line" data-startTime="1364">cancelled. </span> <span class="line" data-startTime="1367">And this is kind of a strange </span><span class="line" data-startTime="1367">thing, because it says it </span><span class="line" data-startTime="1370">takes 0 milliseconds. </span> <span class="line" data-startTime="1371">And we're trained to think that </span><span class="line" data-startTime="1371">the smaller the duration </span><span class="line" data-startTime="1375">the better, but 0 is actually </span><span class="line" data-startTime="1375">not all that good. </span> <span class="line" data-startTime="1378">This is a strange waterfall. </span> <span class="line" data-startTime="1379">This was actually created on </span><span class="line" data-startTime="1379">the fly using the waterfall </span><span class="line" data-startTime="1385">customization feature </span><span class="line" data-startTime="1385">of WebPagetest. </span> <span class="line" data-startTime="1387">And so note that the request </span><span class="line" data-startTime="1387">numbers are out of </span><span class="line" data-startTime="1391">order on the left. </span> <span class="line" data-startTime="1392">And so it goes from 51, 2 and </span><span class="line" data-startTime="1392">3, to 84, 86, and 87. </span></p>

<p><span class="line" data-startTime="1398">And request 51 was made </span><span class="line" data-startTime="1398">at about three </span><span class="line" data-startTime="1402">and a quarter seconds. </span> <span class="line" data-startTime="1403">And looking closely, request 84 </span><span class="line" data-startTime="1403">happens a couple of seconds </span><span class="line" data-startTime="1409">later for the same </span><span class="line" data-startTime="1409">exact resource. </span> <span class="line" data-startTime="1411">It's kind of hard to tell, but </span><span class="line" data-startTime="1411">these are all three different </span><span class="line" data-startTime="1414">image formats. </span> <span class="line" data-startTime="1416">So the gif image was requested </span><span class="line" data-startTime="1416">at 51, and again on 84. </span> <span class="line" data-startTime="1421">And this is the same resource, </span><span class="line" data-startTime="1421">being requested twice. </span> <span class="line" data-startTime="1424">And the thing that's strange, </span><span class="line" data-startTime="1424">you might look at your code </span><span class="line" data-startTime="1427">and try to assure yourself, </span><span class="line" data-startTime="1427">well, I'm </span><span class="line" data-startTime="1429">only calling it once. </span> <span class="line" data-startTime="1430">Why is it showing up twice </span><span class="line" data-startTime="1430">in the waterfall? </span><span class="line" data-startTime="1433">So the reason why is that it's </span><span class="line" data-startTime="1433">being canceled the first time. </span> <span class="line" data-startTime="1436">It attempted to load this </span><span class="line" data-startTime="1436">resource at an earlier time, </span><span class="line" data-startTime="1440">and it failed for some reason, </span><span class="line" data-startTime="1440">and then it tried again, this </span><span class="line" data-startTime="1443">time successfully, later on. </span></p>

<p><span class="line" data-startTime="1445">And the second half of the </span><span class="line" data-startTime="1445">slide is showing you the </span><span class="line" data-startTime="1451">reason why this happens. </span> <span class="line" data-startTime="1452">And it occurs because of </span><span class="line" data-startTime="1452">something known as the </span><span class="line" data-startTime="1455">lookahead pre-parser, where it </span><span class="line" data-startTime="1455">tries to look ahead in your </span><span class="line" data-startTime="1460">code, and guess what you're </span><span class="line" data-startTime="1460">going to need next. </span> <span class="line" data-startTime="1463">And it will try to load that as </span><span class="line" data-startTime="1463">early as possible for it, </span><span class="line" data-startTime="1465">which is a great feature. </span> <span class="line" data-startTime="1468">Although, there are some things </span><span class="line" data-startTime="1468">you could do in your </span><span class="line" data-startTime="1471">code to trip it up and cause </span><span class="line" data-startTime="1471">it to not work so well. </span> <span class="line" data-startTime="1475">And these lines in red are </span><span class="line" data-startTime="1475">showing you where it could get </span><span class="line" data-startTime="1480">tripped up. </span> <span class="line" data-startTime="1480">So the first line is the meta </span><span class="line" data-startTime="1480">tag for the http-equivalent of </span><span class="line" data-startTime="1486">the character set. </span> <span class="line" data-startTime="1487">And character set is important </span><span class="line" data-startTime="1487">because it tells the rendering </span><span class="line" data-startTime="1491">document how to interpret the </span><span class="line" data-startTime="1491">data that's being presented. </span> <span class="line" data-startTime="1496">A common character set, </span><span class="line" data-startTime="1496">for example, is UTF-8. </span></p>

<p><span class="line" data-startTime="1500">The next meta tag is the </span><span class="line" data-startTime="1500">X-UA compatible. </span> <span class="line" data-startTime="1503">This is to tell the browser </span><span class="line" data-startTime="1503">to render in a </span><span class="line" data-startTime="1505">different user agent. </span> <span class="line" data-startTime="1507">So for example, you might </span><span class="line" data-startTime="1507">want IE9 to behave </span><span class="line" data-startTime="1510">like IE8, and so on. </span> <span class="line" data-startTime="1512">Next is the base tag. </span> <span class="line" data-startTime="1514">I hadn't known about the </span><span class="line" data-startTime="1514">base tag previously. </span> <span class="line" data-startTime="1516">I've never used it. </span> <span class="line" data-startTime="1517">So in looking it up, </span><span class="line" data-startTime="1517">I was surprised to </span><span class="line" data-startTime="1519">find what it does. </span> <span class="line" data-startTime="1521">And the base tag pretty much </span><span class="line" data-startTime="1521">supplants the host on which </span><span class="line" data-startTime="1529">relative paths are </span><span class="line" data-startTime="1529">being served. </span> <span class="line" data-startTime="1531">So if you're on example.com, </span><span class="line" data-startTime="1531">and you want to load a </span><span class="line" data-startTime="1534">resource slash example.php, </span><span class="line" data-startTime="1534">base will allow you to </span><span class="line" data-startTime="1541">supplant that host name </span><span class="line" data-startTime="1541">with example2.com. </span> <span class="line" data-startTime="1543">So you could maintain relative </span><span class="line" data-startTime="1543">paths, but only change the </span><span class="line" data-startTime="1548">code in one place. </span></p>

<p><span class="line" data-startTime="1551">And base sort of reminds me </span><span class="line" data-startTime="1551">of the with statement in </span><span class="line" data-startTime="1553">JavaScript, if anybody's </span><span class="line" data-startTime="1553">familiar. </span> <span class="line" data-startTime="1556">The with statement lets you </span><span class="line" data-startTime="1556">supplant the context of a </span><span class="line" data-startTime="1560">JavaScript object. </span> <span class="line" data-startTime="1562">And there's a saying that </span><span class="line" data-startTime="1562">the with statement </span><span class="line" data-startTime="1564">is considered harmful. </span> <span class="line" data-startTime="1564">And I'll extend that </span><span class="line" data-startTime="1564">to the base tag. </span> <span class="line" data-startTime="1566">The base tag is considered </span><span class="line" data-startTime="1566">harmful, for the reason that </span><span class="line" data-startTime="1569">it can cause these </span><span class="line" data-startTime="1569">cancel requests. </span> <span class="line" data-startTime="1572">It's not used too often, but </span><span class="line" data-startTime="1572">when it is, improperly, it can </span><span class="line" data-startTime="1576">slow down your website. </span> <span class="line" data-startTime="1578">So the reason why these things </span><span class="line" data-startTime="1578">are contributing to this </span><span class="line" data-startTime="1580">antipattern is because when </span><span class="line" data-startTime="1580">they're out of order, the </span><span class="line" data-startTime="1584">rendering agent will make </span><span class="line" data-startTime="1584">false assumptions. </span></p>

<p><span class="line" data-startTime="1588">So, for example, taking </span><span class="line" data-startTime="1588">character set. </span> <span class="line" data-startTime="1592">If the character set is defined </span><span class="line" data-startTime="1592">later on in the </span><span class="line" data-startTime="1595">document, for example, the </span><span class="line" data-startTime="1595">bottom of your HTML head, it </span><span class="line" data-startTime="1599">will have to make an assumption </span><span class="line" data-startTime="1599">as it processes the </span><span class="line" data-startTime="1601">document that it's a particular </span><span class="line" data-startTime="1601">character set. </span> <span class="line" data-startTime="1603">It might not agree with what </span><span class="line" data-startTime="1603">you set it to be later. </span> <span class="line" data-startTime="1607">So it'll start making requests </span><span class="line" data-startTime="1607">under a certain assumption of </span><span class="line" data-startTime="1610">character set. </span> <span class="line" data-startTime="1611">And as soon as it comes across </span><span class="line" data-startTime="1611">this meta tag saying that it's </span><span class="line" data-startTime="1614">something else entirely, it </span><span class="line" data-startTime="1614">will have to cancel, and </span><span class="line" data-startTime="1616">basically throw out those </span><span class="line" data-startTime="1616">previous requests. </span> <span class="line" data-startTime="1620">And then there is a note at </span><span class="line" data-startTime="1620">the bottom that this is </span><span class="line" data-startTime="1622">Internet Explorer specific. </span> <span class="line" data-startTime="1624">I've seen this especially in </span><span class="line" data-startTime="1624">Internet Explorer 7, which </span><span class="line" data-startTime="1626">hopefully we're not testing </span><span class="line" data-startTime="1626">too much in. </span></p>

<p><span class="line" data-startTime="1628">But if we are, this is why you </span><span class="line" data-startTime="1628">might see this pattern. </span> <span class="line" data-startTime="1631">And I will share these slides, </span><span class="line" data-startTime="1631">and I encourage you </span><span class="line" data-startTime="1633">to click this link. </span> <span class="line" data-startTime="1634">It has a great article on the </span><span class="line" data-startTime="1634">Microsoft blog about all of </span><span class="line" data-startTime="1638">this, and why this happens. </span> <span class="line" data-startTime="1642">Moving on now to navigation </span><span class="line" data-startTime="1642">timing. </span> <span class="line" data-startTime="1646">When you are using a more modern </span><span class="line" data-startTime="1646">browser, you might see </span><span class="line" data-startTime="1649">some extra colors in your </span><span class="line" data-startTime="1649">waterfall chart. </span> <span class="line" data-startTime="1653">Almost all browsers that I </span><span class="line" data-startTime="1653">know of will have this </span><span class="line" data-startTime="1656">vertical green and </span><span class="line" data-startTime="1656">dark blue line. </span></p>

<p><span class="line" data-startTime="1660">The green line is Start Render, </span><span class="line" data-startTime="1660">the blue line is </span><span class="line" data-startTime="1662">Document Complete. </span> <span class="line" data-startTime="1663">But we also have this purple, </span><span class="line" data-startTime="1663">and light blue bars. </span> <span class="line" data-startTime="1668">And unlike the green lines, </span><span class="line" data-startTime="1668">these actually have a width </span><span class="line" data-startTime="1673">associated with them. </span> <span class="line" data-startTime="1675">And so starting from left to </span><span class="line" data-startTime="1675">right, this purple bar, </span><span class="line" data-startTime="1679">domContentLoaded, is pretty </span><span class="line" data-startTime="1679">much equivalent to </span><span class="line" data-startTime="1682">document.ready. </span> <span class="line" data-startTime="1683">So if you're familiar with </span><span class="line" data-startTime="1683">jQuery, you might have a ready </span><span class="line" data-startTime="1688">event handler. </span> <span class="line" data-startTime="1688">So this will pretty much be </span><span class="line" data-startTime="1688">fired whenever the document is </span><span class="line" data-startTime="1692">ready to be &mdash; </span><span class="line" data-startTime="1694">or the document object model </span><span class="line" data-startTime="1694">is done being processed. </span> <span class="line" data-startTime="1699">And the width of this line is </span><span class="line" data-startTime="1699">representative of the amount </span><span class="line" data-startTime="1703">of time you're spending in </span><span class="line" data-startTime="1703">that event handler in </span><span class="line" data-startTime="1704">JavaScript. </span> <span class="line" data-startTime="1706">And the common theme today is </span><span class="line" data-startTime="1706">everything should be as narrow </span><span class="line" data-startTime="1709">as possible. </span> <span class="line" data-startTime="1709">So a bar that is about 1.6 </span><span class="line" data-startTime="1709">seconds wide is pretty bad. </span></p>

<p><span class="line" data-startTime="1715">And keeping in mind that the </span><span class="line" data-startTime="1715">browser is single threaded, </span><span class="line" data-startTime="1720">your JavaScript is going to be </span><span class="line" data-startTime="1720">taking up time that the user </span><span class="line" data-startTime="1723">could be interacting </span><span class="line" data-startTime="1723">with the page. </span> <span class="line" data-startTime="1724">So that's one reason. </span> <span class="line" data-startTime="1725">The other reason is that this </span><span class="line" data-startTime="1725">purple bar comes, in this </span><span class="line" data-startTime="1729">case, immediately before </span><span class="line" data-startTime="1729">the green line. </span> <span class="line" data-startTime="1731">The green line is Start </span><span class="line" data-startTime="1731">Render, or the first </span><span class="line" data-startTime="1733">paint of the page. </span> <span class="line" data-startTime="1735">And first paint means this is </span><span class="line" data-startTime="1735">the time that something was </span><span class="line" data-startTime="1739">finally displayed </span><span class="line" data-startTime="1739">on the screen. </span> <span class="line" data-startTime="1741">So the green line occurs at </span><span class="line" data-startTime="1741">about 2.8 seconds here. </span></p>

<p><span class="line" data-startTime="1745">So that literally means the user </span><span class="line" data-startTime="1745">had a blank white page up </span><span class="line" data-startTime="1748">until this point, when something </span><span class="line" data-startTime="1748">was displayed. </span> <span class="line" data-startTime="1751">And so thinking about these two </span><span class="line" data-startTime="1751">events next to each other, </span><span class="line" data-startTime="1757">we want to display something </span><span class="line" data-startTime="1757">to the page as soon as </span><span class="line" data-startTime="1760">possible, and then we could </span><span class="line" data-startTime="1760">do our script processing. </span> <span class="line" data-startTime="1764">So by having purple before </span><span class="line" data-startTime="1764">green, that's further delaying </span><span class="line" data-startTime="1770">this Start Render event. </span> <span class="line" data-startTime="1773">And moving on to this light </span><span class="line" data-startTime="1773">blue loadEvent, this is </span><span class="line" data-startTime="1776">equivalent to the onload event </span><span class="line" data-startTime="1776">handler in your JavaScript. </span> <span class="line" data-startTime="1780">This is more commonly a lot </span><span class="line" data-startTime="1780">shorter than the purple. </span></p>

<p><span class="line" data-startTime="1784">Onload event handling is useful </span><span class="line" data-startTime="1784">if you want to preload </span><span class="line" data-startTime="1788">some resources later on the </span><span class="line" data-startTime="1788">page below the fold, or </span><span class="line" data-startTime="1792">triggering other types of </span><span class="line" data-startTime="1792">nonessential things, maybe </span><span class="line" data-startTime="1798">telling an ad to kick in, or </span><span class="line" data-startTime="1798">sending back some data to a </span><span class="line" data-startTime="1802">web performance beacon. </span> <span class="line" data-startTime="1805">Finally, Document Complete is </span><span class="line" data-startTime="1805">roughly equivalent to the </span><span class="line" data-startTime="1808">loadEventStart. </span> <span class="line" data-startTime="1811">And typically this occurs after </span><span class="line" data-startTime="1811">the load event handler. </span> <span class="line" data-startTime="1814">But just keep in mind that it's </span><span class="line" data-startTime="1814">the loadEventStart is the </span><span class="line" data-startTime="1819">associated event here. </span> <span class="line" data-startTime="1821">So using all these terminologies </span><span class="line" data-startTime="1821">of timing </span><span class="line" data-startTime="1827">events, we might sort of get </span><span class="line" data-startTime="1827">confused about what they mean </span><span class="line" data-startTime="1832">and how they relate </span><span class="line" data-startTime="1832">to each other. </span> <span class="line" data-startTime="1834">So this is the chart made by </span><span class="line" data-startTime="1834">the working group of the </span><span class="line" data-startTime="1839">navigation timing API. </span> <span class="line" data-startTime="1841">And this shows us the ordering </span><span class="line" data-startTime="1841">of events in this API. </span> <span class="line" data-startTime="1846">And this is all available to </span><span class="line" data-startTime="1846">you in newer browsers. </span> <span class="line" data-startTime="1849">But when I saw this, I </span><span class="line" data-startTime="1849">kind of got a little </span><span class="line" data-startTime="1851">lost in all the details. </span> <span class="line" data-startTime="1852">So one thing that I found </span><span class="line" data-startTime="1852">helpful was to just mute out </span><span class="line" data-startTime="1856">everything that's not directly </span><span class="line" data-startTime="1856">relevant to WebPagetest. </span></p>

<p><span class="line" data-startTime="1859">And we're left with </span><span class="line" data-startTime="1859">all of this. </span> <span class="line" data-startTime="1862">But even still, I wasn't really </span><span class="line" data-startTime="1862">satisfied, so I did </span><span class="line" data-startTime="1864">some color coding, and we </span><span class="line" data-startTime="1864">arrived at this chart, which I </span><span class="line" data-startTime="1868">found to be really helpful. </span> <span class="line" data-startTime="1870">The colors correspond to the </span><span class="line" data-startTime="1870">previous slide, and we can see </span><span class="line" data-startTime="1875">directly how these colorings </span><span class="line" data-startTime="1875">are related back to the </span><span class="line" data-startTime="1878">navigation timing API. </span> <span class="line" data-startTime="1882">domContentLoaded is occupied </span><span class="line" data-startTime="1882">with this entire purple bar. </span> <span class="line" data-startTime="1886">That light blue bar is occupied </span><span class="line" data-startTime="1886">in that entire </span><span class="line" data-startTime="1889">loadEvent handler. </span> <span class="line" data-startTime="1890">And then we're left with these </span><span class="line" data-startTime="1890">green and blue lines. </span> <span class="line" data-startTime="1894">So working from right to left, </span><span class="line" data-startTime="1894">this blue line is immediately </span><span class="line" data-startTime="1899">after loadEventStart. </span> <span class="line" data-startTime="1900">But this green line is sort of </span><span class="line" data-startTime="1900">floating around in the middle </span><span class="line" data-startTime="1903">of the processing bar. </span> <span class="line" data-startTime="1904">And green, first paint, is </span><span class="line" data-startTime="1904">not directly tied to any </span><span class="line" data-startTime="1908">performance event. </span></p>

<p><span class="line" data-startTime="1910">We can't really qualitatively </span><span class="line" data-startTime="1910">measure the time of the first </span><span class="line" data-startTime="1916">paint just by looking </span><span class="line" data-startTime="1916">at the data. </span> <span class="line" data-startTime="1917">It has more to do with the </span><span class="line" data-startTime="1917">visuals on the page. </span> <span class="line" data-startTime="1921">And so this is an example of </span><span class="line" data-startTime="1921">one perceived performance </span><span class="line" data-startTime="1924">metric, or a metric in which </span><span class="line" data-startTime="1924">the user is the one </span><span class="line" data-startTime="1930">experiencing this type of event, </span><span class="line" data-startTime="1930">rather than an event </span><span class="line" data-startTime="1934">being fired off in an amount </span><span class="line" data-startTime="1934">of milliseconds. </span> <span class="line" data-startTime="1937">This is sort of the feeling </span><span class="line" data-startTime="1937">that a user gets when </span><span class="line" data-startTime="1939">something happens. </span> <span class="line" data-startTime="1940">And so that's why it's floating </span><span class="line" data-startTime="1940">around in the middle. </span> <span class="line" data-startTime="1945">OK, so moving on to some other </span><span class="line" data-startTime="1945">patterns of &mdash; instead of </span><span class="line" data-startTime="1949">requests and their responses as </span><span class="line" data-startTime="1949">one unit, now we're going </span><span class="line" data-startTime="1952">to look at requests, how they </span><span class="line" data-startTime="1952">interact with each other, and </span><span class="line" data-startTime="1956">could potentially negatively </span><span class="line" data-startTime="1956">affect performance. </span> <span class="line" data-startTime="1959">So this is an antipattern </span><span class="line" data-startTime="1959">known as request </span><span class="line" data-startTime="1961">serialization, also known as </span><span class="line" data-startTime="1961">the stair step pattern. </span></p>

<p><span class="line" data-startTime="1965">And for reference, I included </span><span class="line" data-startTime="1965">this red slope line to left, </span><span class="line" data-startTime="1969">just to show you the direction </span><span class="line" data-startTime="1969">that we're going. </span> <span class="line" data-startTime="1972">It's down and to the </span><span class="line" data-startTime="1972">right, and it's at </span><span class="line" data-startTime="1974">an OK type of slope. </span> <span class="line" data-startTime="1977">It's not totally vertical, it's </span><span class="line" data-startTime="1977">not totally horizontal. </span> <span class="line" data-startTime="1980">But the fact that it extends </span><span class="line" data-startTime="1980">outward in that manner is an </span><span class="line" data-startTime="1983">indicator that this </span><span class="line" data-startTime="1983">is an antipattern. </span> <span class="line" data-startTime="1987">So serialization occurs </span><span class="line" data-startTime="1987">in this way when </span><span class="line" data-startTime="1990">there are many requests. </span> <span class="line" data-startTime="1991">You're trying to get a lot </span><span class="line" data-startTime="1991">out, and get a lot of </span><span class="line" data-startTime="1994">information back. </span></p>

<p><span class="line" data-startTime="1995">But the problem is that there </span><span class="line" data-startTime="1995">are few connections, typically </span><span class="line" data-startTime="1999">between two and six. </span> <span class="line" data-startTime="2001">And a connection is basically </span><span class="line" data-startTime="2001">like lanes on a highway. </span> <span class="line" data-startTime="2005">You can fit only so many cars </span><span class="line" data-startTime="2005">horizontally before traffic </span><span class="line" data-startTime="2013">starts to pile up behind, like </span><span class="line" data-startTime="2013">bumper to bumper traffic. </span> <span class="line" data-startTime="2016">So this is an example of bumper </span><span class="line" data-startTime="2016">to bumper traffic where </span><span class="line" data-startTime="2019">one request cannot even be </span><span class="line" data-startTime="2019">started until another one has </span><span class="line" data-startTime="2022">come back with a response. </span> <span class="line" data-startTime="2024">And looking closely at this </span><span class="line" data-startTime="2024">waterfall, we can see that </span><span class="line" data-startTime="2027">these requests overlap each </span><span class="line" data-startTime="2027">other three at a time. </span> <span class="line" data-startTime="2031">And that's not say that this </span><span class="line" data-startTime="2031">is in a browser that only </span><span class="line" data-startTime="2033">allows three concurrent </span><span class="line" data-startTime="2033">connections. </span> <span class="line" data-startTime="2036">It's actually the case that </span><span class="line" data-startTime="2036">there was a very large image </span><span class="line" data-startTime="2039">being loaded above these </span><span class="line" data-startTime="2039">requests, and that is further </span><span class="line" data-startTime="2042">holding up the number </span><span class="line" data-startTime="2042">of connections </span><span class="line" data-startTime="2044">that could be reused. </span></p>

<p><span class="line" data-startTime="2047">So when we look at something </span><span class="line" data-startTime="2047">like this, there are a few </span><span class="line" data-startTime="2050">best practices that we might </span><span class="line" data-startTime="2050">think of about how to solve </span><span class="line" data-startTime="2052">this problem. </span> <span class="line" data-startTime="2054">For images, we might think to, </span><span class="line" data-startTime="2054">well, instead of having 12 </span><span class="line" data-startTime="2057">images, maybe we should combine </span><span class="line" data-startTime="2057">them all into one, and </span><span class="line" data-startTime="2060">have a sprite. </span> <span class="line" data-startTime="2063">Another idea is to shard </span><span class="line" data-startTime="2063">the domains. </span> <span class="line" data-startTime="2066">So that connection is per </span><span class="line" data-startTime="2066">domain, or that connection </span><span class="line" data-startTime="2069">limitation is per domain. </span> <span class="line" data-startTime="2071">So if we're allowed six </span><span class="line" data-startTime="2071">concurrent connections on </span><span class="line" data-startTime="2074">example.com, maybe we want </span><span class="line" data-startTime="2074">example2.com, or a sub-domain </span><span class="line" data-startTime="2079">like img.example.com. </span> <span class="line" data-startTime="2081">And so in this way, we could, in </span><span class="line" data-startTime="2081">theory, split up and get 12 </span><span class="line" data-startTime="2087">concurrent connections. </span> <span class="line" data-startTime="2089">Or that's like a 12-lane </span><span class="line" data-startTime="2089">highway, as </span><span class="line" data-startTime="2090">opposed to a six-lane. </span></p>

<p><span class="line" data-startTime="2091">In theory, that should let </span><span class="line" data-startTime="2091">us go twice as fast. </span> <span class="line" data-startTime="2094">But that's not always </span><span class="line" data-startTime="2094">the case. </span> <span class="line" data-startTime="2097">You incur something called </span><span class="line" data-startTime="2097">a DNS lookup penalty. </span> <span class="line" data-startTime="2102">So if you have many new domains </span><span class="line" data-startTime="2102">needing to be getting </span><span class="line" data-startTime="2109">their IP addresses resolved, </span><span class="line" data-startTime="2109">similar to that very first </span><span class="line" data-startTime="2112">teal bar we looked at, that has </span><span class="line" data-startTime="2112">its own pile up effect. </span> <span class="line" data-startTime="2117">And it's actually a slow down </span><span class="line" data-startTime="2117">of performance gains. </span> <span class="line" data-startTime="2120">So it's not always a direct win, </span><span class="line" data-startTime="2120">just to shard domains. </span> <span class="line" data-startTime="2123">And I have a note at the bottom, </span><span class="line" data-startTime="2123">just to think about </span><span class="line" data-startTime="2126">HTTP 2.0, or the speedy </span><span class="line" data-startTime="2126">protocol. </span> <span class="line" data-startTime="2132">And so the note here is that </span><span class="line" data-startTime="2132">it's not always a best </span><span class="line" data-startTime="2138">practice to shard domains. </span> <span class="line" data-startTime="2139">Today it might be </span><span class="line" data-startTime="2139">a good thing. </span> <span class="line" data-startTime="2141">But that doesn't mean tomorrow, </span><span class="line" data-startTime="2141">when we have the </span><span class="line" data-startTime="2143">newer protocols, that it's </span><span class="line" data-startTime="2143">still going to work. </span> <span class="line" data-startTime="2146">And I'll leave it as an example </span><span class="line" data-startTime="2146">to the viewer to look </span><span class="line" data-startTime="2149">up exactly why it's </span><span class="line" data-startTime="2149">called pipelining. </span></p>

<p><span class="line" data-startTime="2153">And so the server could handle </span><span class="line" data-startTime="2153">many, many requests, like all </span><span class="line" data-startTime="2157">12 or so of these at once. </span> <span class="line" data-startTime="2159">And it could, in theory, handle </span><span class="line" data-startTime="2159">this without a stair </span><span class="line" data-startTime="2163">step pattern. </span> <span class="line" data-startTime="2164">So just keep in mind that </span><span class="line" data-startTime="2164">although today it is a </span><span class="line" data-startTime="2166">problem, it might </span><span class="line" data-startTime="2166">not be tomorrow. </span> <span class="line" data-startTime="2168">And then you're left with the </span><span class="line" data-startTime="2168">problem of how do you actually </span><span class="line" data-startTime="2171">handle it for the browsers that </span><span class="line" data-startTime="2171">don't support this new </span><span class="line" data-startTime="2174">protocol today, and try to </span><span class="line" data-startTime="2174">get maximal speed up for </span><span class="line" data-startTime="2178">tomorrow's browsers. </span> <span class="line" data-startTime="2182">So this is not necessarily </span><span class="line" data-startTime="2182">waterfall, per se. </span> <span class="line" data-startTime="2188">This is known as the </span><span class="line" data-startTime="2188">connection view. </span> <span class="line" data-startTime="2189">And this is still showing you </span><span class="line" data-startTime="2189">the serialization problem. </span></p>

<p><span class="line" data-startTime="2192">It's the same pattern, just </span><span class="line" data-startTime="2192">in a different view. </span> <span class="line" data-startTime="2195">And there's a little bit of a </span><span class="line" data-startTime="2195">color coding difference here, </span><span class="line" data-startTime="2198">and I've noted that using this </span><span class="line" data-startTime="2198">line that says CSS JavaScript, </span><span class="line" data-startTime="2203">images, and Flash. </span> <span class="line" data-startTime="2205">And although it's great that we </span><span class="line" data-startTime="2205">are loading everything one </span><span class="line" data-startTime="2210">after another, we're doing it </span><span class="line" data-startTime="2210">as soon as possible, it's </span><span class="line" data-startTime="2213">still not ideal. </span> <span class="line" data-startTime="2215">The connection view is great </span><span class="line" data-startTime="2215">because it shows us how we're </span><span class="line" data-startTime="2218">reusing our connections. </span> <span class="line" data-startTime="2219">Reusing a connection is a great </span><span class="line" data-startTime="2219">performance win, because </span><span class="line" data-startTime="2225">all the way at the left, we </span><span class="line" data-startTime="2225">see these six orange bars. </span> <span class="line" data-startTime="2229">And that is the TCP </span><span class="line" data-startTime="2229">connection. </span> <span class="line" data-startTime="2231">Don't confuse that with this </span><span class="line" data-startTime="2231">orange JavaScript line. </span> <span class="line" data-startTime="2234">It's the same as that first </span><span class="line" data-startTime="2234">slide, with the teal and the </span><span class="line" data-startTime="2237">orange DNS lookup and the </span><span class="line" data-startTime="2237">initial connection. </span> <span class="line" data-startTime="2241">So we have www1.macys.com </span><span class="line" data-startTime="2241">as our domain. </span></p>

<p><span class="line" data-startTime="2247">And request four is the first </span><span class="line" data-startTime="2247">request to this domain, and so </span><span class="line" data-startTime="2251">we have that DNS </span><span class="line" data-startTime="2251">lookup penalty. </span> <span class="line" data-startTime="2255">The subsequent five requests </span><span class="line" data-startTime="2255">are able to reuse this DNS </span><span class="line" data-startTime="2260">lookup, so that you don't see </span><span class="line" data-startTime="2260">that teal lookup on every </span><span class="line" data-startTime="2263">other request, or on every </span><span class="line" data-startTime="2263">other connection. </span> <span class="line" data-startTime="2266">But what we do have is this </span><span class="line" data-startTime="2266">orange connection opening for </span><span class="line" data-startTime="2268">all six of these. </span> <span class="line" data-startTime="2270">The good news is that it's not </span><span class="line" data-startTime="2270">occurring for every subsequent </span><span class="line" data-startTime="2273">request, but it is occurring </span><span class="line" data-startTime="2273">for every connection. </span></p>

<p><span class="line" data-startTime="2277">So it's a very compact type </span><span class="line" data-startTime="2277">of pattern, here. </span> <span class="line" data-startTime="2284">And so we might think that </span><span class="line" data-startTime="2284">that's a good thing. </span> <span class="line" data-startTime="2286">But looking at this in terms </span><span class="line" data-startTime="2286">of colors, it's kind of </span><span class="line" data-startTime="2289">helpful to see this middle mark, </span><span class="line" data-startTime="2289">where the purple images </span><span class="line" data-startTime="2294">are back to back with the </span><span class="line" data-startTime="2294">orange JavaScript. </span> <span class="line" data-startTime="2297">And I think that's a good place </span><span class="line" data-startTime="2297">to make a cut here, and </span><span class="line" data-startTime="2301">say, well, if we were to shard </span><span class="line" data-startTime="2301">these domains, and maybe have </span><span class="line" data-startTime="2304">www2.macys.com, where we load </span><span class="line" data-startTime="2304">the images and the flash, in </span><span class="line" data-startTime="2309">theory, we could have </span><span class="line" data-startTime="2309">a speed up of 2x. </span> <span class="line" data-startTime="2314">Again it's not a rule that you </span><span class="line" data-startTime="2314">can follow every single time, </span><span class="line" data-startTime="2319">that if you split the domains </span><span class="line" data-startTime="2319">by a factor of 2, it's going </span><span class="line" data-startTime="2322">to be twice as fast. </span> <span class="line" data-startTime="2323">But in theory, this is an </span><span class="line" data-startTime="2323">example of how sharding a </span><span class="line" data-startTime="2327">domain could affect this </span><span class="line" data-startTime="2327">connection view. </span></p>

<p><span class="line" data-startTime="2332">So bringing the two together, we </span><span class="line" data-startTime="2332">see connection view and the </span><span class="line" data-startTime="2337">waterfall next to each other. </span> <span class="line" data-startTime="2339">And under one condition, they </span><span class="line" data-startTime="2339">are actually almost the same. </span> <span class="line" data-startTime="2343">There's one connection </span><span class="line" data-startTime="2343">for each request, and </span><span class="line" data-startTime="2346">that's a bad thing. </span> <span class="line" data-startTime="2347">And this is because we're not </span><span class="line" data-startTime="2347">reusing our connections, or </span><span class="line" data-startTime="2349">the connections are closed. </span> <span class="line" data-startTime="2351">And you'll notice that for each </span><span class="line" data-startTime="2351">of these requests, we see </span><span class="line" data-startTime="2354">this orange initial connection </span><span class="line" data-startTime="2354">being incurred. </span> <span class="line" data-startTime="2359">And this TCP overhead is </span><span class="line" data-startTime="2359">directly affecting the </span><span class="line" data-startTime="2364">duration of the request. </span></p>

<p><span class="line" data-startTime="2367">So for looking at the first </span><span class="line" data-startTime="2367">one here, it takes 177 </span><span class="line" data-startTime="2371">milliseconds to get all the </span><span class="line" data-startTime="2371">information we need. </span> <span class="line" data-startTime="2375">But it looks like most of that </span><span class="line" data-startTime="2375">is being taken up in TCP </span><span class="line" data-startTime="2379">connection. </span> <span class="line" data-startTime="2381">And as we go down, roughly 30 </span><span class="line" data-startTime="2381">to 50% of these requests are </span><span class="line" data-startTime="2385">taking their time in this </span><span class="line" data-startTime="2385">connection phase. </span> <span class="line" data-startTime="2389">And so you might think </span><span class="line" data-startTime="2389">of it as a little </span><span class="line" data-startTime="2391">sliver on the chart. </span> <span class="line" data-startTime="2392">It might only take tens of </span><span class="line" data-startTime="2392">milliseconds, or hundreds of </span><span class="line" data-startTime="2395">milliseconds. </span> <span class="line" data-startTime="2396">But it does add up, and it turns </span><span class="line" data-startTime="2396">out that 50% of the time </span><span class="line" data-startTime="2400">taken here is just in this </span><span class="line" data-startTime="2400">connection phase. </span> <span class="line" data-startTime="2404">Again, this red line on the left </span><span class="line" data-startTime="2404">is indicating that it is </span><span class="line" data-startTime="2409">pushing out this waterfall, and </span><span class="line" data-startTime="2409">it's making it harder and </span><span class="line" data-startTime="2412">harder to get things done in </span><span class="line" data-startTime="2412">a short amount of time. </span> <span class="line" data-startTime="2416">Luckily, there is an </span><span class="line" data-startTime="2416">easy fix here. </span></p>

<p><span class="line" data-startTime="2419">On the server side, in your </span><span class="line" data-startTime="2419">server configuration file, you </span><span class="line" data-startTime="2422">can do something, for example, </span><span class="line" data-startTime="2422">like an Apache. </span> <span class="line" data-startTime="2425">You can enable Keep-Alive. </span> <span class="line" data-startTime="2427">This is, literally, the line of </span><span class="line" data-startTime="2427">code that you need to solve </span><span class="line" data-startTime="2429">this problem. </span> <span class="line" data-startTime="2430">It's a one-liner, under most </span><span class="line" data-startTime="2430">general circumstances, and </span><span class="line" data-startTime="2433">it's a very quick </span><span class="line" data-startTime="2433">and easy win. </span> <span class="line" data-startTime="2436">There is pretty much no </span><span class="line" data-startTime="2436">reason not to do this. </span> <span class="line" data-startTime="2441">The next pattern is something </span><span class="line" data-startTime="2441">that I had to create </span><span class="line" data-startTime="2444">artificially just to exacerbate </span><span class="line" data-startTime="2444">the problem. </span> <span class="line" data-startTime="2447">And this is the problem </span><span class="line" data-startTime="2447">of network silence. </span> <span class="line" data-startTime="2449">And this is introducing two more </span><span class="line" data-startTime="2449">charts having to do with </span><span class="line" data-startTime="2453">the waterfall, and it's the CPU </span><span class="line" data-startTime="2453">utilization chart, and the </span><span class="line" data-startTime="2458">bandwidth utilization chart. </span> <span class="line" data-startTime="2459">And network silence can be found </span><span class="line" data-startTime="2459">by looking at these two </span><span class="line" data-startTime="2465">charts, where bandwidth </span><span class="line" data-startTime="2465">utilization is very low, CPU </span><span class="line" data-startTime="2469">utilization is very high. </span> <span class="line" data-startTime="2471">And so we might look at this </span><span class="line" data-startTime="2471">and wonder, what could </span><span class="line" data-startTime="2474">possibly be going wrong? </span><span class="line" data-startTime="2476">And it turns out that it </span><span class="line" data-startTime="2476">could be a factor &mdash; </span><span class="line" data-startTime="2479">multiple factors here. </span> <span class="line" data-startTime="2481">One of them is that you can </span><span class="line" data-startTime="2481">have expensive DOM layouts </span><span class="line" data-startTime="2486">being done. </span></p>

<p><span class="line" data-startTime="2487">That could be in HTML table, </span><span class="line" data-startTime="2487">that's resizing dynamically, </span><span class="line" data-startTime="2491">and there's lots of pushing </span><span class="line" data-startTime="2491">and pulling going </span><span class="line" data-startTime="2494">on inside the table. </span> <span class="line" data-startTime="2495">And so with that document, with </span><span class="line" data-startTime="2495">the browser might do is </span><span class="line" data-startTime="2497">hold off on any type of </span><span class="line" data-startTime="2497">processing until it knows that </span><span class="line" data-startTime="2502">it could display that </span><span class="line" data-startTime="2502">table all at once. </span> <span class="line" data-startTime="2507">And the other thing here is </span><span class="line" data-startTime="2507">that you could have some </span><span class="line" data-startTime="2510">JavaScript. </span> <span class="line" data-startTime="2511">As I mentioned earlier, the </span><span class="line" data-startTime="2511">browser is single-threaded. </span> <span class="line" data-startTime="2514">So if you have JavaScript that's </span><span class="line" data-startTime="2514">running in a long loop, </span><span class="line" data-startTime="2518">that could push out these other </span><span class="line" data-startTime="2518">requests that happen. </span> <span class="line" data-startTime="2521">And so I did come up with this </span><span class="line" data-startTime="2521">contrived example here. </span></p>

<p><span class="line" data-startTime="2525">And I'll try to pull </span><span class="line" data-startTime="2525">this up for you. </span> <span class="line" data-startTime="2528">Sorry. </span> <span class="line" data-startTime="2535">So we see here, I'm loading a </span><span class="line" data-startTime="2535">page, and nothing happened. </span> <span class="line" data-startTime="2538">And all of the sudden, we </span><span class="line" data-startTime="2538">get this picture back. </span> <span class="line" data-startTime="2540">And that delay was the </span><span class="line" data-startTime="2540">network silence. </span> <span class="line" data-startTime="2543">We tried to make this page load </span><span class="line" data-startTime="2543">as soon as possible, but </span><span class="line" data-startTime="2548">we were not able to do it </span><span class="line" data-startTime="2548">because of some JavaScript. </span> <span class="line" data-startTime="2551">So if I could just view </span><span class="line" data-startTime="2551">the source here. </span> <span class="line" data-startTime="2558">Control-Shift-S. There we are. </span> <span class="line" data-startTime="2563">View page source. </span> <span class="line" data-startTime="2565">So when I wrote this code, I </span><span class="line" data-startTime="2565">was literally going back to </span><span class="line" data-startTime="2568">all the worst practices </span><span class="line" data-startTime="2568">of web development. </span> <span class="line" data-startTime="2571">I had a script in the head that </span><span class="line" data-startTime="2571">was doing some busy work </span><span class="line" data-startTime="2575">for literally five seconds, </span><span class="line" data-startTime="2575">pushing values to </span><span class="line" data-startTime="2577">an arbitrary array. </span></p>

<p><span class="line" data-startTime="2579">And then I used, which made me </span><span class="line" data-startTime="2579">cringe, document.write to </span><span class="line" data-startTime="2583">write an image out. </span> <span class="line" data-startTime="2584">And the reason why I had to </span><span class="line" data-startTime="2584">use document.write in this </span><span class="line" data-startTime="2587">case was because this preloading </span><span class="line" data-startTime="2587">done would go and </span><span class="line" data-startTime="2592">find the image tag, and try to </span><span class="line" data-startTime="2592">preload the image during the </span><span class="line" data-startTime="2597">busy While loop up here. </span> <span class="line" data-startTime="2599">So by using document.write, </span><span class="line" data-startTime="2599">that's obscuring the image </span><span class="line" data-startTime="2603">that we want to load later. </span> <span class="line" data-startTime="2605">So this is a very bad pattern, </span><span class="line" data-startTime="2605">but I'm using it here just to </span><span class="line" data-startTime="2607">show you the effect </span><span class="line" data-startTime="2607">on the waterfall. </span> <span class="line" data-startTime="2611">And so you might see a </span><span class="line" data-startTime="2611">big gap in between </span><span class="line" data-startTime="2616">one request and another. </span> <span class="line" data-startTime="2618">And so this is having to do with </span><span class="line" data-startTime="2618">your code in particular. </span></p>

<p><span class="line" data-startTime="2621">So when you see a big gap like </span><span class="line" data-startTime="2621">this, one hint is to look at </span><span class="line" data-startTime="2627">the request happening previous </span><span class="line" data-startTime="2627">to that gap. </span> <span class="line" data-startTime="2632">In this case, silence.html is </span><span class="line" data-startTime="2632">the only request to occur </span><span class="line" data-startTime="2636">before that gap, so we know to </span><span class="line" data-startTime="2636">look somewhere in that code. </span> <span class="line" data-startTime="2638">And as we just did, we saw the </span><span class="line" data-startTime="2638">culprits, which was using </span><span class="line" data-startTime="2642">document.write and </span><span class="line" data-startTime="2642">a long-loading </span><span class="line" data-startTime="2644">script in the head. </span> <span class="line" data-startTime="2647">It's possible that this could </span><span class="line" data-startTime="2647">be in the middle of your </span><span class="line" data-startTime="2648">waterfall, and it'll be a little </span><span class="line" data-startTime="2648">harder to track down, </span><span class="line" data-startTime="2651">but it's just something </span><span class="line" data-startTime="2651">to keep in mind. </span> <span class="line" data-startTime="2656">So in summary, we looked at </span><span class="line" data-startTime="2656">waterfall slope, and how just </span><span class="line" data-startTime="2660">following the left edge of all </span><span class="line" data-startTime="2660">these requests could give us a </span><span class="line" data-startTime="2664">high level idea of the </span><span class="line" data-startTime="2664">performance of our page. </span> <span class="line" data-startTime="2667">We looked at the individual </span><span class="line" data-startTime="2667">request components from DNS </span><span class="line" data-startTime="2671">lookup to content download. </span> <span class="line" data-startTime="2673">We looked at three different </span><span class="line" data-startTime="2673">HTTP responses, the redirects, </span><span class="line" data-startTime="2676">the conditional GETs, </span><span class="line" data-startTime="2676">and the errors. </span></p>

<p><span class="line" data-startTime="2679">We looked at the page load </span><span class="line" data-startTime="2679">events, and all those colors, </span><span class="line" data-startTime="2682">and how that relates the </span><span class="line" data-startTime="2682">navigation timing API. </span> <span class="line" data-startTime="2684">We looked at request </span><span class="line" data-startTime="2684">concurrency, and how that can </span><span class="line" data-startTime="2687">contribute to the stair step </span><span class="line" data-startTime="2687">pattern, and finally, network </span><span class="line" data-startTime="2691">utilization. </span> <span class="line" data-startTime="2692">So we want to do as much with </span><span class="line" data-startTime="2692">the network when it's </span><span class="line" data-startTime="2695">available as we could. </span> <span class="line" data-startTime="2697">And so putting this all </span><span class="line" data-startTime="2697">together, I put together a few </span><span class="line" data-startTime="2701">slides of real waterfalls, and </span><span class="line" data-startTime="2701">some really bad things that I </span><span class="line" data-startTime="2706">found with them. </span> <span class="line" data-startTime="2708">This is also introducing the </span><span class="line" data-startTime="2708">grades at the top of the </span><span class="line" data-startTime="2711">WebPagetest results, A through </span><span class="line" data-startTime="2711">F, and X or check mark if </span><span class="line" data-startTime="2715">you're using a CDN </span><span class="line" data-startTime="2715">effectively. </span></p>

<p><span class="line" data-startTime="2718">And in this particular case, </span><span class="line" data-startTime="2718">there are 46 requests, and </span><span class="line" data-startTime="2722">only five of them </span><span class="line" data-startTime="2722">are successful. </span> <span class="line" data-startTime="2724">And we could see that from this </span><span class="line" data-startTime="2724">high level view by all </span><span class="line" data-startTime="2726">the red occurring on </span><span class="line" data-startTime="2726">the waterfall. </span> <span class="line" data-startTime="2728">Also, if we were to draw that </span><span class="line" data-startTime="2728">waterfall slope line, it would </span><span class="line" data-startTime="2731">be horizontal for most of the </span><span class="line" data-startTime="2731">time, it turns out 20 seconds, </span><span class="line" data-startTime="2735">and all of the sudden it'll </span><span class="line" data-startTime="2735">become vertical again. </span> <span class="line" data-startTime="2738">And this is due to a long time </span><span class="line" data-startTime="2738">to first byte in the initial </span><span class="line" data-startTime="2741">HTML request. </span> <span class="line" data-startTime="2744">And that brings up a good point </span><span class="line" data-startTime="2744">of when you see a really </span><span class="line" data-startTime="2749">long green bar for time to first </span><span class="line" data-startTime="2749">byte, that's usually </span><span class="line" data-startTime="2753">indicative of a back end </span><span class="line" data-startTime="2753">performance problem. </span> <span class="line" data-startTime="2758">WebPagetest is a front end </span><span class="line" data-startTime="2758">performance testing tool, and </span><span class="line" data-startTime="2761">it's great at showing you where </span><span class="line" data-startTime="2761">you can improve your </span><span class="line" data-startTime="2763">front end performance. </span></p>

<p><span class="line" data-startTime="2766">But it's not so great </span><span class="line" data-startTime="2766">at back end. </span> <span class="line" data-startTime="2767">And that's on purpose. </span> <span class="line" data-startTime="2768">It's very focused on </span><span class="line" data-startTime="2768">front performance. </span> <span class="line" data-startTime="2770">So when used in conjunction </span><span class="line" data-startTime="2770">with back end performance </span><span class="line" data-startTime="2773">testing tools, it's very, very </span><span class="line" data-startTime="2773">effective at giving you a full </span><span class="line" data-startTime="2777">picture of what's going on. </span> <span class="line" data-startTime="2779">So although we just have a very </span><span class="line" data-startTime="2779">long 20 second green bar, </span><span class="line" data-startTime="2781">it's not telling us a lot about </span><span class="line" data-startTime="2781">why it's happening. </span> <span class="line" data-startTime="2783">But it is showing up in our </span><span class="line" data-startTime="2783">front end waterfall, so it is </span><span class="line" data-startTime="2788">hinting us to look </span><span class="line" data-startTime="2788">at the back end. </span> <span class="line" data-startTime="2791">Also, to note, 30% gzip </span><span class="line" data-startTime="2791">savings are possible. </span> <span class="line" data-startTime="2795">This is why we get a D grade </span><span class="line" data-startTime="2795">in our compress transfer. </span> <span class="line" data-startTime="2801">Next, this is a very, very tall </span><span class="line" data-startTime="2801">waterfall, so it's kind </span><span class="line" data-startTime="2804">of hard to see what's </span><span class="line" data-startTime="2804">going on. </span></p>

<p><span class="line" data-startTime="2805">There are 443 requests. </span> <span class="line" data-startTime="2808">Most of the grades at the </span><span class="line" data-startTime="2808">top are kind of decent. </span> <span class="line" data-startTime="2810">There is an F for time </span><span class="line" data-startTime="2810">to first byte, or </span><span class="line" data-startTime="2813">our first byte time. </span> <span class="line" data-startTime="2814">There are 8,000 DOM elements </span><span class="line" data-startTime="2814">here, so that's telling me </span><span class="line" data-startTime="2818">that there's a lot going </span><span class="line" data-startTime="2818">on this page. </span> <span class="line" data-startTime="2820">We could see some of that low </span><span class="line" data-startTime="2820">network utilization because of </span><span class="line" data-startTime="2824">expensive DOM layouts, </span><span class="line" data-startTime="2824">and things like this. </span> <span class="line" data-startTime="2827">There's 1.6 megabytes of </span><span class="line" data-startTime="2827">JavaScript, which was </span><span class="line" data-startTime="2831">surprising to see, because I </span><span class="line" data-startTime="2831">don't know what you can even </span><span class="line" data-startTime="2834">load that's 1.6 megs </span><span class="line" data-startTime="2834">of JavaScript. </span> <span class="line" data-startTime="2836">Must be uncompressed and </span><span class="line" data-startTime="2836">unminified code. </span> <span class="line" data-startTime="2840">And the funny thing is that, </span><span class="line" data-startTime="2840">even from this high level </span><span class="line" data-startTime="2843">view, you can still see the </span><span class="line" data-startTime="2843">JavaScript from here. </span> <span class="line" data-startTime="2846">It's almost like the Great Wall </span><span class="line" data-startTime="2846">of China from space, even </span><span class="line" data-startTime="2848">though it's not true. </span></p>

<p><span class="line" data-startTime="2849">So with 443 requests, naturally, </span><span class="line" data-startTime="2849">we have 75 unique </span><span class="line" data-startTime="2854">domains, which is a lot. </span> <span class="line" data-startTime="2856">And going back to that point </span><span class="line" data-startTime="2856">about DNS lookup, for each of </span><span class="line" data-startTime="2859">those 75 unique domains, that's </span><span class="line" data-startTime="2859">incurring that DNS </span><span class="line" data-startTime="2862">lookup time. </span> <span class="line" data-startTime="2864">And maybe one of those is having </span><span class="line" data-startTime="2864">a bad day, and it takes </span><span class="line" data-startTime="2866">a long time to resolve </span><span class="line" data-startTime="2866">the IP address. </span> <span class="line" data-startTime="2868">So always, always try </span><span class="line" data-startTime="2868">to minimize the </span><span class="line" data-startTime="2871">number of unique domains. </span> <span class="line" data-startTime="2872">Try to reuse domains as best </span><span class="line" data-startTime="2872">as you could, also reusing </span><span class="line" data-startTime="2878">your connections. </span> <span class="line" data-startTime="2881">So before I switch to the next </span><span class="line" data-startTime="2881">slide, I'll say that this one </span><span class="line" data-startTime="2885">has pretty good grades, but </span><span class="line" data-startTime="2885">a really ugly waterfall. </span> <span class="line" data-startTime="2889">This one has the worst possible </span><span class="line" data-startTime="2889">grades, all F's and </span><span class="line" data-startTime="2892">an X, and the waterfall </span><span class="line" data-startTime="2892">is not as bad. </span> <span class="line" data-startTime="2895">It's not as big, but there's </span><span class="line" data-startTime="2895">still a lot that we </span><span class="line" data-startTime="2897">can point out here. </span></p>

<p><span class="line" data-startTime="2898">There's two megabytes overall </span><span class="line" data-startTime="2898">for the page weight. </span> <span class="line" data-startTime="2902">It takes 26 seconds </span><span class="line" data-startTime="2902">to load the page. </span> <span class="line" data-startTime="2905">And when we load this page </span><span class="line" data-startTime="2905">again, on the repeat view, it </span><span class="line" data-startTime="2909">still takes 17 seconds. </span> <span class="line" data-startTime="2911">I didn't mention repeat views as </span><span class="line" data-startTime="2911">much, but this last F grade </span><span class="line" data-startTime="2916">cache static content is telling </span><span class="line" data-startTime="2916">us how well or how </span><span class="line" data-startTime="2918">effective our caching </span><span class="line" data-startTime="2918">policies are. </span> <span class="line" data-startTime="2920">Even with the caching policies </span><span class="line" data-startTime="2920">in place, and even with the </span><span class="line" data-startTime="2924">browser heuristics to try </span><span class="line" data-startTime="2924">to work around some </span><span class="line" data-startTime="2928">inefficiencies in your </span><span class="line" data-startTime="2928">caching headers, it's </span><span class="line" data-startTime="2930">still taking 17 seconds. </span> <span class="line" data-startTime="2933">So the reason why I put these </span><span class="line" data-startTime="2933">next to each other for </span><span class="line" data-startTime="2936">comparison is that the grades </span><span class="line" data-startTime="2936">that WebPagetest gives you, </span><span class="line" data-startTime="2940">all F's and an X, should be an </span><span class="line" data-startTime="2940">indicator that there's a lot </span><span class="line" data-startTime="2944">that you need to fix here. </span> <span class="line" data-startTime="2946">But when I go back to the other </span><span class="line" data-startTime="2946">waterfall with better </span><span class="line" data-startTime="2948">grades, I'm kind of hesitant </span><span class="line" data-startTime="2948">to say which one is worse. </span> <span class="line" data-startTime="2952">I might say that this one is </span><span class="line" data-startTime="2952">worse, because there are many </span><span class="line" data-startTime="2954">more requests, many more </span><span class="line" data-startTime="2954">domains, a much more </span><span class="line" data-startTime="2957">complicated DOM, and </span><span class="line" data-startTime="2957">so on and so forth. </span> <span class="line" data-startTime="2961">So take it with a grain of </span><span class="line" data-startTime="2961">salt that WebPagetest is </span><span class="line" data-startTime="2964">telling you that you might have </span><span class="line" data-startTime="2964">done OK, or might have </span><span class="line" data-startTime="2968">even done very well. </span></p>

<p><span class="line" data-startTime="2969">But there's still room for </span><span class="line" data-startTime="2969">improvement, even if </span><span class="line" data-startTime="2972">you have all A's. </span> <span class="line" data-startTime="2974">Another thing to note is that </span><span class="line" data-startTime="2974">since these screen shots were </span><span class="line" data-startTime="2978">taken, WebPagetest did </span><span class="line" data-startTime="2978">have an update. </span> <span class="line" data-startTime="2980">I think this was in </span><span class="line" data-startTime="2980">the past week. </span> <span class="line" data-startTime="2982">And I did have a chance to find, </span><span class="line" data-startTime="2982">it surprisingly did not </span><span class="line" data-startTime="2986">take very long, the worst </span><span class="line" data-startTime="2986">possible grade, now with six </span><span class="line" data-startTime="2990">F's and an X. And the </span><span class="line" data-startTime="2990">new grade here is </span><span class="line" data-startTime="2993">for agressive jpegs. </span> <span class="line" data-startTime="2995">I'll let you look into that. </span> <span class="line" data-startTime="2996">So this is a pretty short </span><span class="line" data-startTime="2996">waterfall, maybe </span><span class="line" data-startTime="3000">30 requests in total. </span> <span class="line" data-startTime="3002">But it's getting the worst </span><span class="line" data-startTime="3002">possible grade. </span> <span class="line" data-startTime="3005">So something to keep </span><span class="line" data-startTime="3005">in mind is the </span><span class="line" data-startTime="3008">waterfall is a great tool. </span> <span class="line" data-startTime="3009">It's telling you a lot. </span> <span class="line" data-startTime="3011">It's a little overwhelming at </span><span class="line" data-startTime="3011">first, but when you learn to </span><span class="line" data-startTime="3015">break things down and look at </span><span class="line" data-startTime="3015">requests as individual units, </span><span class="line" data-startTime="3020">and break that further down into </span><span class="line" data-startTime="3020">all of these different </span><span class="line" data-startTime="3023">stages of request, you'll learn </span><span class="line" data-startTime="3023">how to interpret the </span><span class="line" data-startTime="3026">waterfall, and the reasons why </span><span class="line" data-startTime="3026">your website might not be as </span><span class="line" data-startTime="3030">fast as you want it. </span></p>

<p><span class="line" data-startTime="3032">So that's all that I have. </span> <span class="line" data-startTime="3035">There's some further reading, </span><span class="line" data-startTime="3035">if you choose to do so. </span> <span class="line" data-startTime="3038">If you're interested in all this </span><span class="line" data-startTime="3038">network information, I </span><span class="line" data-startTime="3042">highly recommend Ilya Grigorik's </span><span class="line" data-startTime="3042">book, "High </span><span class="line" data-startTime="3045">Performance Browser Networking." </span><span class="line" data-startTime="3045">It's available at </span><span class="line" data-startTime="3048">O'Reilly, and there's also </span><span class="line" data-startTime="3048">a free preview online. </span> <span class="line" data-startTime="3053">The WebPagetest documentation </span><span class="line" data-startTime="3053">is very thorough. </span> <span class="line" data-startTime="3056">It's very good. </span> <span class="line" data-startTime="3057">You can install WebPagetest </span><span class="line" data-startTime="3057">locally, on your own machine, </span><span class="line" data-startTime="3060">behind your corporate firewall, </span><span class="line" data-startTime="3060">and test your </span><span class="line" data-startTime="3062">performance from a private </span><span class="line" data-startTime="3062">environment. </span> <span class="line" data-startTime="3065">And the documentation </span><span class="line" data-startTime="3065">is invaluable to </span><span class="line" data-startTime="3067">help you with that. </span></p>

<p><span class="line" data-startTime="3068">Google has a Make the Web Faster </span><span class="line" data-startTime="3068">team, and they focus on </span><span class="line" data-startTime="3073">not just improving Google </span><span class="line" data-startTime="3073">properties, </span><span class="line" data-startTime="3075">but the web in general. </span> <span class="line" data-startTime="3076">And there's many different </span><span class="line" data-startTime="3076">initiatives there to improve </span><span class="line" data-startTime="3079">the web as a whole. </span> <span class="line" data-startTime="3080">And also, the "Planet </span><span class="line" data-startTime="3080">Performance" </span><span class="line" data-startTime="3082">blog aggregator site. </span> <span class="line" data-startTime="3083">There are many people that are </span><span class="line" data-startTime="3083">talking about web performance, </span><span class="line" data-startTime="3086">and it's impossible to give </span><span class="line" data-startTime="3086">you a link to all of them. </span> <span class="line" data-startTime="3089">But this aggregator is </span><span class="line" data-startTime="3089">a great resource. </span> <span class="line" data-startTime="3091">Check it every day. </span> <span class="line" data-startTime="3092">There's tons of new stuff </span><span class="line" data-startTime="3092">happening, and I highly </span><span class="line" data-startTime="3095">recommend it. </span> <span class="line" data-startTime="3096">So with that, thank you. </span> <span class="line" data-startTime="3099">I don't believe that we have any </span><span class="line" data-startTime="3099">questions, but if you wish </span><span class="line" data-startTime="3101">to reach out to me, here's </span><span class="line" data-startTime="3101">my contact information. </span></p>

<p><span class="line" data-startTime="3104">I'm on Google+, Twitter. </span> <span class="line" data-startTime="3106">You can email me here. </span> <span class="line" data-startTime="3107">My website is jrvis.com. </span> <span class="line" data-startTime="3109">And a plug for [AUDIO OUT] </span><span class="line" data-startTime="3110">I'm giving a hands-on web </span><span class="line" data-startTime="3110">performance optimization </span><span class="line" data-startTime="3113">workshop, with my co-presenters </span><span class="line" data-startTime="3113">Sergey </span><span class="line" data-startTime="3115">Chernyshev And Andy Davies. </span> <span class="line" data-startTime="3117">They're prominent figures in the </span><span class="line" data-startTime="3117">web performance world, and </span><span class="line" data-startTime="3121">I'm very excited to be </span><span class="line" data-startTime="3121">speaking with them. </span> <span class="line" data-startTime="3123">And this is on Tuesday, June 18, </span><span class="line" data-startTime="3123">and it's in Santa Clara. </span> <span class="line" data-startTime="3126">So with that, thank you for </span><span class="line" data-startTime="3126">tuning in, and take care. </span></p>