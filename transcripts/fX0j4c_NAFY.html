<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>Edge Conference &mdash; Panel 2: Network</h1>

<h2>Steve Thair, Andy Davies, Ilya Grigorik, Jackson Gabbard, John Cleveley</h2>

<a class="video" href="http://youtu.be/fX0j4c_NAFY">youtu.be/fX0j4c_NAFY</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="6"><span class="speakerName">Steve Thair</span>: We started off </span><span class="line" data-startTime="6">with the offline panel. </span><span class="line" data-startTime="7">Now we're moving into a </span><span class="line" data-startTime="7">networked world, where we are </span><span class="line" data-startTime="10">connected to a network even </span><span class="line" data-startTime="10">though obviously we discussed </span><span class="line" data-startTime="13">a lot of network connected stuff </span><span class="line" data-startTime="13">in the earlier session. </span><span class="line" data-startTime="16">I'm going to introduce the </span><span class="line" data-startTime="16">panel very quickly. </span><span class="line" data-startTime="19">From the end, we have Ilya </span><span class="line" data-startTime="19">Grigorik from Google. </span><span class="line" data-startTime="24">If any of you have been to </span><span class="line" data-startTime="24">Velocity have seen Ilya </span><span class="line" data-startTime="28">present, he's going to give us </span><span class="line" data-startTime="28">a little opening talk for 10 </span><span class="line" data-startTime="30">minutes just to set the scene. </span><span class="line" data-startTime="33">So he shares an office with </span><span class="line" data-startTime="33">Steve Souders, I think. </span><span class="line" data-startTime="35">There you go. </span><span class="line" data-startTime="38">Next to him, we have Andy </span><span class="line" data-startTime="38">Davies, who's a local boy. </span><span class="line" data-startTime="42">So we're from Bristol. </span><span class="line" data-startTime="43">I don't know, where are you </span><span class="line" data-startTime="43">from originally, Andy? </span></p>

<p class="speaker"><span class="line" data-starttime="45"><span class="speakerName">Andy Davies</span>: Wales. </span> <span class="line" data-startTime="47">I'm Welsh. </span> <span class="line" data-startTime="50">STEVE THAIR: [INAUDIBLE]. </span> <span class="line" data-startTime="53">He's from Wales. </span> <span class="line" data-startTime="54">Occasionally, they win a rugby </span><span class="line" data-startTime="54">game but not lately. </span> <span class="line" data-startTime="58">Next to him, we have John </span><span class="line" data-startTime="58">Cleveley from the BBC. </span> <span class="line" data-startTime="61">He was responsible for migrating </span><span class="line" data-startTime="61">BBC News to a </span><span class="line" data-startTime="64">dynamic platform, been building </span><span class="line" data-startTime="64">features mobile </span><span class="line" data-startTime="67">first, using responsive design </span><span class="line" data-startTime="67">all the way up to the desktop. </span> <span class="line" data-startTime="70">Yeah, I think Andrew wrote </span><span class="line" data-startTime="70">that piece of thing. </span> <span class="line" data-startTime="73">And last but not least, </span><span class="line" data-startTime="73">we have Jackson. </span> <span class="line" data-startTime="76">And Jackson's presented at our </span><span class="line" data-startTime="76">London web performance user </span><span class="line" data-startTime="77">group and Velocity, and </span><span class="line" data-startTime="77">stuff like that. </span> <span class="line" data-startTime="79">He's described here as a </span><span class="line" data-startTime="79">veteran troublemaker at </span><span class="line" data-startTime="82">Facebook London. </span> <span class="line" data-startTime="82">I think it's supposed to be </span><span class="line" data-startTime="83">troubleshooter at </span><span class="line" data-startTime="83">Facebook London. </span> <span class="line" data-startTime="85">No? </span><span class="line" data-startTime="86">Troublemaker? </span><span class="line" data-startTime="86">OK. </span> <span class="line" data-startTime="87">Works on tools and mobile, help </span><span class="line" data-startTime="87">build mobile Timeline and </span><span class="line" data-startTime="90">App Center. </span></p>

<p><span class="line" data-startTime="91">Saying you had anything </span><span class="line" data-startTime="91">to do with Timeline </span><span class="line" data-startTime="93">is extremely brave. </span> <span class="line" data-startTime="95">Cool. </span> <span class="line" data-startTime="96">So basically, we're just going </span><span class="line" data-startTime="96">to kick off with Ilya giving </span><span class="line" data-startTime="99">some opening remarks. </span></p>

<p class="speaker"><span class="line" data-starttime="106"><span class="speakerName">Ilya Grigorik</span>: I'm not sure if </span><span class="line" data-startTime="106">this microphone is working. </span><span class="line" data-startTime="107">No? </span><span class="line" data-startTime="108">Yes? </span></p>

<p class="speaker"><span class="line" data-starttime="109"><span class="speakerName">Steve Thair</span>: That one's not. </span><span class="line" data-startTime="109">Just use the [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="110"><span class="speakerName">Ilya Grigorik</span>: This one works. </span><span class="line" data-startTime="112">That works. </span><span class="line" data-startTime="114">Now what's the magic trick </span><span class="line" data-startTime="114">to get this thing? </span><span class="line" data-startTime="116">There. </span></p>

<p class="speaker"><span class="line" data-starttime="117"><span class="speakerName">Steve Thair</span>: We wave </span><span class="line" data-startTime="117">to the nice man. </span></p>

<p class="speaker"><span class="line" data-starttime="118"><span class="speakerName">Ilya Grigorik</span>: OK. </span><span class="line" data-startTime="120">Hello. </span><span class="line" data-startTime="123">Waiting, waiting, waiting. </span><span class="line" data-startTime="134">Warming up. </span></p>

<p class="speaker"><span class="line" data-starttime="136"><span class="speakerName">Steve Thair</span>: Tell a joke. </span></p>

<p class="speaker"><span class="line" data-starttime="137"><span class="speakerName">Ilya Grigorik</span>: All right. </span><span class="line" data-startTime="137">Well, no jokes here. </span><span class="line" data-startTime="140">It's all serious stuff. </span><span class="line" data-startTime="141">It's all network performance. </span></p>

<p class="speaker"><span class="line" data-starttime="146"><span class="speakerName">Jackson Gabbard</span>: The </span><span class="line" data-startTime="146">crowd looks lovely. </span><span class="line" data-startTime="146">You look great today. </span></p>

<p class="speaker"><span class="line" data-starttime="149"><span class="speakerName">Ilya Grigorik</span>: But seriously, </span><span class="line" data-startTime="149">I'm not </span><span class="line" data-startTime="151">going to take 10 minutes. </span> <span class="line" data-startTime="153">It's far more interesting to </span><span class="line" data-startTime="153">talk about on the panel to </span><span class="line" data-startTime="157">answer &mdash; there's a lot </span><span class="line" data-startTime="157">of questions in the </span><span class="line" data-startTime="159">Moderator as well. </span> <span class="line" data-startTime="161">So I'm just going to kick </span><span class="line" data-startTime="161">off with a couple of &mdash; </span><span class="line" data-startTime="163">let me see, wrong screen. </span> <span class="line" data-startTime="168">That is weird. </span> <span class="line" data-startTime="172">Can you guys see that? </span><span class="line" data-startTime="181">All right. </span> <span class="line" data-startTime="181">There we go. </span> <span class="line" data-startTime="184">So one thing that I've </span><span class="line" data-startTime="184">discovered as I've been </span><span class="line" data-startTime="187">working on network performance </span><span class="line" data-startTime="187">stuff is, I've been becoming </span><span class="line" data-startTime="189">grumpier and grumpier, in the </span><span class="line" data-startTime="189">sense that people keep asking, </span><span class="line" data-startTime="193">hey, we should put more </span><span class="line" data-startTime="193">stuff on pages. </span> <span class="line" data-startTime="195">I want to put more images, </span><span class="line" data-startTime="195">more video. </span></p>

<p><span class="line" data-startTime="197">I'm like, no, no, don't do </span><span class="line" data-startTime="197">that, because that hurts </span><span class="line" data-startTime="199">performance. </span> <span class="line" data-startTime="200">Everything you do hurts </span><span class="line" data-startTime="200">performance. </span> <span class="line" data-startTime="201">So the fewer things you put </span><span class="line" data-startTime="201">on your page, the better. </span> <span class="line" data-startTime="204">So because of that, I've started </span><span class="line" data-startTime="204">actually migrating my </span><span class="line" data-startTime="207">HTML presentations to Bash just </span><span class="line" data-startTime="207">to illustrate the point </span><span class="line" data-startTime="210">that go as low level </span><span class="line" data-startTime="210">as you can. </span> <span class="line" data-startTime="212">So this is actually running in </span><span class="line" data-startTime="212">Chrome VSSH but in Bash. </span> <span class="line" data-startTime="216">So it's awesome. </span></p>

<p><span class="line" data-startTime="217">Anyway, moving on. </span> <span class="line" data-startTime="219">So a lot of the network stuff </span><span class="line" data-startTime="219">is not the sexy stuff. </span> <span class="line" data-startTime="222">We can talk about all the </span><span class="line" data-startTime="222">awesome things that we're </span><span class="line" data-startTime="224">building, all the new </span><span class="line" data-startTime="224">CSS animations. </span> <span class="line" data-startTime="227">And then you start talking about </span><span class="line" data-startTime="227">performance and it's </span><span class="line" data-startTime="228">like, yeah, that TCP thing. </span> <span class="line" data-startTime="230">Ugh. </span> <span class="line" data-startTime="232">So a few things, I have like </span><span class="line" data-startTime="232">four high-level things that I </span><span class="line" data-startTime="236">want to seed the discussion </span><span class="line" data-startTime="236">a little bit. </span> <span class="line" data-startTime="239">Cache primitives. </span> <span class="line" data-startTime="240">So we heard a lot about </span><span class="line" data-startTime="240">caching and offline. </span> <span class="line" data-startTime="242">And I'm really excited for the </span><span class="line" data-startTime="242">stuff that's happening in the </span><span class="line" data-startTime="245">offline panel. </span> <span class="line" data-startTime="246">I think that's a big, </span><span class="line" data-startTime="246">big improvement. </span> <span class="line" data-startTime="249">It'll obviously take some </span><span class="line" data-startTime="249">time to get there. </span> <span class="line" data-startTime="251">The local storage stuff </span><span class="line" data-startTime="251">is really interesting. </span></p>

<p><span class="line" data-startTime="253">I'll just add maybe one more </span><span class="line" data-startTime="253">comment to the earlier </span><span class="line" data-startTime="256">discussion. </span> <span class="line" data-startTime="258">I don't think it's </span><span class="line" data-startTime="258">a solved problem. </span> <span class="line" data-startTime="259">The fact that it's a sync or </span><span class="line" data-startTime="259">async API I think, is maybe </span><span class="line" data-startTime="262">slightly the wrong question to </span><span class="line" data-startTime="262">ask, because for example, if </span><span class="line" data-startTime="266">you look at local storage </span><span class="line" data-startTime="266">performance on Windows, it's </span><span class="line" data-startTime="268">actually really good. </span> <span class="line" data-startTime="270">Why is that? </span><span class="line" data-startTime="271">Because they have SuperFetch, </span><span class="line" data-startTime="271">which is a platform feature </span><span class="line" data-startTime="275">within Windows which pre-loads </span><span class="line" data-startTime="275">all the data </span><span class="line" data-startTime="278">independent of the app. </span> <span class="line" data-startTime="279">So this is not an IE feature. </span> <span class="line" data-startTime="282">IE doesn't have these latency </span><span class="line" data-startTime="282">delays that Chrome does. </span> <span class="line" data-startTime="284">In fact, Chrome is </span><span class="line" data-startTime="284">like the worst </span><span class="line" data-startTime="285">performer in local storage. </span> <span class="line" data-startTime="287">It's something that </span><span class="line" data-startTime="287">we've got to fix. </span></p>

<p><span class="line" data-startTime="289">So I don't think it's as </span><span class="line" data-startTime="289">simple as we maybe </span><span class="line" data-startTime="293">make it out to be. </span> <span class="line" data-startTime="294">Just having an async </span><span class="line" data-startTime="294">API doesn't </span><span class="line" data-startTime="295">necessarily solve the problems. </span> <span class="line" data-startTime="296">I think there's an 80% solution </span><span class="line" data-startTime="296">even for something </span><span class="line" data-startTime="298">like local storage. </span> <span class="line" data-startTime="300">The fact that this new </span><span class="line" data-startTime="300">controller script is actually </span><span class="line" data-startTime="304">interacting with the browser's </span><span class="line" data-startTime="304">cache, I think is awesome. </span> <span class="line" data-startTime="309">Unlike the previous versions, </span><span class="line" data-startTime="309">which it's </span><span class="line" data-startTime="311">either all or nothing. </span> <span class="line" data-startTime="312">You don't have a fallback. </span> <span class="line" data-startTime="314">So I think this is </span><span class="line" data-startTime="314">all great stuff. </span> <span class="line" data-startTime="317">But moving on, something that </span><span class="line" data-startTime="317">I've been spending a lot of </span><span class="line" data-startTime="320">time thinking about </span><span class="line" data-startTime="320">and fighting with </span><span class="line" data-startTime="323">is user-agent sniffing. </span> <span class="line" data-startTime="324">I think we can all agree that </span><span class="line" data-startTime="324">this thing is just dead. </span></p>

<p><span class="line" data-startTime="327">We all have to use it. </span> <span class="line" data-startTime="328">It's unfortunate. </span> <span class="line" data-startTime="329">It sucks. </span> <span class="line" data-startTime="330">You have to pay for </span><span class="line" data-startTime="330">these databases. </span> <span class="line" data-startTime="331">You have to get a new </span><span class="line" data-startTime="331">serving path. </span> <span class="line" data-startTime="333">It is a disaster, no matter </span><span class="line" data-startTime="333">which way you look at it. </span> <span class="line" data-startTime="336">And not only that, but it </span><span class="line" data-startTime="336">doesn't actually give you the </span><span class="line" data-startTime="338">answers that you're looking </span><span class="line" data-startTime="338">for, which is the best </span><span class="line" data-startTime="341">combination of all </span><span class="line" data-startTime="341">those things. </span> <span class="line" data-startTime="343">So I do have a proposal </span><span class="line" data-startTime="343">out there. </span> <span class="line" data-startTime="345">We actually have a prototype </span><span class="line" data-startTime="345">that's in progress in Chrome </span><span class="line" data-startTime="347">for this thing called Client </span><span class="line" data-startTime="347">Hints, which is the world's </span><span class="line" data-startTime="350">dumbest idea, which is if you're </span><span class="line" data-startTime="350">looking for a DPI, why </span><span class="line" data-startTime="353">don't we just send it to you </span><span class="line" data-startTime="353">in an HTTP request header? </span><span class="line" data-startTime="357">That's really all it </span><span class="line" data-startTime="357">boils down to. </span></p>

<p><span class="line" data-startTime="359">So if you're curious, </span><span class="line" data-startTime="359">take a look. </span> <span class="line" data-startTime="361">I'd love to get your feedback. </span> <span class="line" data-startTime="362">But I think this would actually </span><span class="line" data-startTime="362">help quite a bit with </span><span class="line" data-startTime="365">a lot of problems in the </span><span class="line" data-startTime="365">responsive design world. </span> <span class="line" data-startTime="370">And speaking of responsive </span><span class="line" data-startTime="370">design, if you talk about </span><span class="line" data-startTime="374">network performance and web </span><span class="line" data-startTime="374">pages, 60% of all the bytes </span><span class="line" data-startTime="377">that we ship today are images, </span><span class="line" data-startTime="377">which is huge. </span> <span class="line" data-startTime="380">So if nothing else, if there's </span><span class="line" data-startTime="380">one area we can really focus </span><span class="line" data-startTime="384">on and fix and improve, it seems </span><span class="line" data-startTime="384">like images would be it. </span></p>

<p><span class="line" data-startTime="388">And unfortunately, if you look </span><span class="line" data-startTime="388">at what's happened in the </span><span class="line" data-startTime="390">image space, nothing </span><span class="line" data-startTime="390">has happened. </span> <span class="line" data-startTime="395">We have PNG, JPEG, and </span><span class="line" data-startTime="395">GIF, and that's it. </span> <span class="line" data-startTime="398">And it's not obvious why we </span><span class="line" data-startTime="398">don't have another 10 formats. </span> <span class="line" data-startTime="402">I don't know if 10 is needed, </span><span class="line" data-startTime="402">but at least another couple. </span> <span class="line" data-startTime="406">We have WebP that we have </span><span class="line" data-startTime="406">proposed at Google. </span> <span class="line" data-startTime="409">And WebP gives you a lot </span><span class="line" data-startTime="409">of improvements. </span> <span class="line" data-startTime="411">But I don't think WebP </span><span class="line" data-startTime="411">is the end all. </span> <span class="line" data-startTime="414">I'd hope to see more </span><span class="line" data-startTime="414">image formats. </span> <span class="line" data-startTime="415">And it's not obvious why we're </span><span class="line" data-startTime="415">just stuck with these three. </span> <span class="line" data-startTime="418">Then you look at products like </span><span class="line" data-startTime="418">Opera Turbo, Silk, PageSpeed. </span></p>

<p><span class="line" data-startTime="422">Opera Turbo is an incredibly </span><span class="line" data-startTime="422">popular browser in a lot of </span><span class="line" data-startTime="425">countries where bandwidth </span><span class="line" data-startTime="425">is at a premium. </span> <span class="line" data-startTime="429">Like 90% of all of the </span><span class="line" data-startTime="429">improvements that all these </span><span class="line" data-startTime="432">proxies get is they </span><span class="line" data-startTime="432">just re-encode all </span><span class="line" data-startTime="434">the images with WebP. </span> <span class="line" data-startTime="436">That's literally all they do, </span><span class="line" data-startTime="436">just blindly transcode </span><span class="line" data-startTime="438">everything to WebP. </span> <span class="line" data-startTime="439">So that alone is like, why don't </span><span class="line" data-startTime="439">we do that for the rest </span><span class="line" data-startTime="443">of all the pages? </span><span class="line" data-startTime="444">So we could decrease the size </span><span class="line" data-startTime="444">of our pages by 50% by just </span><span class="line" data-startTime="449">re-encoding all the images, </span><span class="line" data-startTime="449">which seems like </span><span class="line" data-startTime="453">a pretty nice thing. </span> <span class="line" data-startTime="454">And speaking of re-encoding </span><span class="line" data-startTime="454">images, one </span><span class="line" data-startTime="456">thing that I've realized &mdash; </span><span class="line" data-startTime="457">I've done a lot of studies now </span><span class="line" data-startTime="457">looking at WordPress sites and </span><span class="line" data-startTime="463">a whole number of </span><span class="line" data-startTime="463">other content &mdash; </span><span class="line" data-startTime="467">it turns out we, as humans, suck </span><span class="line" data-startTime="467">at picking image formats. </span></p>

<p><span class="line" data-startTime="471">We are either lazy. </span> <span class="line" data-startTime="472">We are either too busy. </span> <span class="line" data-startTime="475">We pick the wrong formats. </span> <span class="line" data-startTime="476">So we save things as PNGs, </span><span class="line" data-startTime="476">which should be JPEGs. </span> <span class="line" data-startTime="481">We save things as JPEGs, </span><span class="line" data-startTime="481">which should be PNGs. </span> <span class="line" data-startTime="484">It's just a disaster. </span> <span class="line" data-startTime="486">And there's a lot of image </span><span class="line" data-startTime="486">optimization solutions out </span><span class="line" data-startTime="489">there that exist that you </span><span class="line" data-startTime="489">actually can pay for, which </span><span class="line" data-startTime="492">will say, hey, we'll optimize </span><span class="line" data-startTime="492">your images. </span> <span class="line" data-startTime="493">If you give us a PNG, </span><span class="line" data-startTime="493">we'll strip the </span><span class="line" data-startTime="495">metadata and all the rest. </span> <span class="line" data-startTime="496">It's like, cool. </span> <span class="line" data-startTime="497">You're going to strip </span><span class="line" data-startTime="497">100 bytes out of my </span><span class="line" data-startTime="500">150 kilobyte image. </span></p>

<p><span class="line" data-startTime="502">I'm like, that's still a win. </span> <span class="line" data-startTime="504">But the truth is, you should </span><span class="line" data-startTime="504">have been saving that as a </span><span class="line" data-startTime="506">JPEG, which would have </span><span class="line" data-startTime="506">been a 15k file. </span> <span class="line" data-startTime="509">And we're not doing </span><span class="line" data-startTime="509">that transcoding, </span><span class="line" data-startTime="511">because it's much harder. </span> <span class="line" data-startTime="515">I think that's something </span><span class="line" data-startTime="515">that we need to fix. </span> <span class="line" data-startTime="516">And this problem only gets much, </span><span class="line" data-startTime="516">much harder when you </span><span class="line" data-startTime="519">look at the responsive area, </span><span class="line" data-startTime="519">where now you have different </span><span class="line" data-startTime="523">break points. </span> <span class="line" data-startTime="524">You have different </span><span class="line" data-startTime="524">device widths. </span> <span class="line" data-startTime="527">I recently ran a study looking </span><span class="line" data-startTime="527">at how frequently do we </span><span class="line" data-startTime="531">re-scale images on a client or </span><span class="line" data-startTime="531">downscale images on a client. </span> <span class="line" data-startTime="534">And it turns out that about 20% </span><span class="line" data-startTime="534">of all the large images </span><span class="line" data-startTime="537">are getting downscaled </span><span class="line" data-startTime="537">in the client. </span></p>

<p><span class="line" data-startTime="538">So we're shipping extra bytes, </span><span class="line" data-startTime="538">which was getting compressed. </span> <span class="line" data-startTime="541">This is just wasted bandwidth. </span> <span class="line" data-startTime="544">I think we need server help. </span> <span class="line" data-startTime="546">We need a client-side </span><span class="line" data-startTime="546">solution, which </span><span class="line" data-startTime="548">we don't have today. </span> <span class="line" data-startTime="550">There's a lot of room for better </span><span class="line" data-startTime="550">server integration to </span><span class="line" data-startTime="555">help us with this problem, </span><span class="line" data-startTime="555">because it only gets worse. </span> <span class="line" data-startTime="558">You have five different </span><span class="line" data-startTime="558">viewports. </span> <span class="line" data-startTime="560">You have high DPI, non-high DPI, </span><span class="line" data-startTime="560">now you have 10 variants. </span> <span class="line" data-startTime="563">Add some art direction use </span><span class="line" data-startTime="563">cases, and now you're like, </span><span class="line" data-startTime="567">you started with an image tag, </span><span class="line" data-startTime="567">which was beautiful, one line. </span> <span class="line" data-startTime="570">Then you look at your picture </span><span class="line" data-startTime="570">tag, and it's like 40 lines. </span> <span class="line" data-startTime="572">And you're like, I am </span><span class="line" data-startTime="572">not writing that. </span> <span class="line" data-startTime="574">I'm sorry. </span> <span class="line" data-startTime="576">At least that's for me. </span> <span class="line" data-startTime="578">Another crowd favorite &mdash; </span><span class="line" data-startTime="580">net info API. </span></p>

<p><span class="line" data-startTime="581">So let me just talk about </span><span class="line" data-startTime="581">this one for a second. </span> <span class="line" data-startTime="585">So bandwidth estimation &mdash; </span><span class="line" data-startTime="588">should we have bandwidth </span><span class="line" data-startTime="588">estimation in a browser? </span><span class="line" data-startTime="590">And the answer is no &mdash; </span><span class="line" data-startTime="595">ever. </span> <span class="line" data-startTime="596">Yes. </span> <span class="line" data-startTime="597">Right. </span> <span class="line" data-startTime="597">So why is that? </span><span class="line" data-startTime="599">It's worth actually </span><span class="line" data-startTime="599">thinking about it. </span> <span class="line" data-startTime="600">And usually there's </span><span class="line" data-startTime="600">a good counter </span><span class="line" data-startTime="602">argument to that as well. </span> <span class="line" data-startTime="603">We have that. </span> <span class="line" data-startTime="605">We have that for video. </span></p>

<p><span class="line" data-startTime="607">And the insight there is when we </span><span class="line" data-startTime="607">do do server adaptation for </span><span class="line" data-startTime="613">video, but the way that works </span><span class="line" data-startTime="613">is we stream you a five </span><span class="line" data-startTime="617">[? to ?] second chunk </span><span class="line" data-startTime="617">of video. </span> <span class="line" data-startTime="619">Then we see how you </span><span class="line" data-startTime="619">downloaded it. </span> <span class="line" data-startTime="620">And then we adjust. </span> <span class="line" data-startTime="622">So it's adaptive streaming, </span><span class="line" data-startTime="622">not predictive streaming. </span> <span class="line" data-startTime="625">If you look at the actual </span><span class="line" data-startTime="625">bandwidth throughput, </span><span class="line" data-startTime="628">especially on mobile, your </span><span class="line" data-startTime="628">mobile carrier can adjust your </span><span class="line" data-startTime="631">bandwidth on one millisecond </span><span class="line" data-startTime="631">granularity. </span> <span class="line" data-startTime="635">Me moving a phone from here on </span><span class="line" data-startTime="635">my desk to here can double or </span><span class="line" data-startTime="640">take my bandwidth by half. </span> <span class="line" data-startTime="643">There's such high amounts of </span><span class="line" data-startTime="643">variability that we can </span><span class="line" data-startTime="645">predict bandwidth, or we have </span><span class="line" data-startTime="645">stable bandwidth on the order </span><span class="line" data-startTime="649">of milliseconds &mdash; </span><span class="line" data-startTime="650">maybe at most, second. </span></p>

<p><span class="line" data-startTime="652">It's completely unpredictable, </span><span class="line" data-startTime="652">anything beyond that. </span> <span class="line" data-startTime="655">So you sending a request for a </span><span class="line" data-startTime="655">GIF file and then fetching </span><span class="line" data-startTime="660">that and saying, ooh, one </span><span class="line" data-startTime="660">megabyte per second. </span> <span class="line" data-startTime="662">And then making a decision </span><span class="line" data-startTime="662">is completely useless. </span> <span class="line" data-startTime="665">So maybe if we switch all of our </span><span class="line" data-startTime="665">internet back to circuit </span><span class="line" data-startTime="668">switch networks, then we can </span><span class="line" data-startTime="668">have this conversation. </span> <span class="line" data-startTime="671">But I don't think that's </span><span class="line" data-startTime="671">going to happen. </span> <span class="line" data-startTime="675">And then the last one, which I </span><span class="line" data-startTime="675">think is something that we </span><span class="line" data-startTime="677">haven't actually talked about, </span><span class="line" data-startTime="677">is radio and mobile. </span> <span class="line" data-startTime="680">So mobile is obviously a big, </span><span class="line" data-startTime="680">big topic for networking. </span></p>

<p><span class="line" data-startTime="684">And battery life is something </span><span class="line" data-startTime="684">that I don't think we, as web </span><span class="line" data-startTime="688">developers, have actually </span><span class="line" data-startTime="688">thought about at all. </span> <span class="line" data-startTime="691">Battery life is actually, turns </span><span class="line" data-startTime="691">out, very important for </span><span class="line" data-startTime="693">native apps, because people </span><span class="line" data-startTime="693">rank these apps. </span> <span class="line" data-startTime="695">You run this thing, and your </span><span class="line" data-startTime="695">battery's dead, and you're </span><span class="line" data-startTime="697">like, this app sucks. </span> <span class="line" data-startTime="698">For web pages, we haven't </span><span class="line" data-startTime="698">thought about it. </span> <span class="line" data-startTime="700">But in reality, they </span><span class="line" data-startTime="700">are just as costly. </span> <span class="line" data-startTime="704">I can point you to pages where </span><span class="line" data-startTime="704">if you sit there reading your </span><span class="line" data-startTime="707">news, for example, on some </span><span class="line" data-startTime="707">sites which are using </span><span class="line" data-startTime="709">real-time analytics, every </span><span class="line" data-startTime="709">five seconds they send a </span><span class="line" data-startTime="715">real-time beacon for a real-time </span><span class="line" data-startTime="715">analytics app. </span> <span class="line" data-startTime="718">You're just draining </span><span class="line" data-startTime="718">your battery. </span> <span class="line" data-startTime="720">It's killing your battery. </span></p>

<p><span class="line" data-startTime="721">The radio is the second most </span><span class="line" data-startTime="721">expensive thing you have in </span><span class="line" data-startTime="725">your phone in terms of power. </span> <span class="line" data-startTime="727">The first one is the screen. </span> <span class="line" data-startTime="728">The second one is the radio. </span> <span class="line" data-startTime="730">And they're actually </span><span class="line" data-startTime="730">about the same &mdash; </span><span class="line" data-startTime="732">the same order of magnitude. </span> <span class="line" data-startTime="734">So turning off your radio </span><span class="line" data-startTime="734">is incredibly important. </span> <span class="line" data-startTime="737">There is big, big anti-patterns, </span><span class="line" data-startTime="737">stuff like </span><span class="line" data-startTime="740">inefficiency of periodic </span><span class="line" data-startTime="740">transfers. </span> <span class="line" data-startTime="742">And I think this one's really </span><span class="line" data-startTime="742">illustrative, because even if </span><span class="line" data-startTime="745">you look at the Android docs, </span><span class="line" data-startTime="745">two years ago when we started </span><span class="line" data-startTime="750">building these native apps, we </span><span class="line" data-startTime="750">said, hey, fetch just the </span><span class="line" data-startTime="753">stuff that you need. </span> <span class="line" data-startTime="755">And then as the user needs it, </span><span class="line" data-startTime="755">fetch the rest of the content, </span><span class="line" data-startTime="758">thinking that you don't </span><span class="line" data-startTime="758">have enough bandwidth. </span> <span class="line" data-startTime="761">And you should get the best </span><span class="line" data-startTime="761">experience up and then </span><span class="line" data-startTime="763">progressively fill in. </span> <span class="line" data-startTime="765">If you look at the docs </span><span class="line" data-startTime="765">now, they tell you </span><span class="line" data-startTime="766">completely the opposite. </span> <span class="line" data-startTime="767">They tell you download </span><span class="line" data-startTime="767">everything. </span></p>

<p><span class="line" data-startTime="769">Burst everything you can </span><span class="line" data-startTime="769">as fast as you can. </span> <span class="line" data-startTime="771">And then turn off the radio. </span> <span class="line" data-startTime="772">And please, please, please don't </span><span class="line" data-startTime="772">turn it on ever again. </span> <span class="line" data-startTime="776">So I don't think that message </span><span class="line" data-startTime="776">has reached the </span><span class="line" data-startTime="778">web developer community. </span> <span class="line" data-startTime="779">And it's actually pretty </span><span class="line" data-startTime="779">interesting to think, I don't </span><span class="line" data-startTime="782">think we have an answer for </span><span class="line" data-startTime="782">how exactly do we service </span><span class="line" data-startTime="784">battery and network </span><span class="line" data-startTime="784">performance? </span><span class="line" data-startTime="786">What's that trade off? </span><span class="line" data-startTime="787">We don't have an intuition in </span><span class="line" data-startTime="787">the browser for what is the </span><span class="line" data-startTime="791">cost of a page. </span> <span class="line" data-startTime="792">I'd love to see a metric that's </span><span class="line" data-startTime="792">says, you've drained x </span><span class="line" data-startTime="794">amount of your battery by </span><span class="line" data-startTime="794">visiting this page. </span> <span class="line" data-startTime="796">That would be kind of cool. </span></p>

<p><span class="line" data-startTime="798">And then the last one is </span><span class="line" data-startTime="798">4G won't save you. </span> <span class="line" data-startTime="801">I see a lot of conversations </span><span class="line" data-startTime="801">about this, which is like, I </span><span class="line" data-startTime="804">heard LTE is going to </span><span class="line" data-startTime="804">fix all things. </span> <span class="line" data-startTime="807">I'm just going to </span><span class="line" data-startTime="807">wait for that. </span> <span class="line" data-startTime="810">Seems reasonable. </span> <span class="line" data-startTime="811">And it seems reasonable </span><span class="line" data-startTime="811">when you're here. </span> <span class="line" data-startTime="814">You're in downtown London, then </span><span class="line" data-startTime="814">you probably have really </span><span class="line" data-startTime="817">good coverage. </span> <span class="line" data-startTime="818">The problem is when you actually </span><span class="line" data-startTime="818">look at what the </span><span class="line" data-startTime="819">carriers are saying, they're </span><span class="line" data-startTime="819">saying, look, we've invested a </span><span class="line" data-startTime="822">lot of money into 3G </span><span class="line" data-startTime="822">and 2G networks. </span> <span class="line" data-startTime="824">We have a lot of users on older </span><span class="line" data-startTime="824">hardware that can't </span><span class="line" data-startTime="827">migrate to 4G overnight. </span></p>

<p><span class="line" data-startTime="829">3G and 2G networks will continue </span><span class="line" data-startTime="829">to exist for at least </span><span class="line" data-startTime="832">another decade, at least </span><span class="line" data-startTime="832">another decade. </span> <span class="line" data-startTime="835">And you'll have to build apps </span><span class="line" data-startTime="835">that will transition between </span><span class="line" data-startTime="838">4G, 3G, and 2G. </span> <span class="line" data-startTime="841">And that's just the </span><span class="line" data-startTime="841">reality of it. </span> <span class="line" data-startTime="844">You can't design your apps </span><span class="line" data-startTime="844">just targeting 4G. </span> <span class="line" data-startTime="848">So those are the high-level </span><span class="line" data-startTime="848">points. </span> <span class="line" data-startTime="852">That's all I got. </span> <span class="line" data-startTime="852">I think we'll go </span><span class="line" data-startTime="852">into the panel. </span></p>

<p class="speaker"><span class="line" data-starttime="860"><span class="speakerName">Steve Thair</span>: I think </span><span class="line" data-startTime="860">we're done here. </span><span class="line" data-startTime="862">That's pretty good. </span><span class="line" data-startTime="863">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="874"><span class="speakerName">Steve Thair</span>: I'm going to try </span><span class="line" data-startTime="874">to come out from behind the </span><span class="line" data-startTime="876">panel a bit so I can actually </span><span class="line" data-startTime="876">see them instead </span><span class="line" data-startTime="878">of talking to them. </span><span class="line" data-startTime="879">Make sure you talk to them. </span><span class="line" data-startTime="880">Don't talk to me. </span><span class="line" data-startTime="882">Can everybody hear </span><span class="line" data-startTime="882">me all right? </span><span class="line" data-startTime="883">Yeah? </span><span class="line" data-startTime="884">OK. </span><span class="line" data-startTime="885">So the first question we </span><span class="line" data-startTime="885">actually have &mdash; the highest </span><span class="line" data-startTime="887">ranked question on the list &mdash; </span><span class="line" data-startTime="887">is, should we have continuous </span><span class="line" data-startTime="889">live feedback access to the </span><span class="line" data-startTime="889">user's network speed, similar </span><span class="line" data-startTime="892">to [? navigate ?] </span><span class="line" data-startTime="893">[? or battery? ?] </span><span class="line" data-startTime="893">And the answer is? </span></p>

<p class="speaker"><span class="line" data-starttime="895"><span class="speakerName">All</span>: No. </span></p>

<p class="speaker"><span class="line" data-starttime="897"><span class="speakerName">Steve Thair</span>: You'd think </span><span class="line" data-startTime="897">we rehearsed that. </span><span class="line" data-startTime="898">Awesome. </span><span class="line" data-startTime="900">There are actually a </span><span class="line" data-startTime="900">few questions that </span><span class="line" data-startTime="902">were about that topic. </span><span class="line" data-startTime="905">Some people obviously </span><span class="line" data-startTime="905">hadn't heard of net </span><span class="line" data-startTime="907">API, some people had. </span><span class="line" data-startTime="909">I don't even think it was worth </span><span class="line" data-startTime="909">really asking any of </span><span class="line" data-startTime="912">those other questions. </span><span class="line" data-startTime="914">Just say no? </span></p>

<p class="speaker"><span class="line" data-starttime="914"><span class="speakerName">Ilya Grigorik</span>: Can we take </span><span class="line" data-startTime="914">a step back, though? </span></p>

<p class="speaker"><span class="line" data-starttime="917"><span class="speakerName">Steve Thair</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="919"><span class="speakerName">Ilya Grigorik</span>: We can't have </span><span class="line" data-startTime="919">bandwidth estimation. </span><span class="line" data-startTime="920">I can't tell you you have two </span><span class="line" data-startTime="920">megabytes per second, three </span><span class="line" data-startTime="922">megabytes per second. </span><span class="line" data-startTime="923">It is useful to know which type </span><span class="line" data-startTime="923">of network you are on, </span><span class="line" data-startTime="926">which is the level of </span><span class="line" data-startTime="926">granularity that you should be </span><span class="line" data-startTime="929">working at. </span><span class="line" data-startTime="930">Knowing that you're on Wi-Fi </span><span class="line" data-startTime="930">tells you certain things </span><span class="line" data-startTime="932">about, for example, the latency </span><span class="line" data-startTime="932">characteristics of </span><span class="line" data-startTime="934">your connection. </span><span class="line" data-startTime="936">You're now going to have a weird </span><span class="line" data-startTime="936">transition state where </span><span class="line" data-startTime="938">you have to wait for two seconds </span><span class="line" data-startTime="938">before you actually </span><span class="line" data-startTime="940">get any packets on the wire. </span><span class="line" data-startTime="942">If you're on 4G, you </span><span class="line" data-startTime="942">have pretty tight </span><span class="line" data-startTime="945">bounds on latency again. </span><span class="line" data-startTime="946">Knowing on 3G &mdash; so basically </span><span class="line" data-startTime="946">it gives you goal posts. </span><span class="line" data-startTime="949">Like, here's what the minimum, </span><span class="line" data-startTime="949">here's what the maximum is. </span><span class="line" data-startTime="952">And that's about the level </span><span class="line" data-startTime="952">that we need to operate. </span><span class="line" data-startTime="954">So the net info spec </span><span class="line" data-startTime="954">actually had this &mdash; </span><span class="line" data-startTime="956">the earlier versions. </span><span class="line" data-startTime="958">It specifically said, </span><span class="line" data-startTime="958">Wi-Fi 2G, 3G, 4G. </span><span class="line" data-startTime="962">I think we need to revert to </span><span class="line" data-startTime="962">spec, like, 15 iterations, go </span><span class="line" data-startTime="966">back and implement that. </span></p>

<p class="speaker"><span class="line" data-starttime="968"><span class="speakerName">John Cleveley</span>: Also, when I'm </span><span class="line" data-startTime="968">at home in Suffolk in the </span><span class="line" data-startTime="971">middle of the country, my </span><span class="line" data-startTime="971">Wi-Fi I get about a meg. </span><span class="line" data-startTime="973">I come into London with my </span><span class="line" data-startTime="973">phone and I get about the </span><span class="line" data-startTime="976">same, even better sometimes. </span><span class="line" data-startTime="977">So it's like you've got to use </span><span class="line" data-startTime="977">the information quite wisely </span><span class="line" data-startTime="980">in terms of not making </span><span class="line" data-startTime="980">too many assumptions. </span><span class="line" data-startTime="982">But the latency thing is </span><span class="line" data-startTime="982">definitely going to help make </span><span class="line" data-startTime="985">decisions between 3G </span><span class="line" data-startTime="985">wireless and Wi-Fi. </span></p>

<p class="speaker"><span class="line" data-starttime="989"><span class="speakerName">Jackson Gabbard</span>: It's always the </span><span class="line" data-startTime="989">one-legged dog [INAUDIBLE] </span><span class="line" data-startTime="992">from the 4G, you get </span><span class="line" data-startTime="992">intermittent one-bar </span><span class="line" data-startTime="995">connection. </span><span class="line" data-startTime="995">That's not as good as </span><span class="line" data-startTime="995">the 3G connection. </span><span class="line" data-startTime="997">But yeah, even then it's </span><span class="line" data-startTime="997">still fraught. </span><span class="line" data-startTime="1000">[INAUDIBLE], it's not granular, </span><span class="line" data-startTime="1001">immediately useful data. </span></p>

<p class="speaker"><span class="line" data-starttime="1003"><span class="speakerName">Andy Davies</span>: The original spec </span><span class="line" data-startTime="1003">got dumped for privacy </span><span class="line" data-startTime="1006">reasons, didn't it? </span></p>

<p class="speaker"><span class="line" data-starttime="1007"><span class="speakerName">Ilya Grigorik</span>: I think </span><span class="line" data-startTime="1007">the privacy reason </span><span class="line" data-startTime="1008">is completely bogus. </span><span class="line" data-startTime="1010">So let's just put </span><span class="line" data-startTime="1010">that to rest. </span></p>

<p class="speaker"><span class="line" data-starttime="1011"><span class="speakerName">Audience</span>: One other factor, </span><span class="line" data-startTime="1011">could it tell you that the </span><span class="line" data-startTime="1014">[INAUDIBLE] is roaming, </span><span class="line" data-startTime="1014">moving? </span></p>

<p class="speaker"><span class="line" data-starttime="1016"><span class="speakerName">Audience</span>: Use the mic, please. </span></p>

<p class="speaker"><span class="line" data-starttime="1019"><span class="speakerName">Steve Thair</span>: So the question </span><span class="line" data-startTime="1019">from Daryl was, could the spec </span><span class="line" data-startTime="1021">just at least tell you whether </span><span class="line" data-startTime="1021">the person is actually moving, </span><span class="line" data-startTime="1024">like if you're in a moving car </span><span class="line" data-startTime="1024">and a moving train, which has </span><span class="line" data-startTime="1027">an impact, certainly </span><span class="line" data-startTime="1027">on 3G, anyway. </span></p>

<p class="speaker"><span class="line" data-starttime="1031"><span class="speakerName">Ilya Grigorik</span>: I guess you could </span><span class="line" data-startTime="1031">enable GPS and look at </span><span class="line" data-startTime="1033">the coordinates if </span><span class="line" data-startTime="1033">they're changing. </span><span class="line" data-startTime="1035">But hold on, but I think there's </span><span class="line" data-startTime="1035">two different things &mdash; </span><span class="line" data-startTime="1037">roaming and moving are </span><span class="line" data-startTime="1037">two different things. </span></p>

<p class="speaker"><span class="line" data-starttime="1041"><span class="speakerName">Audience</span>: [INAUDIBLE] </span></p>

<p class="speaker"><span class="line" data-starttime="1043"><span class="speakerName">Steve Thair</span>: Yes. </span><span class="line" data-startTime="1044">He meant motion, as opposed </span><span class="line" data-startTime="1044">to paying 25 US dollars a </span><span class="line" data-startTime="1048">megabyte through Verizon in </span><span class="line" data-startTime="1048">Gibraltar type roaming. </span></p>

<p class="speaker"><span class="line" data-starttime="1051"><span class="speakerName">Ilya Grigorik</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1052"><span class="speakerName">Steve Thair</span>: That would probably </span><span class="line" data-startTime="1052">also be useful. </span></p>

<p class="speaker"><span class="line" data-starttime="1055"><span class="speakerName">Ilya Grigorik</span>: So I don't </span><span class="line" data-startTime="1055">think that's a </span><span class="line" data-startTime="1056">concern of net info. </span><span class="line" data-startTime="1058">So if you are on the move, for </span><span class="line" data-startTime="1058">example, 4G performance is </span><span class="line" data-startTime="1063">much, much better than 3G </span><span class="line" data-startTime="1063">performance if you are moving. </span><span class="line" data-startTime="1067">I don't think that's something </span><span class="line" data-startTime="1067">that net info would service. </span></p>

<p class="speaker"><span class="line" data-starttime="1072"><span class="speakerName">Steve Thair</span>: So one question </span><span class="line" data-startTime="1072">from me is that if net info is </span><span class="line" data-startTime="1076">giving you an API that you </span><span class="line" data-startTime="1076">have to query in your </span><span class="line" data-startTime="1079">JavaScript, and then you send </span><span class="line" data-startTime="1079">that message back, why is the </span><span class="line" data-startTime="1082">browser not sending that message </span><span class="line" data-startTime="1082">to the server side in </span><span class="line" data-startTime="1085">a header or an unsolicited </span><span class="line" data-startTime="1085">cookie? </span><span class="line" data-startTime="1087">So from the point of view before </span><span class="line" data-startTime="1087">I've even served the </span><span class="line" data-startTime="1090">request, I've got an idea of </span><span class="line" data-startTime="1090">what the connection type is. </span></p>

<p class="speaker"><span class="line" data-starttime="1095"><span class="speakerName">Andy Davies</span>: Well, that comes as </span><span class="line" data-startTime="1095">part of Ilya's Client Hints </span><span class="line" data-startTime="1100">spec, which is also growing into </span><span class="line" data-startTime="1100">the same privacy concerns </span><span class="line" data-startTime="1103">from some people. </span><span class="line" data-startTime="1105">So the idea that whenever </span><span class="line" data-startTime="1105">somebody makes a request of </span><span class="line" data-startTime="1108">your server, you expose their </span><span class="line" data-startTime="1108">screen size or how they </span><span class="line" data-startTime="1111">connected, starts to give </span><span class="line" data-startTime="1111">you ways of actually </span><span class="line" data-startTime="1114">fingerprinting browsers. </span><span class="line" data-startTime="1115">And we can do it pretty </span><span class="line" data-startTime="1115">well anyway. </span><span class="line" data-startTime="1116">So there are some privacy </span><span class="line" data-startTime="1116">concerns about it. </span></p>

<p class="speaker"><span class="line" data-starttime="1118"><span class="speakerName">Ilya Grigorik</span>: So, once </span><span class="line" data-startTime="1118">again, privacy stuff &mdash; </span><span class="line" data-startTime="1121">completely bogus. </span><span class="line" data-startTime="1122">Because you just </span><span class="line" data-startTime="1122">look at your &mdash; </span><span class="line" data-startTime="1123">no, no </span></p>

<p class="speaker"><span class="line" data-starttime="1124"><span class="speakerName">Steve Thair</span>: Who do you </span><span class="line" data-startTime="1124">work for again? </span></p>

<p class="speaker"><span class="line" data-starttime="1127"><span class="speakerName">Ilya Grigorik</span>: If you have the </span><span class="line" data-startTime="1127">IP address of your visitor, </span><span class="line" data-startTime="1130">you can do reverse map to say, </span><span class="line" data-startTime="1130">hey, you're on T-Mobile. </span><span class="line" data-startTime="1134">And you're coming from the </span><span class="line" data-startTime="1134">subnet, so you're probably on </span><span class="line" data-startTime="1137">3G network. </span><span class="line" data-startTime="1138">That is what the CDNs </span><span class="line" data-startTime="1138">are doing today. </span><span class="line" data-startTime="1141">This is all the information </span><span class="line" data-startTime="1141">that we're exposing. </span><span class="line" data-startTime="1142">So I think this actually </span><span class="line" data-startTime="1142">doesn't hold </span><span class="line" data-startTime="1145">much water, this argument. </span></p>

<p class="speaker"><span class="line" data-starttime="1149"><span class="speakerName">Audience</span>: I actually don't think </span><span class="line" data-startTime="1149">the privacy issue has </span><span class="line" data-startTime="1151">been the main killing issue </span><span class="line" data-startTime="1151">of these features. </span><span class="line" data-startTime="1154">That with the sending in </span><span class="line" data-startTime="1154">additional headers, the </span><span class="line" data-startTime="1157">problem is, there are billions </span><span class="line" data-startTime="1157">of requests happening every </span><span class="line" data-startTime="1160">day right now, right? </span><span class="line" data-startTime="1162">If you add even, like, 20 </span><span class="line" data-startTime="1162">bytes of data into each </span><span class="line" data-startTime="1166">request, we're talking about </span><span class="line" data-startTime="1166">gigabytes and gigabytes of </span><span class="line" data-startTime="1168">data being sent for absolutely </span><span class="line" data-startTime="1168">no reason in 99.999% of cases. </span><span class="line" data-startTime="1175">So that's the main problem </span><span class="line" data-startTime="1175">about [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1177"><span class="speakerName">Audience</span>: Mic, please. </span></p>

<p class="speaker"><span class="line" data-starttime="1181"><span class="speakerName">Jackson Gabbard</span>: I </span><span class="line" data-startTime="1181">agree with that. </span> <span class="line" data-startTime="1182">I think the crux of the issue is </span><span class="line" data-startTime="1182">less the network connection </span><span class="line" data-startTime="1185">of [INAUDIBLE] </span><span class="line" data-startTime="1187">the information that you can </span><span class="line" data-startTime="1187">glean about the network or the </span><span class="line" data-startTime="1188">device that you're sending to. </span> <span class="line" data-startTime="1190">That's the thing that &mdash; when </span><span class="line" data-startTime="1190">you're trying to get the </span><span class="line" data-startTime="1192">biggest ones you can &mdash; </span><span class="line" data-startTime="1192">network request &mdash; </span><span class="line" data-startTime="1194">knowing what the device </span><span class="line" data-startTime="1194">can handle ahead of </span><span class="line" data-startTime="1197">time is pretty key. </span> <span class="line" data-startTime="1199">And I think sending each </span><span class="line" data-startTime="1199">request is not </span><span class="line" data-startTime="1201">necessarily the right way. </span> <span class="line" data-startTime="1202">But it goes back to what you </span><span class="line" data-startTime="1202">said before about user-agent </span><span class="line" data-startTime="1204">sniffing, like knowing </span><span class="line" data-startTime="1204">concretely on the server side </span><span class="line" data-startTime="1207">what to send. </span> <span class="line" data-startTime="1208">It's also a really, really </span><span class="line" data-startTime="1208">hard problem. </span></p>

<p><span class="line" data-startTime="1209">But I feel like that's the </span><span class="line" data-startTime="1209">trick, like that's the magic </span><span class="line" data-startTime="1212">bullet in a lot of cases to </span><span class="line" data-startTime="1212">get good [INAUDIBLE]. </span> <span class="line" data-startTime="1215">These are the things I know </span><span class="line" data-startTime="1215">I don't need to send down. </span> <span class="line" data-startTime="1217">And in the immediate [? query ?] </span><span class="line" data-startTime="1217">world, you send it </span><span class="line" data-startTime="1220">off with the layout, send it </span><span class="line" data-startTime="1220">off with the JavaScript. </span> <span class="line" data-startTime="1223">In reality, you don't </span><span class="line" data-startTime="1223">need to do that. </span> <span class="line" data-startTime="1225">Like a [INAUDIBLE] device, you </span><span class="line" data-startTime="1225">just don't need to send stuff. </span> <span class="line" data-startTime="1227">And in some cases, you </span><span class="line" data-startTime="1227">don't even have </span><span class="line" data-startTime="1228">JavaScript on the devices. </span> <span class="line" data-startTime="1229">You definitely don't need </span><span class="line" data-startTime="1229">JavaScript resources. </span> <span class="line" data-startTime="1232">But there's no sure-fire way. </span> <span class="line" data-startTime="1235">I'm curious, though about </span><span class="line" data-startTime="1235">user-agent sniffing. </span></p>

<p><span class="line" data-startTime="1236">Because I know what we do. </span> <span class="line" data-startTime="1237">I'm curious what other </span><span class="line" data-startTime="1237">folks do for that. </span></p>

<p class="speaker"><span class="line" data-starttime="1240"><span class="speakerName">Ilya Grigorik</span>: Everybody </span><span class="line" data-startTime="1240">does it. </span><span class="line" data-startTime="1241">You have to. </span></p>

<p class="speaker"><span class="line" data-starttime="1243"><span class="speakerName">Steve Thair</span>: But you don't </span><span class="line" data-startTime="1243">like to talk about it. </span></p>

<p class="speaker"><span class="line" data-starttime="1247"><span class="speakerName">Audience</span>: I have one. </span><span class="line" data-startTime="1249">About &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1249"><span class="speakerName">Audience</span>: Could you introduce </span><span class="line" data-startTime="1249">yourself quickly? </span><span class="line" data-startTime="1251">[INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1252"><span class="speakerName">Audience</span>: Yes, thanks. </span><span class="line" data-startTime="1254">You introduced me, </span><span class="line" data-startTime="1254">but thank you. </span><span class="line" data-startTime="1257">Yes, I had a comment about the </span><span class="line" data-startTime="1257">spec and about the previous </span><span class="line" data-startTime="1260">version of the spec. </span><span class="line" data-startTime="1261">I think there was an argument </span><span class="line" data-startTime="1261">about privacy. </span><span class="line" data-startTime="1264">But another thing was that many </span><span class="line" data-startTime="1264">people were claiming that </span><span class="line" data-startTime="1268">the type of network is really </span><span class="line" data-startTime="1268">not enough information. </span><span class="line" data-startTime="1272">It's not telling you enough </span><span class="line" data-startTime="1272">about the type of connection. </span><span class="line" data-startTime="1276">You might be in a conference </span><span class="line" data-startTime="1276">like this on a Wi-Fi that is </span><span class="line" data-startTime="1278">complete cluttered, and you </span><span class="line" data-startTime="1278">don't get any throughput. </span><span class="line" data-startTime="1280">Or you might be actually on &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1284"><span class="speakerName">Steve Thair</span>: Or in a </span><span class="line" data-startTime="1284">[INAUDIBLE] station </span><span class="line" data-startTime="1286">any day of the week. </span><span class="line" data-startTime="1287">You'll have five bars of signal, </span><span class="line" data-startTime="1287">and you're on a 3G </span><span class="line" data-startTime="1290">network, and it's completely </span><span class="line" data-startTime="1290">digested [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1292"><span class="speakerName">Audience</span>: And the problem that </span><span class="line" data-startTime="1292">we have with the net info is </span><span class="line" data-startTime="1295">that we're trying to find a way </span><span class="line" data-startTime="1295">to get this information </span><span class="line" data-startTime="1299">without defeating the purpose, </span><span class="line" data-startTime="1299">like the [INAUDIBLE] </span><span class="line" data-startTime="1302">problem, or measuring </span><span class="line" data-startTime="1302">bandwidth. </span> <span class="line" data-startTime="1305">It changes so quickly, and you </span><span class="line" data-startTime="1305">have to measure so often that </span><span class="line" data-startTime="1307">you're going to be draining </span><span class="line" data-startTime="1307">the battery. </span> <span class="line" data-startTime="1309">You're going to be defeating </span><span class="line" data-startTime="1309">the purpose entirely. </span> <span class="line" data-startTime="1311">So that's a very hard </span><span class="line" data-startTime="1311">problem to solve. </span> <span class="line" data-startTime="1314">I would be happy to go back </span><span class="line" data-startTime="1314">to the connection type. </span> <span class="line" data-startTime="1321">There are many different use </span><span class="line" data-startTime="1321">cases, and we have to see </span><span class="line" data-startTime="1325">which ones are more important. </span> <span class="line" data-startTime="1326">ILYA GRIGORIK: [INAUDIBLE] </span><span class="line" data-startTime="1326">some sort of notion of a </span><span class="line" data-startTime="1328">connection quality. </span> <span class="line" data-startTime="1330">I don't know how to </span><span class="line" data-startTime="1330">define it exactly. </span> <span class="line" data-startTime="1332">But it's kind of that losing </span><span class="line" data-startTime="1332">your Wi-Fi signal, you have </span><span class="line" data-startTime="1336">just enough to be connected </span><span class="line" data-startTime="1336">but not enough </span><span class="line" data-startTime="1338">to do anything else. </span></p>

<p><span class="line" data-startTime="1340">That is a good example. </span> <span class="line" data-startTime="1341">Or you'd keep timing out. </span> <span class="line" data-startTime="1342">But that needs to be </span><span class="line" data-startTime="1342">serviced by the </span><span class="line" data-startTime="1344">operating system somehow. </span> <span class="line" data-startTime="1346">I don't think the browser should </span><span class="line" data-startTime="1346">be the one trying to </span><span class="line" data-startTime="1348">claim this one. </span></p>

<p class="speaker"><span class="line" data-starttime="1351"><span class="speakerName">Audience</span>: I work on a browser. </span><span class="line" data-startTime="1352">I work occasionally on </span><span class="line" data-startTime="1352">Chrome for Android. </span><span class="line" data-startTime="1354">And we've been talking a lot </span><span class="line" data-startTime="1354">about this particular issue </span><span class="line" data-startTime="1356">and this particular API. </span><span class="line" data-startTime="1357">And the thing we've come to </span><span class="line" data-startTime="1357">understand, as it relates to </span><span class="line" data-startTime="1361">the last session, is &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1362"><span class="speakerName">Audience</span>: Step up to </span><span class="line" data-startTime="1362">the mic, guys. </span></p>

<p class="speaker"><span class="line" data-starttime="1368"><span class="speakerName">Audience</span>: The thing we've come </span><span class="line" data-startTime="1368">to understand here is that the </span><span class="line" data-startTime="1370">only meaningful data point is </span><span class="line" data-startTime="1370">the point at which you're </span><span class="line" data-startTime="1373">actually requesting </span><span class="line" data-startTime="1373">a resource. </span> <span class="line" data-startTime="1375">That is the only time when you </span><span class="line" data-startTime="1375">can make any sort of a </span><span class="line" data-startTime="1377">decision that's worth a damn </span><span class="line" data-startTime="1377">about whether or not you've </span><span class="line" data-startTime="1379">got good quality, because </span><span class="line" data-startTime="1379">anything else is opening up a </span><span class="line" data-startTime="1382">window, which your expectations </span><span class="line" data-startTime="1384">might be violated in. </span> <span class="line" data-startTime="1385">So if I go and I ping </span><span class="line" data-startTime="1385">occasionally to a server, now </span><span class="line" data-startTime="1388">I've got a window in which I'm </span><span class="line" data-startTime="1388">going to make assumptions </span><span class="line" data-startTime="1390">about the quality of </span><span class="line" data-startTime="1390">the connection. </span> <span class="line" data-startTime="1392">And I'm likely to be </span><span class="line" data-startTime="1392">unfortunately shocked and </span><span class="line" data-startTime="1395">surprised by the terrible </span><span class="line" data-startTime="1395">things that </span><span class="line" data-startTime="1397">happened in the interim. </span> <span class="line" data-startTime="1400">Tying this to an actual request, </span><span class="line" data-startTime="1400">I think, is the only </span><span class="line" data-startTime="1402">way to do it. </span> <span class="line" data-startTime="1402">And we don't have any other API </span><span class="line" data-startTime="1402">right now that does that. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1405"><span class="speakerName">Jackson Gabbard</span>: I don't </span><span class="line" data-startTime="1405">even know if that's </span><span class="line" data-startTime="1406">really the crux of it. </span><span class="line" data-startTime="1407">I feel like the answer is </span><span class="line" data-startTime="1407">just to think about your </span><span class="line" data-startTime="1409">application from the standpoint </span><span class="line" data-startTime="1409">of minimizing your </span><span class="line" data-startTime="1411">risky network time and also </span><span class="line" data-startTime="1411">taking as many steps as you </span><span class="line" data-startTime="1415">can to harden your application </span><span class="line" data-startTime="1415">against it &mdash; </span><span class="line" data-startTime="1416">so not putting all your eggs in </span><span class="line" data-startTime="1416">one chunked HTTP request. </span><span class="line" data-startTime="1422">Bring it up over multiple HTTP </span><span class="line" data-startTime="1422">connections when necessary. </span><span class="line" data-startTime="1427">[INAUDIBLE] the steps to me, </span><span class="line" data-startTime="1427">arguing about whether or not </span><span class="line" data-startTime="1430">we should or shouldn't detect </span><span class="line" data-startTime="1430">network connectivity state is </span><span class="line" data-startTime="1433">like arguing about whether or </span><span class="line" data-startTime="1433">not the sky should be bright </span><span class="line" data-startTime="1437">colored blue. </span><span class="line" data-startTime="1437">We're not going to know. </span><span class="line" data-startTime="1438">It's not going to be good </span><span class="line" data-startTime="1438">enough information. </span><span class="line" data-startTime="1440">So what are the things that we </span><span class="line" data-startTime="1440">do that are reasonable to make </span><span class="line" data-startTime="1444">the application decent </span><span class="line" data-startTime="1444">in spite of that? </span><span class="line" data-startTime="1447">That's the part of this </span><span class="line" data-startTime="1447">discussion that I find </span><span class="line" data-startTime="1449">interesting. </span></p>

<p class="speaker"><span class="line" data-starttime="1450"><span class="speakerName">Steve Thair</span>: Can I actually &mdash; </span><span class="line" data-startTime="1450">I was going to say, John, you've </span><span class="line" data-startTime="1450">got a practical example </span><span class="line" data-startTime="1452">with the BBC apps. </span><span class="line" data-startTime="1454">What are you guys doing? </span><span class="line" data-startTime="1455">And do you care? </span><span class="line" data-startTime="1456">And how are you dealing </span><span class="line" data-startTime="1456">with that issue? </span></p>

<p class="speaker"><span class="line" data-starttime="1458"><span class="speakerName">John Cleveley</span>: Yeah, we care a </span><span class="line" data-startTime="1458">lot about making sure that our </span><span class="line" data-startTime="1461">site works really well on low </span><span class="line" data-startTime="1461">bandwidth, because we have a </span><span class="line" data-startTime="1464">lot our users use the </span><span class="line" data-startTime="1464">World Service sites. </span> <span class="line" data-startTime="1469">So we basically are always </span><span class="line" data-startTime="1469">really anal about file size, </span><span class="line" data-startTime="1472">looking at HTTP requests. </span> <span class="line" data-startTime="1475">And going back to working out </span><span class="line" data-startTime="1475">what connection you're on, I'm </span><span class="line" data-startTime="1479">interested in what people </span><span class="line" data-startTime="1479">actually will use it for. </span> <span class="line" data-startTime="1484">You can imagine users going to </span><span class="line" data-startTime="1484">the site on broadband and then </span><span class="line" data-startTime="1488">going on 4G on the phone and </span><span class="line" data-startTime="1488">getting completely different </span><span class="line" data-startTime="1491">user experience. </span></p>

<p><span class="line" data-startTime="1492">I'm interested in what </span><span class="line" data-startTime="1492">differences are we going to </span><span class="line" data-startTime="1495">actually be able to do if you've </span><span class="line" data-startTime="1495">been detected at a </span><span class="line" data-startTime="1497">higher bandwidth? </span><span class="line" data-startTime="1498">And [INAUDIBLE] you got video </span><span class="line" data-startTime="1498">and images of the big things. </span> <span class="line" data-startTime="1504">We've kind of been really </span><span class="line" data-startTime="1504">efficient with </span><span class="line" data-startTime="1507">our file sizes, basically. </span> <span class="line" data-startTime="1508">And as you said before, images </span><span class="line" data-startTime="1508">is the big thing. </span> <span class="line" data-startTime="1513">So even though we haven't got </span><span class="line" data-startTime="1513">responsive images as any sort </span><span class="line" data-startTime="1516">of standard, basically, we're </span><span class="line" data-startTime="1516">using JavaScript to work out </span><span class="line" data-startTime="1520">what's the container size. </span> <span class="line" data-startTime="1521">And then we've got a number </span><span class="line" data-startTime="1521">of recipes on the server </span><span class="line" data-startTime="1524">producing a number of different </span><span class="line" data-startTime="1524">image sizes. </span> <span class="line" data-startTime="1526">And we grab an appropriate </span><span class="line" data-startTime="1526">image for </span><span class="line" data-startTime="1528">that particular device. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1531"><span class="speakerName">Ilya Grigorik</span>: Do you do </span><span class="line" data-startTime="1531">that in real time? </span><span class="line" data-startTime="1533">How do you generate </span><span class="line" data-startTime="1533">the different </span><span class="line" data-startTime="1537">versions of the images? </span></p>

<p class="speaker"><span class="line" data-starttime="1539"><span class="speakerName">John Cleveley</span>: Yeah, they're </span><span class="line" data-startTime="1539">generated the first time then </span><span class="line" data-startTime="1540">cached on server, and </span><span class="line" data-startTime="1540">then onto CDN. </span></p>

<p class="speaker"><span class="line" data-starttime="1543"><span class="speakerName">Jackson Gabbard</span>: In the </span><span class="line" data-startTime="1543">generated case, I'm sure you </span><span class="line" data-startTime="1545">got multiple resolutions. </span><span class="line" data-startTime="1546">Do you require the people who </span><span class="line" data-startTime="1546">are publishing the stories to </span><span class="line" data-startTime="1549">upload to separate </span><span class="line" data-startTime="1549">resolutions? </span><span class="line" data-startTime="1550">Or do you &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1550"><span class="speakerName">John Cleveley</span>: No. </span><span class="line" data-startTime="1551">So they'll create one raw </span><span class="line" data-startTime="1551">image, because they're </span><span class="line" data-startTime="1554">journalists. </span><span class="line" data-startTime="1555">[INAUDIBLE] are actually </span><span class="line" data-startTime="1555">users with Facebook. </span><span class="line" data-startTime="1557">So that might be a little </span><span class="line" data-startTime="1557">bit different. </span><span class="line" data-startTime="1558">So we make sure the journalists </span><span class="line" data-startTime="1558">are uploading the </span><span class="line" data-startTime="1560">biggest size we can. </span><span class="line" data-startTime="1562">And then we've got 20, say, </span><span class="line" data-startTime="1562">different image sizes that we </span><span class="line" data-startTime="1565">would select from. </span></p>

<p class="speaker"><span class="line" data-starttime="1567"><span class="speakerName">Steve Thair</span>: So you transcode </span><span class="line" data-startTime="1567">all of that effectively server </span><span class="line" data-startTime="1569">side for the &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1570"><span class="speakerName">John Cleveley</span>: Exactly. </span><span class="line" data-startTime="1571">We resize it. </span></p>

<p class="speaker"><span class="line" data-starttime="1572"><span class="speakerName">Steve Thair</span>: Selected process </span><span class="line" data-startTime="1572">that's doing that re-scanning. </span></p>

<p class="speaker"><span class="line" data-starttime="1574"><span class="speakerName">John Cleveley</span>: Exactly. </span><span class="line" data-startTime="1574">It's just a URL that we hit, and </span><span class="line" data-startTime="1574">it will do it on run time. </span></p>

<p class="speaker"><span class="line" data-starttime="1578"><span class="speakerName">Andy Davies</span>: Do you do any of </span><span class="line" data-startTime="1578">the art direction stuff? </span></p>

<p class="speaker"><span class="line" data-starttime="1579"><span class="speakerName">John Cleveley</span>: Sorry? </span></p>

<p class="speaker"><span class="line" data-starttime="1579"><span class="speakerName">Andy Davies</span>: Do you do any </span><span class="line" data-startTime="1579">of the art direction </span><span class="line" data-startTime="1582">transformations on the image? </span><span class="line" data-startTime="1583">Or do you just crop them? </span></p>

<p class="speaker"><span class="line" data-starttime="1584"><span class="speakerName">John Cleveley</span>: No, it's </span><span class="line" data-startTime="1584">literally just re-sized. </span></p>

<p class="speaker"><span class="line" data-starttime="1587"><span class="speakerName">Steve Thair</span>: We got a </span><span class="line" data-startTime="1587">question over here. </span></p>

<p class="speaker"><span class="line" data-starttime="1588"><span class="speakerName">Audience</span>: Somebody said that the </span><span class="line" data-startTime="1588">connection quality would </span><span class="line" data-startTime="1590">have to come from </span><span class="line" data-startTime="1590">the [? RS, ?] </span><span class="line" data-startTime="1592">but I think it can come </span><span class="line" data-startTime="1592">from the browser. </span><span class="line" data-startTime="1593">One thing we do when we're </span><span class="line" data-startTime="1593">monitoring a website is keep a </span><span class="line" data-startTime="1597">track on the time to first </span><span class="line" data-startTime="1597">byte for each host we're </span><span class="line" data-startTime="1599">talking to. </span><span class="line" data-startTime="1600">And if we see that go up, we </span><span class="line" data-startTime="1600">fire off a network test. </span><span class="line" data-startTime="1604">So the browser itself could </span><span class="line" data-startTime="1604">track and say, hey, this is my </span><span class="line" data-startTime="1607">average time to first byte </span><span class="line" data-startTime="1607">from Facebook.com. </span><span class="line" data-startTime="1610">And you can respond to that. </span></p>

<p class="speaker"><span class="line" data-starttime="1611"><span class="speakerName">Ilya Grigorik</span>: But your time </span><span class="line" data-startTime="1611">to first byte in mobile </span><span class="line" data-startTime="1612">networks will vary dramatically, </span><span class="line" data-startTime="1612">because you have </span><span class="line" data-startTime="1615">different radio state </span><span class="line" data-startTime="1615">transitions. </span><span class="line" data-startTime="1617">So for example, on 3G, you </span><span class="line" data-startTime="1617">can be anywhere from 200 </span><span class="line" data-startTime="1622">milliseconds to two seconds. </span><span class="line" data-startTime="1623">Just because your rating &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1624"><span class="speakerName">Audience</span>: You can ask it </span><span class="line" data-startTime="1624">to give you standard </span><span class="line" data-startTime="1626">deviation or min/max? </span></p>

<p class="speaker"><span class="line" data-starttime="1626"><span class="speakerName">Ilya Grigorik</span>: No, no. </span><span class="line" data-startTime="1626">But this is just your </span><span class="line" data-startTime="1626">first packet. </span><span class="line" data-startTime="1628">This is your first packet. </span><span class="line" data-startTime="1629">After that, you're </span><span class="line" data-startTime="1629">pretty good. </span><span class="line" data-startTime="1630">It's 100 milliseconds </span><span class="line" data-startTime="1630">or less &mdash; </span><span class="line" data-startTime="1633">50 milliseconds. </span></p>

<p class="speaker"><span class="line" data-starttime="1633"><span class="speakerName">Audience</span>: You keep </span><span class="line" data-startTime="1633">measuring it. </span><span class="line" data-startTime="1636">[INTERPOSING VOICES] </span></p>

<p class="speaker"><span class="line" data-starttime="1636"><span class="speakerName">Ilya Grigorik</span>: No, but the </span><span class="line" data-startTime="1636">point is then you wait. </span> <span class="line" data-startTime="1639">Then you wait five seconds. </span> <span class="line" data-startTime="1641">And then you will once again </span><span class="line" data-startTime="1641">incur two seconds. </span> <span class="line" data-startTime="1643">I think the fundamental problem </span><span class="line" data-startTime="1643">that we have, is we </span><span class="line" data-startTime="1645">have this mental model of </span><span class="line" data-startTime="1645">Wi-Fi networks or mobile </span><span class="line" data-startTime="1648">networks being the same as </span><span class="line" data-startTime="1648">wired networks, which is </span><span class="line" data-startTime="1651">fundamentally wrong. </span> <span class="line" data-startTime="1652">And because of that, we feel </span><span class="line" data-startTime="1652">like there's all this </span><span class="line" data-startTime="1654">variability, all of this </span><span class="line" data-startTime="1654">randomness, all this latency. </span></p>

<p><span class="line" data-startTime="1658">But once we actually understand </span><span class="line" data-startTime="1658">why these delays </span><span class="line" data-startTime="1660">are there and you design for </span><span class="line" data-startTime="1660">them, hey, I know I'm on 3G </span><span class="line" data-startTime="1663">network right now. </span> <span class="line" data-startTime="1664">Every once in a while, I'm going </span><span class="line" data-startTime="1664">to dispatch a request </span><span class="line" data-startTime="1666">which will first block for </span><span class="line" data-startTime="1666">up to two seconds. </span> <span class="line" data-startTime="1669">And this may not be a problem if </span><span class="line" data-startTime="1669">it's just like a background </span><span class="line" data-startTime="1672">update thing, because </span><span class="line" data-startTime="1672">who cares. </span> <span class="line" data-startTime="1673">But if this is an interactive </span><span class="line" data-startTime="1673">user clicking on something and </span><span class="line" data-startTime="1677">you're on 3G, that's a UX </span><span class="line" data-startTime="1677">pattern that you should be </span><span class="line" data-startTime="1680">aware of, because you probably </span><span class="line" data-startTime="1680">need a different feedback loop </span><span class="line" data-startTime="1683">in your app to say, hey, this </span><span class="line" data-startTime="1683">could take a while. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1686"><span class="speakerName">John Cleveley</span>: So you're saying </span><span class="line" data-startTime="1686">you'd have a different </span><span class="line" data-startTime="1687">user experience depending </span><span class="line" data-startTime="1687">on what sort of </span><span class="line" data-startTime="1689">network you're on? </span></p>

<p class="speaker"><span class="line" data-starttime="1690"><span class="speakerName">Ilya Grigorik</span>: I'm just saying </span><span class="line" data-startTime="1690">you should design </span><span class="line" data-startTime="1693">with this in mind. </span><span class="line" data-startTime="1695">If you're on 3G, if you're on 4G </span><span class="line" data-startTime="1695">even, some actions, like if </span><span class="line" data-startTime="1700">my phone has been idle for a </span><span class="line" data-startTime="1700">while, the first network </span><span class="line" data-startTime="1703">interaction that you're going </span><span class="line" data-startTime="1703">to have will have a delay &mdash; </span><span class="line" data-startTime="1706">anywhere from 100 milliseconds </span><span class="line" data-startTime="1706">to two seconds &mdash; </span><span class="line" data-startTime="1709">before any packets </span><span class="line" data-startTime="1709">get dispatched. </span></p>

<p class="speaker"><span class="line" data-starttime="1711"><span class="speakerName">John Cleveley</span>: So going from a </span><span class="line" data-startTime="1711">mobile first approach, do you </span><span class="line" data-startTime="1714">think we should use that </span><span class="line" data-startTime="1714">behavior as the standard for </span><span class="line" data-startTime="1717">everybody in terms </span><span class="line" data-startTime="1717">of making sure? </span></p>

<p class="speaker"><span class="line" data-starttime="1719"><span class="speakerName">Ilya Grigorik</span>: It's probably </span><span class="line" data-startTime="1719">a reasonable thing to do. </span></p>

<p class="speaker"><span class="line" data-starttime="1722"><span class="speakerName">Audience</span>: Just one comment, </span><span class="line" data-startTime="1722">[INAUDIBLE]. </span><span class="line" data-startTime="1728">I'm basically my own firm. </span><span class="line" data-startTime="1732">Just one comment regarding the </span><span class="line" data-startTime="1732">measurement of time to first </span><span class="line" data-startTime="1736">byte, would resource timing, </span><span class="line" data-startTime="1736">especially if we could add </span><span class="line" data-startTime="1741">byte size into resource timing, </span><span class="line" data-startTime="1741">we could measure </span><span class="line" data-startTime="1744">continuously the end-to-end </span><span class="line" data-startTime="1744">bandwidth </span><span class="line" data-startTime="1754">throughout the download. </span><span class="line" data-startTime="1756">It's extremely complicated to </span><span class="line" data-startTime="1756">measure the bandwidth between </span><span class="line" data-startTime="1761">the various resources, but we </span><span class="line" data-startTime="1761">can have a fuller picture of </span><span class="line" data-startTime="1769">the download. </span></p>

<p class="speaker"><span class="line" data-starttime="1771"><span class="speakerName">Ilya Grigorik</span>: Great, we're </span><span class="line" data-startTime="1771">going to have a </span><span class="line" data-startTime="1772">fuller wrong picture. </span></p>

<p class="speaker"><span class="line" data-starttime="1774"><span class="speakerName">Steve Thair</span>: I'm going to move </span><span class="line" data-startTime="1774">on from this topic, because I </span><span class="line" data-startTime="1777">think we've done it to death. </span> <span class="line" data-startTime="1779">You either believe that </span><span class="line" data-startTime="1779">measuring the bandwidth is </span><span class="line" data-startTime="1780">useful for you, or you may </span><span class="line" data-startTime="1780">believe that measuring the </span><span class="line" data-startTime="1783">bandwidth is a complete and </span><span class="line" data-startTime="1783">utter waste of time. </span> <span class="line" data-startTime="1785">I think it really comes down to </span><span class="line" data-startTime="1785">if you're more for John's </span><span class="line" data-startTime="1788">point question really is, why do </span><span class="line" data-startTime="1788">you want to know, and what </span><span class="line" data-startTime="1792">are you going to do with </span><span class="line" data-startTime="1792">that information? </span><span class="line" data-startTime="1794">You're not going to be switching </span><span class="line" data-startTime="1794">between four </span><span class="line" data-startTime="1796">different viewport things of </span><span class="line" data-startTime="1796">this application or ways of </span><span class="line" data-startTime="1800">displaying this application </span><span class="line" data-startTime="1800">on a millisecond basis. </span></p>

<p><span class="line" data-startTime="1803">Who really cares? </span><span class="line" data-startTime="1805">One quick point? </span></p>

<p class="speaker"><span class="line" data-starttime="1806"><span class="speakerName">Audience</span>: Yeah, [INAUDIBLE], </span><span class="line" data-startTime="1806">Mozilla. </span> <span class="line" data-startTime="1808">I heard this fallacy about if </span><span class="line" data-startTime="1808">the viewport is big enough, </span><span class="line" data-startTime="1812">then we [INAUDIBLE] </span><span class="line" data-startTime="1812">bigger picture. </span> <span class="line" data-startTime="1815">That actually says that if </span><span class="line" data-startTime="1815">the screen is bigger, my </span><span class="line" data-startTime="1817">connection is faster, which </span><span class="line" data-startTime="1817">is not really true. </span> <span class="line" data-startTime="1819">So [INAUDIBLE] </span><span class="line" data-startTime="1822">Retina displays and these kinds </span><span class="line" data-startTime="1822">of things, I can't be on </span><span class="line" data-startTime="1824">a slow connection with my </span><span class="line" data-startTime="1824">Retina display machine. </span> <span class="line" data-startTime="1827">I still don't want the two-meg </span><span class="line" data-startTime="1827">background image. </span> <span class="line" data-startTime="1829">So the question is, in Flash, </span><span class="line" data-startTime="1829">we had adaptive </span><span class="line" data-startTime="1831">streaming of videos. </span> <span class="line" data-startTime="1833">And why don't we get this </span><span class="line" data-startTime="1833">in the HTML5 world? </span><span class="line" data-startTime="1837">What do you we need to do to get </span><span class="line" data-startTime="1837">this [INAUDIBLE], because </span><span class="line" data-startTime="1840">right now one can start using </span><span class="line" data-startTime="1840">Flash for that kind of stuff. </span> <span class="line" data-startTime="1843">JACKSON GABBARD: [INAUDIBLE] </span><span class="line" data-startTime="1845">I guess for me &mdash; </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1847"><span class="speakerName">Audience</span>: Can you repeat </span><span class="line" data-startTime="1847">the essence of the </span><span class="line" data-startTime="1848">comment with mics? </span></p>

<p class="speaker"><span class="line" data-starttime="1850"><span class="speakerName">Jackson Gabbard</span>: I don't </span><span class="line" data-startTime="1850">know if I can or not. </span><span class="line" data-startTime="1852">It's complicated. </span><span class="line" data-startTime="1854">So the essence was, device </span><span class="line" data-startTime="1854">screen size is no proxy for </span><span class="line" data-startTime="1861">network activity. </span><span class="line" data-startTime="1863">That's the measure that we take </span><span class="line" data-startTime="1863">against what [INAUDIBLE] </span><span class="line" data-startTime="1866">and what switches </span><span class="line" data-startTime="1866">we send across. </span><span class="line" data-startTime="1868">You mentioned the Flash </span><span class="line" data-startTime="1868">[INAUDIBLE] </span><span class="line" data-startTime="1871">where you can get </span><span class="line" data-startTime="1871">a [INAUDIBLE]. </span><span class="line" data-startTime="1873">You need something along these </span><span class="line" data-startTime="1873">lines for the HTML </span><span class="line" data-startTime="1877">[INAUDIBLE]. </span><span class="line" data-startTime="1878">Basically, you get the lower </span><span class="line" data-startTime="1878">quality image with low </span><span class="line" data-startTime="1882">bandwidth case naturally </span><span class="line" data-startTime="1882">by [INAUDIBLE] </span><span class="line" data-startTime="1886">that we don't have currently. </span><span class="line" data-startTime="1888">Is that the essence? </span></p>

<p class="speaker"><span class="line" data-starttime="1889"><span class="speakerName">Audience</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1890"><span class="speakerName">Jackson Gabbard</span>: I forgot what </span><span class="line" data-startTime="1890">I was going to say about it. </span><span class="line" data-startTime="1891">[LAUGHTER] </span></p>

<p class="speaker"><span class="line" data-starttime="1894"><span class="speakerName">Steve Thair</span>: And the </span><span class="line" data-startTime="1894">answer is, yes. </span><span class="line" data-startTime="1896">We need that. </span><span class="line" data-startTime="1897">Very good. </span><span class="line" data-startTime="1898">So I want to get on. </span><span class="line" data-startTime="1899">There are some other questions </span><span class="line" data-startTime="1899">on other topics that I want to </span><span class="line" data-startTime="1901">cover and get away </span><span class="line" data-startTime="1901">from net API. </span><span class="line" data-startTime="1903">So one of the questions which </span><span class="line" data-startTime="1903">you started to talk about with </span><span class="line" data-startTime="1906">you had different visions and </span><span class="line" data-startTime="1906">[? optimized ?] stuff, there's </span><span class="line" data-startTime="1908">a couple of questions in here </span><span class="line" data-startTime="1908">that are basically around </span><span class="line" data-startTime="1913">should I be compressing? </span><span class="line" data-startTime="1914">Should I be using </span><span class="line" data-startTime="1914">minification? </span><span class="line" data-startTime="1917">What things should I be </span><span class="line" data-startTime="1917">doing during my build </span><span class="line" data-startTime="1919">cycle in order to &mdash; </span><span class="line" data-startTime="1922">does minification really save </span><span class="line" data-startTime="1922">you all that much when it's </span><span class="line" data-startTime="1924">going to be gzip compressed </span><span class="line" data-startTime="1924">anyway? </span></p>

<p class="speaker"><span class="line" data-starttime="1926"><span class="speakerName">Jackson Gabbard</span>: I have </span><span class="line" data-startTime="1926">a poll question here. </span><span class="line" data-startTime="1928">How many people here &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1929"><span class="speakerName">Steve Thair</span>: How many </span><span class="line" data-startTime="1929">people here &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1931"><span class="speakerName">Jackson Gabbard</span>: How many </span><span class="line" data-startTime="1931">people here have a build </span><span class="line" data-startTime="1932">script for the they work on? </span></p>

<p class="speaker"><span class="line" data-starttime="1933"><span class="speakerName">Steve Thair</span>: Have a build </span><span class="line" data-startTime="1933">script for the </span><span class="line" data-startTime="1934">project they work on? </span></p>

<p class="speaker"><span class="line" data-starttime="1935"><span class="speakerName">Jackson Gabbard</span>: Holy shit. </span><span class="line" data-startTime="1936">Wow. </span></p>

<p class="speaker"><span class="line" data-starttime="1936"><span class="speakerName">Steve Thair</span>: That's like </span><span class="line" data-startTime="1936">pretty much everybody. </span><span class="line" data-startTime="1937">Awesome. </span></p>

<p class="speaker"><span class="line" data-starttime="1938"><span class="speakerName">Jackson Gabbard</span>: Nice. </span><span class="line" data-startTime="1939">I had no idea. </span><span class="line" data-startTime="1939">This is awesome. </span></p>

<p class="speaker"><span class="line" data-starttime="1940"><span class="speakerName">Steve Thair</span>: And how many of </span><span class="line" data-startTime="1940">those build scripts include </span><span class="line" data-startTime="1943">performance optimizations? </span><span class="line" data-startTime="1946">Now you're just showing off. </span><span class="line" data-startTime="1950">That was about everybody </span><span class="line" data-startTime="1950">again. </span><span class="line" data-startTime="1954">So who's doing minification? </span><span class="line" data-startTime="1957">Who's doing image optimization </span><span class="line" data-startTime="1957">and resize on the fly? </span><span class="line" data-startTime="1961">Oh, about a tenth of the </span><span class="line" data-startTime="1961">people who answered the </span><span class="line" data-startTime="1964">previous question. </span><span class="line" data-startTime="1965">What else would you </span><span class="line" data-startTime="1965">like to see? </span><span class="line" data-startTime="1966">JACKSON GABBARD: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1968"><span class="speakerName">Steve Thair</span>: This is a question </span><span class="line" data-startTime="1968">for the panel. </span><span class="line" data-startTime="1970">What else can people do in their </span><span class="line" data-startTime="1970">build cycle that you </span><span class="line" data-startTime="1973">think is really going to help </span><span class="line" data-startTime="1973">their delivery, particular </span><span class="line" data-startTime="1975">over high latency, low </span><span class="line" data-startTime="1975">bandwidth networks? </span></p>

<p class="speaker"><span class="line" data-starttime="1978"><span class="speakerName">John Cleveley</span>: I think the other </span><span class="line" data-startTime="1978">thing you can do is, for </span><span class="line" data-startTime="1981">JavaScript, you can't power </span><span class="line" data-startTime="1981">everything into an all.js. </span> <span class="line" data-startTime="1985">You do get to the point where </span><span class="line" data-startTime="1985">it starts to get massive. </span> <span class="line" data-startTime="1988">And so if there are other pages </span><span class="line" data-startTime="1988">where actually it's a </span><span class="line" data-startTime="1991">specific bit of [INAUDIBLE] </span><span class="line" data-startTime="1993">that you can have in a different </span><span class="line" data-startTime="1993">package, then </span><span class="line" data-startTime="1995">sometimes it's good to work </span><span class="line" data-startTime="1995">out what you can spit out. </span> <span class="line" data-startTime="1998">So the majority of </span><span class="line" data-startTime="1998">pages, you're </span><span class="line" data-startTime="2000">still using this all.js. </span> <span class="line" data-startTime="2001">But on these other ones that you </span><span class="line" data-startTime="2001">can get away with spitting </span><span class="line" data-startTime="2004">things out. </span> <span class="line" data-startTime="2005">So we use AMD to do that </span><span class="line" data-startTime="2005">kind of stuff. </span> <span class="line" data-startTime="2008">And there's probably all sorts </span><span class="line" data-startTime="2008">of different dependency type </span><span class="line" data-startTime="2010">things that you can use. </span></p>

<p><span class="line" data-startTime="2012">So it's not always about making </span><span class="line" data-startTime="2012">one massive file. </span> <span class="line" data-startTime="2015">Sometimes you need to be a </span><span class="line" data-startTime="2015">little bit clever about how </span><span class="line" data-startTime="2017">you split stuff up, </span><span class="line" data-startTime="2017">bundle stuff. </span></p>

<p class="speaker"><span class="line" data-starttime="2018"><span class="speakerName">Jackson Gabbard</span>: Thank </span><span class="line" data-startTime="2018">you for that. </span> <span class="line" data-startTime="2020">So the approach that we take for </span><span class="line" data-startTime="2020">Facebook is that there's </span><span class="line" data-startTime="2023">two levels. </span> <span class="line" data-startTime="2024">There's basically all </span><span class="line" data-startTime="2024">the important </span><span class="line" data-startTime="2026">interactions that matter &mdash; </span><span class="line" data-startTime="2027">clicking on links, loading </span><span class="line" data-startTime="2027">things by XHR. </span> <span class="line" data-startTime="2032">And then there's all the rich </span><span class="line" data-startTime="2032">features, all the really </span><span class="line" data-startTime="2035">bulky, all that JS stuff. </span> <span class="line" data-startTime="2036">And so in the header page, </span><span class="line" data-startTime="2036">before the body, with all the </span><span class="line" data-startTime="2039">[INAUDIBLE], we'll send out all </span><span class="line" data-startTime="2039">of the basics, the really </span><span class="line" data-startTime="2043">tight, "do not put bytes in </span><span class="line" data-startTime="2043">here, you're wasting human </span><span class="line" data-startTime="2045">lifetime" sort of stuff </span><span class="line" data-startTime="2045">in that [INAUDIBLE] </span><span class="line" data-startTime="2048">JavaScript. </span> <span class="line" data-startTime="2049">And then the stuff you need </span><span class="line" data-startTime="2049">later, you'll get to it. </span> <span class="line" data-startTime="2052">Eventually you'll get those </span><span class="line" data-startTime="2052">features, and then the </span><span class="line" data-startTime="2054">widgets, the flyouts, the </span><span class="line" data-startTime="2054">[? beepers on the site, ?] </span><span class="line" data-startTime="2058">the core interactions that are </span><span class="line" data-startTime="2058">JavaScript enhanced, they'll </span><span class="line" data-startTime="2060">be there immediately. </span></p>

<p><span class="line" data-startTime="2061">It's the exact same approach. </span></p>

<p class="speaker"><span class="line" data-starttime="2062"><span class="speakerName">John Cleveley</span>: And it's just </span><span class="line" data-startTime="2062">downloading what the user's </span><span class="line" data-startTime="2063">actually going to use as well </span><span class="line" data-startTime="2063">and using feature detection. </span><span class="line" data-startTime="2066">So if you're doing video, </span><span class="line" data-startTime="2066">check that the user can </span><span class="line" data-startTime="2068">actually play video before you </span><span class="line" data-startTime="2068">download your HTML5 player and </span><span class="line" data-startTime="2071">things like that. </span><span class="line" data-startTime="2072">So just looking after the guys </span><span class="line" data-startTime="2072">with the bad phones, because </span><span class="line" data-startTime="2075">they're probably got bad </span><span class="line" data-startTime="2075">JavaScript as well and </span><span class="line" data-startTime="2078">probably are on slow </span><span class="line" data-startTime="2078">connections &mdash; </span><span class="line" data-startTime="2079">I'm making lots of </span><span class="line" data-startTime="2079">assumptions here. </span><span class="line" data-startTime="2081">But you generally </span><span class="line" data-startTime="2081">get the idea. </span><span class="line" data-startTime="2084">Basically it's just progressive </span><span class="line" data-startTime="2084">enhancement. </span><span class="line" data-startTime="2086">That's the most basic level. </span></p>

<p class="speaker"><span class="line" data-starttime="2087"><span class="speakerName">Andy Davies</span>: But there also a </span><span class="line" data-startTime="2087">lot of people who are afraid </span><span class="line" data-startTime="2089">of &mdash; particularly in the </span><span class="line" data-startTime="2089">design community &mdash; of </span><span class="line" data-startTime="2091">server-side stuff. </span><span class="line" data-startTime="2092">If you look at media queries, </span><span class="line" data-startTime="2092">the showcase site for </span><span class="line" data-startTime="2096">responsive designs, and you look </span><span class="line" data-startTime="2096">at the configuration of </span><span class="line" data-startTime="2099">some of these guys' servers, </span><span class="line" data-startTime="2099">there's basic things like, </span><span class="line" data-startTime="2103">gzip compression missing, </span><span class="line" data-startTime="2103">keepalives missing, cache </span><span class="line" data-startTime="2107">directives missing. </span><span class="line" data-startTime="2108">There's a lot of basic stuff </span><span class="line" data-startTime="2108">that as a web industry, we're </span><span class="line" data-startTime="2112">really bad at doing. </span></p>

<p class="speaker"><span class="line" data-starttime="2114"><span class="speakerName">Ilya Grigorik</span>: It's actually </span><span class="line" data-startTime="2114">surprising. </span><span class="line" data-startTime="2116">Maybe not in this room. </span><span class="line" data-startTime="2117">I think in this room, most of us </span><span class="line" data-startTime="2117">here have the basics right. </span><span class="line" data-startTime="2120">Turns out most of the rest of </span><span class="line" data-startTime="2120">the industry still has the </span><span class="line" data-startTime="2122">basics wrong. </span><span class="line" data-startTime="2124">That's a big problem. </span></p>

<p class="speaker"><span class="line" data-starttime="2126"><span class="speakerName">Steve Thair</span>: I'm </span><span class="line" data-startTime="2126">an ops manager. </span><span class="line" data-startTime="2127">I'm going to disagree </span><span class="line" data-startTime="2127">with that. </span><span class="line" data-startTime="2128">Just because all the developers </span><span class="line" data-startTime="2128">in this room are </span><span class="line" data-startTime="2130">doing everything right sure as </span><span class="line" data-startTime="2130">heck doesn't mean the ops guys </span><span class="line" data-startTime="2132">who run the servers </span><span class="line" data-startTime="2132">are doing it. </span></p>

<p class="speaker"><span class="line" data-starttime="2134"><span class="speakerName">Ilya Grigorik</span>: All right. </span> <span class="line" data-startTime="2135">Fair enough. </span> <span class="line" data-startTime="2137">So we talked about JavaScript. </span> <span class="line" data-startTime="2138">I'll come back to images. </span> <span class="line" data-startTime="2140">60% of the bytes &mdash; </span><span class="line" data-startTime="2141">images. </span> <span class="line" data-startTime="2143">You probably have your PNG </span><span class="line" data-startTime="2143">optim, jpegtran or something </span><span class="line" data-startTime="2148">built into your build script. </span> <span class="line" data-startTime="2151">Chances are, you're still </span><span class="line" data-startTime="2151">missing the opportunity to </span><span class="line" data-startTime="2154">transcode it to a better </span><span class="line" data-startTime="2154">image format. </span> <span class="line" data-startTime="2156">I'm guessing half of your PNGs </span><span class="line" data-startTime="2156">are bed encoded as JPEGs and </span><span class="line" data-startTime="2160">vice versa. </span> <span class="line" data-startTime="2161">This is a much harder problem to </span><span class="line" data-startTime="2161">solve, because it's likely </span><span class="line" data-startTime="2164">that your PNG is hardcoded into </span><span class="line" data-startTime="2164">your app, which means you </span><span class="line" data-startTime="2167">need to rewrite your code. </span> <span class="line" data-startTime="2168">But this is a huge, huge </span><span class="line" data-startTime="2168">opportunity that you should </span><span class="line" data-startTime="2171">look at today. </span> <span class="line" data-startTime="2172">And you guys have a server-side </span><span class="line" data-startTime="2172">solution to do the </span><span class="line" data-startTime="2175">image resizing. </span></p>

<p><span class="line" data-startTime="2176">I think this is something that </span><span class="line" data-startTime="2176">more and more people need to </span><span class="line" data-startTime="2179">deploy, because we just stick </span><span class="line" data-startTime="2179">images into a markup and </span><span class="line" data-startTime="2182">resize them on a client. </span> <span class="line" data-startTime="2184">And that's a big problem. </span></p>

<p class="speaker"><span class="line" data-starttime="2185"><span class="speakerName">Jackson Gabbard</span>: The hard </span><span class="line" data-startTime="2185">problem, it's sort of an </span><span class="line" data-startTime="2187">exponential nature, because if </span><span class="line" data-startTime="2187">you want to serve every single </span><span class="line" data-startTime="2190">resolution, well, that's </span><span class="line" data-startTime="2190">a different image size. </span> <span class="line" data-startTime="2192">If you want a full width image </span><span class="line" data-startTime="2192">for every single resolution, </span><span class="line" data-startTime="2195">that's a massive number </span><span class="line" data-startTime="2195">of resolutions. </span> <span class="line" data-startTime="2198">And so the coping mechanism we </span><span class="line" data-startTime="2198">use is to basically put it in </span><span class="line" data-startTime="2203">four-ish categories. </span> <span class="line" data-startTime="2203">I think we have roughly </span><span class="line" data-startTime="2203">four sizes &mdash; </span><span class="line" data-startTime="2206">very, very small, original </span><span class="line" data-startTime="2206">iPhone, high-end iPhone world, </span><span class="line" data-startTime="2211">and then gigantic, tablet-y, </span><span class="line" data-startTime="2211">very high-resolution Android </span><span class="line" data-startTime="2214">phone-y stuff. </span> <span class="line" data-startTime="2216">And then use careful CSS to let </span><span class="line" data-startTime="2216">it crop on the client in a </span><span class="line" data-startTime="2221">way that's reasonable. </span></p>

<p><span class="line" data-startTime="2222">And that way, you never quite </span><span class="line" data-startTime="2222">get exactly the right thing in </span><span class="line" data-startTime="2226">all cases, but you end up having </span><span class="line" data-startTime="2226">to have not a mess, but </span><span class="line" data-startTime="2229">not a server side storage. </span></p>

<p class="speaker"><span class="line" data-starttime="2236"><span class="speakerName">Audience</span>: Yeah this is </span><span class="line" data-startTime="2236">[INAUDIBLE] from Mozilla. </span><span class="line" data-startTime="2238">One thing we saw when we were </span><span class="line" data-startTime="2238">looking into doing WebP was </span><span class="line" data-startTime="2242">that the reason it wasn't </span><span class="line" data-startTime="2242">commencing was we saw that </span><span class="line" data-startTime="2246">people could just use better </span><span class="line" data-startTime="2246">JPEG compressors. </span><span class="line" data-startTime="2252">When you're encoding to JPEG, </span><span class="line" data-startTime="2252">if you just use better </span><span class="line" data-startTime="2256">parameters to your JPEG </span><span class="line" data-startTime="2256">compressor, you can actually </span><span class="line" data-startTime="2258">win about the same order of </span><span class="line" data-startTime="2258">magnitude as this 30% that </span><span class="line" data-startTime="2263">WebP currently proposed. </span><span class="line" data-startTime="2265">It's quite possible that WebP </span><span class="line" data-startTime="2265">can do even better. </span><span class="line" data-startTime="2269">But the order, the wins that </span><span class="line" data-startTime="2269">people were shooting for could </span><span class="line" data-startTime="2275">be had in many cases with just </span><span class="line" data-startTime="2275">passing better parameters to </span><span class="line" data-startTime="2278">your compressor. </span></p>

<p class="speaker"><span class="line" data-starttime="2279"><span class="speakerName">Ilya Grigorik</span>: So I think </span><span class="line" data-startTime="2279">there's a couple </span><span class="line" data-startTime="2281">of threads in there. </span><span class="line" data-startTime="2283">You have quality level. </span><span class="line" data-startTime="2286">And most of the time today, we </span><span class="line" data-startTime="2286">save our JPEGs either as 100, </span><span class="line" data-startTime="2290">or if you're advanced, you'll </span><span class="line" data-startTime="2290">save it as an 85. </span><span class="line" data-startTime="2294">We can go way down into the </span><span class="line" data-startTime="2294">tail and actually get very </span><span class="line" data-startTime="2296">good visual performance at </span><span class="line" data-startTime="2296">a fraction of the cost. </span><span class="line" data-startTime="2300">WebP does have about 30%, on </span><span class="line" data-startTime="2300">average, better compression at </span><span class="line" data-startTime="2304">the same quality level, the </span><span class="line" data-startTime="2304">same perceptual level. </span><span class="line" data-startTime="2307">It is definitely the case that </span><span class="line" data-startTime="2307">you can take all your JPEGs, </span><span class="line" data-startTime="2309">save at a lower quality, </span><span class="line" data-startTime="2309">basically re-compress them, </span><span class="line" data-startTime="2312">and get much better bytes </span><span class="line" data-startTime="2312">on the [? wire. ?] </span><span class="line" data-startTime="2315">So that is definitely true. </span><span class="line" data-startTime="2317">And I think that's an </span><span class="line" data-startTime="2317">under-appreciated area </span><span class="line" data-startTime="2320">generally today. </span></p>

<p class="speaker"><span class="line" data-starttime="2324"><span class="speakerName">John Cleveley</span>: One thing as well </span><span class="line" data-startTime="2324">is, if you want to work </span><span class="line" data-startTime="2325">it out from a UX perspective, </span><span class="line" data-startTime="2325">how many images you need to </span><span class="line" data-startTime="2328">show [INAUDIBLE]. </span><span class="line" data-startTime="2329">You can fool around with </span><span class="line" data-startTime="2329">compression, but actually if </span><span class="line" data-startTime="2333">you get to the desktop </span><span class="line" data-startTime="2333">BBC News site, we've </span><span class="line" data-startTime="2335">got a lot of images. </span><span class="line" data-startTime="2337">And so that's something we're </span><span class="line" data-startTime="2337">looking at to work on. </span><span class="line" data-startTime="2340">In our mobile site, </span><span class="line" data-startTime="2340">we've only got 10. </span><span class="line" data-startTime="2342">And that's just a massive win. </span><span class="line" data-startTime="2343">And so it's working out just </span><span class="line" data-startTime="2343">trying to do less but do the </span><span class="line" data-startTime="2348">stuff you do do really well. </span><span class="line" data-startTime="2349">I think that that's the biggest </span><span class="line" data-startTime="2350">thing for network stuff. </span></p>

<p class="speaker"><span class="line" data-starttime="2352"><span class="speakerName">Steve Thair</span>: On the feature </span><span class="line" data-startTime="2352">phone, you drop the images </span><span class="line" data-startTime="2354">altogether on the news </span><span class="line" data-startTime="2354">page, don't you? </span></p>

<p class="speaker"><span class="line" data-starttime="2356"><span class="speakerName">John Cleveley</span>: Yeah </span><span class="line" data-startTime="2356">that's right. </span><span class="line" data-startTime="2356">So if you hit our site on a </span><span class="line" data-startTime="2356">feature phone, like a Nokia, </span><span class="line" data-startTime="2359">you'd literally just get </span><span class="line" data-startTime="2359">the first image. </span><span class="line" data-startTime="2361">And that gets replaced out with </span><span class="line" data-startTime="2361">a better quality image if </span><span class="line" data-startTime="2363">you're on a wider screen. </span><span class="line" data-startTime="2365">And then we post-load all the </span><span class="line" data-startTime="2365">other images with JavaScript. </span></p>

<p class="speaker"><span class="line" data-starttime="2368"><span class="speakerName">Steve Thair</span>: We've got </span><span class="line" data-startTime="2368">a question from Colt. </span></p>

<p class="speaker"><span class="line" data-starttime="2370"><span class="speakerName">Audience</span>: Yeah, quick </span><span class="line" data-startTime="2370">question &mdash; </span><span class="line" data-startTime="2371">Colt McAnlis from Google. </span><span class="line" data-startTime="2372">So can we actually talk about </span><span class="line" data-startTime="2372">how the fact that the smaller </span><span class="line" data-startTime="2375">image compression formats we </span><span class="line" data-startTime="2375">have decreases our network hit </span><span class="line" data-startTime="2379">and actually increases </span><span class="line" data-startTime="2379">our runtime hit. </span><span class="line" data-startTime="2381">So all those JPEGs and PNGs have </span><span class="line" data-startTime="2381">to be decoded to a full </span><span class="line" data-startTime="2384">resolution 32-bit and then </span><span class="line" data-startTime="2384">transferred to the GPU, which </span><span class="line" data-startTime="2386">actually puts more pressure on </span><span class="line" data-startTime="2386">the GPU memory, causing more </span><span class="line" data-startTime="2389">invalidations and actually </span><span class="line" data-startTime="2389">hurts your runtime </span><span class="line" data-startTime="2391">performance. </span><span class="line" data-startTime="2392">What are our thoughts </span><span class="line" data-startTime="2392">on fixing this? </span></p>

<p class="speaker"><span class="line" data-starttime="2396"><span class="speakerName">Ilya Grigorik</span>: I don't think </span><span class="line" data-startTime="2396">there's a fix for it. </span> <span class="line" data-startTime="2397">It's a trade-off. </span> <span class="line" data-startTime="2401">How does WebP give you better </span><span class="line" data-startTime="2401">image compression? </span><span class="line" data-startTime="2405">Well, we have more advanced </span><span class="line" data-startTime="2405">algorithms that </span><span class="line" data-startTime="2407">take more CPU time. </span> <span class="line" data-startTime="2408">And vice versa, you need </span><span class="line" data-startTime="2408">more time to decode it. </span> <span class="line" data-startTime="2411">So this is an interesting </span><span class="line" data-startTime="2411">trade-off. </span> <span class="line" data-startTime="2413">It will take more time to decode </span><span class="line" data-startTime="2413">a WebP image than it </span><span class="line" data-startTime="2416">does to decode a JPEG image. </span> <span class="line" data-startTime="2418">And you need to look at, maybe </span><span class="line" data-startTime="2418">if you were building a game </span><span class="line" data-startTime="2423">and it's like you have a ton </span><span class="line" data-startTime="2423">of image [INAUDIBLE], maybe </span><span class="line" data-startTime="2426">your CPU, especially on </span><span class="line" data-startTime="2426">a ARM processor, is </span><span class="line" data-startTime="2430">your limiting factor. </span> <span class="line" data-startTime="2432">Maybe be at that point, you </span><span class="line" data-startTime="2432">make a decision to use </span><span class="line" data-startTime="2434">something else. </span></p>

<p><span class="line" data-startTime="2435">We recently did some studies &mdash; </span><span class="line" data-startTime="2437">I don't think we've published </span><span class="line" data-startTime="2437">anything yet at this point, </span><span class="line" data-startTime="2439">but I think we will. </span> <span class="line" data-startTime="2440">We looked at Image Search at </span><span class="line" data-startTime="2440">Google, where we moved </span><span class="line" data-startTime="2444">everything to WebP and just </span><span class="line" data-startTime="2444">looked at, what are the wins, </span><span class="line" data-startTime="2447">what are the losses? </span><span class="line" data-startTime="2448">We do take more time </span><span class="line" data-startTime="2448">in the CPU. </span> <span class="line" data-startTime="2450">We take a lot less time </span><span class="line" data-startTime="2450">on the network. </span> <span class="line" data-startTime="2452">Then that trade-off is we're </span><span class="line" data-startTime="2452">still better off using WebP in </span><span class="line" data-startTime="2455">that specific case. </span> <span class="line" data-startTime="2456">And this is your Image Search </span><span class="line" data-startTime="2456">page, which has like 20 or 30 </span><span class="line" data-startTime="2460">images at different </span><span class="line" data-startTime="2460">resolutions. </span> <span class="line" data-startTime="2462">So this is, I think, </span><span class="line" data-startTime="2462">a great point. </span></p>

<p><span class="line" data-startTime="2465">It's something you need </span><span class="line" data-startTime="2465">to keep in mind. </span></p>

<p class="speaker"><span class="line" data-starttime="2466"><span class="speakerName">Steve Thair</span>: OK. </span><span class="line" data-startTime="2467">The I think we've done </span><span class="line" data-startTime="2467">images to death. </span><span class="line" data-startTime="2469">We've got about 10 </span><span class="line" data-startTime="2469">minutes left. </span><span class="line" data-startTime="2470">I want to try to move on to two </span><span class="line" data-startTime="2470">semi-related topics that </span><span class="line" data-startTime="2474">are very network specific. </span><span class="line" data-startTime="2476">The first is some guy named Andy </span><span class="line" data-startTime="2476">Davies from Bristol asked </span><span class="line" data-startTime="2480">the question, with the adoption </span><span class="line" data-startTime="2480">of multiplexed </span><span class="line" data-startTime="2482">protocols like SPDY and HTTP2 </span><span class="line" data-startTime="2482">and the prioritization of </span><span class="line" data-startTime="2486">resource downloads by the </span><span class="line" data-startTime="2486">browser based upon the type, </span><span class="line" data-startTime="2490">will data URIs become </span><span class="line" data-startTime="2490">an anti-pattern? </span><span class="line" data-startTime="2495">That's one question. </span><span class="line" data-startTime="2497">And then there was another </span><span class="line" data-startTime="2497">question that was basically </span><span class="line" data-startTime="2498">about web sockets and </span><span class="line" data-startTime="2498">stuff like that. </span><span class="line" data-startTime="2501">So I just want to move on </span><span class="line" data-startTime="2501">to talking about those. </span><span class="line" data-startTime="2504">So does anybody want </span><span class="line" data-startTime="2504">to answer Andy's </span><span class="line" data-startTime="2506">question other than Andy? </span><span class="line" data-startTime="2508">Or you can answer your own </span><span class="line" data-startTime="2508">question if you want to, Andy. </span></p>

<p class="speaker"><span class="line" data-starttime="2511"><span class="speakerName">Jackson Gabbard</span>: I think it </span><span class="line" data-startTime="2511">echoes what you said earlier &mdash; </span><span class="line" data-startTime="2513">the idea that the best request </span><span class="line" data-startTime="2513">is no request. </span><span class="line" data-startTime="2514">So [INAUDIBLE] </span><span class="line" data-startTime="2515">is pretty sweet for that. </span><span class="line" data-startTime="2516">It's all there. </span><span class="line" data-startTime="2518">If you're [INAUDIBLE] mobile </span><span class="line" data-startTime="2518">app, you can put all your data </span><span class="line" data-startTime="2521">URLs into your CSS and you </span><span class="line" data-startTime="2521">have one CSS file. </span><span class="line" data-startTime="2524">That's a win. </span><span class="line" data-startTime="2525">I can't imagine a world where </span><span class="line" data-startTime="2525">going from no request to any </span><span class="line" data-startTime="2529">request isn't a better </span><span class="line" data-startTime="2529">trade-off. </span></p>

<p class="speaker"><span class="line" data-starttime="2534"><span class="speakerName">Ilya Grigorik</span>: Why do </span><span class="line" data-startTime="2534">we inline stuff? </span><span class="line" data-startTime="2536">It's because we have limitations </span><span class="line" data-startTime="2536">in HTTP 1.1, which </span><span class="line" data-startTime="2539">make small requests expense. </span> <span class="line" data-startTime="2540">It's the same reason </span><span class="line" data-startTime="2540">we sprite images. </span> <span class="line" data-startTime="2542">It's the same reason </span><span class="line" data-startTime="2542">we concatenate </span><span class="line" data-startTime="2544">files, all of this stuff. </span> <span class="line" data-startTime="2545">With SPDY and HTTP2, that goes </span><span class="line" data-startTime="2545">away, because we can multiplex </span><span class="line" data-startTime="2550">all the stuff in parallel. </span> <span class="line" data-startTime="2551">You can send all of your </span><span class="line" data-startTime="2551">requests at the same time. </span> <span class="line" data-startTime="2553">We don't need multiple </span><span class="line" data-startTime="2553">parallel connections. </span> <span class="line" data-startTime="2555">Yada, yada, yada. </span> <span class="line" data-startTime="2556">Then coming back to inlining, </span><span class="line" data-startTime="2556">inlining is a </span><span class="line" data-startTime="2558">form of a server push. </span> <span class="line" data-startTime="2563">Here's the idea. </span></p>

<p><span class="line" data-startTime="2564">In HTTP2, we have this proposal </span><span class="line" data-startTime="2564">to say, sometimes the </span><span class="line" data-startTime="2567">server actually knows what </span><span class="line" data-startTime="2567">you're going to request before </span><span class="line" data-startTime="2570">you request it. </span> <span class="line" data-startTime="2570">Like I'm sending you </span><span class="line" data-startTime="2570">the damn page. </span> <span class="line" data-startTime="2572">I know the resources on it. </span> <span class="line" data-startTime="2573">So why don't I just send </span><span class="line" data-startTime="2573">you the resources? </span><span class="line" data-startTime="2576">Seems kind of obvious, right? </span><span class="line" data-startTime="2577">So that's the idea behind </span><span class="line" data-startTime="2577">server push. </span> <span class="line" data-startTime="2580">And inlining is push, because </span><span class="line" data-startTime="2580">you're saying, look, I know </span><span class="line" data-startTime="2583">you're going to ask </span><span class="line" data-startTime="2583">for this icon. </span> <span class="line" data-startTime="2584">So here, page 64 in the file. </span> <span class="line" data-startTime="2587">Forget it. </span></p>

<p><span class="line" data-startTime="2588">Don't make the request. </span> <span class="line" data-startTime="2589">That's a trade-off </span><span class="line" data-startTime="2589">of HTTP 1.1. </span> <span class="line" data-startTime="2592">With 2, we can actually get away </span><span class="line" data-startTime="2592">from that and say, by the </span><span class="line" data-startTime="2596">way, here's the file. </span> <span class="line" data-startTime="2597">And why is that a win? </span><span class="line" data-startTime="2597">So let's say you have to have a </span><span class="line" data-startTime="2597">small icon or a big icon or </span><span class="line" data-startTime="2600">whatnot, and you inline </span><span class="line" data-startTime="2600">into a page. </span> <span class="line" data-startTime="2602">Now you're inlining that thing </span><span class="line" data-startTime="2602">into every single page. </span> <span class="line" data-startTime="2605">It fits on multiple pages. </span> <span class="line" data-startTime="2607">So you're just bloating </span><span class="line" data-startTime="2607">the size of each page. </span> <span class="line" data-startTime="2610">Whereas with push, it can </span><span class="line" data-startTime="2610">actually be in your cache. </span> <span class="line" data-startTime="2613">So I think it is mostly </span><span class="line" data-startTime="2613">an anti-pattern. </span> <span class="line" data-startTime="2615">I'm sure there's one or two </span><span class="line" data-startTime="2615">use cases where there may </span><span class="line" data-startTime="2619">still &mdash; like, if it's only </span><span class="line" data-startTime="2619">used on one page, it's </span><span class="line" data-startTime="2621">effectively the same. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2626"><span class="speakerName">Steve Thair</span>: There's another </span><span class="line" data-startTime="2626">question here which is about </span><span class="line" data-startTime="2627">web sockets. </span><span class="line" data-startTime="2628">It seems that abstractions like </span><span class="line" data-startTime="2628">Socket.IO and Pusher are </span><span class="line" data-startTime="2631">the preferred way to </span><span class="line" data-startTime="2631">use web sockets. </span><span class="line" data-startTime="2633">Is this a failing in the </span><span class="line" data-startTime="2633">specification process? </span><span class="line" data-startTime="2636">Is it now the expectation that </span><span class="line" data-startTime="2636">new DOM APIs will be needed to </span><span class="line" data-startTime="2639">be wrapped by libraries </span><span class="line" data-startTime="2639">or frameworks? </span><span class="line" data-startTime="2640">So basically saying, does the </span><span class="line" data-startTime="2640">specification suck so bad </span><span class="line" data-startTime="2643">you've got to use another layer </span><span class="line" data-startTime="2643">on top to make it work? </span></p>

<p class="speaker"><span class="line" data-starttime="2647"><span class="speakerName">Audience</span>: [INAUDIBLE]? </span><span class="line" data-startTime="2653">[LAUGHTER] </span></p>

<p class="speaker"><span class="line" data-starttime="2654"><span class="speakerName">Steve Thair</span>: We'll take </span><span class="line" data-startTime="2654">that as a no. </span><span class="line" data-startTime="2655">So, apart from the guy from </span><span class="line" data-startTime="2655">Pusher in the audience, who's </span><span class="line" data-startTime="2660">using web sockets, and are they </span><span class="line" data-startTime="2660">using web sockets in a </span><span class="line" data-startTime="2662">mobile device? </span><span class="line" data-startTime="2663">Can I see a quick </span><span class="line" data-startTime="2663">show of hands? </span><span class="line" data-startTime="2665">So that's about four, </span><span class="line" data-startTime="2665">five people maybe. </span><span class="line" data-startTime="2669">Does anybody have any really bad </span><span class="line" data-startTime="2669">problems in a mobile world </span><span class="line" data-startTime="2673">that they think that causes? </span></p>

<p class="speaker"><span class="line" data-starttime="2678"><span class="speakerName">Audience</span>: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="2681"><span class="speakerName">Steve Thair</span>: One replay was, </span><span class="line" data-startTime="2681">the network provider is </span><span class="line" data-startTime="2684">blocking web sockets traffic. </span></p>

<p class="speaker"><span class="line" data-starttime="2686"><span class="speakerName">Audience</span>: Some of them. </span><span class="line" data-startTime="2687">Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2687"><span class="speakerName">Steve Thair</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="2690"><span class="speakerName">Audience</span>: I haven't tested this, </span><span class="line" data-startTime="2690">but I've been told that </span><span class="line" data-startTime="2693">a web socket can just drop out </span><span class="line" data-startTime="2693">on a mobile connection. </span><span class="line" data-startTime="2698">I'm going to be listening </span><span class="line" data-startTime="2698">to the close events. </span><span class="line" data-startTime="2701">But I suppose the question is </span><span class="line" data-startTime="2701">simply to ask if that was </span><span class="line" data-startTime="2705">anything that anyone else </span><span class="line" data-startTime="2705">has come across. </span></p>

<p class="speaker"><span class="line" data-starttime="2708"><span class="speakerName">Ilya Grigorik</span>: So this is &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2709"><span class="speakerName">Steve Thair</span>: Just repeat </span><span class="line" data-startTime="2709">the answer. </span></p>

<p class="speaker"><span class="line" data-starttime="2711"><span class="speakerName">Ilya Grigorik</span>: So the question </span><span class="line" data-startTime="2711">was, or the comment is that </span><span class="line" data-startTime="2714">sometimes website connections </span><span class="line" data-startTime="2714">just drop </span><span class="line" data-startTime="2717">out on mobile networks. </span> <span class="line" data-startTime="2718">And this is a deployment </span><span class="line" data-startTime="2718">problem. </span> <span class="line" data-startTime="2720">So I think there's </span><span class="line" data-startTime="2720">two problems. </span> <span class="line" data-startTime="2721">First of all, web sockets did </span><span class="line" data-startTime="2721">go through a very elaborate </span><span class="line" data-startTime="2723">process of many revisions </span><span class="line" data-startTime="2723">and specifications. </span> <span class="line" data-startTime="2727">Depending on which server you </span><span class="line" data-startTime="2727">use &mdash; so I happen to have </span><span class="line" data-startTime="2729">worked on one &mdash; </span><span class="line" data-startTime="2730">it's the Ruby implementation, </span><span class="line" data-startTime="2730">the EM web socket. </span> <span class="line" data-startTime="2732">If you actually look at the </span><span class="line" data-startTime="2732">implementation, we have, like, </span><span class="line" data-startTime="2735">15 implementations of </span><span class="line" data-startTime="2735">all the drafts. </span> <span class="line" data-startTime="2737">It's a total nightmare in terms </span><span class="line" data-startTime="2737">of negotiating, oh, this </span><span class="line" data-startTime="2740">browser supports this </span><span class="line" data-startTime="2740">spec, et cetera. </span></p>

<p><span class="line" data-startTime="2743">That was problem number one. </span> <span class="line" data-startTime="2744">So I think we did fail in the </span><span class="line" data-startTime="2744">specification process of that </span><span class="line" data-startTime="2747">specific standard. </span> <span class="line" data-startTime="2749">The bigger problem today with </span><span class="line" data-startTime="2749">web sockets is you have to </span><span class="line" data-startTime="2753">deploy over SSL. </span> <span class="line" data-startTime="2755">If you're deploying it on </span><span class="line" data-startTime="2755">mobile, you have to deploy it </span><span class="line" data-startTime="2758">over SSL, because most of the </span><span class="line" data-startTime="2758">carriers have some proxies in </span><span class="line" data-startTime="2763">between that try to optimize </span><span class="line" data-startTime="2763">traffic, whatever that means. </span> <span class="line" data-startTime="2767">And they look web sockets, and </span><span class="line" data-startTime="2767">they're like, look, this </span><span class="line" data-startTime="2770">doesn't smell like HTTP. </span> <span class="line" data-startTime="2772">Close. </span> <span class="line" data-startTime="2773">Or even better, the blind </span><span class="line" data-startTime="2773">proxies, which don't even care </span><span class="line" data-startTime="2776">what's in there. </span> <span class="line" data-startTime="2777">They're just substituting </span><span class="line" data-startTime="2777">bytes. </span> <span class="line" data-startTime="2779">And this is why without SSL, </span><span class="line" data-startTime="2779">20% of your connections on </span><span class="line" data-startTime="2782">desktop will fail randomly. </span></p>

<p><span class="line" data-startTime="2785">You have a proxy that doesn't </span><span class="line" data-startTime="2785">understand web </span><span class="line" data-startTime="2787">sockets, end of story. </span> <span class="line" data-startTime="2789">On mobile, it just happens to </span><span class="line" data-startTime="2789">be the other way around. </span> <span class="line" data-startTime="2792">80% of your connections </span><span class="line" data-startTime="2792">will fail. </span> <span class="line" data-startTime="2794">So if you want, you </span><span class="line" data-startTime="2794">can reliably </span><span class="line" data-startTime="2796">deploy web sockets today. </span> <span class="line" data-startTime="2797">It's HTTPS. </span> <span class="line" data-startTime="2798">And that's how anybody on mobile </span><span class="line" data-startTime="2798">deploys that at scale. </span></p>

<p class="speaker"><span class="line" data-starttime="2803"><span class="speakerName">Steve Thair</span>: Great. </span></p>

<p class="speaker"><span class="line" data-starttime="2808"><span class="speakerName">Audience</span>: [INAUDIBLE] </span><span class="line" data-startTime="2808">with Mozilla again. </span><span class="line" data-startTime="2809">Isn't the big reason for library </span><span class="line" data-startTime="2809">use that a lot of </span><span class="line" data-startTime="2812">browsers still don't support </span><span class="line" data-startTime="2812">web sockets, or a lot of </span><span class="line" data-startTime="2814">browsers that people use still </span><span class="line" data-startTime="2814">don't support web sockets, </span><span class="line" data-startTime="2817">which we can't really </span><span class="line" data-startTime="2817">get away from? </span></p>

<p class="speaker"><span class="line" data-starttime="2818"><span class="speakerName">Ilya Grigorik</span>: So we need HTTP </span><span class="line" data-startTime="2818">fallbacks for browsers that </span><span class="line" data-startTime="2821">don't support it. </span><span class="line" data-startTime="2823">Hence the reason for Socket.IO </span><span class="line" data-startTime="2823">and all these other </span><span class="line" data-startTime="2826">abstractions. </span><span class="line" data-startTime="2827">And that's just an unfortunate </span><span class="line" data-startTime="2827">reality of not everybody is </span><span class="line" data-startTime="2830">able to upgrade to an </span><span class="line" data-startTime="2830">evergreen browser. </span><span class="line" data-startTime="2833">Some people are just stuck on </span><span class="line" data-startTime="2833">an old IE machine that they </span><span class="line" data-startTime="2836">can't upgrade. </span><span class="line" data-startTime="2836">And I don't know how </span><span class="line" data-startTime="2836">to fix that. </span></p>

<p class="speaker"><span class="line" data-starttime="2841"><span class="speakerName">Audience</span>: Hi. </span><span class="line" data-startTime="2842">ILYA GRIGORIK: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="2845"><span class="speakerName">Steve Thair</span>: Got a question </span><span class="line" data-startTime="2845">right there. </span></p>

<p class="speaker"><span class="line" data-starttime="2846"><span class="speakerName">Audience</span>: Yes. </span></p>

<p class="speaker"><span class="line" data-starttime="2847"><span class="speakerName">Steve Thair</span>: Tell </span><span class="line" data-startTime="2847">us your name. </span></p>

<p class="speaker"><span class="line" data-starttime="2848"><span class="speakerName">Audience</span>: Hi, my name </span><span class="line" data-startTime="2848">is [INAUDIBLE] </span><span class="line" data-startTime="2849">from [INAUDIBLE]. </span><span class="line" data-startTime="2851">If I use a web socket for </span><span class="line" data-startTime="2851">mobile, does it drain the </span><span class="line" data-startTime="2855">battery further. </span><span class="line" data-startTime="2855">Or as long as it's an idle </span><span class="line" data-startTime="2855">connection, it doesn't drain? </span></p>

<p class="speaker"><span class="line" data-starttime="2861"><span class="speakerName">Ilya Grigorik</span>: Yes and no. </span> <span class="line" data-startTime="2862">It depends on how you </span><span class="line" data-startTime="2862">use your web socket. </span> <span class="line" data-startTime="2864">If you're sending periodic </span><span class="line" data-startTime="2864">messages every five seconds, </span><span class="line" data-startTime="2867">you'll keep your radio </span><span class="line" data-startTime="2867">active all the time. </span> <span class="line" data-startTime="2870">I think what a lot </span><span class="line" data-startTime="2870">of people confuse </span><span class="line" data-startTime="2871">about is you can have &mdash; </span><span class="line" data-startTime="2873">so your radio can be </span><span class="line" data-startTime="2873">off, but the TCP </span><span class="line" data-startTime="2876">connection is still alive. </span> <span class="line" data-startTime="2879">I think a lot of people </span><span class="line" data-startTime="2879">confuse this. </span> <span class="line" data-startTime="2880">They think the moment my radio </span><span class="line" data-startTime="2880">turns off, I've lost my </span><span class="line" data-startTime="2884">website connection. </span> <span class="line" data-startTime="2885">That is not the case. </span> <span class="line" data-startTime="2886">Your actual TCP connection </span><span class="line" data-startTime="2886">is still </span><span class="line" data-startTime="2888">maintained by the carrier. </span> <span class="line" data-startTime="2890">And it's just the radio link </span><span class="line" data-startTime="2890">that goes missing. </span> <span class="line" data-startTime="2893">So I guess the best practice </span><span class="line" data-startTime="2893">for web socket traffic on </span><span class="line" data-startTime="2898">mobile is, send as few requests </span><span class="line" data-startTime="2901">or messages as possible. </span></p>

<p><span class="line" data-startTime="2902">Or if you do, just </span><span class="line" data-startTime="2902">as with regular </span><span class="line" data-startTime="2904">traffic, send it in bursts. </span></p>

<p class="speaker"><span class="line" data-starttime="2909"><span class="speakerName">Steve Thair</span>: There were quite </span><span class="line" data-startTime="2909">a few questions on this list </span><span class="line" data-startTime="2912">about radio stuff. </span><span class="line" data-startTime="2913">I think Ilya covered it </span><span class="line" data-startTime="2913">in his introduction. </span><span class="line" data-startTime="2917">[INAUDIBLE] </span></p>

<p class="speaker"><span class="line" data-starttime="2919"><span class="speakerName">Audience</span>: Hello, yeah, </span><span class="line" data-startTime="2919">so I'm Phil. </span></p>

<p class="speaker"><span class="line" data-starttime="2920"><span class="speakerName">Steve Thair</span>: Hold </span><span class="line" data-startTime="2920">on one second. </span><span class="line" data-startTime="2922">So there were a few questions </span><span class="line" data-startTime="2922">there about battery use and </span><span class="line" data-startTime="2924">this kind of stuff. </span><span class="line" data-startTime="2925">I think Ilya covered it in his </span><span class="line" data-startTime="2925">introduction, that you've got </span><span class="line" data-startTime="2928">to be aware of it. </span><span class="line" data-startTime="2928">Just one question from me, as </span><span class="line" data-startTime="2928">a rule of thumb, do we have </span><span class="line" data-startTime="2933">any idea of how quickly </span><span class="line" data-startTime="2933">the radios turn off? </span><span class="line" data-startTime="2935">Is it once every five seconds, </span><span class="line" data-startTime="2935">once every 10 seconds? </span><span class="line" data-startTime="2937">If I want to beacon analytic </span><span class="line" data-startTime="2937">stuff back, </span><span class="line" data-startTime="2939">what's a rule of thumb? </span></p>

<p class="speaker"><span class="line" data-starttime="2941"><span class="speakerName">Andy Davies</span>: It's carrier </span><span class="line" data-startTime="2941">dependent. </span></p>

<p class="speaker"><span class="line" data-starttime="2941"><span class="speakerName">Steve Thair</span>: It's carrier </span><span class="line" data-startTime="2941">dependent. </span><span class="line" data-startTime="2944">JACKSON GABBARD: [INAUDIBLE]. </span><span class="line" data-startTime="2950">We got yelled at by some carrier </span><span class="line" data-startTime="2950">who was saying that </span><span class="line" data-startTime="2953">we &mdash; basically, a time out </span><span class="line" data-startTime="2953">from one of our logged in </span><span class="line" data-startTime="2955">delivery services was </span><span class="line" data-startTime="2955">just underneath </span><span class="line" data-startTime="2958">the radio time limit. </span><span class="line" data-startTime="2960">We were always just keeping it </span><span class="line" data-startTime="2960">awake, over and over again. </span><span class="line" data-startTime="2966">You have a lowered [? wait. ?] </span><span class="line" data-startTime="2969">The radio [? wait ?] will </span><span class="line" data-startTime="2969">stay awake longer than </span><span class="line" data-startTime="2971">you think it would. </span></p>

<p class="speaker"><span class="line" data-starttime="2971"><span class="speakerName">Ilya Grigorik</span>: So its </span><span class="line" data-startTime="2971">network configured. </span><span class="line" data-startTime="2973">There's a great case study </span><span class="line" data-startTime="2973">paper published by AT&T &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2976"><span class="speakerName">Steve Thair</span>: Three </span><span class="line" data-startTime="2976">minutes left. </span></p>

<p class="speaker"><span class="line" data-starttime="2977"><span class="speakerName">Ilya Grigorik</span>: Three minutes. </span> <span class="line" data-startTime="2979">AT&T &mdash; </span><span class="line" data-startTime="2979">I don't remember </span><span class="line" data-startTime="2979">the name of it. </span> <span class="line" data-startTime="2980">If you just search for AT&T </span><span class="line" data-startTime="2980">radio performance, I think </span><span class="line" data-startTime="2983">you'll find it. </span> <span class="line" data-startTime="2984">They have the Pandora </span><span class="line" data-startTime="2984">case study. </span> <span class="line" data-startTime="2986">Pandora app &mdash; </span><span class="line" data-startTime="2987">you play the song. </span> <span class="line" data-startTime="2988">They did the right thing. </span> <span class="line" data-startTime="2989">They downloaded the whole </span><span class="line" data-startTime="2989">song up front. </span> <span class="line" data-startTime="2991">So they streamed the </span><span class="line" data-startTime="2991">whole thing. </span> <span class="line" data-startTime="2992">They turn off the radio. </span> <span class="line" data-startTime="2993">And then every 60 seconds, </span><span class="line" data-startTime="2993">they would send a beacon, </span><span class="line" data-startTime="2995">which is just a measurement </span><span class="line" data-startTime="2995">beacon. </span> <span class="line" data-startTime="2998">And they measured it, and they </span><span class="line" data-startTime="2998">figured out that those beacons </span><span class="line" data-startTime="3000">accounted for 0.2% percent of </span><span class="line" data-startTime="3000">the traffic and 40% of the </span><span class="line" data-startTime="3004">battery use. </span></p>

<p><span class="line" data-startTime="3006">They eliminated that. </span> <span class="line" data-startTime="3007">They doubled their battery </span><span class="line" data-startTime="3007">performance. </span></p>

<p class="speaker"><span class="line" data-starttime="3011"><span class="speakerName">Audience</span>: Just a few points &mdash; </span><span class="line" data-startTime="3012">I'm Phil Leggetter </span><span class="line" data-startTime="3012">from Pusher. </span> <span class="line" data-startTime="3013">So obviously we use </span><span class="line" data-startTime="3013">web sockets. </span> <span class="line" data-startTime="3014">So I handle most </span><span class="line" data-startTime="3014">of our support. </span> <span class="line" data-startTime="3016">So I just want to back up that </span><span class="line" data-startTime="3016">SSL connections when you're </span><span class="line" data-startTime="3019">using web sockets, definite. </span> <span class="line" data-startTime="3022">In terms of the web sockets </span><span class="line" data-startTime="3022">dropping, I think that's </span><span class="line" data-startTime="3024">because most of the browsers </span><span class="line" data-startTime="3024">don't implement ping pong from </span><span class="line" data-startTime="3027">the specification. </span> <span class="line" data-startTime="3029">So we've added that as </span><span class="line" data-startTime="3029">our protocol layer. </span> <span class="line" data-startTime="3032">So we are sending messages </span><span class="line" data-startTime="3032">when maybe we </span><span class="line" data-startTime="3034">shouldn't have to. </span> <span class="line" data-startTime="3036">But obviously, there </span><span class="line" data-startTime="3036">would be a message </span><span class="line" data-startTime="3038">natively from the browser. </span></p>

<p><span class="line" data-startTime="3039">So again, if you're using web </span><span class="line" data-startTime="3039">sockets in a browser, have a </span><span class="line" data-startTime="3043">ping pong time out. </span> <span class="line" data-startTime="3046">And we haven't had a lot </span><span class="line" data-startTime="3046">of problems with that. </span> <span class="line" data-startTime="3047">We've obviously got HTTP </span><span class="line" data-startTime="3047">fallback as well, </span><span class="line" data-startTime="3049">because we need it. </span></p>

<p class="speaker"><span class="line" data-starttime="3054"><span class="speakerName">Audience</span>: With regards to a </span><span class="line" data-startTime="3054">radio power state, would it be </span><span class="line" data-startTime="3057">worth for the developer to </span><span class="line" data-startTime="3057">have a means to tell the </span><span class="line" data-startTime="3061">browser, here is the request, </span><span class="line" data-startTime="3061">and send it only whenever you </span><span class="line" data-startTime="3065">have the radio in full power. </span><span class="line" data-startTime="3067">If it's an idle state, don't </span><span class="line" data-startTime="3067">wake it up just to send this, </span><span class="line" data-startTime="3071">because it's not urgent. </span><span class="line" data-startTime="3072">This is something I would </span><span class="line" data-startTime="3072">like to see, personally. </span></p>

<p class="speaker"><span class="line" data-starttime="3074"><span class="speakerName">Steve Thair</span>: Military style </span><span class="line" data-startTime="3074">microburst, basically. </span></p>

<p class="speaker"><span class="line" data-starttime="3078"><span class="speakerName">Audience</span>: And avoiding excessive </span><span class="line" data-startTime="3078">signaling traffic, </span><span class="line" data-startTime="3080">which is what happens when </span><span class="line" data-startTime="3080">you switch radio states. </span><span class="line" data-startTime="3084">It's in the best interest </span><span class="line" data-startTime="3084">of everyone not to </span><span class="line" data-startTime="3086">clutter mobile networks. </span></p>

<p class="speaker"><span class="line" data-starttime="3090"><span class="speakerName">Ilya Grigorik</span>: So the </span><span class="line" data-startTime="3090">answer is yes. </span> <span class="line" data-startTime="3092">And this is actually something </span><span class="line" data-startTime="3092">that we discussed at the W3C </span><span class="line" data-startTime="3094">Performance Group meeting that </span><span class="line" data-startTime="3094">we had back in November. </span> <span class="line" data-startTime="3099">There's this new proposal that </span><span class="line" data-startTime="3099">we're going to start working </span><span class="line" data-startTime="3101">on in, I think, around </span><span class="line" data-startTime="3101">May of this year &mdash; </span><span class="line" data-startTime="3105">it's our timeline &mdash; </span><span class="line" data-startTime="3106">called the beacon API. </span> <span class="line" data-startTime="3107">And the idea being that, </span><span class="line" data-startTime="3107">it's exactly that. </span></p>

<p><span class="line" data-startTime="3109">I want to send a request, like </span><span class="line" data-startTime="3109">an analytics request, that I </span><span class="line" data-startTime="3114">don't need to dispatch </span><span class="line" data-startTime="3114">right now. </span> <span class="line" data-startTime="3116">Dispatch it any time you want. </span> <span class="line" data-startTime="3118">In fact, even if you lose </span><span class="line" data-startTime="3118">it, maybe it's not </span><span class="line" data-startTime="3120">the end of the world. </span> <span class="line" data-startTime="3122">But just don't wake </span><span class="line" data-startTime="3122">up my battery. </span> <span class="line" data-startTime="3124">So it's almost like the async </span><span class="line" data-startTime="3124">keyword on an XHR to say, </span><span class="line" data-startTime="3129">sometime, make this happen. </span></p>

<p class="speaker"><span class="line" data-starttime="3133"><span class="speakerName">Steve Thair</span>: That's basically </span><span class="line" data-startTime="3133">the time up </span><span class="line" data-startTime="3138">for the network panel. </span><span class="line" data-startTime="3139">So I'd like to thank Jackson, </span><span class="line" data-startTime="3139">John, Andy, and Ilya. </span></p></div>