<p class="speaker"><span class="line" data-starttime="0"><span class="speakerName">Amy Unruh</span>: Hi, my name </span><span class="line" data-startTime="0">is Amy Unruh. </span></p>

<p class="speaker"><span class="line" data-starttime="2"><span class="speakerName">Kim Cameron</span>: And my name </span><span class="line" data-startTime="2">is Kim Cameron. </span> <span class="line" data-startTime="5">And I am addicted to robots. </span> <span class="line" data-startTime="9">So when I first heard about the </span><span class="line" data-startTime="9">idea of the internet of </span><span class="line" data-startTime="12">things, that we can have all </span><span class="line" data-startTime="12">sorts of interconnected </span><span class="line" data-startTime="15">machines that talk and do things </span><span class="line" data-startTime="15">for humans, I thought, </span><span class="line" data-startTime="19">this is totally awesome. </span> <span class="line" data-startTime="23">Finally I can have a robot </span><span class="line" data-startTime="23">butler that brings me things. </span> <span class="line" data-startTime="26">Maybe it wipes off my forehead, </span><span class="line" data-startTime="26">I don't know why. </span> <span class="line" data-startTime="29">But I'm just going to say the </span><span class="line" data-startTime="29">elephant in the room here. </span> <span class="line" data-startTime="31">I know someone else </span><span class="line" data-startTime="31">is thinking this. </span> <span class="line" data-startTime="33">Think about a bunch of </span><span class="line" data-startTime="33">interconnected machines. </span> <span class="line" data-startTime="36">They're doing stuff for us. </span></p>

<p><span class="line" data-startTime="37">They're intelligent. </span> <span class="line" data-startTime="38">There is one additional thing </span><span class="line" data-startTime="38">that comes to mind. </span> <span class="line" data-startTime="42">Nobody wants this. </span> <span class="line" data-startTime="43">No one wants robot overlords. </span> <span class="line" data-startTime="45">Why are we even talking </span><span class="line" data-startTime="45">about robots? </span><span class="line" data-startTime="47">You're here to hear about data </span><span class="line" data-startTime="47">sensing lab project that we </span><span class="line" data-startTime="50">did at Moscone. </span> <span class="line" data-startTime="52">We wanted to build an internet </span><span class="line" data-startTime="52">of things app that helped us </span><span class="line" data-startTime="55">see more about what's going </span><span class="line" data-startTime="55">on than what you </span><span class="line" data-startTime="58">normally could see. </span></p>

<p><span class="line" data-startTime="59">We didn't want to create </span><span class="line" data-startTime="59">a robot army. </span> <span class="line" data-startTime="62">We wanted to create an army of </span><span class="line" data-startTime="62">sensor motes that we could put </span><span class="line" data-startTime="66">up around the conference and get </span><span class="line" data-startTime="66">all sorts of data in, show </span><span class="line" data-startTime="70">it to you in really cool ways. </span> <span class="line" data-startTime="71">And, again, to show us things </span><span class="line" data-startTime="71">that we couldn't normally see. </span> <span class="line" data-startTime="80">Slides are malfunctioning </span><span class="line" data-startTime="80">like a robot. </span> <span class="line" data-startTime="82">So we wanted our app to do </span><span class="line" data-startTime="82">cool stuff like this. </span> <span class="line" data-startTime="85">This is a chart of </span><span class="line" data-startTime="85">noise yesterday. </span> <span class="line" data-startTime="88">As you can see during the party, </span><span class="line" data-startTime="88">Billy Idol, huge noise. </span> <span class="line" data-startTime="92">And our app is going to do a lot </span><span class="line" data-startTime="92">of other stuff than this. </span> <span class="line" data-startTime="95">But before we get into that, </span><span class="line" data-startTime="95">let's talk about how the </span><span class="line" data-startTime="97">project got started. </span> <span class="line" data-startTime="100">So back in February our </span><span class="line" data-startTime="100">colleague, Michael Manoochehri </span><span class="line" data-startTime="102">was at Strata. </span> <span class="line" data-startTime="104">And he was intrigued by a </span><span class="line" data-startTime="104">project by the O'Reilly data </span><span class="line" data-startTime="107">sensing lab team. </span></p>

<p><span class="line" data-startTime="109">The setup was fairly similar </span><span class="line" data-startTime="109">to what we're doing here. </span> <span class="line" data-startTime="111">There were about 50 motes. </span> <span class="line" data-startTime="113">They were set up across </span><span class="line" data-startTime="113">the conference. </span> <span class="line" data-startTime="115">They gathered a bunch of </span><span class="line" data-startTime="115">environmental data. </span> <span class="line" data-startTime="117">And based on that we were shown </span><span class="line" data-startTime="117">visualizations about </span><span class="line" data-startTime="120">what was going on. </span> <span class="line" data-startTime="121">And Michael thought, </span><span class="line" data-startTime="121">this is great. </span> <span class="line" data-startTime="123">Why not bigger? </span><span class="line" data-startTime="125">So we took 500 Arduino boards </span><span class="line" data-startTime="125">for our project. </span> <span class="line" data-startTime="130">And to each of these boards we </span><span class="line" data-startTime="130">added a custom sensor shield </span><span class="line" data-startTime="134">which was added by Kipp Bradford </span><span class="line" data-startTime="134">or kippkitts, and </span><span class="line" data-startTime="139">Alasdair Allen of Babilim </span><span class="line" data-startTime="139">Light Industries. </span> <span class="line" data-startTime="143">Yes. </span> <span class="line" data-startTime="144">And each of these shields has </span><span class="line" data-startTime="144">a bunch of sensors on it. </span> <span class="line" data-startTime="147">Noise, light, humidity, </span><span class="line" data-startTime="147">some other built ins. </span></p>

<p><span class="line" data-startTime="150">As well as three optional </span><span class="line" data-startTime="150">sensors for air quality. </span> <span class="line" data-startTime="155">Also RF, which we have </span><span class="line" data-startTime="155">tuned to GSM. </span> <span class="line" data-startTime="158">As well as motions. </span> <span class="line" data-startTime="159">So you might have seen </span><span class="line" data-startTime="159">these mats around. </span> <span class="line" data-startTime="161">We even had one in the car. </span> <span class="line" data-startTime="163">And that was registering when </span><span class="line" data-startTime="163">people were stepping on them </span><span class="line" data-startTime="166">and stepping off. </span> <span class="line" data-startTime="172">And the shield and the Arduino </span><span class="line" data-startTime="172">boards put together make up a </span><span class="line" data-startTime="175">mote, which is essentially a </span><span class="line" data-startTime="175">node in a sensory network. </span> <span class="line" data-startTime="178">I'm sure you've seen </span><span class="line" data-startTime="178">them around. </span> <span class="line" data-startTime="179">They have little blinky lights, </span><span class="line" data-startTime="179">cute signs, all that. </span> <span class="line" data-startTime="183">We put them up all over Moscone </span><span class="line" data-startTime="183">on all of the floors, </span><span class="line" data-startTime="186">including in some interesting </span><span class="line" data-startTime="186">spaces such as I </span><span class="line" data-startTime="188">mentioned in the car. </span> <span class="line" data-startTime="190">There were a few in that blimp </span><span class="line" data-startTime="190">that was circling around the </span><span class="line" data-startTime="192">second floor. </span></p>

<p><span class="line" data-startTime="193">We wanted to get readings </span><span class="line" data-startTime="193">all over the place. </span> <span class="line" data-startTime="195">In fact, I believe there was </span><span class="line" data-startTime="195">a mote in that really noisy </span><span class="line" data-startTime="198">architect game last night. </span> <span class="line" data-startTime="202">The next problem was how </span><span class="line" data-startTime="202">would these motes </span><span class="line" data-startTime="204">talk to each other? </span><span class="line" data-startTime="205">So some of you might </span><span class="line" data-startTime="205">be thinking, OK </span><span class="line" data-startTime="207">set up a Wi-Fi network. </span> <span class="line" data-startTime="209">And the issue with that is we </span><span class="line" data-startTime="209">would have to set up wireless </span><span class="line" data-startTime="212">routers everywhere for the range </span><span class="line" data-startTime="212">to work for the motes. </span> <span class="line" data-startTime="215">Instead we put up </span><span class="line" data-startTime="215">a mesh network. </span> <span class="line" data-startTime="218">So the idea behind the mesh </span><span class="line" data-startTime="218">network is, let's say that </span><span class="line" data-startTime="220">there's a node that's close </span><span class="line" data-startTime="220">to its gateway. </span> <span class="line" data-startTime="222">It needs to get its </span><span class="line" data-startTime="222">information there. </span> <span class="line" data-startTime="224">That's fine. </span> <span class="line" data-startTime="225">It sends the information. </span></p>

<p><span class="line" data-startTime="226">The gateway is right next by. </span> <span class="line" data-startTime="227">But what about motes </span><span class="line" data-startTime="227">that are farther </span><span class="line" data-startTime="229">away, at farther range? </span><span class="line" data-startTime="231">They can just talk to the nearby </span><span class="line" data-startTime="231">mote which then hops </span><span class="line" data-startTime="234">the message along through </span><span class="line" data-startTime="234">the motes until </span><span class="line" data-startTime="235">it gets to the gateway. </span> <span class="line" data-startTime="237">This allows for a much </span><span class="line" data-startTime="237">greater range. </span> <span class="line" data-startTime="241">So we have an XP radio on </span><span class="line" data-startTime="241">each of the shields. </span> <span class="line" data-startTime="243">And it's communicating over a </span><span class="line" data-startTime="243">ZigBee protocol which some of </span><span class="line" data-startTime="245">you might be familiar with. </span> <span class="line" data-startTime="248">This network was set up by our </span><span class="line" data-startTime="248">partners Digi International. </span></p>

<p><span class="line" data-startTime="252">They also worked on the </span><span class="line" data-startTime="252">Strata project. </span> <span class="line" data-startTime="254">And they have a product called </span><span class="line" data-startTime="254">Device Cloud by Etherios. </span> <span class="line" data-startTime="258">So what's happening is each </span><span class="line" data-startTime="258">sensor mote is sending its </span><span class="line" data-startTime="263">readings every 20 seconds to the </span><span class="line" data-startTime="263">gateways which are going </span><span class="line" data-startTime="267">to device cloud by Etherios. </span> <span class="line" data-startTime="268">They even do just a little bit </span><span class="line" data-startTime="268">like add a time stamp then </span><span class="line" data-startTime="271">they send it to us. </span> <span class="line" data-startTime="274">So on our end we needed to </span><span class="line" data-startTime="274">create a software solution to </span><span class="line" data-startTime="277">manage this. </span> <span class="line" data-startTime="279">This is a challenging problem. </span> <span class="line" data-startTime="280">How do you even get </span><span class="line" data-startTime="280">started with this? </span><span class="line" data-startTime="282">We knew it had to be scalable. </span></p>

<p><span class="line" data-startTime="284">We didn't want to focus much on </span><span class="line" data-startTime="284">the infrastructure which is </span><span class="line" data-startTime="287">why we wanted to try out </span><span class="line" data-startTime="287">the cloud platform. </span> <span class="line" data-startTime="289">And luckily, the woman who coded </span><span class="line" data-startTime="289">most of this project is </span><span class="line" data-startTime="292">standing next to </span><span class="line" data-startTime="292">me, Amy Unruh. </span> <span class="line" data-startTime="294">So Amy, how do we get started </span><span class="line" data-startTime="294">with this challenge? </span></p>

<p class="speaker"><span class="line" data-starttime="297"><span class="speakerName">Amy Unruh</span>: Well Kim. </span></p>

<p class="speaker"><span class="line" data-starttime="298"><span class="speakerName">Kim Cameron</span>: Oh I apologize. </span><span class="line" data-startTime="300">I missed some slides. </span><span class="line" data-startTime="300">So &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="302"><span class="speakerName">Amy Unruh</span>: The suspense. </span></p>

<p class="speaker"><span class="line" data-starttime="304"><span class="speakerName">Kim Cameron</span>: The suspense. </span> <span class="line" data-startTime="305">I apologize. </span> <span class="line" data-startTime="305">So I just wanted to show you </span><span class="line" data-startTime="305">a few visualizations </span><span class="line" data-startTime="308">before we moved on. </span> <span class="line" data-startTime="311">And, ooh I don't know what's </span><span class="line" data-startTime="311">happening there. </span> <span class="line" data-startTime="318">Now I've lost &mdash; </span><span class="line" data-startTime="325">all right. </span> <span class="line" data-startTime="326">I'm just going to </span><span class="line" data-startTime="326">look up here. </span> <span class="line" data-startTime="329">Or maybe I can &mdash; </span><span class="line" data-startTime="332">here we go. </span> <span class="line" data-startTime="334">So this is a live visual of </span><span class="line" data-startTime="334">temperature readings on the </span><span class="line" data-startTime="341">second floor. </span> <span class="line" data-startTime="343">So as you can see, these </span><span class="line" data-startTime="343">two rooms are </span><span class="line" data-startTime="344">apparently very popular. </span> <span class="line" data-startTime="346">As well as, this is like </span><span class="line" data-startTime="346">the cloud sandbox area. </span></p>

<p><span class="line" data-startTime="349">All the other sandbox areas. </span> <span class="line" data-startTime="350">And I'm not sure what's over </span><span class="line" data-startTime="350">here, but it's also very high </span><span class="line" data-startTime="353">temperature. </span> <span class="line" data-startTime="359">I apologize for my ineptness </span><span class="line" data-startTime="359">at getting out of this. </span> <span class="line" data-startTime="369">As well, this is an interesting </span><span class="line" data-startTime="369">correlation that </span><span class="line" data-startTime="371">was done by our friends </span><span class="line" data-startTime="371">at Tableau. </span> <span class="line" data-startTime="373">They have a really </span><span class="line" data-startTime="373">cool connector </span><span class="line" data-startTime="375">that hooks up to BigQuery. </span> <span class="line" data-startTime="376">And it shows really neat </span><span class="line" data-startTime="376">visualizations. </span> <span class="line" data-startTime="378">So this is a chart of air </span><span class="line" data-startTime="378">quality versus steps on that </span><span class="line" data-startTime="382">motion pad. </span> <span class="line" data-startTime="383">So as you can see with the green </span><span class="line" data-startTime="383">above and below, the </span><span class="line" data-startTime="386">number of steps to indicate </span><span class="line" data-startTime="386">drop in air quality, which </span><span class="line" data-startTime="390">means there's a bunch of us </span><span class="line" data-startTime="390">smelly nerds walking around. </span></p>

<p><span class="line" data-startTime="392">And that's ruining </span><span class="line" data-startTime="392">the air quality. </span> <span class="line" data-startTime="397">So now we'll get to Amy Unruh. </span> <span class="line" data-startTime="398">I apologize for the delay. </span> <span class="line" data-startTime="400">To talk about the software </span><span class="line" data-startTime="400">solution. </span></p>

<p class="speaker"><span class="line" data-starttime="402"><span class="speakerName">Amy Unruh</span>: So the first thing </span><span class="line" data-startTime="402">that we needed to think about </span><span class="line" data-startTime="405">was how to get this barrage </span><span class="line" data-startTime="405">of data into the system. </span> <span class="line" data-startTime="410">So the sensors are feeding us </span><span class="line" data-startTime="410">data at a really high rate. </span> <span class="line" data-startTime="414">We need to suck into </span><span class="line" data-startTime="414">our system. </span> <span class="line" data-startTime="417">We don't want our app </span><span class="line" data-startTime="417">to fall over. </span> <span class="line" data-startTime="420">We don't want it to lose data. </span> <span class="line" data-startTime="421">And we need to get it to some </span><span class="line" data-startTime="421">place where it's persistent. </span> <span class="line" data-startTime="423">Where it's safe. </span> <span class="line" data-startTime="428">This whole framework that we're </span><span class="line" data-startTime="428">building to ingest the </span><span class="line" data-startTime="433">data we've been calling </span><span class="line" data-startTime="433">the pipeline. </span></p>

<p><span class="line" data-startTime="435">And as Kim said, we use the </span><span class="line" data-startTime="435">cloud platform for this. </span> <span class="line" data-startTime="439">And, in fact, we use multiple </span><span class="line" data-startTime="439">pieces of the cloud platform. </span> <span class="line" data-startTime="443">Did any of you get a chance to </span><span class="line" data-startTime="443">see the great all of the ships </span><span class="line" data-startTime="448">of the world talk </span><span class="line" data-startTime="448">earlier today? </span><span class="line" data-startTime="450">Yeah, that was fantastic. </span> <span class="line" data-startTime="452">And they also had what I would </span><span class="line" data-startTime="452">consider a platform. </span> <span class="line" data-startTime="456">Ours this is a little </span><span class="line" data-startTime="456">different. </span> <span class="line" data-startTime="457">They're serving slightly </span><span class="line" data-startTime="457">different needs. </span></p>

<p><span class="line" data-startTime="459">But this is, they're somewhat </span><span class="line" data-startTime="459">similar patterns. </span> <span class="line" data-startTime="464">Foundations for sucking a lot </span><span class="line" data-startTime="464">of data into a system really </span><span class="line" data-startTime="468">quickly so you can start to do </span><span class="line" data-startTime="468">interesting things with it. </span> <span class="line" data-startTime="471">So let's look at how </span><span class="line" data-startTime="471">we did this. </span> <span class="line" data-startTime="474">The first step, just </span><span class="line" data-startTime="474">ingesting the data, </span><span class="line" data-startTime="479">bringing it safely in. </span> <span class="line" data-startTime="480">We're using App Engine </span><span class="line" data-startTime="480">for this. </span> <span class="line" data-startTime="482">App Engine is part of </span><span class="line" data-startTime="482">the cloud platform. </span> <span class="line" data-startTime="485">It's designed for simplicity and </span><span class="line" data-startTime="485">for letting you deploy a </span><span class="line" data-startTime="489">web apps at Google scale. </span> <span class="line" data-startTime="491">And we are using, in particular, </span><span class="line" data-startTime="491">three features of </span><span class="line" data-startTime="495">App Engine to do this. </span></p>

<p><span class="line" data-startTime="497">First of all, it scalability. </span> <span class="line" data-startTime="500">App Engine auto scales </span><span class="line" data-startTime="500">for you. </span> <span class="line" data-startTime="501">So as more and more sensor motes </span><span class="line" data-startTime="501">come online our app is </span><span class="line" data-startTime="507">going to scale up </span><span class="line" data-startTime="507">to handle that. </span> <span class="line" data-startTime="508">We don't need to pay attention </span><span class="line" data-startTime="508">to that or do anything. </span> <span class="line" data-startTime="511">And we don't need to do </span><span class="line" data-startTime="511">any provisioning. </span> <span class="line" data-startTime="514">And, in fact, we watched </span><span class="line" data-startTime="514">this happen over </span><span class="line" data-startTime="515">the past day or two. </span> <span class="line" data-startTime="517">It worked really well. </span> <span class="line" data-startTime="519">The second thing that we're </span><span class="line" data-startTime="519">doing is, as we ingest the </span><span class="line" data-startTime="521">data we're processing in the </span><span class="line" data-startTime="521">background using task queues, </span><span class="line" data-startTime="527">App Engine task queues. </span> <span class="line" data-startTime="529">This might be one of my favorite </span><span class="line" data-startTime="529">App Engine features. </span></p>

<p><span class="line" data-startTime="532">Essentially task queues </span><span class="line" data-startTime="532">let you run processes </span><span class="line" data-startTime="535">asynchronously to the request </span><span class="line" data-startTime="535">response cycle of the app. </span> <span class="line" data-startTime="540">And so as data comes flooding in </span><span class="line" data-startTime="540">we're bundling it off to an </span><span class="line" data-startTime="543">army of task queue tasks to </span><span class="line" data-startTime="543">actually do the processing. </span> <span class="line" data-startTime="547">And that lets our app stay </span><span class="line" data-startTime="547">really responsive and really </span><span class="line" data-startTime="550">high throughput. </span> <span class="line" data-startTime="552">And then, finally, we're using </span><span class="line" data-startTime="552">the App Enginge Cloud </span><span class="line" data-startTime="556">Datastore to store this data as </span><span class="line" data-startTime="556">it comes into the system. </span> <span class="line" data-startTime="561">The cloud data store is managed </span><span class="line" data-startTime="561">really robust, highly </span><span class="line" data-startTime="567">scalable, distributed </span><span class="line" data-startTime="567">new SQL Datastore. </span></p>

<p><span class="line" data-startTime="571">It's perfect for this. </span> <span class="line" data-startTime="572">We can throw a large amount of </span><span class="line" data-startTime="572">data at it really quickly. </span> <span class="line" data-startTime="576">It doesn't even blink. </span> <span class="line" data-startTime="577">And it can get really large and </span><span class="line" data-startTime="577">we can still get data out </span><span class="line" data-startTime="582">very quickly. </span> <span class="line" data-startTime="584">So we're using the data </span><span class="line" data-startTime="584">store for our </span><span class="line" data-startTime="586">initial data ingestion. </span> <span class="line" data-startTime="589">So what happens next, Kim? </span></p>

<p class="speaker"><span class="line" data-starttime="591"><span class="speakerName">Kim Cameron</span>: So I'm glad </span><span class="line" data-startTime="591">you asked, Amy. </span><span class="line" data-startTime="593">We next need to get our </span><span class="line" data-startTime="593">data into BigQuery. </span></p>

<p class="speaker"><span class="line" data-starttime="596"><span class="speakerName">Amy Unruh</span>: So actually we just </span><span class="line" data-startTime="596">got our data into the </span><span class="line" data-startTime="599">Datastore, so why do </span><span class="line" data-startTime="599">we need to do that? </span></p>

<p class="speaker"><span class="line" data-starttime="601"><span class="speakerName">Kim Cameron</span>: I am </span><span class="line" data-startTime="601">glad you asked. </span> <span class="line" data-startTime="602">So BigQuery lets you query </span><span class="line" data-startTime="602">huge, huge data sets in a </span><span class="line" data-startTime="608">matter of seconds. </span> <span class="line" data-startTime="609">And it also supports something </span><span class="line" data-startTime="609">that we're going to be using </span><span class="line" data-startTime="612">our visualizations. </span> <span class="line" data-startTime="613">And that's aggregate queries. </span> <span class="line" data-startTime="615">BigQuery is also good at </span><span class="line" data-startTime="615">things like regular </span><span class="line" data-startTime="616">expressions and other </span><span class="line" data-startTime="616">complex queries. </span> <span class="line" data-startTime="619">So we know we want to get the </span><span class="line" data-startTime="619">data into BigQuery so we can </span><span class="line" data-startTime="621">use it for these </span><span class="line" data-startTime="621">visualizations. </span> <span class="line" data-startTime="623">So to do this we have two </span><span class="line" data-startTime="623">things to consider. </span> <span class="line" data-startTime="626">First, we need to do some stuff </span><span class="line" data-startTime="626">with our data before we </span><span class="line" data-startTime="629">move it in. </span> <span class="line" data-startTime="630">Specifically we transform the </span><span class="line" data-startTime="630">data to put it into a schema </span><span class="line" data-startTime="634">that BigQuery expects. </span></p>

<p><span class="line" data-startTime="636">Second, we're going to </span><span class="line" data-startTime="636">join some data in </span><span class="line" data-startTime="638">with our sensor data. </span> <span class="line" data-startTime="639">So we have mote data </span><span class="line" data-startTime="639">that we're also </span><span class="line" data-startTime="641">storing in data store. </span> <span class="line" data-startTime="642">It has information about the </span><span class="line" data-startTime="642">motes like its location, its </span><span class="line" data-startTime="645">name, other information. </span> <span class="line" data-startTime="647">So we join all that together </span><span class="line" data-startTime="647">in App Engine first. </span> <span class="line" data-startTime="649">And now we have the data that we </span><span class="line" data-startTime="649">want to move into BigQuery. </span> <span class="line" data-startTime="654">So where are we going </span><span class="line" data-startTime="654">to put it? </span><span class="line" data-startTime="655">We're going to move it </span><span class="line" data-startTime="655">into cloud storage. </span> <span class="line" data-startTime="659">This is the recommended way that </span><span class="line" data-startTime="659">we suggest you move your </span><span class="line" data-startTime="662">data into BigQuery. </span> <span class="line" data-startTime="663">You could have also sent </span><span class="line" data-startTime="663">a post request and </span><span class="line" data-startTime="665">attached the data. </span> <span class="line" data-startTime="666">The advantage of staging it on </span><span class="line" data-startTime="666">Google Cloud Storage first is </span><span class="line" data-startTime="669">that for one it's quick. </span></p>

<p><span class="line" data-startTime="671">For two, you have a copy </span><span class="line" data-startTime="671">of your data there now. </span> <span class="line" data-startTime="674">Let's say you wanted to share </span><span class="line" data-startTime="674">the data set, you have it on </span><span class="line" data-startTime="676">cloud storage ready to go. </span> <span class="line" data-startTime="677">Ready to link people to. </span> <span class="line" data-startTime="680">So we need to move our data to </span><span class="line" data-startTime="680">cloud storage, but there's </span><span class="line" data-startTime="683">something else that we need to </span><span class="line" data-startTime="683">consider, and that's how </span><span class="line" data-startTime="686">frequently do we move the </span><span class="line" data-startTime="686">data to BigQuery? </span><span class="line" data-startTime="689">Because there's quotas on the </span><span class="line" data-startTime="689">amount of loads you can do per </span><span class="line" data-startTime="691">day, we don't want to just shove </span><span class="line" data-startTime="691">data at it every single </span><span class="line" data-startTime="694">time we get a reading. </span> <span class="line" data-startTime="695">So we want to be careful and </span><span class="line" data-startTime="695">batch up the data and move it </span><span class="line" data-startTime="698">when it's appropriate. </span> <span class="line" data-startTime="700">So how we're accomplishing this </span><span class="line" data-startTime="700">is we're using another </span><span class="line" data-startTime="704">kind of App Engine task queue. </span> <span class="line" data-startTime="706">Tasks on the task queue. </span> <span class="line" data-startTime="708">Which run not as frequently. </span> <span class="line" data-startTime="710">They check the data store. </span> <span class="line" data-startTime="711">They see, is there enough </span><span class="line" data-startTime="711">unprocessed data here to </span><span class="line" data-startTime="714">warrant doing a load, and if so </span><span class="line" data-startTime="714">it's going to move the data </span><span class="line" data-startTime="717">into cloud storage. </span> <span class="line" data-startTime="719">All right, so now the data is in </span><span class="line" data-startTime="719">cloud storage ready to go. </span></p>

<p><span class="line" data-startTime="722">Someone has to push the button </span><span class="line" data-startTime="722">to actually move the data from </span><span class="line" data-startTime="725">cloud storage into BigQuery. </span> <span class="line" data-startTime="727">Amy, who is that going to be? </span><span class="line" data-startTime="728">It's not me. </span></p>

<p class="speaker"><span class="line" data-starttime="730"><span class="speakerName">Amy Unruh</span>: That's going to be </span><span class="line" data-startTime="730">a Compute Engine instance. </span><span class="line" data-startTime="732">And as you guys probably know, </span><span class="line" data-startTime="732">Compute Engine lets you run </span><span class="line" data-startTime="738">really flexible, fast, virtual </span><span class="line" data-startTime="738">machines in the cloud. </span><span class="line" data-startTime="741">So we're going to use Compute </span><span class="line" data-startTime="741">Engine to pull this data in. </span><span class="line" data-startTime="745">And it's going to instruct </span><span class="line" data-startTime="745">BigQuery to do these low jobs. </span><span class="line" data-startTime="751">Tell BigQuery to get the </span><span class="line" data-startTime="751">data from cloud storage </span><span class="line" data-startTime="753">and to load it in. </span></p>

<p class="speaker"><span class="line" data-starttime="754"><span class="speakerName">Kim Cameron</span>: So now </span><span class="line" data-startTime="754">I'm confused, Amy. </span><span class="line" data-startTime="756">Because since our data is in App </span><span class="line" data-startTime="756">Engine, why don't we just </span><span class="line" data-startTime="758">have App Engine move the </span><span class="line" data-startTime="758">data into BigQuery? </span></p>

<p class="speaker"><span class="line" data-starttime="761"><span class="speakerName">Amy Unruh</span>: So that's </span><span class="line" data-startTime="761">a good question. </span><span class="line" data-startTime="762">In fact, you could do </span><span class="line" data-startTime="762">this very easily in </span><span class="line" data-startTime="765">App Engine, as well. </span><span class="line" data-startTime="766">There's an API that </span><span class="line" data-startTime="766">accomplishes this. </span><span class="line" data-startTime="769">It's really easy to use. </span><span class="line" data-startTime="771">And the reason that we're </span><span class="line" data-startTime="771">using Compute Engine is </span><span class="line" data-startTime="773">because we're already using it </span><span class="line" data-startTime="773">for other parts of our system. </span><span class="line" data-startTime="776">We already have instances </span><span class="line" data-startTime="776">launched. </span><span class="line" data-startTime="779">And this is a really long </span><span class="line" data-startTime="779">running, kind of boring, batch </span><span class="line" data-startTime="784">script that's running. </span><span class="line" data-startTime="785">So it's really appropriate </span><span class="line" data-startTime="785">just to run it on Compute </span><span class="line" data-startTime="787">Engine and forget about it. </span></p>

<p class="speaker"><span class="line" data-starttime="788"><span class="speakerName">Kim Cameron</span>: OK, so </span><span class="line" data-startTime="788">that's great. </span><span class="line" data-startTime="789">So how does compute know when </span><span class="line" data-startTime="789">it should move the data from </span><span class="line" data-startTime="792">cloud storage to BigQuery? </span></p>

<p class="speaker"><span class="line" data-starttime="794"><span class="speakerName">Amy Unruh</span>: So this is actually </span><span class="line" data-startTime="794">really interesting design </span><span class="line" data-startTime="798">pattern that we're using here. </span> <span class="line" data-startTime="799">And if you saw the all the ships </span><span class="line" data-startTime="799">of the world talk you </span><span class="line" data-startTime="802">might have caught this being </span><span class="line" data-startTime="802">used with them as well. </span> <span class="line" data-startTime="805">We're using pool queues. </span> <span class="line" data-startTime="806">App engine pull queues. </span> <span class="line" data-startTime="808">So pull queues have </span><span class="line" data-startTime="808">a REST API. </span> <span class="line" data-startTime="811">And they essentially let you </span><span class="line" data-startTime="811">place messages, one process </span><span class="line" data-startTime="815">can place a bunch of messages </span><span class="line" data-startTime="815">on this pool queue. </span> <span class="line" data-startTime="818">And other processes can pull </span><span class="line" data-startTime="818">off the messages and do </span><span class="line" data-startTime="821">something with that </span><span class="line" data-startTime="821">information. </span> <span class="line" data-startTime="823">So as App Engine batches all </span><span class="line" data-startTime="823">of its data into cloud </span><span class="line" data-startTime="827">storage, it's creating messages </span><span class="line" data-startTime="827">on this pool cue that </span><span class="line" data-startTime="833">give information about the </span><span class="line" data-startTime="833">files that it's created. </span> <span class="line" data-startTime="835">And then Compute Engine, this </span><span class="line" data-startTime="835">long running script, is going </span><span class="line" data-startTime="839">pool many hundreds of those </span><span class="line" data-startTime="839">messages off in batch. </span> <span class="line" data-startTime="842">So we're magnifying our </span><span class="line" data-startTime="842">batch processing here. </span></p>

<p><span class="line" data-startTime="846">And really quickly construct a </span><span class="line" data-startTime="846">load job that goes off and </span><span class="line" data-startTime="851">tells BigQuery to load </span><span class="line" data-startTime="851">all these files. </span> <span class="line" data-startTime="853">So it's really efficient. </span> <span class="line" data-startTime="856">OK, so what we've described </span><span class="line" data-startTime="856">here is this pipeline, the </span><span class="line" data-startTime="861">foundation of our system. </span> <span class="line" data-startTime="863">It's how where ingesting lots of </span><span class="line" data-startTime="863">data at a high rate and how </span><span class="line" data-startTime="867">we're storing putting it where </span><span class="line" data-startTime="867">we want it to be in two </span><span class="line" data-startTime="870">different persistent stores. </span> <span class="line" data-startTime="872">And this was actually pretty </span><span class="line" data-startTime="872">straightforward to build. </span> <span class="line" data-startTime="877">It certainly wasn't trivial, </span><span class="line" data-startTime="877">but it was pretty </span><span class="line" data-startTime="880">straightforward. </span> <span class="line" data-startTime="881">And we built it, just a few of </span><span class="line" data-startTime="881">us developers in a short </span><span class="line" data-startTime="884">period of time. </span> <span class="line" data-startTime="885">And this is actually </span><span class="line" data-startTime="885">pretty cool. </span> <span class="line" data-startTime="889">Because this can be a hard </span><span class="line" data-startTime="889">problem, especially at scale. </span> <span class="line" data-startTime="892">And the reason it was so </span><span class="line" data-startTime="892">straightforward is because all </span><span class="line" data-startTime="896">of the pieces of the cloud </span><span class="line" data-startTime="896">platform that we were using </span><span class="line" data-startTime="899">are so robust and scalable in </span><span class="line" data-startTime="899">their own right and talk so </span><span class="line" data-startTime="903">easily to each other. </span></p>

<p><span class="line" data-startTime="904">So that it was a really </span><span class="line" data-startTime="904">cool result. </span> <span class="line" data-startTime="907">So now we have this foundation, </span><span class="line" data-startTime="907">this pipeline. </span> <span class="line" data-startTime="910">And we can start to do all sorts </span><span class="line" data-startTime="910">of really fun things </span><span class="line" data-startTime="912">with the data that </span><span class="line" data-startTime="912">we're collecting. </span></p>

<p class="speaker"><span class="line" data-starttime="916"><span class="speakerName">Kim Cameron</span>: So now we can get </span><span class="line" data-startTime="916">to those cool visualizations </span><span class="line" data-startTime="919">we are looking at </span><span class="line" data-startTime="919">earlier today. </span><span class="line" data-startTime="921">And we have a few to show you. </span><span class="line" data-startTime="924">So first off, we're doing </span><span class="line" data-startTime="924">visualizations based on both </span><span class="line" data-startTime="927">of our data stores. </span><span class="line" data-startTime="927">We're using both data store </span><span class="line" data-startTime="927">and we're using BigQuery. </span><span class="line" data-startTime="931">And, again, it depends </span><span class="line" data-startTime="931">on what type of </span><span class="line" data-startTime="932">visualizations we want to do. </span><span class="line" data-startTime="934">So in this example, this is </span><span class="line" data-startTime="934">going to be another live demo. </span><span class="line" data-startTime="942">And this one is, it's a little </span><span class="line" data-startTime="942">bit hard to see there. </span><span class="line" data-startTime="945">But these are the pressure </span><span class="line" data-startTime="945">mats that are </span><span class="line" data-startTime="948">on the first floor. </span><span class="line" data-startTime="949">So if you look in this area </span><span class="line" data-startTime="949">here, these are the </span><span class="line" data-startTime="951">escalators. </span></p>

<p class="speaker"><span class="line" data-starttime="952"><span class="speakerName">Amy Unruh</span>: They're </span><span class="line" data-startTime="952">counting steps. </span></p>

<p class="speaker"><span class="line" data-starttime="953"><span class="speakerName">Kim Cameron</span>: And you can also </span><span class="line" data-startTime="953">see there's a lot of traffic </span><span class="line" data-startTime="956">here by both sets of doors. </span> <span class="line" data-startTime="958">And I don't know what this </span><span class="line" data-startTime="958">is, but it's curious. </span> <span class="line" data-startTime="961">So this one is getting data </span><span class="line" data-startTime="961">from data storage. </span> <span class="line" data-startTime="964">Just getting the last x values </span><span class="line" data-startTime="964">very quick to do there. </span> <span class="line" data-startTime="967">We don't need to </span><span class="line" data-startTime="967">use any sort of </span><span class="line" data-startTime="968">complicated aggregate queries. </span> <span class="line" data-startTime="971">And we have a lot of </span><span class="line" data-startTime="971">things like this. </span> <span class="line" data-startTime="972">You can look at recent </span><span class="line" data-startTime="972">light readings, noise </span><span class="line" data-startTime="975">readings stuff like that. </span> <span class="line" data-startTime="984">So now here's the </span><span class="line" data-startTime="985">visualization that uses BigQuery. </span></p>

<p><span class="line" data-startTime="987">This is the 40 noisiest </span><span class="line" data-startTime="987">minutes at </span><span class="line" data-startTime="990">Google I/O thus far. </span> <span class="line" data-startTime="991">This is from yesterday, and so </span><span class="line" data-startTime="991">you'll notice there's a spike. </span> <span class="line" data-startTime="994">It's around the same </span><span class="line" data-startTime="994">time as the party. </span> <span class="line" data-startTime="996">So this is pretty similar to </span><span class="line" data-startTime="996">the other visualizations, </span><span class="line" data-startTime="999">really noisy going on there. </span> <span class="line" data-startTime="1000">And this one is using </span><span class="line" data-startTime="1000">an aggregate query. </span> <span class="line" data-startTime="1002">So this is the BigQuery </span><span class="line" data-startTime="1002">query we're </span><span class="line" data-startTime="1004">running to get this result. </span> <span class="line" data-startTime="1007">As you can see, we're using the </span><span class="line" data-startTime="1007">average function which is </span><span class="line" data-startTime="1009">an aggregate. </span> <span class="line" data-startTime="1010">And it's just checking the most </span><span class="line" data-startTime="1010">recent 40 loudest rooms </span><span class="line" data-startTime="1013">based on average. </span> <span class="line" data-startTime="1016">So let's run a query live. </span></p>

<p><span class="line" data-startTime="1022">And you can see the results. </span> <span class="line" data-startTime="1026">So, as a note, we have made the </span><span class="line" data-startTime="1026">BigQuery data set public. </span> <span class="line" data-startTime="1030">Any of you can have access </span><span class="line" data-startTime="1030">to that now. </span> <span class="line" data-startTime="1032">We have a resources slide at the </span><span class="line" data-startTime="1032">end that has a link to the </span><span class="line" data-startTime="1034">data sensing lab. </span> <span class="line" data-startTime="1035">You can also check out the </span><span class="line" data-startTime="1035">kiosks for the link. </span> <span class="line" data-startTime="1037">And it gives you instructions </span><span class="line" data-startTime="1037">on where to get the data set </span><span class="line" data-startTime="1039">and how to find it. </span></p>

<p class="speaker"><span class="line" data-starttime="1041"><span class="speakerName">Amy Unruh</span>: Which is </span><span class="line" data-startTime="1041">incidentally still </span><span class="line" data-startTime="1042">growing as we speak. </span></p>

<p class="speaker"><span class="line" data-starttime="1043"><span class="speakerName">Kim Cameron</span>: Yes. </span><span class="line" data-startTime="1044">So, we are going to do &mdash; </span><span class="line" data-startTime="1047">I apologize. </span><span class="line" data-startTime="1047">It's not showing up on </span><span class="line" data-startTime="1047">my laptop, so I am </span><span class="line" data-startTime="1050">doing it this way. </span></p>

<p class="speaker"><span class="line" data-starttime="1055"><span class="speakerName">Amy Unruh</span>: Query history </span><span class="line" data-startTime="1055">as well. </span></p>

<p class="speaker"><span class="line" data-starttime="1057"><span class="speakerName">Kim Cameron</span>: Sorry? </span></p>

<p class="speaker"><span class="line" data-starttime="1057"><span class="speakerName">Amy Unruh</span>: Query history. </span><span class="line" data-startTime="1058">Either way. </span><span class="line" data-startTime="1065">So view the query history. </span></p>

<p class="speaker"><span class="line" data-starttime="1066"><span class="speakerName">Kim Cameron</span>: It's hard </span><span class="line" data-startTime="1066">to see on here. </span><span class="line" data-startTime="1074">OK. </span><span class="line" data-startTime="1085">It's the pregnant </span><span class="line" data-startTime="1085">pause moment. </span><span class="line" data-startTime="1087">There we go! </span><span class="line" data-startTime="1088">Hooray! </span></p>

<p class="speaker"><span class="line" data-starttime="1088"><span class="speakerName">Amy Unruh</span>: I thought we </span><span class="line" data-startTime="1088">were going to have </span><span class="line" data-startTime="1089">to sing show tunes. </span></p>

<p class="speaker"><span class="line" data-starttime="1091"><span class="speakerName">Kim Cameron</span>: All right. </span> <span class="line" data-startTime="1092">So this is the results </span><span class="line" data-startTime="1092">of BigQuery. </span> <span class="line" data-startTime="1094">You can see the rooms and other </span><span class="line" data-startTime="1094">information about it. </span> <span class="line" data-startTime="1097">And just for fun let's also look </span><span class="line" data-startTime="1097">at one for temperature. </span> <span class="line" data-startTime="1115">If I can find it. </span> <span class="line" data-startTime="1117">Here we go. </span> <span class="line" data-startTime="1127">So Android East, hottest room. </span> <span class="line" data-startTime="1130">Room 12, not sure </span><span class="line" data-startTime="1130">what that is. </span> <span class="line" data-startTime="1131">Keynote West. </span> <span class="line" data-startTime="1133">Pixel, I guess that's when </span><span class="line" data-startTime="1133">you were all picking </span><span class="line" data-startTime="1134">up your free pixels. </span> <span class="line" data-startTime="1135">So interesting information. </span> <span class="line" data-startTime="1138">And so for these we really </span><span class="line" data-startTime="1138">needed to use BigQuery due to </span><span class="line" data-startTime="1140">the aggregates. </span> <span class="line" data-startTime="1143">Now, in addition to these </span><span class="line" data-startTime="1143">visualizations, we wanted to </span><span class="line" data-startTime="1146">be able to do things like </span><span class="line" data-startTime="1146">maybe find correlations </span><span class="line" data-startTime="1149">between data or at </span><span class="line" data-startTime="1149">least facilitate </span><span class="line" data-startTime="1151">that for the future. </span> <span class="line" data-startTime="1152">This is a really hard problem. </span> <span class="line" data-startTime="1153">And we had to figure out </span><span class="line" data-startTime="1153">how to set this up. </span></p>

<p><span class="line" data-startTime="1155">So Amy, how did we get </span><span class="line" data-startTime="1155">started with this? </span></p>

<p class="speaker"><span class="line" data-starttime="1158"><span class="speakerName">Amy Unruh</span>: So one thing </span><span class="line" data-startTime="1158">that we're doing &mdash; </span><span class="line" data-startTime="1160">So, again, basically want to </span><span class="line" data-startTime="1160">start surfacing interesting </span><span class="line" data-startTime="1164">patterns and mining all this </span><span class="line" data-startTime="1164">data and in addition to the </span><span class="line" data-startTime="1167">visualizations that </span><span class="line" data-startTime="1167">we're doing. </span> <span class="line" data-startTime="1168">So one thing we're doing is </span><span class="line" data-startTime="1168">we're actually monitoring for </span><span class="line" data-startTime="1171">particular things that we know </span><span class="line" data-startTime="1171">we want to look for. </span> <span class="line" data-startTime="1175">And one simple example of this </span><span class="line" data-startTime="1175">is we want to watch for motes </span><span class="line" data-startTime="1180">as they go on and offline. </span> <span class="line" data-startTime="1182">So we expected there would be </span><span class="line" data-startTime="1182">a lot of reasons that they </span><span class="line" data-startTime="1184">would do this. </span></p>

<p><span class="line" data-startTime="1186">People unplugging them to </span><span class="line" data-startTime="1186">use their cell phones. </span> <span class="line" data-startTime="1188">Kicking them. </span> <span class="line" data-startTime="1189">Those motes are pretty cute. </span> <span class="line" data-startTime="1191">And we thought those motes, some </span><span class="line" data-startTime="1191">of them might just take a </span><span class="line" data-startTime="1193">bit of a walk. </span> <span class="line" data-startTime="1196">So we're running background </span><span class="line" data-startTime="1196">tasks to detect when they go </span><span class="line" data-startTime="1200">on and offline. </span> <span class="line" data-startTime="1201">And we're mapping that. </span> <span class="line" data-startTime="1203">And see if I can bring </span><span class="line" data-startTime="1203">up a live version. </span> <span class="line" data-startTime="1210">Sort of disturbingly, </span><span class="line" data-startTime="1210">there's, whoops. </span> <span class="line" data-startTime="1219">Yeah. </span> <span class="line" data-startTime="1219">Why don't you do it </span><span class="line" data-startTime="1219">while I talk? </span></p>

<p class="speaker"><span class="line" data-starttime="1221"><span class="speakerName">Kim Cameron</span>: I don't </span><span class="line" data-startTime="1221">know the link </span></p>

<p class="speaker"><span class="line" data-starttime="1222"><span class="speakerName">Amy Unruh</span>: Just click </span><span class="line" data-startTime="1222">on missing. </span> <span class="line" data-startTime="1224">Sort of disturbingly, there's a </span><span class="line" data-startTime="1224">lot more missing motes today </span><span class="line" data-startTime="1228">than there were yesterday, </span><span class="line" data-startTime="1228">for some reason. </span> <span class="line" data-startTime="1231">It's all right. </span> <span class="line" data-startTime="1232">We'll just look at </span><span class="line" data-startTime="1232">the screen shot. </span> <span class="line" data-startTime="1234">This should be showing up on </span><span class="line" data-startTime="1234">your kiosks as well scattered </span><span class="line" data-startTime="1238">around Moscone. </span> <span class="line" data-startTime="1239">There were a lot more when I </span><span class="line" data-startTime="1239">checked an hour or so ago than </span><span class="line" data-startTime="1243">there were yesterday. </span> <span class="line" data-startTime="1246">So there's all sorts of </span><span class="line" data-startTime="1246">monitoring tasks that we want </span><span class="line" data-startTime="1248">to do like this. </span> <span class="line" data-startTime="1249">We've set up, again with the </span><span class="line" data-startTime="1249">task queues, the App Engine </span><span class="line" data-startTime="1253">task queues, we've set up </span><span class="line" data-startTime="1253">a framework to do this. </span> <span class="line" data-startTime="1255">Where we can specify, define the </span><span class="line" data-startTime="1255">kinds of things we want to </span><span class="line" data-startTime="1259">monitor and how frequently </span><span class="line" data-startTime="1259">we want to look for them. </span> <span class="line" data-startTime="1262">And we just set them loose. </span></p>

<p><span class="line" data-startTime="1263">Again, running in </span><span class="line" data-startTime="1263">the background. </span> <span class="line" data-startTime="1265">And App Engine will scale </span><span class="line" data-startTime="1265">these up for us. </span> <span class="line" data-startTime="1268">So we can look for a whole lot </span><span class="line" data-startTime="1268">of things really scalable as </span><span class="line" data-startTime="1272">this flood of data comes in. </span> <span class="line" data-startTime="1274">So that's one thing </span><span class="line" data-startTime="1274">we're doing. </span> <span class="line" data-startTime="1275">But more broadly, we need to </span><span class="line" data-startTime="1275">start mining this data. </span> <span class="line" data-startTime="1282">Looking for interesting </span><span class="line" data-startTime="1282">patterns. </span> <span class="line" data-startTime="1284">And as any data scientist in </span><span class="line" data-startTime="1284">the audience will know, </span><span class="line" data-startTime="1289">there's just a whole arsenal </span><span class="line" data-startTime="1289">out there of libraries and </span><span class="line" data-startTime="1294">packages that help you do </span><span class="line" data-startTime="1294">this kind of thing. </span></p>

<p><span class="line" data-startTime="1297">For example, [INAUDIBLE], </span><span class="line" data-startTime="1297">all sorts of things. </span> <span class="line" data-startTime="1301">So we've got all this data, now </span><span class="line" data-startTime="1301">we can start feeding it to </span><span class="line" data-startTime="1305">some of these great </span><span class="line" data-startTime="1305">analysis packages. </span></p>

<p class="speaker"><span class="line" data-starttime="1307"><span class="speakerName">Kim Cameron</span>: And I assume we're </span><span class="line" data-startTime="1307">going to be doing this </span><span class="line" data-startTime="1309">on App Engine. </span></p>

<p class="speaker"><span class="line" data-starttime="1310"><span class="speakerName">Amy Unruh</span>: Well, I'm sorry </span><span class="line" data-startTime="1310">to break it to you, Kim. </span> <span class="line" data-startTime="1313">Many of these packages actually </span><span class="line" data-startTime="1315">don't run on App Engine. </span> <span class="line" data-startTime="1316">The reason relates to how App </span><span class="line" data-startTime="1316">Engine packages or sandboxes </span><span class="line" data-startTime="1321">some of its services. </span> <span class="line" data-startTime="1322">However, all of these </span><span class="line" data-startTime="1322">packages run really </span><span class="line" data-startTime="1325">well on Compute Engine. </span> <span class="line" data-startTime="1328">And so that's where we're </span><span class="line" data-startTime="1328">going to do it. </span> <span class="line" data-startTime="1331">And there is something that was </span><span class="line" data-startTime="1331">just announced yesterday </span><span class="line" data-startTime="1336">that many of you might </span><span class="line" data-startTime="1336">have caught. </span> <span class="line" data-startTime="1338">That just really facilitates </span><span class="line" data-startTime="1338">this and is </span><span class="line" data-startTime="1341">really pretty exciting. </span></p>

<p><span class="line" data-startTime="1343">And that is the announcement </span><span class="line" data-startTime="1343">of the </span><span class="line" data-startTime="1345">Google Cloud data store. </span> <span class="line" data-startTime="1346">This is essentially an API that </span><span class="line" data-startTime="1346">processes outside App </span><span class="line" data-startTime="1350">Engine can use to access </span><span class="line" data-startTime="1350">App Engines data store. </span> <span class="line" data-startTime="1356">And so this means that as </span><span class="line" data-startTime="1356">we're running all this </span><span class="line" data-startTime="1359">analysis on Compute Engine or on </span><span class="line" data-startTime="1359">other processes we can tap </span><span class="line" data-startTime="1365">directly into App Engine </span><span class="line" data-startTime="1365">app data stores. </span> <span class="line" data-startTime="1369">And grab the data directly. </span> <span class="line" data-startTime="1371">We don't have to do any </span><span class="line" data-startTime="1371">shuttling around. </span> <span class="line" data-startTime="1373">We can post the results back </span><span class="line" data-startTime="1373">into App Engine's data store. </span> <span class="line" data-startTime="1376">And, in fact, we don't </span><span class="line" data-startTime="1376">necessarily even really need </span><span class="line" data-startTime="1381">to use App Engine at all. </span> <span class="line" data-startTime="1382">Although, of course, we're </span><span class="line" data-startTime="1382">using it for this system. </span> <span class="line" data-startTime="1384">So this is really cool. </span></p>

<p><span class="line" data-startTime="1386">This makes this kind of analysis </span><span class="line" data-startTime="1386">really easy to do. </span> <span class="line" data-startTime="1392">And just as a quick example, </span><span class="line" data-startTime="1392">let me show you a little </span><span class="line" data-startTime="1397">script I wrote to grab, </span><span class="line" data-startTime="1397">this is Python. </span> <span class="line" data-startTime="1402">And I don't expect you to look </span><span class="line" data-startTime="1402">at it in gory detail. </span> <span class="line" data-startTime="1405">But what this script </span><span class="line" data-startTime="1405">does is it's </span><span class="line" data-startTime="1408">running in Compute Engine. </span> <span class="line" data-startTime="1409">It's grabbing some of our sensor </span><span class="line" data-startTime="1409">data that we've been </span><span class="line" data-startTime="1412">storing, directly from </span><span class="line" data-startTime="1412">our apps data store. </span> <span class="line" data-startTime="1417">It's doing some transformations </span><span class="line" data-startTime="1417">on it. </span></p>

<p><span class="line" data-startTime="1419">It's going to create </span><span class="line" data-startTime="1419">some CSV files. </span> <span class="line" data-startTime="1423">So if you look at this code, I </span><span class="line" data-startTime="1423">won't spend too much time on </span><span class="line" data-startTime="1426">it, but anyone who's done a </span><span class="line" data-startTime="1426">little bit of App Engine </span><span class="line" data-startTime="1429">programming will recognize </span><span class="line" data-startTime="1429">the structure of it. </span> <span class="line" data-startTime="1432">It's the same structure </span><span class="line" data-startTime="1432">in terms of </span><span class="line" data-startTime="1434">talking to the data store. </span> <span class="line" data-startTime="1435">We're formulating a query. </span> <span class="line" data-startTime="1436">We're adding some filters. </span> <span class="line" data-startTime="1437">We're specifying the order that </span><span class="line" data-startTime="1437">we want the results back. </span> <span class="line" data-startTime="1440">And then we're submitting </span><span class="line" data-startTime="1440">the query. </span> <span class="line" data-startTime="1441">It's really fast. </span> <span class="line" data-startTime="1443">It works really well. </span> <span class="line" data-startTime="1444">And so then we, in this </span><span class="line" data-startTime="1444">particular case, with this </span><span class="line" data-startTime="1448">script, we generate </span><span class="line" data-startTime="1448">a CSV file. </span> <span class="line" data-startTime="1451">And this is just a snippet of </span><span class="line" data-startTime="1451">it just to show you the </span><span class="line" data-startTime="1454">structure in this </span><span class="line" data-startTime="1454">particular case. </span></p>

<p><span class="line" data-startTime="1455">And once we have something like </span><span class="line" data-startTime="1455">this, for example, we can </span><span class="line" data-startTime="1459">run analysis on it using R. </span> <span class="line" data-startTime="1462">So this is just one little </span><span class="line" data-startTime="1462">example to give you </span><span class="line" data-startTime="1468">the flavor of it. </span> <span class="line" data-startTime="1469">In this case, we're looking </span><span class="line" data-startTime="1469">for correlations between </span><span class="line" data-startTime="1475">streams of different sensors </span><span class="line" data-startTime="1475">on the same mote. </span> <span class="line" data-startTime="1478">So one particular mote. </span> <span class="line" data-startTime="1479">And we're saying, are we finding </span><span class="line" data-startTime="1479">correlations between </span><span class="line" data-startTime="1482">sensor stream A and </span><span class="line" data-startTime="1482">sensor stream B. </span> <span class="line" data-startTime="1485">And so, for example, in this </span><span class="line" data-startTime="1485">case this mote had both </span><span class="line" data-startTime="1489">humidity and temperature </span><span class="line" data-startTime="1489">sensors. </span> <span class="line" data-startTime="1491">And we're finding that there's a </span><span class="line" data-startTime="1491">strong negative correlation, </span><span class="line" data-startTime="1495">apparently. </span> <span class="line" data-startTime="1496">I saw this on more than one </span><span class="line" data-startTime="1496">mote, between humidity and </span><span class="line" data-startTime="1499">temperature. </span> <span class="line" data-startTime="1500">So this kind of thing. </span> <span class="line" data-startTime="1503">So to reiterate, this </span><span class="line" data-startTime="1503">is really exciting. </span> <span class="line" data-startTime="1508">The fact that we can run these </span><span class="line" data-startTime="1508">analysis jobs directly from </span><span class="line" data-startTime="1514">Compute Engine tapping into the </span><span class="line" data-startTime="1514">Google Cloud data storage. </span> <span class="line" data-startTime="1518">This really opened up a whole </span><span class="line" data-startTime="1518">new world of analysis. </span></p>

<p><span class="line" data-startTime="1520">And we have lots more that we're </span><span class="line" data-startTime="1520">going to do with this. </span></p>

<p class="speaker"><span class="line" data-starttime="1523"><span class="speakerName">Kim Cameron</span>: So Amy, it sounds </span><span class="line" data-startTime="1523">like our apps going really </span><span class="line" data-startTime="1525">well so far. </span><span class="line" data-startTime="1526">How about performance? </span><span class="line" data-startTime="1528">We had to have done some </span><span class="line" data-startTime="1528">stuff to make the app </span><span class="line" data-startTime="1529">perform much better. </span><span class="line" data-startTime="1531">What did we do? </span></p>

<p class="speaker"><span class="line" data-starttime="1532"><span class="speakerName">Amy Unruh</span>: Actually our </span><span class="line" data-startTime="1532">app was perfect. </span><span class="line" data-startTime="1535">We didn't have to do </span><span class="line" data-startTime="1535">any performance. </span><span class="line" data-startTime="1536">[LAUGHTER] </span></p>

<p class="speaker"><span class="line" data-starttime="1538"><span class="speakerName">Amy Unruh</span>: You guys know that </span><span class="line" data-startTime="1538">can't possibly be the case. </span> <span class="line" data-startTime="1541">Yeah, so, in fact, we had to </span><span class="line" data-startTime="1541">do a lot of performance </span><span class="line" data-startTime="1544">optimizations. </span> <span class="line" data-startTime="1545">So one thing that I won't really </span><span class="line" data-startTime="1545">go into here, but was </span><span class="line" data-startTime="1549">really crucial for </span><span class="line" data-startTime="1549">it, was caching. </span> <span class="line" data-startTime="1551">So we put in a really strong </span><span class="line" data-startTime="1551">caching layer. </span> <span class="line" data-startTime="1554">And for that we used App </span><span class="line" data-startTime="1554">Engine's Memcache service and </span><span class="line" data-startTime="1559">it worked great. </span> <span class="line" data-startTime="1560">So that's why our app is running </span><span class="line" data-startTime="1560">as smoothly as it is. </span> <span class="line" data-startTime="1564">But one thing I wanted to </span><span class="line" data-startTime="1564">particularly call out is as </span><span class="line" data-startTime="1566">being kind of an interesting way </span><span class="line" data-startTime="1566">of improving performance, </span><span class="line" data-startTime="1573">is something new. </span> <span class="line" data-startTime="1574">It's an App Engine feature </span><span class="line" data-startTime="1574">called App Engine Servers. </span></p>

<p><span class="line" data-startTime="1578">And it's in limited preview. </span> <span class="line" data-startTime="1580">Which means that you have </span><span class="line" data-startTime="1580">to sign up to use it. </span> <span class="line" data-startTime="1583">So if you're interested in the </span><span class="line" data-startTime="1583">resource slide at the end, </span><span class="line" data-startTime="1585">we've put a sign up link. </span> <span class="line" data-startTime="1587">So with App Engine servers you </span><span class="line" data-startTime="1587">define logical instance </span><span class="line" data-startTime="1595">configurations, essentially </span><span class="line" data-startTime="1595">server groups, multiple server </span><span class="line" data-startTime="1600">groups for your App </span><span class="line" data-startTime="1600">Engine app. </span> <span class="line" data-startTime="1603">And then you can define how </span><span class="line" data-startTime="1603">your incoming requests are </span><span class="line" data-startTime="1607">routed to one particular server </span><span class="line" data-startTime="1607">group or another. </span> <span class="line" data-startTime="1612">So you're essentially </span><span class="line" data-startTime="1612">partitioning your app. </span> <span class="line" data-startTime="1616">Different classes of request can </span><span class="line" data-startTime="1616">get handled by different </span><span class="line" data-startTime="1620">server groups. </span> <span class="line" data-startTime="1621">An App Engine is going to </span><span class="line" data-startTime="1621">consider the scheduling and </span><span class="line" data-startTime="1625">scaling of each server </span><span class="line" data-startTime="1625">group separately. </span> <span class="line" data-startTime="1628">So if you, as many apps do, have </span><span class="line" data-startTime="1628">incoming requests with </span><span class="line" data-startTime="1633">lots of variability. </span> <span class="line" data-startTime="1635">Some really high latency </span><span class="line" data-startTime="1635">requests, </span><span class="line" data-startTime="1637">some low latency requests. </span></p>

<p><span class="line" data-startTime="1639">Maybe a lot of number </span><span class="line" data-startTime="1639">crunching. </span> <span class="line" data-startTime="1640">If you can partition the </span><span class="line" data-startTime="1640">handling of hose requests, App </span><span class="line" data-startTime="1647">Engine can manage the app </span><span class="line" data-startTime="1647">really efficiently. </span> <span class="line" data-startTime="1651">And so in our particular case, </span><span class="line" data-startTime="1651">we had three different classes </span><span class="line" data-startTime="1655">of activities that we're </span><span class="line" data-startTime="1655">doing in our app. </span> <span class="line" data-startTime="1657">So one is the data ingestion </span><span class="line" data-startTime="1657">which needs to be really rapid </span><span class="line" data-startTime="1661">and very quick. </span> <span class="line" data-startTime="1664">Then we're doing a lot of data </span><span class="line" data-startTime="1664">processing of various types, </span><span class="line" data-startTime="1669">all sort of slow, slower </span><span class="line" data-startTime="1670">compared to the data ingestion. </span> <span class="line" data-startTime="1672">And then we're handling </span><span class="line" data-startTime="1672">the visualization. </span> <span class="line" data-startTime="1674">All of the client requests </span><span class="line" data-startTime="1674">to see the neat </span><span class="line" data-startTime="1677">stuff that we're building. </span> <span class="line" data-startTime="1678">And so we really saw </span><span class="line" data-startTime="1678">improvements in our app by </span><span class="line" data-startTime="1682">dividing these different </span><span class="line" data-startTime="1682">activities in two different </span><span class="line" data-startTime="1684">server groups. </span></p>

<p class="speaker"><span class="line" data-starttime="1688"><span class="speakerName">Kim Cameron</span>: So, like with any </span><span class="line" data-startTime="1688">software development process, </span><span class="line" data-startTime="1691">we did run some challenges </span><span class="line" data-startTime="1691">along the way. </span> <span class="line" data-startTime="1694">And I'm going to tell you just </span><span class="line" data-startTime="1694">about a few of them right now. </span> <span class="line" data-startTime="1697">So, first of all, entering </span><span class="line" data-startTime="1697">the mote data. </span> <span class="line" data-startTime="1700">We needed the mote data entered </span><span class="line" data-startTime="1700">so we could join it </span><span class="line" data-startTime="1702">with our sensor data. </span> <span class="line" data-startTime="1703">And then we can move it into </span><span class="line" data-startTime="1703">BigQuery, do all the stuff </span><span class="line" data-startTime="1705">we've talked about already. </span> <span class="line" data-startTime="1707">So that was a manual process. </span> <span class="line" data-startTime="1708">And one challenge is we had to </span><span class="line" data-startTime="1708">build an admin panel to help </span><span class="line" data-startTime="1712">the hardware guys move all the </span><span class="line" data-startTime="1712">mote data in manually. </span></p>

<p><span class="line" data-startTime="1715">And, of course, humans are not </span><span class="line" data-startTime="1715">robots so they make mistakes. </span> <span class="line" data-startTime="1718">And so occasionally we had to </span><span class="line" data-startTime="1718">deal with issues like there </span><span class="line" data-startTime="1720">would be a mislabeled mote. </span> <span class="line" data-startTime="1722">And so then we'd suddenly get </span><span class="line" data-startTime="1722">a reading from some strange </span><span class="line" data-startTime="1724">mote we didn't recognize. </span> <span class="line" data-startTime="1726">And we had to have a way to </span><span class="line" data-startTime="1726">really look for those issues </span><span class="line" data-startTime="1728">and fix them. </span> <span class="line" data-startTime="1730">I'd say the biggest challenge </span><span class="line" data-startTime="1730">we had was prioritization. </span> <span class="line" data-startTime="1733">We started this app only about </span><span class="line" data-startTime="1733">a month ago and with very </span><span class="line" data-startTime="1736">limited developer resources. </span> <span class="line" data-startTime="1738">So we had to choose carefully </span><span class="line" data-startTime="1738">the things we wanted to do to </span><span class="line" data-startTime="1740">build this foundation. </span> <span class="line" data-startTime="1742">We had to focus on the </span><span class="line" data-startTime="1742">pipeline and the </span><span class="line" data-startTime="1744">visualizations, primarily. </span> <span class="line" data-startTime="1746">And really the takeaway from </span><span class="line" data-startTime="1746">this is we've just gotten </span><span class="line" data-startTime="1749">started on this. </span></p>

<p><span class="line" data-startTime="1750">We hope that you'll </span><span class="line" data-startTime="1750">follow the blog. </span> <span class="line" data-startTime="1752">We want to put installations </span><span class="line" data-startTime="1752">of this up in the future. </span> <span class="line" data-startTime="1755">And we also plan on </span><span class="line" data-startTime="1755">open-sourcing this code at </span><span class="line" data-startTime="1757">some point after I/O so you </span><span class="line" data-startTime="1757">guys can look at it </span><span class="line" data-startTime="1759">and work on it too. </span> <span class="line" data-startTime="1760">As well as having access to </span><span class="line" data-startTime="1760">the data set and BigQuery. </span> <span class="line" data-startTime="1763">So I guess what I would end with </span><span class="line" data-startTime="1763">is, use these patterns. </span> <span class="line" data-startTime="1767">Use these practices. </span> <span class="line" data-startTime="1769">Go out and build your own </span><span class="line" data-startTime="1769">internet of things apps that </span><span class="line" data-startTime="1772">help change the world </span><span class="line" data-startTime="1772">and how you see it. </span> <span class="line" data-startTime="1774">Just please, for all of </span><span class="line" data-startTime="1774">our sakes, do not </span><span class="line" data-startTime="1776">build a robot army. </span></p>

<p><span class="line" data-startTime="1779">Thank you. </span> <span class="line" data-startTime="1780">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="1788"><span class="speakerName">Kim Cameron</span>: So, oops, so we </span><span class="line" data-startTime="1788">have time for about 10 minutes </span><span class="line" data-startTime="1795">of questions. </span><span class="line" data-startTime="1797">And we have mics in both of </span><span class="line" data-startTime="1797">the aisles for anyone who </span><span class="line" data-startTime="1799">would like to come up and ask. </span><span class="line" data-startTime="1805">I apologize I'm not able </span><span class="line" data-startTime="1805">to make the slides big. </span><span class="line" data-startTime="1813">Which side? </span><span class="line" data-startTime="1814">How about you? </span></p>

<p class="speaker"><span class="line" data-starttime="1815"><span class="speakerName">Audience</span>: Yes. </span><span class="line" data-startTime="1818">I noticed that there were </span><span class="line" data-startTime="1818">somewhere around 500 motes out </span><span class="line" data-startTime="1820">on the floor. </span><span class="line" data-startTime="1823">How does this problem change </span><span class="line" data-startTime="1823">if you increase that number </span><span class="line" data-startTime="1826">to, for example, let's </span><span class="line" data-startTime="1826">say, 5,000 or </span><span class="line" data-startTime="1829">let's say 500,000 motes. </span><span class="line" data-startTime="1832">Or even, let's say 50 million. </span><span class="line" data-startTime="1835">Maybe 50 million is a </span><span class="line" data-startTime="1835">little bit too much. </span><span class="line" data-startTime="1836">But a very, very large amount, </span><span class="line" data-startTime="1836">for example, in a cable </span><span class="line" data-startTime="1842">network or something where </span><span class="line" data-startTime="1842">there's maybe not with motes, </span><span class="line" data-startTime="1846">but with different devices. </span></p>

<p class="speaker"><span class="line" data-starttime="1849"><span class="speakerName">Amy Unruh</span>: So what we're seeing, </span><span class="line" data-startTime="1849">what we're seeing </span><span class="line" data-startTime="1853">right now is that App Engine is </span><span class="line" data-startTime="1853">not even really breaking a </span><span class="line" data-startTime="1856">sweat drawing in this data. </span><span class="line" data-startTime="1858">And so we have every reason to </span><span class="line" data-startTime="1858">believe that will scale up </span><span class="line" data-startTime="1861">very gracefully to much </span><span class="line" data-startTime="1861">larger installations. </span><span class="line" data-startTime="1867">Yeah. </span><span class="line" data-startTime="1867">I couldn't speak to millions </span><span class="line" data-startTime="1867">and millions of motes, but </span><span class="line" data-startTime="1870">certainly we could have an order </span><span class="line" data-startTime="1870">of magnitude more motes </span><span class="line" data-startTime="1874">and I wouldn't expect </span><span class="line" data-startTime="1874">any problem at all. </span></p>

<p class="speaker"><span class="line" data-starttime="1876"><span class="speakerName">Audience</span>: With the same &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1878"><span class="speakerName">Amy Unruh</span>: With the same </span><span class="line" data-startTime="1878">configuration. </span></p>

<p class="speaker"><span class="line" data-starttime="1882"><span class="speakerName">Audience</span>: I actually have a </span><span class="line" data-startTime="1882">hardware question for you. </span> <span class="line" data-startTime="1884">And I've been looking forward </span><span class="line" data-startTime="1884">to this ever since I saw the </span><span class="line" data-startTime="1886">mote sitting around </span><span class="line" data-startTime="1886">everywhere. </span> <span class="line" data-startTime="1888">No I'm not one of the ones that </span><span class="line" data-startTime="1888">took one, although I was </span><span class="line" data-startTime="1889">really tempted, I'll </span><span class="line" data-startTime="1889">have to admit. </span> <span class="line" data-startTime="1891">But I'm actually working on a </span><span class="line" data-startTime="1891">project doing some sensing of </span><span class="line" data-startTime="1896">growing conditions in the </span><span class="line" data-startTime="1896">tropical regions. </span> <span class="line" data-startTime="1899">And so when I saw XP motes and </span><span class="line" data-startTime="1899">you have all the right sensors </span><span class="line" data-startTime="1903">on there and everything. </span> <span class="line" data-startTime="1904">So you said those are </span><span class="line" data-startTime="1904">custom shields? </span><span class="line" data-startTime="1906">Are they going to be available </span><span class="line" data-startTime="1906">somewhere? </span></p>

<p class="speaker"><span class="line" data-starttime="1908"><span class="speakerName">Kim Cameron</span>: So the fellows </span><span class="line" data-startTime="1908">that made the shields, </span><span class="line" data-startTime="1912">actually they're in </span><span class="line" data-startTime="1912">the audience here. </span><span class="line" data-startTime="1913">So there around for questions </span><span class="line" data-startTime="1913">afterwards as well. </span><span class="line" data-startTime="1916">There's Alasdair right there. </span><span class="line" data-startTime="1917">I don't know if Kipp's here. </span><span class="line" data-startTime="1919">And they are playing an </span><span class="line" data-startTime="1919">open sourcing the </span><span class="line" data-startTime="1921">board at some point. </span><span class="line" data-startTime="1922">So you can get more information </span><span class="line" data-startTime="1922">about that at </span><span class="line" data-startTime="1924">their website which is </span><span class="line" data-startTime="1924">datasensinglab.com. </span><span class="line" data-startTime="1927">Of you can feel free to chat </span><span class="line" data-startTime="1927">with Alasdair afterwards. </span></p>

<p class="speaker"><span class="line" data-starttime="1930"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="1930">Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="1932"><span class="speakerName">Audience</span>: Hello. </span><span class="line" data-startTime="1934">Well I see that you started </span><span class="line" data-startTime="1934">with cloud storage then to </span><span class="line" data-startTime="1937">BigQuery then converting those </span><span class="line" data-startTime="1937">files to a CSV file to complex </span><span class="line" data-startTime="1943">event processing or something </span><span class="line" data-startTime="1943">like that. </span><span class="line" data-startTime="1944">Is there a way to avoid all that </span><span class="line" data-startTime="1944">process of porting data </span><span class="line" data-startTime="1948">from one structure to another? </span><span class="line" data-startTime="1950">For example, if I do incremental </span><span class="line" data-startTime="1950">updates, probably </span><span class="line" data-startTime="1952">that's going to be a pain. </span></p>

<p class="speaker"><span class="line" data-starttime="1953"><span class="speakerName">Kim Cameron</span>: Yeah so BigQuery </span><span class="line" data-startTime="1953">right now supports two schema. </span><span class="line" data-startTime="1957">So one is CSV format </span><span class="line" data-startTime="1957">and one is JSON. </span><span class="line" data-startTime="1959">So I think in the future it </span><span class="line" data-startTime="1959">might be great if there were </span><span class="line" data-startTime="1962">more schemas. </span><span class="line" data-startTime="1962">For now it would have to </span><span class="line" data-startTime="1962">be one of those two. </span><span class="line" data-startTime="1965">So if you're starting a project </span><span class="line" data-startTime="1965">from scratch you could </span><span class="line" data-startTime="1968">think about, well is there a </span><span class="line" data-startTime="1968">way I can structure my data </span><span class="line" data-startTime="1970">that way naturally </span><span class="line" data-startTime="1970">so it's easier? </span><span class="line" data-startTime="1973">That is a limitation </span><span class="line" data-startTime="1973">right now. </span></p>

<p class="speaker"><span class="line" data-starttime="1974"><span class="speakerName">Audience</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="1976"><span class="speakerName">Audience</span>: I'm curious what the </span><span class="line" data-startTime="1976">500 motes you showed in the </span><span class="line" data-startTime="1979">use of mesh networks </span><span class="line" data-startTime="1979">how it was at that </span><span class="line" data-startTime="1982">mesh data got collected. </span><span class="line" data-startTime="1985">Was there some point that </span><span class="line" data-startTime="1985">brought it onto the internet? </span></p>

<p class="speaker"><span class="line" data-starttime="1990"><span class="speakerName">Kim Cameron</span>: So I'm not sure </span><span class="line" data-startTime="1990">of the answer to that. </span><span class="line" data-startTime="1993">We focus mostly on the </span><span class="line" data-startTime="1993">software side. </span><span class="line" data-startTime="1995">And Digi were the masters of </span><span class="line" data-startTime="1995">setting up the mesh network. </span><span class="line" data-startTime="1999">So they would be able </span><span class="line" data-startTime="1999">to answer that </span><span class="line" data-startTime="2000">question better than me. </span><span class="line" data-startTime="2001">And they will be at the cloud </span><span class="line" data-startTime="2001">sandbox later on to help </span><span class="line" data-startTime="2004">answer that question. </span></p>

<p class="speaker"><span class="line" data-starttime="2006"><span class="speakerName">Audience</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2008"><span class="speakerName">Kim Cameron</span>: Hi, I have </span><span class="line" data-startTime="2008">a simple question. </span><span class="line" data-startTime="2011">How did you decide where to </span><span class="line" data-startTime="2011">place each of every sensor? </span></p>

<p class="speaker"><span class="line" data-starttime="2016"><span class="speakerName">Amy Unruh</span>: Yeah Alasdair could </span><span class="line" data-startTime="2016">answer that question. </span><span class="line" data-startTime="2019">He can tell you it was time </span><span class="line" data-startTime="2019">consuming and he probably lost </span><span class="line" data-startTime="2023">lots of his hair doing it. </span></p>

<p class="speaker"><span class="line" data-starttime="2025"><span class="speakerName">Kim Cameron</span>: I think that is one </span><span class="line" data-startTime="2025">of the ongoing challenges. </span><span class="line" data-startTime="2028">How do you know how many </span><span class="line" data-startTime="2028">motes to put and </span><span class="line" data-startTime="2029">where do you put them. </span><span class="line" data-startTime="2030">And how dense do you </span><span class="line" data-startTime="2030">pack them in? </span><span class="line" data-startTime="2032">And these are things that sort </span><span class="line" data-startTime="2032">of learning lesson and </span><span class="line" data-startTime="2036">hopefully we improve </span><span class="line" data-startTime="2036">in the future. </span></p>

<p class="speaker"><span class="line" data-starttime="2038"><span class="speakerName">Amy Unruh</span>: But in a sense we </span><span class="line" data-startTime="2038">place them knowing ahead of </span><span class="line" data-startTime="2041">time where we thought </span><span class="line" data-startTime="2041">interesting things </span><span class="line" data-startTime="2043">would be going on. </span><span class="line" data-startTime="2044">And that was certainly </span><span class="line" data-startTime="2044">a part of it. </span></p>

<p class="speaker"><span class="line" data-starttime="2048"><span class="speakerName">Audience</span>: So with these large </span><span class="line" data-startTime="2048">data sets like this, did you </span><span class="line" data-startTime="2051">give any thought to testing </span><span class="line" data-startTime="2051">whether the </span><span class="line" data-startTime="2054">results were correct? </span></p>

<p class="speaker"><span class="line" data-starttime="2058"><span class="speakerName">Amy Unruh</span>: In this sense of </span><span class="line" data-startTime="2058">whether we have dirty data, </span><span class="line" data-startTime="2063">missing data? </span></p>

<p class="speaker"><span class="line" data-starttime="2064"><span class="speakerName">Audience</span>: Your calculations </span><span class="line" data-startTime="2064">were incorrect or you had </span><span class="line" data-startTime="2069">somehow overran some of </span><span class="line" data-startTime="2069">the data or didn't get </span><span class="line" data-startTime="2074">all that was there. </span><span class="line" data-startTime="2076">Sure there's, there's not </span><span class="line" data-startTime="2076">that much at risk. </span></p>

<p class="speaker"><span class="line" data-starttime="2083"><span class="speakerName">Amy Unruh</span>: It's a really </span><span class="line" data-startTime="2083">interesting question. </span> <span class="line" data-startTime="2084">There are several levels of </span><span class="line" data-startTime="2084">that question, of course. </span> <span class="line" data-startTime="2086">And one is just a question of </span><span class="line" data-startTime="2086">how well calibrated are the </span><span class="line" data-startTime="2092">motes with each other. </span> <span class="line" data-startTime="2093">And we believe that, we haven't </span><span class="line" data-startTime="2093">done much of this yet, </span><span class="line" data-startTime="2097">but a lot of the correlation </span><span class="line" data-startTime="2097">analysis that we're planning </span><span class="line" data-startTime="2100">on doing should help flesh </span><span class="line" data-startTime="2100">that out a little bit. </span> <span class="line" data-startTime="2105">And then we anticipate that we </span><span class="line" data-startTime="2105">will have gaps in our data. </span> <span class="line" data-startTime="2109">For example, motes are going on </span><span class="line" data-startTime="2109">and offline all the time. </span> <span class="line" data-startTime="2113">Sometimes one of the sensors </span><span class="line" data-startTime="2113">on a mote doesn't report. </span> <span class="line" data-startTime="2117">Sometimes our motes </span><span class="line" data-startTime="2117">get mislabeled. </span> <span class="line" data-startTime="2119">And so any analysis we do will </span><span class="line" data-startTime="2119">have to deal with that. </span> <span class="line" data-startTime="2123">Whether it be to be tolerant </span><span class="line" data-startTime="2123">of that, or to </span><span class="line" data-startTime="2126">try to clean it up. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2128"><span class="speakerName">Audience</span>: But you're assuming </span><span class="line" data-startTime="2128">that once the data is in the </span><span class="line" data-startTime="2131">mote everything else is </span><span class="line" data-startTime="2131">going to be correct. </span></p>

<p class="speaker"><span class="line" data-starttime="2136"><span class="speakerName">Amy Unruh</span>: You mean once we've </span><span class="line" data-startTime="2136">collected the data? </span></p>

<p class="speaker"><span class="line" data-starttime="2138"><span class="speakerName">Audience</span>: Yeah. </span><span class="line" data-startTime="2139">Right. </span></p>

<p class="speaker"><span class="line" data-starttime="2140"><span class="speakerName">Amy Unruh</span>: No. </span><span class="line" data-startTime="2141">We anticipate doing all sorts </span><span class="line" data-startTime="2141">of analysis that requires a </span><span class="line" data-startTime="2145">data cleaning stage </span><span class="line" data-startTime="2145">of some sort. </span><span class="line" data-startTime="2148">It really is dirty </span><span class="line" data-startTime="2148">data, in a sense. </span><span class="line" data-startTime="2153">There's lots of gaps. </span><span class="line" data-startTime="2155">There's lots of things that </span><span class="line" data-startTime="2155">were a bit mislabeled. </span><span class="line" data-startTime="2157">And because we have so much </span><span class="line" data-startTime="2157">of it we ought to be able </span><span class="line" data-startTime="2161">to pick that out. </span></p>

<p class="speaker"><span class="line" data-starttime="2162"><span class="speakerName">Audience</span>: Right. </span><span class="line" data-startTime="2163">OK. </span><span class="line" data-startTime="2163">All right Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2165"><span class="speakerName">Kim Cameron</span>: Hello. </span></p>

<p class="speaker"><span class="line" data-starttime="2167"><span class="speakerName">Audience</span>: So one of things about </span><span class="line" data-startTime="2167">Google I/O, I've been </span><span class="line" data-startTime="2170">coming for a long time and our </span><span class="line" data-startTime="2170">Wi-Fi network here has been </span><span class="line" data-startTime="2173">pretty bad. </span><span class="line" data-startTime="2174">And this year, I think, </span><span class="line" data-startTime="2174">is about the worst. </span><span class="line" data-startTime="2176">And so how do you know that you </span><span class="line" data-startTime="2176">can deploy 500 motes in </span><span class="line" data-startTime="2179">this incredibly challenging </span><span class="line" data-startTime="2179">environment without </span><span class="line" data-startTime="2183">exacerbating the problems we </span><span class="line" data-startTime="2183">already have with Wi-Fi? </span></p>

<p class="speaker"><span class="line" data-starttime="2189"><span class="speakerName">Kim Cameron</span>: Yes, let's </span><span class="line" data-startTime="2189">get Alasdair up here. </span></p>

<p class="speaker"><span class="line" data-starttime="2193"><span class="speakerName">Alasdair</span>: So I think ZigBee mesh </span><span class="line" data-startTime="2193">is actually in between </span><span class="line" data-startTime="2197">the Wi-Fi channels. </span></p>

<p class="speaker"><span class="line" data-starttime="2198"><span class="speakerName">Audience</span>: They're all </span><span class="line" data-startTime="2198">2.4 megahertz </span><span class="line" data-startTime="2199">channels, then they overlap. </span></p>

<p class="speaker"><span class="line" data-starttime="2201"><span class="speakerName">Alasdair</span>: No, well, </span><span class="line" data-startTime="2201">not exactly. </span><span class="line" data-startTime="2203">They're 2.4 gigahertz channels, </span><span class="line" data-startTime="2203">but the actual </span><span class="line" data-startTime="2206">ZigBee channels are between </span><span class="line" data-startTime="2206">the Wi-Fi channels. </span><span class="line" data-startTime="2209">So they're in that the bottoms </span><span class="line" data-startTime="2209">of the Gaussians. </span><span class="line" data-startTime="2212">On top of that, we actually </span><span class="line" data-startTime="2212">filtered out some of the </span><span class="line" data-startTime="2214">ZigBee channels that </span><span class="line" data-startTime="2214">were overlapping </span><span class="line" data-startTime="2215">with the Wi-Fi channels. </span><span class="line" data-startTime="2216">So we optimized it to </span><span class="line" data-startTime="2216">preferentially not interfere </span><span class="line" data-startTime="2219">with the Wi-Fi. </span></p>

<p class="speaker"><span class="line" data-starttime="2222"><span class="speakerName">Audience</span>: So are you measuring, </span><span class="line" data-startTime="2222">the Wi-Fi has been </span><span class="line" data-startTime="2225">really bad this year. </span><span class="line" data-startTime="2226">Are you measuring something &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2227"><span class="speakerName">Alasdair</span>: Well actually I think </span><span class="line" data-startTime="2227">the Wi-Fi is really good </span><span class="line" data-startTime="2229">for a conference of the size. </span><span class="line" data-startTime="2230">I've seen much worse. </span><span class="line" data-startTime="2232">But we are actually looking for </span><span class="line" data-startTime="2232">packet loss and other sort </span><span class="line" data-startTime="2235">of packet collision </span><span class="line" data-startTime="2235">type stuff. </span><span class="line" data-startTime="2237">And we're going to look at </span><span class="line" data-startTime="2237">that data and analyze it </span><span class="line" data-startTime="2239">afterwards and see what's </span><span class="line" data-startTime="2239">happening, basically. </span><span class="line" data-startTime="2241">But I would lay large amounts </span><span class="line" data-startTime="2241">of money that anything to do </span><span class="line" data-startTime="2246">with Wi-Fi is not our network. </span><span class="line" data-startTime="2249">Hand on heart. </span><span class="line" data-startTime="2249">I swear. </span></p>

<p class="speaker"><span class="line" data-starttime="2250"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="2250">All right. </span><span class="line" data-startTime="2251">Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="2253"><span class="speakerName">Audience</span>: Hi, I know that is a </span><span class="line" data-startTime="2253">totally different project, but </span><span class="line" data-startTime="2257">I'd like to know if you have </span><span class="line" data-startTime="2257">any comment about HP Sense. </span><span class="line" data-startTime="2260">They have a similar project </span><span class="line" data-startTime="2260">about collecting data. </span></p>

<p class="speaker"><span class="line" data-starttime="2263"><span class="speakerName">Kim Cameron</span>: I'm personally not </span><span class="line" data-startTime="2263">familiar with the project. </span><span class="line" data-startTime="2266">Amy are you? </span></p>

<p class="speaker"><span class="line" data-starttime="2266"><span class="speakerName">Amy Unruh</span>: I'm sorry </span><span class="line" data-startTime="2266">what was the name? </span></p>

<p class="speaker"><span class="line" data-starttime="2267"><span class="speakerName">Audience</span>: HP Sense. </span><span class="line" data-startTime="2269">I mean, the Hewlett Packard, </span><span class="line" data-startTime="2269">they have the &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2272"><span class="speakerName">Amy Unruh</span>: Yeah. </span><span class="line" data-startTime="2274">I'm only familiar with </span><span class="line" data-startTime="2274">it a very high level. </span><span class="line" data-startTime="2277">So I probably can't comment. </span><span class="line" data-startTime="2279">It is certainly has similar </span><span class="line" data-startTime="2279">high level goal. </span><span class="line" data-startTime="2284">Although one thing I would add </span><span class="line" data-startTime="2284">is because we're cloud </span><span class="line" data-startTime="2288">platform Devereaux, we </span><span class="line" data-startTime="2288">particularly wanted to build </span><span class="line" data-startTime="2292">this system on top of the </span><span class="line" data-startTime="2292">Google Cloud platform. </span><span class="line" data-startTime="2295">So that was this part of </span><span class="line" data-startTime="2295">our motivation for </span><span class="line" data-startTime="2297">doing it how we did. </span></p>

<p class="speaker"><span class="line" data-starttime="2302"><span class="speakerName">Audience</span>: Will BigQuery data </span><span class="line" data-startTime="2302">be available as part of </span><span class="line" data-startTime="2305">samples of the BigQuery, like </span><span class="line" data-startTime="2305">other sample tables? </span></p>

<p class="speaker"><span class="line" data-starttime="2310"><span class="speakerName">Amy Unruh</span>: Yes, we're </span><span class="line" data-startTime="2310">making that the </span><span class="line" data-startTime="2312">BigQuery data set public. </span><span class="line" data-startTime="2314">It is already public. </span><span class="line" data-startTime="2315">And if you go to the &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2317"><span class="speakerName">Kim Cameron</span>: Yeah, so, and I </span><span class="line" data-startTime="2317">apologize for the slide not </span><span class="line" data-startTime="2320">being full screen. </span><span class="line" data-startTime="2321">But if go to the kiosk you can </span><span class="line" data-startTime="2321">have access to the website and </span><span class="line" data-startTime="2324">you can even mess around </span><span class="line" data-startTime="2324">with it there. </span><span class="line" data-startTime="2326">And there's instructions on </span><span class="line" data-startTime="2326">the home page of that they </span><span class="line" data-startTime="2328">tell you where the data set </span><span class="line" data-startTime="2328">is, what is called. </span><span class="line" data-startTime="2331">There's a screen shot. </span><span class="line" data-startTime="2332">It's very easy to find. </span><span class="line" data-startTime="2333">You can access it now. </span></p>

<p class="speaker"><span class="line" data-starttime="2334"><span class="speakerName">Audience</span>: Great, thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2335"><span class="speakerName">Amy Unruh</span>: At a later point </span><span class="line" data-startTime="2335">we'll open source the code </span><span class="line" data-startTime="2338">that we did. </span><span class="line" data-startTime="2339">That probably is a couple </span><span class="line" data-startTime="2339">months down the road. </span></p>

<p class="speaker"><span class="line" data-starttime="2342"><span class="speakerName">Audience</span>: How did you place all </span><span class="line" data-startTime="2342">the mounts on the indoor </span><span class="line" data-startTime="2345">map kind of thing? </span><span class="line" data-startTime="2346">Like how did you position </span><span class="line" data-startTime="2346">the locations? </span><span class="line" data-startTime="2350">Are those real-time updating </span><span class="line" data-startTime="2350">if the position changes? </span></p>

<p class="speaker"><span class="line" data-starttime="2354"><span class="speakerName">Kim Cameron</span>: Yeah, so the </span><span class="line" data-startTime="2354">question was regarding how do </span><span class="line" data-startTime="2356">we replace the motes </span><span class="line" data-startTime="2356">on the map. </span><span class="line" data-startTime="2358">And, correct me if I'm wrong, </span><span class="line" data-startTime="2358">Alistair, but I believe that </span><span class="line" data-startTime="2361">they had to do this manually. </span><span class="line" data-startTime="2363">So when they'd place a mote, </span><span class="line" data-startTime="2363">they would actually &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2365"><span class="speakerName">Amy Unruh</span>: Well I'm not </span><span class="line" data-startTime="2365">entirely manually. </span><span class="line" data-startTime="2367">We actually wrote a user </span><span class="line" data-startTime="2367">interface to facilitate that </span><span class="line" data-startTime="2371">for them a little bit. </span><span class="line" data-startTime="2371">So in fact, we used </span><span class="line" data-startTime="2371">the Maps API. </span><span class="line" data-startTime="2374">And they could drag </span><span class="line" data-startTime="2374">motes around. </span><span class="line" data-startTime="2376">And that helped quite a bit. </span><span class="line" data-startTime="2378">But there still was some hand </span><span class="line" data-startTime="2378">typing in of some long strings </span><span class="line" data-startTime="2383">of names and things like that. </span></p>

<p class="speaker"><span class="line" data-starttime="2385"><span class="speakerName">Audience</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="2387"><span class="speakerName">Kim Cameron</span>: All right, </span><span class="line" data-startTime="2387">we have time </span><span class="line" data-startTime="2388">for one more question. </span><span class="line" data-startTime="2389">Yes. </span></p>

<p class="speaker"><span class="line" data-starttime="2389"><span class="speakerName">Audience</span>: Thank you. </span><span class="line" data-startTime="2390">When you are loading data up to </span><span class="line" data-startTime="2390">BigQuery, are you able to </span><span class="line" data-startTime="2393">append to the existing </span><span class="line" data-startTime="2393">data sets. </span><span class="line" data-startTime="2395">Do you have to replace them? </span></p>

<p class="speaker"><span class="line" data-starttime="2397"><span class="speakerName">Kim Cameron</span>: I'm not sure </span><span class="line" data-startTime="2397">what we're doing in </span><span class="line" data-startTime="2399">this specific case. </span><span class="line" data-startTime="2400">You can append data. </span></p>

<p class="speaker"><span class="line" data-starttime="2401"><span class="speakerName">Amy Unruh</span>: We are appending. </span><span class="line" data-startTime="2402">It's just one, big table. </span><span class="line" data-startTime="2404">And by BigQuery standards. </span><span class="line" data-startTime="2407">This is many, many megs. </span><span class="line" data-startTime="2408">By BigQuery standards </span><span class="line" data-startTime="2408">it is really not </span><span class="line" data-startTime="2410">breaking a sweat at all. </span><span class="line" data-startTime="2412">This could be many, many </span><span class="line" data-startTime="2412">gigabytes and it </span><span class="line" data-startTime="2415">would still be happy. </span><span class="line" data-startTime="2416">So for the entire course of this </span><span class="line" data-startTime="2416">conference it's all just </span><span class="line" data-startTime="2420">going into one big table. </span></p>

<p class="speaker"><span class="line" data-starttime="2422"><span class="speakerName">Kim Cameron</span>: Thank </span><span class="line" data-startTime="2422">you, everyone. </span></p>