<p class="speaker"><span class="line" data-starttime="8"><span class="speakerName">Paul Irish</span>: Yeah, OK. </span> <span class="line" data-startTime="9">So let's start. </span> <span class="line" data-startTime="11">So I'm going to talk a little </span><span class="line" data-startTime="11">bit about the tools that are </span><span class="line" data-startTime="13">available to identify and </span><span class="line" data-startTime="13">improve some of the things </span><span class="line" data-startTime="17">that we actually saw tonight. </span> <span class="line" data-startTime="21">And to start off, I want to kind </span><span class="line" data-startTime="21">of separate some of the </span><span class="line" data-startTime="25">performance ideas into </span><span class="line" data-startTime="25">two separate buckets. </span> <span class="line" data-startTime="28">If this works for you guys. </span> <span class="line" data-startTime="30">I don't know. </span> <span class="line" data-startTime="30">It seems kind of OK. </span> <span class="line" data-startTime="32">The user experience of </span><span class="line" data-startTime="32">performance is mostly separate </span><span class="line" data-startTime="35">into things. </span> <span class="line" data-startTime="36">Like, give me the damn thing </span><span class="line" data-startTime="36">that I wanted, and now that I </span><span class="line" data-startTime="39">have it, I want to interact </span><span class="line" data-startTime="39">with it really nicely. </span></p>

<p><span class="line" data-startTime="42">So, and give me the damn thing I </span><span class="line" data-startTime="42">wanted it's page load, often </span><span class="line" data-startTime="46">abbreviated as PLT, </span><span class="line" data-startTime="46">page load time. </span> <span class="line" data-startTime="48">In here we're talking about </span><span class="line" data-startTime="48">things like the network </span><span class="line" data-startTime="50">waterfall, getting image assets </span><span class="line" data-startTime="50">that are appropriately </span><span class="line" data-startTime="52">sized, non-blocking delivery of </span><span class="line" data-startTime="52">all of our assets, getting </span><span class="line" data-startTime="57">the CSS that we need to render </span><span class="line" data-startTime="57">the top of the page, quickly </span><span class="line" data-startTime="61">and not much else, and </span><span class="line" data-startTime="61">also fonts, can we </span><span class="line" data-startTime="66">see the text quickly. </span> <span class="line" data-startTime="67">When we're talking about runtime </span><span class="line" data-startTime="67">performance we'll talk </span><span class="line" data-startTime="69">about, like, I want to interact </span><span class="line" data-startTime="69">with the page, I want </span><span class="line" data-startTime="71">to click a button and see that </span><span class="line" data-startTime="71">response very quickly. </span> <span class="line" data-startTime="74">Any sort of transitions, </span><span class="line" data-startTime="74">animations when I'm scrolling, </span><span class="line" data-startTime="78">does it stick to my finger? </span><span class="line" data-startTime="80">Like, I am scrolling with my </span><span class="line" data-startTime="80">finger on the device and it </span><span class="line" data-startTime="84">should just be moving </span><span class="line" data-startTime="84">immediately with things. </span></p>

<p><span class="line" data-startTime="88">What we heard about with memory </span><span class="line" data-startTime="88">leaks and garbage </span><span class="line" data-startTime="90">collection, and also JavaScript </span><span class="line" data-startTime="90">based innovation </span><span class="line" data-startTime="93">like with request </span><span class="line" data-startTime="93">animation frame. </span> <span class="line" data-startTime="95">But, to show a little bit more </span><span class="line" data-startTime="95">about this stuff, I kind of </span><span class="line" data-startTime="99">want to take an example. </span> <span class="line" data-startTime="100">So we're going to start </span><span class="line" data-startTime="100">off with a demo. </span> <span class="line" data-startTime="103">This is a site for a festival </span><span class="line" data-startTime="103">in Canada, and it's the </span><span class="line" data-startTime="110">Canadian National Exhibition. </span> <span class="line" data-startTime="112">So we're actually just going </span><span class="line" data-startTime="112">to go over to the site now, </span><span class="line" data-startTime="114">the live site, and we're </span><span class="line" data-startTime="114">going to play around. </span> <span class="line" data-startTime="116">I'm actually going to do it </span><span class="line" data-startTime="116">here in Chrome Canary. </span> <span class="line" data-startTime="122">OK. </span> <span class="line" data-startTime="122">Cool. </span> <span class="line" data-startTime="124">So how does this look? </span><span class="line" data-startTime="127">Oh, it's too wide. </span> <span class="line" data-startTime="129">OK. </span> <span class="line" data-startTime="130">That seems good. </span> <span class="line" data-startTime="132">So, Canadian National </span><span class="line" data-startTime="132">Exhibition. </span> <span class="line" data-startTime="135">My friend Mike Taylor who works </span><span class="line" data-startTime="135">for Firefox found this </span><span class="line" data-startTime="139">site and he said, I defy you to </span><span class="line" data-startTime="139">find a site that is jankier </span><span class="line" data-startTime="142">in its scroll. </span> <span class="line" data-startTime="143">And I was like, I know </span><span class="line" data-startTime="143">of a site, actually. </span></p>

<p><span class="line" data-startTime="146">So like this one, what is it? </span><span class="line" data-startTime="149">Inception explained, is it? </span><span class="line" data-startTime="156">Is this it? </span><span class="line" data-startTime="157">It's really bad. </span> <span class="line" data-startTime="158">It is &mdash; so Paul mentioned </span><span class="line" data-startTime="158">parallax sites before. </span> <span class="line" data-startTime="162">Parallax sites can get into </span><span class="line" data-startTime="162">trouble really fast, and this </span><span class="line" data-startTime="165">site is so cool, but the frame </span><span class="line" data-startTime="165">rate on this is just so poor. </span> <span class="line" data-startTime="173">It's rough. </span> <span class="line" data-startTime="174">But let me go back to what </span><span class="line" data-startTime="174">I was talking about. </span> <span class="line" data-startTime="176">So Canadian National </span><span class="line" data-startTime="176">Exhibition. </span> <span class="line" data-startTime="178">So here we are. </span> <span class="line" data-startTime="179">We got some things happening. </span> <span class="line" data-startTime="180">We got this [INAUDIBLE] </span><span class="line" data-startTime="180">background, full </span><span class="line" data-startTime="182">bleed in the back. </span> <span class="line" data-startTime="183">This header that kind of moves, </span><span class="line" data-startTime="186">scrolls up as I go down. </span> <span class="line" data-startTime="187">But let's actually look in the </span><span class="line" data-startTime="187">tools to see what we're </span><span class="line" data-startTime="189">talking about. </span> <span class="line" data-startTime="191">All right. </span></p>

<p><span class="line" data-startTime="191">So first thing, I'm just going </span><span class="line" data-startTime="191">to turn off this debug mode I </span><span class="line" data-startTime="193">had on earlier. </span> <span class="line" data-startTime="194">And always first thing, go to </span><span class="line" data-startTime="194">Timeline, start recording. </span> <span class="line" data-startTime="199">I use Command E and we just </span><span class="line" data-startTime="199">kind of scroll up an down. </span> <span class="line" data-startTime="203">OK. </span> <span class="line" data-startTime="204">So we're seeing a lot </span><span class="line" data-startTime="204">of activity already. </span> <span class="line" data-startTime="206">All right? </span><span class="line" data-startTime="208">A lot of stuff. </span> <span class="line" data-startTime="209">We're seeing mostly </span><span class="line" data-startTime="209">purple, right? </span><span class="line" data-startTime="211">I'm scrolling in on this area </span><span class="line" data-startTime="211">just to kind of get a better </span><span class="line" data-startTime="215">zoom, and it looks like Recalc </span><span class="line" data-startTime="215">Style is consuming a lot of </span><span class="line" data-startTime="220">each of these frames. </span></p>

<p><span class="line" data-startTime="222">So, OK. </span> <span class="line" data-startTime="223">Recalc Style. </span> <span class="line" data-startTime="225">Some things could be </span><span class="line" data-startTime="225">happening, I'm </span><span class="line" data-startTime="226">not really sure what. </span> <span class="line" data-startTime="227">So we hover on the item and we </span><span class="line" data-startTime="227">can see the JavaScript call </span><span class="line" data-startTime="231">stack is associated with us. </span> <span class="line" data-startTime="232">So the last thing that happened </span><span class="line" data-startTime="232">was here inside </span><span class="line" data-startTime="235">Remove Class inside jQuery. </span> <span class="line" data-startTime="238">OK. </span> <span class="line" data-startTime="238">So I'm going to click that </span><span class="line" data-startTime="238">just to find out </span><span class="line" data-startTime="240">what exactly it was. </span> <span class="line" data-startTime="241">We're minified here. </span> <span class="line" data-startTime="243">OK. </span> <span class="line" data-startTime="243">We'll pretty print down </span><span class="line" data-startTime="243">at the bottom. </span></p>

<p><span class="line" data-startTime="246">Looks good. </span> <span class="line" data-startTime="247">Now I'm going to come back and </span><span class="line" data-startTime="247">just repeat that click again. </span> <span class="line" data-startTime="250">OK. </span> <span class="line" data-startTime="251">Cool. </span> <span class="line" data-startTime="251">So now we repeat the click </span><span class="line" data-startTime="251">and it brings me </span><span class="line" data-startTime="253">to the exact place. </span> <span class="line" data-startTime="255">I really like it when the cursor </span><span class="line" data-startTime="255">does it's pretty thing. </span> <span class="line" data-startTime="260">So it brings me right to the </span><span class="line" data-startTime="260">class name assignment. </span> <span class="line" data-startTime="264">So there's a setting in the </span><span class="line" data-startTime="264">class name on an element, and </span><span class="line" data-startTime="267">that is what triggered </span><span class="line" data-startTime="267">the recalc style. </span> <span class="line" data-startTime="271">OK. </span> <span class="line" data-startTime="271">That's good to know. </span> <span class="line" data-startTime="272">Now let's find out why </span><span class="line" data-startTime="272">that happened. </span></p>

<p><span class="line" data-startTime="274">We look down into </span><span class="line" data-startTime="274">the user code. </span> <span class="line" data-startTime="276">And so here we go </span><span class="line" data-startTime="276">inside CNE.js. </span> <span class="line" data-startTime="281">Let me try clicking </span><span class="line" data-startTime="281">that once again. </span> <span class="line" data-startTime="285">Line 33, ah, ooh, ah. </span> <span class="line" data-startTime="289">Remember how Paul might have </span><span class="line" data-startTime="289">mentioned do as little as you </span><span class="line" data-startTime="292">can inside your scroll </span><span class="line" data-startTime="292">handlers? </span><span class="line" data-startTime="294">So inside their scroll handler </span><span class="line" data-startTime="294">they get the height of the </span><span class="line" data-startTime="297">window, the scroll top, they do </span><span class="line" data-startTime="297">a little bit of math, and </span><span class="line" data-startTime="299">then they toggle some classes </span><span class="line" data-startTime="299">on the HTML element in every </span><span class="line" data-startTime="304">single scroll. </span> <span class="line" data-startTime="306">Toggle, toggle, toggle, </span><span class="line" data-startTime="306">toggle. </span> <span class="line" data-startTime="309">Not great. </span></p>

<p><span class="line" data-startTime="310">Certainly not great. </span> <span class="line" data-startTime="312">But we can make this better. </span> <span class="line" data-startTime="314">So I'm going to &mdash; </span><span class="line" data-startTime="317">so the best way to do this </span><span class="line" data-startTime="317">is &mdash; you can see it's a </span><span class="line" data-startTime="319">conditional toggleClass, </span><span class="line" data-startTime="319">right? </span><span class="line" data-startTime="321">You're using the second argument </span><span class="line" data-startTime="321">inside jQuery's </span><span class="line" data-startTime="323">toggleClass. </span> <span class="line" data-startTime="324">They conditionally change </span><span class="line" data-startTime="324">it depending on that </span><span class="line" data-startTime="326">math working out. </span> <span class="line" data-startTime="329">So that's OK. </span> <span class="line" data-startTime="329">So, ideally, you set this in an </span><span class="line" data-startTime="329">F block, and you only touch </span><span class="line" data-startTime="333">the DOM if you satisfy </span><span class="line" data-startTime="333">that requirement. </span> <span class="line" data-startTime="335">That makes a bit more sense. </span> <span class="line" data-startTime="337">We could actually change things </span><span class="line" data-startTime="337">a little bit, so I'm </span><span class="line" data-startTime="339">just going to edit the </span><span class="line" data-startTime="339">JavaScript right here. </span> <span class="line" data-startTime="343">Oh, oh, one sec. </span></p>

<p><span class="line" data-startTime="345">This is OK. </span> <span class="line" data-startTime="347">All right. </span> <span class="line" data-startTime="347">I'm going to edit the JavaScript </span><span class="line" data-startTime="347">right here so I'm </span><span class="line" data-startTime="349">just going to back space &mdash; </span><span class="line" data-startTime="349">oh, come on. </span> <span class="line" data-startTime="355">All right. </span> <span class="line" data-startTime="355">Cool. </span> <span class="line" data-startTime="358">And we're just going to get the </span><span class="line" data-startTime="358">DOM element itself, and </span><span class="line" data-startTime="360">then we're going to use the </span><span class="line" data-startTime="360">classList from HML5. </span> <span class="line" data-startTime="364">And turns out, classList toggle </span><span class="line" data-startTime="364">actually has the exact </span><span class="line" data-startTime="367">same method signature as </span><span class="line" data-startTime="367">jQuery's toggleClass. </span> <span class="line" data-startTime="371">And now I'm just going to hit </span><span class="line" data-startTime="371">Command S and Chrome is just </span><span class="line" data-startTime="375">going to update that function </span><span class="line" data-startTime="375">on the fly. </span> <span class="line" data-startTime="378">Which is pretty cool. </span> <span class="line" data-startTime="379">So then we're going to go back </span><span class="line" data-startTime="379">to Timeline and I'll start </span><span class="line" data-startTime="382">recording again and </span><span class="line" data-startTime="382">repeat my action. </span> <span class="line" data-startTime="386">Yeah. </span> <span class="line" data-startTime="387">Nice. </span></p>

<p><span class="line" data-startTime="388">Pretty sweet. </span> <span class="line" data-startTime="389">So here we are. </span> <span class="line" data-startTime="390">We do not have massive recalc </span><span class="line" data-startTime="390">style anymore, but we do have </span><span class="line" data-startTime="394">some green paint going on. </span> <span class="line" data-startTime="397">Hmmm. </span> <span class="line" data-startTime="398">Now, on this device, I am still </span><span class="line" data-startTime="398">hitting mostly 60 FPS so </span><span class="line" data-startTime="403">that's kind of OK. </span> <span class="line" data-startTime="405">But on mobile devices I </span><span class="line" data-startTime="405">certainly would not be. </span> <span class="line" data-startTime="408">I want to see if I </span><span class="line" data-startTime="408">can do anything </span><span class="line" data-startTime="409">about this paint first. </span> <span class="line" data-startTime="411">So, first things first, I'm </span><span class="line" data-startTime="411">going to come over into the </span><span class="line" data-startTime="414">Settings and turn on Show </span><span class="line" data-startTime="414">Paint Rectangles. </span> <span class="line" data-startTime="416">And usually, when I do this, </span><span class="line" data-startTime="416">I like to turn on the Show </span><span class="line" data-startTime="419">Composited Layer Borders </span><span class="line" data-startTime="419">at the same time. </span> <span class="line" data-startTime="422">Kind of go hand in hand. </span> <span class="line" data-startTime="424">So, bring DevTools down a little </span><span class="line" data-startTime="424">bit and now I'm just </span><span class="line" data-startTime="427">going to scroll up and down. </span></p>

<p><span class="line" data-startTime="428">So my paint recs are in a red, </span><span class="line" data-startTime="428">and we're seeing things. </span> <span class="line" data-startTime="434">A lot going on, but I can </span><span class="line" data-startTime="434">definitely see up top, this </span><span class="line" data-startTime="437">section, the header is </span><span class="line" data-startTime="437">just in red non-stop. </span> <span class="line" data-startTime="442">Now, the reason why is because </span><span class="line" data-startTime="442">the header is position fixed, </span><span class="line" data-startTime="446">and the content is moving </span><span class="line" data-startTime="446">beneath it. </span> <span class="line" data-startTime="450">But that is &mdash; </span><span class="line" data-startTime="452">that's not going to work. </span> <span class="line" data-startTime="455">So it's basically repainting </span><span class="line" data-startTime="455">this, even </span><span class="line" data-startTime="456">though it really shouldn't. </span> <span class="line" data-startTime="457">It knows what that looks </span><span class="line" data-startTime="457">like, right? </span><span class="line" data-startTime="459">So the trick here is what? </span><span class="line" data-startTime="463">What's the fix for this fixed </span><span class="line" data-startTime="463">position element? </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="467"><span class="speakerName">Audience</span>: Translate(Z)? </span></p>

<p class="speaker"><span class="line" data-starttime="468"><span class="speakerName">Paul Irish</span>: Ooooh, yeah! </span><span class="line" data-startTime="470">Translate(Z). </span> <span class="line" data-startTime="471">There it is. </span> <span class="line" data-startTime="474">I'm like, I'm excited to </span><span class="line" data-startTime="474">type it and then I </span><span class="line" data-startTime="477">also, like, dread it. </span> <span class="line" data-startTime="478">It's like a combination </span><span class="line" data-startTime="478">of things, really. </span> <span class="line" data-startTime="480">OK, OK. </span> <span class="line" data-startTime="482">Webkit-transform translate(Z). </span> <span class="line" data-startTime="485">Oh, my friend. </span> <span class="line" data-startTime="487">Some people do like the 3D </span><span class="line" data-startTime="487">version, but then you have to </span><span class="line" data-startTime="490">do zero, comma, zero, comma. </span> <span class="line" data-startTime="492">This is my favorite. </span> <span class="line" data-startTime="494">All right. </span> <span class="line" data-startTime="495">So I got that in, I promoted the </span><span class="line" data-startTime="495">layer and, in fact, there </span><span class="line" data-startTime="498">is now this little gold </span><span class="line" data-startTime="498">border around the top. </span></p>

<p><span class="line" data-startTime="502">And let's see if I can &mdash; </span><span class="line" data-startTime="504">if I just toggle this you can </span><span class="line" data-startTime="504">see that gold border coming on </span><span class="line" data-startTime="507">and off because that </span><span class="line" data-startTime="507">is now a layer. </span> <span class="line" data-startTime="510">All right. </span> <span class="line" data-startTime="510">So we're going to </span><span class="line" data-startTime="510">put it back on. </span> <span class="line" data-startTime="513">And if I scroll up here &mdash; </span><span class="line" data-startTime="513">oh, cool, yeah. </span> <span class="line" data-startTime="515">We do not paint that. </span> <span class="line" data-startTime="518">But then we get about </span><span class="line" data-startTime="518">here and it moves, </span><span class="line" data-startTime="522">and we see that paint. </span> <span class="line" data-startTime="524">And actually, let's fix this. </span> <span class="line" data-startTime="526">So the movement is here &mdash; </span><span class="line" data-startTime="528">top &mdash; we just move the top. </span> <span class="line" data-startTime="532">Now what's probably a better way </span><span class="line" data-startTime="532">of moving this top other </span><span class="line" data-startTime="535">than just changing position </span><span class="line" data-startTime="535">absolute? </span><span class="line" data-startTime="537">If we want to move an element? </span></p>

<p class="speaker"><span class="line" data-starttime="539"><span class="speakerName">Audience</span>: Translate. </span></p>

<p class="speaker"><span class="line" data-starttime="540"><span class="speakerName">Paul Irish</span>: Translate. </span> <span class="line" data-startTime="541">Yeah, sounds good. </span> <span class="line" data-startTime="542">Let's do a transform </span><span class="line" data-startTime="542">translate. </span> <span class="line" data-startTime="544">All right. </span> <span class="line" data-startTime="544">So WebKit and &mdash; </span><span class="line" data-startTime="547">well, WebKit and Blink still </span><span class="line" data-startTime="547">have prefixed transform, so we </span><span class="line" data-startTime="551">will do that. </span> <span class="line" data-startTime="552">Hop over here and do </span><span class="line" data-startTime="552">a Translate(Y). </span> <span class="line" data-startTime="556">And that seems to work. </span> <span class="line" data-startTime="558">And since I have a CSS </span><span class="line" data-startTime="558">transition down here, I should </span><span class="line" data-startTime="561">probably update that. </span> <span class="line" data-startTime="565">Ah, OK. </span> <span class="line" data-startTime="567">Now that's a bit nicer. </span> <span class="line" data-startTime="569">I still do see red. </span> <span class="line" data-startTime="571">Hmmm. </span> <span class="line" data-startTime="573">Let's see if &mdash; ah, yes. </span></p>

<p><span class="line" data-startTime="576">Is that right? </span><span class="line" data-startTime="579">You know &mdash; </span><span class="line" data-startTime="582">ahh, oooh, ahh. </span> <span class="line" data-startTime="585">And it feels &mdash; </span><span class="line" data-startTime="585">I don't if it feels smoother </span><span class="line" data-startTime="585">to you, but it </span><span class="line" data-startTime="587">feels smoother to me. </span> <span class="line" data-startTime="588">It feels good. </span> <span class="line" data-startTime="589">All right. </span> <span class="line" data-startTime="590">So that's pretty good. </span> <span class="line" data-startTime="591">And let's take a look over </span><span class="line" data-startTime="591">in the Timeline. </span> <span class="line" data-startTime="595">All right. </span> <span class="line" data-startTime="596">Cool. </span> <span class="line" data-startTime="596">So, in general, in the </span><span class="line" data-startTime="596">middle, we got, like, </span><span class="line" data-startTime="598">nothing going on. </span> <span class="line" data-startTime="599">We got a little bit of paint up </span><span class="line" data-startTime="599">when I'm going between the </span><span class="line" data-startTime="602">top or when a new image </span><span class="line" data-startTime="602">is coming in. </span></p>

<p><span class="line" data-startTime="604">That's pretty good. </span> <span class="line" data-startTime="607">So that's a little bit of things </span><span class="line" data-startTime="607">that we can do inside </span><span class="line" data-startTime="610">the DevTools. </span> <span class="line" data-startTime="611">I actually made a video showing </span><span class="line" data-startTime="611">kind of taking this </span><span class="line" data-startTime="613">all the way. </span> <span class="line" data-startTime="613">The background has a fixed </span><span class="line" data-startTime="613">position and we can actually </span><span class="line" data-startTime="615">move that to the body element </span><span class="line" data-startTime="615">and get some wins there. </span> <span class="line" data-startTime="620">But I'm going to come back </span><span class="line" data-startTime="620">to my slides first. </span> <span class="line" data-startTime="623">Slides first. </span> <span class="line" data-startTime="625">Oh, yeah. </span> <span class="line" data-startTime="626">All right. </span> <span class="line" data-startTime="626">So I want to walk through some </span><span class="line" data-startTime="626">of those operations that we </span><span class="line" data-startTime="628">are seeing. </span> <span class="line" data-startTime="628">Recalc Style. </span> <span class="line" data-startTime="630">So what's happening inside </span><span class="line" data-startTime="630">recalc style is it is getting </span><span class="line" data-startTime="633">all the style rules that </span><span class="line" data-startTime="633">affect the page. </span> <span class="line" data-startTime="636">This is anything inside a style </span><span class="line" data-startTime="636">sheet, an inline style, </span><span class="line" data-startTime="640">the user agent style sheet. </span></p>

<p><span class="line" data-startTime="641">It's getting all the style </span><span class="line" data-startTime="641">rules, it's bringing them into </span><span class="line" data-startTime="644">an object model, then it takes </span><span class="line" data-startTime="644">all those selectors that you </span><span class="line" data-startTime="647">got hanging around and </span><span class="line" data-startTime="647">matches those against </span><span class="line" data-startTime="648">what's in the DOM. </span> <span class="line" data-startTime="649">It says, oh, yeah it is </span><span class="line" data-startTime="649">that one right there. </span> <span class="line" data-startTime="651">Yes, uh huh. </span> <span class="line" data-startTime="652">The selector matching. </span> <span class="line" data-startTime="653">Now, as Paul said, happens </span><span class="line" data-startTime="653">really fast. </span> <span class="line" data-startTime="656">Usually in recalc style, the </span><span class="line" data-startTime="656">selector matching takes up </span><span class="line" data-startTime="658">about 10% of the general </span><span class="line" data-startTime="658">purple bar. </span> <span class="line" data-startTime="662">Not very much. </span> <span class="line" data-startTime="662">Don't worry about it. </span> <span class="line" data-startTime="664">Now that it has that mass </span><span class="line" data-startTime="664">against the DOM, it calculates </span><span class="line" data-startTime="666">the computed style for every </span><span class="line" data-startTime="666">single DOM element. </span> <span class="line" data-startTime="669">So you know in JavaScript when </span><span class="line" data-startTime="669">you ask for a Get Computed </span><span class="line" data-startTime="670">Style, it's doing that. </span> <span class="line" data-startTime="672">But for every CSS property, for </span><span class="line" data-startTime="672">every element, it figures </span><span class="line" data-startTime="675">out how things should look. </span> <span class="line" data-startTime="676">Makes sense. </span></p>

<p><span class="line" data-startTime="677">OK. </span> <span class="line" data-startTime="678">Moving on to layout. </span> <span class="line" data-startTime="680">Layout is the geometry </span><span class="line" data-startTime="680">of the page. </span> <span class="line" data-startTime="682">And I want to show kind of one </span><span class="line" data-startTime="682">way to look at layout. </span> <span class="line" data-startTime="685">So I'll open up this little </span><span class="line" data-startTime="685">demo right here and &mdash; </span><span class="line" data-startTime="692">come on. </span> <span class="line" data-startTime="694">Jsbin server is in </span><span class="line" data-startTime="694">the UK isn't it? </span></p>

<p class="speaker"><span class="line" data-starttime="697"><span class="speakerName">Audience</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="698"><span class="speakerName">Paul Irish</span>: Yeah. </span> <span class="line" data-startTime="701">It's like looking at </span><span class="line" data-startTime="701">a loaded spinner. </span> <span class="line" data-startTime="702">All right, cool. </span> <span class="line" data-startTime="704">So I'm going to click these </span><span class="line" data-startTime="704">buttons like that. </span> <span class="line" data-startTime="708">Now, what I'm going to do is I'm </span><span class="line" data-startTime="708">going to hit Switch Layout </span><span class="line" data-startTime="711">and we're going to start </span><span class="line" data-startTime="711">this animation. </span> <span class="line" data-startTime="714">Now, if I open up Timeline and </span><span class="line" data-startTime="714">record, you can see that as </span><span class="line" data-startTime="719">that animation's happening, </span><span class="line" data-startTime="719">we're getting a </span><span class="line" data-startTime="722">lot of layout costs. </span> <span class="line" data-startTime="724">And that makes sense because </span><span class="line" data-startTime="724">layout is reevaluating the </span><span class="line" data-startTime="728">geometry of the page. </span> <span class="line" data-startTime="730">And this sort of animation here </span><span class="line" data-startTime="730">has to figure out this </span><span class="line" data-startTime="734">new text flow, and when the text </span><span class="line" data-startTime="734">flows then we get a new </span><span class="line" data-startTime="740">height for where person </span><span class="line" data-startTime="740">two starts and </span><span class="line" data-startTime="741">person three starts. </span> <span class="line" data-startTime="743">And it's a lot of work to figure </span><span class="line" data-startTime="743">out that new geometry. </span></p>

<p><span class="line" data-startTime="745">And it happens every single </span><span class="line" data-startTime="745">frame of that animation. </span> <span class="line" data-startTime="749">It's a bit expensive. </span> <span class="line" data-startTime="751">Now, the next thing </span><span class="line" data-startTime="751">after layout is </span><span class="line" data-startTime="754">determined, is paint. </span> <span class="line" data-startTime="755">We heard a lot about </span><span class="line" data-startTime="755">this from Paul. </span> <span class="line" data-startTime="757">Paint hurts a lot on </span><span class="line" data-startTime="757">low-end devices. </span> <span class="line" data-startTime="760">Old Android phones with not a </span><span class="line" data-startTime="760">lot of hardware have a tough </span><span class="line" data-startTime="765">time updating anything when it </span><span class="line" data-startTime="765">requires paint on every frame. </span> <span class="line" data-startTime="769">Debugging this with continuous </span><span class="line" data-startTime="769">paint mode is probably one of </span><span class="line" data-startTime="772">the best ways to do it. </span></p>

<p><span class="line" data-startTime="773">So I'm going to show </span><span class="line" data-startTime="773">that real quickly. </span> <span class="line" data-startTime="777">I said real quickly and then </span><span class="line" data-startTime="777">I loaded up a Jsbin URL. </span> <span class="line" data-startTime="781">Come on, England. </span> <span class="line" data-startTime="783">Come to me, the bits. </span> <span class="line" data-startTime="787">All right. </span> <span class="line" data-startTime="789">Handy trick. </span> <span class="line" data-startTime="790">DevTools, at the bottom, you </span><span class="line" data-startTime="790">might like it on the right. </span> <span class="line" data-startTime="792">You can just take the bar here </span><span class="line" data-startTime="792">and drag it up to the &mdash; </span><span class="line" data-startTime="800">you can also click the button. </span> <span class="line" data-startTime="803">Great. </span> <span class="line" data-startTime="805">I have a lot of DevTools </span><span class="line" data-startTime="805">extensions and I'm just going </span><span class="line" data-startTime="808">to make excuses. </span> <span class="line" data-startTime="808">OK. </span> <span class="line" data-startTime="811">You might have noticed inside of </span><span class="line" data-startTime="811">Chrome Canary that I have &mdash; </span><span class="line" data-startTime="818">wow. </span> <span class="line" data-startTime="819">Let's go back. </span> <span class="line" data-startTime="821">So we're here, we're looking at </span><span class="line" data-startTime="821">this page, we have lovely </span><span class="line" data-startTime="823">boxes all over the place. </span> <span class="line" data-startTime="826">That's real good. </span> <span class="line" data-startTime="827">But we're going to turn on </span><span class="line" data-startTime="827">Continuous Paint mode. </span> <span class="line" data-startTime="832">Now, Continuous Paint mode </span><span class="line" data-startTime="832">basically says to Chrome, hey, </span><span class="line" data-startTime="836">I know you know what it looks </span><span class="line" data-startTime="836">like, but I just want you to </span><span class="line" data-startTime="840">tell me what it looks like again </span><span class="line" data-startTime="840">and again and again and </span><span class="line" data-startTime="842">again and again. </span> <span class="line" data-startTime="843">So it's just going to repaint </span><span class="line" data-startTime="843">everything that </span><span class="line" data-startTime="845">needs to get painted. </span> <span class="line" data-startTime="846">So if I look at Timeline, it </span><span class="line" data-startTime="846">is just doing the same work </span><span class="line" data-startTime="849">over and over again. </span></p>

<p><span class="line" data-startTime="853">But what this allows us to do </span><span class="line" data-startTime="853">is make some changes and see </span><span class="line" data-startTime="856">how it affects that </span><span class="line" data-startTime="856">graph up there. </span> <span class="line" data-startTime="857">So right now we're looking at </span><span class="line" data-startTime="857">eight milliseconds or so per </span><span class="line" data-startTime="863">paint of the entire page. </span> <span class="line" data-startTime="866">Now we can try some </span><span class="line" data-startTime="866">different things. </span> <span class="line" data-startTime="869">So maybe I'm going to </span><span class="line" data-startTime="869">come over here and </span><span class="line" data-startTime="872">toggle the box shadows. </span> <span class="line" data-startTime="873">So I turn on box shadows and you </span><span class="line" data-startTime="873">can see pretty quickly &mdash; </span><span class="line" data-startTime="876">sorry about that &mdash; </span><span class="line" data-startTime="878">paint time dives really, </span><span class="line" data-startTime="878">really high. </span> <span class="line" data-startTime="883">So the box shadow is adding </span><span class="line" data-startTime="883">quite a bit to how long it </span><span class="line" data-startTime="887">takes to paint the page. </span></p>

<p><span class="line" data-startTime="888">I also know that there's a </span><span class="line" data-startTime="888">border radius on these boxes. </span> <span class="line" data-startTime="892">I can try turning that off, </span><span class="line" data-startTime="892">see if that makes any </span><span class="line" data-startTime="894">difference. </span> <span class="line" data-startTime="896">It does make a slight </span><span class="line" data-startTime="896">difference, yeah? </span><span class="line" data-startTime="900">But this gives you an option to </span><span class="line" data-startTime="900">kind of figure out things. </span> <span class="line" data-startTime="903">Now, a handy trick when you're </span><span class="line" data-startTime="903">using continues painting mode </span><span class="line" data-startTime="906">is the H key hides </span><span class="line" data-startTime="906">DOM elements. </span> <span class="line" data-startTime="910">So you can kind of walk through </span><span class="line" data-startTime="910">you're DOM, hide </span><span class="line" data-startTime="912">things and see what </span><span class="line" data-startTime="912">the effect is. </span> <span class="line" data-startTime="914">So maybe you'll hide the header, </span><span class="line" data-startTime="914">kind of get that out </span><span class="line" data-startTime="917">of the way, and kind of bisect </span><span class="line" data-startTime="917">the DOM, figuring out where </span><span class="line" data-startTime="919">your costs are. </span> <span class="line" data-startTime="920">This H works all the time. </span> <span class="line" data-startTime="921">It's pretty handy. </span></p>

<p><span class="line" data-startTime="923">All right. </span> <span class="line" data-startTime="924">So that's Continuous Painting </span><span class="line" data-startTime="924">mode real quick. </span> <span class="line" data-startTime="927">I got a question recently, which </span><span class="line" data-startTime="927">is, there's all these </span><span class="line" data-startTime="929">operations inside the </span><span class="line" data-startTime="929">DevTools Timeline. </span> <span class="line" data-startTime="932">What is the order that </span><span class="line" data-startTime="932">I should see them in? </span><span class="line" data-startTime="936">And what we're looking at right </span><span class="line" data-startTime="936">here is, basically, it. </span> <span class="line" data-startTime="939">So a lot of times you start off </span><span class="line" data-startTime="939">with some JavaScript, it </span><span class="line" data-startTime="942">touches the DOM, it changes </span><span class="line" data-startTime="942">something, then the browser </span><span class="line" data-startTime="945">does have recalculate style, has </span><span class="line" data-startTime="945">to layout the page, has to </span><span class="line" data-startTime="948">paint it and probably composite </span><span class="line" data-startTime="948">some layers. </span> <span class="line" data-startTime="952">Ideally this is the flow and </span><span class="line" data-startTime="952">there's only one operation </span><span class="line" data-startTime="957">per, basically, paint. </span> <span class="line" data-startTime="959">Paint is the user got </span><span class="line" data-startTime="959">to see something. </span> <span class="line" data-startTime="962">When we were talking about </span><span class="line" data-startTime="962">layout thrashing before, </span><span class="line" data-startTime="964">layout thrashing is, oftentimes, </span><span class="line" data-startTime="964">we're doing a </span><span class="line" data-startTime="966">bunch of recalc style and then </span><span class="line" data-startTime="966">layout, and then recalc style, </span><span class="line" data-startTime="968">layout, recalc style, layout. </span></p>

<p><span class="line" data-startTime="969">And the user doesn't </span><span class="line" data-startTime="969">see anything. </span> <span class="line" data-startTime="971">There are no paints. </span> <span class="line" data-startTime="974">So ideally, you have only </span><span class="line" data-startTime="974">one layout per paint. </span> <span class="line" data-startTime="978">So here's a little cheat sheet </span><span class="line" data-startTime="978">for kind of taking action from </span><span class="line" data-startTime="981">what the Timeline </span><span class="line" data-startTime="981">is telling you. </span> <span class="line" data-startTime="983">If the Timeline is telling </span><span class="line" data-startTime="983">you, oh, my god, lots of </span><span class="line" data-startTime="986">yellow, there's so much time </span><span class="line" data-startTime="986">being spent inside JavaScript. </span> <span class="line" data-startTime="989">I should point out that that </span><span class="line" data-startTime="989">Canadian expo site &mdash; </span><span class="line" data-startTime="994">remember when I profiled </span><span class="line" data-startTime="994">it before? </span><span class="line" data-startTime="995">Was there any yellow </span><span class="line" data-startTime="995">at all in it? </span><span class="line" data-startTime="997">No. </span> <span class="line" data-startTime="998">There was no JavaScript at all </span><span class="line" data-startTime="998">slowing down that site. </span> <span class="line" data-startTime="1001">It was all inside the </span><span class="line" data-startTime="1001">rendering inside. </span></p>

<p><span class="line" data-startTime="1003">But, if you're in a case where </span><span class="line" data-startTime="1003">you are in a lot of </span><span class="line" data-startTime="1005">JavaScript, you can use </span><span class="line" data-startTime="1005">the flame chart. </span> <span class="line" data-startTime="1008">I'm going to show this </span><span class="line" data-startTime="1008">really quickly. </span> <span class="line" data-startTime="1011">Who has seen the flame &mdash; </span><span class="line" data-startTime="1011">who has seen or </span><span class="line" data-startTime="1013">used the flame chart? </span><span class="line" data-startTime="1015">It's good. </span> <span class="line" data-startTime="1016">It's a powerful thing. </span> <span class="line" data-startTime="1016">So this is MathJax. </span> <span class="line" data-startTime="1019">And they're really good </span><span class="line" data-startTime="1019">polyfill for MathML. </span> <span class="line" data-startTime="1022">But I want to check out </span><span class="line" data-startTime="1022">how fast it can </span><span class="line" data-startTime="1026">render these things. </span> <span class="line" data-startTime="1027">So I'm going to turn off these, </span><span class="line" data-startTime="1027">come down here &mdash; and so </span><span class="line" data-startTime="1030">it's actually just rendering </span><span class="line" data-startTime="1030">this stuff out, and I can </span><span class="line" data-startTime="1033">choose to render it in </span><span class="line" data-startTime="1033">SVG or HTML CSS. </span> <span class="line" data-startTime="1037">Come over to Profiles and I'm </span><span class="line" data-startTime="1037">going to collect a JavaScript </span><span class="line" data-startTime="1042">CPU profile and record. </span></p>

<p><span class="line" data-startTime="1045">Change this. </span> <span class="line" data-startTime="1052">All right. </span> <span class="line" data-startTime="1052">Cool. </span> <span class="line" data-startTime="1053">Now, normally when you come into </span><span class="line" data-startTime="1053">the JavaScript profile </span><span class="line" data-startTime="1056">you see something like this. </span> <span class="line" data-startTime="1058">Just go down to the bottom </span><span class="line" data-startTime="1058">right there and </span><span class="line" data-startTime="1061">select flame chart. </span> <span class="line" data-startTime="1063">What is going to give you </span><span class="line" data-startTime="1063">is a view like this. </span> <span class="line" data-startTime="1066">And so this is a time based view </span><span class="line" data-startTime="1066">of JavaScript execution. </span> <span class="line" data-startTime="1070">And it progresses from left to </span><span class="line" data-startTime="1070">right over time just like you </span><span class="line" data-startTime="1074">expect in a timeline. </span></p>

<p><span class="line" data-startTime="1075">And in fact, if you want, you </span><span class="line" data-startTime="1075">can record on the Timeline and </span><span class="line" data-startTime="1078">on the JavaScript profiler </span><span class="line" data-startTime="1078">at the same time. </span> <span class="line" data-startTime="1081">But you see some spikes, you </span><span class="line" data-startTime="1081">want to go investigate what's </span><span class="line" data-startTime="1084">actually happening, and </span><span class="line" data-startTime="1084">so I'll take a look </span><span class="line" data-startTime="1087">at the SVG one first. </span> <span class="line" data-startTime="1092">So we can see there's actually </span><span class="line" data-startTime="1092">a good amount of latency, </span><span class="line" data-startTime="1095">there's good gaps between </span><span class="line" data-startTime="1095">all these flames. </span> <span class="line" data-startTime="1100">And if you look on Timeline, </span><span class="line" data-startTime="1100">there's actually a bunch of </span><span class="line" data-startTime="1103">network activity that's </span><span class="line" data-startTime="1103">happening </span><span class="line" data-startTime="1105">between these things. </span></p>

<p><span class="line" data-startTime="1106">So they're making network </span><span class="line" data-startTime="1106">requests as they're trying to </span><span class="line" data-startTime="1109">pull together things, and </span><span class="line" data-startTime="1109">it's a bit inefficient. </span> <span class="line" data-startTime="1112">Over in this version they don't </span><span class="line" data-startTime="1112">have that problem, but </span><span class="line" data-startTime="1116">we can identify kind of where </span><span class="line" data-startTime="1116">all the function costs are </span><span class="line" data-startTime="1120">coming from. </span> <span class="line" data-startTime="1120">Now, height is just </span><span class="line" data-startTime="1120">call stack. </span> <span class="line" data-startTime="1122">So height is really </span><span class="line" data-startTime="1122">not important. </span> <span class="line" data-startTime="1124">What's important is width </span><span class="line" data-startTime="1124">because width is time. </span> <span class="line" data-startTime="1129">But we're able to see here kind </span><span class="line" data-startTime="1129">of what are the functions </span><span class="line" data-startTime="1132">that are taking up time. </span></p>

<p><span class="line" data-startTime="1132">We also get to understand the </span><span class="line" data-startTime="1132">execution code paths here, and </span><span class="line" data-startTime="1136">what calls what and how do we </span><span class="line" data-startTime="1136">go from start to finish in </span><span class="line" data-startTime="1139">this operation. </span> <span class="line" data-startTime="1142">All right. </span> <span class="line" data-startTime="1143">So that's if we're spending </span><span class="line" data-startTime="1143">a lot of time in script. </span> <span class="line" data-startTime="1146">If we're spending a lot of time </span><span class="line" data-startTime="1146">in layout, dig into the </span><span class="line" data-startTime="1149">JavaScript that's </span><span class="line" data-startTime="1149">triggering it. </span> <span class="line" data-startTime="1150">In DevTools Timeline like I </span><span class="line" data-startTime="1150">showed before, you'll see a </span><span class="line" data-startTime="1153">call stack. </span> <span class="line" data-startTime="1154">Find out what you're doing in </span><span class="line" data-startTime="1154">JavaScript that is forcing the </span><span class="line" data-startTime="1156">browser to do a layout. </span> <span class="line" data-startTime="1158">With paints, find what is </span><span class="line" data-startTime="1158">actually being repainted. </span> <span class="line" data-startTime="1161">Turn on all those paint rects, </span><span class="line" data-startTime="1161">turn on the layer borders and </span><span class="line" data-startTime="1164">see what's happening. </span> <span class="line" data-startTime="1164">You might have to promote a </span><span class="line" data-startTime="1164">layer using translate(Z) to </span><span class="line" data-startTime="1167">get out of a pain storm. </span> <span class="line" data-startTime="1170">This often happens with fixed </span><span class="line" data-startTime="1170">position elements, </span><span class="line" data-startTime="1173">but you kind of &mdash; </span><span class="line" data-startTime="1175">take another look at what </span><span class="line" data-startTime="1175">Paul showed you. </span> <span class="line" data-startTime="1176">You can bisect what are actually </span><span class="line" data-startTime="1176">expensive things </span><span class="line" data-startTime="1180">happening using Continuous </span><span class="line" data-startTime="1180">Paint mode. </span> <span class="line" data-startTime="1182">And if none of these things </span><span class="line" data-startTime="1182">answer your questions, it's </span><span class="line" data-startTime="1184">time to dig into about:tracing </span><span class="line" data-startTime="1184">which is a really extensive </span><span class="line" data-startTime="1188">tool and I'm not going to </span><span class="line" data-startTime="1188">touch it right now. </span></p>

<p><span class="line" data-startTime="1191">But, to tackle kind of like all </span><span class="line" data-startTime="1191">of these operations, and </span><span class="line" data-startTime="1195">how they actually map to your </span><span class="line" data-startTime="1195">CSS, we should probably take a </span><span class="line" data-startTime="1198">look at that. </span> <span class="line" data-startTime="1199">So, if we take this little block </span><span class="line" data-startTime="1199">of CSS, the selector up </span><span class="line" data-startTime="1205">there &mdash; that does have to get </span><span class="line" data-startTime="1205">matched up to a DOM element &mdash; </span><span class="line" data-startTime="1207">so the selector will be caught </span><span class="line" data-startTime="1207">up in recalc style. </span> <span class="line" data-startTime="1211">The height effects the geometry </span><span class="line" data-startTime="1211">of the box, so that </span><span class="line" data-startTime="1215">is mostly captured inside </span><span class="line" data-startTime="1215">the cost of layout. </span></p>

<p><span class="line" data-startTime="1217">And a text shadow does not </span><span class="line" data-startTime="1217">affect any geometry of the </span><span class="line" data-startTime="1220">page whatsoever. </span> <span class="line" data-startTime="1220">It is just a visual </span><span class="line" data-startTime="1220">effect, right? </span><span class="line" data-startTime="1223">So it will have no </span><span class="line" data-startTime="1223">effect whatsoever </span><span class="line" data-startTime="1225">inside layout and paint. </span> <span class="line" data-startTime="1226">Now, this is helpful to know </span><span class="line" data-startTime="1226">because if you turn on </span><span class="line" data-startTime="1229">Continuous Painting mode, it's </span><span class="line" data-startTime="1229">only going to give you numbers </span><span class="line" data-startTime="1234">that reflect things that have </span><span class="line" data-startTime="1234">an effect on paint. </span> <span class="line" data-startTime="1236">So you change the height of a </span><span class="line" data-startTime="1236">box inside Continuous Paint </span><span class="line" data-startTime="1240">mode, not much, really &mdash; </span><span class="line" data-startTime="1243">you're not going to </span><span class="line" data-startTime="1243">get a good result. </span> <span class="line" data-startTime="1245">But another way to look at this </span><span class="line" data-startTime="1245">is that different CSS </span><span class="line" data-startTime="1249">properties kind of effect </span><span class="line" data-startTime="1249">these different things. </span> <span class="line" data-startTime="1251">So, like Paul mentioned before, </span><span class="line" data-startTime="1251">transform and opacity </span><span class="line" data-startTime="1255">are really fast because the </span><span class="line" data-startTime="1255">GPU can handle it 100%. </span> <span class="line" data-startTime="1258">So this happens here. </span> <span class="line" data-startTime="1260">They do not need to &mdash; </span><span class="line" data-startTime="1261">if you're touching transform </span><span class="line" data-startTime="1261">and opacity &mdash; </span><span class="line" data-startTime="1263">you do not need to lay </span><span class="line" data-startTime="1263">these out, you do not </span><span class="line" data-startTime="1266">need to paint them. </span></p>

<p><span class="line" data-startTime="1268">A few happen in paint, so this </span><span class="line" data-startTime="1268">is box shadow, border radius. </span> <span class="line" data-startTime="1273">There are visual effects. </span> <span class="line" data-startTime="1274">Like I said, they don't </span><span class="line" data-startTime="1274">affect any geometry. </span> <span class="line" data-startTime="1277">Outline is also here, because </span><span class="line" data-startTime="1277">outline is similar to border </span><span class="line" data-startTime="1280">but outline you can change an </span><span class="line" data-startTime="1280">outline from one pixel to 100 </span><span class="line" data-startTime="1284">pixels and everything stays </span><span class="line" data-startTime="1284">the same place. </span> <span class="line" data-startTime="1289">But a lot of things &mdash; </span><span class="line" data-startTime="1291">a lot of CSS properties </span><span class="line" data-startTime="1291">do affect the layout. </span> <span class="line" data-startTime="1293">Of course, anything that affects </span><span class="line" data-startTime="1293">the position of the </span><span class="line" data-startTime="1296">boxes, width, margin, border, </span><span class="line" data-startTime="1296">absolute positioning, relative </span><span class="line" data-startTime="1300">positioning. </span> <span class="line" data-startTime="1300">These things affect layout. </span> <span class="line" data-startTime="1303">And actually &mdash; </span><span class="line" data-startTime="1306">I took a look at all </span><span class="line" data-startTime="1306">the CSS properties. </span> <span class="line" data-startTime="1310">Chrome actually just </span><span class="line" data-startTime="1310">recently &mdash; </span><span class="line" data-startTime="1312">yesterday, I think &mdash; </span><span class="line" data-startTime="1313">released some numbers around </span><span class="line" data-startTime="1313">the popularity of all CSS </span><span class="line" data-startTime="1315">properties on the web. </span></p>

<p><span class="line" data-startTime="1317">And this is them. </span> <span class="line" data-startTime="1318">So width is the most popular </span><span class="line" data-startTime="1318">CSS property. </span> <span class="line" data-startTime="1321">Who would have expected that? </span><span class="line" data-startTime="1323">But it's interesting to kind of </span><span class="line" data-startTime="1323">look at these and identify </span><span class="line" data-startTime="1327">kind of what sequence of </span><span class="line" data-startTime="1327">operations they force. </span> <span class="line" data-startTime="1331">And so most actually do effect </span><span class="line" data-startTime="1331">the geometry the page, but of </span><span class="line" data-startTime="1335">course, opacity, like I </span><span class="line" data-startTime="1335">mentioned, does not. </span> <span class="line" data-startTime="1338">Another cool way to look </span><span class="line" data-startTime="1338">at this is animatable. </span> <span class="line" data-startTime="1343">Lea Verou made this tool and, </span><span class="line" data-startTime="1343">hopefully, I can show this </span><span class="line" data-startTime="1346">really quickly. </span> <span class="line" data-startTime="1347">So this is just using keyframe </span><span class="line" data-startTime="1347">animations just to change a </span><span class="line" data-startTime="1352">single CSS property on a bunch </span><span class="line" data-startTime="1352">of different things. </span> <span class="line" data-startTime="1356">But it's pretty cool to bring </span><span class="line" data-startTime="1356">this up and try it out to see </span><span class="line" data-startTime="1361">what it actually looks </span><span class="line" data-startTime="1361">like inside Timeline. </span> <span class="line" data-startTime="1365">So, like I said, we'll take </span><span class="line" data-startTime="1365">a look at font size. </span></p>

<p><span class="line" data-startTime="1373">Font size. </span> <span class="line" data-startTime="1376">There we go. </span> <span class="line" data-startTime="1377">So as we animate font size, font </span><span class="line" data-startTime="1377">size does cause layout </span><span class="line" data-startTime="1381">and we see it right here. </span> <span class="line" data-startTime="1382">Box shadow, like I mentioned, </span><span class="line" data-startTime="1382">does not have any effect on </span><span class="line" data-startTime="1385">layout and &mdash; </span><span class="line" data-startTime="1388">did I lie? </span><span class="line" data-startTime="1390">Oooooh, tough Paul. </span> <span class="line" data-startTime="1395">Let me try one more. </span> <span class="line" data-startTime="1398">There we go. </span> <span class="line" data-startTime="1399">That's pretty good. </span> <span class="line" data-startTime="1401">So we're doing a transform </span><span class="line" data-startTime="1401">animation. </span> <span class="line" data-startTime="1403">It's just staying on the GPU. </span> <span class="line" data-startTime="1405">We're not going back </span><span class="line" data-startTime="1405">to layout. </span> <span class="line" data-startTime="1406">So this is extremely efficient </span><span class="line" data-startTime="1406">when it comes to animations. </span> <span class="line" data-startTime="1411">So, in transitions there's </span><span class="line" data-startTime="1411">a lot of things. </span> <span class="line" data-startTime="1414">There's four things that a </span><span class="line" data-startTime="1414">browser can do really, really </span><span class="line" data-startTime="1416">fast and jank-free. </span> <span class="line" data-startTime="1418">It can scale, can move, </span><span class="line" data-startTime="1418">can rotate, can fade. </span></p>

<p><span class="line" data-startTime="1422">These translate in CSS </span><span class="line" data-startTime="1422">to these guys. </span> <span class="line" data-startTime="1426">I should point out, you might </span><span class="line" data-startTime="1426">need the null transforn hack. </span> <span class="line" data-startTime="1429">Maybe. </span> <span class="line" data-startTime="1431">But, if you're doing any </span><span class="line" data-startTime="1431">animations, any visual </span><span class="line" data-startTime="1434">effects, you want to be doing </span><span class="line" data-startTime="1434">them with these operations. </span> <span class="line" data-startTime="1438">These can be fast. </span> <span class="line" data-startTime="1440">It can be fast on low-end </span><span class="line" data-startTime="1440">hardware, it can be fast on </span><span class="line" data-startTime="1442">high-end hardware. </span> <span class="line" data-startTime="1443">Every other operation is going </span><span class="line" data-startTime="1443">to incur layout, or maybe a </span><span class="line" data-startTime="1448">good amount of paint. </span> <span class="line" data-startTime="1449">So it's going to be slower. </span></p>

<p><span class="line" data-startTime="1452">Now, when it comes to measuring </span><span class="line" data-startTime="1452">we want to know that </span><span class="line" data-startTime="1456">these measurements &mdash; </span><span class="line" data-startTime="1457">these performance enhancements </span><span class="line" data-startTime="1457">that we're doing </span><span class="line" data-startTime="1459">are good for people. </span> <span class="line" data-startTime="1461">If we take a look at Twitter, </span><span class="line" data-startTime="1461">the load event &mdash; window.load &mdash; </span><span class="line" data-startTime="1465">fires about midway through </span><span class="line" data-startTime="1465">the network waterfall. </span> <span class="line" data-startTime="1469">And the end of activity </span><span class="line" data-startTime="1469">is quite a bit later. </span> <span class="line" data-startTime="1471">So looking at window.load for </span><span class="line" data-startTime="1471">knowing that the page is kind </span><span class="line" data-startTime="1475">of done is not going </span><span class="line" data-startTime="1475">to work out. </span> <span class="line" data-startTime="1478">So we need better ways </span><span class="line" data-startTime="1478">to identify how </span><span class="line" data-startTime="1481">successful are we. </span></p>

<p><span class="line" data-startTime="1483">So this is an approach developed </span><span class="line" data-startTime="1483">by a guy named Pat </span><span class="line" data-startTime="1486">Meenan who runs WebPageTest. </span> <span class="line" data-startTime="1489">So up at the top we have the </span><span class="line" data-startTime="1489">film strip view of loading a </span><span class="line" data-startTime="1494">page that's been optimized </span><span class="line" data-startTime="1494">two different ways. </span> <span class="line" data-startTime="1497">And so you could see that the </span><span class="line" data-startTime="1497">third way is delivering </span><span class="line" data-startTime="1502">content to the user faster </span><span class="line" data-startTime="1502">than the other ones. </span> <span class="line" data-startTime="1505">Down here is a plot of the </span><span class="line" data-startTime="1505">percentage of the visual </span><span class="line" data-startTime="1508">progress plotting these out. </span> <span class="line" data-startTime="1510">So you can see here we're </span><span class="line" data-startTime="1510">already showing things to the </span><span class="line" data-startTime="1514">user, and so that's why </span><span class="line" data-startTime="1514">gold is jumping up. </span></p>

<p><span class="line" data-startTime="1517">Now, if we want to take this and </span><span class="line" data-startTime="1517">turn it into a metric, we </span><span class="line" data-startTime="1521">can take the area above that </span><span class="line" data-startTime="1521">line and just kind of absorb </span><span class="line" data-startTime="1526">it into a figure. </span> <span class="line" data-startTime="1528">So this is called </span><span class="line" data-startTime="1528">the speed index. </span> <span class="line" data-startTime="1529">It's basically the area above </span><span class="line" data-startTime="1529">the curve that accounts for </span><span class="line" data-startTime="1535">what the visual progress being </span><span class="line" data-startTime="1535">shown to the user. </span> <span class="line" data-startTime="1539">So this is a nice quantitative </span><span class="line" data-startTime="1539">measurement for getting a </span><span class="line" data-startTime="1544">successful picture in </span><span class="line" data-startTime="1544">front of the user. </span> <span class="line" data-startTime="1546">Now, in the real world, we want </span><span class="line" data-startTime="1546">to be able to identify </span><span class="line" data-startTime="1551">things like how as we're </span><span class="line" data-startTime="1551">developing a project over </span><span class="line" data-startTime="1555">time, are we regressing </span><span class="line" data-startTime="1555">performance, are </span><span class="line" data-startTime="1557">we improving it? </span><span class="line" data-startTime="1558">Adobe Topcoat is a CSS library </span><span class="line" data-startTime="1558">that has a really nice </span><span class="line" data-startTime="1561">framework set up for </span><span class="line" data-startTime="1561">benchmarking. </span></p>

<p><span class="line" data-startTime="1564">So they're using a project </span><span class="line" data-startTime="1564">called Telemetry that </span><span class="line" data-startTime="1566">Chrome works on. </span> <span class="line" data-startTime="1567">And so this is actually a view </span><span class="line" data-startTime="1567">of their button element, and </span><span class="line" data-startTime="1571">on the horizontal axis </span><span class="line" data-startTime="1571">we just have commits. </span> <span class="line" data-startTime="1574">And we can actually see for the </span><span class="line" data-startTime="1574">mean frame rate, the load </span><span class="line" data-startTime="1583">time, and the layout, how </span><span class="line" data-startTime="1583">things are progressing. </span> <span class="line" data-startTime="1587">And so you can actually see </span><span class="line" data-startTime="1587">this is a pretty big </span><span class="line" data-startTime="1589">regression in load time </span><span class="line" data-startTime="1589">of this test case. </span> <span class="line" data-startTime="1594">And then things actually did </span><span class="line" data-startTime="1594">slow down later here as well. </span></p>

<p><span class="line" data-startTime="1597">But we're able to track </span><span class="line" data-startTime="1597">this over time </span><span class="line" data-startTime="1599">which is really powerful. </span> <span class="line" data-startTime="1601">Another developer took a look </span><span class="line" data-startTime="1601">at this and applied this to </span><span class="line" data-startTime="1603">Bootstrap over the history of </span><span class="line" data-startTime="1603">the project from 1.0 to 3.0. </span> <span class="line" data-startTime="1607">And so this is just a quick </span><span class="line" data-startTime="1607">view of the drop downs </span><span class="line" data-startTime="1610">component inside Bootstrap, and </span><span class="line" data-startTime="1610">we're looking at the first </span><span class="line" data-startTime="1612">paint metric. </span> <span class="line" data-startTime="1615">First paint is a tricky one </span><span class="line" data-startTime="1615">and it's hard to find good </span><span class="line" data-startTime="1619">metrics, but I think speed index </span><span class="line" data-startTime="1619">is one of the best ones. </span> <span class="line" data-startTime="1622">Inside Google Analytics there's </span><span class="line" data-startTime="1622">a few tools for these. </span> <span class="line" data-startTime="1626">You're looking at network </span><span class="line" data-startTime="1626">activity, you can identify </span><span class="line" data-startTime="1629">page load time, domain look </span><span class="line" data-startTime="1629">up, page download time. </span></p>

<p><span class="line" data-startTime="1634">All these are the exact same as </span><span class="line" data-startTime="1634">window.performance.timing, </span><span class="line" data-startTime="1638">but since all major browsers </span><span class="line" data-startTime="1638">support this, Google Analytics </span><span class="line" data-startTime="1642">will report it here. </span> <span class="line" data-startTime="1644">You could also get these numbers </span><span class="line" data-startTime="1644">split up by browser, </span><span class="line" data-startTime="1648">by operating system. </span> <span class="line" data-startTime="1649">So this is just a view </span><span class="line" data-startTime="1649">I made of browser </span><span class="line" data-startTime="1651">and operating system. </span> <span class="line" data-startTime="1653">Here you can see Safari on iOS </span><span class="line" data-startTime="1653">is considerably slower on page </span><span class="line" data-startTime="1657">load time than the rest. </span> <span class="line" data-startTime="1659">And I think that's mostly </span><span class="line" data-startTime="1659">because it's on a mobile </span><span class="line" data-startTime="1660">network whereas nearly </span><span class="line" data-startTime="1660">all these others </span><span class="line" data-startTime="1662">are desktop on Wi-Fi. </span> <span class="line" data-startTime="1666">SpeedCurve is a really </span><span class="line" data-startTime="1666">cool site. </span> <span class="line" data-startTime="1668">Its still in private beta right </span><span class="line" data-startTime="1668">now but it's hoping to </span><span class="line" data-startTime="1671">give you a lot more insight </span><span class="line" data-startTime="1671">when it comes to the </span><span class="line" data-startTime="1675">performance of your </span><span class="line" data-startTime="1675">site over time. </span> <span class="line" data-startTime="1677">And so here is HML5 Rocks &mdash; </span><span class="line" data-startTime="1677">which I work on &mdash; </span><span class="line" data-startTime="1680">plotted against Amazon </span><span class="line" data-startTime="1680">and TripAdvisor. </span></p>

<p><span class="line" data-startTime="1683">You can kind of see that. </span> <span class="line" data-startTime="1685">But one tool that I really want </span><span class="line" data-startTime="1685">to show is WebPageTest </span><span class="line" data-startTime="1688">and I'm going to show it with </span><span class="line" data-startTime="1688">a site called Retailmenot. </span> <span class="line" data-startTime="1692">This page I just loaded now. </span> <span class="line" data-startTime="1694">I'm going to do a shift refresh </span><span class="line" data-startTime="1694">because it's so fast. </span> <span class="line" data-startTime="1699">The developers behind this </span><span class="line" data-startTime="1699">worked quite a bit on the page </span><span class="line" data-startTime="1702">load time and it really shows, </span><span class="line" data-startTime="1702">but what's really cool is </span><span class="line" data-startTime="1706">taking a look at what </span><span class="line" data-startTime="1706">WebPageTest tells us. </span> <span class="line" data-startTime="1709">So I ran this just </span><span class="line" data-startTime="1709">earlier today. </span> <span class="line" data-startTime="1712">So we did &mdash; </span><span class="line" data-startTime="1713">this is Retailmenot assuming </span><span class="line" data-startTime="1713">a cable internet connection </span><span class="line" data-startTime="1717">inside Chrome. </span></p>

<p><span class="line" data-startTime="1718">And so here &mdash; </span><span class="line" data-startTime="1719">if you've seen WebPageTest </span><span class="line" data-startTime="1719">before, it's been </span><span class="line" data-startTime="1721">around for a while &mdash; </span><span class="line" data-startTime="1723">you might know it has waterfalls </span><span class="line" data-startTime="1723">and stuff. </span> <span class="line" data-startTime="1725">It has a lot more than that. </span> <span class="line" data-startTime="1727">I really encourage you </span><span class="line" data-startTime="1727">to take another look. </span> <span class="line" data-startTime="1729">First thing I'm going to show </span><span class="line" data-startTime="1729">is the film strip view. </span> <span class="line" data-startTime="1731">So over here in the film strip </span><span class="line" data-startTime="1731">view we have, just like </span><span class="line" data-startTime="1737">before, every 100 milliseconds </span><span class="line" data-startTime="1737">we have a snapshot of what the </span><span class="line" data-startTime="1742">page looks like. </span> <span class="line" data-startTime="1743">And you can see at 0.9 seconds </span><span class="line" data-startTime="1743">we start to have an actual </span><span class="line" data-startTime="1747">page being rendered. </span> <span class="line" data-startTime="1749">It's really cool, as I </span><span class="line" data-startTime="1749">scroll through this </span><span class="line" data-startTime="1751">you can see my waterfall. </span></p>

<p><span class="line" data-startTime="1753">We're kind of going through my </span><span class="line" data-startTime="1753">network waterfall and we're </span><span class="line" data-startTime="1755">seeing that correlation. </span> <span class="line" data-startTime="1758">Now, another really nice thing </span><span class="line" data-startTime="1758">is that you can ask </span><span class="line" data-startTime="1761">WebPageTest to capture the </span><span class="line" data-startTime="1761">DevTools Timeline recording. </span> <span class="line" data-startTime="1766">And so we can just view </span><span class="line" data-startTime="1766">the DevTools Timeline </span><span class="line" data-startTime="1769">associated with this. </span> <span class="line" data-startTime="1770">So I'm just going to </span><span class="line" data-startTime="1770">do that right now. </span> <span class="line" data-startTime="1773">So Chrome DevTools is a web </span><span class="line" data-startTime="1773">app, as you know, so we're </span><span class="line" data-startTime="1777">just viewing this </span><span class="line" data-startTime="1777">as a web app. </span> <span class="line" data-startTime="1779">And this is the actual recording </span><span class="line" data-startTime="1779">that we were looking </span><span class="line" data-startTime="1781">at on WebPageTest, and we </span><span class="line" data-startTime="1781">can see a lot more. </span> <span class="line" data-startTime="1784">So we can see, here's the data </span><span class="line" data-startTime="1784">coming in, HTML, Google </span><span class="line" data-startTime="1787">Analytics causes a layout, </span><span class="line" data-startTime="1787">they're asking for an offset </span><span class="line" data-startTime="1791">width so you get the </span><span class="line" data-startTime="1791">screen size. </span></p>

<p><span class="line" data-startTime="1793">Then we come down here and </span><span class="line" data-startTime="1793">pretty soon we get a paint. </span> <span class="line" data-startTime="1796">And so this is that paint. </span> <span class="line" data-startTime="1797">It's at 818 milliseconds, that's </span><span class="line" data-startTime="1797">why we are seeing a </span><span class="line" data-startTime="1802">thumbnail right then. </span> <span class="line" data-startTime="1805">The last thing I'll show is </span><span class="line" data-startTime="1805">that it even takes those </span><span class="line" data-startTime="1810">numbers from the Timeline and </span><span class="line" data-startTime="1810">aggregates them over the load </span><span class="line" data-startTime="1813">of the page. </span> <span class="line" data-startTime="1815">So we can actually see, for that </span><span class="line" data-startTime="1815">entire duration that it </span><span class="line" data-startTime="1818">was recording, let's summarize </span><span class="line" data-startTime="1818">all the time it spend in </span><span class="line" data-startTime="1821">layout, in JavaScript, </span><span class="line" data-startTime="1821">in paint. </span></p>

<p><span class="line" data-startTime="1824">And so we can see here, for that </span><span class="line" data-startTime="1824">page load time, where was </span><span class="line" data-startTime="1828">the browser spending its time? </span><span class="line" data-startTime="1829">So here, we're mostly spending </span><span class="line" data-startTime="1829">a lot of time in JavaScript, </span><span class="line" data-startTime="1833">to be honest. </span> <span class="line" data-startTime="1834">But layout does contribute </span><span class="line" data-startTime="1834">a little bit to this. </span> <span class="line" data-startTime="1841">All right. </span> <span class="line" data-startTime="1841">So WebPageTest, really cool, </span><span class="line" data-startTime="1841">had a lot of features </span><span class="line" data-startTime="1844">recently, and the nice thing </span><span class="line" data-startTime="1844">is that you can take the </span><span class="line" data-startTime="1849">difference between multiple </span><span class="line" data-startTime="1849">recordings and be able to </span><span class="line" data-startTime="1851">track your performance </span><span class="line" data-startTime="1851">over time. </span> <span class="line" data-startTime="1854">If you do want to use </span><span class="line" data-startTime="1854">this, the site &mdash; </span><span class="line" data-startTime="1857">if you use WebPageTest.org &mdash; </span><span class="line" data-startTime="1859">the site it has to be &mdash; </span><span class="line" data-startTime="1861">the site you're testing </span><span class="line" data-startTime="1861">has to be online &mdash; </span><span class="line" data-startTime="1862">but you can run a private </span><span class="line" data-startTime="1862">instance. </span> <span class="line" data-startTime="1864">So you can run against </span><span class="line" data-startTime="1864">a development </span><span class="line" data-startTime="1865">server if you want. </span> <span class="line" data-startTime="1866">It's all open source. </span> <span class="line" data-startTime="1868">All right. </span> <span class="line" data-startTime="1869">So to sum up, few things. </span></p>

<p><span class="line" data-startTime="1871">We heard a lot of </span><span class="line" data-startTime="1871">numbers tonight. </span> <span class="line" data-startTime="1873">Under 60 milliseconds is smooth </span><span class="line" data-startTime="1873">animation, under 100 </span><span class="line" data-startTime="1876">milliseconds feels pretty much </span><span class="line" data-startTime="1876">instant, under one second, </span><span class="line" data-startTime="1880">mmmm, I'm OK with it, over a </span><span class="line" data-startTime="1884">millisecond, users are unhappy. </span> <span class="line" data-startTime="1887">So here are some aggressive, </span><span class="line" data-startTime="1887">aggressive but good goals, and </span><span class="line" data-startTime="1891">things that we should really </span><span class="line" data-startTime="1891">be striving towards. </span> <span class="line" data-startTime="1894">When it comes to mobile </span><span class="line" data-startTime="1894">connectivity, it is hard to </span><span class="line" data-startTime="1897">deliver things fast, but </span><span class="line" data-startTime="1897">users get really </span><span class="line" data-startTime="1900">impatient quite fast. </span> <span class="line" data-startTime="1901">Shoot to show the content </span><span class="line" data-startTime="1901">that's above the </span><span class="line" data-startTime="1904">fold in under a second. </span> <span class="line" data-startTime="1906">One important part of this is </span><span class="line" data-startTime="1906">serving the above the fold </span><span class="line" data-startTime="1908">content in the first 14 </span><span class="line" data-startTime="1908">kilobytes of the response. </span> <span class="line" data-startTime="1911">This includes the CSS that you </span><span class="line" data-startTime="1911">need to render everything </span><span class="line" data-startTime="1914">that's above the fold, you </span><span class="line" data-startTime="1914">can defer the rest of </span><span class="line" data-startTime="1916">the CSS later on. </span> <span class="line" data-startTime="1917">You don't need it just yet. </span> <span class="line" data-startTime="1919">If I fit it in that first 15 &mdash; </span><span class="line" data-startTime="1921">14 kilobytes, that number </span><span class="line" data-startTime="1921">is not totally magic. </span></p>

<p><span class="line" data-startTime="1925">It's based off of how TCP </span><span class="line" data-startTime="1925">Slow-start works. </span> <span class="line" data-startTime="1928">It's the first time that you're </span><span class="line" data-startTime="1928">really going to get a </span><span class="line" data-startTime="1930">considerable amount </span><span class="line" data-startTime="1930">of data back. </span> <span class="line" data-startTime="1932">Maximum of 200 milliseconds </span><span class="line" data-startTime="1932">server response time, 60 fps </span><span class="line" data-startTime="1936">on scrolling, 60 fps on </span><span class="line" data-startTime="1936">transitions, and a speed index </span><span class="line" data-startTime="1940">of under 1,000 would </span><span class="line" data-startTime="1940">be pretty good. </span> <span class="line" data-startTime="1945">So aside from reaching those </span><span class="line" data-startTime="1945">goals, which are hefty but </span><span class="line" data-startTime="1949">good, what can you do? </span><span class="line" data-startTime="1951">I think it's hard to kind of </span><span class="line" data-startTime="1951">work on &mdash; it seems, talking to </span><span class="line" data-startTime="1955">the people that I do, a lot of </span><span class="line" data-startTime="1955">people explain that it's hard </span><span class="line" data-startTime="1958">to make the case to work </span><span class="line" data-startTime="1958">on performance. </span> <span class="line" data-startTime="1961">You've got to ship features, </span><span class="line" data-startTime="1961">you got to get that out the </span><span class="line" data-startTime="1963">door, people expect </span><span class="line" data-startTime="1963">the end result. </span> <span class="line" data-startTime="1966">And I think we really need to be </span><span class="line" data-startTime="1966">able to make the case that </span><span class="line" data-startTime="1968">performance is incredibly </span><span class="line" data-startTime="1968">important. </span></p>

<p><span class="line" data-startTime="1970">And the best way to do that </span><span class="line" data-startTime="1970">is &mdash; you can show them the </span><span class="line" data-startTime="1972">numbers from Google and Amazon </span><span class="line" data-startTime="1972">and Microsoft, and anyone who </span><span class="line" data-startTime="1975">has said that it effects the </span><span class="line" data-startTime="1975">bottom line significantly &mdash; </span><span class="line" data-startTime="1978">but I think most people really </span><span class="line" data-startTime="1978">want to see it with their own </span><span class="line" data-startTime="1980">site, with their own data. </span> <span class="line" data-startTime="1982">So find in your own analytics </span><span class="line" data-startTime="1982">ways to correlate performance </span><span class="line" data-startTime="1984">wins to actual business wins </span><span class="line" data-startTime="1984">that they care about. </span> <span class="line" data-startTime="1986">So maybe the speed index </span><span class="line" data-startTime="1986">correlated to conversion rate. </span> <span class="line" data-startTime="1989">People that are experiencing </span><span class="line" data-startTime="1989">your site faster are </span><span class="line" data-startTime="1992">performing better. </span> <span class="line" data-startTime="1995">Make the case to your client </span><span class="line" data-startTime="1995">that performance often might </span><span class="line" data-startTime="1999">trump their feature request. </span> <span class="line" data-startTime="2000">That awesome cool feature that </span><span class="line" data-startTime="2000">the user will find once they </span><span class="line" data-startTime="2005">register for your site probably </span><span class="line" data-startTime="2005">won't get to that if </span><span class="line" data-startTime="2008">they're waiting 10 seconds </span><span class="line" data-startTime="2008">for the site to load. </span></p>

<p><span class="line" data-startTime="2011">Set up infrastructure to track </span><span class="line" data-startTime="2011">your perfs so you can identify </span><span class="line" data-startTime="2014">over the development of project </span><span class="line" data-startTime="2014">if you're regressing </span><span class="line" data-startTime="2017">performance or if </span><span class="line" data-startTime="2017">it's improving. </span> <span class="line" data-startTime="2019">And, to be honest, there's </span><span class="line" data-startTime="2019">some tools available. </span> <span class="line" data-startTime="2022">I showed some of them tonight, </span><span class="line" data-startTime="2022">but I think it's still quite </span><span class="line" data-startTime="2024">early in the space and the open </span><span class="line" data-startTime="2024">source community could </span><span class="line" data-startTime="2027">use a lot more to kind </span><span class="line" data-startTime="2027">of help everyone </span><span class="line" data-startTime="2030">track this stuff better. </span> <span class="line" data-startTime="2031">So I encourage you to join a </span><span class="line" data-startTime="2031">project or start a new project </span><span class="line" data-startTime="2034">to help everyone in this area. </span> <span class="line" data-startTime="2037">All right. </span> <span class="line" data-startTime="2038">Thanks, everyone. </span> <span class="line" data-startTime="2039">Stick around. </span></p>

<p><span class="line" data-startTime="2040">We're going to do Q&A </span><span class="line" data-startTime="2040">in a little bit. </span> <span class="line" data-startTime="2041">Thank you. </span> <span class="line" data-startTime="2042">[APPLAUSE] </span></p>