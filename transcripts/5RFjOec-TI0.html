<p class="speaker"><span class="line" data-starttime="1"><span class="speakerName">David Sehr</span>: OK. </span> <span class="line" data-startTime="1">Can everybody hear me? </span><span class="line" data-startTime="4">OK, great. </span> <span class="line" data-startTime="5">So welcome to the last talk </span><span class="line" data-startTime="5">of the track today. </span> <span class="line" data-startTime="8">I'm going to give you an </span><span class="line" data-startTime="8">introduction to Portable </span><span class="line" data-startTime="10">Native Client, or something </span><span class="line" data-startTime="10">we call PNaCl. </span> <span class="line" data-startTime="12">My name's David Sehr. </span> <span class="line" data-startTime="13">I'm the tech lead of the </span><span class="line" data-startTime="13">Native Client team. </span> <span class="line" data-startTime="16">And let's get started. </span> <span class="line" data-startTime="23">So since I'm going to assume </span><span class="line" data-startTime="23">that some of you probably </span><span class="line" data-startTime="25">haven't heard about Native </span><span class="line" data-startTime="25">Client, I'm going to give you </span><span class="line" data-startTime="27">a little background </span><span class="line" data-startTime="27">to start with. </span> <span class="line" data-startTime="28">I'm going to talk to you about </span><span class="line" data-startTime="28">Native Client, about why </span><span class="line" data-startTime="30">having C++ code running it in </span><span class="line" data-startTime="30">the web is a good idea. </span> <span class="line" data-startTime="34">And I'm going to talk to you </span><span class="line" data-startTime="34">about Native Client and how it </span><span class="line" data-startTime="36">makes it something </span><span class="line" data-startTime="36">we can really do. </span> <span class="line" data-startTime="40">So I don't think I need to tell </span><span class="line" data-startTime="40">most of you, but there's </span><span class="line" data-startTime="43">a lot of good C++ code </span><span class="line" data-startTime="43">in the world, maybe a </span><span class="line" data-startTime="45">little bad C++ code. </span> <span class="line" data-startTime="46">But a lot of good C++ code </span><span class="line" data-startTime="46">out in the world. </span></p>

<p><span class="line" data-startTime="48">People have written a lot of </span><span class="line" data-startTime="48">great applications, things </span><span class="line" data-startTime="50">that take advantage of sort of </span><span class="line" data-startTime="50">the natural advantages of </span><span class="line" data-startTime="53">Native Client. </span> <span class="line" data-startTime="54">Things like performance, low </span><span class="line" data-startTime="54">level access to operating </span><span class="line" data-startTime="57">system features, et cetera to </span><span class="line" data-startTime="57">create a really rich and </span><span class="line" data-startTime="59">immersive experience. </span> <span class="line" data-startTime="61">These sorts of applications </span><span class="line" data-startTime="61">would be great if we could </span><span class="line" data-startTime="63">bring them into the web. </span> <span class="line" data-startTime="64">But the problem is you really </span><span class="line" data-startTime="64">can't bring them to the web as </span><span class="line" data-startTime="67">they are because it's </span><span class="line" data-startTime="67">not really safe. </span></p>

<p><span class="line" data-startTime="71">Right? </span><span class="line" data-startTime="71">You bring Native Client to the </span><span class="line" data-startTime="71">web, and you open up all the </span><span class="line" data-startTime="73">possibilities that we've all </span><span class="line" data-startTime="73">come to know and hate about </span><span class="line" data-startTime="75">the web, which is insecurity </span><span class="line" data-startTime="75">and all the things that can </span><span class="line" data-startTime="80">come from that like having your </span><span class="line" data-startTime="82">identity stolen or whatever. </span> <span class="line" data-startTime="85">So what you'd really like to </span><span class="line" data-startTime="85">have, you'd like to be able to </span><span class="line" data-startTime="87">bring Native Client to the web, </span><span class="line" data-startTime="87">but you want a secure </span><span class="line" data-startTime="90">execution environment that can </span><span class="line" data-startTime="90">contain the bad stuff, make </span><span class="line" data-startTime="94">sure that it can't do bad things </span><span class="line" data-startTime="94">to you, while letting </span><span class="line" data-startTime="97">the good stuff run, </span><span class="line" data-startTime="97">which is what we </span><span class="line" data-startTime="101">built with Native Client. </span></p>

<p><span class="line" data-startTime="103">Now Native Client has been a </span><span class="line" data-startTime="103">feature of Chrome since Chrome </span><span class="line" data-startTime="107">version 14, about a year </span><span class="line" data-startTime="107">and a half ago. </span> <span class="line" data-startTime="109">We built this for x86. </span> <span class="line" data-startTime="111">Had a big launch party </span><span class="line" data-startTime="111">you might have seen. </span> <span class="line" data-startTime="113">And it's been a persistent </span><span class="line" data-startTime="113">feature of </span><span class="line" data-startTime="116">Chrome since that time. </span> <span class="line" data-startTime="118">About that time, same time </span><span class="line" data-startTime="118">last year as the Samsung </span><span class="line" data-startTime="121">Chromebooks launched that Sundar </span><span class="line" data-startTime="121">already talked about in </span><span class="line" data-startTime="124">his keynote, we brought </span><span class="line" data-startTime="124">Native Client to ARM. </span> <span class="line" data-startTime="128">And since that time, we've been </span><span class="line" data-startTime="128">bringing native code to </span><span class="line" data-startTime="133">the web with performance 90ish </span><span class="line" data-startTime="133">percent on x8632 and 80ish </span><span class="line" data-startTime="138">percent of native code </span><span class="line" data-startTime="138">performance on x8664 at ARM. </span> <span class="line" data-startTime="145">So you can build the cool </span><span class="line" data-startTime="145">applications that you've </span><span class="line" data-startTime="147">always built in native code </span><span class="line" data-startTime="147">but bring them to the web. </span> <span class="line" data-startTime="152">So when we started doing Native </span><span class="line" data-startTime="152">Client, we built a few </span><span class="line" data-startTime="156">applications, we ported a few </span><span class="line" data-startTime="156">things and said, we'd really </span><span class="line" data-startTime="159">like to showcase what are the </span><span class="line" data-startTime="159">cool things that people can do </span><span class="line" data-startTime="162">with Native Client. </span> <span class="line" data-startTime="164">And we continue to do this. </span></p>

<p><span class="line" data-startTime="165">I've got a group of people that </span><span class="line" data-startTime="165">work with me that are </span><span class="line" data-startTime="168">continually porting a few </span><span class="line" data-startTime="168">applications and saying, </span><span class="line" data-startTime="170">here's something that shows </span><span class="line" data-startTime="170">off a new possibility, say </span><span class="line" data-startTime="172">vector instructions or some </span><span class="line" data-startTime="172">other feature that we'd like </span><span class="line" data-startTime="175">to show off. </span> <span class="line" data-startTime="177">And we think there's some </span><span class="line" data-startTime="177">amazing potential shown here. </span> <span class="line" data-startTime="180">And we're not alone. </span> <span class="line" data-startTime="181">Over the last year and a half </span><span class="line" data-startTime="181">or so, over 30 applications, </span><span class="line" data-startTime="185">30 games have imported </span><span class="line" data-startTime="185">Native Client. </span> <span class="line" data-startTime="187">And you can go to the Chrome </span><span class="line" data-startTime="187">Web Store, and you can </span><span class="line" data-startTime="189">download a bunch of the titles </span><span class="line" data-startTime="189">that I've shown here plus a </span><span class="line" data-startTime="191">bunch more. </span> <span class="line" data-startTime="192">So 30 plus games. </span> <span class="line" data-startTime="194">And more recently applications </span><span class="line" data-startTime="194">that are </span><span class="line" data-startTime="196">probably not in that category. </span></p>

<p><span class="line" data-startTime="198">Things like productivity </span><span class="line" data-startTime="198">applications, applications to </span><span class="line" data-startTime="202">do secure shell accesses, or </span><span class="line" data-startTime="202">remote desktop viewers for </span><span class="line" data-startTime="207">Native Client. </span> <span class="line" data-startTime="208">So there are lots of other </span><span class="line" data-startTime="208">things outside of games that </span><span class="line" data-startTime="211">were also bringing. </span> <span class="line" data-startTime="212">Things, for instance, with </span><span class="line" data-startTime="212">Chrome RDP and with SSH, it's </span><span class="line" data-startTime="216">the cryptography performance </span><span class="line" data-startTime="216">that we can bring with native </span><span class="line" data-startTime="218">code opens up a new class </span><span class="line" data-startTime="218">of applications as well. </span></p>

<p><span class="line" data-startTime="222">So lots of applications </span><span class="line" data-startTime="222">have come. </span> <span class="line" data-startTime="225">We think the potential has been </span><span class="line" data-startTime="225">seen by a lot of people. </span> <span class="line" data-startTime="228">And also people out there have </span><span class="line" data-startTime="228">been doing these great </span><span class="line" data-startTime="234">applications and seeing the </span><span class="line" data-startTime="234">performance that we provide. </span> <span class="line" data-startTime="241">So you probably are asking </span><span class="line" data-startTime="241">yourself, if you haven't done </span><span class="line" data-startTime="242">this before, how do I build a </span><span class="line" data-startTime="242">Native Client application? </span><span class="line" data-startTime="245">Well, it's a native compilation </span><span class="line" data-startTime="245">basically as </span><span class="line" data-startTime="249">you've always done. </span> <span class="line" data-startTime="250">You take your C++ source code. </span> <span class="line" data-startTime="252">In this case, use a </span><span class="line" data-startTime="252">custom compiler. </span> <span class="line" data-startTime="254">I have a compiler based off </span><span class="line" data-startTime="254">the GCC tool chain. </span> <span class="line" data-startTime="257">And you build something </span><span class="line" data-startTime="257">called a nexe. </span></p>

<p><span class="line" data-startTime="260">And that's a native </span><span class="line" data-startTime="260">ELF binary. </span> <span class="line" data-startTime="263">And it's portable across </span><span class="line" data-startTime="263">operating systems. </span> <span class="line" data-startTime="265">It runs on Windows, Linux, </span><span class="line" data-startTime="265">Mac, Chrome OS. </span> <span class="line" data-startTime="270">But it's restricted to a </span><span class="line" data-startTime="270">particular instruction set </span><span class="line" data-startTime="273">architecture, to x86, </span><span class="line" data-startTime="273">32, or 64, or ARM. </span> <span class="line" data-startTime="279">So actually, if you want to </span><span class="line" data-startTime="279">bring the full experience to </span><span class="line" data-startTime="282">the full range of Chrome </span><span class="line" data-startTime="282">platforms, you'll use a set of </span><span class="line" data-startTime="286">custom compilers, you'll </span><span class="line" data-startTime="286">build a set of nexes. </span> <span class="line" data-startTime="291">And that will be the </span><span class="line" data-startTime="291">starting point. </span></p>

<p><span class="line" data-startTime="293">You'll add something we call a </span><span class="line" data-startTime="293">manifest file, or NMF file. </span> <span class="line" data-startTime="298">And then, along with that, </span><span class="line" data-startTime="298">you'll build a web page. </span> <span class="line" data-startTime="301">And the web page will </span><span class="line" data-startTime="301">use an embed tag. </span> <span class="line" data-startTime="303">And this embed tag tells where </span><span class="line" data-startTime="303">to find the manifest file and </span><span class="line" data-startTime="306">basically that this is going to </span><span class="line" data-startTime="306">be a Native Client enabled </span><span class="line" data-startTime="308">application. </span> <span class="line" data-startTime="310">And with that, you have a </span><span class="line" data-startTime="310">Native Client enabled </span><span class="line" data-startTime="313">application. </span> <span class="line" data-startTime="316">So this is what the developer </span><span class="line" data-startTime="316">needs to do to build an </span><span class="line" data-startTime="319">application. </span> <span class="line" data-startTime="320">What does the user see when he </span><span class="line" data-startTime="320">surfs to a page that's Native </span><span class="line" data-startTime="324">Client enabled? </span><span class="line" data-startTime="327">Well first of all, we need to </span><span class="line" data-startTime="327">talk about the manifest file. </span> <span class="line" data-startTime="331">We talked about the manifest </span><span class="line" data-startTime="331">file before. </span></p>

<p><span class="line" data-startTime="333">The manifest file serves </span><span class="line" data-startTime="333">several purposes. </span> <span class="line" data-startTime="336">But the major purpose of the </span><span class="line" data-startTime="336">manifest file is to tell the </span><span class="line" data-startTime="340">browser where to </span><span class="line" data-startTime="340">find resources. </span> <span class="line" data-startTime="342">So where to find resources can </span><span class="line" data-startTime="342">be a lot more than just this </span><span class="line" data-startTime="345">in the case of dynamic linking </span><span class="line" data-startTime="345">and some other things. </span> <span class="line" data-startTime="347">But you at least need to say </span><span class="line" data-startTime="347">where to find the Native </span><span class="line" data-startTime="351">Client executables. </span> <span class="line" data-startTime="353">And you need to have an entry </span><span class="line" data-startTime="353">in this manifest file for </span><span class="line" data-startTime="357">every one of those executables </span><span class="line" data-startTime="357">that you provide. </span> <span class="line" data-startTime="359">So that's basically for one </span><span class="line" data-startTime="359">target the Native Client </span><span class="line" data-startTime="362">version of your application </span><span class="line" data-startTime="362">is going to run on. </span></p>

<p><span class="line" data-startTime="363">You'll need one entry in this </span><span class="line" data-startTime="363">manifest JSON dictionary. </span> <span class="line" data-startTime="369">And that's going to tell for </span><span class="line" data-startTime="369">which ISA where to find the </span><span class="line" data-startTime="373">native find executable. </span> <span class="line" data-startTime="376">So back to the user. </span> <span class="line" data-startTime="378">When the user points a browser </span><span class="line" data-startTime="378">at a Native Client enabled web </span><span class="line" data-startTime="382">page, the browser sees that </span><span class="line" data-startTime="382">embed tags and says, ah. </span> <span class="line" data-startTime="385">Native Client. </span> <span class="line" data-startTime="386">I'll need to do something </span><span class="line" data-startTime="386">with that. </span> <span class="line" data-startTime="389">It will load the manifest and </span><span class="line" data-startTime="389">say, I'm running on an x86 64. </span> <span class="line" data-startTime="394">So I need to find my resource </span><span class="line" data-startTime="394">in this particular location. </span> <span class="line" data-startTime="399">Once it's found that nexe, then </span><span class="line" data-startTime="399">it loads the nexe and </span><span class="line" data-startTime="403">puts it in something we call </span><span class="line" data-startTime="403">the Native Client process. </span> <span class="line" data-startTime="407">The Native Client process is a </span><span class="line" data-startTime="407">key part of the whole security </span><span class="line" data-startTime="409">story that we've built with </span><span class="line" data-startTime="409">the Native Client System. </span> <span class="line" data-startTime="414">The Native Client System is </span><span class="line" data-startTime="414">built around a technique </span><span class="line" data-startTime="416">called software fault </span><span class="line" data-startTime="416">isolation. </span></p>

<p><span class="line" data-startTime="419">The software fault isolation </span><span class="line" data-startTime="419">is a scheme for basically </span><span class="line" data-startTime="424">analyzing and ensuring that the </span><span class="line" data-startTime="424">nexe doesn't contain any </span><span class="line" data-startTime="430">forbidden instructions, </span><span class="line" data-startTime="430">typically those are the ones </span><span class="line" data-startTime="433">that allow direct native </span><span class="line" data-startTime="433">access to the operating </span><span class="line" data-startTime="435">system, and that furthermore, it </span><span class="line" data-startTime="435">behaves itself with regard </span><span class="line" data-startTime="438">to control flow. </span> <span class="line" data-startTime="440">That is it can't run any </span><span class="line" data-startTime="440">instructions that </span><span class="line" data-startTime="441">I didn't look at. </span> <span class="line" data-startTime="442">And data flow, that it can't </span><span class="line" data-startTime="442">touch other memory in the </span><span class="line" data-startTime="445">browser or even in the Native </span><span class="line" data-startTime="445">Client process that I'm </span><span class="line" data-startTime="448">looking at here. </span></p>

<p><span class="line" data-startTime="449">So it can't look at your </span><span class="line" data-startTime="449">cookies, or look at your SSL </span><span class="line" data-startTime="452">keys, or things like that. </span> <span class="line" data-startTime="453">It can only look at the memory </span><span class="line" data-startTime="453">that the software fault </span><span class="line" data-startTime="455">isolation sandbox allows </span><span class="line" data-startTime="455">it to talk to. </span> <span class="line" data-startTime="459">So once of validator has scanned </span><span class="line" data-startTime="459">the nexe and has </span><span class="line" data-startTime="463">confirmed those properties hold, </span><span class="line" data-startTime="463">then execution of that </span><span class="line" data-startTime="467">executable can start. </span> <span class="line" data-startTime="470">So once the execution of the </span><span class="line" data-startTime="470">nexe starts, again you still </span><span class="line" data-startTime="475">cannot have raw unfiltered </span><span class="line" data-startTime="475">access to the operating system </span><span class="line" data-startTime="480">because that's where the root of </span><span class="line" data-startTime="480">the security discussions we </span><span class="line" data-startTime="483">talked about before is. </span> <span class="line" data-startTime="486">So any time the Native Client </span><span class="line" data-startTime="486">executable needs to do an </span><span class="line" data-startTime="490">operating system service, say to </span><span class="line" data-startTime="490">load an URL, or to talk in </span><span class="line" data-startTime="495">a socket, or read a file. </span></p>

<p><span class="line" data-startTime="497">It's going to talk to something </span><span class="line" data-startTime="497">we call the Native </span><span class="line" data-startTime="499">Client runtime. </span> <span class="line" data-startTime="501">Now I like to use shorter </span><span class="line" data-startTime="501">phrases than Native Client. </span> <span class="line" data-startTime="503">So I'll say NaCl quite </span><span class="line" data-startTime="503">a bit here. </span> <span class="line" data-startTime="505">You'll hear me say that </span><span class="line" data-startTime="505">several times. </span> <span class="line" data-startTime="507">So the NaCl run time actually </span><span class="line" data-startTime="507">is what the executable </span><span class="line" data-startTime="510">interfaces with. </span> <span class="line" data-startTime="511">And the NaCl runtime is </span><span class="line" data-startTime="511">responsible for checking that </span><span class="line" data-startTime="515">the executable has the privilege </span><span class="line" data-startTime="515">to do the things </span><span class="line" data-startTime="519">that it's requesting to do. </span> <span class="line" data-startTime="521">And if not, it can always </span><span class="line" data-startTime="521">abort the execution. </span> <span class="line" data-startTime="524">So with this in place &mdash; </span><span class="line" data-startTime="526">so the executable has </span><span class="line" data-startTime="526">been scanned. </span> <span class="line" data-startTime="528">The Native Client runtime is </span><span class="line" data-startTime="528">monitoring to make sure that </span><span class="line" data-startTime="531">only secure accesses are made. </span> <span class="line" data-startTime="534">You've got a process </span><span class="line" data-startTime="534">that's running. </span></p>

<p><span class="line" data-startTime="535">And it's safe. </span> <span class="line" data-startTime="536">And you've got a browser. </span> <span class="line" data-startTime="538">But they're not talking </span><span class="line" data-startTime="538">to each other. </span> <span class="line" data-startTime="541">So how do we make them </span><span class="line" data-startTime="541">talk to each other? </span><span class="line" data-startTime="546">Native Client executables are </span><span class="line" data-startTime="546">going to be plug ins. </span> <span class="line" data-startTime="549">So the web page that we talked </span><span class="line" data-startTime="549">about before created embed </span><span class="line" data-startTime="554">tag, which is the classic way </span><span class="line" data-startTime="554">of loading a plug in. </span> <span class="line" data-startTime="556">In this case, this is an </span><span class="line" data-startTime="556">out of process plug in. </span> <span class="line" data-startTime="559">It's something that's going to </span><span class="line" data-startTime="559">run in the secure environment </span><span class="line" data-startTime="561">we created. </span></p>

<p><span class="line" data-startTime="563">And it's going to talk to the </span><span class="line" data-startTime="563">browser via something we call </span><span class="line" data-startTime="566">PPAPI, or Pepper. </span> <span class="line" data-startTime="569">And PPAPI is a rich interface, </span><span class="line" data-startTime="569">having 2D, and 3D, and audio, </span><span class="line" data-startTime="574">and video, and other </span><span class="line" data-startTime="574">things like that. </span> <span class="line" data-startTime="577">But the simplest of interfaces </span><span class="line" data-startTime="577">is you just start a plug-in. </span> <span class="line" data-startTime="579">And you can postMessage back and </span><span class="line" data-startTime="579">forth between your plug-in </span><span class="line" data-startTime="582">and your page. </span> <span class="line" data-startTime="584">And with that, the plug-in </span><span class="line" data-startTime="584">becomes an extension of the </span><span class="line" data-startTime="588">browser's capabilities. </span> <span class="line" data-startTime="592">So I think you can see </span><span class="line" data-startTime="592">the potential. </span></p>

<p><span class="line" data-startTime="594">Now we've brought native code. </span> <span class="line" data-startTime="595">We made it run securely. </span> <span class="line" data-startTime="597">We run it in this environment. </span> <span class="line" data-startTime="598">And we can interface with the </span><span class="line" data-startTime="598">web browser to do cool things. </span> <span class="line" data-startTime="602">So there are a couple </span><span class="line" data-startTime="602">limitations yet. </span> <span class="line" data-startTime="607">We didn't want to bring native </span><span class="line" data-startTime="607">instruction set architectures </span><span class="line" data-startTime="612">as part of the web platform. </span> <span class="line" data-startTime="614">Why not? </span><span class="line" data-startTime="615">Well, any time you list off </span><span class="line" data-startTime="615">the set of instruction set </span><span class="line" data-startTime="619">architectures, there's always </span><span class="line" data-startTime="619">one more that you didn't list. </span> <span class="line" data-startTime="622">And what do you do for that? </span><span class="line" data-startTime="624">Well, there won't be an entry </span><span class="line" data-startTime="624">in everybody's manifest. </span> <span class="line" data-startTime="626">There won't be support </span><span class="line" data-startTime="626">for that. </span> <span class="line" data-startTime="627">And this will cause lots </span><span class="line" data-startTime="627">of user confusion. </span></p>

<p><span class="line" data-startTime="631">And there are also security </span><span class="line" data-startTime="631">reasons about this. </span> <span class="line" data-startTime="632">The very low level access is to </span><span class="line" data-startTime="632">instructions cause issues </span><span class="line" data-startTime="637">that I'd be glad to talk with </span><span class="line" data-startTime="637">other people about offline, if </span><span class="line" data-startTime="642">you actually allow them </span><span class="line" data-startTime="642">in the open web. </span> <span class="line" data-startTime="645">So we didn't want ISAs in </span><span class="line" data-startTime="645">the open web platform. </span> <span class="line" data-startTime="649">But we really do see there's </span><span class="line" data-startTime="649">tremendous potential to this. </span> <span class="line" data-startTime="652">There's great performance. </span> <span class="line" data-startTime="653">There's the ability to create </span><span class="line" data-startTime="653">these applications in the web. </span> <span class="line" data-startTime="657">And we wanted people </span><span class="line" data-startTime="657">to get at them. </span> <span class="line" data-startTime="659">So we made Native Client </span><span class="line" data-startTime="659">executables available through </span><span class="line" data-startTime="662">the Chrome Web Store. </span> <span class="line" data-startTime="663">And so you can go to the </span><span class="line" data-startTime="663">Chrome Web Store. </span> <span class="line" data-startTime="664">And it just so happens that at </span><span class="line" data-startTime="664">the top of that page is Don't </span><span class="line" data-startTime="667">Starve, which just so happens </span><span class="line" data-startTime="667">to be a Native Client based </span><span class="line" data-startTime="670">application. </span></p>

<p><span class="line" data-startTime="672">But you see any the 30 games </span><span class="line" data-startTime="672">that I talked about before are </span><span class="line" data-startTime="674">in the Chrome Web Store. </span> <span class="line" data-startTime="676">Or if you're wanting to develop </span><span class="line" data-startTime="676">for yourself, there's </span><span class="line" data-startTime="678">a flag which you can toggle that </span><span class="line" data-startTime="678">will little allow you to </span><span class="line" data-startTime="680">run things yourself. </span> <span class="line" data-startTime="681">But by default, we have </span><span class="line" data-startTime="681">limited Native Client </span><span class="line" data-startTime="684">execution to running out </span><span class="line" data-startTime="684">of the web store. </span> <span class="line" data-startTime="689">So we're done, right? </span><span class="line" data-startTime="691">We brought C++, native </span><span class="line" data-startTime="691">applications. </span> <span class="line" data-startTime="694">We run them in Chrome. </span></p>

<p><span class="line" data-startTime="696">And they're deployed </span><span class="line" data-startTime="696">in the web. </span> <span class="line" data-startTime="698">What else could there be? </span><span class="line" data-startTime="701">Well, we said we really didn't </span><span class="line" data-startTime="701">want native ISAs in the web. </span> <span class="line" data-startTime="706">So what we'd really like to have </span><span class="line" data-startTime="706">is something that wasn't </span><span class="line" data-startTime="710">a native ISA, that you could </span><span class="line" data-startTime="710">package up on your website, </span><span class="line" data-startTime="714">download, and have it become </span><span class="line" data-startTime="714">something in the native ISA so </span><span class="line" data-startTime="718">that it can run on </span><span class="line" data-startTime="718">your platform. </span> <span class="line" data-startTime="723">So that's what brings us to </span><span class="line" data-startTime="723">Portable Native Client. </span> <span class="line" data-startTime="727">So Portable Native Client, so </span><span class="line" data-startTime="727">we talk a little bit about </span><span class="line" data-startTime="729">this in the Native Client </span><span class="line" data-startTime="729">introduction. </span> <span class="line" data-startTime="731">It impinges on the cycle </span><span class="line" data-startTime="731">all the way from the </span><span class="line" data-startTime="733">developer to the user. </span> <span class="line" data-startTime="734">So the developer, and the </span><span class="line" data-startTime="734">distribution, and the user. </span></p>

<p><span class="line" data-startTime="737">I'll talk about those starting </span><span class="line" data-startTime="737">with the developer. </span> <span class="line" data-startTime="740">So you as a developer start &mdash; </span><span class="line" data-startTime="745">you probably already have a C++ </span><span class="line" data-startTime="745">application, maybe it runs </span><span class="line" data-startTime="748">on a typical 32-bit machine, a </span><span class="line" data-startTime="748">typical 32-bit machine might </span><span class="line" data-startTime="751">be a little endian, might </span><span class="line" data-startTime="751">be big endian. </span> <span class="line" data-startTime="753">But I think for the most </span><span class="line" data-startTime="753">part, things are </span><span class="line" data-startTime="754">little endian nowadays. </span> <span class="line" data-startTime="756">And you want to make it so </span><span class="line" data-startTime="756">that it runs on all those </span><span class="line" data-startTime="759">platforms you had before, </span><span class="line" data-startTime="759">that is Windows, Linux, </span><span class="line" data-startTime="762">Macintosh, Chrome OS. </span> <span class="line" data-startTime="765">But you want it to run across </span><span class="line" data-startTime="765">all the instructions and </span><span class="line" data-startTime="767">architectures as well. </span> <span class="line" data-startTime="770">So you've got this </span><span class="line" data-startTime="770">cool application. </span> <span class="line" data-startTime="771">Say in this case, it's this </span><span class="line" data-startTime="771">secure shell thing that we </span><span class="line" data-startTime="774">were talking about before, just </span><span class="line" data-startTime="774">chosen as an example. </span> <span class="line" data-startTime="777">And this is also kind of </span><span class="line" data-startTime="777">interesting because in the </span><span class="line" data-startTime="779">secure shell case, as opposed </span><span class="line" data-startTime="779">to a game, which typically </span><span class="line" data-startTime="783">will put up a 2D screen and </span><span class="line" data-startTime="783">manipulate it all directly in </span><span class="line" data-startTime="786">NaCl, the UI in my secure shell </span><span class="line" data-startTime="786">application is done in </span><span class="line" data-startTime="789">JavaScript. </span></p>

<p><span class="line" data-startTime="790">So it's an example of I'm doing </span><span class="line" data-startTime="790">a cryptography in the </span><span class="line" data-startTime="793">Native Client executable, in </span><span class="line" data-startTime="793">the UI, in JavaScript. </span> <span class="line" data-startTime="795">So it's a really different sort </span><span class="line" data-startTime="795">of model and one that's </span><span class="line" data-startTime="799">doing a lot of postMessage </span><span class="line" data-startTime="799">back and forth. </span> <span class="line" data-startTime="801">So you'd like to bring </span><span class="line" data-startTime="801">that to the web. </span> <span class="line" data-startTime="804">So the development cycle looks </span><span class="line" data-startTime="804">a lot the same as it did for </span><span class="line" data-startTime="807">Native Client. </span> <span class="line" data-startTime="808">The development cycle starts </span><span class="line" data-startTime="808">when you take your code, you </span><span class="line" data-startTime="811">use of custom compiler. </span></p>

<p><span class="line" data-startTime="813">In this case is PNaCl Clang or </span><span class="line" data-startTime="813">PNaCl Clang++, to bring, to </span><span class="line" data-startTime="817">compile, the application </span><span class="line" data-startTime="817">to an executable. </span> <span class="line" data-startTime="822">Now this case &mdash; so PNaCl Clang </span><span class="line" data-startTime="822">is based, as you might guess </span><span class="line" data-startTime="824">from the name Clang for </span><span class="line" data-startTime="824">those of you that are </span><span class="line" data-startTime="826">familiar with LLVM. </span> <span class="line" data-startTime="826">It's based on the LLVM </span><span class="line" data-startTime="826">set of tools. </span> <span class="line" data-startTime="829">OK. </span> <span class="line" data-startTime="829">So the executable that's </span><span class="line" data-startTime="829">produced is no longer and ISA </span><span class="line" data-startTime="833">executable. </span> <span class="line" data-startTime="834">It's an LLVM bit code, or what </span><span class="line" data-startTime="834">we call a PNaCl bit code. </span> <span class="line" data-startTime="839">With some simplifications and </span><span class="line" data-startTime="839">with some versioning for </span><span class="line" data-startTime="841">making it backward compatible </span><span class="line" data-startTime="841">across a </span><span class="line" data-startTime="844">longer set of lifetimes. </span> <span class="line" data-startTime="847">But it's essentially </span><span class="line" data-startTime="847">LLVM bit code. </span> <span class="line" data-startTime="850">You again pair that up with a </span><span class="line" data-startTime="850">manifest and a bit tag and </span><span class="line" data-startTime="854">build your web page </span><span class="line" data-startTime="854">as you did before. </span> <span class="line" data-startTime="856">And you get the cool experience </span><span class="line" data-startTime="858">that the user wants. </span> <span class="line" data-startTime="860">So this was the developer </span><span class="line" data-startTime="860">side. </span> <span class="line" data-startTime="862">What's the user going to see? </span><span class="line" data-startTime="864">Well, back to the </span><span class="line" data-startTime="864">manifest again. </span> <span class="line" data-startTime="867">Instead of, previously remember </span><span class="line" data-startTime="867">we had one line for </span><span class="line" data-startTime="870">each of the ISAs that were </span><span class="line" data-startTime="870">supported by the application. </span></p>

<p><span class="line" data-startTime="879">Instead of that, we </span><span class="line" data-startTime="879">just have one. </span> <span class="line" data-startTime="881">And the one says </span><span class="line" data-startTime="881">it's portable. </span> <span class="line" data-startTime="884">You still have to say </span><span class="line" data-startTime="884">where to find it. </span> <span class="line" data-startTime="885">That's an URL. </span> <span class="line" data-startTime="887">And there's one other little </span><span class="line" data-startTime="887">gadget I'll tell you about </span><span class="line" data-startTime="890">here a little later. </span> <span class="line" data-startTime="891">But the developer, when he put </span><span class="line" data-startTime="891">that up, can say, where to </span><span class="line" data-startTime="894">find the performance setting. </span> <span class="line" data-startTime="896">And so basically this will </span><span class="line" data-startTime="896">be a trade off between </span><span class="line" data-startTime="900">translation time and full </span><span class="line" data-startTime="900">bore performance. </span> <span class="line" data-startTime="906">So the user, when he start </span><span class="line" data-startTime="906">things up, the browser sees </span><span class="line" data-startTime="910">again the embed tag. </span> <span class="line" data-startTime="911">It looks at the manifest file. </span> <span class="line" data-startTime="913">And it sees there's a </span><span class="line" data-startTime="913">portable executable. </span></p>

<p><span class="line" data-startTime="916">And this time, instead of </span><span class="line" data-startTime="916">immediately starting the </span><span class="line" data-startTime="919">Native Client process, it has to </span><span class="line" data-startTime="919">start something called the </span><span class="line" data-startTime="922">translator. </span> <span class="line" data-startTime="924">Now the translator has the </span><span class="line" data-startTime="924">responsibility of taking it </span><span class="line" data-startTime="925">from this portable executable </span><span class="line" data-startTime="925">format and producing the ISA </span><span class="line" data-startTime="930">specific executable that </span><span class="line" data-startTime="930">runs on the platform. </span> <span class="line" data-startTime="933">I'm still on an x86 64. </span> <span class="line" data-startTime="935">So it produces a nexe. </span> <span class="line" data-startTime="937">Once it's produced that nexe, </span><span class="line" data-startTime="937">it again passes that to the </span><span class="line" data-startTime="940">Native Client process that it </span><span class="line" data-startTime="940">creates because we've already </span><span class="line" data-startTime="944">shown that we know how to run </span><span class="line" data-startTime="944">native code securely. </span> <span class="line" data-startTime="947">So once it's translated, it runs </span><span class="line" data-startTime="947">the same way as it always </span><span class="line" data-startTime="951">has in NaCl. </span> <span class="line" data-startTime="954">So what's more, the translator </span><span class="line" data-startTime="954">is more than just a </span><span class="line" data-startTime="959">compiler back end. </span> <span class="line" data-startTime="960">It's more than just the part </span><span class="line" data-startTime="960">that takes the bit code and </span><span class="line" data-startTime="963">produces native code. </span> <span class="line" data-startTime="966">The translator's responsible for </span><span class="line" data-startTime="966">taking basically the pexe. </span></p>

<p><span class="line" data-startTime="972">And the first thing it does is </span><span class="line" data-startTime="972">see, do I already have a </span><span class="line" data-startTime="974">translation for that? </span><span class="line" data-startTime="976">And we have a translation </span><span class="line" data-startTime="976">cache. </span> <span class="line" data-startTime="977">And the translation cache will </span><span class="line" data-startTime="977">keep track of all the times </span><span class="line" data-startTime="980">that we've previously </span><span class="line" data-startTime="980">translated it. </span> <span class="line" data-startTime="982">If there is something </span><span class="line" data-startTime="982">there, and voila. </span> <span class="line" data-startTime="985">We start the Native </span><span class="line" data-startTime="985">Client process. </span> <span class="line" data-startTime="987">And off we go. </span> <span class="line" data-startTime="989">If not, we have to start </span><span class="line" data-startTime="989">the translator. </span> <span class="line" data-startTime="992">And again, for those of you who </span><span class="line" data-startTime="992">are familiar with LLVM, </span><span class="line" data-startTime="994">this will be familiar. </span> <span class="line" data-startTime="996">LLC is the back end of the </span><span class="line" data-startTime="996">LLVM compiler tool chain. </span> <span class="line" data-startTime="1000">We'll start LLC. </span> <span class="line" data-startTime="1002">And LLC will stream the </span><span class="line" data-startTime="1002">executable down from the web. </span></p>

<p><span class="line" data-startTime="1008">So we've changed it to interface </span><span class="line" data-startTime="1008">with the web to </span><span class="line" data-startTime="1011">actually pull the pexe down. </span> <span class="line" data-startTime="1012">And while the pexe is being </span><span class="line" data-startTime="1012">pulled down, it will be </span><span class="line" data-startTime="1015">translating the previous parts </span><span class="line" data-startTime="1015">that have been pulled down. </span> <span class="line" data-startTime="1018">So we dovetail translation </span><span class="line" data-startTime="1018">with download. </span> <span class="line" data-startTime="1022">And it will produce a nexe. </span> <span class="line" data-startTime="1024">And you might have noticed this </span><span class="line" data-startTime="1024">is running on a Native </span><span class="line" data-startTime="1026">Client process. </span> <span class="line" data-startTime="1027">This is to provide additional </span><span class="line" data-startTime="1027">security from a tax where if </span><span class="line" data-startTime="1031">somebody puts on a malicious </span><span class="line" data-startTime="1031">page a pexe that tries to own </span><span class="line" data-startTime="1034">the translator. </span> <span class="line" data-startTime="1035">In previous situations, there </span><span class="line" data-startTime="1035">have been language </span><span class="line" data-startTime="1038">environments that had jets </span><span class="line" data-startTime="1038">that were exploited by </span><span class="line" data-startTime="1042">unscrupulous pages </span><span class="line" data-startTime="1042">to do things. </span> <span class="line" data-startTime="1044">And this is an additional </span><span class="line" data-startTime="1044">level of secure </span><span class="line" data-startTime="1046">execution for PNaCl. </span> <span class="line" data-startTime="1049">So once we have the nexe, </span><span class="line" data-startTime="1049">they put it in the </span><span class="line" data-startTime="1051">cache, and off we go. </span></p>

<p><span class="line" data-startTime="1055">So you're probably asking </span><span class="line" data-startTime="1055">yourself, this guy's up here </span><span class="line" data-startTime="1057">talking about all this </span><span class="line" data-startTime="1057">compiler stuff. </span> <span class="line" data-startTime="1059">I think it's really cool. </span> <span class="line" data-startTime="1060">We've got compilers, we've got </span><span class="line" data-startTime="1060">caches, we've got Native </span><span class="line" data-startTime="1062">Client executables. </span> <span class="line" data-startTime="1063">And I'd love to talk </span><span class="line" data-startTime="1063">to you about that. </span> <span class="line" data-startTime="1064">But you're asking yourself, </span><span class="line" data-startTime="1064">how do I use it? </span><span class="line" data-startTime="1069">Well, I have some good news for </span><span class="line" data-startTime="1069">those of you chomping at </span><span class="line" data-startTime="1070">the bit to get using it. </span> <span class="line" data-startTime="1072">We have a developer </span><span class="line" data-startTime="1072">preview in Chrome. </span> <span class="line" data-startTime="1075">Developer preview is in Chrome </span><span class="line" data-startTime="1075">29, actually it's in canary as </span><span class="line" data-startTime="1079">we speak, going to dev channel </span><span class="line" data-startTime="1079">I don't know what exactly the </span><span class="line" data-startTime="1082">dates are but within </span><span class="line" data-startTime="1082">a few days I hope. </span> <span class="line" data-startTime="1084">So there's a flag. </span> <span class="line" data-startTime="1086">You can go to About Flags. </span> <span class="line" data-startTime="1088">And you can look for Portable </span><span class="line" data-startTime="1088">Native Client. </span> <span class="line" data-startTime="1090">You can toggle the flag. </span></p>

<p><span class="line" data-startTime="1092">Toggle the flag. </span> <span class="line" data-startTime="1094">Go to the Chrome Web Store. </span> <span class="line" data-startTime="1095">Find our Portable Native </span><span class="line" data-startTime="1095">Client examples. </span> <span class="line" data-startTime="1099">And you can try it </span><span class="line" data-startTime="1099">out yourself. </span> <span class="line" data-startTime="1101">And here, in a couple of minutes </span><span class="line" data-startTime="1101">I'll show you some of </span><span class="line" data-startTime="1103">that running. </span> <span class="line" data-startTime="1104">You can see it for yourself. </span> <span class="line" data-startTime="1106">What we're really </span><span class="line" data-startTime="1106">after, though &mdash; </span><span class="line" data-startTime="1107">this is an early preview. </span> <span class="line" data-startTime="1108">Things may be changing. </span> <span class="line" data-startTime="1111">We're looking for </span><span class="line" data-startTime="1111">your feedback. </span> <span class="line" data-startTime="1112">What did you see for </span><span class="line" data-startTime="1112">translation time? </span><span class="line" data-startTime="1114">What did you see for the </span><span class="line" data-startTime="1114">performance that we </span><span class="line" data-startTime="1115">delivered for you? </span><span class="line" data-startTime="1117">What did you see about the </span><span class="line" data-startTime="1117">executable sizes, et cetera </span><span class="line" data-startTime="1119">that you might want </span><span class="line" data-startTime="1119">to play with? </span><span class="line" data-startTime="1122">We want you to give us feedback </span><span class="line" data-startTime="1122">on what you observe </span><span class="line" data-startTime="1125">at gonacl.com. </span> <span class="line" data-startTime="1127">And that's still a </span><span class="line" data-startTime="1127">work in progress. </span> <span class="line" data-startTime="1128">We've put up some Portable </span><span class="line" data-startTime="1128">Native Client stuff that's </span><span class="line" data-startTime="1131">just very, very much </span><span class="line" data-startTime="1131">in the beginning. </span> <span class="line" data-startTime="1134">But we're going to be adding </span><span class="line" data-startTime="1134">more as we go along. </span></p>

<p><span class="line" data-startTime="1138">But the things we do </span><span class="line" data-startTime="1138">already have &mdash; </span><span class="line" data-startTime="1141">we do have an SDK for this. </span> <span class="line" data-startTime="1144">And it just so happens, it's </span><span class="line" data-startTime="1144">already part of the Native </span><span class="line" data-startTime="1146">Client SDK. </span> <span class="line" data-startTime="1147">If you've downloaded the more </span><span class="line" data-startTime="1147">recent Native Client SDKs, so </span><span class="line" data-startTime="1149">you pick the 29 SDK. </span> <span class="line" data-startTime="1151">You have the compiler, the </span><span class="line" data-startTime="1151">debugger, the libraries that </span><span class="line" data-startTime="1155">will build Portable Native </span><span class="line" data-startTime="1155">Client applications for you. </span> <span class="line" data-startTime="1159">And also the NaCl port stuff, </span><span class="line" data-startTime="1159">which has recently become part </span><span class="line" data-startTime="1163">of our SDK story. </span> <span class="line" data-startTime="1164">So you can see there's a bunch </span><span class="line" data-startTime="1164">of libraries there that we </span><span class="line" data-startTime="1168">have ported. </span> <span class="line" data-startTime="1169">And so you can build </span><span class="line" data-startTime="1169">applications with a lot of </span><span class="line" data-startTime="1172">these things as well. </span> <span class="line" data-startTime="1174">And you're probably asking </span><span class="line" data-startTime="1174">yourself so porting libraries. </span> <span class="line" data-startTime="1177">Why did you have to </span><span class="line" data-startTime="1177">port libraries? </span><span class="line" data-startTime="1178">This is a compiler tool chain. </span></p>

<p><span class="line" data-startTime="1179">Shouldn't I just be able to </span><span class="line" data-startTime="1179">compile anything just by </span><span class="line" data-startTime="1181">changing my cc variable </span><span class="line" data-startTime="1181">in my make file? </span><span class="line" data-startTime="1184">Well, there's a little more to </span><span class="line" data-startTime="1184">it than that because it's </span><span class="line" data-startTime="1189">native code. </span> <span class="line" data-startTime="1190">It's running in the </span><span class="line" data-startTime="1190">web browser. </span> <span class="line" data-startTime="1191">We need secure APIs for </span><span class="line" data-startTime="1191">doing these plug ins. </span> <span class="line" data-startTime="1196">So where your native application </span><span class="line" data-startTime="1196">might have used </span><span class="line" data-startTime="1199">message queues or event </span><span class="line" data-startTime="1199">registration mechanisms that </span><span class="line" data-startTime="1204">the operating system provides. </span> <span class="line" data-startTime="1205">Now, your application is going </span><span class="line" data-startTime="1205">to be talking to the browser </span><span class="line" data-startTime="1208">to get those kinds </span><span class="line" data-startTime="1208">of event streams. </span> <span class="line" data-startTime="1211">Furthermore, where you might </span><span class="line" data-startTime="1211">have gotten a hardware device </span><span class="line" data-startTime="1213">context, the H wind or whatever </span><span class="line" data-startTime="1213">to scribble your 2D </span><span class="line" data-startTime="1216">applications output into, now </span><span class="line" data-startTime="1216">you're going to have to change </span><span class="line" data-startTime="1221">those to use secure interfaces </span><span class="line" data-startTime="1221">that actually interface with </span><span class="line" data-startTime="1224">the browser. </span></p>

<p><span class="line" data-startTime="1226">And last, then, of course, </span><span class="line" data-startTime="1226">unfiltered file access is not </span><span class="line" data-startTime="1230">going to be OK. </span> <span class="line" data-startTime="1230">So you'll have to do some </span><span class="line" data-startTime="1230">work to actually make </span><span class="line" data-startTime="1233">file accesses work. </span> <span class="line" data-startTime="1236">And we have examples of this in </span><span class="line" data-startTime="1236">our SDK that you can work </span><span class="line" data-startTime="1239">from to start with. </span> <span class="line" data-startTime="1241">We have a very vibrant developer </span><span class="line" data-startTime="1241">discussion list. </span> <span class="line" data-startTime="1243">And you could join that. </span> <span class="line" data-startTime="1247">Or last year, a couple of my </span><span class="line" data-startTime="1247">good friends were here. </span> <span class="line" data-startTime="1251">That's Colt and Noel. </span> <span class="line" data-startTime="1253">And they gave a talk about </span><span class="line" data-startTime="1253">porting a Native Client </span><span class="line" data-startTime="1255">application in 60 minutes. </span> <span class="line" data-startTime="1258">So they took an application, </span><span class="line" data-startTime="1258">took it from a running native </span><span class="line" data-startTime="1262">application on Windows, used </span><span class="line" data-startTime="1262">some of the tools that I'm </span><span class="line" data-startTime="1265">showing down here </span><span class="line" data-startTime="1265">at the bottom. </span> <span class="line" data-startTime="1266">They used the visual studio </span><span class="line" data-startTime="1266">integration that we have. </span> <span class="line" data-startTime="1269">They used the debugger </span><span class="line" data-startTime="1269">that we have. </span> <span class="line" data-startTime="1272">And they showed how to take it </span><span class="line" data-startTime="1272">step by step through this long </span><span class="line" data-startTime="1275">sequence of steps here, most </span><span class="line" data-startTime="1275">of which is about just </span><span class="line" data-startTime="1279">building things to be </span><span class="line" data-startTime="1279">PPAPI compliant. </span></p>

<p><span class="line" data-startTime="1283">And that's where you're going to </span><span class="line" data-startTime="1283">spend most of your time as </span><span class="line" data-startTime="1284">you port an application to </span><span class="line" data-startTime="1284">Native Client is the PPAPI </span><span class="line" data-startTime="1288">translation. </span> <span class="line" data-startTime="1290">And since we provide threads </span><span class="line" data-startTime="1290">in these environments, </span><span class="line" data-startTime="1293">particularly converting threads </span><span class="line" data-startTime="1293">from one thread </span><span class="line" data-startTime="1296">package to P threads can </span><span class="line" data-startTime="1296">be a challenging </span><span class="line" data-startTime="1298">part of that equation. </span> <span class="line" data-startTime="1299">So there will take some </span><span class="line" data-startTime="1299">time in porting. </span> <span class="line" data-startTime="1303">But once you've got it ported, </span><span class="line" data-startTime="1303">then you have a Native Client </span><span class="line" data-startTime="1306">application. </span></p>

<p><span class="line" data-startTime="1307">So what does it take to bring </span><span class="line" data-startTime="1307">a Portable Native Client </span><span class="line" data-startTime="1309">application? </span><span class="line" data-startTime="1313">Really one more step. </span> <span class="line" data-startTime="1315">That one more step is that you </span><span class="line" data-startTime="1315">need to remove assembly code. </span> <span class="line" data-startTime="1325">As I said before, these </span><span class="line" data-startTime="1325">are portable. </span> <span class="line" data-startTime="1326">They're not tied to a particular </span><span class="line" data-startTime="1326">instruction set </span><span class="line" data-startTime="1328">architecture. </span> <span class="line" data-startTime="1328">So having assembly code </span><span class="line" data-startTime="1328">just violates </span><span class="line" data-startTime="1330">portability on its very face. </span> <span class="line" data-startTime="1332">So you have to remove </span><span class="line" data-startTime="1332">the assembly code. </span> <span class="line" data-startTime="1333">But that's pretty much </span><span class="line" data-startTime="1333">the only thing </span><span class="line" data-startTime="1335">that you have to have. </span> <span class="line" data-startTime="1338">I need to take a little step </span><span class="line" data-startTime="1338">back and say, we're bringing </span><span class="line" data-startTime="1341">native binaries to the web. </span> <span class="line" data-startTime="1344">We're bringing large, immersive </span><span class="line" data-startTime="1344">high performance </span><span class="line" data-startTime="1348">applications to the web. </span></p>

<p><span class="line" data-startTime="1350">These may not be small. </span> <span class="line" data-startTime="1353">So one of the web design </span><span class="line" data-startTime="1353">principles that you'll need to </span><span class="line" data-startTime="1356">be aware of in doing this &mdash; </span><span class="line" data-startTime="1360">now there are many versions </span><span class="line" data-startTime="1360">of this sort of thing. </span> <span class="line" data-startTime="1362">But it has to do with the </span><span class="line" data-startTime="1362">StartUp Experience. </span> <span class="line" data-startTime="1365">That when you surf to that </span><span class="line" data-startTime="1365">page, the user is sitting </span><span class="line" data-startTime="1368">there waiting, waiting, and </span><span class="line" data-startTime="1368">waiting while you download an </span><span class="line" data-startTime="1371">application. </span> <span class="line" data-startTime="1372">Be that in nexe, or a large </span><span class="line" data-startTime="1372">JavaScript file, or a pexe, it </span><span class="line" data-startTime="1378">is something that the user wants </span><span class="line" data-startTime="1378">to be aware of something </span><span class="line" data-startTime="1381">going on, wants to be aware of </span><span class="line" data-startTime="1381">and be able to deal with as </span><span class="line" data-startTime="1386">part of the application </span><span class="line" data-startTime="1386">experience. </span> <span class="line" data-startTime="1389">So when I surf to this SSH page, </span><span class="line" data-startTime="1389">the translator's going </span><span class="line" data-startTime="1395">to kick off for us. </span></p>

<p><span class="line" data-startTime="1396">Now I said that we're going </span><span class="line" data-startTime="1396">to stream translation. </span> <span class="line" data-startTime="1398">So the download time </span><span class="line" data-startTime="1398">and the translation </span><span class="line" data-startTime="1400">time are largely overlap. </span> <span class="line" data-startTime="1401">But there will be a small </span><span class="line" data-startTime="1401">addition to the download time </span><span class="line" data-startTime="1405">to do the translation. </span> <span class="line" data-startTime="1408">So we provide you with </span><span class="line" data-startTime="1408">progress events. </span> <span class="line" data-startTime="1414">Now the progress events will </span><span class="line" data-startTime="1414">be able to tell you in the </span><span class="line" data-startTime="1419">JavaScript, I'm making </span><span class="line" data-startTime="1419">progress. </span> <span class="line" data-startTime="1422">I've got this much of the </span><span class="line" data-startTime="1422">code actually compiled. </span> <span class="line" data-startTime="1424">And you can put a progress </span><span class="line" data-startTime="1424">bar at the top of your </span><span class="line" data-startTime="1426">application. </span> <span class="line" data-startTime="1427">And I'll show you </span><span class="line" data-startTime="1427">that in a little </span><span class="line" data-startTime="1428">second here, an example. </span> <span class="line" data-startTime="1430">So that's one thing </span><span class="line" data-startTime="1430">you can do. </span> <span class="line" data-startTime="1433">Another thing you can do is </span><span class="line" data-startTime="1433">think about your application </span><span class="line" data-startTime="1435">architecture a little bit. </span></p>

<p><span class="line" data-startTime="1436">A lot of those examples I </span><span class="line" data-startTime="1436">showed you awhile ago of </span><span class="line" data-startTime="1438">things that people have done, </span><span class="line" data-startTime="1438">cool things that people have </span><span class="line" data-startTime="1440">done with Native Client </span><span class="line" data-startTime="1440">were games. </span> <span class="line" data-startTime="1442">And games tend to have this </span><span class="line" data-startTime="1442">property that you have maybe a </span><span class="line" data-startTime="1445">medium to large application and </span><span class="line" data-startTime="1445">a huge bunch of assets. </span> <span class="line" data-startTime="1449">You have a lot of 3D textures, </span><span class="line" data-startTime="1449">and game areas, et cetera that </span><span class="line" data-startTime="1454">you want to download. </span> <span class="line" data-startTime="1456">So if your application </span><span class="line" data-startTime="1456">architecture says, I'm going </span><span class="line" data-startTime="1459">to have the executable actually </span><span class="line" data-startTime="1459">slurp down the </span><span class="line" data-startTime="1462">assets, then in a system where </span><span class="line" data-startTime="1462">you're pulling down a large </span><span class="line" data-startTime="1465">executable, translating it, </span><span class="line" data-startTime="1465">and then having to have it </span><span class="line" data-startTime="1469">start running before you start </span><span class="line" data-startTime="1469">pulling any assets down, it's </span><span class="line" data-startTime="1472">going to be awhile before you </span><span class="line" data-startTime="1472">actually get to useful work </span><span class="line" data-startTime="1476">that the user can experience. </span> <span class="line" data-startTime="1479">Maybe if your application has </span><span class="line" data-startTime="1479">a static asset list that you </span><span class="line" data-startTime="1483">can know ahead of time. </span></p>

<p><span class="line" data-startTime="1485">Say it has got a few animals </span><span class="line" data-startTime="1485">for your games that </span><span class="line" data-startTime="1488">you want to put up. </span> <span class="line" data-startTime="1489">And you know those </span><span class="line" data-startTime="1489">ahead of time. </span> <span class="line" data-startTime="1491">Maybe a better way to do it is </span><span class="line" data-startTime="1491">to have the JavaScript request </span><span class="line" data-startTime="1495">those assets, put them in a </span><span class="line" data-startTime="1495">local HTML file system, and </span><span class="line" data-startTime="1500">then let Native Client open </span><span class="line" data-startTime="1500">the local HTML file system </span><span class="line" data-startTime="1502">afterwards. </span> <span class="line" data-startTime="1503">This gives you the ability </span><span class="line" data-startTime="1503">that the assets are being </span><span class="line" data-startTime="1505">download while the translation's </span><span class="line" data-startTime="1505">happening and </span><span class="line" data-startTime="1507">maybe even dovetailing with some </span><span class="line" data-startTime="1507">of the download of the </span><span class="line" data-startTime="1509">pexe itself and gets you to </span><span class="line" data-startTime="1509">useful work in the game or the </span><span class="line" data-startTime="1512">application at large faster. </span> <span class="line" data-startTime="1516">Lastly, I told you I had that </span><span class="line" data-startTime="1516">fiddle in there, that one </span><span class="line" data-startTime="1518">extra entry in the </span><span class="line" data-startTime="1518">manifest file. </span></p>

<p><span class="line" data-startTime="1521">And that was to control what we </span><span class="line" data-startTime="1521">called optimization level. </span> <span class="line" data-startTime="1526">I told you before that pexe to </span><span class="line" data-startTime="1526">nexe translation is actually </span><span class="line" data-startTime="1529">the back end of a compiler. </span> <span class="line" data-startTime="1531">So there is some amount of </span><span class="line" data-startTime="1531">optimization that still </span><span class="line" data-startTime="1534">happens in that part </span><span class="line" data-startTime="1534">of the compiler. </span> <span class="line" data-startTime="1537">Such things as registrar </span><span class="line" data-startTime="1537">allocation and high </span><span class="line" data-startTime="1539">performance scheduling can </span><span class="line" data-startTime="1539">take some extra time and </span><span class="line" data-startTime="1542">produce some extra </span><span class="line" data-startTime="1542">performance. </span> <span class="line" data-startTime="1544">So we provide the developer with </span><span class="line" data-startTime="1544">the ability to specify, I </span><span class="line" data-startTime="1549">want low optimization, which </span><span class="line" data-startTime="1549">gives you a faster translation </span><span class="line" data-startTime="1553">time, and about 50% of </span><span class="line" data-startTime="1553">native performance. </span> <span class="line" data-startTime="1556">Or you can request higher </span><span class="line" data-startTime="1556">optimization levels, take a </span><span class="line" data-startTime="1560">translation time slow down and </span><span class="line" data-startTime="1560">get a much higher performance, </span><span class="line" data-startTime="1566">the 80 plus percent of native </span><span class="line" data-startTime="1566">code performance. </span> <span class="line" data-startTime="1570">So these are the things that </span><span class="line" data-startTime="1570">the developer can do to try </span><span class="line" data-startTime="1572">and improve the user </span><span class="line" data-startTime="1572">experience. </span> <span class="line" data-startTime="1576">So look at concrete about </span><span class="line" data-startTime="1576">the translation rates. </span></p>

<p><span class="line" data-startTime="1579">So since we're adding </span><span class="line" data-startTime="1579">translation, which was </span><span class="line" data-startTime="1581">something that was not there in </span><span class="line" data-startTime="1581">Native Client, we have to </span><span class="line" data-startTime="1582">talk about that just </span><span class="line" data-startTime="1582">a little bit. </span> <span class="line" data-startTime="1585">So as you can see on x86, </span><span class="line" data-startTime="1585">we're doing about 750 </span><span class="line" data-startTime="1588">kilobytes a second, which will </span><span class="line" data-startTime="1588">about keep up with the average </span><span class="line" data-startTime="1591">American's DSL sort </span><span class="line" data-startTime="1591">of connection. </span> <span class="line" data-startTime="1595">I think the average American's </span><span class="line" data-startTime="1595">bandwidth is about what six </span><span class="line" data-startTime="1597">megabits a second </span><span class="line" data-startTime="1597">or so nowadays. </span> <span class="line" data-startTime="1599">So we can keep up with that. </span> <span class="line" data-startTime="1601">So we think that it's reasonably </span><span class="line" data-startTime="1601">balanced against </span><span class="line" data-startTime="1603">that at the moment. </span></p>

<p><span class="line" data-startTime="1604">ARM. </span> <span class="line" data-startTime="1605">It's a little earlier </span><span class="line" data-startTime="1605">in the process. </span> <span class="line" data-startTime="1606">And we are seeing a lower number </span><span class="line" data-startTime="1606">for ARM, partly because </span><span class="line" data-startTime="1610">the processors aren't quite as </span><span class="line" data-startTime="1610">beefy but also because we know </span><span class="line" data-startTime="1613">there are some features of the </span><span class="line" data-startTime="1613">ARM translator that we haven't </span><span class="line" data-startTime="1616">brought to bear that are going </span><span class="line" data-startTime="1616">to speed our translation </span><span class="line" data-startTime="1618">considerably. </span> <span class="line" data-startTime="1620">And then if you want optimize </span><span class="line" data-startTime="1620">code, as I said you want more </span><span class="line" data-startTime="1625">optimize code, two to three </span><span class="line" data-startTime="1625">times sort of slow downs but </span><span class="line" data-startTime="1630">with the considerably higher </span><span class="line" data-startTime="1630">performance that you get for </span><span class="line" data-startTime="1633">it as well. </span></p>

<p><span class="line" data-startTime="1635">Performance. </span> <span class="line" data-startTime="1637">I already said, what </span><span class="line" data-startTime="1637">was the performance </span><span class="line" data-startTime="1638">number that you see? </span><span class="line" data-startTime="1640">Well, we've done a </span><span class="line" data-startTime="1640">few benchmarks. </span> <span class="line" data-startTime="1642">We're going to do a lot more. </span> <span class="line" data-startTime="1642">We're still in the process of </span><span class="line" data-startTime="1642">gathering a lot of benchmarks. </span> <span class="line" data-startTime="1645">But the Box2D benchmarks at O0, </span><span class="line" data-startTime="1645">we're seeing about 55% of </span><span class="line" data-startTime="1649">native performance. </span> <span class="line" data-startTime="1651">And at O2 we're seeing 85%. </span> <span class="line" data-startTime="1654">For SPEC about 50 and more </span><span class="line" data-startTime="1654">like 90% of native </span><span class="line" data-startTime="1659">performance. </span> <span class="line" data-startTime="1660">SPEC is a kind of a standard </span><span class="line" data-startTime="1660">platform CPU intensive </span><span class="line" data-startTime="1662">benchmark suite. </span></p>

<p><span class="line" data-startTime="1664">So we think this is a </span><span class="line" data-startTime="1664">pretty good start. </span> <span class="line" data-startTime="1665">We have a lot of additional </span><span class="line" data-startTime="1665">optimization work that we're </span><span class="line" data-startTime="1669">going to be doing and a lot of </span><span class="line" data-startTime="1669">additional translation time </span><span class="line" data-startTime="1673">performance changes </span><span class="line" data-startTime="1673">we're working on. </span> <span class="line" data-startTime="1675">It should be emphasized that the </span><span class="line" data-startTime="1675">translation stuff that I </span><span class="line" data-startTime="1677">just talked about a second </span><span class="line" data-startTime="1677">ago, that's still single </span><span class="line" data-startTime="1680">threaded translation for us. </span> <span class="line" data-startTime="1682">So we haven't done </span><span class="line" data-startTime="1682">multi-threaded </span><span class="line" data-startTime="1683">translation yet here. </span> <span class="line" data-startTime="1687">So I talked about </span><span class="line" data-startTime="1687">the developer. </span> <span class="line" data-startTime="1688">I talked about the user. </span> <span class="line" data-startTime="1691">So how does the user get the </span><span class="line" data-startTime="1691">cool application that the </span><span class="line" data-startTime="1694">developer built in PNaCl? </span><span class="line" data-startTime="1698">Instead of putting it in the </span><span class="line" data-startTime="1698">Chrome Web Store as we did </span><span class="line" data-startTime="1700">with NaCl, it's going </span><span class="line" data-startTime="1700">to be in the web. </span> <span class="line" data-startTime="1703">You put it up on your favorite </span><span class="line" data-startTime="1703">Apache server or whatever your </span><span class="line" data-startTime="1706">server of choice happens </span><span class="line" data-startTime="1706">to be, it's going </span><span class="line" data-startTime="1707">to be on the web. </span></p>

<p><span class="line" data-startTime="1711">So let's talk a little bit about </span><span class="line" data-startTime="1711">applications actually </span><span class="line" data-startTime="1726">running in the web. </span> <span class="line" data-startTime="1728">So this is the PNaCl examples </span><span class="line" data-startTime="1728">extension that I talked to you </span><span class="line" data-startTime="1734">about before. </span> <span class="line" data-startTime="1736">And this is running one of the </span><span class="line" data-startTime="1736">benchmarks, or the examples </span><span class="line" data-startTime="1739">that's there. </span> <span class="line" data-startTime="1742">This is to start our favorite </span><span class="line" data-startTime="1742">spinning cube from the demo </span><span class="line" data-startTime="1745">from last year. </span> <span class="line" data-startTime="1746">And you can see there's </span><span class="line" data-startTime="1746">a little bit of a </span><span class="line" data-startTime="1747">pause in the beginning. </span> <span class="line" data-startTime="1748">That's the translation time </span><span class="line" data-startTime="1748">and the download from the </span><span class="line" data-startTime="1751">local machine. </span> <span class="line" data-startTime="1754">That's the first time </span><span class="line" data-startTime="1754">experience. </span> <span class="line" data-startTime="1759">And after the first time, it </span><span class="line" data-startTime="1759">pulls it from the cache, it </span><span class="line" data-startTime="1763">just starts. </span> <span class="line" data-startTime="1764">And even the start up time is </span><span class="line" data-startTime="1764">improving because we're doing </span><span class="line" data-startTime="1768">some Native Client improvements </span><span class="line" data-startTime="1768">actually that'll </span><span class="line" data-startTime="1770">reduce the overhead of </span><span class="line" data-startTime="1770">validation, which you can </span><span class="line" data-startTime="1773">still occasionally see. </span> <span class="line" data-startTime="1776">So you can see it's not </span><span class="line" data-startTime="1776">a terribly long </span><span class="line" data-startTime="1778">pause to start with. </span> <span class="line" data-startTime="1779">But it gets even better </span><span class="line" data-startTime="1779">on the second time. </span> <span class="line" data-startTime="1782">Here's a little bigger </span><span class="line" data-startTime="1782">application. </span> <span class="line" data-startTime="1783">This is Bullet Physics. </span></p>

<p><span class="line" data-startTime="1785">And you could see there's our </span><span class="line" data-startTime="1785">progress meter going. </span> <span class="line" data-startTime="1789">And we're done. </span> <span class="line" data-startTime="1794">And there go our 500 </span><span class="line" data-startTime="1794">cylinders falling. </span> <span class="line" data-startTime="1802">And here it is on </span><span class="line" data-startTime="1802">the second time. </span> <span class="line" data-startTime="1805">You see the progress meter </span><span class="line" data-startTime="1805">move so fast you </span><span class="line" data-startTime="1807">couldn't even see it. </span> <span class="line" data-startTime="1808">And we're ready to go. </span> <span class="line" data-startTime="1814">Lastly, if you build without </span><span class="line" data-startTime="1814">optimization, you can see the </span><span class="line" data-startTime="1821">progress bar chugs a little </span><span class="line" data-startTime="1821">faster and gets you visually </span><span class="line" data-startTime="1827">pretty close looking </span><span class="line" data-startTime="1827">performance. </span> <span class="line" data-startTime="1830">So that's the O level </span><span class="line" data-startTime="1830">translation that I talked </span><span class="line" data-startTime="1833">about before. </span> <span class="line" data-startTime="1834">That versus &mdash; this was O0. </span> <span class="line" data-startTime="1836">The previous one I showed </span><span class="line" data-startTime="1836">you on cache was O2. </span> <span class="line" data-startTime="1845">So hopefully, you've </span><span class="line" data-startTime="1845">seen there's some </span><span class="line" data-startTime="1846">real potential here. </span> <span class="line" data-startTime="1847">We're really excited </span><span class="line" data-startTime="1847">about this. </span> <span class="line" data-startTime="1848">We think this is going to bring </span><span class="line" data-startTime="1848">us the ability to really </span><span class="line" data-startTime="1851">put some cool stuff </span><span class="line" data-startTime="1851">in the web. </span> <span class="line" data-startTime="1852">Really immersive for high </span><span class="line" data-startTime="1852">performance native </span><span class="line" data-startTime="1854">applications on the web. </span></p>

<p><span class="line" data-startTime="1857">So we're working really hard now </span><span class="line" data-startTime="1857">on bringing that out into </span><span class="line" data-startTime="1860">the market. </span> <span class="line" data-startTime="1862">We're planning for a launch. </span> <span class="line" data-startTime="1863">We're working hard </span><span class="line" data-startTime="1863">for a launch. </span> <span class="line" data-startTime="1864">And we're going to bring all </span><span class="line" data-startTime="1864">the instructions and </span><span class="line" data-startTime="1867">architectures that you had with </span><span class="line" data-startTime="1867">Native Client for the </span><span class="line" data-startTime="1870">first launch. </span> <span class="line" data-startTime="1871">We're going to have threads </span><span class="line" data-startTime="1871">and atomics of day one as </span><span class="line" data-startTime="1874">we've always had with </span><span class="line" data-startTime="1874">Native Client. </span> <span class="line" data-startTime="1876">And as I said before, we'll have </span><span class="line" data-startTime="1876">the SDK full of all the </span><span class="line" data-startTime="1879">tools that you've come </span><span class="line" data-startTime="1879">to know and love. </span></p>

<p><span class="line" data-startTime="1881">The Windows Visual Studio work </span><span class="line" data-startTime="1881">is still sort of ongoing. </span> <span class="line" data-startTime="1884">That may be a little later. </span> <span class="line" data-startTime="1885">But for the most part, you'll </span><span class="line" data-startTime="1885">have all the tools that you </span><span class="line" data-startTime="1887">had with Native Client, </span><span class="line" data-startTime="1887">especially the debugger. </span> <span class="line" data-startTime="1890">This was one of the things that </span><span class="line" data-startTime="1890">we're very proud that we </span><span class="line" data-startTime="1893">have added recently </span><span class="line" data-startTime="1893">to the Native </span><span class="line" data-startTime="1894">Client Development Suite. </span> <span class="line" data-startTime="1899">Unfortunately, for the first </span><span class="line" data-startTime="1899">release, we've had to </span><span class="line" data-startTime="1902">defeature SIMD instructions and </span><span class="line" data-startTime="1902">C++ Exception Handling. </span> <span class="line" data-startTime="1906">These are the two things that </span><span class="line" data-startTime="1906">we really wish we could have </span><span class="line" data-startTime="1909">delivered in the first version </span><span class="line" data-startTime="1909">but I think we're probably not </span><span class="line" data-startTime="1911">going to make. </span> <span class="line" data-startTime="1912">So we have a first update </span><span class="line" data-startTime="1912">already sort of in the works. </span></p>

<p><span class="line" data-startTime="1915">And the first update provides </span><span class="line" data-startTime="1915">one of its big benefits will </span><span class="line" data-startTime="1918">bring SIMD instructions. </span> <span class="line" data-startTime="1919">For a broad class of SIMD </span><span class="line" data-startTime="1919">instructions, things like four </span><span class="line" data-startTime="1923">wide 32-bit float additions, </span><span class="line" data-startTime="1923">and multiplications, and </span><span class="line" data-startTime="1927">places that sort of strike </span><span class="line" data-startTime="1927">the sweet spot in these </span><span class="line" data-startTime="1929">applications. </span> <span class="line" data-startTime="1929">We think we can do </span><span class="line" data-startTime="1929">those in SIMD. </span> <span class="line" data-startTime="1931">So our first update </span><span class="line" data-startTime="1931">will have that. </span> <span class="line" data-startTime="1935">And in the second update, we'll </span><span class="line" data-startTime="1935">hopefully bring C++ </span><span class="line" data-startTime="1938">exception handling and </span><span class="line" data-startTime="1938">resolve that issue. </span> <span class="line" data-startTime="1942">A couple of things to mention </span><span class="line" data-startTime="1942">are that dynamic linking </span><span class="line" data-startTime="1944">support and JIT support are </span><span class="line" data-startTime="1944">sort of longer term issues </span><span class="line" data-startTime="1948">we're working on. </span> <span class="line" data-startTime="1950">We're very interested in getting </span><span class="line" data-startTime="1950">those up and going </span><span class="line" data-startTime="1951">because some of our </span><span class="line" data-startTime="1951">games have used &mdash; </span><span class="line" data-startTime="1954">JITing especially. </span> <span class="line" data-startTime="1956">We have some ideas. </span> <span class="line" data-startTime="1957">But those are longer term. </span> <span class="line" data-startTime="1961">So the user side. </span> <span class="line" data-startTime="1962">So the user experience, we're </span><span class="line" data-startTime="1962">going to have translation </span><span class="line" data-startTime="1964">caching from day one. </span></p>

<p><span class="line" data-startTime="1965">We're going to have optimization </span><span class="line" data-startTime="1965">level control so </span><span class="line" data-startTime="1967">the user can say whether you </span><span class="line" data-startTime="1967">want that splash screen to be </span><span class="line" data-startTime="1972">compiled quickly and up in front </span><span class="line" data-startTime="1972">of them or whether you </span><span class="line" data-startTime="1974">want your physics engine </span><span class="line" data-startTime="1974">to provide the utmost </span><span class="line" data-startTime="1976">performance. </span> <span class="line" data-startTime="1977">And we're also going to give </span><span class="line" data-startTime="1977">the progress events so that </span><span class="line" data-startTime="1981">you can build UIs that tell </span><span class="line" data-startTime="1981">the user what's going on. </span> <span class="line" data-startTime="1986">And I said before, </span><span class="line" data-startTime="1986">we don't have </span><span class="line" data-startTime="1987">multicore translation yet. </span> <span class="line" data-startTime="1988">But the guys in the team </span><span class="line" data-startTime="1988">are all chomping at </span><span class="line" data-startTime="1990">the bit to do this. </span> <span class="line" data-startTime="1991">So at some point in the not too </span><span class="line" data-startTime="1991">distant future after that, </span><span class="line" data-startTime="1994">we're going to have multicore </span><span class="line" data-startTime="1994">translation. </span></p>

<p><span class="line" data-startTime="1997">So we also have some ideas for </span><span class="line" data-startTime="1997">the O0 side for some really </span><span class="line" data-startTime="2001">fast O0 code generation. </span> <span class="line" data-startTime="2004">And we're looking into that. </span> <span class="line" data-startTime="2005">And we're not quite </span><span class="line" data-startTime="2005">certain when that </span><span class="line" data-startTime="2007">would probably intercept. </span> <span class="line" data-startTime="2008">But that's also something we're </span><span class="line" data-startTime="2008">considering [INAUDIBLE] </span><span class="line" data-startTime="2010">fairly soon. </span> <span class="line" data-startTime="2013">So let's sum up. </span> <span class="line" data-startTime="2016">Native code. </span> <span class="line" data-startTime="2019">It's run securely in Chrome </span><span class="line" data-startTime="2019">and the open web. </span> <span class="line" data-startTime="2023">80 plus percent of native </span><span class="line" data-startTime="2023">performance. </span> <span class="line" data-startTime="2025">85, 90 even some of </span><span class="line" data-startTime="2025">those examples. </span> <span class="line" data-startTime="2029">You could try it right now in </span><span class="line" data-startTime="2029">Chrome 29 Canary hopefully dev </span><span class="line" data-startTime="2033">channel within a few days. </span></p>

<p><span class="line" data-startTime="2036">And we're shooting for Chrome </span><span class="line" data-startTime="2036">30 as our launch. </span> <span class="line" data-startTime="2043">Thanks. </span> <span class="line" data-startTime="2045">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="2049"><span class="speakerName">David Sehr</span>: Questions? </span><span class="line" data-startTime="2050">If you want to step up to the </span><span class="line" data-startTime="2050">microphone for questions? </span></p>

<p class="speaker"><span class="line" data-starttime="2054"><span class="speakerName">Audience</span>: So I had </span><span class="line" data-startTime="2054">a quick question. </span> <span class="line" data-startTime="2056">And maybe, I'm not sure if it's </span><span class="line" data-startTime="2056">a dumb question or not. </span> <span class="line" data-startTime="2059">But it seems as though you've </span><span class="line" data-startTime="2059">built an abstraction layer </span><span class="line" data-startTime="2062">that allows me to write native </span><span class="line" data-startTime="2062">code and build it to LLVM. </span> <span class="line" data-startTime="2065">And then, you can then translate </span><span class="line" data-startTime="2065">the LLVM on the </span><span class="line" data-startTime="2068">browser as you demonstrated. </span> <span class="line" data-startTime="2070">And the translated </span><span class="line" data-startTime="2070">code is cached. </span> <span class="line" data-startTime="2073">So my question is let's say if </span><span class="line" data-startTime="2073">I build an application that's </span><span class="line" data-startTime="2076">really successful, and millions </span><span class="line" data-startTime="2076">of people all over </span><span class="line" data-startTime="2078">the world download it, millions </span><span class="line" data-startTime="2078">of people all over </span><span class="line" data-startTime="2082">the world are going to be </span><span class="line" data-startTime="2082">compiling it and translating </span><span class="line" data-startTime="2085">this the same way. </span> <span class="line" data-startTime="2085">Why is this not done on the </span><span class="line" data-startTime="2085">server side, or even why can't </span><span class="line" data-startTime="2091">I do this as a developer </span><span class="line" data-startTime="2091">and sort of do a cross </span><span class="line" data-startTime="2094">compilation? </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2095"><span class="speakerName">David Sehr</span>: OK. </span><span class="line" data-startTime="2096">So that's an excellent </span><span class="line" data-startTime="2096">question. </span><span class="line" data-startTime="2097">So the question is why &mdash; </span><span class="line" data-startTime="2097">so millions of people &mdash; </span><span class="line" data-startTime="2099">you think of millions </span><span class="line" data-startTime="2099">of watts spent on </span><span class="line" data-startTime="2102">translation let's say. </span></p>

<p class="speaker"><span class="line" data-starttime="2103"><span class="speakerName">Audience</span>: [INAUDIBLE], right? </span></p>

<p class="speaker"><span class="line" data-starttime="2105"><span class="speakerName">David Sehr</span>: Yes. </span> <span class="line" data-startTime="2106">It's millions of seconds of </span><span class="line" data-startTime="2106">people's lives spent in this </span><span class="line" data-startTime="2110">thing, perhaps. </span> <span class="line" data-startTime="2112">Yeah, it's an excellent </span><span class="line" data-startTime="2112">question. </span> <span class="line" data-startTime="2113">So this is for a variety </span><span class="line" data-startTime="2113">of reasons. </span> <span class="line" data-startTime="2119">So doing the translation </span><span class="line" data-startTime="2119">actually on the platform </span><span class="line" data-startTime="2121">provides the ability to take </span><span class="line" data-startTime="2121">advantage of the specific, </span><span class="line" data-startTime="2125">particular platform we're </span><span class="line" data-startTime="2125">talking about. </span> <span class="line" data-startTime="2127">So I buy a latest generation </span><span class="line" data-startTime="2127">Intel or </span><span class="line" data-startTime="2130">AMD, or ARM, whatever. </span> <span class="line" data-startTime="2132">And it happens to </span><span class="line" data-startTime="2132">have some super </span><span class="line" data-startTime="2133">microarchitectural feature. </span> <span class="line" data-startTime="2134">Translation there would allow </span><span class="line" data-startTime="2134">the possibility of optimizing </span><span class="line" data-startTime="2137">for that specific user </span><span class="line" data-startTime="2137">specific department. </span></p>

<p><span class="line" data-startTime="2140">That's one thing we've </span><span class="line" data-startTime="2140">always talked about. </span> <span class="line" data-startTime="2141">But no, in the broad, moving </span><span class="line" data-startTime="2141">things up and say, in a place </span><span class="line" data-startTime="2145">where I have for instance an </span><span class="line" data-startTime="2145">installed step where I get it </span><span class="line" data-startTime="2149">through an app store. </span> <span class="line" data-startTime="2150">Then translation up in the cloud </span><span class="line" data-startTime="2150">someplace obviously make </span><span class="line" data-startTime="2153">sense or translation caching </span><span class="line" data-startTime="2153">it up there someplace. </span> <span class="line" data-startTime="2156">Even if you're surfing the web, </span><span class="line" data-startTime="2156">maybe having a proxy that </span><span class="line" data-startTime="2159">can do some translation, </span><span class="line" data-startTime="2159">this makes sense. </span> <span class="line" data-startTime="2162">These are things that we'd like </span><span class="line" data-startTime="2162">to investigate further. </span> <span class="line" data-startTime="2165">And definitely the technology </span><span class="line" data-startTime="2165">base we built lends itself to </span><span class="line" data-startTime="2168">doing things there. </span> <span class="line" data-startTime="2168">It's more a question of </span><span class="line" data-startTime="2168">deployment and user model that </span><span class="line" data-startTime="2172">is the issue at the moment. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2173"><span class="speakerName">Audience</span>: Sure. </span><span class="line" data-startTime="2174">So if you look at things that </span><span class="line" data-startTime="2174">are deployed today, like </span><span class="line" data-startTime="2176">[INAUDIBLE], so sure there </span><span class="line" data-startTime="2176">are billions of different </span><span class="line" data-startTime="2180">[INAUDIBLE]. </span><span class="line" data-startTime="2181">But today, it's not </span><span class="line" data-startTime="2181">done this way. </span><span class="line" data-startTime="2183">If you needed applications </span><span class="line" data-startTime="2183">today, [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="2187"><span class="speakerName">David Sehr</span>: Right. </span> <span class="line" data-startTime="2187">Well, I should say also the SSH </span><span class="line" data-startTime="2187">application that I showed </span><span class="line" data-startTime="2192">there actually is right now </span><span class="line" data-startTime="2192">in the Chrome Web Store. </span> <span class="line" data-startTime="2195">It was built using the </span><span class="line" data-startTime="2195">PNaCl tool chain. </span> <span class="line" data-startTime="2197">But they forced translation </span><span class="line" data-startTime="2197">ahead of time and installed it </span><span class="line" data-startTime="2200">in the Chrome Web Store. </span> <span class="line" data-startTime="2201">So that's an option </span><span class="line" data-startTime="2201">for you also. </span> <span class="line" data-startTime="2203">And so this sort of thing is </span><span class="line" data-startTime="2203">something we're considering. </span></p>

<p><span class="line" data-startTime="2206">It's really like sort of a user </span><span class="line" data-startTime="2206">model sort of question </span><span class="line" data-startTime="2208">that we're trying to resolve. </span> <span class="line" data-startTime="2210">I think it's a great idea to </span><span class="line" data-startTime="2210">do what you're saying. </span> <span class="line" data-startTime="2211">But there are questions about </span><span class="line" data-startTime="2211">where do you host </span><span class="line" data-startTime="2214">this caching mechanism? </span><span class="line" data-startTime="2215">Where do you get these </span><span class="line" data-startTime="2215">things from? </span><span class="line" data-startTime="2217">Definitely. </span> <span class="line" data-startTime="2217">Excellent question. </span> <span class="line" data-startTime="2219">Over here? </span></p>

<p class="speaker"><span class="line" data-starttime="2221"><span class="speakerName">Audience</span>: I had a question, </span><span class="line" data-startTime="2221">like Dart recently added </span><span class="line" data-startTime="2223">support for SIMD instructions? </span><span class="line" data-startTime="2226">So how you see Dart and </span><span class="line" data-startTime="2226">PNaCl in the future? </span></p>

<p class="speaker"><span class="line" data-starttime="2230"><span class="speakerName">David Sehr</span>: Well, I think that </span><span class="line" data-startTime="2230">the two are complementary </span><span class="line" data-startTime="2233">technologies to start with. </span> <span class="line" data-startTime="2234">I think that we're really </span><span class="line" data-startTime="2234">after taking the C++ </span><span class="line" data-startTime="2238">application. </span> <span class="line" data-startTime="2238">I've used C++ as a sort of broad </span><span class="line" data-startTime="2238">umbrella for all kinds </span><span class="line" data-startTime="2240">of native applications that </span><span class="line" data-startTime="2240">might exist out there. </span> <span class="line" data-startTime="2243">Where Dart is much more targeted </span><span class="line" data-startTime="2243">at sort of the web </span><span class="line" data-startTime="2245">applications viewed more in </span><span class="line" data-startTime="2245">that sort of category. </span> <span class="line" data-startTime="2250">But if you're asking the </span><span class="line" data-startTime="2250">question around the </span><span class="line" data-startTime="2252">performance, Dart is still a </span><span class="line" data-startTime="2252">language that supports a </span><span class="line" data-startTime="2257">richer and more dynamically </span><span class="line" data-startTime="2257">typed sort of execution model </span><span class="line" data-startTime="2260">than we're targeting </span><span class="line" data-startTime="2260">with this. </span> <span class="line" data-startTime="2262">So we believe there's still a </span><span class="line" data-startTime="2262">performance gap between the </span><span class="line" data-startTime="2266">way their code runs and the </span><span class="line" data-startTime="2266">way native code, which has </span><span class="line" data-startTime="2268">been, for instance, fully </span><span class="line" data-startTime="2268">devirtualized and targeted </span><span class="line" data-startTime="2271">toward a specific set </span><span class="line" data-startTime="2271">of polymorphism. </span> <span class="line" data-startTime="2275">So we think there's a </span><span class="line" data-startTime="2275">performance gap that would </span><span class="line" data-startTime="2279">move toward the sort of the </span><span class="line" data-startTime="2279">higher end of as opposed to </span><span class="line" data-startTime="2281">Dart or JavaScript today. </span></p>

<p><span class="line" data-startTime="2285">The SIMD instruction </span><span class="line" data-startTime="2285">thing is sort of &mdash; </span><span class="line" data-startTime="2287">we're going to get SIMD </span><span class="line" data-startTime="2287">instructions. </span> <span class="line" data-startTime="2289">But then, they having SIMD </span><span class="line" data-startTime="2289">instructions, of course, moves </span><span class="line" data-startTime="2292">them closer to us. </span> <span class="line" data-startTime="2293">But there's still a performance </span><span class="line" data-startTime="2295">gap there, I believe. </span> <span class="line" data-startTime="2298">Over here to the left? </span></p>

<p class="speaker"><span class="line" data-starttime="2299"><span class="speakerName">Audience</span>: Yeah, so having </span><span class="line" data-startTime="2299">developed at the native layer </span><span class="line" data-startTime="2301">for Android, I can really </span><span class="line" data-startTime="2301">appreciate this. </span><span class="line" data-startTime="2305">So you mentioned there's going </span><span class="line" data-startTime="2305">to be no support for assembly. </span><span class="line" data-startTime="2308">Are you going to provide some </span><span class="line" data-startTime="2308">kind of hint so that we can, </span><span class="line" data-startTime="2312">for example, kind of hint for </span><span class="line" data-startTime="2312">the &mdash; to provide some cues for </span><span class="line" data-startTime="2318">the SIMD compiler. </span><span class="line" data-startTime="2319">We've seen tremendous use </span><span class="line" data-startTime="2319">of the ARM7 NEON. </span></p>

<p class="speaker"><span class="line" data-starttime="2325"><span class="speakerName">David Sehr</span>: The SIMD instruction </span><span class="line" data-startTime="2325">stuff in </span><span class="line" data-startTime="2326">particular. </span> <span class="line" data-startTime="2326">So the likeliest thing is </span><span class="line" data-startTime="2326">a set of intrinsics. </span> <span class="line" data-startTime="2330">So we're going to have a set </span><span class="line" data-startTime="2330">of intrinsic functions that </span><span class="line" data-startTime="2332">you call and say, I want to do a </span><span class="line" data-startTime="2332">four wide multiplier, a four </span><span class="line" data-startTime="2335">wide add, or whatever. </span> <span class="line" data-startTime="2335">And you'll use some </span><span class="line" data-startTime="2335">data types. </span> <span class="line" data-startTime="2338">LLVM has some of this stuff for </span><span class="line" data-startTime="2338">Intel in particular, for </span><span class="line" data-startTime="2341">NEON in particular. </span> <span class="line" data-startTime="2342">But there's no sort of common </span><span class="line" data-startTime="2342">way to express it. </span> <span class="line" data-startTime="2346">Now for the specific things, say </span><span class="line" data-startTime="2346">I want to do a horizontal </span><span class="line" data-startTime="2348">summation, which only some </span><span class="line" data-startTime="2348">platforms support. </span></p>

<p><span class="line" data-startTime="2351">Or I want to do some sort of </span><span class="line" data-startTime="2351">transcendental or something </span><span class="line" data-startTime="2354">that maybe somebody's vector </span><span class="line" data-startTime="2354">instructions support. </span> <span class="line" data-startTime="2357">That kind of discussion we've </span><span class="line" data-startTime="2357">had a few times internally. </span> <span class="line" data-startTime="2360">Maybe we'd like to provide some </span><span class="line" data-startTime="2360">way to key CPU id and to </span><span class="line" data-startTime="2365">say I'd like this version to run </span><span class="line" data-startTime="2365">with this class of CPU and </span><span class="line" data-startTime="2369">then have maybe some platform </span><span class="line" data-startTime="2369">specific intrinsics. </span> <span class="line" data-startTime="2372">But that's a very early </span><span class="line" data-startTime="2372">discussion. </span> <span class="line" data-startTime="2373">And we haven't really gotten </span><span class="line" data-startTime="2373">very far with it. </span> <span class="line" data-startTime="2375">We rightfully recognize, for </span><span class="line" data-startTime="2375">instance, their instructions </span><span class="line" data-startTime="2377">to do AES encoding better on </span><span class="line" data-startTime="2377">some Intel and AMD parts. </span> <span class="line" data-startTime="2382">We'd like to be able to </span><span class="line" data-startTime="2382">get to those things. </span> <span class="line" data-startTime="2384">And it's really hard </span><span class="line" data-startTime="2384">to do that with a </span><span class="line" data-startTime="2385">portable intrinsic today. </span></p>

<p><span class="line" data-startTime="2386">But yes. </span></p>

<p class="speaker"><span class="line" data-starttime="2387"><span class="speakerName">Audience</span>: Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="2390"><span class="speakerName">Audience</span>: You say you're </span><span class="line" data-startTime="2390">using LLVM for this. </span><span class="line" data-startTime="2393">Up to now, the intermediate </span><span class="line" data-startTime="2393">language in the LLVM, that was </span><span class="line" data-startTime="2397">an intermediate step in their </span><span class="line" data-startTime="2397">tool change, which means that </span><span class="line" data-startTime="2400">they can upgrade </span><span class="line" data-startTime="2400">it, add to it. </span><span class="line" data-startTime="2403">And you are making it a </span><span class="line" data-startTime="2403">persistent thing in a file all </span><span class="line" data-startTime="2407">over the world on servers. </span></p>

<p class="speaker"><span class="line" data-starttime="2410"><span class="speakerName">David Sehr</span>: Yep. </span><span class="line" data-startTime="2410">That's another excellent </span><span class="line" data-startTime="2410">question. </span></p>

<p class="speaker"><span class="line" data-starttime="2412"><span class="speakerName">Audience</span>: How is that </span><span class="line" data-startTime="2412">going to work? </span></p>

<p class="speaker"><span class="line" data-starttime="2413"><span class="speakerName">David Sehr</span>: How are we going </span><span class="line" data-startTime="2413">to make it persistent when </span><span class="line" data-startTime="2415">it's really a compiler </span><span class="line" data-startTime="2415">intermediate representation. </span> <span class="line" data-startTime="2417">So there was a nice discussion </span><span class="line" data-startTime="2417">on the LLVM mailing list &mdash; </span><span class="line" data-startTime="2421">I don't know, a year and a half </span><span class="line" data-startTime="2421">ago or so &mdash; where it was </span><span class="line" data-startTime="2423">exactly that statement, </span><span class="line" data-startTime="2423">LLVM as a compiler IR. </span> <span class="line" data-startTime="2426">So we have been working very </span><span class="line" data-startTime="2426">hard recently on simplifying. </span> <span class="line" data-startTime="2430">I kind of obliquely said this </span><span class="line" data-startTime="2430">earlier, simplifying LLVM IR. </span> <span class="line" data-startTime="2434">So there are some complicated </span><span class="line" data-startTime="2434">things, complicated </span><span class="line" data-startTime="2437">instruction patterns that seem </span><span class="line" data-startTime="2437">to raise the risk of changes </span><span class="line" data-startTime="2442">happening, attributes on </span><span class="line" data-startTime="2442">functions, attributes on </span><span class="line" data-startTime="2444">variables, which have just gone </span><span class="line" data-startTime="2444">through major morphs. </span></p>

<p><span class="line" data-startTime="2447">These are things that we're </span><span class="line" data-startTime="2447">severely restricting those </span><span class="line" data-startTime="2450">down to just a small set that </span><span class="line" data-startTime="2450">we believe we can support. </span> <span class="line" data-startTime="2454">We've also cut the readers and </span><span class="line" data-startTime="2454">writers of LLVM IR off. </span> <span class="line" data-startTime="2459">We're going to keep frozen </span><span class="line" data-startTime="2459">versions of those that will </span><span class="line" data-startTime="2461">allow us to translate into the </span><span class="line" data-startTime="2461">more recent versions that we </span><span class="line" data-startTime="2464">use for the back end. </span> <span class="line" data-startTime="2466">So the physical writing of it </span><span class="line" data-startTime="2466">will always be in the format </span><span class="line" data-startTime="2469">that we sort of control. </span> <span class="line" data-startTime="2471">And with the simplifications, </span><span class="line" data-startTime="2471">the get rid of linearizing </span><span class="line" data-startTime="2474">addressing and some of the </span><span class="line" data-startTime="2474">other things that are, we </span><span class="line" data-startTime="2479">think, potentially vulnerable </span><span class="line" data-startTime="2479">to IR changes. </span> <span class="line" data-startTime="2481">We've tried to write </span><span class="line" data-startTime="2481">those out. </span> <span class="line" data-startTime="2483">We have a series of passes that </span><span class="line" data-startTime="2483">simplified those away and </span><span class="line" data-startTime="2486">hopefully reduced the surface of </span><span class="line" data-startTime="2486">LLVM IR susceptible change. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2491"><span class="speakerName">Audience</span>: So what you're saying </span><span class="line" data-startTime="2491">is that you're freezing </span><span class="line" data-startTime="2493">the intermediate </span><span class="line" data-startTime="2493">language, or &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2495"><span class="speakerName">David Sehr</span>: Well, we have </span><span class="line" data-startTime="2495">a versioning scheme. </span><span class="line" data-startTime="2497">So we can turn the version when </span><span class="line" data-startTime="2497">it really diverges too </span><span class="line" data-startTime="2501">severely from that. </span><span class="line" data-startTime="2503">But we think that we've reduced </span><span class="line" data-startTime="2503">the likelihood of it </span><span class="line" data-startTime="2505">diverging very severely by </span><span class="line" data-startTime="2505">these simplifications. </span></p>

<p class="speaker"><span class="line" data-starttime="2509"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="2509">Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2510"><span class="speakerName">David Sehr</span>: Over here. </span></p>

<p class="speaker"><span class="line" data-starttime="2510"><span class="speakerName">Audience</span>: Two questions. </span><span class="line" data-startTime="2511">One is regarding benchmark. </span><span class="line" data-startTime="2513">You saw the performance </span><span class="line" data-startTime="2513">numbers. </span><span class="line" data-startTime="2515">But are the numbers </span><span class="line" data-startTime="2515">similar on? </span><span class="line" data-startTime="2517">And the second is once Google </span><span class="line" data-startTime="2517">Chrome 30 has been raised, </span><span class="line" data-startTime="2522">will it support PNaCl </span><span class="line" data-startTime="2522">any website? </span></p>

<p class="speaker"><span class="line" data-starttime="2524"><span class="speakerName">David Sehr</span>: OK, so with regard </span><span class="line" data-startTime="2524">to the ARM question, I don't </span><span class="line" data-startTime="2528">have the ARM numbers with </span><span class="line" data-startTime="2528">me at the moment. </span> <span class="line" data-startTime="2530">So traditionally when we run the </span><span class="line" data-startTime="2530">ARM numbers, again, we see </span><span class="line" data-startTime="2532">numbers that look like the </span><span class="line" data-startTime="2532">x86 64 sort of numbers. </span> <span class="line" data-startTime="2535">So it'd be toward the 80% as </span><span class="line" data-startTime="2535">opposed to 90% sort of range </span><span class="line" data-startTime="2540">for the high end of </span><span class="line" data-startTime="2540">these things. </span> <span class="line" data-startTime="2542">So I would guess it </span><span class="line" data-startTime="2542">would be there. </span> <span class="line" data-startTime="2543">But I can get those numbers </span><span class="line" data-startTime="2543">and ask this on </span><span class="line" data-startTime="2546">Native Client Discuss. </span> <span class="line" data-startTime="2546">And we'll be glad to publish </span><span class="line" data-startTime="2546">those things </span><span class="line" data-startTime="2548">out there as well. </span> <span class="line" data-startTime="2550">Now the other question that you </span><span class="line" data-startTime="2550">just asked was about will </span><span class="line" data-startTime="2553">it be available in the open </span><span class="line" data-startTime="2553">web, I believe, right? </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2554"><span class="speakerName">Audience</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2555"><span class="speakerName">David Sehr</span>: So the intent </span><span class="line" data-startTime="2555">is that actually, yes. </span><span class="line" data-startTime="2557">It will be available </span><span class="line" data-startTime="2557">in the open web. </span><span class="line" data-startTime="2558">You can host a site that </span><span class="line" data-startTime="2558">has a manifest file </span><span class="line" data-startTime="2560">or refers to a pexe. </span><span class="line" data-startTime="2561">And you point Chrome at that. </span><span class="line" data-startTime="2562">You won't need to have any sort </span><span class="line" data-startTime="2562">of install step, or any </span><span class="line" data-startTime="2565">sort of flags, or any sort of </span><span class="line" data-startTime="2565">web store to get it enabled. </span></p>

<p class="speaker"><span class="line" data-starttime="2569"><span class="speakerName">Audience</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2570"><span class="speakerName">David Sehr</span>: Do I </span><span class="line" data-startTime="2570">have more time? </span><span class="line" data-startTime="2573">OK. </span><span class="line" data-startTime="2573">It looks like we're out </span><span class="line" data-startTime="2573">of time, folks. </span><span class="line" data-startTime="2575">I'll be over in the chat area </span><span class="line" data-startTime="2575">for the next 15 minutes or so. </span><span class="line" data-startTime="2578">So feel free to come by. </span><span class="line" data-startTime="2579">And we can talk some more. </span><span class="line" data-startTime="2580">[APPLAUSE] </span></p>