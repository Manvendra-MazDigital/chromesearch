<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>Google I/O 2013 &mdash; When Bad Things Happen to Good Clusters: Robust Systems with Google Compute Engine</h1>

<h2>Marc Cohen, Joe Beda</h2>

<a class="video" href="http://youtu.be/nH3qrLzGRQU">youtu.be/nH3qrLzGRQU</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="0"><span class="speakerName">Marc Cohen</span>: We're going to spend </span><span class="line" data-startTime="0">some time talking this </span><span class="line" data-startTime="1">afternoon about building robust </span><span class="line" data-startTime="1">systems on top of </span><span class="line" data-startTime="4">Google Compute Engine. </span><span class="line" data-startTime="6">My name is Mark Cohen. </span><span class="line" data-startTime="7">I'm a Developer Programs </span><span class="line" data-startTime="7">Engineer at Google, and I'm </span><span class="line" data-startTime="9">joined by &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="10"><span class="speakerName">Joe Beda</span>: I'm Joe Beda. </span><span class="line" data-startTime="11">I'm the lead engineer </span><span class="line" data-startTime="11">for Compute Engine. </span></p>

<p class="speaker"><span class="line" data-starttime="15"><span class="speakerName">Marc Cohen</span>: So we'll hope to </span><span class="line" data-startTime="15">give you some good ideas, </span><span class="line" data-startTime="17">things to think about, </span><span class="line" data-startTime="17">techniques and approaches to </span><span class="line" data-startTime="19">building reliable systems. </span> <span class="line" data-startTime="21">This is a quick overview of </span><span class="line" data-startTime="21">what we're going to talk </span><span class="line" data-startTime="23">about, just a quick review </span><span class="line" data-startTime="23">of background. </span> <span class="line" data-startTime="26">I'm assuming most of you have </span><span class="line" data-startTime="26">probably heard about Google </span><span class="line" data-startTime="29">Compute Engine and know about </span><span class="line" data-startTime="29">it, so we'll just give a real </span><span class="line" data-startTime="31">quick overview. </span> <span class="line" data-startTime="33">We'll talk a little bit about </span><span class="line" data-startTime="33">why you should care about this </span><span class="line" data-startTime="35">subject, what sorts of bad </span><span class="line" data-startTime="35">things can happen when you </span><span class="line" data-startTime="37">build these large, </span><span class="line" data-startTime="37">complex systems. </span> <span class="line" data-startTime="40">We'll review a bunch </span><span class="line" data-startTime="40">of power tools. </span> <span class="line" data-startTime="42">These are unique capabilities </span><span class="line" data-startTime="42">and techniques that we believe </span><span class="line" data-startTime="45">really bring some value to the </span><span class="line" data-startTime="45">table when you're building </span><span class="line" data-startTime="48">these sorts of distributed </span><span class="line" data-startTime="48">systems. </span></p>

<p><span class="line" data-startTime="49">And then we'll review a </span><span class="line" data-startTime="49">prototypes application. </span> <span class="line" data-startTime="55">So a little bit of background. </span> <span class="line" data-startTime="57">So this is a photograph of </span><span class="line" data-startTime="57">Google's Council Bluffs, Iowa </span><span class="line" data-startTime="61">data center. </span> <span class="line" data-startTime="64">This comes from a very </span><span class="line" data-startTime="64">informative website, </span><span class="line" data-startTime="66">google.com/datacenters. </span> <span class="line" data-startTime="68">So it's a great resource if </span><span class="line" data-startTime="68">you're interested in learning </span><span class="line" data-startTime="70">more about the data centers. </span> <span class="line" data-startTime="71">But the quote here is from an </span><span class="line" data-startTime="71">article Steven Levy wrote for </span><span class="line" data-startTime="74">"Wired" magazine last year, and </span><span class="line" data-startTime="74">it speaks to the enormous </span><span class="line" data-startTime="77">scale and just the incredible </span><span class="line" data-startTime="77">magnitude </span><span class="line" data-startTime="81">of these data centers. </span></p>

<p><span class="line" data-startTime="83">And I like this as a way of </span><span class="line" data-startTime="83">thinking about Google Compute </span><span class="line" data-startTime="86">Engine because at its core, what </span><span class="line" data-startTime="86">Google Compute Engine is </span><span class="line" data-startTime="90">about is getting you into that </span><span class="line" data-startTime="90">room, giving you access to </span><span class="line" data-startTime="93">some of the world's most </span><span class="line" data-startTime="93">advanced computing resources. </span> <span class="line" data-startTime="98">So a quick run-through of </span><span class="line" data-startTime="98">a description of what </span><span class="line" data-startTime="102">Compute Engine is. </span> <span class="line" data-startTime="103">Before I launch into this, how </span><span class="line" data-startTime="103">many people have already heard </span><span class="line" data-startTime="106">about Compute Engine and </span><span class="line" data-startTime="106">know what it is? </span><span class="line" data-startTime="109">OK, cool. </span> <span class="line" data-startTime="110">And how many people </span><span class="line" data-startTime="110">have actually used </span><span class="line" data-startTime="112">Google Compute Engine? </span><span class="line" data-startTime="115">OK, that's awesome. </span> <span class="line" data-startTime="118">It's an Infrastructure as a </span><span class="line" data-startTime="118">Service product, and for most </span><span class="line" data-startTime="121">people, that immediately </span><span class="line" data-startTime="121">connotes virtual machines, </span><span class="line" data-startTime="124">Linux boxes, things like that. </span> <span class="line" data-startTime="126">And that's certainly the heart </span><span class="line" data-startTime="126">of the offer, but we like to </span><span class="line" data-startTime="130">think of it as a very </span><span class="line" data-startTime="130">comprehensive package of </span><span class="line" data-startTime="133">capabilities. </span></p>

<p><span class="line" data-startTime="133">So in addition to the virtual </span><span class="line" data-startTime="133">machines, you get some very </span><span class="line" data-startTime="136">advanced networking </span><span class="line" data-startTime="136">capabilities. </span> <span class="line" data-startTime="138">You get a private network with </span><span class="line" data-startTime="138">a built-in DNS server, a lot </span><span class="line" data-startTime="142">of built-in security </span><span class="line" data-startTime="142">capabilities like </span><span class="line" data-startTime="144">automatically encrypted hard </span><span class="line" data-startTime="144">drive and things of that </span><span class="line" data-startTime="147">nature, and an array of pretty </span><span class="line" data-startTime="147">advanced storage capabilities, </span><span class="line" data-startTime="151">which we're going to </span><span class="line" data-startTime="151">review shortly. </span> <span class="line" data-startTime="155">But at a broader level, it's </span><span class="line" data-startTime="155">all built with Google's </span><span class="line" data-startTime="158">fingerprint. </span> <span class="line" data-startTime="158">So all of the experience, </span><span class="line" data-startTime="158">knowledge, engineering insight </span><span class="line" data-startTime="164">and operational management type </span><span class="line" data-startTime="164">know-how how that's gone </span><span class="line" data-startTime="167">into building out all of the </span><span class="line" data-startTime="167">services that Google provides </span><span class="line" data-startTime="172">serving billions of queries a </span><span class="line" data-startTime="172">day all around the world &mdash; </span><span class="line" data-startTime="176">all of that's gone into Google </span><span class="line" data-startTime="176">Compute Engine, both in terms </span><span class="line" data-startTime="180">of technology at the design </span><span class="line" data-startTime="180">level and also the technology </span><span class="line" data-startTime="186">that we're building on top of. </span> <span class="line" data-startTime="187">So we're really taking advantage </span><span class="line" data-startTime="187">of a lot of the </span><span class="line" data-startTime="189">history here. </span></p>

<p><span class="line" data-startTime="190">As well, it's part of a </span><span class="line" data-startTime="190">broader platform of </span><span class="line" data-startTime="192">capabilities we call Google </span><span class="line" data-startTime="192">Compute Engine. </span> <span class="line" data-startTime="195">So as you'll see, it enables </span><span class="line" data-startTime="195">you to work really well and </span><span class="line" data-startTime="198">easily with other aspects </span><span class="line" data-startTime="198">of the platform. </span> <span class="line" data-startTime="202">So I have been given talks about </span><span class="line" data-startTime="202">Google Compute Engine </span><span class="line" data-startTime="205">for a while, and at the end of </span><span class="line" data-startTime="205">the talk, I often see this </span><span class="line" data-startTime="208">expression. </span> <span class="line" data-startTime="210">And frankly, it's been </span><span class="line" data-startTime="210">frustrating because my answer </span><span class="line" data-startTime="213">is always very measured </span><span class="line" data-startTime="213">and complex. </span> <span class="line" data-startTime="218">And I'm really, really happy &mdash; </span><span class="line" data-startTime="221">I may be one of the happiest </span><span class="line" data-startTime="221">people here &mdash; </span><span class="line" data-startTime="223">to be able to answer this </span><span class="line" data-startTime="223">question more simply than I </span><span class="line" data-startTime="225">ever have before. </span></p>

<p><span class="line" data-startTime="227">So the answer is yes, </span><span class="line" data-startTime="227">if you would like to </span><span class="line" data-startTime="228">try this, it's available. </span> <span class="line" data-startTime="229">We announced Wednesday it's </span><span class="line" data-startTime="229">available for anyone who would </span><span class="line" data-startTime="232">like to sign up and try </span><span class="line" data-startTime="232">it, and I'd strongly </span><span class="line" data-startTime="234">encourage you to do. </span> <span class="line" data-startTime="237">So it's really important to </span><span class="line" data-startTime="237">switch gears a little bit to </span><span class="line" data-startTime="245">building complex systems and </span><span class="line" data-startTime="245">what sorts of problems we </span><span class="line" data-startTime="248">might have and what sort </span><span class="line" data-startTime="248">of things can go wrong. </span> <span class="line" data-startTime="251">Anything can go wrong, and </span><span class="line" data-startTime="251">everything can go wrong. </span> <span class="line" data-startTime="254">And I think it's really </span><span class="line" data-startTime="254">important to realize that your </span><span class="line" data-startTime="258">hardware is never going to be </span><span class="line" data-startTime="258">perfect, your software is </span><span class="line" data-startTime="260">never going to be perfect, and </span><span class="line" data-startTime="260">your processes are never going </span><span class="line" data-startTime="263">to be perfect. </span> <span class="line" data-startTime="263">So there's a mindset shift that </span><span class="line" data-startTime="263">I think is a little bit </span><span class="line" data-startTime="268">subtle but really important, </span><span class="line" data-startTime="268">which is instead of focusing </span><span class="line" data-startTime="272">on building perfect things and </span><span class="line" data-startTime="272">writing perfect code, it's </span><span class="line" data-startTime="275">also really important to build </span><span class="line" data-startTime="275">and design systems that </span><span class="line" data-startTime="278">tolerate and deal well with </span><span class="line" data-startTime="278">failures because they're </span><span class="line" data-startTime="282">certainly going to happen. </span></p>

<p><span class="line" data-startTime="283">And that's a big part of </span><span class="line" data-startTime="283">Google's legacy, the whole </span><span class="line" data-startTime="286">concept of MapReduce and these </span><span class="line" data-startTime="286">huge data centers that I've </span><span class="line" data-startTime="289">been talking about. </span> <span class="line" data-startTime="290">The core principle there is </span><span class="line" data-startTime="290">deploying huge numbers of </span><span class="line" data-startTime="295">inexpensive computing devices </span><span class="line" data-startTime="295">and dealing gracefully with </span><span class="line" data-startTime="298">the fact that in that sort of </span><span class="line" data-startTime="298">volume, bad things are going </span><span class="line" data-startTime="301">to happen and are in fact </span><span class="line" data-startTime="301">happening all the time. </span> <span class="line" data-startTime="306">So to be a little bit </span><span class="line" data-startTime="306">more specific &mdash; </span><span class="line" data-startTime="308">whoops, didn't mean </span><span class="line" data-startTime="308">to reveal that. </span> <span class="line" data-startTime="310">I think you guys </span><span class="line" data-startTime="310">already saw it. </span> <span class="line" data-startTime="311">I was going to ask the audience </span><span class="line" data-startTime="311">if you had any idea </span><span class="line" data-startTime="314">what the single most </span><span class="line" data-startTime="314">common factor is </span><span class="line" data-startTime="318">in outages and failures. </span> <span class="line" data-startTime="319">You guys already saw </span><span class="line" data-startTime="319">it I think, right? </span><span class="line" data-startTime="323">So it's the human error. </span></p>

<p><span class="line" data-startTime="324">It's making mistakes with </span><span class="line" data-startTime="324">configuration, procedures, or </span><span class="line" data-startTime="327">just accidental operation </span><span class="line" data-startTime="327">snafu. </span> <span class="line" data-startTime="330">And so that's one big factor, </span><span class="line" data-startTime="330">one big type of failure that </span><span class="line" data-startTime="334">you'll encounter. </span> <span class="line" data-startTime="334">Then of course there are </span><span class="line" data-startTime="334">software errors like resource </span><span class="line" data-startTime="337">exhaustion, logic bugs. </span> <span class="line" data-startTime="339">Bad recovery code is a fairly </span><span class="line" data-startTime="339">interesting scenario because </span><span class="line" data-startTime="343">it's the situation where </span><span class="line" data-startTime="343">you've written code </span><span class="line" data-startTime="345">specifically to deal </span><span class="line" data-startTime="345">with problems. </span></p>

<p><span class="line" data-startTime="348">By its very nature, that sort of </span><span class="line" data-startTime="348">code doesn't typically get </span><span class="line" data-startTime="350">exercised very often and often </span><span class="line" data-startTime="350">is not tested thoroughly. </span> <span class="line" data-startTime="353">And so what you can have there </span><span class="line" data-startTime="353">is a situation where the code </span><span class="line" data-startTime="356">that's dealing with a problem </span><span class="line" data-startTime="356">makes the problem even worse </span><span class="line" data-startTime="359">if it's not behaving properly. </span> <span class="line" data-startTime="361">Of course, we have scheduled </span><span class="line" data-startTime="361">maintenance events and </span><span class="line" data-startTime="364">unexpected, unplanned </span><span class="line" data-startTime="364">maintenance outages &mdash; or not </span><span class="line" data-startTime="368">maintenance outages but </span><span class="line" data-startTime="368">simple outages. </span> <span class="line" data-startTime="370">And then there's a wide </span><span class="line" data-startTime="370">range of security </span><span class="line" data-startTime="372">failures that we can have. </span> <span class="line" data-startTime="375">So there's a lot of things </span><span class="line" data-startTime="375">that can go wrong. </span> <span class="line" data-startTime="379">And there's really three </span><span class="line" data-startTime="379">dimensions to this problem of </span><span class="line" data-startTime="383">dealing with these </span><span class="line" data-startTime="383">sort of outages. </span></p>

<p><span class="line" data-startTime="385">There's the infrastructure </span><span class="line" data-startTime="385">layer, there's the application </span><span class="line" data-startTime="390">layer, which you guys are </span><span class="line" data-startTime="390">responsible for, and then </span><span class="line" data-startTime="392">there's the process layer </span><span class="line" data-startTime="392">or the people layer. </span> <span class="line" data-startTime="394">And we're going to focus today </span><span class="line" data-startTime="394">on the infrastructure and the </span><span class="line" data-startTime="399">application. </span> <span class="line" data-startTime="399">We're going to talk about the </span><span class="line" data-startTime="399">infrastructure that we provide </span><span class="line" data-startTime="402">and share some tips about how </span><span class="line" data-startTime="402">you can take advantage of </span><span class="line" data-startTime="405">those capabilities. </span> <span class="line" data-startTime="406">But I do want to spend a few </span><span class="line" data-startTime="406">minutes on the human and the </span><span class="line" data-startTime="409">process element, because </span><span class="line" data-startTime="409">I think that's a really </span><span class="line" data-startTime="411">important aspect </span><span class="line" data-startTime="411">of it as well. </span></p>

<p><span class="line" data-startTime="413">This quote captures a lot of </span><span class="line" data-startTime="413">what I've been thinking about </span><span class="line" data-startTime="415">in this space. </span> <span class="line" data-startTime="416">If you get a chance to check out </span><span class="line" data-startTime="416">this article, "How Complex </span><span class="line" data-startTime="420">Systems Fail," I highly </span><span class="line" data-startTime="420">recommend it. </span> <span class="line" data-startTime="421">It's by Richard Cook. </span> <span class="line" data-startTime="423">It's about a four-page </span><span class="line" data-startTime="423">article. </span> <span class="line" data-startTime="425">It's hot-linked off of these </span><span class="line" data-startTime="425">slides, which I'll release </span><span class="line" data-startTime="427">after the talk. </span> <span class="line" data-startTime="428">But anyway, it's a very nice </span><span class="line" data-startTime="428">taxonomy of how complex </span><span class="line" data-startTime="431">systems fail. </span> <span class="line" data-startTime="432">And one of the points in this </span><span class="line" data-startTime="432">document is, "Recognizing </span><span class="line" data-startTime="436">hazard and successfully </span><span class="line" data-startTime="436">operating inside tolerable </span><span class="line" data-startTime="438">performance boundaries requires </span><span class="line" data-startTime="438">intimate contact with </span><span class="line" data-startTime="441">failure." So what he's really </span><span class="line" data-startTime="441">talking about is, practice </span><span class="line" data-startTime="443">makes perfect. </span></p>

<p><span class="line" data-startTime="444">It's really important to have </span><span class="line" data-startTime="444">people who are well trained in </span><span class="line" data-startTime="448">this area and have good </span><span class="line" data-startTime="448">monitoring tools and are </span><span class="line" data-startTime="451">following processes that are </span><span class="line" data-startTime="451">going to help you navigate </span><span class="line" data-startTime="454">that fine balance between &mdash; </span><span class="line" data-startTime="458">it's not a binary, everything's </span><span class="line" data-startTime="458">working, </span><span class="line" data-startTime="460">everything's not working, but </span><span class="line" data-startTime="460">you're trying to make sure </span><span class="line" data-startTime="462">that small failures that are </span><span class="line" data-startTime="462">happening all the time are </span><span class="line" data-startTime="465">well contained. </span> <span class="line" data-startTime="469">So here are a few process </span><span class="line" data-startTime="469">guidelines that we've learned </span><span class="line" data-startTime="472">at Google have been very helpful </span><span class="line" data-startTime="472">for us with managing </span><span class="line" data-startTime="475">our systems effectively. </span> <span class="line" data-startTime="478">Set reliability goals </span><span class="line" data-startTime="478">and track metrics. </span> <span class="line" data-startTime="480">So make sure to delineate what </span><span class="line" data-startTime="480">it is you want to accomplish </span><span class="line" data-startTime="483">in the space of your reliable </span><span class="line" data-startTime="483">systems and then have good </span><span class="line" data-startTime="486">measurements. </span> <span class="line" data-startTime="486">If you just state a bunch of </span><span class="line" data-startTime="486">goals, and then you don't </span><span class="line" data-startTime="488">measure it and track how you're </span><span class="line" data-startTime="488">doing, then it's not </span><span class="line" data-startTime="491">really buying you </span><span class="line" data-startTime="491">all that much. </span> <span class="line" data-startTime="493">Document everything. </span></p>

<p><span class="line" data-startTime="494">So any problems you're having </span><span class="line" data-startTime="494">or issues you're overcoming, </span><span class="line" data-startTime="505">it's really important to capture </span><span class="line" data-startTime="505">those with postmortems </span><span class="line" data-startTime="508">and to make sure you're </span><span class="line" data-startTime="508">documenting all of the </span><span class="line" data-startTime="510">learnings that you're having, </span><span class="line" data-startTime="510">sharing it with </span><span class="line" data-startTime="512">your team and so on. </span> <span class="line" data-startTime="514">Otherwise, you're going to </span><span class="line" data-startTime="514">repeat those problems. </span> <span class="line" data-startTime="516">Automating everything </span><span class="line" data-startTime="516">is really important. </span> <span class="line" data-startTime="518">Any time you have a manual </span><span class="line" data-startTime="518">procedure in your operations </span><span class="line" data-startTime="521">processes &mdash; </span><span class="line" data-startTime="521">so somebody has to go click a </span><span class="line" data-startTime="521">button or write a script or </span><span class="line" data-startTime="524">run a script &mdash; </span><span class="line" data-startTime="525">that's an error waiting </span><span class="line" data-startTime="525">to happen. </span> <span class="line" data-startTime="527">So this is an ideal. </span></p>

<p><span class="line" data-startTime="530">It's very hard to do this </span><span class="line" data-startTime="530">perfectly, but this should be </span><span class="line" data-startTime="533">the goal that we're </span><span class="line" data-startTime="533">all striving for. </span> <span class="line" data-startTime="535">Preparing for maintenance </span><span class="line" data-startTime="535">events and </span><span class="line" data-startTime="537">outages is really important. </span> <span class="line" data-startTime="538">At Google, we have regular </span><span class="line" data-startTime="538">events where we simulate </span><span class="line" data-startTime="541">outages and actually break </span><span class="line" data-startTime="541">things fairly intrusively. </span> <span class="line" data-startTime="546">And it's a great way to not only </span><span class="line" data-startTime="546">prepare for but also to </span><span class="line" data-startTime="549">test outages and events. </span></p>

<p><span class="line" data-startTime="551">And build a really strong </span><span class="line" data-startTime="551">capacity planning model and </span><span class="line" data-startTime="554">allocation of your resources and </span><span class="line" data-startTime="554">zones so that you have the </span><span class="line" data-startTime="556">ability to move things around </span><span class="line" data-startTime="556">as and when you need and to </span><span class="line" data-startTime="560">adapt to outages on the fly. </span> <span class="line" data-startTime="563">So that's by way </span><span class="line" data-startTime="563">of background. </span> <span class="line" data-startTime="565">I'm going to turn it over to Joe </span><span class="line" data-startTime="565">now to talk about some of </span><span class="line" data-startTime="567">the power tools. </span></p>

<p class="speaker"><span class="line" data-starttime="569"><span class="speakerName">Joe Beda</span>: Thanks, Marc. </span> <span class="line" data-startTime="570">So I'm going to cover a little </span><span class="line" data-startTime="570">bit of the unique capabilities </span><span class="line" data-startTime="574">of Compute Engine and how you </span><span class="line" data-startTime="574">can use those to solve some </span><span class="line" data-startTime="577">problems in this space, but also </span><span class="line" data-startTime="577">some things that exist </span><span class="line" data-startTime="580">outside of Compute Engine proper </span><span class="line" data-startTime="580">and how you can go </span><span class="line" data-startTime="583">ahead and use those. </span> <span class="line" data-startTime="585">To start with, you have </span><span class="line" data-startTime="585">to know your storage. </span> <span class="line" data-startTime="587">So much of reliability comes </span><span class="line" data-startTime="587">down to making sure that your </span><span class="line" data-startTime="591">data is there. </span> <span class="line" data-startTime="592">It's frequently the bottleneck </span><span class="line" data-startTime="592">that you're going to hit. </span> <span class="line" data-startTime="595">And so I want to review some </span><span class="line" data-startTime="595">of the storage options with </span><span class="line" data-startTime="597">Compute Engine and with </span><span class="line" data-startTime="597">the Cloud platform. </span> <span class="line" data-startTime="600">So to start with, starting at </span><span class="line" data-startTime="600">the least reliable level, we </span><span class="line" data-startTime="603">have Scratch Disk. </span> <span class="line" data-startTime="604">This is a block device attached </span><span class="line" data-startTime="604">to a virtual machine. </span></p>

<p><span class="line" data-startTime="609">It lives and dies with </span><span class="line" data-startTime="609">that virtual machine. </span> <span class="line" data-startTime="611">It's cheap and cheerful, but </span><span class="line" data-startTime="611">it's also not very durable. </span> <span class="line" data-startTime="614">And one of the things that you </span><span class="line" data-startTime="614">should be aware of is that </span><span class="line" data-startTime="618">it's also prone to correlated </span><span class="line" data-startTime="618">failures. </span> <span class="line" data-startTime="621">So you don't know that you won't </span><span class="line" data-startTime="621">see a lot of Scratch </span><span class="line" data-startTime="625">Disks dying at the same time. </span> <span class="line" data-startTime="627">So something to keep </span><span class="line" data-startTime="627">in mind as you're </span><span class="line" data-startTime="629">building your processes. </span> <span class="line" data-startTime="630">So things like good backups, </span><span class="line" data-startTime="630">even if you're using </span><span class="line" data-startTime="633">replication, is a good idea. </span> <span class="line" data-startTime="636">Next is our Persistent </span><span class="line" data-startTime="636">Disk offering. </span> <span class="line" data-startTime="638">This is replicated off of the </span><span class="line" data-startTime="638">local machine over the </span><span class="line" data-startTime="641">network, and it's </span><span class="line" data-startTime="641">very flexible. </span> <span class="line" data-startTime="643">And we've built it for fast, </span><span class="line" data-startTime="643">consistent performance. </span> <span class="line" data-startTime="646">I'm going to go into a little </span><span class="line" data-startTime="646">bit more detail in the next </span><span class="line" data-startTime="648">slide here. </span> <span class="line" data-startTime="651">So the next is Cloud Storage. </span></p>

<p><span class="line" data-startTime="652">This is the first thing that </span><span class="line" data-startTime="652">actually goes outside of the </span><span class="line" data-startTime="656">zone that the virtual machines </span><span class="line" data-startTime="656">are running in. </span> <span class="line" data-startTime="659">And this is a blob storage, and </span><span class="line" data-startTime="659">it's really a Swiss Army </span><span class="line" data-startTime="662">knife when building </span><span class="line" data-startTime="662">your application. </span> <span class="line" data-startTime="664">It's great for getting </span><span class="line" data-startTime="664">information in </span><span class="line" data-startTime="666">and out of the cloud. </span> <span class="line" data-startTime="667">It's great for storing </span><span class="line" data-startTime="667">things for backups. </span> <span class="line" data-startTime="669">It's great also for serving. </span> <span class="line" data-startTime="672">So it really can play all those </span><span class="line" data-startTime="672">different roles, and </span><span class="line" data-startTime="674">it's really a great tool </span><span class="line" data-startTime="674">in the tool box. </span> <span class="line" data-startTime="679">Next are hosted databases. </span></p>

<p><span class="line" data-startTime="682">And so with Google, we have </span><span class="line" data-startTime="682">Google Cloud SQL, and we have </span><span class="line" data-startTime="686">the newly announced Cloud </span><span class="line" data-startTime="686">Datastore, which is the App </span><span class="line" data-startTime="690">Engine Datastore built on top of </span><span class="line" data-startTime="690">BigTable exposed as an API </span><span class="line" data-startTime="694">to anybody who wants </span><span class="line" data-startTime="694">to use it. </span> <span class="line" data-startTime="696">And we use lead the Data Store </span><span class="line" data-startTime="696">and the technology underlying </span><span class="line" data-startTime="699">the Datastore all over the </span><span class="line" data-startTime="699">place inside of Google. </span> <span class="line" data-startTime="701">And so the best thing to do is </span><span class="line" data-startTime="701">let it be somebody else's </span><span class="line" data-startTime="705">problem to worry about </span><span class="line" data-startTime="705">reliability </span><span class="line" data-startTime="707">and to hold the pager. </span> <span class="line" data-startTime="709">And so finally, you can bring </span><span class="line" data-startTime="709">your own Datastore. </span> <span class="line" data-startTime="711">I mean building on top of </span><span class="line" data-startTime="711">these tools, you can run </span><span class="line" data-startTime="714">something like Cassandra. </span> <span class="line" data-startTime="715">You can run Mongo. </span></p>

<p><span class="line" data-startTime="716">You can run whatever you're </span><span class="line" data-startTime="716">comfortable with and whatever </span><span class="line" data-startTime="719">solution actually </span><span class="line" data-startTime="719">fits your needs. </span> <span class="line" data-startTime="721">Obviously, it's going to be a </span><span class="line" data-startTime="721">little bit more complicated </span><span class="line" data-startTime="723">the deeper you get, but </span><span class="line" data-startTime="723">your freedom's there. </span> <span class="line" data-startTime="727">So just focusing in a little </span><span class="line" data-startTime="727">bit on Persistent Disk. </span> <span class="line" data-startTime="730">It's really a sweet spot </span><span class="line" data-startTime="730">in terms of durability, </span><span class="line" data-startTime="733">flexibility and consistency. </span> <span class="line" data-startTime="735">That's what we really </span><span class="line" data-startTime="735">built it for. </span> <span class="line" data-startTime="737">One of the interesting </span><span class="line" data-startTime="737">capabilities here is the </span><span class="line" data-startTime="740">ability to take snapshots. </span></p>

<p><span class="line" data-startTime="742">This is great for backups. </span> <span class="line" data-startTime="745">There was a talk earlier at </span><span class="line" data-startTime="745">I/O &mdash; and you can watch the </span><span class="line" data-startTime="747">video &mdash; that goes deep into this </span><span class="line" data-startTime="747">system and some of the </span><span class="line" data-startTime="750">best practices on </span><span class="line" data-startTime="750">how to use it. </span> <span class="line" data-startTime="752">I encourage you to take </span><span class="line" data-startTime="752">a look at that. </span> <span class="line" data-startTime="756">And it's also a very useful </span><span class="line" data-startTime="756">thing to move data between </span><span class="line" data-startTime="760">different zones and </span><span class="line" data-startTime="760">different regions. </span> <span class="line" data-startTime="761">So if you take a snapshot in </span><span class="line" data-startTime="761">Compute Engine of a Persistent </span><span class="line" data-startTime="764">Disk, that snapshot is </span><span class="line" data-startTime="764">available globally. </span></p>

<p><span class="line" data-startTime="767">And so it really starts to </span><span class="line" data-startTime="767">approach a disaster recovery, </span><span class="line" data-startTime="771">or at least a piece of a </span><span class="line" data-startTime="771">disaster recovery plan. </span> <span class="line" data-startTime="774">And so you can use this for </span><span class="line" data-startTime="774">anything that you would use a </span><span class="line" data-startTime="775">disk for, database storage, fast </span><span class="line" data-startTime="775">boot, static data that </span><span class="line" data-startTime="779">you want to share widely, and </span><span class="line" data-startTime="779">for being able to move data </span><span class="line" data-startTime="783">between different zones </span><span class="line" data-startTime="783">and different regions. </span> <span class="line" data-startTime="788">So, "Tooling should be used </span><span class="line" data-startTime="788">automate every step." So </span><span class="line" data-startTime="795">Adrian's actually here </span><span class="line" data-startTime="795">in the audience. </span> <span class="line" data-startTime="796">He's see the Cloud Architect </span><span class="line" data-startTime="796">for Netflix. </span> <span class="line" data-startTime="799">Is that your right title? </span><span class="line" data-startTime="800">Yeah, OK. </span> <span class="line" data-startTime="801">And I was talking to him last </span><span class="line" data-startTime="801">night, and he said, "automate </span><span class="line" data-startTime="804">all the everythings," which </span><span class="line" data-startTime="804">is pretty much what </span><span class="line" data-startTime="806">it comes down to. </span> <span class="line" data-startTime="807">So here are some building blocks </span><span class="line" data-startTime="807">that we can use to </span><span class="line" data-startTime="809">automate your deployments </span><span class="line" data-startTime="809">in Compute Engine. </span></p>

<p><span class="line" data-startTime="813">So the first thing </span><span class="line" data-startTime="813">I want to talk </span><span class="line" data-startTime="814">about is Instance Metadata. </span> <span class="line" data-startTime="818">There are other clouds out there </span><span class="line" data-startTime="818">that provide a way to </span><span class="line" data-startTime="820">provide a passive blob into </span><span class="line" data-startTime="820">your virtual machine. </span> <span class="line" data-startTime="824">We've taken it to the next </span><span class="line" data-startTime="824">step and added a few more </span><span class="line" data-startTime="827">features there. </span> <span class="line" data-startTime="827">And it's really a pretty simple </span><span class="line" data-startTime="827">feature, but it's very </span><span class="line" data-startTime="829">powerful also. </span> <span class="line" data-startTime="831">The idea is that from the API, </span><span class="line" data-startTime="831">you can specify some simple </span><span class="line" data-startTime="835">key/value pairs, and those </span><span class="line" data-startTime="835">key/value pairs are then made </span><span class="line" data-startTime="839">available inside the </span><span class="line" data-startTime="839">VM at a very early </span><span class="line" data-startTime="842">stage of the boot cycle. </span></p>

<p><span class="line" data-startTime="844">And so you can then use this </span><span class="line" data-startTime="844">to pass in all sorts of </span><span class="line" data-startTime="848">information that can configure </span><span class="line" data-startTime="848">your system and make your </span><span class="line" data-startTime="850">systems be more reactive. </span> <span class="line" data-startTime="854">And you can set it both on an </span><span class="line" data-startTime="854">instance by instance basis, or </span><span class="line" data-startTime="858">you can set it across </span><span class="line" data-startTime="858">your entire project. </span> <span class="line" data-startTime="860">And so this is what we use to </span><span class="line" data-startTime="860">distribute, say SSH keys into </span><span class="line" data-startTime="863">the virtual machine. </span> <span class="line" data-startTime="865">And so we give you some </span><span class="line" data-startTime="865">quick examples here. </span> <span class="line" data-startTime="869">So this is using the gcutil </span><span class="line" data-startTime="869">command line tool. </span> <span class="line" data-startTime="871">Obviously, you can do all of </span><span class="line" data-startTime="871">this stuff with the API also. </span></p>

<p><span class="line" data-startTime="875">But here I'm passing in </span><span class="line" data-startTime="875">two metadata values. </span> <span class="line" data-startTime="877">One of them is a role with the </span><span class="line" data-startTime="877">value of master, and then the </span><span class="line" data-startTime="881">other one is a configuration </span><span class="line" data-startTime="881">file coming from a text file. </span> <span class="line" data-startTime="885">And then once I boot up my </span><span class="line" data-startTime="885">virtual machine with that </span><span class="line" data-startTime="888">information, I can </span><span class="line" data-startTime="888">SSH into it. </span> <span class="line" data-startTime="890">And then with a simple curl </span><span class="line" data-startTime="890">command to a local metadata </span><span class="line" data-startTime="894">server that's available only to </span><span class="line" data-startTime="894">that virtual machine &mdash; so </span><span class="line" data-startTime="896">it's a private metadata server </span><span class="line" data-startTime="896">for that virtual machine &mdash; </span><span class="line" data-startTime="898">I can then go ahead </span><span class="line" data-startTime="898">and retrieve </span><span class="line" data-startTime="900">these key/value pairs. </span> <span class="line" data-startTime="901">So this is a really critical </span><span class="line" data-startTime="901">building block for building </span><span class="line" data-startTime="905">automated, self-configuring </span><span class="line" data-startTime="905">systems. </span> <span class="line" data-startTime="908">So building on top of that, we </span><span class="line" data-startTime="908">have simple Start Up Scripts. </span></p>

<p><span class="line" data-startTime="912">So this is the next </span><span class="line" data-startTime="912">level here. </span> <span class="line" data-startTime="914">And so this is like rc.local </span><span class="line" data-startTime="914">if you're familiar with </span><span class="line" data-startTime="918">traditional Unix </span><span class="line" data-startTime="918">init processes. </span> <span class="line" data-startTime="923">And you can use this to install </span><span class="line" data-startTime="923">packages, download </span><span class="line" data-startTime="926">things from Google Storage </span><span class="line" data-startTime="926">using our service account </span><span class="line" data-startTime="928">feature to do so securely, </span><span class="line" data-startTime="928">or bootstrap </span><span class="line" data-startTime="931">other management systems. </span> <span class="line" data-startTime="932">So if you're using something </span><span class="line" data-startTime="932">like Puppet or Chef, this can </span><span class="line" data-startTime="935">be a great way to get those </span><span class="line" data-startTime="935">things installed and working. </span></p>

<p><span class="line" data-startTime="939">So here's a quick example </span><span class="line" data-startTime="939">of what this is. </span> <span class="line" data-startTime="941">On a CentOS machine, it </span><span class="line" data-startTime="941">will install node. </span> <span class="line" data-startTime="945">And so the first four lines </span><span class="line" data-startTime="945">there are providing access to </span><span class="line" data-startTime="950">an extended repository, </span><span class="line" data-startTime="950">installing node. </span> <span class="line" data-startTime="953">And then the next three lines </span><span class="line" data-startTime="953">are getting the specific role </span><span class="line" data-startTime="958">that this thing should be </span><span class="line" data-startTime="958">running, downloading the Start </span><span class="line" data-startTime="960">Up Script or the program from </span><span class="line" data-startTime="960">cloud storage, and then </span><span class="line" data-startTime="963">running that. </span> <span class="line" data-startTime="965">And so with a few lines of code, </span><span class="line" data-startTime="965">you can turn something </span><span class="line" data-startTime="968">from being something that you </span><span class="line" data-startTime="968">have to SSH into and push </span><span class="line" data-startTime="971">configuration for to something </span><span class="line" data-startTime="971">that can actually draw and </span><span class="line" data-startTime="973">automatically run what </span><span class="line" data-startTime="973">it needs to run. </span></p>

<p><span class="line" data-startTime="976">And you can see how you can just </span><span class="line" data-startTime="976">simply pass this in as a </span><span class="line" data-startTime="980">metadata value for Start Up </span><span class="line" data-startTime="980">Script, and our stock images </span><span class="line" data-startTime="983">know how to check for that </span><span class="line" data-startTime="983">metadata value and start </span><span class="line" data-startTime="987">running the script </span><span class="line" data-startTime="987">for you at boot. </span> <span class="line" data-startTime="989">And then the log gets written </span><span class="line" data-startTime="989">to var/log/Google so you can </span><span class="line" data-startTime="993">debug it when things go wrong. </span> <span class="line" data-startTime="997">And then on top of that, how </span><span class="line" data-startTime="997">do you manage images? </span><span class="line" data-startTime="1000">Images can be a real problem. </span> <span class="line" data-startTime="1002">And so this is a quick pattern </span><span class="line" data-startTime="1002">I'd like to show you of </span><span class="line" data-startTime="1005">creating a script that can be </span><span class="line" data-startTime="1005">used both for customizing a </span><span class="line" data-startTime="1008">system at runtime, initializing </span><span class="line" data-startTime="1008">something for </span><span class="line" data-startTime="1011">creating an image, or </span><span class="line" data-startTime="1011">initializing a Persistent Disk </span><span class="line" data-startTime="1015">that you're booting off of. </span> <span class="line" data-startTime="1017">So it's an easy way to mark &mdash; </span><span class="line" data-startTime="1020">this was left over from my </span><span class="line" data-startTime="1020">fractal demo that I gave on a </span><span class="line" data-startTime="1023">previous talk &mdash; </span><span class="line" data-startTime="1025">it's an easy way to mark whether </span><span class="line" data-startTime="1025">you've done a set of </span><span class="line" data-startTime="1028">steps so far. </span> <span class="line" data-startTime="1029">And if you have, skip that &mdash; </span><span class="line" data-startTime="1031">those are generally the time </span><span class="line" data-startTime="1031">consuming, one-time set up </span><span class="line" data-startTime="1033">type of things &mdash; </span><span class="line" data-startTime="1034">and then actually run </span><span class="line" data-startTime="1034">the program that </span><span class="line" data-startTime="1036">you're looking to run. </span></p>

<p><span class="line" data-startTime="1040">And so finally, you can do a lot </span><span class="line" data-startTime="1040">with these set of tools, </span><span class="line" data-startTime="1044">but it'll only take </span><span class="line" data-startTime="1044">you so far. </span> <span class="line" data-startTime="1046">And so the next step is this </span><span class="line" data-startTime="1046">broad category of systems that </span><span class="line" data-startTime="1050">I've been calling </span><span class="line" data-startTime="1050">orchestration. </span> <span class="line" data-startTime="1052">You can start with something </span><span class="line" data-startTime="1052">simple like doing a bunch of </span><span class="line" data-startTime="1054">what I've provided here through </span><span class="line" data-startTime="1054">App Engine, which is a </span><span class="line" data-startTime="1057">good way to have a system in the </span><span class="line" data-startTime="1057">sky managing it for you. </span> <span class="line" data-startTime="1061">But if you want to move past </span><span class="line" data-startTime="1061">that, there are a whole bunch </span><span class="line" data-startTime="1063">of systems like Chef and Puppet, </span><span class="line" data-startTime="1063">or commercial partners </span><span class="line" data-startTime="1067">like RightScale and Scalr that </span><span class="line" data-startTime="1067">can really help you take this </span><span class="line" data-startTime="1070">to the next level. </span> <span class="line" data-startTime="1071">And they all offer a different </span><span class="line" data-startTime="1071">set of features, but here's a </span><span class="line" data-startTime="1074">good smattering of the types of </span><span class="line" data-startTime="1074">things that you can expect </span><span class="line" data-startTime="1077">once you start taking advantage </span><span class="line" data-startTime="1077">of higher-level </span><span class="line" data-startTime="1080">systems like that. </span> <span class="line" data-startTime="1084">Now, the next thing is that </span><span class="line" data-startTime="1084">scaling and stability really </span><span class="line" data-startTime="1087">go hand in hand. </span></p>

<p><span class="line" data-startTime="1089">If you're building for scale, </span><span class="line" data-startTime="1089">a lot of times you're also </span><span class="line" data-startTime="1092">building for stability. </span> <span class="line" data-startTime="1093">And all the problems that only </span><span class="line" data-startTime="1093">happen once in a while all of </span><span class="line" data-startTime="1097">a sudden start happening </span><span class="line" data-startTime="1097">all the time. </span> <span class="line" data-startTime="1099">And so these things really </span><span class="line" data-startTime="1099">do go hand in hand. </span> <span class="line" data-startTime="1101">And so one of the key things </span><span class="line" data-startTime="1101">here is use Load Balancers. </span> <span class="line" data-startTime="1103">I mean it seems obvious. </span> <span class="line" data-startTime="1104">Load Balancers give you scale. </span> <span class="line" data-startTime="1106">But Load Balancers also give </span><span class="line" data-startTime="1106">you the ability to route </span><span class="line" data-startTime="1108">around failures, and so they're </span><span class="line" data-startTime="1108">really going to be a </span><span class="line" data-startTime="1110">key part of any architecture </span><span class="line" data-startTime="1110">that's going to </span><span class="line" data-startTime="1112">be built for stability. </span> <span class="line" data-startTime="1114">And then finally, plan to </span><span class="line" data-startTime="1114">actually distribute yourself </span><span class="line" data-startTime="1118">both across zones and </span><span class="line" data-startTime="1118">across regions. </span> <span class="line" data-startTime="1121">That's both insuring against a </span><span class="line" data-startTime="1121">meteor hitting or software or </span><span class="line" data-startTime="1127">hardware failures. </span> <span class="line" data-startTime="1128">And if you do it right, and if </span><span class="line" data-startTime="1128">you build an advanced enough </span><span class="line" data-startTime="1131">architecture, you can actually </span><span class="line" data-startTime="1131">provide lower latencies to the </span><span class="line" data-startTime="1134">people where they are. </span></p>

<p><span class="line" data-startTime="1138">And then the last feature I </span><span class="line" data-startTime="1138">want to talk about is our </span><span class="line" data-startTime="1140">startup times, our Fast Startup </span><span class="line" data-startTime="1140">Times at Google. </span> <span class="line" data-startTime="1142">This lets you build more dynamic </span><span class="line" data-startTime="1142">applications that can </span><span class="line" data-startTime="1146">start and stop instances. </span> <span class="line" data-startTime="1147">And if you get into the mode </span><span class="line" data-startTime="1147">of thinking about these </span><span class="line" data-startTime="1149">instances as being ephemeral </span><span class="line" data-startTime="1149">workers, as stateless as </span><span class="line" data-startTime="1155">possible, something that you </span><span class="line" data-startTime="1155">can manage and that can </span><span class="line" data-startTime="1157">self-configure, then you're </span><span class="line" data-startTime="1157">well on your way towards </span><span class="line" data-startTime="1160">building a much more </span><span class="line" data-startTime="1160">reliable system. </span> <span class="line" data-startTime="1162">And being able to spin things </span><span class="line" data-startTime="1162">up and down and build that </span><span class="line" data-startTime="1165">into the fabric of the </span><span class="line" data-startTime="1165">application that you're </span><span class="line" data-startTime="1167">building really encourages </span><span class="line" data-startTime="1167">you to do the right </span><span class="line" data-startTime="1170">things along the way. </span></p>

<p><span class="line" data-startTime="1172">So with that, I want to turn it </span><span class="line" data-startTime="1172">back over to Marc to give a </span><span class="line" data-startTime="1176">demo that he's been </span><span class="line" data-startTime="1176">working on. </span></p>

<p class="speaker"><span class="line" data-starttime="1178"><span class="speakerName">Marc Cohen</span>: Thanks, Joe. </span> <span class="line" data-startTime="1181">So I'd like to review a very </span><span class="line" data-startTime="1181">simple app that I've written </span><span class="line" data-startTime="1184">to try to illustrate some of </span><span class="line" data-startTime="1184">the concepts we've been </span><span class="line" data-startTime="1186">talking about today. </span> <span class="line" data-startTime="1187">I call it Ping Me! </span><span class="line" data-startTime="1188">And the idea behind this app is </span><span class="line" data-startTime="1188">that we're going to serve a </span><span class="line" data-startTime="1192">web service from a </span><span class="line" data-startTime="1192">cluster of VMs. </span> <span class="line" data-startTime="1197">We will deploy it on a very </span><span class="line" data-startTime="1197">simple stack, very </span><span class="line" data-startTime="1200">lightweight, Node.js, the </span><span class="line" data-startTime="1200">Express web framework, and </span><span class="line" data-startTime="1205">WebSockets to have some fun </span><span class="line" data-startTime="1205">with interactivity. </span></p>

<p><span class="line" data-startTime="1210">What will happen is the server </span><span class="line" data-startTime="1210">that you reach will be </span><span class="line" data-startTime="1212">selected by our Load Balancing </span><span class="line" data-startTime="1212">capability with built-in </span><span class="line" data-startTime="1216">health checking. </span> <span class="line" data-startTime="1218">So to be clear, I'm previewing </span><span class="line" data-startTime="1218">something that we're in </span><span class="line" data-startTime="1222">testing mode with right now. </span> <span class="line" data-startTime="1224">So it's not an openly available </span><span class="line" data-startTime="1224">feature of the </span><span class="line" data-startTime="1227">product, but it's something </span><span class="line" data-startTime="1227">that we're </span><span class="line" data-startTime="1228">actively working on. </span> <span class="line" data-startTime="1230">And I'll give you some </span><span class="line" data-startTime="1230">information at the end of the </span><span class="line" data-startTime="1231">talk about how you can find out </span><span class="line" data-startTime="1231">more about that feature. </span></p>

<p><span class="line" data-startTime="1235">So the way it'll work is you'll </span><span class="line" data-startTime="1235">connect to the Load </span><span class="line" data-startTime="1238">Balancer &mdash; or we'll connect </span><span class="line" data-startTime="1238">to the Load Balancer. </span> <span class="line" data-startTime="1241">A random server will </span><span class="line" data-startTime="1241">be selected among </span><span class="line" data-startTime="1244">the available resources. </span> <span class="line" data-startTime="1246">And once you have the page </span><span class="line" data-startTime="1246">drawn, we'll click a button to </span><span class="line" data-startTime="1249">ping the entire concept. </span> <span class="line" data-startTime="1251">And the idea is that </span><span class="line" data-startTime="1251">your pings are not </span><span class="line" data-startTime="1253">really TCP/IP pings. </span> <span class="line" data-startTime="1255">They're not ICMP layer pings. </span> <span class="line" data-startTime="1257">They're application </span><span class="line" data-startTime="1257">layer pings. </span> <span class="line" data-startTime="1259">We're just sending a little </span><span class="line" data-startTime="1259">short text message to the </span><span class="line" data-startTime="1263">selected server via WebSockets, </span><span class="line" data-startTime="1263">and that server is </span><span class="line" data-startTime="1266">going to turn around and </span><span class="line" data-startTime="1266">distribute those pings to all </span><span class="line" data-startTime="1270">of the client web apps connected </span><span class="line" data-startTime="1270">to the same server. </span> <span class="line" data-startTime="1275">As well, it's going to </span><span class="line" data-startTime="1275">distribute those messages to </span><span class="line" data-startTime="1279">all of the connected servers. </span> <span class="line" data-startTime="1280">So basically, your messages will </span><span class="line" data-startTime="1280">get shared throughout the </span><span class="line" data-startTime="1284">entire cluster. </span></p>

<p><span class="line" data-startTime="1285">And it's going to be built on a </span><span class="line" data-startTime="1285">very simple self-configuring </span><span class="line" data-startTime="1288">dynamic, shared-nothing </span><span class="line" data-startTime="1288">cluster. </span> <span class="line" data-startTime="1292">And the other interesting thing </span><span class="line" data-startTime="1292">about it, it's only 200 </span><span class="line" data-startTime="1295">lines of code. </span> <span class="line" data-startTime="1295">So this is a trivial app in </span><span class="line" data-startTime="1295">many ways, but I think it </span><span class="line" data-startTime="1299">illustrates how much you can do </span><span class="line" data-startTime="1299">with Google Compute Engine. </span> <span class="line" data-startTime="1301">I think the reason it's so </span><span class="line" data-startTime="1301">small is a lot of the </span><span class="line" data-startTime="1303">capabilities you might have to </span><span class="line" data-startTime="1303">build yourself are built right </span><span class="line" data-startTime="1306">into the fabric of </span><span class="line" data-startTime="1306">the product. </span> <span class="line" data-startTime="1308">This is what it looks </span><span class="line" data-startTime="1308">like in action. </span> <span class="line" data-startTime="1311">And we'll actually run it live </span><span class="line" data-startTime="1311">in a few minutes, but I want </span><span class="line" data-startTime="1314">to first take a few minutes </span><span class="line" data-startTime="1314">to show you some code. </span> <span class="line" data-startTime="1316">So it's built on two files, </span><span class="line" data-startTime="1316">app.js, a typical node server </span><span class="line" data-startTime="1321">app, and index.html, the file </span><span class="line" data-startTime="1321">that it's serving up when you </span><span class="line" data-startTime="1326">connect to this app. </span></p>

<p><span class="line" data-startTime="1327">So we listen on port 80, and we </span><span class="line" data-startTime="1327">use the Express framework </span><span class="line" data-startTime="1331">to wrap a few type </span><span class="line" data-startTime="1331">of get requests. </span> <span class="line" data-startTime="1334">The first one is just </span><span class="line" data-startTime="1334">a simple route path. </span> <span class="line" data-startTime="1337">Get request will return </span><span class="line" data-startTime="1337">index.html. </span> <span class="line" data-startTime="1340">And this health path, it gives </span><span class="line" data-startTime="1340">us the ability to respond to a </span><span class="line" data-startTime="1344">health check from the </span><span class="line" data-startTime="1344">Load Balancer. </span> <span class="line" data-startTime="1347">This is nice because we can </span><span class="line" data-startTime="1347">define the semantics of what </span><span class="line" data-startTime="1350">it means to be healthy at </span><span class="line" data-startTime="1350">the application layer. </span> <span class="line" data-startTime="1352">So we can just have that </span><span class="line" data-startTime="1352">blindly return OK &mdash; </span><span class="line" data-startTime="1356">200 OK, I'm happy. </span> <span class="line" data-startTime="1357">Or we can build any sort of </span><span class="line" data-startTime="1357">application logic we want to, </span><span class="line" data-startTime="1360">to fine-tune what it means to be </span><span class="line" data-startTime="1360">healthy and thereby affect </span><span class="line" data-startTime="1364">whether we get requests </span><span class="line" data-startTime="1364">routed to us or not. </span> <span class="line" data-startTime="1373">We're going to listen for two </span><span class="line" data-startTime="1373">types of events on the </span><span class="line" data-startTime="1376">connected sockets. </span></p>

<p><span class="line" data-startTime="1377">So after we've served up the </span><span class="line" data-startTime="1377">index.html, the client's going </span><span class="line" data-startTime="1381">to make a WebSockets call </span><span class="line" data-startTime="1381">back to the server. </span> <span class="line" data-startTime="1384">And we're also going </span><span class="line" data-startTime="1384">to get incoming </span><span class="line" data-startTime="1386">connections from our peers. </span> <span class="line" data-startTime="1388">So the first type of event </span><span class="line" data-startTime="1388">is a browser ping. </span> <span class="line" data-startTime="1390">That's when someone </span><span class="line" data-startTime="1390">presses the button </span><span class="line" data-startTime="1392">to send us a message. </span> <span class="line" data-startTime="1393">And what we're going to do </span><span class="line" data-startTime="1393">there is turn around and </span><span class="line" data-startTime="1396">forward that to all </span><span class="line" data-startTime="1396">the connected </span><span class="line" data-startTime="1398">browsers and all the peers. </span> <span class="line" data-startTime="1401">And so right away, that raises </span><span class="line" data-startTime="1401">the specter of things </span><span class="line" data-startTime="1404">traveling around through loops </span><span class="line" data-startTime="1404">in a directed graph, and we </span><span class="line" data-startTime="1407">don't want that. </span> <span class="line" data-startTime="1407">So you'll notice that the </span><span class="line" data-startTime="1407">forwarded ping event handler, </span><span class="line" data-startTime="1412">ie, incoming pings that come </span><span class="line" data-startTime="1412">from peers in the cluster, </span><span class="line" data-startTime="1416">will only be distributed </span><span class="line" data-startTime="1416">to the browsers, not </span><span class="line" data-startTime="1419">to any other peers. </span></p>

<p><span class="line" data-startTime="1420">So that's how we avoid loops. </span> <span class="line" data-startTime="1421">And of course, that implies that </span><span class="line" data-startTime="1421">all of the clusters are </span><span class="line" data-startTime="1424">strongly connected </span><span class="line" data-startTime="1424">and in a mesh. </span> <span class="line" data-startTime="1426">And we've got a bit of logic </span><span class="line" data-startTime="1426">here to make sure that that </span><span class="line" data-startTime="1429">happens, and it happens </span><span class="line" data-startTime="1429">automatically and dynamically. </span> <span class="line" data-startTime="1432">And here's the index.html </span><span class="line" data-startTime="1432">that gets served up. </span> <span class="line" data-startTime="1435">So here's the ping button, the </span><span class="line" data-startTime="1435">all important ping button And </span><span class="line" data-startTime="1440">we have two divs to hold the </span><span class="line" data-startTime="1440">display of the servers and the </span><span class="line" data-startTime="1443">incoming pings, and that's going </span><span class="line" data-startTime="1443">to be a real-time stream </span><span class="line" data-startTime="1446">of the pings. </span> <span class="line" data-startTime="1447">The connect function is defined </span><span class="line" data-startTime="1447">here and called at the </span><span class="line" data-startTime="1450">bottom, and that is going to do </span><span class="line" data-startTime="1450">the WebSockets connection. </span></p>

<p><span class="line" data-startTime="1454">So I'm using the Socket.IO </span><span class="line" data-startTime="1454">library. </span> <span class="line" data-startTime="1458">And here are two event </span><span class="line" data-startTime="1458">handlers for on.ping. </span> <span class="line" data-startTime="1461">That's where a message comes in </span><span class="line" data-startTime="1461">to us from the server we're </span><span class="line" data-startTime="1466">connected to. </span> <span class="line" data-startTime="1467">And all we want to do </span><span class="line" data-startTime="1467">is prepend that </span><span class="line" data-startTime="1469">to the ping's div. </span> <span class="line" data-startTime="1471">And that way, we'll put it </span><span class="line" data-startTime="1471">at the top of the list. </span> <span class="line" data-startTime="1474">And so everything is going to </span><span class="line" data-startTime="1474">stream upward, I guess. </span> <span class="line" data-startTime="1478">It's like a stack essentially. </span> <span class="line" data-startTime="1480">The newest stuff </span><span class="line" data-startTime="1480">will be on top. </span></p>

<p><span class="line" data-startTime="1482">And this is the action </span><span class="line" data-startTime="1482">to do when you </span><span class="line" data-startTime="1490">click the ping button. </span> <span class="line" data-startTime="1496">Yeah, I think I messed up the </span><span class="line" data-startTime="1496">name there, but that's </span><span class="line" data-startTime="1499">basically just sending </span><span class="line" data-startTime="1499">a ping to the server. </span> <span class="line" data-startTime="1502">OK, this is just a </span><span class="line" data-startTime="1502">system diagram. </span> <span class="line" data-startTime="1504">The user fetches the index.html </span><span class="line" data-startTime="1504">going through the </span><span class="line" data-startTime="1507">Load Balancer. </span> <span class="line" data-startTime="1508">It gets assigned a web server, </span><span class="line" data-startTime="1508">and then it can ping and have </span><span class="line" data-startTime="1510">the pings distributed locally. </span> <span class="line" data-startTime="1513">And then we'll show also a </span><span class="line" data-startTime="1513">multi-server capability where </span><span class="line" data-startTime="1516">we fetch the page, we do the </span><span class="line" data-startTime="1516">ping, we get the local update, </span><span class="line" data-startTime="1519">and then it also gets forwarded </span><span class="line" data-startTime="1519">to the peer, and we </span><span class="line" data-startTime="1521">have remote updates happening. </span> <span class="line" data-startTime="1523">So let's take a look </span><span class="line" data-startTime="1523">at that now. </span> <span class="line" data-startTime="1532">So this is actually going to </span><span class="line" data-startTime="1532">fail because I don't have any </span><span class="line" data-startTime="1534">VMs created. </span></p>

<p><span class="line" data-startTime="1535">I'm going to start by </span><span class="line" data-startTime="1535">creating some VMs. </span> <span class="line" data-startTime="1538">So I have a little script </span><span class="line" data-startTime="1538">here called Add, </span><span class="line" data-startTime="1542">which looks like this. </span> <span class="line" data-startTime="1544">And the gc.util command that you </span><span class="line" data-startTime="1544">see here is doing all the </span><span class="line" data-startTime="1549">heavy lifting here. </span> <span class="line" data-startTime="1549">I'm just looping over </span><span class="line" data-startTime="1549">the input arguments. </span> <span class="line" data-startTime="1552">I'm going to put 0 and 1 in the </span><span class="line" data-startTime="1552">US Central 1A zone, 2 and </span><span class="line" data-startTime="1558">3 in the Central 1B zone. </span> <span class="line" data-startTime="1560">And I'll just create </span><span class="line" data-startTime="1560">0, 1 and 2 for now, </span><span class="line" data-startTime="1562">and we'll add 3 later. </span></p>

<p class="speaker"><span class="line" data-starttime="1565"><span class="speakerName">Joe Beda</span>: One thing to note </span><span class="line" data-startTime="1565">here is that command line </span><span class="line" data-startTime="1567">looks pretty complex, </span><span class="line" data-startTime="1567">but that was </span><span class="line" data-startTime="1569">generated using our console. </span><span class="line" data-startTime="1570">So when you actually go to </span><span class="line" data-startTime="1570">launch a VM from the console, </span><span class="line" data-startTime="1574">you can go ahead and do it </span><span class="line" data-startTime="1574">right there or actually </span><span class="line" data-startTime="1576">capture a command that you </span><span class="line" data-startTime="1576">can go ahead and script. </span></p>

<p class="speaker"><span class="line" data-starttime="1579"><span class="speakerName">Marc Cohen</span>: Right, thanks. </span> <span class="line" data-startTime="1580">And I wasn't quick enough to </span><span class="line" data-startTime="1580">show you, but those things </span><span class="line" data-startTime="1582">that are spinning weren't </span><span class="line" data-startTime="1582">there a second ago. </span> <span class="line" data-startTime="1585">They immediately came into view, </span><span class="line" data-startTime="1585">and they started up. </span> <span class="line" data-startTime="1588">And you see they're all green. </span> <span class="line" data-startTime="1589">They've actually come up. </span> <span class="line" data-startTime="1590">That's how fast we start VMs. </span> <span class="line" data-startTime="1592">And as Joe said, there are some </span><span class="line" data-startTime="1592">really nice capabilities </span><span class="line" data-startTime="1596">built right into &mdash; </span><span class="line" data-startTime="1598">this is our new Cloud Console, </span><span class="line" data-startTime="1598">and it's a very nice, updated </span><span class="line" data-startTime="1604">web user interface </span><span class="line" data-startTime="1604">for administering </span><span class="line" data-startTime="1606">things across the cloud. </span> <span class="line" data-startTime="1607">So you can use this for lots </span><span class="line" data-startTime="1607">of the Cloud product, but </span><span class="line" data-startTime="1611">we're going to focus </span><span class="line" data-startTime="1611">specifically on Compute Engine </span><span class="line" data-startTime="1613">here today. </span> <span class="line" data-startTime="1615">So we now have Servers 0, 1 and </span><span class="line" data-startTime="1615">2, and we have this model, </span><span class="line" data-startTime="1620">which is the genesis </span><span class="line" data-startTime="1620">of those servers. </span> <span class="line" data-startTime="1623">I'll try to talk about that a </span><span class="line" data-startTime="1623">little bit, but I've done a </span><span class="line" data-startTime="1624">trick similar to what Joe showed </span><span class="line" data-startTime="1624">you where I have a </span><span class="line" data-startTime="1626">model server. </span></p>

<p><span class="line" data-startTime="1628">I customize it, add packages, do </span><span class="line" data-startTime="1628">everything I want to get it </span><span class="line" data-startTime="1631">ready, and then I take </span><span class="line" data-startTime="1631">a snapshot of </span><span class="line" data-startTime="1634">the Persistent Disk. </span> <span class="line" data-startTime="1634">I have a root-mounted Persistent </span><span class="line" data-startTime="1634">Disk on that model. </span> <span class="line" data-startTime="1637">I take a snapshot of it, and </span><span class="line" data-startTime="1637">then I can create Persistent </span><span class="line" data-startTime="1640">Disks from that snapshot and </span><span class="line" data-startTime="1640">start up VMs very fast off of </span><span class="line" data-startTime="1644">those Persistent Disks. </span> <span class="line" data-startTime="1646">I can also create a disk on the </span><span class="line" data-startTime="1646">fly with the VM targeted </span><span class="line" data-startTime="1650">off of the snapshot. </span> <span class="line" data-startTime="1651">So there are a lot of nice </span><span class="line" data-startTime="1651">configuration options. </span> <span class="line" data-startTime="1653">I'm not going to go through </span><span class="line" data-startTime="1653">that in depth, but if you </span><span class="line" data-startTime="1656">click New Instance, you get </span><span class="line" data-startTime="1656">prompted for all kinds of </span><span class="line" data-startTime="1659">interesting ways to create </span><span class="line" data-startTime="1659">a new instance. </span> <span class="line" data-startTime="1662">So let's go back to Instances. </span></p>

<p><span class="line" data-startTime="1664">And this failed because I </span><span class="line" data-startTime="1664">didn't have any servers. </span> <span class="line" data-startTime="1666">If I'm lucky, when I click </span><span class="line" data-startTime="1666">it, it does connect. </span> <span class="line" data-startTime="1669">OK, so what happened </span><span class="line" data-startTime="1669">was it served me a </span><span class="line" data-startTime="1673">connection through that. </span> <span class="line" data-startTime="1675">So the 161 is a &mdash; </span><span class="line" data-startTime="1678">other people may </span><span class="line" data-startTime="1678">be connecting. </span> <span class="line" data-startTime="1681">The 161 is the Load Balancer, </span><span class="line" data-startTime="1681">and it connected me </span><span class="line" data-startTime="1685">through to Server 0. </span> <span class="line" data-startTime="1687">So let's clone that window and </span><span class="line" data-startTime="1687">pull it out of the Chrome </span><span class="line" data-startTime="1693">frame and take a look at some </span><span class="line" data-startTime="1693">of the other servers. </span> <span class="line" data-startTime="1698">So I can actually click on </span><span class="line" data-startTime="1698">Server 1, and that reroutes my </span><span class="line" data-startTime="1703">WebSocket connection </span><span class="line" data-startTime="1703">over to Server 1. </span></p>

<p><span class="line" data-startTime="1705">And as you can see, if </span><span class="line" data-startTime="1705">I click Ping here, it </span><span class="line" data-startTime="1707">shows up on my server. </span> <span class="line" data-startTime="1709">It's showing up on anybody </span><span class="line" data-startTime="1709">who's already connected. </span> <span class="line" data-startTime="1712">You guys are fast. </span> <span class="line" data-startTime="1714">I didn't say anything about the </span><span class="line" data-startTime="1714">address, and it's like, </span><span class="line" data-startTime="1716">bam, you guys are in. </span> <span class="line" data-startTime="1718">And then if I ping here as well, </span><span class="line" data-startTime="1718">you can see it sends it. </span> <span class="line" data-startTime="1721">So what's happening is these </span><span class="line" data-startTime="1721">pings are getting distributed </span><span class="line" data-startTime="1723">locally and throughout the </span><span class="line" data-startTime="1723">network, which is cool. </span> <span class="line" data-startTime="1726">Now let's try &mdash; you guys are </span><span class="line" data-startTime="1726">going to try to DoS me here. </span> <span class="line" data-startTime="1731">So let's try something </span><span class="line" data-startTime="1731">interesting. </span> <span class="line" data-startTime="1733">Let's add a VM. </span></p>

<p><span class="line" data-startTime="1738">And while we're waiting for that </span><span class="line" data-startTime="1738">to happen, let's take a </span><span class="line" data-startTime="1741">look at the Cloud console. </span> <span class="line" data-startTime="1742">There it is. </span> <span class="line" data-startTime="1743">It's already starting. </span> <span class="line" data-startTime="1744">And I'll show you the </span><span class="line" data-startTime="1744">disks that I have. </span> <span class="line" data-startTime="1748">I have one disk for </span><span class="line" data-startTime="1748">each server here. </span> <span class="line" data-startTime="1750">You can see the zones. </span> <span class="line" data-startTime="1751">So the disks are </span><span class="line" data-startTime="1751">zone-affiliated, and then I </span><span class="line" data-startTime="1754">have my master snapshot. </span> <span class="line" data-startTime="1756">So if I wanted to create </span><span class="line" data-startTime="1756">something with the </span><span class="line" data-startTime="1764">characteristics of this </span><span class="line" data-startTime="1764">instance, there are two links </span><span class="line" data-startTime="1767">down here that I want to </span><span class="line" data-startTime="1767">call your attention to. </span> <span class="line" data-startTime="1769">The first one is REST. </span> <span class="line" data-startTime="1771">And so this is the JSON </span><span class="line" data-startTime="1771">equivalent of how you would </span><span class="line" data-startTime="1777">specify this. </span> <span class="line" data-startTime="1778">And technically, I'm not </span><span class="line" data-startTime="1778">saying this correctly. </span> <span class="line" data-startTime="1781">This is the JSON response from </span><span class="line" data-startTime="1781">a get.instance call. </span> <span class="line" data-startTime="1786">A better way to show this would </span><span class="line" data-startTime="1786">be to say, let's create </span><span class="line" data-startTime="1788">a new instance, and I would </span><span class="line" data-startTime="1788">give some characteristics, </span><span class="line" data-startTime="1792">select a bunch of stuff. </span> <span class="line" data-startTime="1793">And then down at the </span><span class="line" data-startTime="1793">bottom somewhere &mdash; </span><span class="line" data-startTime="1799">there it is, Equivalent </span><span class="line" data-startTime="1799">REST or Command Line. </span> <span class="line" data-startTime="1802">I can click Command Line, and I </span><span class="line" data-startTime="1802">get the gcutil equivalent of </span><span class="line" data-startTime="1805">that creation, and it'll adjust </span><span class="line" data-startTime="1805">to reflect all the </span><span class="line" data-startTime="1807">specifications I give. </span></p>

<p><span class="line" data-startTime="1809">And then the rest is, as I said </span><span class="line" data-startTime="1809">earlier, it's the JSON </span><span class="line" data-startTime="1814">equivalent of the RESTful API </span><span class="line" data-startTime="1814">to do that instance add. </span> <span class="line" data-startTime="1820">This is really super-duper </span><span class="line" data-startTime="1820">powerful. </span> <span class="line" data-startTime="1822">I'm really excited about this, </span><span class="line" data-startTime="1822">and that's why I'm spending a </span><span class="line" data-startTime="1824">lot of time on it. </span> <span class="line" data-startTime="1825">You can go through the UI and </span><span class="line" data-startTime="1825">use it as a very simple </span><span class="line" data-startTime="1827">point-and-click mechanism to </span><span class="line" data-startTime="1827">specify what you want to do, </span><span class="line" data-startTime="1830">and then you have immediate </span><span class="line" data-startTime="1830">access to things that tell you </span><span class="line" data-startTime="1833">how to do the equivalent of </span><span class="line" data-startTime="1833">what you've just done </span><span class="line" data-startTime="1836">interactively via code </span><span class="line" data-startTime="1836">and via command line. </span> <span class="line" data-startTime="1839">I think this is totally awesome, </span><span class="line" data-startTime="1839">and I'm really proud </span><span class="line" data-startTime="1843">of what the engineering team </span><span class="line" data-startTime="1843">has done to make that </span><span class="line" data-startTime="1845">available to you guys. </span></p>

<p><span class="line" data-startTime="1847">Let's check on the instance. </span> <span class="line" data-startTime="1849">It's now up and running. </span> <span class="line" data-startTime="1853">So now, you see we have Server </span><span class="line" data-startTime="1853">0, 1, 2 and 3, and you may </span><span class="line" data-startTime="1859">note that I didn't </span><span class="line" data-startTime="1859">refresh anything. </span> <span class="line" data-startTime="1863">So these web pages just </span><span class="line" data-startTime="1863">magically from WebSockets </span><span class="line" data-startTime="1869">found out, oh, there's a new </span><span class="line" data-startTime="1869">server in the group and we're </span><span class="line" data-startTime="1873">getting stuff from it. </span> <span class="line" data-startTime="1875">And as you can see, we're </span><span class="line" data-startTime="1875">still able to send &mdash; </span><span class="line" data-startTime="1879">actually, there we go. </span> <span class="line" data-startTime="1882">You guys are hitting this so </span><span class="line" data-startTime="1882">hard that I couldn't see the </span><span class="line" data-startTime="1885">ping I just sent. </span> <span class="line" data-startTime="1886">But the other thing I want to </span><span class="line" data-startTime="1886">show you very quickly is if I </span><span class="line" data-startTime="1890">refresh that whole page, </span><span class="line" data-startTime="1890">I end up on Server 1. </span> <span class="line" data-startTime="1893">So it's just showing you </span><span class="line" data-startTime="1893">the Load Balancer </span><span class="line" data-startTime="1894">is doing its thing. </span> <span class="line" data-startTime="1896">Now, one last thing I want to </span><span class="line" data-startTime="1896">show is I'm going to kill &mdash; </span><span class="line" data-startTime="1899">actually, let me do the delete </span><span class="line" data-startTime="1899">using the console. </span></p>

<p><span class="line" data-startTime="1904">So I'm going to select </span><span class="line" data-startTime="1904">Server 3. </span> <span class="line" data-startTime="1907">I'll scroll down there. </span> <span class="line" data-startTime="1907">And one thing to </span><span class="line" data-startTime="1907">note here, this </span><span class="line" data-startTime="1908">robust-io13, that's a tag. </span> <span class="line" data-startTime="1912">And that gives us the ability </span><span class="line" data-startTime="1912">to refer collectively to a </span><span class="line" data-startTime="1915">group of servers via the tag, </span><span class="line" data-startTime="1915">which is very convenient when </span><span class="line" data-startTime="1919">you're administering networking </span><span class="line" data-startTime="1919">capabilities. </span> <span class="line" data-startTime="1922">For example, you could have a </span><span class="line" data-startTime="1922">firewall rule that says, let </span><span class="line" data-startTime="1925">this traffic in for any VM </span><span class="line" data-startTime="1925">with that particular tag. </span> <span class="line" data-startTime="1928">That's a nice capability. </span> <span class="line" data-startTime="1929">I won't go too far into </span><span class="line" data-startTime="1929">that right now. </span> <span class="line" data-startTime="1930">But I'm going to delete this </span><span class="line" data-startTime="1930">instance, and Cloud Console </span><span class="line" data-startTime="1935">will show it spinning. </span> <span class="line" data-startTime="1940">And let's see if there's </span><span class="line" data-startTime="1940">anything else I wanted to show </span><span class="line" data-startTime="1942">you on the Cloud Console. </span> <span class="line" data-startTime="1944">I am going a little late on </span><span class="line" data-startTime="1944">time, so let me see what I </span><span class="line" data-startTime="1946">have coming up here. </span></p>

<p><span class="line" data-startTime="1953">OK. </span> <span class="line" data-startTime="1958">It's still deleting, so let's </span><span class="line" data-startTime="1958">come back to that. </span> <span class="line" data-startTime="1963">Just in the name of time here, </span><span class="line" data-startTime="1963">let's keep marching ahead. </span> <span class="line" data-startTime="1966">So I've shown you a multi-server </span><span class="line" data-startTime="1966">configuration. </span> <span class="line" data-startTime="1969">We talked about the </span><span class="line" data-startTime="1969">single server. </span> <span class="line" data-startTime="1971">Let me enlarge that for you </span><span class="line" data-startTime="1971">guys, and let's look at the </span><span class="line" data-startTime="1974">multi server. </span> <span class="line" data-startTime="1976">We've talked about that. </span> <span class="line" data-startTime="1977">If you're a real world </span><span class="line" data-startTime="1977">application, of course you </span><span class="line" data-startTime="1979">never have just a </span><span class="line" data-startTime="1979">pure web server. </span> <span class="line" data-startTime="1981">You have some sort of back-end </span><span class="line" data-startTime="1981">datastore, and it's really </span><span class="line" data-startTime="1984">important to have that </span><span class="line" data-startTime="1984">capability also be resilient </span><span class="line" data-startTime="1988">and fault tolerant and </span><span class="line" data-startTime="1988">nicely scalable. </span></p>

<p><span class="line" data-startTime="1991">And so a typical approach here </span><span class="line" data-startTime="1991">is to choose one of many </span><span class="line" data-startTime="1995">popular open source or </span><span class="line" data-startTime="1995">commercial database servers &mdash; </span><span class="line" data-startTime="1999">there are a lot of great </span><span class="line" data-startTime="1999">choices out there &mdash; </span><span class="line" data-startTime="2001">and deploy them in this </span><span class="line" data-startTime="2001">sort of a fashion. </span> <span class="line" data-startTime="2004">If you get big enough, you </span><span class="line" data-startTime="2004">probably want some sort of a </span><span class="line" data-startTime="2006">load balancing capability, an </span><span class="line" data-startTime="2006">internal load balancing </span><span class="line" data-startTime="2009">capability between your </span><span class="line" data-startTime="2009">front-ends and your back-ends. </span> <span class="line" data-startTime="2012">This is a widely known practiced </span><span class="line" data-startTime="2012">standard throughout </span><span class="line" data-startTime="2016">the industry. </span> <span class="line" data-startTime="2017">But there's another option which </span><span class="line" data-startTime="2017">I want to talk about, </span><span class="line" data-startTime="2019">which is to replace the </span><span class="line" data-startTime="2019">whole back-end tier </span><span class="line" data-startTime="2021">with a managed service. </span> <span class="line" data-startTime="2023">And Joe talked earlier about </span><span class="line" data-startTime="2023">some of the capabilities we </span><span class="line" data-startTime="2027">either have been offering or </span><span class="line" data-startTime="2027">have recently announced like </span><span class="line" data-startTime="2030">Google Cloud Storage, the Cloud </span><span class="line" data-startTime="2033">Datastore, and Cloud SQL. </span> <span class="line" data-startTime="2035">And the beauty of this approach </span><span class="line" data-startTime="2035">is that you tap </span><span class="line" data-startTime="2038">into &mdash; it's like what I was </span><span class="line" data-startTime="2038">talking about earlier about </span><span class="line" data-startTime="2040">taking advantage of Google's DNA </span><span class="line" data-startTime="2040">and everything that's gone </span><span class="line" data-startTime="2043">into our designs. </span></p>

<p><span class="line" data-startTime="2044">You get to tap into a ton of </span><span class="line" data-startTime="2044">expertise and technology that </span><span class="line" data-startTime="2049">makes it super easy to access </span><span class="line" data-startTime="2049">services that are just super </span><span class="line" data-startTime="2053">scalable from day one, super </span><span class="line" data-startTime="2053">high availability, extremely </span><span class="line" data-startTime="2058">replicated, geo-replicated, </span><span class="line" data-startTime="2058">all that good stuff. </span> <span class="line" data-startTime="2061">And you don't have to worry </span><span class="line" data-startTime="2061">about managing servers and </span><span class="line" data-startTime="2065">processes anymore. </span> <span class="line" data-startTime="2069">So that's it. </span> <span class="line" data-startTime="2069">Let me jump back to the demo and </span><span class="line" data-startTime="2069">see if it actually worked. </span> <span class="line" data-startTime="2074">OK, so Server 4 went away. </span> <span class="line" data-startTime="2076">Again, I didn't refresh </span><span class="line" data-startTime="2076">the app. </span> <span class="line" data-startTime="2078">I didn't do anything. </span> <span class="line" data-startTime="2079">Let's see if this guy's &mdash; </span><span class="line" data-startTime="2080">yes. </span></p>

<p><span class="line" data-startTime="2081">So you're probably wondering, </span><span class="line" data-startTime="2081">did that really work? </span><span class="line" data-startTime="2085">It would be nice to have seen </span><span class="line" data-startTime="2085">that go away, but anyway, </span><span class="line" data-startTime="2087">you'll have to trust </span><span class="line" data-startTime="2087">me on that. </span> <span class="line" data-startTime="2089">But these guys are talking </span><span class="line" data-startTime="2089">to each other. </span> <span class="line" data-startTime="2091">They're exchanging information </span><span class="line" data-startTime="2091">dynamically. </span> <span class="line" data-startTime="2092">They're using a lot of the </span><span class="line" data-startTime="2092">capabilities that Joe talked </span><span class="line" data-startTime="2095">about earlier using metadata. </span> <span class="line" data-startTime="2097">The color that they use </span><span class="line" data-startTime="2097">is configured as </span><span class="line" data-startTime="2099">part of their metadata. </span> <span class="line" data-startTime="2100">So when I create a new server, I </span><span class="line" data-startTime="2100">can assign it a color in its </span><span class="line" data-startTime="2103">instance-specific metadata, </span><span class="line" data-startTime="2103">and it'll do </span><span class="line" data-startTime="2105">that or change it. </span> <span class="line" data-startTime="2106">So a lot of nice capabilities </span><span class="line" data-startTime="2106">here along with the load </span><span class="line" data-startTime="2110">balancing and the snapshots </span><span class="line" data-startTime="2110">and all that good stuff. </span> <span class="line" data-startTime="2115">So I'll try to finish up here </span><span class="line" data-startTime="2115">because I want to leave a </span><span class="line" data-startTime="2118">little bit of time </span><span class="line" data-startTime="2118">for questions. </span> <span class="line" data-startTime="2119">The last thing I wanted to </span><span class="line" data-startTime="2119">mention is just a few simple </span><span class="line" data-startTime="2124">takeaways that I want </span><span class="line" data-startTime="2124">to leave you with. </span></p>

<p><span class="line" data-startTime="2130">So it's a summary of what we </span><span class="line" data-startTime="2130">felt were the key points we </span><span class="line" data-startTime="2133">were sharing today. </span> <span class="line" data-startTime="2135">One is that reliable systems </span><span class="line" data-startTime="2135">are really a combination of </span><span class="line" data-startTime="2137">infrastructure &mdash; </span><span class="line" data-startTime="2138">that's what we're trying </span><span class="line" data-startTime="2138">to give you and </span><span class="line" data-startTime="2139">do a great job of &mdash; </span><span class="line" data-startTime="2140">design &mdash; </span><span class="line" data-startTime="2141">that's your apps and all the </span><span class="line" data-startTime="2141">logic and business processes </span><span class="line" data-startTime="2145">that you guys work with every </span><span class="line" data-startTime="2145">day &mdash; and then people. </span> <span class="line" data-startTime="2147">And we talked about that </span><span class="line" data-startTime="2147">earlier, some of the good </span><span class="line" data-startTime="2149">people processes that you need </span><span class="line" data-startTime="2149">to think about when you're </span><span class="line" data-startTime="2151">building reliable systems. </span></p>

<p><span class="line" data-startTime="2153">It's super important to manage </span><span class="line" data-startTime="2153">your config, your deployment, </span><span class="line" data-startTime="2156">and your scaling as if were </span><span class="line" data-startTime="2156">code, as it were one of the </span><span class="line" data-startTime="2160">critical artifacts of your </span><span class="line" data-startTime="2160">business because it really is. </span> <span class="line" data-startTime="2163">So the app I've shown is a toy, </span><span class="line" data-startTime="2163">and I think it shows a </span><span class="line" data-startTime="2169">fairly cool amount of stuff that </span><span class="line" data-startTime="2169">you can do on your own. </span> <span class="line" data-startTime="2172">But as Joe mentioned earlier, </span><span class="line" data-startTime="2172">there are a lot of great </span><span class="line" data-startTime="2174">options out there to do more </span><span class="line" data-startTime="2174">sophisticated and declarative </span><span class="line" data-startTime="2178">type processes around that. </span></p>

<p><span class="line" data-startTime="2181">Fast-starting servers </span><span class="line" data-startTime="2181">are awesome. </span> <span class="line" data-startTime="2183">They rock. </span> <span class="line" data-startTime="2184">They help you scale better. </span> <span class="line" data-startTime="2185">They help with your </span><span class="line" data-startTime="2185">availability, and we're </span><span class="line" data-startTime="2188">looking forward to making </span><span class="line" data-startTime="2188">resources available even </span><span class="line" data-startTime="2191">faster in the future. </span> <span class="line" data-startTime="2193">Power tools to build </span><span class="line" data-startTime="2193">self-configuring, shared, </span><span class="line" data-startTime="2196">little, stateless servers along </span><span class="line" data-startTime="2196">the lines of what Joe </span><span class="line" data-startTime="2199">showed you earlier are </span><span class="line" data-startTime="2199">really important. </span> <span class="line" data-startTime="2202">Take advantage of managed </span><span class="line" data-startTime="2202">services. </span> <span class="line" data-startTime="2203">As I just mentioned, there's a </span><span class="line" data-startTime="2203">real value, I think, in terms </span><span class="line" data-startTime="2207">of not having to reinvent </span><span class="line" data-startTime="2207">the wheel there. </span></p>

<p><span class="line" data-startTime="2210">And plan for all the </span><span class="line" data-startTime="2210">different types of </span><span class="line" data-startTime="2212">outages that are possible. </span> <span class="line" data-startTime="2214">I didn't actually show this. </span> <span class="line" data-startTime="2215">I'd meant to, but I just </span><span class="line" data-startTime="2215">killed one server. </span> <span class="line" data-startTime="2218">I'm not going to take any more </span><span class="line" data-startTime="2218">time on it, but if I had </span><span class="line" data-startTime="2220">killed 2 and 3, which were the </span><span class="line" data-startTime="2220">two in the 1 zone, you would </span><span class="line" data-startTime="2225">have seen that the Load Balancer </span><span class="line" data-startTime="2225">was still happy, and </span><span class="line" data-startTime="2228">all the service requests would </span><span class="line" data-startTime="2228">have just gone to one zone. </span> <span class="line" data-startTime="2230">So it perfectly would have </span><span class="line" data-startTime="2230">tolerated losing an entire </span><span class="line" data-startTime="2233">zone in that model. </span> <span class="line" data-startTime="2236">And finally, stay tuned </span><span class="line" data-startTime="2236">for more awesomeness. </span> <span class="line" data-startTime="2238">We've mentioned the </span><span class="line" data-startTime="2238">Load Balancing. </span> <span class="line" data-startTime="2240">We haven't mentioned System </span><span class="line" data-startTime="2240">Monitoring, but that's another </span><span class="line" data-startTime="2242">thing that we're working </span><span class="line" data-startTime="2242">on actively. </span> <span class="line" data-startTime="2244">And we're really excited about </span><span class="line" data-startTime="2244">continuing to add great value </span><span class="line" data-startTime="2247">to this product. </span></p>

<p><span class="line" data-startTime="2249">And we have something called the </span><span class="line" data-startTime="2249">Early Access Program that </span><span class="line" data-startTime="2251">you can link to here. </span> <span class="line" data-startTime="2253">It's a way to sign up to get </span><span class="line" data-startTime="2253">access to some of these </span><span class="line" data-startTime="2257">capabilities. </span> <span class="line" data-startTime="2263">And finally, your homework </span><span class="line" data-startTime="2263">is to take some of these </span><span class="line" data-startTime="2265">guidelines and build super </span><span class="line" data-startTime="2265">awesome systems. </span> <span class="line" data-startTime="2267">We're really excited to see what </span><span class="line" data-startTime="2267">you guys are going to do </span><span class="line" data-startTime="2269">with Google Compute Engine </span><span class="line" data-startTime="2269">and the Google </span><span class="line" data-startTime="2271">Cloud Platform in general. </span> <span class="line" data-startTime="2274">Here's a few places you can </span><span class="line" data-startTime="2274">learn some more about the </span><span class="line" data-startTime="2277">Compute Engine and </span><span class="line" data-startTime="2277">Cloud Platform. </span> <span class="line" data-startTime="2279">I'm going to make these </span><span class="line" data-startTime="2279">slides available via </span><span class="line" data-startTime="2281">that link at the top. </span> <span class="line" data-startTime="2282">They're not there right now. </span> <span class="line" data-startTime="2283">If you go there right </span><span class="line" data-startTime="2283">now, it won't work. </span></p>

<p><span class="line" data-startTime="2285">Within about an hour from the </span><span class="line" data-startTime="2285">end of this talk, I'll upload </span><span class="line" data-startTime="2288">the slides, and you'll be </span><span class="line" data-startTime="2288">able to find them at </span><span class="line" data-startTime="2290">bit.ly/robust-io13. </span> <span class="line" data-startTime="2294">And with that, I'd </span><span class="line" data-startTime="2294">like to thank you </span><span class="line" data-startTime="2296">guys for coming today. </span> <span class="line" data-startTime="2297">And thank you, Joe. </span> <span class="line" data-startTime="2298">So we'll take &mdash; </span><span class="line" data-startTime="2300">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="2305"><span class="speakerName">Marc Cohen</span>: And I think we </span><span class="line" data-startTime="2305">have one minute and eight </span><span class="line" data-startTime="2307">seconds for questions. </span><span class="line" data-startTime="2308">I apologize for that, but we'll </span><span class="line" data-startTime="2308">stay here and talk as </span><span class="line" data-startTime="2311">long as you guys would like. </span><span class="line" data-startTime="2313">Any questions? </span></p>

<p class="speaker"><span class="line" data-starttime="2316"><span class="speakerName">Audience</span>: [INAUDIBLE]? </span></p>

<p class="speaker"><span class="line" data-starttime="2323"><span class="speakerName">Marc Cohen</span>: So the question was, </span><span class="line" data-startTime="2323">to manage infrastructure </span><span class="line" data-startTime="2327">and code, what kind of </span><span class="line" data-startTime="2327">tools do we use? </span><span class="line" data-startTime="2329">So we have a bunch of internal, </span><span class="line" data-startTime="2329">as you would guess, </span><span class="line" data-startTime="2333">elaborate tools and processes </span><span class="line" data-startTime="2333">at Google that we use to </span><span class="line" data-startTime="2336">manage our code and our </span><span class="line" data-startTime="2336">development cycles and </span><span class="line" data-startTime="2339">deployments and all </span><span class="line" data-startTime="2339">that stuff. </span> <span class="line" data-startTime="2341">I don't think we're allowed </span><span class="line" data-startTime="2341">to go into too </span><span class="line" data-startTime="2343">much depth on that. </span> <span class="line" data-startTime="2346">Joe was talking about some of </span><span class="line" data-startTime="2346">the open source options like </span><span class="line" data-startTime="2348">Chef and Puppet, as well as </span><span class="line" data-startTime="2348">the commercial Scalr and </span><span class="line" data-startTime="2351">Rightscale. </span></p>

<p class="speaker"><span class="line" data-starttime="2352"><span class="speakerName">Audience</span>: [INAUDIBLE]? </span></p>

<p class="speaker"><span class="line" data-starttime="2355"><span class="speakerName">Joe Beda</span>: We're always looking </span><span class="line" data-startTime="2355">at new opportunities to take </span><span class="line" data-startTime="2358">some of our internal technology </span><span class="line" data-startTime="2358">and learnings and </span><span class="line" data-startTime="2360">externalize them. </span><span class="line" data-startTime="2360">We just have to prioritize what </span><span class="line" data-startTime="2360">we think will provide the </span><span class="line" data-startTime="2364">most value and work our </span><span class="line" data-startTime="2364">way down the list. </span><span class="line" data-startTime="2365">So eventually, hopefully we'll </span><span class="line" data-startTime="2365">find a way to get that stuff </span><span class="line" data-startTime="2369">out to everybody. </span></p>

<p class="speaker"><span class="line" data-starttime="2372"><span class="speakerName">Marc Cohen</span>: Other questions? </span><span class="line" data-startTime="2376">We've either put you guys to </span><span class="line" data-startTime="2376">sleep, or we've answered &mdash; </span><span class="line" data-startTime="2379">oh, here's a question. </span></p>

<p class="speaker"><span class="line" data-starttime="2381"><span class="speakerName">Joe Beda</span>: Do you mind </span><span class="line" data-startTime="2381">using the mic? </span><span class="line" data-startTime="2383">Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2387"><span class="speakerName">Audience</span>: The scheduled </span><span class="line" data-startTime="2387">maintenance that Google </span><span class="line" data-startTime="2389">undertakes regularly, just if </span><span class="line" data-startTime="2389">you could speak to patterns </span><span class="line" data-startTime="2392">for designing robust systems </span><span class="line" data-startTime="2392">around that? </span></p>

<p class="speaker"><span class="line" data-starttime="2395"><span class="speakerName">Joe Beda</span>: Around the scheduled </span><span class="line" data-startTime="2395">maintenance? </span></p>

<p class="speaker"><span class="line" data-starttime="2397"><span class="speakerName">Audience</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2398"><span class="speakerName">Joe Beda</span>: Well, it's </span><span class="line" data-startTime="2398">essentially </span><span class="line" data-startTime="2400">practicing for failure. </span><span class="line" data-startTime="2401">I think you get some warning. </span><span class="line" data-startTime="2404">It's a way for you to test your </span><span class="line" data-startTime="2405">procedures and your systems. </span><span class="line" data-startTime="2407">I think because we do have those </span><span class="line" data-startTime="2407">types of maintenances </span><span class="line" data-startTime="2411">internally also, it leads us to </span><span class="line" data-startTime="2411">build systems that you have </span><span class="line" data-startTime="2416">to be honest with yourself, </span><span class="line" data-startTime="2416">and you can't cheat. </span><span class="line" data-startTime="2418">You can't get away with it. </span></p>

<p class="speaker"><span class="line" data-starttime="2419"><span class="speakerName">Marc Cohen</span>: Were you referring </span><span class="line" data-startTime="2419">to the specific schedule that </span><span class="line" data-startTime="2422">Google has? </span></p>

<p class="speaker"><span class="line" data-starttime="2423"><span class="speakerName">Audience</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2423"><span class="speakerName">Marc Cohen</span>: Yeah, so the rule </span><span class="line" data-startTime="2423">of thumb is the zones </span><span class="line" data-startTime="2426">currently go into a maintenance </span><span class="line" data-startTime="2426">window roughly </span><span class="line" data-startTime="2430">twice a year. </span><span class="line" data-startTime="2431">And they go into that state </span><span class="line" data-startTime="2431">for up to two weeks. </span></p>

<p class="speaker"><span class="line" data-starttime="2437"><span class="speakerName">Audience</span>: A live service </span><span class="line" data-startTime="2437">at that point, you </span><span class="line" data-startTime="2441">would move it across? </span></p>

<p class="speaker"><span class="line" data-starttime="2442"><span class="speakerName">Marc Cohen</span>: Right, and so we </span><span class="line" data-startTime="2442">have some capabilities in that </span><span class="line" data-startTime="2445">area to help, like the gcutil </span><span class="line" data-startTime="2445">command that I was using to </span><span class="line" data-startTime="2448">show how to create instances </span><span class="line" data-startTime="2448">also has a capability for </span><span class="line" data-startTime="2453">migrating virtual machines with </span><span class="line" data-startTime="2453">attached Persistent Disks </span><span class="line" data-startTime="2457">from one zone to another. </span><span class="line" data-startTime="2459">But we're continuing to work </span><span class="line" data-startTime="2459">on that area to make the </span><span class="line" data-startTime="2462">process simpler and less </span><span class="line" data-startTime="2462">impactful on people. </span><span class="line" data-startTime="2465">But we also feel like if you </span><span class="line" data-startTime="2465">design your system so that it </span><span class="line" data-startTime="2469">tolerates a scheduled outage, </span><span class="line" data-startTime="2469">then you're doing the right </span><span class="line" data-startTime="2473">thing for any eventuality. </span></p>

<p class="speaker"><span class="line" data-starttime="2475"><span class="speakerName">Audience</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2482"><span class="speakerName">Marc Cohen</span>: I think </span><span class="line" data-startTime="2482">we're all done? </span><span class="line" data-startTime="2484">Oh, one more. </span></p>

<p class="speaker"><span class="line" data-starttime="2487"><span class="speakerName">Audience</span>: Hi, I'm [? Adi. ?] </span></p>

<p class="speaker"><span class="line" data-starttime="2488"><span class="speakerName">Marc Cohen</span>: Hi. </span></p>

<p class="speaker"><span class="line" data-starttime="2488"><span class="speakerName">Audience</span>: Now, right now, </span><span class="line" data-startTime="2488">there is a limitation in </span><span class="line" data-startTime="2490">Google App Engine, like </span><span class="line" data-startTime="2490">60 seconds for </span><span class="line" data-startTime="2493">processing a request. </span><span class="line" data-startTime="2496">That is an App Engine. </span></p>

<p class="speaker"><span class="line" data-starttime="2498"><span class="speakerName">Marc Cohen</span>: So the question was </span><span class="line" data-startTime="2498">about the 60 second limit </span><span class="line" data-startTime="2501">on Google &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2501"><span class="speakerName">Audience</span>: In App Engine, but </span><span class="line" data-startTime="2501">the question is, does the </span><span class="line" data-startTime="2504">limitation still continue when </span><span class="line" data-startTime="2504">you introduce the Load </span><span class="line" data-startTime="2506">Balancer in Compute Engine? </span></p>

<p class="speaker"><span class="line" data-starttime="2508"><span class="speakerName">Marc Cohen</span>: So is the 60 second </span><span class="line" data-startTime="2508">time out manifested in </span><span class="line" data-startTime="2512">Google Compute Engine? </span></p>

<p class="speaker"><span class="line" data-starttime="2513"><span class="speakerName">Audience</span>: No, in App Engine. </span><span class="line" data-startTime="2516">So in Google Compute Engine, </span><span class="line" data-startTime="2516">if you introduce a Load </span><span class="line" data-startTime="2519">Balancer, would that still be </span><span class="line" data-startTime="2519">a 60 second limitation? </span></p>

<p class="speaker"><span class="line" data-starttime="2525"><span class="speakerName">Joe Beda</span>: The type of Load </span><span class="line" data-startTime="2525">Balancer that we're demoing </span><span class="line" data-startTime="2528">here is a low enough level </span><span class="line" data-startTime="2528">that it just forwards TCP </span><span class="line" data-startTime="2532">connections. </span><span class="line" data-startTime="2532">And so it's up to you to </span><span class="line" data-startTime="2532">implement whatever you want on </span><span class="line" data-startTime="2537">top of that. </span><span class="line" data-startTime="2538">So you can use it for things </span><span class="line" data-startTime="2538">beyond just HTTP also. </span></p>

<p class="speaker"><span class="line" data-starttime="2541"><span class="speakerName">Audience</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="2545"><span class="speakerName">Joe Beda</span>: All right. </span></p>

<p class="speaker"><span class="line" data-starttime="2547"><span class="speakerName">Marc Cohen</span>: So we'll </span><span class="line" data-startTime="2547">be around. </span><span class="line" data-startTime="2548">You'll be here for </span><span class="line" data-startTime="2548">a little bit? </span></p>

<p class="speaker"><span class="line" data-starttime="2549"><span class="speakerName">Joe Beda</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2549"><span class="speakerName">Marc Cohen</span>: We'll hang out for </span><span class="line" data-startTime="2549">a little while if anybody </span><span class="line" data-startTime="2550">wants to come down and talk. </span><span class="line" data-startTime="2551">But thank you guys very much. </span><span class="line" data-startTime="2553">Hope you had a great </span><span class="line" data-startTime="2553">conference, </span><span class="line" data-startTime="2554">and have a good time. </span><span class="line" data-startTime="2554">[APPLAUSE] </span></p></div>