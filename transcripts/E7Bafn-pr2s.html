<p class="speaker"><span class="line" data-starttime="7"><span class="speakerName">Colt McAnlis</span>: Good. </span> <span class="line" data-startTime="8">Test. </span> <span class="line" data-startTime="8">Can everybody hear me? </span><span class="line" data-startTime="9">Can everyone see how bald I </span><span class="line" data-startTime="9">am from where you're sitting? </span><span class="line" data-startTime="13">Hands up if you can see </span><span class="line" data-startTime="13">your reflection in my head. </span> <span class="line" data-startTime="17">So I have a really </span><span class="line" data-startTime="17">tough job tonight. </span> <span class="line" data-startTime="19">My job is to try to keep </span><span class="line" data-startTime="19">you entertained and awake </span><span class="line" data-startTime="21">at this time of night, after </span><span class="line" data-startTime="21">you've been fed and alcoholed. </span> <span class="line" data-startTime="24">So I'm going to try to </span><span class="line" data-startTime="24">do that as best I can. </span> <span class="line" data-startTime="27">Let me introduce </span><span class="line" data-startTime="27">myself really quickly. </span> <span class="line" data-startTime="29">My name is Colt McAnlis. </span> <span class="line" data-startTime="30">I'm actually the team lead </span><span class="line" data-startTime="30">for Chrome Developer Relations </span><span class="line" data-startTime="33">Performance. </span> <span class="line" data-startTime="34">About a year ago, in </span><span class="line" data-startTime="34">January, we actually </span><span class="line" data-startTime="36">identified that the web </span><span class="line" data-startTime="36">performance community was </span><span class="line" data-startTime="40">good and doing </span><span class="line" data-startTime="40">well, but we didn't </span><span class="line" data-startTime="42">have someone focused on </span><span class="line" data-startTime="42">bringing the message to people </span><span class="line" data-startTime="45">constantly. </span> <span class="line" data-startTime="46">As talked about in the </span><span class="line" data-startTime="46">previous talks tonight, </span><span class="line" data-startTime="49">it's really easy to do dumb, </span><span class="line" data-startTime="49">slow things on the web. </span> <span class="line" data-startTime="51">And one of the first things </span><span class="line" data-startTime="51">we need to do with that </span><span class="line" data-startTime="53">is fix it with education. </span></p>

<p><span class="line" data-startTime="55">So we kind of defined </span><span class="line" data-startTime="55">from the beginning </span><span class="line" data-startTime="58">that after looking </span><span class="line" data-startTime="58">at all the education </span><span class="line" data-startTime="60">and looking at </span><span class="line" data-startTime="60">everything out there, </span><span class="line" data-startTime="61">there's really three </span><span class="line" data-startTime="61">pillars of web performance. </span> <span class="line" data-startTime="64">Up until now, the web </span><span class="line" data-startTime="64">as a whole has really </span><span class="line" data-startTime="67">only focused on one of them. </span> <span class="line" data-startTime="68">All you've heard from </span><span class="line" data-startTime="68">most performance experts </span><span class="line" data-startTime="71">is, how fast does </span><span class="line" data-startTime="71">your website load. </span> <span class="line" data-startTime="73">We've all seen the </span><span class="line" data-startTime="73">studies that show </span><span class="line" data-startTime="74">that one millisecond of time </span><span class="line" data-startTime="74">actually related to $10 million </span><span class="line" data-startTime="77">of lost revenue for </span><span class="line" data-startTime="77">site X, Y, and Z. </span> <span class="line" data-startTime="80">And they only really </span><span class="line" data-startTime="80">talk about network. </span></p>

<p><span class="line" data-startTime="82">But in the modern age </span><span class="line" data-startTime="82">of web applications, </span><span class="line" data-startTime="85">we often tend to </span><span class="line" data-startTime="85">neglect the other two </span><span class="line" data-startTime="87">pillars of web performance, </span><span class="line" data-startTime="87">rendering and compute. </span> <span class="line" data-startTime="91">A great part of the </span><span class="line" data-startTime="91">forecast &mdash; Forecastio? </span><span class="line" data-startTime="95">Forecast &mdash; I wanted to see. </span> <span class="line" data-startTime="97">He was listening. </span> <span class="line" data-startTime="98">That was good. </span> <span class="line" data-startTime="99">I wanted to test. </span> <span class="line" data-startTime="99">See, I've got to </span><span class="line" data-startTime="99">keep you awake, too. </span> <span class="line" data-startTime="101">One of the great parts of </span><span class="line" data-startTime="101">the forecast talk, I believe, </span><span class="line" data-startTime="103">was when he really said, </span><span class="line" data-startTime="103">we have to actually solve </span><span class="line" data-startTime="106">this problem of </span><span class="line" data-startTime="106">rendering because it </span><span class="line" data-startTime="108">doesn't happen for free. </span> <span class="line" data-startTime="109">I think the existence of </span><span class="line" data-startTime="109">the previous type of web, </span><span class="line" data-startTime="112">where CSS animations </span><span class="line" data-startTime="112">weren't something you even </span><span class="line" data-startTime="114">had availability to, allowed </span><span class="line" data-startTime="114">us to do really stupid things, </span><span class="line" data-startTime="118">and the browser </span><span class="line" data-startTime="118">kept us really fast. </span></p>

<p><span class="line" data-startTime="119">But now, because we kind </span><span class="line" data-startTime="119">of can tend our own yard, </span><span class="line" data-startTime="122">we're running into </span><span class="line" data-startTime="122">some problems there. </span> <span class="line" data-startTime="124">So when you think </span><span class="line" data-startTime="124">about performance, </span><span class="line" data-startTime="125">you should know that </span><span class="line" data-startTime="125">network, render, </span><span class="line" data-startTime="127">and compute &mdash; you can have </span><span class="line" data-startTime="127">problems in all three of these. </span> <span class="line" data-startTime="129">And much like Jake said </span><span class="line" data-startTime="129">earlier, a huge problem </span><span class="line" data-startTime="133">in one of these </span><span class="line" data-startTime="133">portions can actually </span><span class="line" data-startTime="134">cloud out issues that are </span><span class="line" data-startTime="134">happening in the other two. </span> <span class="line" data-startTime="137">So as you're going through your </span><span class="line" data-startTime="137">process of finding performance </span><span class="line" data-startTime="139">issues in your website, </span><span class="line" data-startTime="139">you need to make sure </span><span class="line" data-startTime="142">that you're evaluating </span><span class="line" data-startTime="142">all three of these </span><span class="line" data-startTime="143">with the right tools </span><span class="line" data-startTime="143">at the right time. </span> <span class="line" data-startTime="145">And what I'm going to do tonight </span><span class="line" data-startTime="145">is I'm going to try to walk you </span><span class="line" data-startTime="147">through some of the sites </span><span class="line" data-startTime="147">that you've submitted &mdash; </span><span class="line" data-startTime="149">ha-ha-ha-ha-ha &mdash; and hopefully </span><span class="line" data-startTime="149">bruise your ego a little bit. </span></p>

<p><span class="line" data-startTime="154">No offense. </span> <span class="line" data-startTime="155">It's what we all have to do. </span> <span class="line" data-startTime="156">Quite frankly, I think one </span><span class="line" data-startTime="156">of the big things we've </span><span class="line" data-startTime="158">been trying to do with </span><span class="line" data-startTime="158">the web performance </span><span class="line" data-startTime="160">movement over the past year is </span><span class="line" data-startTime="160">actually bruise a lot of egos, </span><span class="line" data-startTime="163">in a way. </span> <span class="line" data-startTime="163">Because we're all programmers. </span> <span class="line" data-startTime="165">We're all smart. </span> <span class="line" data-startTime="166">We're too smart, quite frankly. </span> <span class="line" data-startTime="167">And we've got to be </span><span class="line" data-startTime="167">taken down a peg. </span> <span class="line" data-startTime="169">Because we all know in </span><span class="line" data-startTime="169">here &mdash; everyone in here, </span><span class="line" data-startTime="171">think about your coworkers. </span> <span class="line" data-startTime="173">And think about what </span><span class="line" data-startTime="173">really motivates them. </span> <span class="line" data-startTime="175">99% of the time, if you </span><span class="line" data-startTime="175">can bruise their ego </span><span class="line" data-startTime="178">or challenge them or tell </span><span class="line" data-startTime="178">them they're not good enough, </span><span class="line" data-startTime="180">or the problem's </span><span class="line" data-startTime="180">too hard, that's </span><span class="line" data-startTime="181">what actually gets </span><span class="line" data-startTime="181">them to move, right? </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="183"><span class="speakerName">Audience</span>: Or if </span><span class="line" data-startTime="183">you pay them more. </span></p>

<p class="speaker"><span class="line" data-starttime="185"><span class="speakerName">Colt McAnlis</span>: OK, maybe, maybe. </span> <span class="line" data-startTime="188">If you've got Yankees </span><span class="line" data-startTime="188">money, I guess so. </span> <span class="line" data-startTime="191">So this is the loop. </span> <span class="line" data-startTime="192">So this is what you </span><span class="line" data-startTime="192">should all be thinking of. </span> <span class="line" data-startTime="194">Now I've got about 10 years </span><span class="line" data-startTime="194">of game development background </span><span class="line" data-startTime="197">under my belt. </span> <span class="line" data-startTime="198">I'm a C++ programmer at heart. </span> <span class="line" data-startTime="199">And I'm trying to apply a </span><span class="line" data-startTime="199">lot of the lessons we're </span><span class="line" data-startTime="201">using in game development </span><span class="line" data-startTime="201">to web development. </span> <span class="line" data-startTime="203">Because in reality, we're both </span><span class="line" data-startTime="203">dealing with real time media </span><span class="line" data-startTime="206">interfaces. </span></p>

<p><span class="line" data-startTime="207">So when you guys say, how </span><span class="line" data-startTime="207">fast can something load off </span><span class="line" data-startTime="209">an internet site, I'm </span><span class="line" data-startTime="209">thinking, how fast </span><span class="line" data-startTime="211">can that stuff be </span><span class="line" data-startTime="211">streamed off a DVD. </span> <span class="line" data-startTime="213">It's the same problem we've </span><span class="line" data-startTime="213">had, just 10 years later. </span> <span class="line" data-startTime="216">So when you're doing </span><span class="line" data-startTime="216">your performance, </span><span class="line" data-startTime="218">the main thing that you have to </span><span class="line" data-startTime="218">do is follow these three steps. </span> <span class="line" data-startTime="220">The first thing is you </span><span class="line" data-startTime="220">need to gather information. </span> <span class="line" data-startTime="222">You go open up Chrome DevTools. </span> <span class="line" data-startTime="223">You open up WebPagetest.org. </span> <span class="line" data-startTime="226">This gives you information about </span><span class="line" data-startTime="226">what is going on in your page. </span> <span class="line" data-startTime="230">From that, you </span><span class="line" data-startTime="230">actually need insight. </span> <span class="line" data-startTime="231">Because really, </span><span class="line" data-startTime="231">what's a whole sheet </span><span class="line" data-startTime="233">of floating point </span><span class="line" data-startTime="233">numbers mean to you? </span><span class="line" data-startTime="235">Nothing. </span></p>

<p><span class="line" data-startTime="235">You need to know what those </span><span class="line" data-startTime="235">floating point numbers mean. </span> <span class="line" data-startTime="237">And your tooling </span><span class="line" data-startTime="237">system needs to be </span><span class="line" data-startTime="239">able to infer what those </span><span class="line" data-startTime="239">floating point numbers mean. </span> <span class="line" data-startTime="241">And then once you </span><span class="line" data-startTime="241">have that insight, </span><span class="line" data-startTime="242">you need to be able to </span><span class="line" data-startTime="242">actually plan an action. </span> <span class="line" data-startTime="244">You have this data. </span> <span class="line" data-startTime="245">You have to then </span><span class="line" data-startTime="245">go to your manager </span><span class="line" data-startTime="246">and justify, please, let </span><span class="line" data-startTime="246">me spend two weeks fixing </span><span class="line" data-startTime="250">seven milliseconds of </span><span class="line" data-startTime="250">load time from our website </span><span class="line" data-startTime="253">because it matters. </span> <span class="line" data-startTime="254">And then you need to be able </span><span class="line" data-startTime="254">to repeat this constantly, </span><span class="line" data-startTime="256">constantly, constantly. </span> <span class="line" data-startTime="257">You need continuous </span><span class="line" data-startTime="257">integration tools. </span> <span class="line" data-startTime="258">You need the ability to actually </span><span class="line" data-startTime="258">track down who's check-in </span><span class="line" data-startTime="263">broke the build. </span></p>

<p><span class="line" data-startTime="264">Quick show of hands. </span> <span class="line" data-startTime="265">How many of you in </span><span class="line" data-startTime="265">here actually have </span><span class="line" data-startTime="266">some continuous </span><span class="line" data-startTime="266">integration for performance </span><span class="line" data-startTime="268">in your suite right now? </span><span class="line" data-startTime="270">One, two, three, four, five. </span> <span class="line" data-startTime="273">Wait. </span> <span class="line" data-startTime="274">Were you just showing </span><span class="line" data-startTime="274">me your Pepsi can? </span></p>

<p class="speaker"><span class="line" data-starttime="275"><span class="speakerName">Audience</span>: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="276"><span class="speakerName">Colt McAnlis</span>: OK. </span> <span class="line" data-startTime="277">It's a cool can. </span> <span class="line" data-startTime="279">Bravo? </span><span class="line" data-startTime="281">So maybe four, maybe five, </span><span class="line" data-startTime="281">out of an entire room. </span> <span class="line" data-startTime="283">I've asked this question to </span><span class="line" data-startTime="283">probably about 3,000 developers </span><span class="line" data-startTime="287">this week while I've </span><span class="line" data-startTime="287">been in New York </span><span class="line" data-startTime="288">and meeting and giving talks, </span><span class="line" data-startTime="288">and the total number of people </span><span class="line" data-startTime="291">is close to about 15, with </span><span class="line" data-startTime="291">the five in this room. </span> <span class="line" data-startTime="295">This shows there's a huge </span><span class="line" data-startTime="295">problem in the web community </span><span class="line" data-startTime="298">is that we're not actually </span><span class="line" data-startTime="298">testing for performance </span><span class="line" data-startTime="300">and giving it the gravitas that </span><span class="line" data-startTime="300">we are our features and our CSS </span><span class="line" data-startTime="303">and those pretty </span><span class="line" data-startTime="303">little bubbly items </span><span class="line" data-startTime="305">everywhere else on our pages. </span></p>

<p><span class="line" data-startTime="306">And this is why we </span><span class="line" data-startTime="306">actually moved forward </span><span class="line" data-startTime="308">with trying to build a </span><span class="line" data-startTime="308">better community about this. </span> <span class="line" data-startTime="310">So for you in the audience, </span><span class="line" data-startTime="310">this is the only slide </span><span class="line" data-startTime="312">I want you to take </span><span class="line" data-startTime="312">away from today. </span> <span class="line" data-startTime="314">Burn this into your retina. </span> <span class="line" data-startTime="315">Tweet it. </span> <span class="line" data-startTime="316">Blog it. </span> <span class="line" data-startTime="316">Get a tattoo of it. </span> <span class="line" data-startTime="317">Get it tattooed, tweet me, </span><span class="line" data-startTime="317">and I'll send you some swag. </span> <span class="line" data-startTime="319">Please don't get a tattoo. </span> <span class="line" data-startTime="321">Anything I say is </span><span class="line" data-startTime="321">not representative </span><span class="line" data-startTime="322">of any organization or </span><span class="line" data-startTime="322">Google or the lawyers that </span><span class="line" data-startTime="325">are affiliated with me. </span> <span class="line" data-startTime="326">All comments are my own. </span> <span class="line" data-startTime="327">Please do not get a tattoo. </span> <span class="line" data-startTime="330">First off, if you're </span><span class="line" data-startTime="330">doing performance, </span><span class="line" data-startTime="331">go to HTML5Rocks.com. </span> <span class="line" data-startTime="333">There's a landing page. </span></p>

<p><span class="line" data-startTime="334">It's called Performance. </span> <span class="line" data-startTime="335">You click on the button. </span> <span class="line" data-startTime="336">I'm actually the guy </span><span class="line" data-startTime="336">that maintains that page. </span> <span class="line" data-startTime="339">If you start there, </span><span class="line" data-startTime="339">it's going to walk you </span><span class="line" data-startTime="341">through the three pillars </span><span class="line" data-startTime="341">of web performance. </span> <span class="line" data-startTime="343">You're going to be able </span><span class="line" data-startTime="343">to go step by step on how </span><span class="line" data-startTime="345">to find and address </span><span class="line" data-startTime="345">the largest problems </span><span class="line" data-startTime="348">on each one of </span><span class="line" data-startTime="348">these three pillars. </span> <span class="line" data-startTime="349">Next is you need to </span><span class="line" data-startTime="349">be following and using </span><span class="line" data-startTime="351">the #perfmatters hashtag. </span> <span class="line" data-startTime="353">We actually started this </span><span class="line" data-startTime="353">hashtag just earlier this year. </span> <span class="line" data-startTime="356">And we really wanted </span><span class="line" data-startTime="356">to use #webperf. </span> <span class="line" data-startTime="358">We really did. </span> <span class="line" data-startTime="359">We wanted to use that hashtag. </span> <span class="line" data-startTime="360">It was out there. </span></p>

<p><span class="line" data-startTime="361">But we didn't feel like </span><span class="line" data-startTime="361">it bruised enough egos. </span> <span class="line" data-startTime="364">We wanted #perfmatters to </span><span class="line" data-startTime="364">be this name, this brand, </span><span class="line" data-startTime="367">this answer to a question. </span> <span class="line" data-startTime="369">And what we saw was that </span><span class="line" data-startTime="369">very quickly, people </span><span class="line" data-startTime="371">started posting links to </span><span class="line" data-startTime="371">their friends' websites </span><span class="line" data-startTime="373">and being like, yo, dude. </span> <span class="line" data-startTime="375">Why does it take 15 seconds to </span><span class="line" data-startTime="375">load your site? #perfmatters. </span> <span class="line" data-startTime="378">Right? </span><span class="line" data-startTime="378">We wanted it to be something </span><span class="line" data-startTime="378">you could take to your manager </span><span class="line" data-startTime="381">and say, hey, it </span><span class="line" data-startTime="381">takes 15 seconds </span><span class="line" data-startTime="382">for our site to load on mobile. </span> <span class="line" data-startTime="384">#perfmatters. </span> <span class="line" data-startTime="385">We want this to be a badge. </span></p>

<p><span class="line" data-startTime="387">We are all egotistical </span><span class="line" data-startTime="387">programmers. </span> <span class="line" data-startTime="389">Wear the badge. </span> <span class="line" data-startTime="391">Own the sticker. </span> <span class="line" data-startTime="393">Make it a part of your culture. </span> <span class="line" data-startTime="394">Make it a part of </span><span class="line" data-startTime="394">your environment. </span> <span class="line" data-startTime="396">That's what we want. </span> <span class="line" data-startTime="396">We want attitude. </span> <span class="line" data-startTime="397">That's why you should </span><span class="line" data-startTime="397">follow that hashtag. </span> <span class="line" data-startTime="399">Finally, check out the G+ </span><span class="line" data-startTime="399">Web Performance community, </span><span class="line" data-startTime="402">if you're in Google+. </span> <span class="line" data-startTime="403">It's a cool place. </span> <span class="line" data-startTime="404">A lot of cool people </span><span class="line" data-startTime="404">hang out there. </span> <span class="line" data-startTime="405">Some of them are bald. </span> <span class="line" data-startTime="406">Some of them post content. </span> <span class="line" data-startTime="407">I'm not saying who. </span> <span class="line" data-startTime="409">But you need to follow that </span><span class="line" data-startTime="409">because really, if you combine </span><span class="line" data-startTime="412">#perfmatters with the Google </span><span class="line" data-startTime="412">Web Performance communities </span><span class="line" data-startTime="414">and the articles coming </span><span class="line" data-startTime="414">through HTML5 Rocks, </span><span class="line" data-startTime="416">you're actually going to find </span><span class="line" data-startTime="416">an overflow of information. </span></p>

<p><span class="line" data-startTime="419">I bet most of you in </span><span class="line" data-startTime="419">here haven't actually </span><span class="line" data-startTime="421">dived into &mdash; here, </span><span class="line" data-startTime="421">we'll do this. </span> <span class="line" data-startTime="422">We'll do this. </span> <span class="line" data-startTime="423">Put your hand up if you've </span><span class="line" data-startTime="423">read more than five articles </span><span class="line" data-startTime="428">about performance. </span> <span class="line" data-startTime="430">OK. </span> <span class="line" data-startTime="431">Keep your hands up. </span> <span class="line" data-startTime="431">Keep your hands up. </span> <span class="line" data-startTime="432">More than 10 articles. </span> <span class="line" data-startTime="434">OK. </span> <span class="line" data-startTime="434">Let's ramp this exponentially. </span> <span class="line" data-startTime="436">20. </span> <span class="line" data-startTime="439">28. </span> <span class="line" data-startTime="442">Ah. </span> <span class="line" data-startTime="443">Let's go 40 articles </span><span class="line" data-startTime="443">on performance. </span> <span class="line" data-startTime="446">OK. </span> <span class="line" data-startTime="448">For those of you who </span><span class="line" data-startTime="448">have had your hands up, </span><span class="line" data-startTime="449">of those 40 articles, </span><span class="line" data-startTime="449">how many of those </span><span class="line" data-startTime="451">things did you implement? </span><span class="line" data-startTime="452">Maybe 5, 6, 20? </span><span class="line" data-startTime="455">No fair if you actually </span><span class="line" data-startTime="455">did a talk earlier tonight. </span> <span class="line" data-startTime="458">I'm not taking your input. </span> <span class="line" data-startTime="459">So the point that we're </span><span class="line" data-startTime="459">getting at, though, </span><span class="line" data-startTime="460">is that for those of you </span><span class="line" data-startTime="460">who haven't been reading </span><span class="line" data-startTime="462">a lot of this content, </span><span class="line" data-startTime="462">this is actually </span><span class="line" data-startTime="463">going to be an overflow </span><span class="line" data-startTime="463">of information. </span> <span class="line" data-startTime="464">Hopefully, you can find </span><span class="line" data-startTime="464">it, you can guide it, </span><span class="line" data-startTime="466">you can move through it. </span></p>

<p><span class="line" data-startTime="467">What's the next one? </span><span class="line" data-startTime="468">Yeah. </span> <span class="line" data-startTime="468">So what I'm going to do now </span><span class="line" data-startTime="468">is with the rest of the time &mdash; </span><span class="line" data-startTime="471">Pete, how much time do we have? </span><span class="line" data-startTime="472">40, 60? </span><span class="line" data-startTime="473">As much as I want. </span> <span class="line" data-startTime="474">Keep talking until </span><span class="line" data-startTime="474">people fall asleep. </span> <span class="line" data-startTime="475">Good. </span> <span class="line" data-startTime="476">I can do that. </span> <span class="line" data-startTime="477">So what we're going to do </span><span class="line" data-startTime="477">is I'm actually only going </span><span class="line" data-startTime="479">to load these </span><span class="line" data-startTime="479">websites on mobile. </span> <span class="line" data-startTime="481">Quite frankly, I ran </span><span class="line" data-startTime="481">through these earlier today. </span> <span class="line" data-startTime="483">And most of your sites actually </span><span class="line" data-startTime="483">fell over dead on mobile. </span> <span class="line" data-startTime="487">There were some interesting </span><span class="line" data-startTime="487">use cases on desktop, </span><span class="line" data-startTime="489">but quite frankly, </span><span class="line" data-startTime="489">desktop's dead. </span> <span class="line" data-startTime="491">If you're not making your </span><span class="line" data-startTime="491">site mobile and friendly </span><span class="line" data-startTime="493">and fast there, you're </span><span class="line" data-startTime="493">doing it wrong, period. </span> <span class="line" data-startTime="495">Period, period, period. </span></p>

<p><span class="line" data-startTime="496">Mobile is all that matters </span><span class="line" data-startTime="496">right now &mdash; #perfmatters. </span> <span class="line" data-startTime="499">You can tweet that. </span> <span class="line" data-startTime="500">I'll give you a second. </span> <span class="line" data-startTime="502">No, go ahead. </span> <span class="line" data-startTime="503">It's OK. </span> <span class="line" data-startTime="503">#perfmatters, [INAUDIBLE], OK. </span> <span class="line" data-startTime="505">So we're going to take a look at </span><span class="line" data-startTime="505">a couple of these really quick. </span> <span class="line" data-startTime="508">And I'm going to try to organize </span><span class="line" data-startTime="508">these in terms of discussion </span><span class="line" data-startTime="511">and pointing out </span><span class="line" data-startTime="511">a couple things. </span> <span class="line" data-startTime="512">So if we don't get to </span><span class="line" data-startTime="512">all of them, I apologize. </span> <span class="line" data-startTime="514">Please feel free to email </span><span class="line" data-startTime="514">me later and curse at me. </span> <span class="line" data-startTime="517">Or do it on social media. </span> <span class="line" data-startTime="518">That's always fun too. </span> <span class="line" data-startTime="519">So what I've got here </span><span class="line" data-startTime="519">is a little setup, </span><span class="line" data-startTime="520">and you can actually </span><span class="line" data-startTime="520">see my little phone, </span><span class="line" data-startTime="522">so I can click on some stuff. </span> <span class="line" data-startTime="524">And what I'm using over here is </span><span class="line" data-startTime="524">the Chrome Developer Tools ADB </span><span class="line" data-startTime="527">extension. </span> <span class="line" data-startTime="528">So this is a fantastic </span><span class="line" data-startTime="528">little &mdash; who's using this? </span><span class="line" data-startTime="531">Anyone using this? </span><span class="line" data-startTime="532">No? </span><span class="line" data-startTime="533">No fair if you're </span><span class="line" data-startTime="533">hosting the event, dude. </span> <span class="line" data-startTime="536">You guys are cheating. </span></p>

<p><span class="line" data-startTime="537">So this is a fantastic </span><span class="line" data-startTime="537">Chrome extension. </span> <span class="line" data-startTime="539">You go to the Chrome Web Store. </span> <span class="line" data-startTime="540">You can actually download </span><span class="line" data-startTime="540">and install this extension. </span> <span class="line" data-startTime="542">Basically, what it </span><span class="line" data-startTime="542">allows you to do </span><span class="line" data-startTime="543">is interface with the </span><span class="line" data-startTime="543">Android Developer Tools </span><span class="line" data-startTime="545">very easily and quickly. </span> <span class="line" data-startTime="546">So I can actually click on this </span><span class="line" data-startTime="546">and go View inspection targets, </span><span class="line" data-startTime="549">and you'll actually see that it </span><span class="line" data-startTime="549">loads and shows me this Galaxy </span><span class="line" data-startTime="553">Nexus phone that's actually </span><span class="line" data-startTime="553">plugged in right here. </span> <span class="line" data-startTime="555">And I can actually </span><span class="line" data-startTime="555">click &mdash; well, I'll </span><span class="line" data-startTime="556">close this so you can actually </span><span class="line" data-startTime="556">see what this looks like. </span> <span class="line" data-startTime="559">I can click the Inspect button. </span> <span class="line" data-startTime="561">And what this Inspect </span><span class="line" data-startTime="561">button shows is </span><span class="line" data-startTime="563">it actually shows me what's </span><span class="line" data-startTime="563">on my phone right now. </span></p>

<p><span class="line" data-startTime="567">So this is one of the </span><span class="line" data-startTime="567">sites, and I'll get to it </span><span class="line" data-startTime="569">a little bit deeper </span><span class="line" data-startTime="569">here in a minute. </span> <span class="line" data-startTime="571">But this is actually </span><span class="line" data-startTime="571">what's on the phone. </span> <span class="line" data-startTime="573">You can see it's moving, it's </span><span class="line" data-startTime="573">scrolling, it's doing stuff. </span> <span class="line" data-startTime="575">We go over here, and you can </span><span class="line" data-startTime="575">actually see the network. </span> <span class="line" data-startTime="577">So if I hit Reload on my </span><span class="line" data-startTime="577">phone &mdash; and you can actually </span><span class="line" data-startTime="580">see the network </span><span class="line" data-startTime="580">request coming through. </span> <span class="line" data-startTime="582">This is not a desktop site. </span></p>

<p><span class="line" data-startTime="583">This is actually a mobile site. </span> <span class="line" data-startTime="584">This is really good because I'm </span><span class="line" data-startTime="584">actually testing on the device </span><span class="line" data-startTime="587">that my users are using. </span> <span class="line" data-startTime="588">Wow, great comment &mdash; </span><span class="line" data-startTime="588">#perfmatters. </span> <span class="line" data-startTime="593">One of you will </span><span class="line" data-startTime="593">tweet it tonight. </span> <span class="line" data-startTime="594">It will happen. </span> <span class="line" data-startTime="595">I'll keep drilling it into you. </span> <span class="line" data-startTime="597">But the cool thing </span><span class="line" data-startTime="597">is, you can actually </span><span class="line" data-startTime="598">see what's going on here. </span> <span class="line" data-startTime="599">And notice, for this </span><span class="line" data-startTime="599">particular website, </span><span class="line" data-startTime="602">that it's actually </span><span class="line" data-startTime="602">not done loading yet. </span> <span class="line" data-startTime="604">You can still see the bar </span><span class="line" data-startTime="604">moving on the side over there. </span> <span class="line" data-startTime="607">And the funny thing is, if </span><span class="line" data-startTime="607">you load this site in desktop, </span><span class="line" data-startTime="610">you don't see that same problem. </span> <span class="line" data-startTime="611">So obviously, there's </span><span class="line" data-startTime="611">an issue on the mobile </span><span class="line" data-startTime="613">that is not showing </span><span class="line" data-startTime="613">up on the desktop. </span> <span class="line" data-startTime="615">Again, we need to make sure that </span><span class="line" data-startTime="615">we're testing things properly. </span></p>

<p><span class="line" data-startTime="618">But the cool thing </span><span class="line" data-startTime="618">is, we can actually </span><span class="line" data-startTime="620">see all of the same events, use </span><span class="line" data-startTime="620">the DevTools in the same way, </span><span class="line" data-startTime="623">minus everything crashing </span><span class="line" data-startTime="623">because of memory issues, which </span><span class="line" data-startTime="626">might happen tonight. </span> <span class="line" data-startTime="627">I apologize for the live feed. </span> <span class="line" data-startTime="628">But we can actually go through </span><span class="line" data-startTime="628">here and just record memory </span><span class="line" data-startTime="631">and see what's </span><span class="line" data-startTime="631">going on in memory. </span> <span class="line" data-startTime="633">And so let me show </span><span class="line" data-startTime="633">you over here. </span> <span class="line" data-startTime="634">I can go through and actually </span><span class="line" data-startTime="634">scroll and go back and actually </span><span class="line" data-startTime="637">see how memory is adjusting </span><span class="line" data-startTime="637">based on this stuff. </span> <span class="line" data-startTime="639">So if you haven't adopted </span><span class="line" data-startTime="639">this Chrome ADB extension </span><span class="line" data-startTime="643">into your tooling </span><span class="line" data-startTime="643">and your testing, </span><span class="line" data-startTime="644">you need to definitely do this. </span> <span class="line" data-startTime="646">Definitely get </span><span class="line" data-startTime="646">this in your stuff </span><span class="line" data-startTime="647">because no other tool allows </span><span class="line" data-startTime="647">you this sort of integration. </span></p>

<p><span class="line" data-startTime="650">And Chrome DevTools are </span><span class="line" data-startTime="650">already top of the line. </span> <span class="line" data-startTime="652">This should be part of it. </span> <span class="line" data-startTime="653">So anyhow, enough </span><span class="line" data-startTime="653">of me babbling. </span> <span class="line" data-startTime="655">So let's start with one </span><span class="line" data-startTime="655">of the first sites here. </span> <span class="line" data-startTime="657">Come on, clicky clicky. </span> <span class="line" data-startTime="659">Now there's a native app </span><span class="line" data-startTime="659">for you, slow when loading. </span> <span class="line" data-startTime="663">Right, Forecastio? </span><span class="line" data-startTime="665">Aw, I'll get it right. </span> <span class="line" data-startTime="667">Sorry. </span> <span class="line" data-startTime="668">So we're going to try this </span><span class="line" data-startTime="668">first one here, allout.org. </span> <span class="line" data-startTime="671">This was submitted. </span> <span class="line" data-startTime="672">Someone in the room </span><span class="line" data-startTime="672">submitted this. </span> <span class="line" data-startTime="673">I don't know who it is. </span></p>

<p><span class="line" data-startTime="674">Doesn't matter. </span> <span class="line" data-startTime="674">But we're going to take </span><span class="line" data-startTime="674">a look at your site, </span><span class="line" data-startTime="676">and hopefully, we're </span><span class="line" data-startTime="676">going to make you upset. </span> <span class="line" data-startTime="677">So this is loading. </span> <span class="line" data-startTime="679">I'm going to show you what </span><span class="line" data-startTime="679">the page looks like first. </span> <span class="line" data-startTime="682">So first off, we all </span><span class="line" data-startTime="682">just watched it load. </span> <span class="line" data-startTime="684">This is on a 4G connection. </span> <span class="line" data-startTime="685">I'm not on the local Wi-Fi. </span> <span class="line" data-startTime="687">We can see that this actually </span><span class="line" data-startTime="687">is not a mobile site. </span> <span class="line" data-startTime="692">I mean, I shouldn't </span><span class="line" data-startTime="692">have to scroll. </span> <span class="line" data-startTime="695">Oh, I can zoom. </span> <span class="line" data-startTime="696">Yay. </span></p>

<p><span class="line" data-startTime="698">But most of the site </span><span class="line" data-startTime="698">is actually eclipsed. </span> <span class="line" data-startTime="701">We've got some sort of </span><span class="line" data-startTime="701">spinner here at the top, </span><span class="line" data-startTime="703">but it's a marquee movement. </span> <span class="line" data-startTime="705">We've got some other items </span><span class="line" data-startTime="705">down here on the bottom. </span> <span class="line" data-startTime="708">Some stuff's going on. </span> <span class="line" data-startTime="709">So let's take a </span><span class="line" data-startTime="709">look at what that </span><span class="line" data-startTime="709">looks like in Chrome DevTools. </span> <span class="line" data-startTime="711">So I can go here, click Inspect. </span> <span class="line" data-startTime="716">Again, native </span><span class="line" data-startTime="716">applications, they're slow. </span> <span class="line" data-startTime="718">So let's go to the Network tab. </span> <span class="line" data-startTime="720">And I want to take a look </span><span class="line" data-startTime="720">at how this thing loads. </span> <span class="line" data-startTime="722">So I'm going to </span><span class="line" data-startTime="722">hit Reload again, </span><span class="line" data-startTime="723">and we're going to watch </span><span class="line" data-startTime="723">all the assets come through. </span> <span class="line" data-startTime="726">And notice here, </span><span class="line" data-startTime="726">on the bottom here, </span><span class="line" data-startTime="727">you can see six </span><span class="line" data-startTime="727">requests, 12 requests. </span></p>

<p><span class="line" data-startTime="729">I'll keep scrolling </span><span class="line" data-startTime="729">down to the bottom </span><span class="line" data-startTime="731">so you can kind of see that. </span> <span class="line" data-startTime="733">Seven seconds worth of load time </span><span class="line" data-startTime="733">before it's actually loaded. </span> <span class="line" data-startTime="735">So this down here on </span><span class="line" data-startTime="735">the bottom tells us </span><span class="line" data-startTime="737">that it took about six seconds </span><span class="line" data-startTime="737">before content complete was </span><span class="line" data-startTime="740">actually kind of issued, before </span><span class="line" data-startTime="740">the page load event occurred, </span><span class="line" data-startTime="742">and 7.9 seconds total. </span> <span class="line" data-startTime="745">8K actually came &mdash; oh, </span><span class="line" data-startTime="745">no, we're still not done. </span> <span class="line" data-startTime="749">9K came through, pardon me. </span> <span class="line" data-startTime="750">And so 34 requests. </span> <span class="line" data-startTime="751">We can actually see the </span><span class="line" data-startTime="751">health of this object </span><span class="line" data-startTime="753">and the health of this site. </span> <span class="line" data-startTime="754">Now 34 requests, that's </span><span class="line" data-startTime="754">actually nothing. </span> <span class="line" data-startTime="756">9K, that's a drop in the bucket. </span></p>

<p><span class="line" data-startTime="758">The Robitussin-laced </span><span class="line" data-startTime="758">grandmother picture from earlier </span><span class="line" data-startTime="761">could easily load </span><span class="line" data-startTime="761">9K very quickly. </span> <span class="line" data-startTime="763">What's important here, though, </span><span class="line" data-startTime="763">and I want to show you this, </span><span class="line" data-startTime="765">is when we go up here and </span><span class="line" data-startTime="765">actually sort by size, </span><span class="line" data-startTime="768">we actually get a </span><span class="line" data-startTime="768">different sort of sense </span><span class="line" data-startTime="769">of the content that's </span><span class="line" data-startTime="769">being sent around. </span> <span class="line" data-startTime="772">So we can see &mdash; </span><span class="line" data-startTime="772">let me not do that. </span> <span class="line" data-startTime="774">There we go. </span> <span class="line" data-startTime="775">So we can actually </span><span class="line" data-startTime="775">see the images loaded. </span> <span class="line" data-startTime="777">We can actually see that most </span><span class="line" data-startTime="777">of the large assets here, 6.4K, </span><span class="line" data-startTime="780">512 bytes. </span></p>

<p><span class="line" data-startTime="782">We can see that the </span><span class="line" data-startTime="782">large images here &mdash; this </span><span class="line" data-startTime="785">is actually interesting to me. </span> <span class="line" data-startTime="786">So this is a 1,024 by 576. </span> <span class="line" data-startTime="790">It's 213K. </span> <span class="line" data-startTime="793">Quick round of applause. </span> <span class="line" data-startTime="794">Who thinks that's too </span><span class="line" data-startTime="794">large for a mobile site? </span><span class="line" data-startTime="796">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="798"><span class="speakerName">Colt McAnlis</span>: Yeah. </span> <span class="line" data-startTime="799">OK, here's another one. </span> <span class="line" data-startTime="799">Here's 109K, a </span><span class="line" data-startTime="799">little bit better. </span> <span class="line" data-startTime="802">Same resolution, though. </span> <span class="line" data-startTime="803">Anyone notice that? </span><span class="line" data-startTime="804">Same resolution, half the size. </span> <span class="line" data-startTime="807">Now if anyone in here &mdash; a </span><span class="line" data-startTime="807">quick other round of applause. </span> <span class="line" data-startTime="810">Who's written a JPEG compressor? </span><span class="line" data-startTime="812">One guy, two guys, three guys. </span> <span class="line" data-startTime="814">All right. </span> <span class="line" data-startTime="815">We'll get some beers </span><span class="line" data-startTime="815">later, and we'll </span><span class="line" data-startTime="816">talk about DCT coefficients. </span> <span class="line" data-startTime="817">I've had this really cool </span><span class="line" data-startTime="817">idea that you can actually &mdash; </span><span class="line" data-startTime="819">you know what, never mind. </span></p>

<p><span class="line" data-startTime="820">So notice, though, that </span><span class="line" data-startTime="820">this image actually </span><span class="line" data-startTime="822">has a lot more data to it. </span> <span class="line" data-startTime="824">There's a lot more edges. </span> <span class="line" data-startTime="825">There's a lot more </span><span class="line" data-startTime="825">noise to the image. </span> <span class="line" data-startTime="827">Yet it's smaller </span><span class="line" data-startTime="827">than this one here. </span> <span class="line" data-startTime="828">This is actually mostly pink. </span> <span class="line" data-startTime="830">There's no reason that </span><span class="line" data-startTime="830">the image with more detail </span><span class="line" data-startTime="832">should be less size than the </span><span class="line" data-startTime="832">one with less detail in it. </span> <span class="line" data-startTime="836">What this tells me &mdash; I know </span><span class="line" data-startTime="836">nothing about these developers. </span> <span class="line" data-startTime="838">I know nothing about the site. </span> <span class="line" data-startTime="839">But this tells me that </span><span class="line" data-startTime="839">they're not actually </span><span class="line" data-startTime="841">exporting this particular image </span><span class="line" data-startTime="841">with the right compression </span><span class="line" data-startTime="843">settings. </span> <span class="line" data-startTime="844">So another &mdash; I like doing </span><span class="line" data-startTime="844">these polls because it's late, </span><span class="line" data-startTime="847">and I need you all entertained. </span> <span class="line" data-startTime="849">So how many of you </span><span class="line" data-startTime="849">actually just export </span><span class="line" data-startTime="852">your images at some </span><span class="line" data-startTime="852">constant format. </span> <span class="line" data-startTime="854">Like when you do an export from </span><span class="line" data-startTime="854">a JPEG, it's like on 12 or 80, </span><span class="line" data-startTime="857">depending on what you're doing. </span></p>

<p><span class="line" data-startTime="860">So no &mdash; everyone else </span><span class="line" data-startTime="860">hand-optimizes exactly </span><span class="line" data-startTime="864">your exact, perfect PSNR </span><span class="line" data-startTime="864">relationship for your JPEG. </span> <span class="line" data-startTime="868">Yes? </span><span class="line" data-startTime="869">Is that what I'm hearing? </span><span class="line" data-startTime="870">Because I saw like three hands. </span> <span class="line" data-startTime="871">So either you're all </span><span class="line" data-startTime="871">lying to each other, </span><span class="line" data-startTime="873">or you have no idea the way </span><span class="line" data-startTime="873">that your images are compressed. </span> <span class="line" data-startTime="875">OK, round of applause for no </span><span class="line" data-startTime="875">idea the compression quality. </span> <span class="line" data-startTime="877">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="878"><span class="speakerName">Colt McAnlis</span>: OK, fantastic. </span> <span class="line" data-startTime="880">So seeing this site </span><span class="line" data-startTime="880">actually tells us </span><span class="line" data-startTime="881">that this is a systemic problem. </span> <span class="line" data-startTime="882">And again, the 3,000 </span><span class="line" data-startTime="882">developers I've </span><span class="line" data-startTime="884">talked to over the past </span><span class="line" data-startTime="884">week all see this problem. </span> <span class="line" data-startTime="886">In a couple of </span><span class="line" data-startTime="886">the other websites </span><span class="line" data-startTime="887">I'm going to load </span><span class="line" data-startTime="887">tonight, you're </span><span class="line" data-startTime="888">going to see this show up very </span><span class="line" data-startTime="888">prevalently that in general, we </span><span class="line" data-startTime="891">as a web community do a </span><span class="line" data-startTime="891">horrible, horrible job </span><span class="line" data-startTime="894">of optimizing images for </span><span class="line" data-startTime="894">quality against size. </span> <span class="line" data-startTime="898">Now in reality, </span><span class="line" data-startTime="898">this isn't something </span><span class="line" data-startTime="900">that's that difficult. </span> <span class="line" data-startTime="901">Most of us consider </span><span class="line" data-startTime="901">a single way pipe. </span> <span class="line" data-startTime="903">We have artists or designers </span><span class="line" data-startTime="903">that are working in a vacuum. </span> <span class="line" data-startTime="906">They're trying to optimize </span><span class="line" data-startTime="906">for the visual quality </span><span class="line" data-startTime="909">of the image. </span></p>

<p><span class="line" data-startTime="909">Meanwhile, there's </span><span class="line" data-startTime="909">bald engineers </span><span class="line" data-startTime="911">in a corner somewhere </span><span class="line" data-startTime="911">going, why is my site slow? </span><span class="line" data-startTime="914">And there's this constant back </span><span class="line" data-startTime="914">and forth between these two </span><span class="line" data-startTime="916">camps about size of </span><span class="line" data-startTime="916">images versus quality </span><span class="line" data-startTime="919">of images and load times </span><span class="line" data-startTime="919">and all this stuff. </span> <span class="line" data-startTime="921">Let me give you a </span><span class="line" data-startTime="921">little word of advice. </span> <span class="line" data-startTime="922">If any of you are able to </span><span class="line" data-startTime="922">implement something like this, </span><span class="line" data-startTime="925">it's very simple to spin </span><span class="line" data-startTime="925">up an Amazon EC2 instance </span><span class="line" data-startTime="928">or even do this at </span><span class="line" data-startTime="928">your desk and actually </span><span class="line" data-startTime="930">run a compressor, a </span><span class="line" data-startTime="930">command line compressor, </span><span class="line" data-startTime="932">like libjpeg or </span><span class="line" data-startTime="932">jpeg-turbo &mdash; by the way, </span><span class="line" data-startTime="935">jpeg-turbo is the actual </span><span class="line" data-startTime="935">codec that we use inside </span><span class="line" data-startTime="937">of Chrome for JPEGs &mdash; </span><span class="line" data-startTime="937">and actually compress it </span><span class="line" data-startTime="940">at various quality settings and </span><span class="line" data-startTime="940">test the PSNR of the images. </span></p>

<p><span class="line" data-startTime="944">PSNR, for those of </span><span class="line" data-startTime="944">you who don't know, </span><span class="line" data-startTime="945">is Peak Signal-to-Noise Ratio. </span> <span class="line" data-startTime="948">This is actually a </span><span class="line" data-startTime="948">measurement of the amount </span><span class="line" data-startTime="951">of noise and error </span><span class="line" data-startTime="951">that's introduced </span><span class="line" data-startTime="953">to an image, the </span><span class="line" data-startTime="953">blockiness that actually </span><span class="line" data-startTime="955">comes from the </span><span class="line" data-startTime="955">compression format. </span> <span class="line" data-startTime="956">We actually have a </span><span class="line" data-startTime="956">standardization process. </span> <span class="line" data-startTime="958">We call it PSNR, and that's how </span><span class="line" data-startTime="958">we compare image compressors </span><span class="line" data-startTime="961">to each other. </span> <span class="line" data-startTime="962">So you could actually take your </span><span class="line" data-startTime="962">image, compress it at level 90, </span><span class="line" data-startTime="965">see what the PSNR is, compress </span><span class="line" data-startTime="965">it at 80, see what the PSNR is. </span> <span class="line" data-startTime="969">70, 60, 50, 40, 30. </span> <span class="line" data-startTime="970">If you get below 30, </span><span class="line" data-startTime="970">you've gone too far. </span></p>

<p><span class="line" data-startTime="973">Just stop at 30. </span> <span class="line" data-startTime="973">But the cool thing about </span><span class="line" data-startTime="973">this is that you can actually </span><span class="line" data-startTime="976">run 10,000, 20,000, 30,000 </span><span class="line" data-startTime="976">images through this process, </span><span class="line" data-startTime="979">and for each one find the </span><span class="line" data-startTime="979">exact right compression </span><span class="line" data-startTime="982">value to give you a </span><span class="line" data-startTime="982">PSNR of around 38 to 45. </span> <span class="line" data-startTime="986">So you're not actually </span><span class="line" data-startTime="986">just exporting </span><span class="line" data-startTime="988">to a single compression </span><span class="line" data-startTime="988">number, a slider </span><span class="line" data-startTime="990">that your artists have </span><span class="line" data-startTime="990">no idea what it does. </span> <span class="line" data-startTime="992">You can actually </span><span class="line" data-startTime="992">programmatically </span><span class="line" data-startTime="993">find this value by implementing </span><span class="line" data-startTime="993">a simple iterative process </span><span class="line" data-startTime="996">against the command </span><span class="line" data-startTime="996">line compressor. </span> <span class="line" data-startTime="997">That's kind of cool. </span></p>

<p><span class="line" data-startTime="999">Round of applause for cool. </span> <span class="line" data-startTime="1000">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="1001"><span class="speakerName">Colt McAnlis</span>: I saw </span><span class="line" data-startTime="1001">some of you begrudgingly </span><span class="line" data-startTime="1003">go, that's not cool. </span> <span class="line" data-startTime="1004">Let's save the </span><span class="line" data-startTime="1004">questions for the end, </span><span class="line" data-startTime="1005">if that's OK, because otherwise </span><span class="line" data-startTime="1005">I'm going to stare at Putin, </span><span class="line" data-startTime="1008">and he kind of scares me. </span> <span class="line" data-startTime="1010">So let's take a look at </span><span class="line" data-startTime="1010">some other things here. </span> <span class="line" data-startTime="1012">So I want to go over timelines. </span> <span class="line" data-startTime="1013">So that was load time. </span> <span class="line" data-startTime="1014">Everyone knows </span><span class="line" data-startTime="1014">the network stuff. </span> <span class="line" data-startTime="1016">If you're not using </span><span class="line" data-startTime="1016">WebPagetest.org or ModPagespeed </span><span class="line" data-startTime="1021">or PageSpeed Insights </span><span class="line" data-startTime="1021">and all that stuff, </span><span class="line" data-startTime="1023">you need to be using all that. </span> <span class="line" data-startTime="1024">So let's just take a </span><span class="line" data-startTime="1024">look at what this site's </span><span class="line" data-startTime="1026">doing while I'm doing nothing. </span> <span class="line" data-startTime="1027">So now I haven't </span><span class="line" data-startTime="1027">touched this site. </span> <span class="line" data-startTime="1028">To be clear, my </span><span class="line" data-startTime="1028">phone almost actually </span><span class="line" data-startTime="1030">went locked because </span><span class="line" data-startTime="1030">I haven't touched it. </span></p>

<p><span class="line" data-startTime="1032">I'm still not touching </span><span class="line" data-startTime="1032">it, but I want </span><span class="line" data-startTime="1033">you to notice what the </span><span class="line" data-startTime="1033">memory is doing on the top. </span> <span class="line" data-startTime="1035">Now I'm a C++ game developer. </span> <span class="line" data-startTime="1038">To me, the only thing that </span><span class="line" data-startTime="1038">matters for performance </span><span class="line" data-startTime="1041">is follow the memory. </span> <span class="line" data-startTime="1043">I actually give a </span><span class="line" data-startTime="1043">talk at Velocity </span><span class="line" data-startTime="1044">yesterday where I, in </span><span class="line" data-startTime="1044">a very heretic fashion, </span><span class="line" data-startTime="1048">suggested that web developers </span><span class="line" data-startTime="1048">were really bad developers </span><span class="line" data-startTime="1050">because we're not </span><span class="line" data-startTime="1050">controlling our memory. </span> <span class="line" data-startTime="1052">We're actually letting </span><span class="line" data-startTime="1052">JavaScript do it for us. </span> <span class="line" data-startTime="1054">And because of this, </span><span class="line" data-startTime="1054">we have no idea </span><span class="line" data-startTime="1056">what's going on under the hood. </span> <span class="line" data-startTime="1058">How many of you know </span><span class="line" data-startTime="1058">what your heap size is? </span><span class="line" data-startTime="1060">How many of you care? </span><span class="line" data-startTime="1062">That's another question. </span> <span class="line" data-startTime="1064">I like that. </span></p>

<p><span class="line" data-startTime="1065">I like your outfit. </span> <span class="line" data-startTime="1065">Is that like a </span><span class="line" data-startTime="1065">cummer &mdash; What is that? </span><span class="line" data-startTime="1067">Is that like a real [INAUDIBLE]? </span><span class="line" data-startTime="1068">Yeah, I like that. </span> <span class="line" data-startTime="1069">That's cool. </span> <span class="line" data-startTime="1070">I might have to get me one </span><span class="line" data-startTime="1070">of those. #perfmatters, I </span><span class="line" data-startTime="1072">got to get me one of those. </span> <span class="line" data-startTime="1074">So again, I've touched nothing. </span> <span class="line" data-startTime="1075">But notice this here on the top. </span> <span class="line" data-startTime="1077">I don't know if you </span><span class="line" data-startTime="1077">guys can see it. </span> <span class="line" data-startTime="1078">It's allocating between </span><span class="line" data-startTime="1078">7.5 megs and 9 megs. </span> <span class="line" data-startTime="1081">I'm touching nothing. </span> <span class="line" data-startTime="1082">Nothing's occurring </span><span class="line" data-startTime="1082">on the screen. </span></p>

<p><span class="line" data-startTime="1084">Yet two megabytes of data are </span><span class="line" data-startTime="1084">being allocated and cleared </span><span class="line" data-startTime="1087">in this environment. </span> <span class="line" data-startTime="1088">Now I can actually </span><span class="line" data-startTime="1088">figure out what's </span><span class="line" data-startTime="1090">going on with this &mdash; </span><span class="line" data-startTime="1090">if I stop my recording, </span><span class="line" data-startTime="1093">too much information. </span> <span class="line" data-startTime="1094">Let me just do a quick </span><span class="line" data-startTime="1094">record real quick </span><span class="line" data-startTime="1095">so I can clear all that. </span> <span class="line" data-startTime="1098">So we can see something </span><span class="line" data-startTime="1098">on the timeline here. </span> <span class="line" data-startTime="1100">So it looks like, </span><span class="line" data-startTime="1100">first off, they've </span><span class="line" data-startTime="1102">got two different timers firing. </span> <span class="line" data-startTime="1104">So we've got widgets.js </span><span class="line" data-startTime="1104">and Chartbeat. </span> <span class="line" data-startTime="1105">Chartbeat, I'm guessing, </span><span class="line" data-startTime="1105">is like an analytics thing. </span> <span class="line" data-startTime="1107">I see this on a bunch of </span><span class="line" data-startTime="1107">sites you guys gave me. </span> <span class="line" data-startTime="1109">And then widgets seems </span><span class="line" data-startTime="1109">like their thing. </span> <span class="line" data-startTime="1111">So I'm guessing this is that </span><span class="line" data-startTime="1111">marquee scroll at the top. </span></p>

<p><span class="line" data-startTime="1113">They've got some </span><span class="line" data-startTime="1113">timer that's actually </span><span class="line" data-startTime="1115">moving those images around. </span> <span class="line" data-startTime="1116">What I don't like &mdash; pardon? </span></p>

<p class="speaker"><span class="line" data-starttime="1118"><span class="speakerName">Audience</span>: [INAUDIBLE] </span></p>

<p class="speaker"><span class="line" data-starttime="1119"><span class="speakerName">Colt McAnlis</span>: For widgets.js? </span><span class="line" data-startTime="1120">Oh, cool. </span> <span class="line" data-startTime="1122">Oh, nice. </span> <span class="line" data-startTime="1126">Widgets.js, Twitter. </span> <span class="line" data-startTime="1127">Oh, cool. </span> <span class="line" data-startTime="1127">So Twitter is actually </span><span class="line" data-startTime="1127">screwing this page up. </span> <span class="line" data-startTime="1129">Go Twitter. </span> <span class="line" data-startTime="1129">Is anyone here from Twitter? </span><span class="line" data-startTime="1131">Boo, Twitter. </span> <span class="line" data-startTime="1134">So what we see </span><span class="line" data-startTime="1134">down here, though, </span><span class="line" data-startTime="1135">is we see recalculate </span><span class="line" data-startTime="1135">and paint and what not. </span> <span class="line" data-startTime="1137">For our memory, this </span><span class="line" data-startTime="1137">view doesn't actually </span><span class="line" data-startTime="1141">tell us what's being allocated. </span> <span class="line" data-startTime="1142">We can see where the events </span><span class="line" data-startTime="1142">are occurring and whatnot. </span> <span class="line" data-startTime="1145">I can actually mouse over the </span><span class="line" data-startTime="1145">GCs when they actually happen. </span> <span class="line" data-startTime="1148">More importantly, </span><span class="line" data-startTime="1148">though, I can actually </span><span class="line" data-startTime="1150">go over here to </span><span class="line" data-startTime="1150">the Profiles page. </span> <span class="line" data-startTime="1151">Because I don't like </span><span class="line" data-startTime="1151">seeing that kind of memory. </span></p>

<p><span class="line" data-startTime="1153">And I can actually do a </span><span class="line" data-startTime="1153">record of heap applications. </span> <span class="line" data-startTime="1155">So I can just hit start </span><span class="line" data-startTime="1155">and let this thing run. </span> <span class="line" data-startTime="1156">And basically, what you're </span><span class="line" data-startTime="1156">seeing here is on this top, </span><span class="line" data-startTime="1159">you're kind of seeing timeline </span><span class="line" data-startTime="1159">view plus memory profiling </span><span class="line" data-startTime="1161">at the same time. </span> <span class="line" data-startTime="1162">In the top, any of </span><span class="line" data-startTime="1162">these blue lines </span><span class="line" data-startTime="1165">is when memory </span><span class="line" data-startTime="1165">allocations occur. </span> <span class="line" data-startTime="1167">Now when you see a grey line, </span><span class="line" data-startTime="1167">what the grey line means is </span><span class="line" data-startTime="1169">that memory has been freed by </span><span class="line" data-startTime="1169">a garbage collection process </span><span class="line" data-startTime="1172">somewhere. </span> <span class="line" data-startTime="1172">So you can actually see a </span><span class="line" data-startTime="1172">new set that just happened, </span><span class="line" data-startTime="1175">and some of the </span><span class="line" data-startTime="1175">grey lines happened. </span> <span class="line" data-startTime="1177">But these blues tend </span><span class="line" data-startTime="1177">to kind of pop up </span><span class="line" data-startTime="1180">in a very regular fashion. </span></p>

<p><span class="line" data-startTime="1181">Now in this, I can </span><span class="line" data-startTime="1181">actually go through here </span><span class="line" data-startTime="1184">and change the size of </span><span class="line" data-startTime="1184">my window and actually </span><span class="line" data-startTime="1187">see exactly what was allocated. </span> <span class="line" data-startTime="1190">So in this single event, </span><span class="line" data-startTime="1190">at about eight seconds </span><span class="line" data-startTime="1192">in in my capture, about 3K </span><span class="line" data-startTime="1192">worth of data was allocated. </span> <span class="line" data-startTime="1195">And we can see a similar </span><span class="line" data-startTime="1195">pattern over here. </span> <span class="line" data-startTime="1197">I can highlight this </span><span class="line" data-startTime="1197">window, and we see another, </span><span class="line" data-startTime="1199">about almost 3K. </span> <span class="line" data-startTime="1200">And over here, a similar window. </span> <span class="line" data-startTime="1202">There's about 3K, plus </span><span class="line" data-startTime="1202">a lot of extra change </span><span class="line" data-startTime="1204">there that hasn't </span><span class="line" data-startTime="1204">been freed up yet. </span> <span class="line" data-startTime="1206">But let me focus on </span><span class="line" data-startTime="1206">this guy really quick. </span> <span class="line" data-startTime="1208">So here I can actually see that </span><span class="line" data-startTime="1208">3K came from compiled code. </span> <span class="line" data-startTime="1210">So somewhere in this system, </span><span class="line" data-startTime="1210">deoptimization code came from. </span> <span class="line" data-startTime="1213">Now for those of you </span><span class="line" data-startTime="1213">who are not versed </span><span class="line" data-startTime="1215">in fast path and </span><span class="line" data-startTime="1215">slow path JavaScript, </span><span class="line" data-startTime="1217">effectively what this </span><span class="line" data-startTime="1217">little block of data </span><span class="line" data-startTime="1219">you're seeing here &mdash; see </span><span class="line" data-startTime="1219">that optimization data? </span><span class="line" data-startTime="1221">The way that V8 and most </span><span class="line" data-startTime="1221">modern JavaScript VMs work </span><span class="line" data-startTime="1225">is they will actually </span><span class="line" data-startTime="1225">try to optimize </span><span class="line" data-startTime="1226">your code on your behalf </span><span class="line" data-startTime="1226">because, I mean, come on. </span> <span class="line" data-startTime="1228">You're a stupid programmer. </span></p>

<p><span class="line" data-startTime="1229">You don't know </span><span class="line" data-startTime="1229">how to write code. </span> <span class="line" data-startTime="1231">Obviously, the VM </span><span class="line" data-startTime="1231">knows better than you </span><span class="line" data-startTime="1232">because it's a machine, and </span><span class="line" data-startTime="1232">it's fast, and it's smart. </span> <span class="line" data-startTime="1234">So what it'll actually </span><span class="line" data-startTime="1234">do is take a code path </span><span class="line" data-startTime="1235">that you've written, and </span><span class="line" data-startTime="1235">it'll actually optimize it. </span> <span class="line" data-startTime="1237">It'll manage the memory. </span> <span class="line" data-startTime="1238">It'll make some fast </span><span class="line" data-startTime="1238">path optimizations, </span><span class="line" data-startTime="1240">and it'll put it out there </span><span class="line" data-startTime="1240">and start running it. </span> <span class="line" data-startTime="1242">Well, the problem </span><span class="line" data-startTime="1242">is that it does this </span><span class="line" data-startTime="1244">with some assumptions about </span><span class="line" data-startTime="1244">the state of the environment </span><span class="line" data-startTime="1246">that it's in. </span></p>

<p><span class="line" data-startTime="1247">And it'll do this, and </span><span class="line" data-startTime="1247">oftentime, it'll break. </span> <span class="line" data-startTime="1249">And it'll go, whoa, we </span><span class="line" data-startTime="1249">actually cause an exception </span><span class="line" data-startTime="1251">somewhere in the stack </span><span class="line" data-startTime="1251">due to our optimization, </span><span class="line" data-startTime="1253">because we're just </span><span class="line" data-startTime="1253">a stupid robot, </span><span class="line" data-startTime="1254">and we actually don't know </span><span class="line" data-startTime="1254">what we're doing either. </span> <span class="line" data-startTime="1256">When this happens, </span><span class="line" data-startTime="1256">basically Chrome </span><span class="line" data-startTime="1258">has to create this new block </span><span class="line" data-startTime="1258">of code that's parallel </span><span class="line" data-startTime="1262">to the block of code you had, </span><span class="line" data-startTime="1262">delete your block of code, </span><span class="line" data-startTime="1264">put your new block of code in </span><span class="line" data-startTime="1264">the stack, and have it execute. </span> <span class="line" data-startTime="1267">When that deoptimization </span><span class="line" data-startTime="1267">occurs, because the optimization </span><span class="line" data-startTime="1269">failed, it has to take </span><span class="line" data-startTime="1269">your old block of code, </span><span class="line" data-startTime="1272">put it back in, and </span><span class="line" data-startTime="1272">delete the block of code </span><span class="line" data-startTime="1274">that it just created. </span> <span class="line" data-startTime="1276">So there are specific </span><span class="line" data-startTime="1276">code paths that </span><span class="line" data-startTime="1278">generally cause this to happen. </span> <span class="line" data-startTime="1279">Closures are one of them. </span></p>

<p><span class="line" data-startTime="1282">How many of you are using </span><span class="line" data-startTime="1282">closures in your timers? </span><span class="line" data-startTime="1285">Don't applaud. </span> <span class="line" data-startTime="1285">I don't want you </span><span class="line" data-startTime="1285">to applaud that. </span> <span class="line" data-startTime="1288">Closures are one </span><span class="line" data-startTime="1288">of these things. </span> <span class="line" data-startTime="1290">If you actually have </span><span class="line" data-startTime="1290">a closure running &mdash; </span><span class="line" data-startTime="1291">so it's very common </span><span class="line" data-startTime="1291">for people to do </span><span class="line" data-startTime="1293">set interval closure </span><span class="line" data-startTime="1293">comma 1,000, right? </span><span class="line" data-startTime="1296">That closure in </span><span class="line" data-startTime="1296">that set interval </span><span class="line" data-startTime="1298">is actually causing these </span><span class="line" data-startTime="1298">sorts of memory leaks to occur. </span> <span class="line" data-startTime="1301">It's a deoptimization path </span><span class="line" data-startTime="1301">that V8 can't optimize around. </span> <span class="line" data-startTime="1304">And so basically, every </span><span class="line" data-startTime="1304">single time you're doing this, </span><span class="line" data-startTime="1307">you're running into </span><span class="line" data-startTime="1307">this situation. </span> <span class="line" data-startTime="1308">So let's look at something </span><span class="line" data-startTime="1308">else really quick. </span> <span class="line" data-startTime="1310">So I want to go over </span><span class="line" data-startTime="1310">here and show you </span><span class="line" data-startTime="1313">what I'm seeing on the screen. </span> <span class="line" data-startTime="1314">Now I've turned on a couple </span><span class="line" data-startTime="1314">modes on the developer tools. </span> <span class="line" data-startTime="1318">So first off, you'll see </span><span class="line" data-startTime="1318">this beautiful little &mdash; </span><span class="line" data-startTime="1321">you can't see it too well. </span> <span class="line" data-startTime="1323">I wonder if I can tilt my </span><span class="line" data-startTime="1323">phone just a little bit. </span> <span class="line" data-startTime="1324">You can see up at the </span><span class="line" data-startTime="1324">top that I actually </span><span class="line" data-startTime="1325">have a little graph </span><span class="line" data-startTime="1325">showing me frame rate </span><span class="line" data-startTime="1327">as well as how much GPU </span><span class="line" data-startTime="1327">memory is being used. </span></p>

<p><span class="line" data-startTime="1330">So that's actually &mdash; </span><span class="line" data-startTime="1330">quick show of hands, </span><span class="line" data-startTime="1333">who understands how a </span><span class="line" data-startTime="1333">web page is painted? </span><span class="line" data-startTime="1338">It's like the same guys </span><span class="line" data-startTime="1338">that wrote JPEG compilers. </span> <span class="line" data-startTime="1340">OK. </span> <span class="line" data-startTime="1340">So for everyone else, let </span><span class="line" data-startTime="1340">me do this really quick. </span> <span class="line" data-startTime="1342">How your page is rasterized </span><span class="line" data-startTime="1342">is a delicate ballet. </span> <span class="line" data-startTime="1348">Really, it's more like boxing. </span> <span class="line" data-startTime="1349">It's basically two people </span><span class="line" data-startTime="1349">smashing each other's faces </span><span class="line" data-startTime="1352">in for about six </span><span class="line" data-startTime="1352">milliseconds a frame. </span> <span class="line" data-startTime="1354">Effectively, what happens is </span><span class="line" data-startTime="1354">Chrome will take your web page, </span><span class="line" data-startTime="1357">and it will dice it up. </span> <span class="line" data-startTime="1359">It'll create square regions </span><span class="line" data-startTime="1359">of 256 by 256 tiles. </span> <span class="line" data-startTime="1363">For each one of these tiles, </span><span class="line" data-startTime="1363">it'll actually spin up a thread </span><span class="line" data-startTime="1366">and actually rasterize all </span><span class="line" data-startTime="1366">of the pixels in that tile, </span><span class="line" data-startTime="1369">all of the WebKit &mdash; </span><span class="line" data-startTime="1369">well, Blink now. </span> <span class="line" data-startTime="1371">Sorry, I've got to get </span><span class="line" data-startTime="1371">my terminology right &mdash; </span><span class="line" data-startTime="1372">all of the page elements, </span><span class="line" data-startTime="1372">and actually composite that </span><span class="line" data-startTime="1374">to a CPU chunk of memory, </span><span class="line" data-startTime="1374">32 bits per pixel, </span><span class="line" data-startTime="1379">256 by 256 tile. </span></p>

<p><span class="line" data-startTime="1381">And it'll rasterize </span><span class="line" data-startTime="1381">all that data in there. </span> <span class="line" data-startTime="1383">Once that data is </span><span class="line" data-startTime="1383">rasterized, it'll </span><span class="line" data-startTime="1384">then upload it to the GPU. </span> <span class="line" data-startTime="1386">When you scroll a page, </span><span class="line" data-startTime="1386">the GPU is actually </span><span class="line" data-startTime="1389">the thing that's </span><span class="line" data-startTime="1389">moving your page. </span> <span class="line" data-startTime="1391">Now for those of you &mdash; </span><span class="line" data-startTime="1391">some of you in here </span><span class="line" data-startTime="1392">are young, much younger than me. </span> <span class="line" data-startTime="1394">You may not know this, but </span><span class="line" data-startTime="1394">back before "Quake III" </span><span class="line" data-startTime="1397">was hardware accelerated, </span><span class="line" data-startTime="1397">we had something </span><span class="line" data-startTime="1399">called software rasterization. </span></p>

<p><span class="line" data-startTime="1400">Yeah? </span><span class="line" data-startTime="1401">Software rasterization? </span><span class="line" data-startTime="1402">"Heretic," "Doom," </span><span class="line" data-startTime="1402">"Quake," anybody? </span><span class="line" data-startTime="1404">Any other professional </span><span class="line" data-startTime="1404">gamers in the house? </span><span class="line" data-startTime="1406">Yeah. </span> <span class="line" data-startTime="1407">So back then, we used a term </span><span class="line" data-startTime="1407">called software rasterization. </span> <span class="line" data-startTime="1410">This was generally OK, </span><span class="line" data-startTime="1410">but once we invented GPUs, </span><span class="line" data-startTime="1413">GPUs are basically </span><span class="line" data-startTime="1413">hardware rasterization. </span> <span class="line" data-startTime="1415">They're built to take pixels </span><span class="line" data-startTime="1415">and put them on the screen. </span> <span class="line" data-startTime="1418">They're dedicated </span><span class="line" data-startTime="1418">silicon for this. </span></p>

<p><span class="line" data-startTime="1420">But Chrome is actually still </span><span class="line" data-startTime="1420">using software rasterization </span><span class="line" data-startTime="1422">to paint the pixels </span><span class="line" data-startTime="1422">on the screen. </span> <span class="line" data-startTime="1424">This means that </span><span class="line" data-startTime="1424">this is a slow path. </span> <span class="line" data-startTime="1426">This also means that </span><span class="line" data-startTime="1426">every one of you, </span><span class="line" data-startTime="1427">right now, should be </span><span class="line" data-startTime="1427">really, really scared, </span><span class="line" data-startTime="1430">because how many of you have </span><span class="line" data-startTime="1430">actually tested whether or not </span><span class="line" data-startTime="1433">those rounded corners and drop </span><span class="line" data-startTime="1433">shadows affect your render </span><span class="line" data-startTime="1437">time? </span><span class="line" data-startTime="1439">They do, actually, </span><span class="line" data-startTime="1439">quite frankly. </span> <span class="line" data-startTime="1440">If you go to "HTML5 Rocks," I </span><span class="line" data-startTime="1440">actually did a study on this. </span> <span class="line" data-startTime="1443">Ha ha. </span> <span class="line" data-startTime="1443">I'm sorry, that was </span><span class="line" data-startTime="1443">a leading question. </span> <span class="line" data-startTime="1444">That was mean. </span> <span class="line" data-startTime="1445">I knew that you didn't </span><span class="line" data-startTime="1445">know that answer. </span> <span class="line" data-startTime="1447">But basically what happens </span><span class="line" data-startTime="1447">is your CSS effects actually </span><span class="line" data-startTime="1450">cause &mdash; it has to be </span><span class="line" data-startTime="1450">software rasterized, which </span><span class="line" data-startTime="1453">means we have to actually go </span><span class="line" data-startTime="1453">and draw rounded rectangles </span><span class="line" data-startTime="1455">and then actually add a drop </span><span class="line" data-startTime="1455">shadow to the side of it. </span></p>

<p><span class="line" data-startTime="1458">And this actually </span><span class="line" data-startTime="1458">takes more time. </span> <span class="line" data-startTime="1459">In fact, if you have </span><span class="line" data-startTime="1459">those two combinations </span><span class="line" data-startTime="1461">of things together, </span><span class="line" data-startTime="1461">it actually takes 4x </span><span class="line" data-startTime="1463">as long as each one </span><span class="line" data-startTime="1463">of them individually. </span> <span class="line" data-startTime="1465">Which means that there's </span><span class="line" data-startTime="1465">combinations of CSS properties </span><span class="line" data-startTime="1468">that hurt your rendering </span><span class="line" data-startTime="1468">performance more than others. </span> <span class="line" data-startTime="1472">Hopefully all of you </span><span class="line" data-startTime="1472">are going, dear god, </span><span class="line" data-startTime="1474">I have to test this right now. </span> <span class="line" data-startTime="1475">And how you can test this, as </span><span class="line" data-startTime="1475">you can actually see up here </span><span class="line" data-startTime="1478">in this GPU, this </span><span class="line" data-startTime="1478">frame rate meter, </span><span class="line" data-startTime="1480">is that as you're </span><span class="line" data-startTime="1480">scrolling, you can actually </span><span class="line" data-startTime="1482">see the milliseconds taken to </span><span class="line" data-startTime="1482">render that part of your page. </span> <span class="line" data-startTime="1485">Now what you're </span><span class="line" data-startTime="1485">also seeing here is </span><span class="line" data-startTime="1486">notice this big red box </span><span class="line" data-startTime="1486">that keeps popping up? </span><span class="line" data-startTime="1489">This is actually a mode </span><span class="line" data-startTime="1489">in Chrome DevTools. </span></p>

<p><span class="line" data-startTime="1491">Let me show you this. </span> <span class="line" data-startTime="1491">And I know I'm spending </span><span class="line" data-startTime="1491">more time on this site. </span> <span class="line" data-startTime="1493">As we go to the </span><span class="line" data-startTime="1493">other sites, you'll </span><span class="line" data-startTime="1494">actually see this </span><span class="line" data-startTime="1494">stuff play out. </span> <span class="line" data-startTime="1495">But I need to kind of </span><span class="line" data-startTime="1495">test the groundwork here. </span> <span class="line" data-startTime="1497">Is that in or left? </span></p>

<p class="speaker"><span class="line" data-starttime="1499"><span class="speakerName">Audience</span>: Left. </span></p>

<p class="speaker"><span class="line" data-starttime="1500"><span class="speakerName">Colt McAnlis</span>: Left. </span> <span class="line" data-startTime="1500">Oh, wow, OK. </span> <span class="line" data-startTime="1501">I'll keep working. </span> <span class="line" data-startTime="1502">So anyhow, I have show </span><span class="line" data-startTime="1502">paint rectangles on. </span> <span class="line" data-startTime="1504">Basically, what this does </span><span class="line" data-startTime="1504">is when I turn this on, </span><span class="line" data-startTime="1506">it's going to show </span><span class="line" data-startTime="1506">a red rectangle </span><span class="line" data-startTime="1507">for every part of the page </span><span class="line" data-startTime="1507">that actually gets repainted. </span> <span class="line" data-startTime="1509">So this actually tells </span><span class="line" data-startTime="1509">me what part of the page </span><span class="line" data-startTime="1511">is being rerasterized. </span> <span class="line" data-startTime="1513">Which is really cool </span><span class="line" data-startTime="1513">to know because I'm </span><span class="line" data-startTime="1515">pretty sure all of you </span><span class="line" data-startTime="1515">will look at your site </span><span class="line" data-startTime="1517">and find that you've got some </span><span class="line" data-startTime="1517">little square icon like this, </span><span class="line" data-startTime="1520">but for some reason, it's </span><span class="line" data-startTime="1520">rasterizing like a 6x size </span><span class="line" data-startTime="1523">window of that, that all has </span><span class="line" data-startTime="1523">to be processed on the CPU. </span> <span class="line" data-startTime="1526">This slows down your page. </span> <span class="line" data-startTime="1527">It creates jank. </span> <span class="line" data-startTime="1528">I hate that word. </span></p>

<p><span class="line" data-startTime="1529">Hitching, by the way, </span><span class="line" data-startTime="1529">hitching is the right term. </span> <span class="line" data-startTime="1531">Every other medium, </span><span class="line" data-startTime="1531">video games, AV, movies, </span><span class="line" data-startTime="1533">it's called hitching. </span> <span class="line" data-startTime="1535">Just, can we all </span><span class="line" data-startTime="1535">agree to use hitching? </span><span class="line" data-startTime="1537">No? </span><span class="line" data-startTime="1538">I'll get hitchfree.org later. </span> <span class="line" data-startTime="1541">Anyhow, let me move </span><span class="line" data-startTime="1541">on to the next site </span><span class="line" data-startTime="1542">because I want to make sure that </span><span class="line" data-startTime="1542">we talk about some more stuff. </span> <span class="line" data-startTime="1545">But basically, you can </span><span class="line" data-startTime="1545">see that on this site, </span><span class="line" data-startTime="1546">there there's a couple things. </span> <span class="line" data-startTime="1548">First off, they're </span><span class="line" data-startTime="1548">sending two large images </span><span class="line" data-startTime="1550">to a mobile device. </span> <span class="line" data-startTime="1551">They don't have a mobile view. </span> <span class="line" data-startTime="1552">They don't have a </span><span class="line" data-startTime="1552">mindset of a viewport </span><span class="line" data-startTime="1555">for these mobile environments. </span></p>

<p><span class="line" data-startTime="1556">Plus it seems like their </span><span class="line" data-startTime="1556">marquee is actually </span><span class="line" data-startTime="1559">rendering and updating </span><span class="line" data-startTime="1559">different parts of the page </span><span class="line" data-startTime="1561">at different frequencies. </span> <span class="line" data-startTime="1562">They're allocating about </span><span class="line" data-startTime="1562">a meg of memory per minute </span><span class="line" data-startTime="1566">or so when no one's </span><span class="line" data-startTime="1566">touching anything. </span> <span class="line" data-startTime="1568">So if this is your </span><span class="line" data-startTime="1568">site, fix those things </span><span class="line" data-startTime="1571">because you need to. </span> <span class="line" data-startTime="1572">And also, your load time </span><span class="line" data-startTime="1572">is pretty harsh, too. </span> <span class="line" data-startTime="1574">So let's do this next one. </span> <span class="line" data-startTime="1577">So this next one </span><span class="line" data-startTime="1577">should be pretty quick. </span> <span class="line" data-startTime="1579">I just want to highlight </span><span class="line" data-startTime="1579">something really, </span><span class="line" data-startTime="1581">really poignant here. </span> <span class="line" data-startTime="1582">So I'm going to close this. </span></p>

<p><span class="line" data-startTime="1584">Which view are you on? </span><span class="line" data-startTime="1585">OK. </span> <span class="line" data-startTime="1587">So let's show you. </span> <span class="line" data-startTime="1588">So this is DoSomething.org, </span><span class="line" data-startTime="1588">a cool little website. </span> <span class="line" data-startTime="1592">It kind of just </span><span class="line" data-startTime="1592">encourages everyone </span><span class="line" data-startTime="1593">to do something interesting in </span><span class="line" data-startTime="1593">small, little &mdash; small butterfly </span><span class="line" data-startTime="1596">wings change the course of tides </span><span class="line" data-startTime="1596">in Africa and all that stuff. </span> <span class="line" data-startTime="1600">But we see it's a pretty </span><span class="line" data-startTime="1600">simple website, just kind </span><span class="line" data-startTime="1602">of a little strata of </span><span class="line" data-startTime="1602">images and whatnot. </span> <span class="line" data-startTime="1606">When we go over here </span><span class="line" data-startTime="1606">to Chrome DevTools, </span><span class="line" data-startTime="1609">let's inspect this </span><span class="line" data-startTime="1609">information here. </span> <span class="line" data-startTime="1610">And I'm going to put this </span><span class="line" data-startTime="1610">back on the Network tab, </span><span class="line" data-startTime="1612">and we're going to go </span><span class="line" data-startTime="1612">ahead and reload this. </span> <span class="line" data-startTime="1618">So we can actually see that </span><span class="line" data-startTime="1618">the page loaded pretty quickly. </span></p>

<p><span class="line" data-startTime="1621">We got a lot of </span><span class="line" data-startTime="1621">information really quick. </span> <span class="line" data-startTime="1623">About 2.9 seconds, so </span><span class="line" data-startTime="1623">this is a lot better </span><span class="line" data-startTime="1625">than the previous website. </span> <span class="line" data-startTime="1626">We're right around that </span><span class="line" data-startTime="1626">three second load time. </span> <span class="line" data-startTime="1629">And again, this is on my 4G. </span> <span class="line" data-startTime="1630">I'm not on the wireless. </span> <span class="line" data-startTime="1631">So that's pretty good. </span> <span class="line" data-startTime="1632">10K transferred, </span><span class="line" data-startTime="1632">that's all right. </span> <span class="line" data-startTime="1634">21 requests, not </span><span class="line" data-startTime="1634">that bad at all. </span> <span class="line" data-startTime="1636">So let's again sort by size. </span> <span class="line" data-startTime="1637">Let's see if anything's </span><span class="line" data-startTime="1637">coming up here. </span> <span class="line" data-startTime="1640">I got a couple not founds. </span> <span class="line" data-startTime="1641">That's not necessarily </span><span class="line" data-startTime="1641">a good idea. </span> <span class="line" data-startTime="1643">A couple images here. </span> <span class="line" data-startTime="1647">So this is interesting. </span> <span class="line" data-startTime="1648">Again, another 106K image </span><span class="line" data-startTime="1648">that's being delivered </span><span class="line" data-startTime="1650">to a mobile screen that </span><span class="line" data-startTime="1650">obviously does not need 106K. </span> <span class="line" data-startTime="1654">That one's a little bit better. </span> <span class="line" data-startTime="1655">Well, not better. </span></p>

<p><span class="line" data-startTime="1656">I mean, that's a very </span><span class="line" data-startTime="1656">depressing image. </span> <span class="line" data-startTime="1658">I didn't mean that </span><span class="line" data-startTime="1658">that was &mdash; again, </span><span class="line" data-startTime="1662">my opinions are my </span><span class="line" data-startTime="1662">own and not that </span><span class="line" data-startTime="1664">of any organization </span><span class="line" data-startTime="1664">or secret service </span><span class="line" data-startTime="1665">that I'm influenced with. </span> <span class="line" data-startTime="1667">So we can actually see </span><span class="line" data-startTime="1667">some of these images </span><span class="line" data-startTime="1668">may be a little bit </span><span class="line" data-startTime="1668">larger than others. </span> <span class="line" data-startTime="1670">But for the most part, </span><span class="line" data-startTime="1670">this is actually nice. </span> <span class="line" data-startTime="1672">Where did &mdash; what happened here? </span><span class="line" data-startTime="1674">Did I &mdash; this technology, </span><span class="line" data-startTime="1674">isn't it great? </span><span class="line" data-startTime="1679">So we can actually see, though, </span><span class="line" data-startTime="1679">that this page is actually </span><span class="line" data-startTime="1682">a pretty good example of </span><span class="line" data-startTime="1682">what to do on a website. </span> <span class="line" data-startTime="1685">If you load this on the desktop, </span><span class="line" data-startTime="1685">what you'll actually see </span><span class="line" data-startTime="1687">is that there's larger </span><span class="line" data-startTime="1687">versions of these images. </span> <span class="line" data-startTime="1689">They're tiled differently </span><span class="line" data-startTime="1689">with a different layout. </span> <span class="line" data-startTime="1691">There's a different scheme. </span> <span class="line" data-startTime="1692">But in the mobile </span><span class="line" data-startTime="1692">version, they really only </span><span class="line" data-startTime="1694">have one or two images </span><span class="line" data-startTime="1694">that are probably </span><span class="line" data-startTime="1696">too large for the mobile device. </span></p>

<p><span class="line" data-startTime="1697">But in the most </span><span class="line" data-startTime="1697">part, this actually </span><span class="line" data-startTime="1699">scrolls pretty quickly. </span> <span class="line" data-startTime="1702">I know you can't see </span><span class="line" data-startTime="1702">it up in the top, here </span><span class="line" data-startTime="1704">but this is actually about </span><span class="line" data-startTime="1704">three milliseconds to five </span><span class="line" data-startTime="1707">milliseconds to actually </span><span class="line" data-startTime="1707">draw the part of the page. </span> <span class="line" data-startTime="1709">And you can actually see </span><span class="line" data-startTime="1709">that as I'm scrolling, </span><span class="line" data-startTime="1712">notice that there's </span><span class="line" data-startTime="1712">no red tiles. </span> <span class="line" data-startTime="1714">You don't see those </span><span class="line" data-startTime="1714">big red flashes. </span> <span class="line" data-startTime="1716">What that means is that this </span><span class="line" data-startTime="1716">entire page has actually </span><span class="line" data-startTime="1718">been rasterized on the CPU </span><span class="line" data-startTime="1718">and uploaded to the GPU, </span><span class="line" data-startTime="1720">and it's been cached in the GPU. </span> <span class="line" data-startTime="1722">And so as you're </span><span class="line" data-startTime="1722">scrolling up and down, </span><span class="line" data-startTime="1724">the CPU doesn't </span><span class="line" data-startTime="1724">have to do any work. </span> <span class="line" data-startTime="1726">So this is what you want. </span></p>

<p><span class="line" data-startTime="1727">You want no red blocks </span><span class="line" data-startTime="1727">going on in your page. </span> <span class="line" data-startTime="1729">All right. </span> <span class="line" data-startTime="1730">So let's do another </span><span class="line" data-startTime="1730">site here really quick. </span> <span class="line" data-startTime="1732">Because now I'm freaking out </span><span class="line" data-startTime="1732">that I only got 30 minutes. </span></p>

<p class="speaker"><span class="line" data-starttime="1735"><span class="speakerName">Audience</span>: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1738"><span class="speakerName">Colt McAnlis</span>: Yes. </span> <span class="line" data-startTime="1738">Oh, we're going all night. </span> <span class="line" data-startTime="1742">Let's just open </span><span class="line" data-startTime="1742">up every website. </span> <span class="line" data-startTime="1744">OK, so this is the one we </span><span class="line" data-startTime="1744">saw a little bit earlier. </span> <span class="line" data-startTime="1747">Sorry, I don't know if my </span><span class="line" data-startTime="1747">antics distracted you all. </span> <span class="line" data-startTime="1749">Let's reload this again. </span> <span class="line" data-startTime="1752">Let's see how the load time is. </span> <span class="line" data-startTime="1753">So notice on the top here </span><span class="line" data-startTime="1753">that it's about halfway. </span> <span class="line" data-startTime="1756">So this page hasn't </span><span class="line" data-startTime="1756">unloaded yet. </span> <span class="line" data-startTime="1757">Let's just be clear about </span><span class="line" data-startTime="1757">what we're looking at. </span> <span class="line" data-startTime="1759">This is an instant load. </span></p>

<p><span class="line" data-startTime="1761">Now we've actually gotten </span><span class="line" data-startTime="1761">to the loading part. </span> <span class="line" data-startTime="1769">If this is your </span><span class="line" data-startTime="1769">website, I'm sorry. </span> <span class="line" data-startTime="1772">Hopefully, you understand </span><span class="line" data-startTime="1772">there's work that needs to do. </span></p>

<p class="speaker"><span class="line" data-starttime="1774"><span class="speakerName">Audience</span>: [INAUDIBLE] </span></p>

<p class="speaker"><span class="line" data-starttime="1777"><span class="speakerName">Colt McAnlis</span>: It might be. </span> <span class="line" data-startTime="1778">Let's find out. </span> <span class="line" data-startTime="1779">So again, over here, </span><span class="line" data-startTime="1779">let's go to Inspect. </span> <span class="line" data-startTime="1781">I wonder if I can just </span><span class="line" data-startTime="1781">catch this midstream, </span><span class="line" data-startTime="1782">if it'll just tell me </span><span class="line" data-startTime="1782">what that image is, </span><span class="line" data-startTime="1784">or if I have to hit reload. </span> <span class="line" data-startTime="1788">It's still loading. </span> <span class="line" data-startTime="1789">OK, here, I'll hit Reload, </span><span class="line" data-startTime="1789">see what goes on here. </span> <span class="line" data-startTime="1792">Ooh. </span> <span class="line" data-startTime="1793">Oh, web fonts. </span> <span class="line" data-startTime="1794">OK, we'll take a look </span><span class="line" data-startTime="1794">at that in a second. </span></p>

<p><span class="line" data-startTime="1796">OK, so I hit Reload. </span> <span class="line" data-startTime="1798">This is waiting to reload. </span> <span class="line" data-startTime="1799">So obviously, there's already </span><span class="line" data-startTime="1799">some problems with this site. </span> <span class="line" data-startTime="1802">Hopefully, someone in </span><span class="line" data-startTime="1802">here is going like, </span><span class="line" data-startTime="1803">uh, please stop </span><span class="line" data-startTime="1803">clicking buttons. </span> <span class="line" data-startTime="1807">Please take my website off </span><span class="line" data-startTime="1807">of your screen, you angry, </span><span class="line" data-startTime="1810">bald man. </span> <span class="line" data-startTime="1811">OK. </span> <span class="line" data-startTime="1812">Let's let see how </span><span class="line" data-startTime="1812">this is going here. </span> <span class="line" data-startTime="1814">So you can't see the screen. </span> <span class="line" data-startTime="1816">It's still loading. </span> <span class="line" data-startTime="1817">The font's just now appeared. </span> <span class="line" data-startTime="1819">Let's take a look at </span><span class="line" data-startTime="1819">what's going on here </span><span class="line" data-startTime="1821">and see whether or not we can </span><span class="line" data-startTime="1821">discuss some of these items. </span> <span class="line" data-startTime="1824">So let's sort by size here. </span> <span class="line" data-startTime="1828">This is something I want </span><span class="line" data-startTime="1828">to let everybody know. </span> <span class="line" data-startTime="1830">This is the first thing I want </span><span class="line" data-startTime="1830">to point out on this site. </span> <span class="line" data-startTime="1832">This is a WOFF file. </span></p>

<p><span class="line" data-startTime="1834">It's a web font. </span> <span class="line" data-startTime="1836">Round of applause if you're </span><span class="line" data-startTime="1836">using web fonts in your site. </span> <span class="line" data-startTime="1838">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="1839"><span class="speakerName">Colt McAnlis</span>: Good. </span> <span class="line" data-startTime="1840">Please stop. </span> <span class="line" data-startTime="1843">Please, please stop. </span> <span class="line" data-startTime="1846">This is a &mdash; I don't </span><span class="line" data-startTime="1846">know if you saw this. </span> <span class="line" data-startTime="1848">Yeah, web fonts look great. </span> <span class="line" data-startTime="1849">They're awesome. </span> <span class="line" data-startTime="1850">This is 38K for that web font. </span> <span class="line" data-startTime="1851">And unfortunately, some </span><span class="line" data-startTime="1851">of these have been cached, </span><span class="line" data-startTime="1854">so you can't actually see the </span><span class="line" data-startTime="1854">true size of a lot of these. </span> <span class="line" data-startTime="1857">But there's actually like five </span><span class="line" data-startTime="1857">or six web fonts on this page. </span> <span class="line" data-startTime="1859">So you guys are kind </span><span class="line" data-startTime="1859">of getting a bum deal. </span> <span class="line" data-startTime="1861">You're not seeing </span><span class="line" data-startTime="1861">how horrible this is. </span> <span class="line" data-startTime="1863">But basically, </span><span class="line" data-startTime="1863">here's what happens </span><span class="line" data-startTime="1864">is when you've got </span><span class="line" data-startTime="1864">five web fonts, </span><span class="line" data-startTime="1866">each one can be somewhere </span><span class="line" data-startTime="1866">between the range of 40K </span><span class="line" data-startTime="1869">and like 90K for a font. </span></p>

<p><span class="line" data-startTime="1871">That font is required </span><span class="line" data-startTime="1871">before text can actually </span><span class="line" data-startTime="1874">be drawn to your screen. </span> <span class="line" data-startTime="1877">So pop quiz. </span> <span class="line" data-startTime="1878">What happens if you're </span><span class="line" data-startTime="1878">ready to draw text, </span><span class="line" data-startTime="1880">and your CSS is down, and </span><span class="line" data-startTime="1880">your JavaScript is down, </span><span class="line" data-startTime="1883">and your images are down, </span><span class="line" data-startTime="1883">but your WOFF isn't down yet? </span><span class="line" data-startTime="1887">Good answer. </span> <span class="line" data-startTime="1888">I don't know. </span> <span class="line" data-startTime="1889">No one said anything. </span> <span class="line" data-startTime="1889">Good answer, nothing. </span> <span class="line" data-startTime="1890">Nothing happens. </span> <span class="line" data-startTime="1891">Chrome will do nothing. </span> <span class="line" data-startTime="1892">Chrome will block. </span> <span class="line" data-startTime="1892">Chrome will wait. </span> <span class="line" data-startTime="1893">Chrome will wait for every </span><span class="line" data-startTime="1893">single one of your WOFFs </span><span class="line" data-startTime="1895">to come down before a </span><span class="line" data-startTime="1895">single character of text </span><span class="line" data-startTime="1899">is drawn on your screen. </span></p>

<p class="speaker"><span class="line" data-starttime="1901"><span class="speakerName">Audience</span>: Uh, it will </span><span class="line" data-startTime="1901">point at one WOFF. </span><span class="line" data-startTime="1904">It will render all the </span><span class="line" data-startTime="1904">text that uses that WOFF. </span></p>

<p class="speaker"><span class="line" data-starttime="1906"><span class="speakerName">Colt McAnlis</span>: Jake </span><span class="line" data-startTime="1906">Archibald says I'm dumb. </span><span class="line" data-startTime="1908">If that single WOFF is </span><span class="line" data-startTime="1908">visible, it'll render that one. </span><span class="line" data-startTime="1911">Now Firefox will do it a </span><span class="line" data-startTime="1911">little bit differently. </span><span class="line" data-startTime="1912">Basically, what </span><span class="line" data-startTime="1912">it'll do is it'll </span><span class="line" data-startTime="1913">wait three seconds, right, Jake? </span></p>

<p class="speaker"><span class="line" data-starttime="1914"><span class="speakerName">Audience</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1914"><span class="speakerName">Colt McAnlis</span>: Yeah. </span><span class="line" data-startTime="1915">It'll wait three seconds. </span><span class="line" data-startTime="1916">Maybe you should continue. </span></p>

<p class="speaker"><span class="line" data-starttime="1917"><span class="speakerName">Audience</span>: Yeah. [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="1919"><span class="speakerName">Colt McAnlis</span>: I'm having </span><span class="line" data-startTime="1919">an awkward mic moment. </span> <span class="line" data-startTime="1921">Basically, what'll </span><span class="line" data-startTime="1921">happen with Firefox </span><span class="line" data-startTime="1923">is it'll start the </span><span class="line" data-startTime="1923">request for the WOFF. </span> <span class="line" data-startTime="1924">If it hasn't been </span><span class="line" data-startTime="1924">downloaded in three seconds, </span><span class="line" data-startTime="1926">it'll actually keep </span><span class="line" data-startTime="1926">allowing that to download, </span><span class="line" data-startTime="1930">but it'll actually display </span><span class="line" data-startTime="1930">the font with a default. </span> <span class="line" data-startTime="1933">Like it'll just see Arial. </span> <span class="line" data-startTime="1934">So if you're actually </span><span class="line" data-startTime="1934">seeing this on Firefox, </span><span class="line" data-startTime="1935">you'll see like three </span><span class="line" data-startTime="1935">seconds of nothing, </span><span class="line" data-startTime="1937">and then you'll see Arial, and </span><span class="line" data-startTime="1937">then when the font comes in, </span><span class="line" data-startTime="1939">you'll see it pop to whatever </span><span class="line" data-startTime="1939">the font's supposed to be. </span></p>

<p><span class="line" data-startTime="1942">And so you see this flicker. </span> <span class="line" data-startTime="1943">I see it. </span> <span class="line" data-startTime="1944">You see it a lot on mobile, </span><span class="line" data-startTime="1944">because these mobile devices </span><span class="line" data-startTime="1946">are actually 6x slower </span><span class="line" data-startTime="1946">in hardware, just </span><span class="line" data-startTime="1949">across the board &mdash; probably </span><span class="line" data-startTime="1949">for at least another two years, </span><span class="line" data-startTime="1952">depending on which hardware </span><span class="line" data-startTime="1952">manufacturer you're trending &mdash; </span><span class="line" data-startTime="1954">than what you're </span><span class="line" data-startTime="1954">seeing on desktops. </span> <span class="line" data-startTime="1955">Not only is it slower to </span><span class="line" data-startTime="1955">download these things, </span><span class="line" data-startTime="1958">but these WOFFs are actually </span><span class="line" data-startTime="1958">very complex spline paths </span><span class="line" data-startTime="1960">that have to be interpreted by </span><span class="line" data-startTime="1960">these underpowered ARM chips </span><span class="line" data-startTime="1963">as well. </span> <span class="line" data-startTime="1964">Anyone in here written </span><span class="line" data-startTime="1964">a software rasterizer? </span><span class="line" data-startTime="1967">Cool. </span></p>

<p><span class="line" data-startTime="1968">Spline paths are slow. </span> <span class="line" data-startTime="1970">Anyhow, WOFFs are bad, </span><span class="line" data-startTime="1970">and you should feel bad </span><span class="line" data-startTime="1973">if you're using them in </span><span class="line" data-startTime="1973">your websites right now. </span> <span class="line" data-startTime="1975">Now, things are happening that </span><span class="line" data-startTime="1975">are trying to optimize this. </span> <span class="line" data-startTime="1977">I know that there's </span><span class="line" data-startTime="1977">people talking </span><span class="line" data-startTime="1978">about different ways to compress </span><span class="line" data-startTime="1978">WOFFs and different ways </span><span class="line" data-startTime="1981">to use these type of </span><span class="line" data-startTime="1981">fonts in different ways. </span> <span class="line" data-startTime="1983">But please note that you have </span><span class="line" data-startTime="1983">them as part of your site, </span><span class="line" data-startTime="1986">you should feel bad. </span> <span class="line" data-startTime="1988">Now let me see if I can &mdash; </span><span class="line" data-startTime="1988">can I Shift-Reload this? </span><span class="line" data-startTime="1990">I don't know. </span> <span class="line" data-startTime="1992">I can't get the data from cache. </span></p>

<p><span class="line" data-startTime="1993">But we also see in here </span><span class="line" data-startTime="1993">a couple of these things, </span><span class="line" data-startTime="1996">and I can't show you this. </span> <span class="line" data-startTime="1997">But these images are </span><span class="line" data-startTime="1997">actually a little bit larger </span><span class="line" data-startTime="2000">than they should be as well. </span> <span class="line" data-startTime="2001">These are OK. </span> <span class="line" data-startTime="2002">Was that Willie Nelson? </span><span class="line" data-startTime="2004">I don't know. </span> <span class="line" data-startTime="2006">Again, there's another WOFF. </span> <span class="line" data-startTime="2008">This PNG, where was </span><span class="line" data-startTime="2008">its header on that? </span><span class="line" data-startTime="2010">This one's a WebP. </span> <span class="line" data-startTime="2011">Ooh, fantastic. </span> <span class="line" data-startTime="2012">So this guy's </span><span class="line" data-startTime="2012">actually using a WebP. </span> <span class="line" data-startTime="2016">Interesting. </span> <span class="line" data-startTime="2016">I don't know what that's doing. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2017"><span class="speakerName">Audience</span>: That was </span><span class="line" data-startTime="2017">the accept header. </span></p>

<p class="speaker"><span class="line" data-starttime="2018"><span class="speakerName">Colt McAnlis</span>: That was </span><span class="line" data-startTime="2018">the accept header, yeah. </span> <span class="line" data-startTime="2020">So at least a WebP </span><span class="line" data-startTime="2020">did come down. </span> <span class="line" data-startTime="2022">However, we see that &mdash; let's </span><span class="line" data-startTime="2022">go down here &mdash; again, 124K. </span> <span class="line" data-startTime="2026">So again, you guys are </span><span class="line" data-startTime="2026">getting the bad rap </span><span class="line" data-startTime="2027">because I'm not doing a </span><span class="line" data-startTime="2027">cached fresh reload on this. </span> <span class="line" data-startTime="2031">But basically, this </span><span class="line" data-startTime="2031">site is using &mdash; </span><span class="line" data-startTime="2033">it's actually passing full </span><span class="line" data-startTime="2033">megabyte, two megabyte images </span><span class="line" data-startTime="2036">down. </span> <span class="line" data-startTime="2037">It's got the WOFFs in the </span><span class="line" data-startTime="2037">direct path to rendering, </span><span class="line" data-startTime="2039">and so that's going </span><span class="line" data-startTime="2039">to take a long time </span><span class="line" data-startTime="2041">before text will show up. </span></p>

<p><span class="line" data-startTime="2042">In fact, the image will try </span><span class="line" data-startTime="2042">to progressively load in </span><span class="line" data-startTime="2044">before all the text does. </span> <span class="line" data-startTime="2046">And this will annoy </span><span class="line" data-startTime="2046">your users a lot more. </span> <span class="line" data-startTime="2048">So let's try to avoid that. </span> <span class="line" data-startTime="2049">All right. </span> <span class="line" data-startTime="2050">Let's try another website </span><span class="line" data-startTime="2050">here really quick. </span> <span class="line" data-startTime="2055">Let me go over to this. </span> <span class="line" data-startTime="2057">Is anyone sad yet about </span><span class="line" data-startTime="2057">the state of things? </span><span class="line" data-startTime="2061">Is anyone going </span><span class="line" data-startTime="2061">like, wow, I wonder </span><span class="line" data-startTime="2063">how my site does under </span><span class="line" data-startTime="2063">this type of scrutiny? </span><span class="line" data-startTime="2066">If so, then yay, </span><span class="line" data-startTime="2066">I'm doing my job. </span> <span class="line" data-startTime="2068">I can get paid this week. </span></p>

<p><span class="line" data-startTime="2071">Cool. </span> <span class="line" data-startTime="2071">That was actually pretty quick. </span> <span class="line" data-startTime="2073">That actually wasn't that bad. </span> <span class="line" data-startTime="2074">Let me do that again. </span> <span class="line" data-startTime="2080">Yeah, that actually </span><span class="line" data-startTime="2080">wasn't that bad. </span> <span class="line" data-startTime="2082">Here, let me see if I can </span><span class="line" data-startTime="2082">hard &mdash; load, load, load. </span> <span class="line" data-startTime="2087">Good. </span> <span class="line" data-startTime="2088">Cool, OK. </span> <span class="line" data-startTime="2089">So this might be a good site. </span> <span class="line" data-startTime="2090">Let's take a look at this one. </span> <span class="line" data-startTime="2091">So we'll hit Inspect again. </span> <span class="line" data-startTime="2092">We'll load it up. </span> <span class="line" data-startTime="2096">Let's see here. </span> <span class="line" data-startTime="2096">Scrolling actually seems </span><span class="line" data-startTime="2096">pretty smooth on this site. </span> <span class="line" data-startTime="2100">Doesn't seem that bad. </span> <span class="line" data-startTime="2103">We can move stuff </span><span class="line" data-startTime="2103">around pretty easily. </span> <span class="line" data-startTime="2106">Let's take a look </span><span class="line" data-startTime="2106">at the Network tab. </span> <span class="line" data-startTime="2107">Let's hit Reload again. </span> <span class="line" data-startTime="2113">Again, unfortunately, </span><span class="line" data-startTime="2113">all of this stuff </span><span class="line" data-startTime="2115">is coming from the cache now. </span></p>

<p><span class="line" data-startTime="2116">I should've used </span><span class="line" data-startTime="2116">my other tablet. </span> <span class="line" data-startTime="2119">Dot com, CSS, not that bad. </span> <span class="line" data-startTime="2121">22K CSS, 27K CSS, 200K. </span> <span class="line" data-startTime="2125">I don't like this 192K JPEG </span><span class="line" data-startTime="2125">that's only 920 by 300. </span> <span class="line" data-startTime="2132">Notice this. </span> <span class="line" data-startTime="2133">So this is 192K </span><span class="line" data-startTime="2133">for an image that </span><span class="line" data-startTime="2136">is a quarter of </span><span class="line" data-startTime="2136">the size of Putin. </span> <span class="line" data-startTime="2140">Show of hands, who </span><span class="line" data-startTime="2140">knows what that means? </span><span class="line" data-startTime="2142">Yeah, not optimizing your JPEGs. </span> <span class="line" data-startTime="2145">I think there's actually </span><span class="line" data-startTime="2145">some other bad examples here. </span> <span class="line" data-startTime="2147">Here's another one, 240K. </span> <span class="line" data-startTime="2149">Oh, oh, 240K, 920 by 300. </span> <span class="line" data-startTime="2152">Does anyone off the </span><span class="line" data-startTime="2152">back of your hand </span><span class="line" data-startTime="2154">know what this is if it </span><span class="line" data-startTime="2154">were a raw image size? </span><span class="line" data-startTime="2157">So it's 920 times 300 </span><span class="line" data-startTime="2157">times 24 bits per pixel? </span><span class="line" data-startTime="2163">Get back to me. </span></p>

<p><span class="line" data-startTime="2164">Jake'll give you some swag. </span> <span class="line" data-startTime="2166">Oh, there's a Facebook icon. </span> <span class="line" data-startTime="2167">Only 9K, yay. </span> <span class="line" data-startTime="2169">Well, OK. </span> <span class="line" data-startTime="2170">100 by 100 is 9K. </span> <span class="line" data-startTime="2172">That seems a little </span><span class="line" data-startTime="2172">bit excessive, right? </span><span class="line" data-startTime="2174">That seems like there's actually </span><span class="line" data-startTime="2174">some bloat going on there. </span> <span class="line" data-startTime="2177">I wonder if there's like </span><span class="line" data-startTime="2177">a negative JPEG encoder. </span> <span class="line" data-startTime="2179">Make it larger. </span> <span class="line" data-startTime="2181">By the way, if any of you are </span><span class="line" data-startTime="2181">going to be in San Francisco </span><span class="line" data-startTime="2185">next week or have a chance </span><span class="line" data-startTime="2185">or have the internet, </span><span class="line" data-startTime="2187">I think, definitely tune into my </span><span class="line" data-startTime="2187">talk I'm giving on compression </span><span class="line" data-startTime="2191">on the web. </span></p>

<p><span class="line" data-startTime="2192">And hopefully, if you've </span><span class="line" data-startTime="2192">seen my talk yesterday </span><span class="line" data-startTime="2194">about being scared of closures, </span><span class="line" data-startTime="2194">if you see my talk next week </span><span class="line" data-startTime="2197">on compression on the </span><span class="line" data-startTime="2197">web, hopefully compression </span><span class="line" data-startTime="2199">will scare you after </span><span class="line" data-startTime="2199">that, and you'll </span><span class="line" data-startTime="2201">trudge toward that </span><span class="line" data-startTime="2201">monster with a wary eye. </span> <span class="line" data-startTime="2204">But anyhow, 100K, 100K </span><span class="line" data-startTime="2204">pixels, 3.9K in size. </span> <span class="line" data-startTime="2207">So that actually seems a </span><span class="line" data-startTime="2207">little bit excessive there too. </span> <span class="line" data-startTime="2211">Here's, again &mdash; those </span><span class="line" data-startTime="2211">are the same images. </span> <span class="line" data-startTime="2213">Here's another one. </span> <span class="line" data-startTime="2214">These are really large. </span> <span class="line" data-startTime="2215">180K being sent to </span><span class="line" data-startTime="2215">my mobile device. </span> <span class="line" data-startTime="2217">Now the reason this </span><span class="line" data-startTime="2217">loaded &mdash; again, </span><span class="line" data-startTime="2219">this loaded a little fast. </span></p>

<p><span class="line" data-startTime="2220">This is a bias because I've been </span><span class="line" data-startTime="2220">testing these things all day, </span><span class="line" data-startTime="2222">and this is coming from cache. </span> <span class="line" data-startTime="2223">So you're not really feeling </span><span class="line" data-startTime="2223">as much pain as you should be. </span></p>

<p class="speaker"><span class="line" data-starttime="2225"><span class="speakerName">Audience</span>: If you go to the </span><span class="line" data-startTime="2225">bottom of the [INAUDIBLE], </span><span class="line" data-startTime="2228">you should be able </span><span class="line" data-startTime="2228">to disable the cache. </span></p>

<p class="speaker"><span class="line" data-starttime="2230"><span class="speakerName">Colt McAnlis</span>: Beautiful. </span><span class="line" data-startTime="2232">All right, Jake </span><span class="line" data-startTime="2232">Archibald for the win. </span><span class="line" data-startTime="2234">Here, let's hit Reload now. </span><span class="line" data-startTime="2239">There we go. </span><span class="line" data-startTime="2240">Oh yeah. </span><span class="line" data-startTime="2242">Oh, feel it. </span><span class="line" data-startTime="2243">Feel it! </span><span class="line" data-startTime="2246">So awkward right now. </span></p>

<p class="speaker"><span class="line" data-starttime="2249"><span class="speakerName">Audience</span>: [INAUDIBLE] JPEGs. </span></p>

<p class="speaker"><span class="line" data-starttime="2251"><span class="speakerName">Colt McAnlis</span>: They kind </span><span class="line" data-startTime="2251">of should be, yeah. </span><span class="line" data-startTime="2254">Oh, so &mdash; no one's hiding </span><span class="line" data-startTime="2254">their face right now, </span><span class="line" data-startTime="2257">so maybe the guy who put </span><span class="line" data-startTime="2257">this site in isn't here, </span><span class="line" data-startTime="2259">or you've got a </span><span class="line" data-startTime="2259">great poker face. </span><span class="line" data-startTime="2261">I will not bet </span><span class="line" data-startTime="2261">money against you. </span><span class="line" data-startTime="2265">OK. </span></p>

<p class="speaker"><span class="line" data-starttime="2267"><span class="speakerName">Audience</span>: Oh, then they shrink. </span></p>

<p class="speaker"><span class="line" data-starttime="2268"><span class="speakerName">Colt McAnlis</span>: And then </span><span class="line" data-startTime="2268">they shrink, right? </span><span class="line" data-startTime="2270">So that's actually </span><span class="line" data-startTime="2270">a great point. </span><span class="line" data-startTime="2272">I'll bring this up </span><span class="line" data-startTime="2272">really quick, too. </span><span class="line" data-startTime="2274">How many of you have </span><span class="line" data-startTime="2274">responsive websites? </span><span class="line" data-startTime="2278">OK, you're doing it wrong. </span><span class="line" data-startTime="2281">Let me ask that in a better way. </span><span class="line" data-startTime="2282">How many of your </span><span class="line" data-startTime="2282">responsive websites </span><span class="line" data-startTime="2284">will actually resize the </span><span class="line" data-startTime="2284">image that you've been given? </span><span class="line" data-startTime="2290">Jake. </span></p>

<p class="speaker"><span class="line" data-starttime="2290"><span class="speakerName">Audience</span>: What do you </span><span class="line" data-startTime="2290">mean by resizing it? </span></p>

<p class="speaker"><span class="line" data-starttime="2292"><span class="speakerName">Colt McAnlis</span>: You </span><span class="line" data-startTime="2292">got a CSS resize. </span> <span class="line" data-startTime="2293">Are you changing the </span><span class="line" data-startTime="2293">properties of it? </span><span class="line" data-startTime="2296">If it comes down as 1024 </span><span class="line" data-startTime="2296">by pixels by 1024 pixels, </span><span class="line" data-startTime="2299">and you display it as </span><span class="line" data-startTime="2299">900 pixels by 900 pixels, </span><span class="line" data-startTime="2303">or something like </span><span class="line" data-startTime="2303">that, anybody resizing? </span><span class="line" data-startTime="2305">You're telling me </span><span class="line" data-startTime="2305">every single one of you </span><span class="line" data-startTime="2307">gives exactly the right pixel </span><span class="line" data-startTime="2307">ratio for every single device </span><span class="line" data-startTime="2310">that loads your website. </span> <span class="line" data-startTime="2311">Is that what I'm hearing? </span><span class="line" data-startTime="2313">All right, that guy's </span><span class="line" data-startTime="2313">hiding his face, </span><span class="line" data-startTime="2314">so I know he's doing it wrong. </span> <span class="line" data-startTime="2315">You know what? </span><span class="line" data-startTime="2315">At least you're honest, brother. </span></p>

<p><span class="line" data-startTime="2316">I got some swag </span><span class="line" data-startTime="2316">for you after this. </span> <span class="line" data-startTime="2318">So here's something a </span><span class="line" data-startTime="2318">lot of you don't know. </span> <span class="line" data-startTime="2321">Decoding a JPEG or a PNG </span><span class="line" data-startTime="2321">or a WebP file actually </span><span class="line" data-startTime="2326">takes time from your CPU. </span> <span class="line" data-startTime="2327">And in fact, you know </span><span class="line" data-startTime="2327">how I was talking </span><span class="line" data-startTime="2328">about those tiles </span><span class="line" data-startTime="2328">getting rasterized? </span><span class="line" data-startTime="2330">What happens is before a </span><span class="line" data-startTime="2330">tile can be rasterized, </span><span class="line" data-startTime="2333">Chrome actually has </span><span class="line" data-startTime="2333">to go decompress </span><span class="line" data-startTime="2335">all the images that </span><span class="line" data-startTime="2335">are in that tile. </span> <span class="line" data-startTime="2338">Now when that tile is </span><span class="line" data-startTime="2338">evicted from the cache, </span><span class="line" data-startTime="2341">we're going to have to repaint </span><span class="line" data-startTime="2341">it again sometime later. </span> <span class="line" data-startTime="2343">Well, lo and behold, </span><span class="line" data-startTime="2343">there's actually </span><span class="line" data-startTime="2346">a texture decompression </span><span class="line" data-startTime="2346">cache as well. </span> <span class="line" data-startTime="2348">So there's a chance, a very </span><span class="line" data-startTime="2348">high, high, high chance </span><span class="line" data-startTime="2351">on mobile devices, that we'll </span><span class="line" data-startTime="2351">actually decompress a JPEG file </span><span class="line" data-startTime="2355">and then have to resize the </span><span class="line" data-startTime="2355">uncompressed version of it. </span> <span class="line" data-startTime="2360">So you're actually getting full </span><span class="line" data-startTime="2360">32-bit pixels actually being </span><span class="line" data-startTime="2362">resized from 1024 to 512. </span></p>

<p><span class="line" data-startTime="2365">And then the next time you </span><span class="line" data-startTime="2365">have to render that image, </span><span class="line" data-startTime="2367">you have to decompress </span><span class="line" data-startTime="2367">it and resize it again. </span> <span class="line" data-startTime="2370">So if an image is split </span><span class="line" data-startTime="2370">between two tiles, </span><span class="line" data-startTime="2372">you can run into a </span><span class="line" data-startTime="2372">very awkward situation </span><span class="line" data-startTime="2375">where you have to decode and </span><span class="line" data-startTime="2375">resize that image for each tile </span><span class="line" data-startTime="2379">that it's split in. </span> <span class="line" data-startTime="2381">So if you're resizing your </span><span class="line" data-startTime="2381">images dynamically right now, </span><span class="line" data-startTime="2385">this could be a </span><span class="line" data-startTime="2385">problem for your site. </span> <span class="line" data-startTime="2388">Hopefully, some of you &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2389"><span class="speakerName">Audience</span>: [INAUDIBLE], should </span><span class="line" data-startTime="2389">we not do dynamic websites? </span></p>

<p class="speaker"><span class="line" data-starttime="2393"><span class="speakerName">Colt McAnlis</span>: Save the </span><span class="line" data-startTime="2393">questions for the end. </span></p>

<p class="speaker"><span class="line" data-starttime="2395"><span class="speakerName">Audience</span>: OK, sorry. </span></p>

<p class="speaker"><span class="line" data-starttime="2395"><span class="speakerName">Colt McAnlis</span>: I </span><span class="line" data-startTime="2395">said it to that guy. </span> <span class="line" data-startTime="2396">I gotta say it to you, too. </span> <span class="line" data-startTime="2398">Was that because I </span><span class="line" data-startTime="2398">called you Forecastio? </span><span class="line" data-startTime="2400">OK. </span> <span class="line" data-startTime="2400">That's all right. </span> <span class="line" data-startTime="2401">Much love. </span> <span class="line" data-startTime="2403">Anyhow, so I think </span><span class="line" data-startTime="2403">we kind of see </span><span class="line" data-startTime="2405">that this website </span><span class="line" data-startTime="2405">has some issues. </span> <span class="line" data-startTime="2407">And most of it is </span><span class="line" data-startTime="2407">on the Network tab. </span> <span class="line" data-startTime="2409">Let me go ahead and turn </span><span class="line" data-startTime="2409">on continuous show paint </span><span class="line" data-startTime="2413">rectangles as well, because </span><span class="line" data-startTime="2413">I want to show this off too. </span> <span class="line" data-startTime="2417">So see that red rectangle? </span><span class="line" data-startTime="2418">So you can kind of </span><span class="line" data-startTime="2418">see this little one. </span> <span class="line" data-startTime="2419">Let me show it on </span><span class="line" data-startTime="2419">the screen here. </span></p>

<p><span class="line" data-startTime="2420">You can see this will pop it up. </span> <span class="line" data-startTime="2422">But watch this red rectangle </span><span class="line" data-startTime="2422">happen full screen. </span> <span class="line" data-startTime="2424">Did you </span><span class="line" data-startTime="2425">See that? </span><span class="line" data-startTime="2425">See that again? </span><span class="line" data-startTime="2427">Poom, poom, poomp. </span> <span class="line" data-startTime="2428">Poom, poom, poom. </span> <span class="line" data-startTime="2429">I see this almost on every </span><span class="line" data-startTime="2429">single site on this list. </span> <span class="line" data-startTime="2432">Basically, they've </span><span class="line" data-startTime="2432">got a marquee on top. </span> <span class="line" data-startTime="2434">And that marquee, </span><span class="line" data-startTime="2434">for some reason, </span><span class="line" data-startTime="2436">is actually invalidating the </span><span class="line" data-startTime="2436">entire page below it as well. </span> <span class="line" data-startTime="2440">So the actual div that's </span><span class="line" data-startTime="2440">expanding this thing that's </span><span class="line" data-startTime="2444">getting repainted is touching </span><span class="line" data-startTime="2444">every single pixel on the page. </span> <span class="line" data-startTime="2448">Which means that even sitting </span><span class="line" data-startTime="2448">here doing nothing, actually </span><span class="line" data-startTime="2450">the CPUs just sitting </span><span class="line" data-startTime="2450">here spinning and spinning </span><span class="line" data-startTime="2452">and spinning and spinning </span><span class="line" data-startTime="2452">and working and working. </span> <span class="line" data-startTime="2454">And that's actually going to </span><span class="line" data-startTime="2454">make scrolling not as smooth </span><span class="line" data-startTime="2456">as possible. </span></p>

<p><span class="line" data-startTime="2457">And you can't see it. </span> <span class="line" data-startTime="2458">I can feel it a little bit here. </span> <span class="line" data-startTime="2460">This is actually a </span><span class="line" data-startTime="2460">pretty janky website. </span> <span class="line" data-startTime="2461">Up at the top, it says that our </span><span class="line" data-startTime="2461">average frame rate right now </span><span class="line" data-startTime="2464">is about 18 frames a </span><span class="line" data-startTime="2464">second, 17 frames a second. </span> <span class="line" data-startTime="2468">I can actually really </span><span class="line" data-startTime="2468">feel this on mobile. </span> <span class="line" data-startTime="2471">Now I have 30 minutes. </span> <span class="line" data-startTime="2472">Yes. </span> <span class="line" data-startTime="2473">15 minutes of filler. </span> <span class="line" data-startTime="2475">So obviously, this is a problem. </span> <span class="line" data-startTime="2477">And because when I see </span><span class="line" data-startTime="2477">something dynamic like this, </span><span class="line" data-startTime="2478">I generally think that memory </span><span class="line" data-startTime="2478">is going wonky as well. </span></p>

<p><span class="line" data-startTime="2481">So let's go ahead and do a </span><span class="line" data-startTime="2481">timeline and hit Record again. </span> <span class="line" data-startTime="2483">Let's see what's going on. </span> <span class="line" data-startTime="2488">We've seen this before, right? </span><span class="line" data-startTime="2490">Same pattern we saw </span><span class="line" data-startTime="2490">with the other site. </span> <span class="line" data-startTime="2492">We see just kind of memory, just </span><span class="line" data-startTime="2492">being allocated and allocated </span><span class="line" data-startTime="2495">and allocated and allocated. </span> <span class="line" data-startTime="2497">Let's hit Stop and see if </span><span class="line" data-startTime="2497">we can drill in and see </span><span class="line" data-startTime="2499">what the culprit is. </span> <span class="line" data-startTime="2499">Again, I know nothing </span><span class="line" data-startTime="2499">of these websites. </span> <span class="line" data-startTime="2502">I'm just a primitive </span><span class="line" data-startTime="2502">C++ developer. </span> <span class="line" data-startTime="2504">Your web development </span><span class="line" data-startTime="2504">scares and confuses me. </span> <span class="line" data-startTime="2507">So let's go to Profile, </span><span class="line" data-startTime="2507">and let's do a record heap </span><span class="line" data-startTime="2511">allocation. </span> <span class="line" data-startTime="2512">So we can see that </span><span class="line" data-startTime="2512">memory's a problem. </span></p>

<p><span class="line" data-startTime="2513">Now let's dig in a </span><span class="line" data-startTime="2513">little bit deeper. </span> <span class="line" data-startTime="2515">Let's record a heap allocation. </span> <span class="line" data-startTime="2517">OK. </span> <span class="line" data-startTime="2517">Again, I'm not touching </span><span class="line" data-startTime="2517">anything on the website, </span><span class="line" data-startTime="2519">and memory, 10K, 5K, 10K, 5K. </span> <span class="line" data-startTime="2522">Let's hit Stop. </span> <span class="line" data-startTime="2525">Let's try to drill in </span><span class="line" data-startTime="2525">here on one of these guys. </span> <span class="line" data-startTime="2528">Let's just look at this one. </span> <span class="line" data-startTime="2529">Compiled code. </span> <span class="line" data-startTime="2531">Looks familiar again. </span> <span class="line" data-startTime="2533">Oh, wow. </span> <span class="line" data-startTime="2534">It's almost like we've seen </span><span class="line" data-startTime="2534">this exact three lines of code </span><span class="line" data-startTime="2537">before. </span> <span class="line" data-startTime="2538">So again, I know </span><span class="line" data-startTime="2538">nothing of this website. </span> <span class="line" data-startTime="2540">I haven't even looked </span><span class="line" data-startTime="2540">at the source code yet. </span> <span class="line" data-startTime="2542">But something in here is </span><span class="line" data-startTime="2542">already passing a closure </span><span class="line" data-startTime="2544">to a set timeout &mdash; or </span><span class="line" data-startTime="2544">a set interval, sorry. </span> <span class="line" data-startTime="2546">Set timeout is a different </span><span class="line" data-startTime="2546">operating system. </span></p>

<p><span class="line" data-startTime="2548">But there's some other </span><span class="line" data-startTime="2548">stuff going on in here, too. </span> <span class="line" data-startTime="2550">It looks like some other </span><span class="line" data-startTime="2550">relocation info is going on. </span> <span class="line" data-startTime="2553">I don't see any </span><span class="line" data-startTime="2553">injections, which is good. </span> <span class="line" data-startTime="2555">So no one's calling eval, </span><span class="line" data-startTime="2555">because otherwise we'd probably </span><span class="line" data-startTime="2557">see this 6K worth of </span><span class="line" data-startTime="2557">information &mdash; someone laughed. </span> <span class="line" data-startTime="2560">That's probably good. </span> <span class="line" data-startTime="2561">Eval is bad, and </span><span class="line" data-startTime="2561">you should feel bad. </span> <span class="line" data-startTime="2563">So if you're using closures </span><span class="line" data-startTime="2563">and eval, just get out. </span> <span class="line" data-startTime="2565">Just get out, dude. </span> <span class="line" data-startTime="2569">I'm going to see a tweet. </span> <span class="line" data-startTime="2570">Colt says, use set interval with </span><span class="line" data-startTime="2570">closure and eval #permatters. </span></p>

<p><span class="line" data-startTime="2575">Yeah, with a WOFF, </span><span class="line" data-startTime="2575">inside of a WOFF. </span> <span class="line" data-startTime="2577">By the way, I saw </span><span class="line" data-startTime="2577">someone the other day </span><span class="line" data-startTime="2578">that actually had a WOFF </span><span class="line" data-startTime="2578">embedded inside of a CSS. </span> <span class="line" data-startTime="2581">And I was like, OK. </span> <span class="line" data-startTime="2582">That's just a bad idea </span><span class="line" data-startTime="2582">from all principles. </span> <span class="line" data-startTime="2584">So the CSS gets bloated, and </span><span class="line" data-startTime="2584">then the WOFF has to be &mdash; </span><span class="line" data-startTime="2588">Anyhow, we see that this </span><span class="line" data-startTime="2588">other part is an array. </span> <span class="line" data-startTime="2590">Now this is interesting. </span> <span class="line" data-startTime="2591">So when you see </span><span class="line" data-startTime="2591">this array object, </span><span class="line" data-startTime="2592">this means this is an </span><span class="line" data-startTime="2592">actual JavaScript array that </span><span class="line" data-startTime="2594">is allocated </span><span class="line" data-startTime="2594">somewhere on the page. </span> <span class="line" data-startTime="2596">And you can see </span><span class="line" data-startTime="2596">some of it is coming </span><span class="line" data-startTime="2597">from internal with V8, </span><span class="line" data-startTime="2597">the code deopt data. </span> <span class="line" data-startTime="2600">But otherwise, the relocation </span><span class="line" data-startTime="2600">info, here's like a null. </span></p>

<p><span class="line" data-startTime="2603">A null array is just being </span><span class="line" data-startTime="2603">created for no reason, </span><span class="line" data-startTime="2606">and no items are </span><span class="line" data-startTime="2606">being added to it. </span> <span class="line" data-startTime="2608">We can go down here </span><span class="line" data-startTime="2608">to string, and we </span><span class="line" data-startTime="2610">can see a GM string has </span><span class="line" data-startTime="2610">been created somewhere. </span> <span class="line" data-startTime="2613">Let's scroll this up. </span> <span class="line" data-startTime="2614">Do we have any information? </span></p>

<p class="speaker"><span class="line" data-starttime="2615"><span class="speakerName">Audience</span>: [INAUDIBLE] </span></p>

<p class="speaker"><span class="line" data-starttime="2617"><span class="speakerName">Colt McAnlis</span>: Yeah. </span> <span class="line" data-startTime="2617">Yeah, that's what's </span><span class="line" data-startTime="2617">going on right here. </span> <span class="line" data-startTime="2619">So there's regex </span><span class="line" data-startTime="2619">occurring somewhere. </span> <span class="line" data-startTime="2621">A GM is being created. </span> <span class="line" data-startTime="2621">And then there's some </span><span class="line" data-startTime="2621">system level stuff. </span> <span class="line" data-startTime="2623">This is mostly </span><span class="line" data-startTime="2623">dragons and krakens </span><span class="line" data-startTime="2625">and other things going </span><span class="line" data-startTime="2625">on under the hood. </span> <span class="line" data-startTime="2627">If we expand this </span><span class="line" data-startTime="2627">a little bit, we </span><span class="line" data-startTime="2628">can actually slide over and </span><span class="line" data-startTime="2628">see, again, compiled code. </span> <span class="line" data-startTime="2632">There's another relocation info. </span> <span class="line" data-startTime="2634">Let's see if there's </span><span class="line" data-startTime="2634">a deopt this time. </span></p>

<p><span class="line" data-startTime="2635">No? </span><span class="line" data-startTime="2636">That makes sense because </span><span class="line" data-startTime="2636">the spike's not as high. </span> <span class="line" data-startTime="2638">See around this guy. </span> <span class="line" data-startTime="2639">Compiled code, relocation. </span> <span class="line" data-startTime="2641">Yep, spike's not as high again. </span> <span class="line" data-startTime="2642">So again, deopt </span><span class="line" data-startTime="2642">is actually what's </span><span class="line" data-startTime="2643">causing the memory spike here. </span> <span class="line" data-startTime="2644">And then of course, that's </span><span class="line" data-startTime="2644">causing inflation in our heap. </span> <span class="line" data-startTime="2647">So we can actually see </span><span class="line" data-startTime="2647">there's a couple problems. </span> <span class="line" data-startTime="2648">Obviously, they're sending </span><span class="line" data-startTime="2648">too much data down the pipe. </span> <span class="line" data-startTime="2650">This page is loading slowly. </span> <span class="line" data-startTime="2651">The person should feel bad. </span></p>

<p><span class="line" data-startTime="2653">They've also got some </span><span class="line" data-startTime="2653">timers and some closures </span><span class="line" data-startTime="2655">and some memory leak </span><span class="line" data-startTime="2655">issues that are causing </span><span class="line" data-startTime="2657">some friction with their users. </span> <span class="line" data-startTime="2658">Let's load another site. </span> <span class="line" data-startTime="2664">Here we go. </span> <span class="line" data-startTime="2665">Try this one. </span> <span class="line" data-startTime="2667">Chrome always, thank you. </span> <span class="line" data-startTime="2669">All right, So </span><span class="line" data-startTime="2669">let's see this one. </span> <span class="line" data-startTime="2671">Who thinks this is </span><span class="line" data-startTime="2671">going to be a fast site? </span><span class="line" data-startTime="2673">Show of hands. </span> <span class="line" data-startTime="2674">No hands. </span> <span class="line" data-startTime="2675">Good job. </span> <span class="line" data-startTime="2676">You win. </span> <span class="line" data-startTime="2678">I like the spinner. </span> <span class="line" data-startTime="2679">We're trying to load. </span> <span class="line" data-startTime="2681">We're letting you know that </span><span class="line" data-startTime="2681">we don't know how to do this. </span> <span class="line" data-startTime="2683">Oh, sorry. </span> <span class="line" data-startTime="2684">That was below the belt. </span></p>

<p><span class="line" data-startTime="2685">Oh, I'm sorry. </span> <span class="line" data-startTime="2685">I'm sorry. </span> <span class="line" data-startTime="2686">[LAUGHTER] </span></p>

<p class="speaker"><span class="line" data-starttime="2690"><span class="speakerName">Colt McAnlis</span>: I'm sorry. </span><span class="line" data-startTime="2691">I thought it was a good idea. </span><span class="line" data-startTime="2692">We see it in Gmail. </span><span class="line" data-startTime="2693">I don't know. </span><span class="line" data-startTime="2694">It's kind of like, </span><span class="line" data-startTime="2694">hey, we're not </span><span class="line" data-startTime="2696">ready to figure out how </span><span class="line" data-startTime="2696">to stream content yet. </span><span class="line" data-startTime="2698">We saw load. </span><span class="line" data-startTime="2699">That was good. </span><span class="line" data-startTime="2700">So let's do this again. </span><span class="line" data-startTime="2701">Or actually, let </span><span class="line" data-startTime="2701">me show &mdash; scrolling </span><span class="line" data-startTime="2704">doesn't seem that bad. </span><span class="line" data-startTime="2706">Let's click on something. </span><span class="line" data-startTime="2709">That was actually pretty fast. </span><span class="line" data-startTime="2710">That was actually </span><span class="line" data-startTime="2710">a little too fast. </span><span class="line" data-startTime="2712">Hold on. </span><span class="line" data-startTime="2713">Wait a minute. </span><span class="line" data-startTime="2715">Let me go back. </span><span class="line" data-startTime="2716">OK, I'm back [INAUDIBLE]. </span><span class="line" data-startTime="2717">Let me click on something else. </span><span class="line" data-startTime="2718">Like, trust no one. </span><span class="line" data-startTime="2719">I don't trust anybody. </span><span class="line" data-startTime="2722">Wow, that actually loaded a </span><span class="line" data-startTime="2722">lot faster on the main site. </span><span class="line" data-startTime="2724">Let's drill in here. </span><span class="line" data-startTime="2726">Hold on. </span></p>

<p class="speaker"><span class="line" data-starttime="2726"><span class="speakerName">Audience</span>: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="2727"><span class="speakerName">Colt McAnlis</span>: No, no. </span><span class="line" data-startTime="2730">Dude, you're messing it up. </span><span class="line" data-startTime="2733">Jake, who's got the microphone? </span></p>

<p class="speaker"><span class="line" data-starttime="2734"><span class="speakerName">Audience</span>: I'm sorry. </span></p>

<p class="speaker"><span class="line" data-starttime="2736"><span class="speakerName">Colt McAnlis</span>: I didn't </span><span class="line" data-startTime="2736">interrupt your talk. </span> <span class="line" data-startTime="2739">So let's take a </span><span class="line" data-startTime="2739">look at this here. </span> <span class="line" data-startTime="2740">So I'm going to </span><span class="line" data-startTime="2740">go to Network tab, </span><span class="line" data-startTime="2743">and I'm going to hit </span><span class="line" data-startTime="2743">Reload again here. </span> <span class="line" data-startTime="2744">Boom. </span> <span class="line" data-startTime="2746">We're going to take </span><span class="line" data-startTime="2746">a look at this. </span> <span class="line" data-startTime="2747">Let's see what's going on. </span> <span class="line" data-startTime="2748">So it was really weird. </span> <span class="line" data-startTime="2749">The main page loaded slow. </span> <span class="line" data-startTime="2750">That was awkward. </span> <span class="line" data-startTime="2751">But then all subsequent </span><span class="line" data-startTime="2751">clicks loaded actually really, </span><span class="line" data-startTime="2754">really, really </span><span class="line" data-startTime="2754">fast, which tells us </span><span class="line" data-startTime="2756">if you can't get </span><span class="line" data-startTime="2756">the main page right, </span><span class="line" data-startTime="2758">why are you getting </span><span class="line" data-startTime="2758">the sub clicks right? </span><span class="line" data-startTime="2759">That's kind of awkward. </span></p>

<p><span class="line" data-startTime="2761">So we're still loading. </span> <span class="line" data-startTime="2762">We're still loading. </span> <span class="line" data-startTime="2763">We're still loading. </span> <span class="line" data-startTime="2764">Again, I always </span><span class="line" data-startTime="2764">sort by size, right? </span><span class="line" data-startTime="2766">Because I'm a big dude </span><span class="line" data-startTime="2766">who says that memory </span><span class="line" data-startTime="2769">is where the performance </span><span class="line" data-startTime="2769">problems are. </span> <span class="line" data-startTime="2772">We can actually see </span><span class="line" data-startTime="2772">that they're loading &mdash; </span><span class="line" data-startTime="2776">and I'll kind of give </span><span class="line" data-startTime="2776">away the punch line here. </span> <span class="line" data-startTime="2779">But these images were on the </span><span class="line" data-startTime="2779">sub pages, not the main page. </span> <span class="line" data-startTime="2783">But they're being </span><span class="line" data-startTime="2783">loaded on the main page. </span> <span class="line" data-startTime="2787">Anyone figure it out yet? </span><span class="line" data-startTime="2788">Basically, what they're </span><span class="line" data-startTime="2788">doing is they're </span><span class="line" data-startTime="2789">loading all of the images </span><span class="line" data-startTime="2789">for all of the articles </span><span class="line" data-startTime="2792">that you would click to before </span><span class="line" data-startTime="2792">the main page is loaded. </span> <span class="line" data-startTime="2796">So they're basically </span><span class="line" data-startTime="2796">trading off. </span></p>

<p><span class="line" data-startTime="2798">They're saying, your </span><span class="line" data-startTime="2798">initial load time </span><span class="line" data-startTime="2800">is going to be really </span><span class="line" data-startTime="2800">crummy, but every click </span><span class="line" data-startTime="2801">after that's going to be golden. </span> <span class="line" data-startTime="2803">So they're kind of giving up </span><span class="line" data-startTime="2803">that initial three second load </span><span class="line" data-startTime="2805">time to get one second </span><span class="line" data-startTime="2805">load times later. </span> <span class="line" data-startTime="2807">I don't know how that &mdash; </span><span class="line" data-startTime="2807">maybe that's a discussion. </span> <span class="line" data-startTime="2809">Again, here's a WOFF. </span> <span class="line" data-startTime="2811">Anyone like WOFFs now? </span><span class="line" data-startTime="2813">Answer should be no. </span> <span class="line" data-startTime="2814">But yeah, this is </span><span class="line" data-startTime="2814">really interesting </span><span class="line" data-startTime="2815">that we're seeing </span><span class="line" data-startTime="2815">some of these images. </span> <span class="line" data-startTime="2816">Let me see if I </span><span class="line" data-startTime="2816">can sort this again </span><span class="line" data-startTime="2818">and see if we can't get </span><span class="line" data-startTime="2818">better &mdash; here's another PNG. </span> <span class="line" data-startTime="2821">Again, this is not </span><span class="line" data-startTime="2821">on the main page. </span></p>

<p><span class="line" data-startTime="2823">So let me hit Back here. </span> <span class="line" data-startTime="2824">And let me, again, let's </span><span class="line" data-startTime="2824">show you the main page here. </span> <span class="line" data-startTime="2829">Even clicking Back </span><span class="line" data-startTime="2829">takes some time. </span> <span class="line" data-startTime="2834">No? </span><span class="line" data-startTime="2836">Backie? </span><span class="line" data-startTime="2839">No, I guess not. </span></p>

<p class="speaker"><span class="line" data-starttime="2840"><span class="speakerName">Audience</span>: You can't go there. </span></p>

<p class="speaker"><span class="line" data-starttime="2841"><span class="speakerName">Colt McAnlis</span>: We're stuck now. </span> <span class="line" data-startTime="2843">There we go. </span> <span class="line" data-startTime="2845">So yeah, notice this right here. </span> <span class="line" data-startTime="2846">So this was one of the </span><span class="line" data-startTime="2846">last things I clicked on, </span><span class="line" data-startTime="2848">and they have a </span><span class="line" data-startTime="2848">little drop down. </span> <span class="line" data-startTime="2850">So basically each one of </span><span class="line" data-startTime="2850">these items, the images </span><span class="line" data-startTime="2853">and the extra content is </span><span class="line" data-startTime="2853">loaded in the main page, not </span><span class="line" data-startTime="2857">the subsequent page. </span> <span class="line" data-startTime="2858">We're kind of seeing that break </span><span class="line" data-startTime="2858">down in a lot of these charts </span><span class="line" data-startTime="2860">here. </span> <span class="line" data-startTime="2864">So they have a couple lower </span><span class="line" data-startTime="2864">res versions here, too. </span> <span class="line" data-startTime="2867">So remember when that 100 pixel </span><span class="line" data-startTime="2867">by 100 pixel Facebook icon </span><span class="line" data-startTime="2871">was 9K? </span><span class="line" data-startTime="2873">Here's a 320 by 180 that's 10K. </span></p>

<p><span class="line" data-startTime="2875">So again, don't trust </span><span class="line" data-startTime="2875">your Facebook icons. </span> <span class="line" data-startTime="2877">I would like to say, </span><span class="line" data-startTime="2877">don't trust Facebook, </span><span class="line" data-startTime="2879">but I'm not allowed </span><span class="line" data-startTime="2879">to say that on camera. </span> <span class="line" data-startTime="2881">Shit. </span> <span class="line" data-startTime="2883">Sorry. </span> <span class="line" data-startTime="2884">Again, perfect. </span> <span class="line" data-startTime="2886">Here's a 320 by 180 </span><span class="line" data-startTime="2886">that's exactly 9.1K. </span> <span class="line" data-startTime="2889">So again, I think all of </span><span class="line" data-startTime="2889">you should be questioning </span><span class="line" data-startTime="2891">how big your images </span><span class="line" data-startTime="2891">are, but I think </span><span class="line" data-startTime="2893">this Quartz site is actually </span><span class="line" data-startTime="2893">kind of an interesting case </span><span class="line" data-startTime="2895">study because they've </span><span class="line" data-startTime="2895">definitely traded off </span><span class="line" data-startTime="2897">one type of load time for </span><span class="line" data-startTime="2897">another type of load time. </span> <span class="line" data-startTime="2901">And I'm not really </span><span class="line" data-startTime="2901">sure why or where </span><span class="line" data-startTime="2904">the justifications of that are. </span></p>

<p><span class="line" data-startTime="2906">But I think we </span><span class="line" data-startTime="2906">can definitely all </span><span class="line" data-startTime="2908">agree that the 20 years </span><span class="line" data-startTime="2908">that we've had on the web </span><span class="line" data-startTime="2910">have all kind of accumulated </span><span class="line" data-startTime="2910">that the initial load time is </span><span class="line" data-startTime="2913">pretty much the most </span><span class="line" data-startTime="2913">important thing because that's </span><span class="line" data-startTime="2915">the first thing your user feels. </span> <span class="line" data-startTime="2917">None of you have seen this </span><span class="line" data-startTime="2917">site except for the one guy who </span><span class="line" data-startTime="2919">submitted it, and all of you </span><span class="line" data-startTime="2919">felt the pain of this site </span><span class="line" data-startTime="2922">loading for me hitting a button. </span> <span class="line" data-startTime="2924">And it doesn't matter how much </span><span class="line" data-startTime="2924">the clicks after that are. </span> <span class="line" data-startTime="2926">Most of us would have left the </span><span class="line" data-startTime="2926">site before we got to that. </span> <span class="line" data-startTime="2928">Let me go over here, too. </span> <span class="line" data-startTime="2930">I want to show this. </span></p>

<p><span class="line" data-startTime="2931">So notice this &mdash; </span><span class="line" data-startTime="2931">oh, I moved now. </span> <span class="line" data-startTime="2934">But this YouTube image here. </span> <span class="line" data-startTime="2937">So if I click this </span><span class="line" data-startTime="2937">button, you'll </span><span class="line" data-startTime="2938">see the red boxes again </span><span class="line" data-startTime="2938">kind of show up here. </span> <span class="line" data-startTime="2941">So we can actually see that the </span><span class="line" data-startTime="2941">video &mdash; that part of the page </span><span class="line" data-startTime="2945">is being re-rendered. </span> <span class="line" data-startTime="2948">So you can see again that </span><span class="line" data-startTime="2948">it's showing that the &mdash; </span><span class="line" data-startTime="2950">[VIDEO PLAYBACK] </span></p>

<p class="speaker"><span class="line" data-starttime="2950"><span class="speakerName">Colt McAnlis</span>: Nope. </span> <span class="line" data-startTime="2951">Don't care. </span> <span class="line" data-startTime="2951">Don't care. </span> <span class="line" data-startTime="2953">Nope, done. </span> <span class="line" data-startTime="2954">Stop. </span> <span class="line" data-startTime="2955">Stop. </span> <span class="line" data-startTime="2956">Let me click. </span> <span class="line" data-startTime="2957">Done. </span> <span class="line" data-startTime="2958">What I'd really </span><span class="line" data-startTime="2958">like to show here, </span><span class="line" data-startTime="2959">and this isn't really showing </span><span class="line" data-startTime="2959">up on the main screen, </span><span class="line" data-startTime="2961">and I'm sorry. </span> <span class="line" data-startTime="2962">But can anyone see </span><span class="line" data-startTime="2962">this orange line </span><span class="line" data-startTime="2963">right here, this orange line? </span><span class="line" data-startTime="2965">So one of the other </span><span class="line" data-startTime="2965">interesting things, </span><span class="line" data-startTime="2966">there's a talk that I gave at </span><span class="line" data-startTime="2966">Google I/O this year on this. </span> <span class="line" data-startTime="2969">It's called "Web Page Design </span><span class="line" data-startTime="2969">with the GPU in Mind." </span><span class="line" data-startTime="2973">So what happens is </span><span class="line" data-startTime="2973">certain elements on a page </span><span class="line" data-startTime="2976">are kind of &mdash; imagine </span><span class="line" data-startTime="2976">your page is a plane, </span><span class="line" data-startTime="2978">and all of your images </span><span class="line" data-startTime="2978">and all of your text </span><span class="line" data-startTime="2980">exist on this plane. </span> <span class="line" data-startTime="2981">Some of those </span><span class="line" data-startTime="2981">things are actually </span><span class="line" data-startTime="2982">propagated to its own plane so </span><span class="line" data-startTime="2982">that the web page can actually </span><span class="line" data-startTime="2986">scroll in the background, </span><span class="line" data-startTime="2986">and this other plane </span><span class="line" data-startTime="2989">can actually scroll </span><span class="line" data-startTime="2989">relative to it. </span></p>

<p><span class="line" data-startTime="2991">So this is relative </span><span class="line" data-startTime="2991">scrolling concept. </span> <span class="line" data-startTime="2993">Let me actually show you </span><span class="line" data-startTime="2993">this on a big screen here. </span> <span class="line" data-startTime="2996">Let me load up HTML5 Rocks. </span> <span class="line" data-startTime="3001">And let's &mdash; nope, I </span><span class="line" data-startTime="3001">typed in the wrong thing. </span> <span class="line" data-startTime="3006">Because I can type. </span> <span class="line" data-startTime="3011">Who's on my internet? </span><span class="line" data-startTime="3017">Watch my Wi-Fi go down now. </span> <span class="line" data-startTime="3021">We'll try that. </span> <span class="line" data-startTime="3022">There we go. </span> <span class="line" data-startTime="3024">So I'm going to pick this, </span><span class="line" data-startTime="3024">just a random article </span><span class="line" data-startTime="3027">with some random guy on it. </span> <span class="line" data-startTime="3030">Some random, good-looking guy. </span> <span class="line" data-startTime="3031">I think he's pretty </span><span class="line" data-startTime="3031">good-looking. </span> <span class="line" data-startTime="3032">Bald is beautiful, I hear. </span> <span class="line" data-startTime="3034">So let's go ahead </span><span class="line" data-startTime="3034">and turn on &mdash; this </span><span class="line" data-startTime="3036">is Chrome DevTools </span><span class="line" data-startTime="3036">on a desktop site. </span> <span class="line" data-startTime="3037">I know I wasn't going </span><span class="line" data-startTime="3037">to talk about this, </span><span class="line" data-startTime="3039">but let's do force accelerated </span><span class="line" data-startTime="3039">and show composite layer </span><span class="line" data-startTime="3042">borders. </span> <span class="line" data-startTime="3043">So turning on layer </span><span class="line" data-startTime="3043">borders here shows us </span><span class="line" data-startTime="3044">what we're seeing normally. </span></p>

<p><span class="line" data-startTime="3046">The first thing you see is </span><span class="line" data-startTime="3046">that the blue lines here </span><span class="line" data-startTime="3049">actually represent the </span><span class="line" data-startTime="3049">tiling of the page. </span> <span class="line" data-startTime="3051">And this orange line </span><span class="line" data-startTime="3051">actually represents </span><span class="line" data-startTime="3053">something that's been </span><span class="line" data-startTime="3053">promoted to its own layer. </span> <span class="line" data-startTime="3055">So how many of you </span><span class="line" data-startTime="3055">are using translateZ? </span><span class="line" data-startTime="3057">TranslateZ, translate3d, </span><span class="line" data-startTime="3057">this is the hardware </span><span class="line" data-startTime="3060">accelerated fast path, </span><span class="line" data-startTime="3060">the silver bullet that </span><span class="line" data-startTime="3063">makes your web fast </span><span class="line" data-startTime="3063">because you're suddenly </span><span class="line" data-startTime="3064">using the GPU on the web. </span> <span class="line" data-startTime="3066">It's so amazing. </span> <span class="line" data-startTime="3067">Actually, that's </span><span class="line" data-startTime="3067">not how it works. </span> <span class="line" data-startTime="3069">What happens is when you use </span><span class="line" data-startTime="3069">translateZ or translate3d, </span><span class="line" data-startTime="3072">you're actually promoting </span><span class="line" data-startTime="3072">these pieces of content </span><span class="line" data-startTime="3074">to its own plane. </span> <span class="line" data-startTime="3075">And this is actually a </span><span class="line" data-startTime="3075">separate set of tiles. </span> <span class="line" data-startTime="3077">So remember how I said </span><span class="line" data-startTime="3077">the GPU will actually </span><span class="line" data-startTime="3079">scroll your tiles on the screen? </span><span class="line" data-startTime="3081">When you actually </span><span class="line" data-startTime="3081">use translateZ, </span><span class="line" data-startTime="3083">you get another layer that </span><span class="line" data-startTime="3083">the GPU also controls. </span> <span class="line" data-startTime="3085">Now I'm going to see if I can </span><span class="line" data-startTime="3085">do this because for some reason, </span><span class="line" data-startTime="3088">we get paused in the </span><span class="line" data-startTime="3088">debug &mdash; too much clicking. </span> <span class="line" data-startTime="3091">So as I scroll here, notice </span><span class="line" data-startTime="3091">how these objects on the side &mdash; </span><span class="line" data-startTime="3098">watch this. </span></p>

<p><span class="line" data-startTime="3098">The table of contents </span><span class="line" data-startTime="3098">has not orange, right? </span><span class="line" data-startTime="3101">And so once it gets </span><span class="line" data-startTime="3101">to a certain part, </span><span class="line" data-startTime="3103">it actually gets promoted </span><span class="line" data-startTime="3103">to its own layer. </span> <span class="line" data-startTime="3105">The orange border represents </span><span class="line" data-startTime="3105">different layers in GPU memory. </span> <span class="line" data-startTime="3109">And then as I scroll </span><span class="line" data-startTime="3109">down the page, </span><span class="line" data-startTime="3111">they actually stay static. </span> <span class="line" data-startTime="3112">Any time you have relative </span><span class="line" data-startTime="3112">scrolling content on your page, </span><span class="line" data-startTime="3114">you're actually going </span><span class="line" data-startTime="3114">to want to promote it </span><span class="line" data-startTime="3116">with this translateZ </span><span class="line" data-startTime="3116">or translate3d. </span> <span class="line" data-startTime="3118">Now beware that this actually </span><span class="line" data-startTime="3118">puts a lot of pressure </span><span class="line" data-startTime="3121">on your GPU. </span> <span class="line" data-startTime="3121">So for all of you </span><span class="line" data-startTime="3121">who are just going </span><span class="line" data-startTime="3123">to start putting translateZ </span><span class="line" data-startTime="3123">on every part of your pagee &mdash; </span><span class="line" data-startTime="3126">we saw this happen </span><span class="line" data-startTime="3126">a lot because it </span><span class="line" data-startTime="3127">was supposed to be </span><span class="line" data-startTime="3127">a silver bullet &mdash; </span><span class="line" data-startTime="3129">every one of these tiles, </span><span class="line" data-startTime="3129">every one of these layers, </span><span class="line" data-startTime="3131">is actually contending for </span><span class="line" data-startTime="3131">residency inside of your GPU </span><span class="line" data-startTime="3134">cache. </span> <span class="line" data-startTime="3135">Which means the more of </span><span class="line" data-startTime="3135">these separate layers </span><span class="line" data-startTime="3136">that you've actually promoted, </span><span class="line" data-startTime="3136">the slower your website </span><span class="line" data-startTime="3139">is going to be. </span></p>

<p><span class="line" data-startTime="3140">So you get an inverse </span><span class="line" data-startTime="3140">effect with it. </span> <span class="line" data-startTime="3142">Because basically, your </span><span class="line" data-startTime="3142">GPU is getting overtaxed. </span> <span class="line" data-startTime="3144">More tiles are being </span><span class="line" data-startTime="3144">evicted from your cache, </span><span class="line" data-startTime="3146">because more things are </span><span class="line" data-startTime="3146">fighting for residency. </span> <span class="line" data-startTime="3148">It's actually going </span><span class="line" data-startTime="3148">to slow down your site </span><span class="line" data-startTime="3150">because your CPU is </span><span class="line" data-startTime="3150">spinning up more. </span> <span class="line" data-startTime="3151">Anyhow, enough with </span><span class="line" data-startTime="3151">the desktop stuff. </span> <span class="line" data-startTime="3153">Desktop's dead. </span> <span class="line" data-startTime="3154">No one wants desktop. </span> <span class="line" data-startTime="3155">OK, let's go back over </span><span class="line" data-startTime="3155">here to this thing </span><span class="line" data-startTime="3157">because the mobile web is sexy. </span> <span class="line" data-startTime="3160">What was I showing off? </span><span class="line" data-startTime="3161">Yeah. </span> <span class="line" data-startTime="3162">So Quartz, this QZ site, </span><span class="line" data-startTime="3162">this is actually a little bit </span><span class="line" data-startTime="3164">interesting because we see </span><span class="line" data-startTime="3164">mostly that as we're scrolling, </span><span class="line" data-startTime="3171">notice the big red spots </span><span class="line" data-startTime="3171">that keep popping up. </span> <span class="line" data-startTime="3175">Let me see if I can get </span><span class="line" data-startTime="3175">it to do that again. </span></p>

<p><span class="line" data-startTime="3179">Yep, see it? </span><span class="line" data-startTime="3180">So something's going on. </span> <span class="line" data-startTime="3181">It turns out &mdash; I'll spare </span><span class="line" data-startTime="3181">you the punchline here. </span> <span class="line" data-startTime="3183">What's actually occurring </span><span class="line" data-startTime="3183">is that these guys </span><span class="line" data-startTime="3185">are doing something with </span><span class="line" data-startTime="3185">a scroll handler in here </span><span class="line" data-startTime="3187">where they're actually trying </span><span class="line" data-startTime="3187">to catch what I'm doing. </span> <span class="line" data-startTime="3189">They're trying to </span><span class="line" data-startTime="3189">catch my little scroll. </span> <span class="line" data-startTime="3190">They're trying to </span><span class="line" data-startTime="3190">reposition things. </span> <span class="line" data-startTime="3192">And as soon as </span><span class="line" data-startTime="3192">they touch the DOM, </span><span class="line" data-startTime="3194">the whole DOM has </span><span class="line" data-startTime="3194">to be recalculated. </span> <span class="line" data-startTime="3196">As soon as the whole DOM </span><span class="line" data-startTime="3196">has to be recalculated, </span><span class="line" data-startTime="3198">all of the tiles </span><span class="line" data-startTime="3198">have to be redrawn. </span> <span class="line" data-startTime="3200">So as soon as they try to </span><span class="line" data-startTime="3200">catch what I'm scrolling </span><span class="line" data-startTime="3203">and reposition things </span><span class="line" data-startTime="3203">manually, they're actually </span><span class="line" data-startTime="3205">invalidating the </span><span class="line" data-startTime="3205">hardware compositing </span><span class="line" data-startTime="3208">and the GPU scrolling that we're </span><span class="line" data-startTime="3208">trying to do on their behalf </span><span class="line" data-startTime="3211">and actually messing up </span><span class="line" data-startTime="3211">their entire frame rate. </span></p>

<p><span class="line" data-startTime="3213">How many of your mobile sites </span><span class="line" data-startTime="3213">are catching a user input </span><span class="line" data-startTime="3216">like this? </span><span class="line" data-startTime="3218">Yeah. </span> <span class="line" data-startTime="3219">I saw that. </span> <span class="line" data-startTime="3219">I saw that. </span> <span class="line" data-startTime="3220">At least you're honest with it. </span> <span class="line" data-startTime="3222">Forecast.io, they know </span><span class="line" data-startTime="3222">what's going, guys. </span> <span class="line" data-startTime="3224">I got it right. </span> <span class="line" data-startTime="3225">I got it right. </span> <span class="line" data-startTime="3226">He didn't &mdash; no, </span><span class="line" data-startTime="3226">he still hates me. </span> <span class="line" data-startTime="3228">That's OK. </span> <span class="line" data-startTime="3229">All right. </span> <span class="line" data-startTime="3230">Let's do some other websites. </span> <span class="line" data-startTime="3231">Pete, how are we doing on time? </span><span class="line" data-startTime="3234">15 minutes? </span><span class="line" data-startTime="3235">I can load all the </span><span class="line" data-startTime="3235">websites in 15 minutes. </span></p>

<p><span class="line" data-startTime="3238">So let's look at a </span><span class="line" data-startTime="3238">couple other ones here. </span> <span class="line" data-startTime="3241">Let's see. </span> <span class="line" data-startTime="3242">Let's take a look </span><span class="line" data-startTime="3242">at something good so </span><span class="line" data-startTime="3244">that everyone walks </span><span class="line" data-startTime="3244">away from here </span><span class="line" data-startTime="3245">with feelings of </span><span class="line" data-startTime="3245">happy bunny times. </span> <span class="line" data-startTime="3247">Sorry, I just called somebody. </span> <span class="line" data-startTime="3252">So this is Meetup.com. </span> <span class="line" data-startTime="3259">OK. </span> <span class="line" data-startTime="3259">So we didn't see </span><span class="line" data-startTime="3259">a loading spinner. </span> <span class="line" data-startTime="3261">That was kind of nice. </span> <span class="line" data-startTime="3262">But it did take a </span><span class="line" data-startTime="3262">little bit long to load. </span> <span class="line" data-startTime="3264">In general, though, </span><span class="line" data-startTime="3264">let's see how it scrolls. </span> <span class="line" data-startTime="3266">That's actually pretty fast. </span> <span class="line" data-startTime="3269">Notice &mdash; let me turn </span><span class="line" data-startTime="3269">the show &mdash; let's </span><span class="line" data-startTime="3272">open the DevTools again and </span><span class="line" data-startTime="3272">see what kind of red things </span><span class="line" data-startTime="3275">are occurring and what </span><span class="line" data-startTime="3275">kind of load times </span><span class="line" data-startTime="3277">we're experiencing here. </span></p>

<p><span class="line" data-startTime="3279">So turn on DevTools. </span> <span class="line" data-startTime="3280">Let's hit Reload and see </span><span class="line" data-startTime="3280">how the network performs. </span> <span class="line" data-startTime="3285">Not that bad, not that bad. </span> <span class="line" data-startTime="3287">On the device, I'm </span><span class="line" data-startTime="3287">actually seeing </span><span class="line" data-startTime="3288">things starting </span><span class="line" data-startTime="3288">to pop up already. </span> <span class="line" data-startTime="3290">I notice no WOFFs in the code. </span> <span class="line" data-startTime="3292">That's really good. </span> <span class="line" data-startTime="3292">Oh, there is one. </span> <span class="line" data-startTime="3293">Son of a bitch. </span> <span class="line" data-startTime="3294">Where did that come from? </span><span class="line" data-startTime="3297">Oh, bogus. </span> <span class="line" data-startTime="3298">Well, maybe they're not using </span><span class="line" data-startTime="3298">that on something critical. </span> <span class="line" data-startTime="3301">Let's sort by content here. </span></p>

<p><span class="line" data-startTime="3304">This is really cool to see. </span> <span class="line" data-startTime="3306">We've actually got &mdash; a </span><span class="line" data-startTime="3306">44K JavaScript is actually </span><span class="line" data-startTime="3308">the biggest part of the page. </span> <span class="line" data-startTime="3310">I'm surprised that's </span><span class="line" data-startTime="3310">not jQuery at 191K. </span> <span class="line" data-startTime="3313">How many of you are using j &mdash; </span><span class="line" data-startTime="3313">you know what, never mind. </span> <span class="line" data-startTime="3315">Just never mind. </span> <span class="line" data-startTime="3316">OK, actually, this image </span><span class="line" data-startTime="3316">is popping up to the top. </span> <span class="line" data-startTime="3318">60K JPEG, 320 by 226. </span> <span class="line" data-startTime="3323">That's maybe a little large. </span> <span class="line" data-startTime="3325">Another 60K JPEG, </span><span class="line" data-startTime="3325">another 50K JPEG. </span> <span class="line" data-startTime="3329">This is really interesting, too, </span><span class="line" data-startTime="3329">because we just saw 340 by 226s </span><span class="line" data-startTime="3332">on the previous site that </span><span class="line" data-startTime="3332">were about 10K, right? </span><span class="line" data-startTime="3336">So again, someone's not </span><span class="line" data-startTime="3336">optimizing JPEGs the right way. </span> <span class="line" data-startTime="3340">In fact, there's </span><span class="line" data-startTime="3340">actually, on the article </span><span class="line" data-startTime="3341">that I put on HTML5 Rocks </span><span class="line" data-startTime="3341">about image compression &mdash; </span><span class="line" data-startTime="3344">let me see if I can tab </span><span class="line" data-startTime="3344">over there really quick. </span> <span class="line" data-startTime="3352">So this article that </span><span class="line" data-startTime="3352">I did was actually </span><span class="line" data-startTime="3354">"Image Compression </span><span class="line" data-startTime="3354">for Web Developers." </span><span class="line" data-startTime="3355">The entire point of this article </span><span class="line" data-startTime="3355">was to talk to all of you </span><span class="line" data-startTime="3358">in a very frank way </span><span class="line" data-startTime="3358">and kind of discuss </span><span class="line" data-startTime="3360">the back story of where </span><span class="line" data-startTime="3360">image compression works. </span></p>

<p><span class="line" data-startTime="3362">Plus I'm a really </span><span class="line" data-startTime="3362">big fan of parrots. </span> <span class="line" data-startTime="3364">They're kind of cool, especially </span><span class="line" data-startTime="3364">the digitally pixelated ones. </span> <span class="line" data-startTime="3366">Anyhow, there's some </span><span class="line" data-startTime="3366">great content down here </span><span class="line" data-startTime="3369">about JPEG information. </span> <span class="line" data-startTime="3371">And it actually shows that &mdash; </span><span class="line" data-startTime="3371">here it is, right here. </span> <span class="line" data-startTime="3373">Let me see if I </span><span class="line" data-startTime="3373">can zoom this in. </span> <span class="line" data-startTime="3377">No, too far. </span> <span class="line" data-startTime="3378">OK, so this is actually &mdash; I feel </span><span class="line" data-startTime="3378">it's important to kind of break </span><span class="line" data-startTime="3381">away from our regularly </span><span class="line" data-startTime="3381">scheduled bashing </span><span class="line" data-startTime="3383">of these websites &mdash; </span><span class="line" data-startTime="3383">because that's </span><span class="line" data-startTime="3384">getting a little </span><span class="line" data-startTime="3384">depressing, right? </span><span class="line" data-startTime="3385">Everyone's getting depressed? </span><span class="line" data-startTime="3386">So this is actually a test </span><span class="line" data-startTime="3386">that an external person </span><span class="line" data-startTime="3389">did on the compression </span><span class="line" data-startTime="3389">quality of the images that </span><span class="line" data-startTime="3394">are being served by the </span><span class="line" data-startTime="3394">top websites in the world. </span></p>

<p><span class="line" data-startTime="3396">And what you're actually </span><span class="line" data-startTime="3396">seeing here is most of them </span><span class="line" data-startTime="3400">actually just use </span><span class="line" data-startTime="3400">a standard value. </span> <span class="line" data-startTime="3403">So all Window Live background </span><span class="line" data-startTime="3403">images are exactly 82. </span> <span class="line" data-startTime="3408">Regardless of what the </span><span class="line" data-startTime="3408">PSNR is, they choose 82. </span> <span class="line" data-startTime="3411">It's hard coded. </span> <span class="line" data-startTime="3413">So they might be able, </span><span class="line" data-startTime="3413">on some of the images, </span><span class="line" data-startTime="3415">to use a level 64 and </span><span class="line" data-startTime="3415">actually reduce the size more </span><span class="line" data-startTime="3418">because they use 82. </span> <span class="line" data-startTime="3419">Wikipedia are all 80 for </span><span class="line" data-startTime="3419">every one of their images, </span><span class="line" data-startTime="3422">regardless of the </span><span class="line" data-startTime="3422">content quality on it. </span> <span class="line" data-startTime="3424">YouTube is about 70 to 82. </span> <span class="line" data-startTime="3426">That's kind of good. </span> <span class="line" data-startTime="3427">It shows that they're actually </span><span class="line" data-startTime="3427">doing some dynamic scaling, </span><span class="line" data-startTime="3429">although it's unclear whether </span><span class="line" data-startTime="3429">or not it's actually manually </span><span class="line" data-startTime="3431">scaled, where they have an </span><span class="line" data-startTime="3431">artist actually changing them, </span><span class="line" data-startTime="3433">or they have some sort </span><span class="line" data-startTime="3433">of dynamic solution, </span><span class="line" data-startTime="3435">like I was saying. </span></p>

<p><span class="line" data-startTime="3436">Yahoo, 69 to 91. </span> <span class="line" data-startTime="3438">Again, they may have some more </span><span class="line" data-startTime="3438">responsive version of that. </span> <span class="line" data-startTime="3440">Facebook's are at 85. </span> <span class="line" data-startTime="3442">And Google image </span><span class="line" data-startTime="3442">thumbnails are about 74. </span> <span class="line" data-startTime="3445">Here's the really </span><span class="line" data-startTime="3445">interesting &mdash; Twitter user </span><span class="line" data-startTime="3447">JPEGs are anywhere </span><span class="line" data-startTime="3447">between 30 and 100, </span><span class="line" data-startTime="3449">which means that </span><span class="line" data-startTime="3449">for some images, </span><span class="line" data-startTime="3450">they're actually doing nothing. </span> <span class="line" data-startTime="3452">And some images, they're </span><span class="line" data-startTime="3452">doing everything. </span> <span class="line" data-startTime="3454">This actually tells me &mdash; I </span><span class="line" data-startTime="3454">don't know if anyone &mdash; no one's </span><span class="line" data-startTime="3456">in here from Twitter, right? </span><span class="line" data-startTime="3457">This actually tells me that </span><span class="line" data-startTime="3457">they may have something dynamic </span><span class="line" data-startTime="3460">actually testing the noise </span><span class="line" data-startTime="3460">ratio of the compression </span><span class="line" data-startTime="3462">there and actually serving </span><span class="line" data-startTime="3462">you the most optimized JPEG </span><span class="line" data-startTime="3465">at the best image </span><span class="line" data-startTime="3465">quality possible. </span> <span class="line" data-startTime="3467">So that's really cool. </span> <span class="line" data-startTime="3468">That's really cool </span><span class="line" data-startTime="3468">to see that someone's </span><span class="line" data-startTime="3470">doing that out on the web. </span> <span class="line" data-startTime="3472">OK, back to doom and gloom. </span></p>

<p><span class="line" data-startTime="3475">OK, we were over here. </span> <span class="line" data-startTime="3476">So yeah, so these </span><span class="line" data-startTime="3476">images probably </span><span class="line" data-startTime="3478">are a little too </span><span class="line" data-startTime="3478">large in megabytes. </span> <span class="line" data-startTime="3481">They're probably </span><span class="line" data-startTime="3481">not optimizing it. </span> <span class="line" data-startTime="3482">Chances are &mdash; nope, </span><span class="line" data-startTime="3482">that's not an image &mdash; </span><span class="line" data-startTime="3484">chances are they're just </span><span class="line" data-startTime="3484">using a standard one. </span> <span class="line" data-startTime="3485">So let's hit Timeline. </span> <span class="line" data-startTime="3486">Let's just hit Record. </span> <span class="line" data-startTime="3487">Let's see what's </span><span class="line" data-startTime="3487">going on with memory. </span> <span class="line" data-startTime="3489">I'm not touching anything. </span> <span class="line" data-startTime="3491">Memory's increasing. </span> <span class="line" data-startTime="3494">Not too much, 5.5, 5.6. </span></p>

<p><span class="line" data-startTime="3498">Again, we've got these </span><span class="line" data-startTime="3498">timers getting fired. </span> <span class="line" data-startTime="3500">Fine.js, I don't even </span><span class="line" data-startTime="3500">know what this is. </span> <span class="line" data-startTime="3502">Meetup script mobile find. </span> <span class="line" data-startTime="3504">OK, so apparently it's trying </span><span class="line" data-startTime="3504">to meet me and find me. </span> <span class="line" data-startTime="3506">That's kind of creepy. </span> <span class="line" data-startTime="3509">Mobile base. </span> <span class="line" data-startTime="3511">So that's weird. </span> <span class="line" data-startTime="3511">So they've got two </span><span class="line" data-startTime="3511">separate timers </span><span class="line" data-startTime="3513">coming from their own website, </span><span class="line" data-startTime="3513">doing two different things. </span> <span class="line" data-startTime="3516">And again, not </span><span class="line" data-startTime="3516">touching anything. </span> <span class="line" data-startTime="3518">Nothing's happening, nothing's </span><span class="line" data-startTime="3518">moving, but we're at 5.6 megs. </span> <span class="line" data-startTime="3523">So this is like a slow leak. </span> <span class="line" data-startTime="3524">It looks like there's a slow </span><span class="line" data-startTime="3524">closure or something being </span><span class="line" data-startTime="3528">tossed to this. </span> <span class="line" data-startTime="3528">So let's take a look at this, </span><span class="line" data-startTime="3528">see if we can't drill in. </span> <span class="line" data-startTime="3530">Maybe we get some insights. </span> <span class="line" data-startTime="3531">Oh, yay. </span></p>

<p><span class="line" data-startTime="3531">It is a jQuery library. </span> <span class="line" data-startTime="3533">Can we summon the </span><span class="line" data-startTime="3533">power of pretty print? </span><span class="line" data-startTime="3535">Aha. </span> <span class="line" data-startTime="3536">That didn't help. </span> <span class="line" data-startTime="3538">I'll try that again. </span> <span class="line" data-startTime="3539">There we go. </span> <span class="line" data-startTime="3541">Oh, mustache. </span> <span class="line" data-startTime="3544">Interesting. </span> <span class="line" data-startTime="3545">Who uses mustache? </span><span class="line" data-startTime="3546">Can anyone explain this </span><span class="line" data-startTime="3546">line of code to me? </span></p>

<p class="speaker"><span class="line" data-starttime="3549"><span class="speakerName">Audience</span>: It's a JavaScript </span><span class="line" data-startTime="3549">[INAUDIBLE] derived from it. </span></p>

<p class="speaker"><span class="line" data-starttime="3553"><span class="speakerName">Colt McAnlis</span>: So this is </span><span class="line" data-startTime="3553">causing a memory leak. </span> <span class="line" data-startTime="3556">Can anyone fix this? </span><span class="line" data-startTime="3558">Not now? </span><span class="line" data-startTime="3558">OK, that's cool. </span> <span class="line" data-startTime="3559">Take your time. </span> <span class="line" data-startTime="3559">That's all right. </span> <span class="line" data-startTime="3559">We'll get back to it. </span> <span class="line" data-startTime="3561">But basically, </span><span class="line" data-startTime="3561">we're seeing again, </span><span class="line" data-startTime="3562">this kind of looks like </span><span class="line" data-startTime="3562">an anonymous function </span><span class="line" data-startTime="3567">calling some factory </span><span class="line" data-startTime="3567">objects, testing some object </span><span class="line" data-startTime="3570">definitions. </span> <span class="line" data-startTime="3571">This in and of itself </span><span class="line" data-startTime="3571">doesn't look bad, </span><span class="line" data-startTime="3573">although it is calling another </span><span class="line" data-startTime="3573">anonymous function down here. </span> <span class="line" data-startTime="3577">Sometimes the </span><span class="line" data-startTime="3577">pretty print spacing </span><span class="line" data-startTime="3578">doesn't get it all right. </span> <span class="line" data-startTime="3579">This might actually be sort </span><span class="line" data-startTime="3579">of a closure in a closure. </span> <span class="line" data-startTime="3582">It looks like we've got one </span><span class="line" data-startTime="3582">close there, one open here. </span> <span class="line" data-startTime="3586">Something's going on. </span></p>

<p><span class="line" data-startTime="3588">Any of you who are using </span><span class="line" data-startTime="3588">third party libraries, </span><span class="line" data-startTime="3590">it's actually really easy </span><span class="line" data-startTime="3590">to fall in these traps </span><span class="line" data-startTime="3592">where they're allocating </span><span class="line" data-startTime="3592">memory and doing stuff </span><span class="line" data-startTime="3594">on your behalf that may </span><span class="line" data-startTime="3594">be negatively impacting </span><span class="line" data-startTime="3597">your performance. </span> <span class="line" data-startTime="3598">And we sometimes </span><span class="line" data-startTime="3598">ignore these faults </span><span class="line" data-startTime="3600">and don't track </span><span class="line" data-startTime="3600">these faults down </span><span class="line" data-startTime="3602">because the fact we get like </span><span class="line" data-startTime="3602">event propagation or something </span><span class="line" data-startTime="3604">else. </span></p>

<p><span class="line" data-startTime="3605">Like, oh, I get a callback </span><span class="line" data-startTime="3605">when something occurs. </span> <span class="line" data-startTime="3608">That code you can actually </span><span class="line" data-startTime="3608">write in about 100 lines </span><span class="line" data-startTime="3610">of your own making and actually </span><span class="line" data-startTime="3610">keep it memory performant. </span> <span class="line" data-startTime="3613">But instead, we pull in </span><span class="line" data-startTime="3613">these large libraries. </span> <span class="line" data-startTime="3614">So it's important that </span><span class="line" data-startTime="3614">you know these trade-offs </span><span class="line" data-startTime="3617">when something like </span><span class="line" data-startTime="3617">this is occurring. </span> <span class="line" data-startTime="3619">Let's do another website. </span> <span class="line" data-startTime="3620">Pete, we got what, </span><span class="line" data-startTime="3620">10 minutes left? </span><span class="line" data-startTime="3622">Yeah, about 10 minutes? </span><span class="line" data-startTime="3623">Let's see. </span> <span class="line" data-startTime="3624">What haven't we done here? </span><span class="line" data-startTime="3626">So I have to load this because </span><span class="line" data-startTime="3626">I really don't get this website. </span> <span class="line" data-startTime="3630">And I really want to talk </span><span class="line" data-startTime="3630">about the website more </span><span class="line" data-startTime="3632">than the performance </span><span class="line" data-startTime="3632">characteristics. </span></p>

<p><span class="line" data-startTime="3634">So this is called </span><span class="line" data-startTime="3634">Game of Phones. </span> <span class="line" data-startTime="3637">Is this your site? </span></p>

<p class="speaker"><span class="line" data-starttime="3638"><span class="speakerName">Audience</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="3639"><span class="speakerName">Colt McAnlis</span>: OK, cool. </span> <span class="line" data-startTime="3641">I really don't get this website. </span> <span class="line" data-startTime="3644">But it's here. </span> <span class="line" data-startTime="3645">So we can take a look at it </span><span class="line" data-startTime="3645">from a performance perspective. </span> <span class="line" data-startTime="3647">Basically, what </span><span class="line" data-startTime="3647">happens is someone </span><span class="line" data-startTime="3650">will record &mdash; from </span><span class="line" data-startTime="3650">what I can tell, </span><span class="line" data-startTime="3652">they're like very politically </span><span class="line" data-startTime="3652">charged, angry arguments. </span> <span class="line" data-startTime="3655">And you sign up, </span><span class="line" data-startTime="3655">and someone will </span><span class="line" data-startTime="3658">call you and play this </span><span class="line" data-startTime="3658">recorded message that's </span><span class="line" data-startTime="3661">like, blah, blah, blah, </span><span class="line" data-startTime="3661">blah, blah, blah, blah. </span> <span class="line" data-startTime="3663">Rally. </span> <span class="line" data-startTime="3663">Fight the power. </span> <span class="line" data-startTime="3665">And then you have to call </span><span class="line" data-startTime="3665">someone else on the list </span><span class="line" data-startTime="3669">and try to regurgitate </span><span class="line" data-startTime="3669">what you heard. </span></p>

<p><span class="line" data-startTime="3671">And so it's kind of like </span><span class="line" data-startTime="3671">the game of telephone </span><span class="line" data-startTime="3673">that you play as </span><span class="line" data-startTime="3673">kids, and you're </span><span class="line" data-startTime="3675">trying to get all </span><span class="line" data-startTime="3675">the way through. </span> <span class="line" data-startTime="3676">I have no idea why people </span><span class="line" data-startTime="3676">are even doing this. </span> <span class="line" data-startTime="3678">Like, I hate getting calls </span><span class="line" data-startTime="3678">from my wife, much less </span><span class="line" data-startTime="3680">random strangers </span><span class="line" data-startTime="3680">on the internet. </span> <span class="line" data-startTime="3681">I'm on the internet because </span><span class="line" data-startTime="3681">I don't want you to call me. </span> <span class="line" data-startTime="3684">Send me a text or something. </span> <span class="line" data-startTime="3686">Anyhow, personal thing. </span> <span class="line" data-startTime="3688">I'm sure it works </span><span class="line" data-startTime="3688">for you, brother. </span> <span class="line" data-startTime="3689">I don't get the internet. </span> <span class="line" data-startTime="3690">I'm too old. </span></p>

<p><span class="line" data-startTime="3691">That's my problem. </span></p>

<p class="speaker"><span class="line" data-starttime="3691"><span class="speakerName">Audience</span>: I've had people tell </span><span class="line" data-startTime="3691">me it's the only phone calls </span><span class="line" data-startTime="3694">that they will answer. </span><span class="line" data-startTime="3696">They will answer </span><span class="line" data-startTime="3696">phone calls from this </span><span class="line" data-startTime="3698">and from their mother. </span></p>

<p class="speaker"><span class="line" data-starttime="3699"><span class="speakerName">Colt McAnlis</span>: Oh, dude. </span> <span class="line" data-startTime="3699">Game of Phones, awesome. </span> <span class="line" data-startTime="3702">You know what you need to do? </span><span class="line" data-startTime="3703">You actually need to get the </span><span class="line" data-startTime="3703">voices from "Game of Thrones" </span><span class="line" data-startTime="3706">to actually do the </span><span class="line" data-startTime="3706">call, and then it </span><span class="line" data-startTime="3707">would just go through </span><span class="line" data-startTime="3707">the roof, dude. </span> <span class="line" data-startTime="3709">HBO might sue me now. </span> <span class="line" data-startTime="3710">Sorry about that. </span> <span class="line" data-startTime="3711">Anyhow, let's look at this </span><span class="line" data-startTime="3711">from a performance perspective. </span> <span class="line" data-startTime="3713">There's really </span><span class="line" data-startTime="3713">nothing on this page. </span> <span class="line" data-startTime="3715">I mean, it's kind of text. </span> <span class="line" data-startTime="3716">But we're going to </span><span class="line" data-startTime="3716">run through it anyway, </span><span class="line" data-startTime="3718">just so you guys can kind </span><span class="line" data-startTime="3718">of see the differences </span><span class="line" data-startTime="3722">in these things. </span></p>

<p><span class="line" data-startTime="3723">So am I here? </span><span class="line" data-startTime="3723">OK. </span> <span class="line" data-startTime="3725">By the way, did you see </span><span class="line" data-startTime="3725">actually what showed up? </span><span class="line" data-startTime="3727">Was this on the screen? </span><span class="line" data-startTime="3728">Sorry. </span> <span class="line" data-startTime="3729">So this is Game of Phones. </span> <span class="line" data-startTime="3730">Again, it's just text, </span><span class="line" data-startTime="3730">people calling each other. </span> <span class="line" data-startTime="3735">But this is it. </span> <span class="line" data-startTime="3738">12 requests. </span> <span class="line" data-startTime="3740">The interesting thing here </span><span class="line" data-startTime="3740">is 107K, that's a little odd. </span> <span class="line" data-startTime="3744">Like we're seeing some other </span><span class="line" data-startTime="3744">pages come in below that. </span> <span class="line" data-startTime="3748">Mainly this is coming </span><span class="line" data-startTime="3748">from a concatent. </span> <span class="line" data-startTime="3751">So Bootstrap is being included. </span> <span class="line" data-startTime="3753">I'm not really sure why </span><span class="line" data-startTime="3753">this needs Bootstrap. </span> <span class="line" data-startTime="3762">I guess the cool </span><span class="line" data-startTime="3762">kids are doing it. </span> <span class="line" data-startTime="3764">And here's the funny thing. </span></p>

<p><span class="line" data-startTime="3765">We got bootstrap.min and then </span><span class="line" data-startTime="3765">CSS that replaces Bootstrap. </span> <span class="line" data-startTime="3771">So that's a thing. </span> <span class="line" data-startTime="3772">And then jQuery. </span> <span class="line" data-startTime="3780">And here's another Bootstrap </span><span class="line" data-startTime="3780">again, and then telephone-gram </span><span class="line" data-startTime="3783">and then another jQuery. </span> <span class="line" data-startTime="3789">Are you using two jQueries? </span></p>

<p class="speaker"><span class="line" data-starttime="3790"><span class="speakerName">Audience</span>: I should </span><span class="line" data-startTime="3790">mention that I've never </span><span class="line" data-startTime="3792">made a web page before. </span></p>

<p class="speaker"><span class="line" data-starttime="3793"><span class="speakerName">Colt McAnlis</span>: OK. </span><span class="line" data-startTime="3795">You're using two jQueries. </span><span class="line" data-startTime="3797">Do you know you're </span><span class="line" data-startTime="3797">using two jQueries? </span></p>

<p class="speaker"><span class="line" data-starttime="3799"><span class="speakerName">Audience</span>: Now I do. </span></p>

<p class="speaker"><span class="line" data-starttime="3799"><span class="speakerName">Colt McAnlis</span>: Now you do. </span> <span class="line" data-startTime="3800">OK. </span> <span class="line" data-startTime="3803">And then I like the GIF, right? </span><span class="line" data-startTime="3806">It's sprite sheeted, I guess. </span> <span class="line" data-startTime="3809">Here's the cool thing. </span> <span class="line" data-startTime="3810">So a 300 by 120 animated </span><span class="line" data-startTime="3810">GIF is only 4.4K, </span><span class="line" data-startTime="3814">yet we were seeing like full </span><span class="line" data-startTime="3814">JPEGs that were like 9K that </span><span class="line" data-startTime="3818">were static, right? </span><span class="line" data-startTime="3820">So I'm not really sure </span><span class="line" data-startTime="3820">what else do with this. </span> <span class="line" data-startTime="3824">Let me hit Timeline and see </span><span class="line" data-startTime="3824">what this is doing here. </span> <span class="line" data-startTime="3827">This is kind of </span><span class="line" data-startTime="3827">a little awkward. </span> <span class="line" data-startTime="3832">So your jQueries </span><span class="line" data-startTime="3832">are using memory. </span></p>

<p><span class="line" data-startTime="3835">So this is kind of telltale. </span> <span class="line" data-startTime="3838">Do you have a timer? </span><span class="line" data-startTime="3839">It looks like you </span><span class="line" data-startTime="3839">have a timer on your &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="3840"><span class="speakerName">Audience</span>: [INAUDIBLE], maybe </span><span class="line" data-startTime="3840">the audio player is using it. </span></p>

<p class="speaker"><span class="line" data-starttime="3842"><span class="speakerName">Colt McAnlis</span>: Maybe </span><span class="line" data-startTime="3842">the audio player. </span> <span class="line" data-startTime="3844">Yeah, it looks </span><span class="line" data-startTime="3844">like yeah, it does. </span> <span class="line" data-startTime="3845">So it looks like </span><span class="line" data-startTime="3845">there's a timer here. </span> <span class="line" data-startTime="3847">I don't know if you </span><span class="line" data-startTime="3847">guys can see this. </span> <span class="line" data-startTime="3848">It looks like </span><span class="line" data-startTime="3848">there's a timer here. </span> <span class="line" data-startTime="3850">And you can see this red square </span><span class="line" data-startTime="3850">up here, just the Play button. </span> <span class="line" data-startTime="3853">Just like that Play </span><span class="line" data-startTime="3853">button has a timer that </span><span class="line" data-startTime="3858">needs jQuery and Boostrap &mdash; </span><span class="line" data-startTime="3858">two jQueries and Bootstrap &mdash; </span><span class="line" data-startTime="3862">and is allocating like a meg of </span><span class="line" data-startTime="3862">memory over like seven seconds. </span> <span class="line" data-startTime="3867">So that's a thing. </span> <span class="line" data-startTime="3869">Lots of rasterizes </span><span class="line" data-startTime="3869">occurring in here. </span> <span class="line" data-startTime="3871">Lots of recalculates. </span> <span class="line" data-startTime="3872">So not only is it </span><span class="line" data-startTime="3872">repainting, it's </span><span class="line" data-startTime="3874">actually like updating </span><span class="line" data-startTime="3874">the DOM to repaint. </span> <span class="line" data-startTime="3877">Let's look at this again. </span> <span class="line" data-startTime="3878">That's updating the DOM. </span> <span class="line" data-startTime="3881">Don't know why. </span> <span class="line" data-startTime="3881">Maybe there's a cool </span><span class="line" data-startTime="3881">jitter effect there. </span></p>

<p><span class="line" data-startTime="3883">You know what? </span><span class="line" data-startTime="3884">Maybe I got this wrong. </span> <span class="line" data-startTime="3884">Maybe I'm actually </span><span class="line" data-startTime="3884">looking at the Matrix. </span> <span class="line" data-startTime="3886">Am I looking at the Matrix? </span><span class="line" data-startTime="3888">That would be kind of cool. </span> <span class="line" data-startTime="3889">I'm like &mdash; sorry. </span> <span class="line" data-startTime="3891">I'm having fun. </span> <span class="line" data-startTime="3891">It's late, and I have </span><span class="line" data-startTime="3891">to keep you all awake </span><span class="line" data-startTime="3893">for like another five minutes. </span> <span class="line" data-startTime="3894">So anyhow, I don't </span><span class="line" data-startTime="3894">like this trend. </span> <span class="line" data-startTime="3897">You're actually allocating </span><span class="line" data-startTime="3897">more memory faster </span><span class="line" data-startTime="3899">than the other websites </span><span class="line" data-startTime="3899">we looked at it. </span> <span class="line" data-startTime="3900">It's probably because </span><span class="line" data-startTime="3900">you have two jQueries, </span><span class="line" data-startTime="3901">but anyhow, let's dig in. </span> <span class="line" data-startTime="3903">So let's go to profiles. </span> <span class="line" data-startTime="3904">Again, follow the memory, </span><span class="line" data-startTime="3904">find the performance problems. </span></p>

<p><span class="line" data-startTime="3906">So we follow the asset </span><span class="line" data-startTime="3906">memory to figure out </span><span class="line" data-startTime="3908">where load problems are. </span> <span class="line" data-startTime="3909">We follow dynamic </span><span class="line" data-startTime="3909">memory to figure out </span><span class="line" data-startTime="3910">where compute problems </span><span class="line" data-startTime="3910">and render problems are. </span> <span class="line" data-startTime="3912">Can I click this button, please? </span><span class="line" data-startTime="3914">Clicky. </span> <span class="line" data-startTime="3915">You've allocated too much </span><span class="line" data-startTime="3915">memory for your site, </span><span class="line" data-startTime="3919">and I can't click. </span> <span class="line" data-startTime="3920">Oh, there we go. </span> <span class="line" data-startTime="3920">OK. </span> <span class="line" data-startTime="3921">So let's do record heap </span><span class="line" data-startTime="3921">allocations, hit Start. </span> <span class="line" data-startTime="3926">So that's kind of interesting. </span> <span class="line" data-startTime="3927">You guys see this pattern? </span><span class="line" data-startTime="3928">So this is actually really very, </span><span class="line" data-startTime="3928">very regular allocations that </span><span class="line" data-startTime="3932">are occurring, two </span><span class="line" data-startTime="3932">different sets of it, </span><span class="line" data-startTime="3934">but they're almost </span><span class="line" data-startTime="3934">deleted immediately, </span><span class="line" data-startTime="3936">except for the </span><span class="line" data-startTime="3936">stuff that happened </span><span class="line" data-startTime="3938">at the beginning of the trace. </span> <span class="line" data-startTime="3939">So we're seeing the grey lines. </span> <span class="line" data-startTime="3940">So the grey lines mean that what </span><span class="line" data-startTime="3940">was allocated has actually been </span><span class="line" data-startTime="3943">freed now. </span></p>

<p><span class="line" data-startTime="3944">This is kind of odd. </span> <span class="line" data-startTime="3945">I kind of want to see </span><span class="line" data-startTime="3945">where this is coming from. </span> <span class="line" data-startTime="3948">I like to dig in and </span><span class="line" data-startTime="3948">figure out why I'm so bald. </span> <span class="line" data-startTime="3952">So we have the whole </span><span class="line" data-startTime="3952">thing, yada, yada, yada. </span> <span class="line" data-startTime="3953">Let's actually just </span><span class="line" data-startTime="3953">highlight this guy here. </span> <span class="line" data-startTime="3956">So array, what's &mdash; </span><span class="line" data-startTime="3956">transition array. </span> <span class="line" data-startTime="3958">So something's going </span><span class="line" data-startTime="3958">on inside of V8. </span> <span class="line" data-startTime="3960">All these are being deleted. </span> <span class="line" data-startTime="3962">Compiled code. </span> <span class="line" data-startTime="3963">Is this a deopt? </span><span class="line" data-startTime="3965">No, relocation info. </span> <span class="line" data-startTime="3966">So it looks like there's </span><span class="line" data-startTime="3966">just some sort of cases </span><span class="line" data-startTime="3970">where jQuery is executing &mdash; </span><span class="line" data-startTime="3970">and again, I see this a lot </span><span class="line" data-startTime="3972">with closures. </span></p>

<p><span class="line" data-startTime="3973">Closures, for some reason, </span><span class="line" data-startTime="3973">tend to bring up this pattern. </span> <span class="line" data-startTime="3975">jQuery's kicking </span><span class="line" data-startTime="3975">off a closure that's </span><span class="line" data-startTime="3977">causing a reflow of your entire </span><span class="line" data-startTime="3977">page for like a five pixel </span><span class="line" data-startTime="3983">by five pixel icon. </span> <span class="line" data-startTime="3984">So you still loaded faster </span><span class="line" data-startTime="3984">than the other sites. </span> <span class="line" data-startTime="3987">Bravo. </span> <span class="line" data-startTime="3988">Round of applause for that. </span> <span class="line" data-startTime="3990">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="3991"><span class="speakerName">Audience</span>: Real web </span><span class="line" data-startTime="3991">pages don't need images. </span></p>

<p class="speaker"><span class="line" data-starttime="3992"><span class="speakerName">Colt McAnlis</span>: Say again? </span></p>

<p class="speaker"><span class="line" data-starttime="3993"><span class="speakerName">Audience</span>: Real web </span><span class="line" data-startTime="3993">pages don't need images. </span></p>

<p class="speaker"><span class="line" data-starttime="3995"><span class="speakerName">Colt McAnlis</span>: There you go. </span><span class="line" data-startTime="3996">You know, I'm a fan </span><span class="line" data-startTime="3996">of the text web. </span><span class="line" data-startTime="3999">That requires drinking to get </span><span class="line" data-startTime="3999">more information out of that. </span><span class="line" data-startTime="4001">Anyhow, let's load </span><span class="line" data-startTime="4001">up another one. </span><span class="line" data-startTime="4003">Pete, how are we doing on time? </span></p>

<p class="speaker"><span class="line" data-starttime="4004"><span class="speakerName">Audience</span>: You've </span><span class="line" data-startTime="4004">got five minutes. </span></p>

<p class="speaker"><span class="line" data-starttime="4005"><span class="speakerName">Colt McAnlis</span>: Five more minutes. </span><span class="line" data-startTime="4005">OK. </span><span class="line" data-startTime="4006">Let's clear up quickly, </span><span class="line" data-startTime="4006">because I'm actually </span><span class="line" data-startTime="4008">really interested to try this </span><span class="line" data-startTime="4008">Robitussin and whiskey thing. </span><span class="line" data-startTime="4010">I think we may have </span><span class="line" data-startTime="4010">something on there. </span></p>

<p class="speaker"><span class="line" data-starttime="4012"><span class="speakerName">Audience</span>: I highly recommend it. </span></p>

<p class="speaker"><span class="line" data-starttime="4013"><span class="speakerName">Colt McAnlis</span>: OK. </span> <span class="line" data-startTime="4014">Let's try &mdash; here we go. </span> <span class="line" data-startTime="4017">Let's try this CBN Week. </span> <span class="line" data-startTime="4030">And we're done. </span> <span class="line" data-startTime="4032">I think at this time, </span><span class="line" data-startTime="4032">I don't actually </span><span class="line" data-startTime="4034">need to tell you guys </span><span class="line" data-startTime="4034">what I'm about to do. </span> <span class="line" data-startTime="4038">This is &mdash; no, I don't </span><span class="line" data-startTime="4038">want to translate. </span> <span class="line" data-startTime="4040">I used to be able </span><span class="line" data-startTime="4040">to speak Chinese. </span> <span class="line" data-startTime="4042">It was a beautiful language. </span> <span class="line" data-startTime="4043">So you kind of know </span><span class="line" data-startTime="4043">what I'm about to do. </span> <span class="line" data-startTime="4046">I'm going to load up networking. </span> <span class="line" data-startTime="4047">I'm going to see what images </span><span class="line" data-startTime="4047">are too large, what JavaScript </span><span class="line" data-startTime="4050">is too large, what you're using </span><span class="line" data-startTime="4050">that you shouldn't be using. </span> <span class="line" data-startTime="4052">We're going to </span><span class="line" data-startTime="4052">try to cull assets </span><span class="line" data-startTime="4054">and get rid of </span><span class="line" data-startTime="4054">extra network loads. </span> <span class="line" data-startTime="4056">I thought the points </span><span class="line" data-startTime="4056">about sprite sheets </span><span class="line" data-startTime="4058">was perfect earlier. </span></p>

<p><span class="line" data-startTime="4059">By the way, they shouldn't </span><span class="line" data-startTime="4059">be called sprite sheets. </span> <span class="line" data-startTime="4061">They should be called atlases. </span> <span class="line" data-startTime="4062">You should actually see my </span><span class="line" data-startTime="4062">Udacity course rant on this. </span> <span class="line" data-startTime="4064">Everywhere else in the </span><span class="line" data-startTime="4064">world, in video games, </span><span class="line" data-startTime="4067">in film and everything, </span><span class="line" data-startTime="4067">we call them atlases. </span> <span class="line" data-startTime="4069">You know what? </span><span class="line" data-startTime="4070">Never mind. </span> <span class="line" data-startTime="4071">Anyhow, let's see </span><span class="line" data-startTime="4071">some scrolling. </span> <span class="line" data-startTime="4073">Not that bad. </span> <span class="line" data-startTime="4076">Let's head over to DevTools. </span> <span class="line" data-startTime="4077">Let's take a look at this </span><span class="line" data-startTime="4077">under the microscope, right? </span><span class="line" data-startTime="4082">Let's go back to network. </span> <span class="line" data-startTime="4086">My computer said, I'm done. </span> <span class="line" data-startTime="4092">All right. </span> <span class="line" data-startTime="4093">This wil be the last </span><span class="line" data-startTime="4093">site, and then we'll </span><span class="line" data-startTime="4094">actually get to </span><span class="line" data-startTime="4094">all the questions. </span> <span class="line" data-startTime="4095">And I think we're going </span><span class="line" data-startTime="4095">to do a group question. </span> <span class="line" data-startTime="4097">Right? </span><span class="line" data-startTime="4097">Fantastic. </span></p>

<p><span class="line" data-startTime="4099">So that's interesting. </span> <span class="line" data-startTime="4103">So there's already 89 </span><span class="line" data-startTime="4103">requests, 92 requests, 93, 95. </span> <span class="line" data-startTime="4111">1.5 megs transferred so far. </span> <span class="line" data-startTime="4115">1.9 &mdash; 2 megs. </span> <span class="line" data-startTime="4118">2.195. </span> <span class="line" data-startTime="4119">Let's see if we </span><span class="line" data-startTime="4119">can go [INAUDIBLE]. </span> <span class="line" data-startTime="4121">So here's something </span><span class="line" data-startTime="4121">interesting up here. </span> <span class="line" data-startTime="4123">So notice this grey </span><span class="line" data-startTime="4123">bar right here. </span> <span class="line" data-startTime="4126">So in Chrome DevTools, when </span><span class="line" data-startTime="4126">you look at this Network tab, </span><span class="line" data-startTime="4128">basically, you see two values. </span> <span class="line" data-startTime="4129">You see sort of this </span><span class="line" data-startTime="4129">semi-transparent </span><span class="line" data-startTime="4131">and then this opaque </span><span class="line" data-startTime="4131">portion of these items. </span> <span class="line" data-startTime="4133">That semi-transparent </span><span class="line" data-startTime="4133">value is actually </span><span class="line" data-startTime="4135">how long the browser spent </span><span class="line" data-startTime="4135">waiting to receive the asset. </span></p>

<p><span class="line" data-startTime="4139">This is one of the reasons </span><span class="line" data-startTime="4139">that sprite sheets are actually </span><span class="line" data-startTime="4141">so important for you, because </span><span class="line" data-startTime="4141">each browser has a set </span><span class="line" data-startTime="4144">number of limits </span><span class="line" data-startTime="4144">of open connections </span><span class="line" data-startTime="4146">that it will allow </span><span class="line" data-startTime="4146">to a single server. </span> <span class="line" data-startTime="4148">For Chrome, I believe </span><span class="line" data-startTime="4148">it's around six. </span> <span class="line" data-startTime="4151">Which means if you have </span><span class="line" data-startTime="4151">six requests in flight, </span><span class="line" data-startTime="4154">it'll block the rest of the </span><span class="line" data-startTime="4154">requests until a slot opens up. </span> <span class="line" data-startTime="4157">Think of it like a </span><span class="line" data-startTime="4157">caching FIFO or whatnot. </span> <span class="line" data-startTime="4159">And so Chrome actually shows </span><span class="line" data-startTime="4159">you this here on the timeline. </span> <span class="line" data-startTime="4162">You can see some of </span><span class="line" data-startTime="4162">these actually waited </span><span class="line" data-startTime="4164">a very, very long time. </span> <span class="line" data-startTime="4166">In this case, it </span><span class="line" data-startTime="4166">was actually spent, </span><span class="line" data-startTime="4167">what is this, 471 </span><span class="line" data-startTime="4167">milliseconds waiting. </span> <span class="line" data-startTime="4171">It wanted to request </span><span class="line" data-startTime="4171">this asset, but it </span><span class="line" data-startTime="4173">couldn't because there were </span><span class="line" data-startTime="4173">other things in the pipe. </span></p>

<p><span class="line" data-startTime="4174">And you can kind of see that </span><span class="line" data-startTime="4174">this is a function of the fact </span><span class="line" data-startTime="4177">that there's about 100 requests </span><span class="line" data-startTime="4177">and 3.6 megs transferred. </span> <span class="line" data-startTime="4180">For those of you who don't </span><span class="line" data-startTime="4180">know, the average website </span><span class="line" data-startTime="4183">size right now, according </span><span class="line" data-startTime="4183">to HTTP Archive, </span><span class="line" data-startTime="4185">is about 1.1 megs. </span> <span class="line" data-startTime="4187">And that's for desktop. </span> <span class="line" data-startTime="4188">They haven't really got into </span><span class="line" data-startTime="4188">a lot of the mobile testing </span><span class="line" data-startTime="4189">just yet. </span> <span class="line" data-startTime="4190">But obviously, mobile </span><span class="line" data-startTime="4190">shouldn't be 1.1 meg, right? </span><span class="line" data-startTime="4193">So obviously, there's </span><span class="line" data-startTime="4193">too big a content here. </span> <span class="line" data-startTime="4195">So let's see if there </span><span class="line" data-startTime="4195">is any big offenders. </span> <span class="line" data-startTime="4197">Let's see if images </span><span class="line" data-startTime="4197">are a problem. </span></p>

<p><span class="line" data-startTime="4199">Who thinks images are a problem? </span></p>

<p class="speaker"><span class="line" data-starttime="4200"><span class="speakerName">Audience</span>: Show of hands. </span> <span class="line" data-startTime="4202">COLT MCANLIS: </span><span class="line" data-startTime="4202">There's a 300K image. </span> <span class="line" data-startTime="4205">200K, 197K, 161K. </span> <span class="line" data-startTime="4209">152K. </span> <span class="line" data-startTime="4212">What is in that image? </span><span class="line" data-startTime="4216">I think that's bigger than raw. </span> <span class="line" data-startTime="4219">Yeah. </span> <span class="line" data-startTime="4220">Yeah, obviously, these </span><span class="line" data-startTime="4220">images are too big. </span> <span class="line" data-startTime="4221">They're not being optimized. </span> <span class="line" data-startTime="4222">They should be fixed. </span> <span class="line" data-startTime="4223">Let's take a look at timeline. </span> <span class="line" data-startTime="4225">Let's see if anything is </span><span class="line" data-startTime="4225">going on with memory here. </span> <span class="line" data-startTime="4227">Anything crazy? </span><span class="line" data-startTime="4230">Slow. </span> <span class="line" data-startTime="4232">Again, timer. </span> <span class="line" data-startTime="4233">We see this same pattern. </span> <span class="line" data-startTime="4234">So we see almost </span><span class="line" data-startTime="4234">all of these pages </span><span class="line" data-startTime="4237">are falling into </span><span class="line" data-startTime="4237">the same pattern. </span></p>

<p><span class="line" data-startTime="4239">Also, almost all of these </span><span class="line" data-startTime="4239">pages, and some of them, </span><span class="line" data-startTime="4241">in rare cases, are all using </span><span class="line" data-startTime="4241">jQuery or jQuery twice. </span> <span class="line" data-startTime="4245">Closures are being passed </span><span class="line" data-startTime="4245">off to timers for things </span><span class="line" data-startTime="4248">like ads or analytics </span><span class="line" data-startTime="4248">or marquees. </span> <span class="line" data-startTime="4251">And this seems to </span><span class="line" data-startTime="4251">be a common pattern. </span> <span class="line" data-startTime="4253">But this is obviously is </span><span class="line" data-startTime="4253">causing a lot of memory </span><span class="line" data-startTime="4255">and a lot of churn and some </span><span class="line" data-startTime="4255">other weird things going on. </span> <span class="line" data-startTime="4258">I can look at the </span><span class="line" data-startTime="4258">frames times here. </span> <span class="line" data-startTime="4259">And so let me actually do this. </span> <span class="line" data-startTime="4261">I don't know if I showed </span><span class="line" data-startTime="4261">you guys this tool. </span> <span class="line" data-startTime="4263">Nope, cancel. </span> <span class="line" data-startTime="4267">So as I'm scrolling here &mdash; </span><span class="line" data-startTime="4267">it's not picking that up. </span> <span class="line" data-startTime="4270">OK. </span> <span class="line" data-startTime="4271">Never mind. </span> <span class="line" data-startTime="4272">I won't show you that tool. </span> <span class="line" data-startTime="4273">Anyhow, let's be done </span><span class="line" data-startTime="4273">with this for the evening </span><span class="line" data-startTime="4276">because I think Pete has </span><span class="line" data-startTime="4276">some other stuff he wants </span><span class="line" data-startTime="4278">to talk to you </span><span class="line" data-startTime="4278">guys about tonight. </span></p>

<p><span class="line" data-startTime="4281">So thank you for </span><span class="line" data-startTime="4281">your time tonight. </span> <span class="line" data-startTime="4284">Perfmatters. </span> <span class="line" data-startTime="4285">Wait, wait, wait. </span> <span class="line" data-startTime="4287">I'll let you start </span><span class="line" data-startTime="4287">the clap in a second. </span> <span class="line" data-startTime="4288">So here's how you </span><span class="line" data-startTime="4288">get a hold of me. </span> <span class="line" data-startTime="4290">If you guys, if anything today </span><span class="line" data-startTime="4290">was controversial or something </span><span class="line" data-startTime="4294">worth tweeting or </span><span class="line" data-startTime="4294">something you just </span><span class="line" data-startTime="4295">want to ask more questions </span><span class="line" data-startTime="4295">about, go ahead and find me. </span> <span class="line" data-startTime="4297">Make sure you join the Google+ </span><span class="line" data-startTime="4297">Web Performance community. </span> <span class="line" data-startTime="4299">There's a lot of </span><span class="line" data-startTime="4299">great stuff there. </span> <span class="line" data-startTime="4300">Please, for the love of </span><span class="line" data-startTime="4300">god, use #perfmatters. </span> <span class="line" data-startTime="4302">Follow #perfmatters. </span></p>

<p><span class="line" data-startTime="4303">It's a brand. </span> <span class="line" data-startTime="4304">You should wear this at work. </span> <span class="line" data-startTime="4306">Everything you do, you should </span><span class="line" data-startTime="4306">be challenging your employees, </span><span class="line" data-startTime="4310">your managers, the </span><span class="line" data-startTime="4310">owners of your company, </span><span class="line" data-startTime="4313">#perfmatters, </span><span class="line" data-startTime="4313">#perfmatters, #perfmatters. </span> <span class="line" data-startTime="4315">It's going to be the </span><span class="line" data-startTime="4315">thing that separates </span><span class="line" data-startTime="4317">the billion-dollar </span><span class="line" data-startTime="4317">companies from everybody </span><span class="line" data-startTime="4320">else on the mobile </span><span class="line" data-startTime="4320">web in the next year. </span> <span class="line" data-startTime="4323">In fact, it already is. </span> <span class="line" data-startTime="4324">It's already [INAUDIBLE]. </span> <span class="line" data-startTime="4325">Challenge everyone. </span> <span class="line" data-startTime="4327">Hold them to the </span><span class="line" data-startTime="4327">standards of #perfmatters. </span></p>

<p><span class="line" data-startTime="4328">Now you can start the clap. </span> <span class="line" data-startTime="4330">Yes. </span> <span class="line" data-startTime="4330">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="4331"><span class="speakerName">Colt McAnlis</span>: Thank </span><span class="line" data-startTime="4331">you for your time. </span></p>