<p class="speaker"><span class="line" data-starttime="0"><span class="speakerName">Joshua Marantz</span>: Good morning, </span><span class="line" data-startTime="0">and welcome to </span><span class="line" data-startTime="2">Make the Web Faster. </span> <span class="line" data-startTime="4">Today we're going to bring you </span><span class="line" data-startTime="4">three new technologies. </span> <span class="line" data-startTime="8">My name is Joshua Marantz and </span><span class="line" data-startTime="8">I'm going to talk about </span><span class="line" data-startTime="10">mod_pagespeed, which is </span><span class="line" data-startTime="10">an Apache module which </span><span class="line" data-startTime="14">automatically rewrites </span><span class="line" data-startTime="14">web pages to make </span><span class="line" data-startTime="16">them display faster. </span> <span class="line" data-startTime="19">Richard Rabbat will talk about </span><span class="line" data-startTime="19">WebP, which is a new image </span><span class="line" data-startTime="22">format for the web. </span> <span class="line" data-startTime="23">And Hakon Wium Le will talk </span><span class="line" data-startTime="23">about Opera and WebP. </span> <span class="line" data-startTime="30">So, why make your </span><span class="line" data-startTime="30">website fast? </span><span class="line" data-startTime="33">The benefits are many, among </span><span class="line" data-startTime="33">them are user satisfaction &mdash; </span><span class="line" data-startTime="36">people like to go to </span><span class="line" data-startTime="36">fast website &mdash; </span><span class="line" data-startTime="38">better engagement, </span><span class="line" data-startTime="38">and more revenue. </span></p>

<p><span class="line" data-startTime="41">But it's hard. </span> <span class="line" data-startTime="43">The techniques for improving </span><span class="line" data-startTime="43">websites are reasonably </span><span class="line" data-startTime="46">well-known, but they're </span><span class="line" data-startTime="46">cumbersome </span><span class="line" data-startTime="48">to implement manually. </span> <span class="line" data-startTime="49">There's trade-offs to make. </span> <span class="line" data-startTime="50">There's the trade-off </span><span class="line" data-startTime="50">of maintainability &mdash; </span><span class="line" data-startTime="54">of being able to easily change </span><span class="line" data-startTime="54">your website and maintain it &mdash; </span><span class="line" data-startTime="57">versus keeping minified versions </span><span class="line" data-startTime="57">and sprites of your </span><span class="line" data-startTime="60">images and your text, </span><span class="line" data-startTime="60">et cetera. </span> <span class="line" data-startTime="62">There's an agility trade-off, </span><span class="line" data-startTime="62">because if you set your cache </span><span class="line" data-startTime="66">lifetimes for a long time out, </span><span class="line" data-startTime="66">it's very difficult to change </span><span class="line" data-startTime="69">your JavaScript to fix bugs and </span><span class="line" data-startTime="69">have it push out because </span><span class="line" data-startTime="73">users' browsers have cached </span><span class="line" data-startTime="73">in it an old version. </span> <span class="line" data-startTime="76">And if you set the </span><span class="line" data-startTime="76">cache lifetime </span><span class="line" data-startTime="77">short, you get agility. </span></p>

<p><span class="line" data-startTime="79">But then everybody after they </span><span class="line" data-startTime="79">come back to your site, if </span><span class="line" data-startTime="82">they come back on a daily basis </span><span class="line" data-startTime="82">they'll get a fresh </span><span class="line" data-startTime="84">download each time. </span> <span class="line" data-startTime="86">So another aspect is that </span><span class="line" data-startTime="86">browsers are moving forward at </span><span class="line" data-startTime="90">a rapid pace. </span> <span class="line" data-startTime="91">New browsers have new techniques </span><span class="line" data-startTime="91">that can help web </span><span class="line" data-startTime="95">developers build faster </span><span class="line" data-startTime="95">websites. </span> <span class="line" data-startTime="96">But the old browsers lack these </span><span class="line" data-startTime="96">techniques, and you </span><span class="line" data-startTime="99">don't want to leave all the </span><span class="line" data-startTime="99">users who are stuck on old </span><span class="line" data-startTime="101">browsers for various </span><span class="line" data-startTime="101">reasons behind. </span></p>

<p><span class="line" data-startTime="103">You want to continue to support </span><span class="line" data-startTime="103">them well letting new </span><span class="line" data-startTime="106">browsers exploit </span><span class="line" data-startTime="106">the techniques. </span> <span class="line" data-startTime="107">So you kind of have to have some </span><span class="line" data-startTime="107">server-side intelligence. </span> <span class="line" data-startTime="110">And we're discovering new </span><span class="line" data-startTime="110">techniques all the time. </span> <span class="line" data-startTime="112">There's a talk later today about </span><span class="line" data-startTime="112">mobile best practices. </span> <span class="line" data-startTime="117">And as these techniques are </span><span class="line" data-startTime="117">learned and adopted adopted </span><span class="line" data-startTime="120">and changed, you want to be able </span><span class="line" data-startTime="120">to have a tool that helps </span><span class="line" data-startTime="122">adopt your website, rather </span><span class="line" data-startTime="122">than employing somebody </span><span class="line" data-startTime="124">full-time to keep up with these </span><span class="line" data-startTime="124">techniques and adjust </span><span class="line" data-startTime="127">your website accordingly. </span> <span class="line" data-startTime="128">So the solution is to </span><span class="line" data-startTime="128">use automated tools. </span></p>

<p><span class="line" data-startTime="131">So this is what mod_pagespeed </span><span class="line" data-startTime="131">is for. </span> <span class="line" data-startTime="134">Optimize your website without </span><span class="line" data-startTime="134">having to change it. </span> <span class="line" data-startTime="138">You don't have to change the way </span><span class="line" data-startTime="138">you generate content, you </span><span class="line" data-startTime="141">don't have to minify your CSS </span><span class="line" data-startTime="141">and your JavaScript by hand </span><span class="line" data-startTime="144">and keep two versions </span><span class="line" data-startTime="144">around, spriting </span><span class="line" data-startTime="146">your images, et cetera. </span> <span class="line" data-startTime="148">You don't have to manually run </span><span class="line" data-startTime="148">ImageMagick over your whole </span><span class="line" data-startTime="151">library of photos and keep </span><span class="line" data-startTime="151">two versions of those. </span> <span class="line" data-startTime="153">Get a machine to do </span><span class="line" data-startTime="153">that for you. </span> <span class="line" data-startTime="155">That's what machines </span><span class="line" data-startTime="155">are good at. </span> <span class="line" data-startTime="157">So what does mod_pagespeed do? </span><span class="line" data-startTime="159">It actually does </span><span class="line" data-startTime="159">no black magic. </span></p>

<p><span class="line" data-startTime="162">the techniques for optimizing </span><span class="line" data-startTime="162">webpages, there's basically </span><span class="line" data-startTime="165">two bibles written by Steve </span></p>

<p class="speaker"><span class="line" data-starttime="165"><span class="speakerName">Souders</span>: High Performance </span><span class="line" data-startTime="167">Websites and Even </span><span class="line" data-startTime="167">Faster Websites. </span> <span class="line" data-startTime="170">And they are pretty much the </span><span class="line" data-startTime="170">techniques that we use today </span><span class="line" data-startTime="174">in mod_pagespeed to make </span><span class="line" data-startTime="174">your website faster. </span> <span class="line" data-startTime="177">Image compression, sizing images </span><span class="line" data-startTime="177">to the right size, </span><span class="line" data-startTime="180">minifying CSS, JavaScript, </span><span class="line" data-startTime="180">and HTML. </span> <span class="line" data-startTime="184">We take small images that are </span><span class="line" data-startTime="184">below a certain threshold and </span><span class="line" data-startTime="187">inline them. </span> <span class="line" data-startTime="188">Same with CSS and JavaScript. </span> <span class="line" data-startTime="190">And probably most importantly, </span><span class="line" data-startTime="190">we extend cache lifetimes, and </span><span class="line" data-startTime="193">we'll talk more about. </span></p>

<p><span class="line" data-startTime="195">All of these techniques </span><span class="line" data-startTime="195">are listed. </span> <span class="line" data-startTime="196">We have a demo site called </span><span class="line" data-startTime="196">modpagespeed.com, you go to </span><span class="line" data-startTime="200">that site, it shows you every </span><span class="line" data-startTime="200">optimization that we do, </span><span class="line" data-startTime="203">documentation before </span><span class="line" data-startTime="203">and after. </span> <span class="line" data-startTime="207">So here's one example we'll dive </span><span class="line" data-startTime="207">into called combining CSS </span><span class="line" data-startTime="212">files, so if you have four small </span><span class="line" data-startTime="212">CSS files, each one of </span><span class="line" data-startTime="216">these when it's rendered in a </span><span class="line" data-startTime="216">browser would represent a </span><span class="line" data-startTime="219">separate HTTP request. For all </span><span class="line" data-startTime="219">kinds of reasons it's better </span><span class="line" data-startTime="222">to bundle these into one file </span><span class="line" data-startTime="222">and this is not very hard to </span><span class="line" data-startTime="227">do by hand, but it's kind of </span><span class="line" data-startTime="227">hard to maintain over time and </span><span class="line" data-startTime="230">it's kind of a conflict. </span> <span class="line" data-startTime="231">So to get a tool to do that </span><span class="line" data-startTime="231">for you, you turn on </span><span class="line" data-startTime="234">mod_pagespeed and the four lines </span><span class="line" data-startTime="234">of links become one link </span><span class="line" data-startTime="238">with a concatenated name. </span></p>

<p><span class="line" data-startTime="241">And one of the most important </span><span class="line" data-startTime="241">things we do is we add to the </span><span class="line" data-startTime="245">concatenated name a hashtag </span><span class="line" data-startTime="245">which is the md5sum of the </span><span class="line" data-startTime="250">content of the file. </span> <span class="line" data-startTime="252">And by doing this, that enables </span><span class="line" data-startTime="252">us to serve this </span><span class="line" data-startTime="255">resource, a combined </span><span class="line" data-startTime="255">CSS file, with a </span><span class="line" data-startTime="258">very long cache lifetime. </span> <span class="line" data-startTime="259">This means that browsers </span><span class="line" data-startTime="259">will retain </span><span class="line" data-startTime="262">knowledge about this file &mdash; </span><span class="line" data-startTime="265">we set the cache lifetime </span><span class="line" data-startTime="265">for a year. </span> <span class="line" data-startTime="268">But if you want to go back and </span><span class="line" data-startTime="268">change one of these CSS files </span><span class="line" data-startTime="271">that it's built out of, then </span><span class="line" data-startTime="271">mod_pagespeed will pick up </span><span class="line" data-startTime="278">that change, will recompute the </span><span class="line" data-startTime="278">md5 tag, will serve the </span><span class="line" data-startTime="282">rewritten CSS link with a new </span><span class="line" data-startTime="282">name, and the old stale entry </span><span class="line" data-startTime="287">in the browser cache </span><span class="line" data-startTime="287">doesn't hurt you. </span> <span class="line" data-startTime="289">So you kind of get the best of </span><span class="line" data-startTime="289">both worlds, which is a long </span><span class="line" data-startTime="292">cache lifetime but an easily </span><span class="line" data-startTime="292">changeable site. </span> <span class="line" data-startTime="297">So how do you bring </span><span class="line" data-startTime="297">mod_pagespeed into your web </span><span class="line" data-startTime="301">server flow? </span><span class="line" data-startTime="302">You have an existing </span><span class="line" data-startTime="302">Apache HTTP server. </span></p>

<p><span class="line" data-startTime="306">You can download from </span><span class="line" data-startTime="306">co.google.com. </span> <span class="line" data-startTime="310">Our source code and pilot </span><span class="line" data-startTime="310">where we have pre-built </span><span class="line" data-startTime="314">binaries for CentOS and </span><span class="line" data-startTime="314">DBN and Ubuntu. </span> <span class="line" data-startTime="318">And so you pretty much download </span><span class="line" data-startTime="318">into the Apache </span><span class="line" data-startTime="321">server, and now you don't have </span><span class="line" data-startTime="321">to change your content, you </span><span class="line" data-startTime="325">don't have to change your </span><span class="line" data-startTime="325">content generation flow. </span> <span class="line" data-startTime="328">You may want to tweak some of </span><span class="line" data-startTime="328">the settings in pagespeed.com, </span><span class="line" data-startTime="331">that's optional. </span> <span class="line" data-startTime="332">And you get out of that reduced </span><span class="line" data-startTime="332">latency, improved </span><span class="line" data-startTime="337">bandwidth, and much longer </span><span class="line" data-startTime="337">cache lifetimes. </span> <span class="line" data-startTime="344">So taking a peek under the hood, </span><span class="line" data-startTime="344">mod_pagespeed is really </span><span class="line" data-startTime="348">divided into two sections. </span> <span class="line" data-startTime="354">There's a platform-independent </span><span class="line" data-startTime="354">rewriting infrastructure, and </span><span class="line" data-startTime="358">it has a whole bunch of pieces </span><span class="line" data-startTime="358">in it, but it's all called </span><span class="line" data-startTime="360">Pagespeed Automatic. </span></p>

<p><span class="line" data-startTime="362">And this is the engine that </span><span class="line" data-startTime="362">rewrites webpages on the fly. </span> <span class="line" data-startTime="367">On the right we have a bunch of </span><span class="line" data-startTime="367">plug-ins, which are used to </span><span class="line" data-startTime="370">adapt this architecture to </span><span class="line" data-startTime="370">a specific platform. </span> <span class="line" data-startTime="373">And the first deployment </span><span class="line" data-startTime="373">for this technology </span><span class="line" data-startTime="377">is an Apache module. </span> <span class="line" data-startTime="378">So we have an Apache module </span><span class="line" data-startTime="378">gasket, and this defines </span><span class="line" data-startTime="380">mechanisms for caching HTTP </span><span class="line" data-startTime="380">content, caching metadata, </span><span class="line" data-startTime="385">fetching resources, threading, </span><span class="line" data-startTime="385">and other assorted tasks. it's </span><span class="line" data-startTime="389">kind of a plug-in architecture </span><span class="line" data-startTime="389">so that this can be applied to </span><span class="line" data-startTime="391">multiple platforms, </span><span class="line" data-startTime="391">but our deployment </span><span class="line" data-startTime="396">initially is Apache HTTP. </span> <span class="line" data-startTime="400">How much factor has </span><span class="line" data-startTime="400">this made the web? </span><span class="line" data-startTime="404">So so far, this has been </span><span class="line" data-startTime="404">launched for about six months. </span> <span class="line" data-startTime="409">We launched in November </span><span class="line" data-startTime="409">of last year. </span></p>

<p><span class="line" data-startTime="411">A few days after that, </span><span class="line" data-startTime="411">DreamHost, a hosting provider, </span><span class="line" data-startTime="415">made it a push button on </span><span class="line" data-startTime="415">their control panel. </span> <span class="line" data-startTime="417">So any DreamHost-hosted site </span><span class="line" data-startTime="417">can push a button and </span><span class="line" data-startTime="421">mod_pagespeed is activated </span><span class="line" data-startTime="421">on their site. </span> <span class="line" data-startTime="424">A couple of months later, we </span><span class="line" data-startTime="424">announced with Go Daddy, the </span><span class="line" data-startTime="427">dominant hosting provider &mdash; </span><span class="line" data-startTime="429">who has a similar push-button </span><span class="line" data-startTime="429">flow, it's actually a config </span><span class="line" data-startTime="432">file change &mdash; but any Go Daddy </span><span class="line" data-startTime="432">user can enable mod_pagespeed </span><span class="line" data-startTime="436">with, basically, a line </span><span class="line" data-startTime="436">in a config file. </span> <span class="line" data-startTime="442">The project is built on a large </span><span class="line" data-startTime="442">base of source code, </span><span class="line" data-startTime="446">including the pagespeed source </span><span class="line" data-startTime="446">code and a lot of Chromium </span><span class="line" data-startTime="449">source code, but we have about </span><span class="line" data-startTime="449">60,000 lines of code that we </span><span class="line" data-startTime="452">wrote ourselves for this. </span></p>

<p><span class="line" data-startTime="454">It's a significant project. </span> <span class="line" data-startTime="456">About 54,000 sites have </span><span class="line" data-startTime="456">installed and are running </span><span class="line" data-startTime="460">mod-pagespeed as of today, and </span><span class="line" data-startTime="460">the number is climbing. </span> <span class="line" data-startTime="466">So what does mod_pagespeed </span><span class="line" data-startTime="466">do to the sites? </span><span class="line" data-startTime="468">Well, let's take a look at 28 </span><span class="line" data-startTime="468">sites that we looked at that </span><span class="line" data-startTime="472">have installed mod_pagespeed. </span> <span class="line" data-startTime="474">To test the site, we used a tool </span><span class="line" data-startTime="474">called webpagetest.org. </span> <span class="line" data-startTime="477">webpagetest.org is a </span><span class="line" data-startTime="477">client-side testing </span><span class="line" data-startTime="483">technology. </span> <span class="line" data-startTime="483">It's built in with </span><span class="line" data-startTime="483">various browsers. </span> <span class="line" data-startTime="486">In our case, the browser </span><span class="line" data-startTime="486">that we used was IE8. </span> <span class="line" data-startTime="490">So these are all IE8-based </span><span class="line" data-startTime="490">numbers. </span> <span class="line" data-startTime="493">And the blue lines indicate </span><span class="line" data-startTime="493">the first time the page is </span><span class="line" data-startTime="499">brought up. </span> <span class="line" data-startTime="499">And the red lines indicate the </span><span class="line" data-startTime="499">repeat view, so that's with a </span><span class="line" data-startTime="502">warm cache. </span> <span class="line" data-startTime="504">And every website </span><span class="line" data-startTime="504">is different. </span> <span class="line" data-startTime="508">We find that a typical </span><span class="line" data-startTime="508">improvement between 20% and </span><span class="line" data-startTime="512">30% is not surprising. </span> <span class="line" data-startTime="514">We've seen improvements </span><span class="line" data-startTime="514">as much as 50%. </span></p>

<p><span class="line" data-startTime="517">And this is basically just by </span><span class="line" data-startTime="517">downloading a module and </span><span class="line" data-startTime="519">turning it on. </span> <span class="line" data-startTime="521">There are websites that have </span><span class="line" data-startTime="521">already been hand tuned to </span><span class="line" data-startTime="524">follow all the best practices, </span><span class="line" data-startTime="524">basically do the same things </span><span class="line" data-startTime="526">manually that mod_pagespeed </span><span class="line" data-startTime="526">does automatically. </span> <span class="line" data-startTime="530">And in that case, we don't </span><span class="line" data-startTime="530">offer much improvement. </span> <span class="line" data-startTime="532">In fact, we add some overhead </span><span class="line" data-startTime="532">because we have to go and </span><span class="line" data-startTime="534">parse the website and say, </span><span class="line" data-startTime="534">nope, this is all done. </span> <span class="line" data-startTime="539">So let's look at this data from </span><span class="line" data-startTime="539">a different perspective. </span> <span class="line" data-startTime="542">Let's look at the images on the </span><span class="line" data-startTime="542">top 1,000 websites on the </span><span class="line" data-startTime="546">web, the Alexa 1,000. </span> <span class="line" data-startTime="549">On this corpus of images, a </span><span class="line" data-startTime="549">fairly significant number of </span><span class="line" data-startTime="555">them, mod_pagespeed just looked </span><span class="line" data-startTime="555">at them and said, I can </span><span class="line" data-startTime="557">get rid of a huge percentage </span><span class="line" data-startTime="557">of the bytes. </span> <span class="line" data-startTime="560">Over 75% of the bytes. </span></p>

<p><span class="line" data-startTime="562">This would typically happen if </span><span class="line" data-startTime="562">somebody takes a photograph </span><span class="line" data-startTime="566">from a camera and puts it into </span><span class="line" data-startTime="566">a thumbnail on a webpage. </span> <span class="line" data-startTime="568">Most of those pixels are not </span><span class="line" data-startTime="568">going to be seen by the user, </span><span class="line" data-startTime="571">so why do you want to </span><span class="line" data-startTime="571">ship them over the </span><span class="line" data-startTime="572">wire all the time? </span><span class="line" data-startTime="574">You get a machine to reduce </span><span class="line" data-startTime="574">that for you. </span> <span class="line" data-startTime="575">You don't have to manage that </span><span class="line" data-startTime="575">with compressing it with </span><span class="line" data-startTime="577">ImageMagick yourself, you just </span><span class="line" data-startTime="577">let mod_pagespeed do it. </span> <span class="line" data-startTime="581">But a really surprisingly high </span><span class="line" data-startTime="581">number of images can be </span><span class="line" data-startTime="585">improved by a significant </span><span class="line" data-startTime="585">amount, say 20% to 25%. </span> <span class="line" data-startTime="589">And these typically come from </span><span class="line" data-startTime="589">just better compression </span><span class="line" data-startTime="592">ratios, or re-encoding color </span><span class="line" data-startTime="592">maps to be more optimal, or </span><span class="line" data-startTime="598">getting rid of all of the </span><span class="line" data-startTime="598">metadata, the f-stop at which </span><span class="line" data-startTime="601">the photograph was </span><span class="line" data-startTime="601">taken, et cetera. </span> <span class="line" data-startTime="605">So let's dive into one of the </span><span class="line" data-startTime="605">sites that has installed </span><span class="line" data-startTime="609">mod_pagespeed, called </span><span class="line" data-startTime="609">androidacademy.com. </span></p>

<p><span class="line" data-startTime="613">First of all, we know that </span><span class="line" data-startTime="613">this has installed </span><span class="line" data-startTime="615">mod_pagespeed because when we </span><span class="line" data-startTime="615">look at the HTTP response </span><span class="line" data-startTime="619">headers from that site, </span><span class="line" data-startTime="619">one of them &mdash; </span><span class="line" data-startTime="622">the one where the gray </span><span class="line" data-startTime="622">arrow is pointing &mdash; </span><span class="line" data-startTime="624">it says x-mod-pagespeed. </span> <span class="line" data-startTime="626">So we know that that site was </span><span class="line" data-startTime="626">rewritten by mod_pagespeed. </span> <span class="line" data-startTime="630">So we tested this site </span><span class="line" data-startTime="630">webpagetest.org, which </span><span class="line" data-startTime="633">produces a lot of data. </span> <span class="line" data-startTime="634">It also produces videos. </span> <span class="line" data-startTime="646">So on the left, mod_pagespeed </span><span class="line" data-startTime="646">is off, on the right, </span><span class="line" data-startTime="648">mod_pagespeed is on. </span></p>

<p><span class="line" data-startTime="649">So this a downloaded and go. </span> <span class="line" data-startTime="651">In this case, the site is sped </span><span class="line" data-startTime="651">up noticeably by turning </span><span class="line" data-startTime="657">mod_pagespeed on. </span> <span class="line" data-startTime="659">But let's go back and </span><span class="line" data-startTime="659">look at the numbers. </span> <span class="line" data-startTime="667">So here's some colored bars. </span> <span class="line" data-startTime="670">The top colored bars represent </span><span class="line" data-startTime="670">the first view. </span> <span class="line" data-startTime="672">The off on the top </span><span class="line" data-startTime="672">and on the below. </span> <span class="line" data-startTime="675">And below that, you see </span><span class="line" data-startTime="675">the repeat views. </span> <span class="line" data-startTime="678">The first bar, the blue </span><span class="line" data-startTime="678">bar, represents the </span><span class="line" data-startTime="681">time to first byte. </span> <span class="line" data-startTime="682">That's the time between when the </span><span class="line" data-startTime="682">browser sent the request </span><span class="line" data-startTime="686">for the HTML file and </span><span class="line" data-startTime="686">the first byte of </span><span class="line" data-startTime="687">HTML that came back. </span> <span class="line" data-startTime="689">And you'll notice that when we </span><span class="line" data-startTime="689">turn mod_pagespeed on, we </span><span class="line" data-startTime="692">actually make that take </span><span class="line" data-startTime="692">a little bit longer. </span></p>

<p><span class="line" data-startTime="694">And that's because we've </span><span class="line" data-startTime="694">introduced this server, this </span><span class="line" data-startTime="698">rewriting pipeline </span><span class="line" data-startTime="698">into the flow. </span> <span class="line" data-startTime="700">So we've actually added </span><span class="line" data-startTime="700">some processing. </span> <span class="line" data-startTime="704">Typically 10 to 30 milliseconds </span><span class="line" data-startTime="704">of delay is added </span><span class="line" data-startTime="708">to that first byte. </span> <span class="line" data-startTime="709">But we find so much on most </span><span class="line" data-startTime="709">websites to improve that by </span><span class="line" data-startTime="713">the time you get to the time </span><span class="line" data-startTime="713">to first paint, we've </span><span class="line" data-startTime="716">benefited the site by </span><span class="line" data-startTime="716">close to a second. </span> <span class="line" data-startTime="718">By the time you get to the page </span><span class="line" data-startTime="718">load time, the onload </span><span class="line" data-startTime="721">handler, we've benefited the </span><span class="line" data-startTime="721">site by more than two seconds </span><span class="line" data-startTime="724">on the first view. </span> <span class="line" data-startTime="726">And on repeat views, </span><span class="line" data-startTime="726">the numbers are </span><span class="line" data-startTime="728">a little bit different. </span></p>

<p><span class="line" data-startTime="730">And the reasons for the </span><span class="line" data-startTime="730">improvement are also </span><span class="line" data-startTime="732">different, and we'll </span><span class="line" data-startTime="732">go into those. </span> <span class="line" data-startTime="736">So these are the waterfall </span><span class="line" data-startTime="736">diagrams for this site, </span><span class="line" data-startTime="740">androidacademy.com, that have </span><span class="line" data-startTime="740">been collected and rendered by </span><span class="line" data-startTime="745">webpagetest.org. </span> <span class="line" data-startTime="748">On the left mod_pagespeed </span><span class="line" data-startTime="748">is off, on the right </span><span class="line" data-startTime="750">mod_pagespeed is on. </span> <span class="line" data-startTime="753">The top ones are first </span><span class="line" data-startTime="753">view and the bottom </span><span class="line" data-startTime="755">ones are repeat view. </span> <span class="line" data-startTime="757">And each of the things, you </span><span class="line" data-startTime="757">don't have to zoom very far </span><span class="line" data-startTime="759">into these things and look </span><span class="line" data-startTime="759">at all the data to </span><span class="line" data-startTime="761">understand the story. </span> <span class="line" data-startTime="763">On the first view, you'll notice </span><span class="line" data-startTime="763">that the waterfall </span><span class="line" data-startTime="766">diagram is significantly </span><span class="line" data-startTime="766">shorter. </span></p>

<p><span class="line" data-startTime="768">It's probably about 30% shorter </span><span class="line" data-startTime="768">with mod_pagespeed on. </span> <span class="line" data-startTime="771">And that's because </span><span class="line" data-startTime="771">of two things. </span> <span class="line" data-startTime="773">It's because of inlining </span><span class="line" data-startTime="773">small resources so </span><span class="line" data-startTime="777">there's less HTTP requests. </span> <span class="line" data-startTime="778">And it's because of combining </span><span class="line" data-startTime="778">resources, combining multiple </span><span class="line" data-startTime="781">CSS files into one, et cetera. </span> <span class="line" data-startTime="784">On the bottom, we have </span><span class="line" data-startTime="784">the repeat view. </span> <span class="line" data-startTime="788">I should say the first view </span><span class="line" data-startTime="788">also benefits because we </span><span class="line" data-startTime="791">compress images. </span> <span class="line" data-startTime="792">So we make the images smaller, </span><span class="line" data-startTime="792">but it's harder to tell that </span><span class="line" data-startTime="796">by looking at a zoomed out </span><span class="line" data-startTime="796">view of the webpage. </span> <span class="line" data-startTime="799">You'd have to look at the </span><span class="line" data-startTime="799">waterfall diagram in a lot </span><span class="line" data-startTime="802">more detail to see that. </span></p>

<p><span class="line" data-startTime="803">But we'll take a look in more </span><span class="line" data-startTime="803">detail at an example where we </span><span class="line" data-startTime="807">can show that later. </span> <span class="line" data-startTime="809">So the bottom charts with the </span><span class="line" data-startTime="809">big yellow blobs, those are </span><span class="line" data-startTime="813">the repeat view. </span> <span class="line" data-startTime="814">And what those yellow bars mean </span><span class="line" data-startTime="814">is that's called a 304. </span> <span class="line" data-startTime="818">That's where the browser has </span><span class="line" data-startTime="818">a copy of the resource &mdash; </span><span class="line" data-startTime="822">an image or a CSS file &mdash; </span><span class="line" data-startTime="823">but it doesn't know because it </span><span class="line" data-startTime="823">doesn't have a long caching </span><span class="line" data-startTime="826">lifetime or the cache </span><span class="line" data-startTime="826">is expired. </span> <span class="line" data-startTime="827">Is this valid or not? </span><span class="line" data-startTime="829">So it has to send a request to </span><span class="line" data-startTime="829">the server saying, hey I've </span><span class="line" data-startTime="832">got this resource. </span></p>

<p><span class="line" data-startTime="833">It's got this hex tag </span><span class="line" data-startTime="833">called an Etag. </span> <span class="line" data-startTime="835">Is this one good? </span><span class="line" data-startTime="836">And in this case, during these </span><span class="line" data-startTime="836">tests, it is good. </span> <span class="line" data-startTime="841">So the server sends back, </span><span class="line" data-startTime="841">yes, yes, go with that. </span> <span class="line" data-startTime="844">And that's a very low bandwidth </span><span class="line" data-startTime="844">request, but it </span><span class="line" data-startTime="848">incurs a complete </span><span class="line" data-startTime="848">roundtrip time. </span> <span class="line" data-startTime="851">So with mod_pagespeed off, you </span><span class="line" data-startTime="851">have to do a lot of round </span><span class="line" data-startTime="854">trips to the server, even with </span><span class="line" data-startTime="854">a warm cache, just to make </span><span class="line" data-startTime="858">sure that all these resources </span><span class="line" data-startTime="858">are still valid. </span></p>

<p><span class="line" data-startTime="860">Because we've done cache </span><span class="line" data-startTime="860">extension and added those </span><span class="line" data-startTime="863">hashtags, those md5sums </span><span class="line" data-startTime="863">to every URL. </span> <span class="line" data-startTime="867">The browser, if it has the </span><span class="line" data-startTime="867">URL, it's the correct URL </span><span class="line" data-startTime="870">because the content hash </span><span class="line" data-startTime="870">is in the URL. </span> <span class="line" data-startTime="873">So that's why the repeat view </span><span class="line" data-startTime="873">waterfall diagram with </span><span class="line" data-startTime="877">mod_pagespeed on looks a </span><span class="line" data-startTime="877">lot more compelling. </span> <span class="line" data-startTime="884">So let's take a look at how </span><span class="line" data-startTime="884">we do our measurement. </span> <span class="line" data-startTime="890">With webpagetest.org, we </span><span class="line" data-startTime="890">did four runs, which is </span><span class="line" data-startTime="896">mod_pagespeed on and off with </span><span class="line" data-startTime="896">repeat view and first view. </span> <span class="line" data-startTime="899">And then we repeat </span><span class="line" data-startTime="899">that 50 times. </span> <span class="line" data-startTime="901">And the reason that we repeat </span><span class="line" data-startTime="901">that 50 times is that </span><span class="line" data-startTime="903">measurement on the </span><span class="line" data-startTime="903">web is hard. </span></p>

<p><span class="line" data-startTime="906">If you were to get a stopwatch </span><span class="line" data-startTime="906">and hit the refresh button in </span><span class="line" data-startTime="912">your browser a whole bunch of </span><span class="line" data-startTime="912">times and just write down all </span><span class="line" data-startTime="914">the numbers, you'd see </span><span class="line" data-startTime="914">that there's a </span><span class="line" data-startTime="916">fair amount of variance. </span> <span class="line" data-startTime="917">It's kind of hard to do this. </span> <span class="line" data-startTime="918">It's a lot easier for machine to </span><span class="line" data-startTime="918">do this, but still there's </span><span class="line" data-startTime="920">a lot of things in between the </span><span class="line" data-startTime="920">client and the server that can </span><span class="line" data-startTime="925">cause variance. </span> <span class="line" data-startTime="927">It's a measurement variance. </span> <span class="line" data-startTime="928">One of those things </span><span class="line" data-startTime="928">is the network. </span> <span class="line" data-startTime="930">In this case, Android Academy is </span><span class="line" data-startTime="930">hosted in England, and our </span><span class="line" data-startTime="935">testing clients were </span><span class="line" data-startTime="935">located in the US. </span> <span class="line" data-startTime="938">So we had an intercontinental </span><span class="line" data-startTime="938">delay, which probably added a </span><span class="line" data-startTime="943">fair amount of variance to our </span><span class="line" data-startTime="943">test. And I think that's </span><span class="line" data-startTime="945">probably what accounts for </span><span class="line" data-startTime="945">most of the jitter. </span> <span class="line" data-startTime="947">But we have also seen with many </span><span class="line" data-startTime="947">other sites where the </span><span class="line" data-startTime="952">servers are overloaded. </span> <span class="line" data-startTime="956">And you'll see the red </span><span class="line" data-startTime="956">and blue dots are </span><span class="line" data-startTime="958">much more of a jumble. </span> <span class="line" data-startTime="959">And it's hard, if you were to </span><span class="line" data-startTime="959">just one repeat or three </span><span class="line" data-startTime="963">repeats or something like that, </span><span class="line" data-startTime="963">you could easily draw </span><span class="line" data-startTime="965">the wrong conclusion. </span></p>

<p><span class="line" data-startTime="966">And you have to see a lot </span><span class="line" data-startTime="966">of data for us to </span><span class="line" data-startTime="969">be able to get confident. </span> <span class="line" data-startTime="970">So in this case, while there's </span><span class="line" data-startTime="970">a fair amount of jitter, the </span><span class="line" data-startTime="975">improvement is pretty clear. </span> <span class="line" data-startTime="978">There's jitter in the </span><span class="line" data-startTime="978">measurement, but the results </span><span class="line" data-startTime="983">are quite clear that </span><span class="line" data-startTime="983">mod_pagespeed has consistently </span><span class="line" data-startTime="985">benefited this site. </span> <span class="line" data-startTime="990">So where are we going </span><span class="line" data-startTime="990">with mod_pagespeed </span><span class="line" data-startTime="992">speed down the road? </span><span class="line" data-startTime="997">We are installed on around </span><span class="line" data-startTime="997">60,000 servers. </span> <span class="line" data-startTime="1000">That's a start, but we'd like to </span><span class="line" data-startTime="1000">make the whole web faster, </span><span class="line" data-startTime="1003">and not just 60,000 sites. </span></p>

<p><span class="line" data-startTime="1005">So we're seeking leveraged ways </span><span class="line" data-startTime="1005">to do that &mdash; high volume </span><span class="line" data-startTime="1008">partners, hosting </span><span class="line" data-startTime="1008">providers, CDNs. </span> <span class="line" data-startTime="1011">We'd like to encourage leverage </span><span class="line" data-startTime="1011">integrations with </span><span class="line" data-startTime="1014">servers, proxies, and caches </span><span class="line" data-startTime="1014">that could put </span><span class="line" data-startTime="1017">this technology inline. </span> <span class="line" data-startTime="1018">And we saw in the architecture </span><span class="line" data-startTime="1018">slide earlier, it's kind of a </span><span class="line" data-startTime="1020">plug-in architecture. </span> <span class="line" data-startTime="1021">So it should be feasible to </span><span class="line" data-startTime="1021">integrate this rewriting </span><span class="line" data-startTime="1024">technology into other stacks </span><span class="line" data-startTime="1024">other than the Apache stack. </span> <span class="line" data-startTime="1031">And we've just been going all </span><span class="line" data-startTime="1031">out trying to support every </span><span class="line" data-startTime="1033">user that uses mod_pagespeed. </span> <span class="line" data-startTime="1034">You can see us on Twitter, you </span><span class="line" data-startTime="1034">can see us on our discussions </span><span class="line" data-startTime="1037">list, et cetera, trying to get </span><span class="line" data-startTime="1037">everybody successful that's </span><span class="line" data-startTime="1040">trying to use it. </span></p>

<p><span class="line" data-startTime="1042">We'd also like to make the web </span><span class="line" data-startTime="1042">more fast. We've been going to </span><span class="line" data-startTime="1045">the basic optimizations that are </span><span class="line" data-startTime="1045">recommended in the Souders </span><span class="line" data-startTime="1049">books that I showed before. </span> <span class="line" data-startTime="1052">But we're working on things like </span><span class="line" data-startTime="1052">image spreading and WebP </span><span class="line" data-startTime="1055">integration. </span> <span class="line" data-startTime="1055">We're going to talk about </span><span class="line" data-startTime="1055">WebP in the next </span><span class="line" data-startTime="1057">segment of the talk. </span> <span class="line" data-startTime="1061">We'd like to add deferring </span><span class="line" data-startTime="1061">JavaScript execution. </span> <span class="line" data-startTime="1063">There's a whole suite of things </span><span class="line" data-startTime="1063">that we are anxious and </span><span class="line" data-startTime="1067">excited to start working on </span><span class="line" data-startTime="1067">to make this speed-up more </span><span class="line" data-startTime="1071">dramatic than what </span><span class="line" data-startTime="1071">we have so far. </span></p>

<p><span class="line" data-startTime="1073">It's also important to put </span><span class="line" data-startTime="1073">effort into measurement. </span> <span class="line" data-startTime="1074">We want to measure better. </span> <span class="line" data-startTime="1076">We have dozens of filters now </span><span class="line" data-startTime="1076">that help rewrite web pages. </span> <span class="line" data-startTime="1080">Which of these have </span><span class="line" data-startTime="1080">the most impact? </span><span class="line" data-startTime="1082">We'd like to get some </span><span class="line" data-startTime="1082">data behind that. </span> <span class="line" data-startTime="1085">And we'd like to help users </span><span class="line" data-startTime="1085">evaluate the benefits for </span><span class="line" data-startTime="1089">mod_pagespeed. </span> <span class="line" data-startTime="1091">The more you're hitting refresh </span><span class="line" data-startTime="1091">with a stopwatch, the </span><span class="line" data-startTime="1094">more hard it's going </span><span class="line" data-startTime="1094">to be to draw </span><span class="line" data-startTime="1097">repeatable conclusions from &mdash; </span><span class="line" data-startTime="1099">we want to enable users to </span><span class="line" data-startTime="1099">effectively gauge the benefit </span><span class="line" data-startTime="1103">they're getting from </span><span class="line" data-startTime="1103">mod_pagespeed. </span> <span class="line" data-startTime="1108">I want to jump out of the </span><span class="line" data-startTime="1108">presentation and show you more </span><span class="line" data-startTime="1114">image stuff. </span></p>

<p><span class="line" data-startTime="1116">So this is an example </span><span class="line" data-startTime="1116">you can do yourself. </span> <span class="line" data-startTime="1119">This is off of modpagespeed.com. </span> <span class="line" data-startTime="1122">This is the site I showed </span><span class="line" data-startTime="1122">a snapshot of earlier. </span> <span class="line" data-startTime="1124">This shows you all of the </span><span class="line" data-startTime="1124">rewrite passes at </span><span class="line" data-startTime="1127">mod_pagespeed supports. </span> <span class="line" data-startTime="1129">I went into the rewrite </span><span class="line" data-startTime="1129">images example. </span> <span class="line" data-startTime="1131">This is the before picture, </span><span class="line" data-startTime="1131">where we have three images. </span> <span class="line" data-startTime="1139">And this is the source code &mdash; </span><span class="line" data-startTime="1141">view source, it's probably </span><span class="line" data-startTime="1141">not that visible. </span> <span class="line" data-startTime="1146">So there's a couple of </span><span class="line" data-startTime="1146">key points here. </span> <span class="line" data-startTime="1149">Puzzle.jpg is about </span><span class="line" data-startTime="1149">235 kilobytes. </span> <span class="line" data-startTime="1154">We don't really need </span><span class="line" data-startTime="1154">all those bits. </span></p>

<p><span class="line" data-startTime="1156">We've displayed it </span><span class="line" data-startTime="1156">in a small space. </span> <span class="line" data-startTime="1158">Why not have the rewritten </span><span class="line" data-startTime="1158">puzzle.jpg, which is put into </span><span class="line" data-startTime="1164">a 256 by 192 thumbnail. </span> <span class="line" data-startTime="1168">Which we can serve you in 21 </span><span class="line" data-startTime="1168">kilobytes, and can you tell </span><span class="line" data-startTime="1171">the difference? </span><span class="line" data-startTime="1175">In addition to that, besides </span><span class="line" data-startTime="1175">making that JPEG a lot smaller </span><span class="line" data-startTime="1180">than when you pulled it out of </span><span class="line" data-startTime="1180">the camera, one of these </span><span class="line" data-startTime="1185">images is sufficiently small. </span> <span class="line" data-startTime="1187">I think it's this coffee cup. </span> <span class="line" data-startTime="1192">It's sufficiently small that </span><span class="line" data-startTime="1192">we've decided that it's better </span><span class="line" data-startTime="1195">to inline it. </span> <span class="line" data-startTime="1196">So on the on the after page with </span><span class="line" data-startTime="1196">mod_pagespeed on, you see </span><span class="line" data-startTime="1203">one less line in the </span><span class="line" data-startTime="1203">waterfall diagram. </span> <span class="line" data-startTime="1208">And that's because that coffee </span><span class="line" data-startTime="1208">cup has been rendered as a </span><span class="line" data-startTime="1212">data URL so that it can be </span><span class="line" data-startTime="1212">displayed without having any </span><span class="line" data-startTime="1217">additional HTTP requests. </span> <span class="line" data-startTime="1229">So mod_pagespeed. </span> <span class="line" data-startTime="1231">It's an open source </span><span class="line" data-startTime="1231">Apache module. </span></p>

<p><span class="line" data-startTime="1234">It uses an Apache license, which </span><span class="line" data-startTime="1234">means you can basically </span><span class="line" data-startTime="1236">download the code and do </span><span class="line" data-startTime="1236">whatever you like with it. </span> <span class="line" data-startTime="1239">So it's an open source Apache </span><span class="line" data-startTime="1239">module, which automatically </span><span class="line" data-startTime="1242">makes your websites faster. </span> <span class="line" data-startTime="1243">There's two key points here. </span> <span class="line" data-startTime="1245">One is that it makes your </span><span class="line" data-startTime="1245">websites faster by doing these </span><span class="line" data-startTime="1247">rewrites for fairly well-known </span><span class="line" data-startTime="1247">techniques. </span> <span class="line" data-startTime="1251">And the other one is that </span><span class="line" data-startTime="1251">it's automatic. </span> <span class="line" data-startTime="1252">Even if you know these </span><span class="line" data-startTime="1252">techniques, you might decide </span><span class="line" data-startTime="1255">that you don't want to keep </span><span class="line" data-startTime="1255">doing them yourself manually </span><span class="line" data-startTime="1259">every time you change </span><span class="line" data-startTime="1259">your site. </span> <span class="line" data-startTime="1262">So there's all kinds </span><span class="line" data-startTime="1262">of material on </span><span class="line" data-startTime="1264">the web about this. </span> <span class="line" data-startTime="1265">It's easy to search </span><span class="line" data-startTime="1265">for it now. </span> <span class="line" data-startTime="1267">The first place to go is </span><span class="line" data-startTime="1267">modpagespeed.com, which shows </span><span class="line" data-startTime="1271">all of the places &mdash; </span><span class="line" data-startTime="1272">all of the rewrites that </span><span class="line" data-startTime="1272">we do before and after. </span> <span class="line" data-startTime="1279">So next up, we have </span><span class="line" data-startTime="1279">Richard Rabbat who </span><span class="line" data-startTime="1282">will talk about WebP. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1284"><span class="speakerName">Richard Rabbat</span>: Thank you. </span> <span class="line" data-startTime="1291">So before I start talking about </span><span class="line" data-startTime="1291">WebP, I want to mention </span><span class="line" data-startTime="1295">that when Josh and I started </span><span class="line" data-startTime="1295">this project, people were </span><span class="line" data-startTime="1297">telling us that we were crazy. </span> <span class="line" data-startTime="1301">We had this developer tool, </span><span class="line" data-startTime="1301">pagespeed, that we've been </span><span class="line" data-startTime="1303">innovating with, adding lots </span><span class="line" data-startTime="1303">of new best practices, and </span><span class="line" data-startTime="1308">trying to understand </span><span class="line" data-startTime="1308">how people can </span><span class="line" data-startTime="1310">make their pages faster. </span> <span class="line" data-startTime="1314">And then at some point, we </span><span class="line" data-startTime="1314">decided this we should make </span><span class="line" data-startTime="1316">this automatic. </span> <span class="line" data-startTime="1317">We decided that we could try to </span><span class="line" data-startTime="1317">spend a lot of engineering </span><span class="line" data-startTime="1321">time to make the web developer </span><span class="line" data-startTime="1321">not spend time themselves </span><span class="line" data-startTime="1327">optimizing their pages, but </span><span class="line" data-startTime="1327">instead focusing on their </span><span class="line" data-startTime="1330">content and adding delightful </span><span class="line" data-startTime="1330">content for your users. </span> <span class="line" data-startTime="1337">At Google it's kind of </span><span class="line" data-startTime="1337">nice, because they </span><span class="line" data-startTime="1340">let you try and fail. </span></p>

<p><span class="line" data-startTime="1343">If you fail too many </span><span class="line" data-startTime="1343">times, they </span><span class="line" data-startTime="1345">don't let you try anymore. </span> <span class="line" data-startTime="1348">But it was just amazing. </span> <span class="line" data-startTime="1350">When we launched this, </span><span class="line" data-startTime="1350">the uptake was &mdash; </span><span class="line" data-startTime="1353">we were actually not expecting </span><span class="line" data-startTime="1353">that people really wanted this </span><span class="line" data-startTime="1358">technology in that fashion. </span> <span class="line" data-startTime="1360">We were very surprised. </span> <span class="line" data-startTime="1363">It just helped the engineering </span><span class="line" data-startTime="1363">team put in more effort. </span> <span class="line" data-startTime="1367">People put in weekends, </span><span class="line" data-startTime="1367">weeknights, </span><span class="line" data-startTime="1369">and things like that. </span> <span class="line" data-startTime="1371">One thing that Josh mentioned, </span><span class="line" data-startTime="1371">which is we've been doing a </span><span class="line" data-startTime="1374">lot of measurements with things </span><span class="line" data-startTime="1374">like webpagetest.org. </span> <span class="line" data-startTime="1377">And it's a great tool because </span><span class="line" data-startTime="1377">you can see what's happening. </span> <span class="line" data-startTime="1381">But last week &mdash; </span><span class="line" data-startTime="1383">if you have Google Analytics </span><span class="line" data-startTime="1383">on your website, the Google </span><span class="line" data-startTime="1386">Analytics team launched a site </span><span class="line" data-startTime="1386">speed measurement tool, which </span><span class="line" data-startTime="1391">allows you to see the exact </span><span class="line" data-startTime="1391">latency that your users </span><span class="line" data-startTime="1397">actually experience. </span> <span class="line" data-startTime="1398">As opposed to when you're under </span><span class="line" data-startTime="1398">a controlled environment </span><span class="line" data-startTime="1401">from a certain server or </span><span class="line" data-startTime="1401">close your server. </span> <span class="line" data-startTime="1405">So if you use Google Analytics, </span><span class="line" data-startTime="1405">you should </span><span class="line" data-startTime="1409">definitely add one line of code </span><span class="line" data-startTime="1409">and see what your users </span><span class="line" data-startTime="1413">are experiencing in </span><span class="line" data-startTime="1413">terms of latency. </span></p>

<p><span class="line" data-startTime="1415">It may be very eye-opening </span><span class="line" data-startTime="1415">for you. </span> <span class="line" data-startTime="1420">So talking about WebP. </span> <span class="line" data-startTime="1421">WebP is one of these other </span><span class="line" data-startTime="1421">examples of crazy ideas that </span><span class="line" data-startTime="1425">we try and we see if </span><span class="line" data-startTime="1425">it's going to work. </span> <span class="line" data-startTime="1435">And as you all know, most of </span><span class="line" data-startTime="1435">the images out there are in </span><span class="line" data-startTime="1440">JPEG format. </span> <span class="line" data-startTime="1441">This is one of the Google </span><span class="line" data-startTime="1441">logos at some point. </span> <span class="line" data-startTime="1446">So a JPEG is a lossy format. </span> <span class="line" data-startTime="1451">GIF has been there for </span><span class="line" data-startTime="1451">a very long time. </span> <span class="line" data-startTime="1455">It has very specific use cases </span><span class="line" data-startTime="1455">that people still want to </span><span class="line" data-startTime="1459">have. There's the tracking </span><span class="line" data-startTime="1459">pixels, which we don't like </span><span class="line" data-startTime="1463">talk about. </span> <span class="line" data-startTime="1463">But there's also things like </span><span class="line" data-startTime="1463">transparency and animation. </span></p>

<p><span class="line" data-startTime="1468">Gif is great at allowing </span><span class="line" data-startTime="1468">you to do transparency. </span> <span class="line" data-startTime="1472">But also people like small </span><span class="line" data-startTime="1472">animations, two or three </span><span class="line" data-startTime="1478">images next to each other. </span> <span class="line" data-startTime="1480">PNG has been used &mdash; </span><span class="line" data-startTime="1481">portable network graphics &mdash; has </span><span class="line" data-startTime="1481">been used for very high </span><span class="line" data-startTime="1484">quality icons, texts, graphs, </span><span class="line" data-startTime="1484">things like this. </span> <span class="line" data-startTime="1489">There's an example </span><span class="line" data-startTime="1489">a PNG Google I/O. </span> <span class="line" data-startTime="1491">You want to see a developer </span><span class="line" data-startTime="1491">conference, you want to be </span><span class="line" data-startTime="1493">able to read the words </span><span class="line" data-startTime="1493">"developer conference." </span><span class="line" data-startTime="1499">But if you look at webpages &mdash; </span><span class="line" data-startTime="1502">we all know that an image </span><span class="line" data-startTime="1502">is worth a 1,000 words &mdash; </span><span class="line" data-startTime="1506">and today on the web there's a </span><span class="line" data-startTime="1506">lot of bytes that are totally </span><span class="line" data-startTime="1513">image bytes. </span></p>

<p><span class="line" data-startTime="1514">And you can look at &mdash; </span><span class="line" data-startTime="1517">this is data from </span><span class="line" data-startTime="1517">httparchive.org. </span> <span class="line" data-startTime="1521">And the HTML bytes that you're </span><span class="line" data-startTime="1521">shipping to users are in the </span><span class="line" data-startTime="1525">10s of kilobytes, and images </span><span class="line" data-startTime="1525">are in the 400 kilobytes. </span> <span class="line" data-startTime="1531">There's this data from Intel </span><span class="line" data-startTime="1531">Corporation that says that </span><span class="line" data-startTime="1537">compression hasn't changed over </span><span class="line" data-startTime="1537">the past few years, but </span><span class="line" data-startTime="1542">there's a lot of CPU </span><span class="line" data-startTime="1542">power that people </span><span class="line" data-startTime="1544">have on their devices. </span> <span class="line" data-startTime="1549">Some of you may have gotten </span><span class="line" data-startTime="1549">some tab devices today. </span></p>

<p><span class="line" data-startTime="1554">Great technology. </span> <span class="line" data-startTime="1555">The processing technology in </span><span class="line" data-startTime="1555">these tablets are way more </span><span class="line" data-startTime="1561">advanced than what </span><span class="line" data-startTime="1561">you got in a new </span><span class="line" data-startTime="1563">supercomputer 10 years ago. </span> <span class="line" data-startTime="1565">And there's a lot of algorithmic </span><span class="line" data-startTime="1565">improvements. </span> <span class="line" data-startTime="1569">So we decided to try to figure </span><span class="line" data-startTime="1569">out if we can propose an image </span><span class="line" data-startTime="1575">format that can lead to </span><span class="line" data-startTime="1575">better compression </span><span class="line" data-startTime="1579">than what JPEG does. </span> <span class="line" data-startTime="1581">It is based on the VP8 </span><span class="line" data-startTime="1581">bitstream, which is what's </span><span class="line" data-startTime="1584">also used for the web </span><span class="line" data-startTime="1584">and video format. </span> <span class="line" data-startTime="1588">And at first, we did a pretty </span><span class="line" data-startTime="1588">large study with </span><span class="line" data-startTime="1593">about 900,000 JPEGs. </span> <span class="line" data-startTime="1595">And if we took them and we tried </span><span class="line" data-startTime="1595">to compress them again </span><span class="line" data-startTime="1600">for the same signal-to-noise </span><span class="line" data-startTime="1600">ratio, we would get about </span><span class="line" data-startTime="1604">39.8% better compression. </span> <span class="line" data-startTime="1607">And we thought, oh maybe it's </span><span class="line" data-startTime="1607">just because the JPEGs that </span><span class="line" data-startTime="1610">are out there are just </span><span class="line" data-startTime="1610">full of extra bytes </span><span class="line" data-startTime="1614">that are not be needed. </span> <span class="line" data-startTime="1615">And basically we did something </span><span class="line" data-startTime="1615">we called re-JPEG &mdash; </span><span class="line" data-startTime="1619">JPEG recompression. </span></p>

<p><span class="line" data-startTime="1620">And we could only get 14% </span><span class="line" data-startTime="1620">improvement over that. </span> <span class="line" data-startTime="1625">Recently, we started a new study </span><span class="line" data-startTime="1625">which is based on SSIM, </span><span class="line" data-startTime="1628">which is considered a better </span><span class="line" data-startTime="1628">metric for image quality. </span> <span class="line" data-startTime="1634">And we took about 26,000 PNGs </span><span class="line" data-startTime="1634">and we did a compression at </span><span class="line" data-startTime="1642">JPEG quality of 75, we </span><span class="line" data-startTime="1642">recompressed for the </span><span class="line" data-startTime="1645">equivalent SSIM quality. </span> <span class="line" data-startTime="1647">We were getting about </span><span class="line" data-startTime="1647">40% smaller. </span> <span class="line" data-startTime="1651">Towards the end of this week or </span><span class="line" data-startTime="1651">next week, we're going to </span><span class="line" data-startTime="1654">release a much larger study with </span><span class="line" data-startTime="1654">some of the images that </span><span class="line" data-startTime="1659">people are used to looking at </span><span class="line" data-startTime="1659">when they look at image </span><span class="line" data-startTime="1662">compression. </span> <span class="line" data-startTime="1664">Now why is WebP so cool? </span><span class="line" data-startTime="1668">If you look at low bitrate </span><span class="line" data-startTime="1668">performance &mdash; </span><span class="line" data-startTime="1671">this is an image that one of </span><span class="line" data-startTime="1671">our friends from Wikipedia, </span><span class="line" data-startTime="1675">Mathias Schindler tried. </span> <span class="line" data-startTime="1677">He took a picture of one of </span><span class="line" data-startTime="1677">these German senators and </span><span class="line" data-startTime="1680">tried to compress at a very low </span><span class="line" data-startTime="1680">bitrate in WebP and JPEG. </span> <span class="line" data-startTime="1685">You can see at low bitrate, </span><span class="line" data-startTime="1685">JPEG just </span><span class="line" data-startTime="1688">doesn't quite get it. </span> <span class="line" data-startTime="1690">And at high bitrate, WebP </span><span class="line" data-startTime="1690">provides something that's just </span><span class="line" data-startTime="1695">as good as a lossless </span><span class="line" data-startTime="1695">compression like PNG. </span></p>

<p><span class="line" data-startTime="1704">And why do we do WebP? </span><span class="line" data-startTime="1707">This is data from, again, </span><span class="line" data-startTime="1707">webpagetest.org. </span> <span class="line" data-startTime="1710">We have this website where we're </span><span class="line" data-startTime="1710">comparing a bunch of </span><span class="line" data-startTime="1714">images that we put in JPEG </span><span class="line" data-startTime="1714">versus a bunch of images that </span><span class="line" data-startTime="1718">we put in WebP. </span> <span class="line" data-startTime="1719">And you can see that some of </span><span class="line" data-startTime="1719">the data &mdash; for example, the </span><span class="line" data-startTime="1723">fully loaded data &mdash; </span><span class="line" data-startTime="1725">shows that for WebP, you can </span><span class="line" data-startTime="1725">save about three seconds in </span><span class="line" data-startTime="1730">time for fully loaded, </span><span class="line" data-startTime="1730">because you're </span><span class="line" data-startTime="1732">downloading many less parts. </span></p>

<p><span class="line" data-startTime="1734">In this case, we're downloading </span><span class="line" data-startTime="1734">529 kilobytes, </span><span class="line" data-startTime="1737">versus 729 kilobytes. </span> <span class="line" data-startTime="1741">And it directly impacts the </span><span class="line" data-startTime="1741">speed of your webpage loading. </span> <span class="line" data-startTime="1749">So we started with WebP and we </span><span class="line" data-startTime="1749">focused on speed, because that </span><span class="line" data-startTime="1753">was going to be the major </span><span class="line" data-startTime="1753">feature of the format. </span> <span class="line" data-startTime="1757">But we also wanted to delight </span><span class="line" data-startTime="1757">a lot of our users. </span> <span class="line" data-startTime="1762">So when we first released it, </span><span class="line" data-startTime="1762">people gave us some good </span><span class="line" data-startTime="1765">feedback that they wanted </span><span class="line" data-startTime="1765">to see a better </span><span class="line" data-startTime="1768">encoding of the image. </span> <span class="line" data-startTime="1770">And we spent a few months, we </span><span class="line" data-startTime="1770">improved the encoder itself to </span><span class="line" data-startTime="1776">focus specifically </span><span class="line" data-startTime="1776">on still images. </span> <span class="line" data-startTime="1779">The WebM encoder was very </span><span class="line" data-startTime="1779">focused on the transitions, </span><span class="line" data-startTime="1784">the video stuff. </span> <span class="line" data-startTime="1786">Instead, with WebP we </span><span class="line" data-startTime="1786">focus our encoding </span><span class="line" data-startTime="1790">on the still image. </span></p>

<p><span class="line" data-startTime="1792">And the feedback is </span><span class="line" data-startTime="1792">it's now beating </span><span class="line" data-startTime="1796">JPEG much more readily. </span> <span class="line" data-startTime="1799">So what are we doing next? </span><span class="line" data-startTime="1801">A bunch of new features. </span> <span class="line" data-startTime="1803">We want to support people's need </span><span class="line" data-startTime="1803">for metadata, and we're </span><span class="line" data-startTime="1808">adding XMP support. </span> <span class="line" data-startTime="1811">XMP is extensible metadata </span><span class="line" data-startTime="1811">platform. </span> <span class="line" data-startTime="1815">We know some people are used to </span><span class="line" data-startTime="1815">XF, but XF has been painful </span><span class="line" data-startTime="1820">for lots of people as well, </span><span class="line" data-startTime="1820">because there's no </span><span class="line" data-startTime="1825">standard around it. </span> <span class="line" data-startTime="1827">It just creates problems </span><span class="line" data-startTime="1827">for the web. </span> <span class="line" data-startTime="1830">So because this is a format that </span><span class="line" data-startTime="1830">we want to have for many </span><span class="line" data-startTime="1834">years in the future, we're </span><span class="line" data-startTime="1834">focusing on better, cleaner </span><span class="line" data-startTime="1839">technology. </span> <span class="line" data-startTime="1841">Animation. </span></p>

<p><span class="line" data-startTime="1844">When we first launched WebP, </span><span class="line" data-startTime="1844">we had a lot of comments. </span> <span class="line" data-startTime="1847">We want animation. </span> <span class="line" data-startTime="1848">We said, well just use </span><span class="line" data-startTime="1848">the video tag. </span> <span class="line" data-startTime="1851">It's great. </span> <span class="line" data-startTime="1852">And they're like, no. </span> <span class="line" data-startTime="1854">So we tried to figure out </span><span class="line" data-startTime="1854">exactly why, and it turns out </span><span class="line" data-startTime="1857">it's mostly a philosophical </span><span class="line" data-startTime="1857">issue as opposed to a </span><span class="line" data-startTime="1860">technology issue. </span> <span class="line" data-startTime="1861">People that like to do </span><span class="line" data-startTime="1861">development of animated images </span><span class="line" data-startTime="1867">really want to use the typical </span><span class="line" data-startTime="1867">software that they're used to, </span><span class="line" data-startTime="1873">like their Photoshop, </span><span class="line" data-startTime="1873">their ImageMagick. </span> <span class="line" data-startTime="1875">They don't want to use FFmpeg </span><span class="line" data-startTime="1875">for creating animation. </span></p>

<p><span class="line" data-startTime="1880">So we're adding this. </span> <span class="line" data-startTime="1882">And because we're now in a much </span><span class="line" data-startTime="1882">newer world, we're adding </span><span class="line" data-startTime="1887">3D stereoscopy. </span> <span class="line" data-startTime="1890">Tiling, because you can have </span><span class="line" data-startTime="1890">a bunch of images, you can </span><span class="line" data-startTime="1893">create as large of an </span><span class="line" data-startTime="1893">image as you'd like. </span> <span class="line" data-startTime="1895">And you can start displaying </span><span class="line" data-startTime="1895">parts of the image as you can </span><span class="line" data-startTime="1902">download it. </span> <span class="line" data-startTime="1905">And there's one cool thing </span><span class="line" data-startTime="1905">that we're adding. </span> <span class="line" data-startTime="1911">Who knows about CSS </span><span class="line" data-startTime="1911">background images? </span><span class="line" data-startTime="1914">OK. </span> <span class="line" data-startTime="1915">Who likes how they have </span><span class="line" data-startTime="1915">to write them? </span><span class="line" data-startTime="1918">OK, thank you. </span></p>

<p><span class="line" data-startTime="1921">So if you look at the </span><span class="line" data-startTime="1921">third column &mdash; </span><span class="line" data-startTime="1925">sorry for the colors </span><span class="line" data-startTime="1925">a little bit here. </span> <span class="line" data-startTime="1928">So we're basically grouping </span><span class="line" data-startTime="1928">images together and they're </span><span class="line" data-startTime="1931">going to have a hashtag. </span> <span class="line" data-startTime="1933">And image source, for example, </span><span class="line" data-startTime="1933">group.webp#john and #jack. </span> <span class="line" data-startTime="1940">And then instead of having to </span><span class="line" data-startTime="1940">figure out exactly at what </span><span class="line" data-startTime="1944">coordinates you're going to pick </span><span class="line" data-startTime="1944">the image from, you can </span><span class="line" data-startTime="1948">actually just refer to </span><span class="line" data-startTime="1948">the image within </span><span class="line" data-startTime="1951">that multi-image format. </span> <span class="line" data-startTime="1955">And there won't be any </span><span class="line" data-startTime="1955">weird CSS to write. </span> <span class="line" data-startTime="1961">For 3D &mdash; again, if you look </span><span class="line" data-startTime="1961">at the third column &mdash; </span><span class="line" data-startTime="1965">if you look at 3D images that </span><span class="line" data-startTime="1965">are out there that are in </span><span class="line" data-startTime="1968">JPEG, if you display them on a </span><span class="line" data-startTime="1968">2D display, they just don't </span><span class="line" data-startTime="1972">make any sense. </span> <span class="line" data-startTime="1973">So with our ability to put </span><span class="line" data-startTime="1973">multiple images in the same </span><span class="line" data-startTime="1978">image file, we can actually call </span><span class="line" data-startTime="1978">the left image versus the </span><span class="line" data-startTime="1984">right image separately, and </span><span class="line" data-startTime="1984">then we can show them. </span> <span class="line" data-startTime="1988">It depends on what display </span><span class="line" data-startTime="1988">technology one is using, and </span><span class="line" data-startTime="1991">then you can see you can maybe </span><span class="line" data-startTime="1991">downgrade to a 2D for some </span><span class="line" data-startTime="1997">people, present 3D for others. </span></p>

<p><span class="line" data-startTime="2000">And also use &mdash; </span><span class="line" data-startTime="2003">it depends on the capabilities </span><span class="line" data-startTime="2003">of the device. </span> <span class="line" data-startTime="2006">But it's definitely an image </span><span class="line" data-startTime="2006">format that we're looking at </span><span class="line" data-startTime="2010">to grow in the future, so it's </span><span class="line" data-startTime="2010">still young and we're adding </span><span class="line" data-startTime="2014">some more things. </span> <span class="line" data-startTime="2017">Last week, one of the engineers </span><span class="line" data-startTime="2017">added a JNI </span><span class="line" data-startTime="2020">interface, which we </span><span class="line" data-startTime="2020">think is cool. </span> <span class="line" data-startTime="2023">And we're adding lossless so </span><span class="line" data-startTime="2023">that we can have better </span><span class="line" data-startTime="2026">transparency support. </span> <span class="line" data-startTime="2028">On the product side, Picasa web </span><span class="line" data-startTime="2028">albums, Gmail, and Google </span><span class="line" data-startTime="2034">App Engine are adding support. </span> <span class="line" data-startTime="2037">Picasa web albums already has </span><span class="line" data-startTime="2037">it, as well as Gmail. </span> <span class="line" data-startTime="2040">Google App Engine is going to </span><span class="line" data-startTime="2040">have that support soon. </span> <span class="line" data-startTime="2045">And what you get with WebP is </span><span class="line" data-startTime="2045">when you have VP8 hardware </span><span class="line" data-startTime="2051">support, you get the WebP </span><span class="line" data-startTime="2051">hardware support immediately. </span> <span class="line" data-startTime="2057">The next release will also </span><span class="line" data-startTime="2057">have a much faster codec. </span></p>

<p><span class="line" data-startTime="2060">Now that's we have a very good </span><span class="line" data-startTime="2060">encoder, we're spending some </span><span class="line" data-startTime="2064">time writing assembly code </span><span class="line" data-startTime="2064">to make it much faster. </span> <span class="line" data-startTime="2069">That's it. </span> <span class="line" data-startTime="2074">And at this point, I'd like to </span><span class="line" data-startTime="2074">welcome Hakon to talk about </span><span class="line" data-startTime="2078">Opera and WebP. </span> <span class="line" data-startTime="2082">Thank you. </span> <span class="line" data-startTime="2088">HAKON WIUM LIE: Perfect, </span><span class="line" data-startTime="2088">thank you. </span> <span class="line" data-startTime="2090">Thank you Richard, thanks </span><span class="line" data-startTime="2090">for inviting me here. </span> <span class="line" data-startTime="2092">I was at Google I/O last year as </span><span class="line" data-startTime="2092">well, when the video format </span><span class="line" data-startTime="2097">WebM was introduced. </span> <span class="line" data-startTime="2098">And this is a pleasant follow-up </span><span class="line" data-startTime="2098">I think, to be able </span><span class="line" data-startTime="2100">to do a still image format. </span></p>

<p><span class="line" data-startTime="2102">I have to make one comment </span><span class="line" data-startTime="2102">though, you talk about the </span><span class="line" data-startTime="2104">weird CSS syntax. </span> <span class="line" data-startTime="2106">I'm partially to blame for that, </span><span class="line" data-startTime="2106">I proposed CSS in 1994, </span><span class="line" data-startTime="2112">and my baby has kind of </span><span class="line" data-startTime="2112">grown since then. </span> <span class="line" data-startTime="2114">And I agree with you, that </span><span class="line" data-startTime="2114">the background &mdash; </span><span class="line" data-startTime="2116">the multiple background images </span><span class="line" data-startTime="2116">is kind of weird. </span> <span class="line" data-startTime="2119">But it's also stuff that </span><span class="line" data-startTime="2119">we don't really </span><span class="line" data-startTime="2121">encourage people to use. </span> <span class="line" data-startTime="2123">You shouldn't really have </span><span class="line" data-startTime="2123">multiple background images on </span><span class="line" data-startTime="2126">your elements. </span> <span class="line" data-startTime="2126">That's only if you want to do </span><span class="line" data-startTime="2126">rounded corners or something. </span> <span class="line" data-startTime="2129">And we actually have to better </span><span class="line" data-startTime="2129">properties for that now. </span> <span class="line" data-startTime="2132">Border radius is there. </span></p>

<p><span class="line" data-startTime="2133">So you don't really have to do </span><span class="line" data-startTime="2133">the weird CSS thing anyway. </span> <span class="line" data-startTime="2138">Also, a word of warning. </span> <span class="line" data-startTime="2140">In this session you will be </span><span class="line" data-startTime="2140">hearing a lot about automated </span><span class="line" data-startTime="2143">techniques for improving </span><span class="line" data-startTime="2143">performance. </span> <span class="line" data-startTime="2145">And I think that's helpful. </span> <span class="line" data-startTime="2147">That's why we're doing it. </span> <span class="line" data-startTime="2148">We're doing it too at Opera. </span> <span class="line" data-startTime="2149">But there's limits to how far </span><span class="line" data-startTime="2149">you can go with that. </span> <span class="line" data-startTime="2151">You still have to take </span><span class="line" data-startTime="2151">responsibility for your HTML </span><span class="line" data-startTime="2154">code, for your CSS code, </span><span class="line" data-startTime="2154">and for your images. </span> <span class="line" data-startTime="2158">We can only get so far with </span><span class="line" data-startTime="2158">automated techniques. </span> <span class="line" data-startTime="2161">So we still need bright minds </span><span class="line" data-startTime="2161">out there to do the coding. </span> <span class="line" data-startTime="2166">Given that we do want automated </span><span class="line" data-startTime="2166">techniques though, </span><span class="line" data-startTime="2168">I'd like to present Opera's </span><span class="line" data-startTime="2168">views on those. </span> <span class="line" data-startTime="2171">And we start sort of </span><span class="line" data-startTime="2171">on the other end. </span> <span class="line" data-startTime="2174">We start not on the server </span><span class="line" data-startTime="2174">end, we start with the </span><span class="line" data-startTime="2177">clients, with the users. </span></p>

<p><span class="line" data-startTime="2179">And probably the product </span><span class="line" data-startTime="2179">that many of you know &mdash; </span><span class="line" data-startTime="2184">we have about 100 million people </span><span class="line" data-startTime="2184">using Opera Mini these </span><span class="line" data-startTime="2188">days, active users. </span> <span class="line" data-startTime="2190">Opera Mini is a small client </span><span class="line" data-startTime="2190">originally written in Java </span><span class="line" data-startTime="2194">that runs in handsets, typically </span><span class="line" data-startTime="2194">in mobile phones, </span><span class="line" data-startTime="2198">many of them in the </span><span class="line" data-startTime="2198">developing world. </span> <span class="line" data-startTime="2201">And they give internet access, </span><span class="line" data-startTime="2201">web access, to ordinary </span><span class="line" data-startTime="2206">phones, to ordinary people. </span> <span class="line" data-startTime="2207">People who don't have </span><span class="line" data-startTime="2207">PCs, perhaps. </span> <span class="line" data-startTime="2209">People who don't have even </span><span class="line" data-startTime="2209">the power to run a PC. </span> <span class="line" data-startTime="2214">And what we do there is that </span><span class="line" data-startTime="2214">in the fixed network &mdash; </span><span class="line" data-startTime="2217">in the proxy service &mdash; we fetch </span><span class="line" data-startTime="2217">the pages and basically </span><span class="line" data-startTime="2221">just get the URL from </span><span class="line" data-startTime="2221">the mobile phone. </span> <span class="line" data-startTime="2223">We fetch the page, we compress </span><span class="line" data-startTime="2223">it to a binary format, that we </span><span class="line" data-startTime="2226">send, then, over the wireless </span><span class="line" data-startTime="2226">network to the handset. </span> <span class="line" data-startTime="2231">And currently we process </span><span class="line" data-startTime="2231">about 60 billion pages </span><span class="line" data-startTime="2238">per month on this. </span> <span class="line" data-startTime="2241">We have many people in many </span><span class="line" data-startTime="2241">places far away from here, </span><span class="line" data-startTime="2246">like Russia, Indonesia, </span><span class="line" data-startTime="2246">India, places where </span><span class="line" data-startTime="2250">the bandwidth costs &mdash; </span><span class="line" data-startTime="2252">you pay per kilobyte, perhaps. </span></p>

<p><span class="line" data-startTime="2254">Or there's limited </span><span class="line" data-startTime="2254">connectivity. </span> <span class="line" data-startTime="2256">Of course, there's never </span><span class="line" data-startTime="2256">limited connectivity </span><span class="line" data-startTime="2258">like here is there? </span><span class="line" data-startTime="2262">The other thing we do in this </span><span class="line" data-startTime="2262">space is Opera Turbo. </span> <span class="line" data-startTime="2268">Opera Turbo is sort </span><span class="line" data-startTime="2268">of similar. </span> <span class="line" data-startTime="2270">It's also a proxy service that </span><span class="line" data-startTime="2270">compresses, but unlike Opera </span><span class="line" data-startTime="2274">Mini, which compresses into a </span><span class="line" data-startTime="2274">binary format, Opera Turbo </span><span class="line" data-startTime="2278">just compresses by compressing </span><span class="line" data-startTime="2278">the HTML, the CSS, and the </span><span class="line" data-startTime="2282">images, much like you talked </span><span class="line" data-startTime="2282">about earlier here. </span> <span class="line" data-startTime="2286">Opera Turbo is available from </span><span class="line" data-startTime="2286">the normal Opera desktop </span><span class="line" data-startTime="2290">application. </span></p>

<p><span class="line" data-startTime="2290">So if you download Opera </span><span class="line" data-startTime="2290">from opera.com, </span><span class="line" data-startTime="2293">you can turn on Turbo. </span> <span class="line" data-startTime="2295">If it detects that you're on a </span><span class="line" data-startTime="2295">slow network, it will suggest, </span><span class="line" data-startTime="2299">perhaps you should turn me on. </span> <span class="line" data-startTime="2301">And currently we have about five </span><span class="line" data-startTime="2301">billion page views per </span><span class="line" data-startTime="2304">month for Opera Turbo. </span> <span class="line" data-startTime="2306">So it's significantly smaller </span><span class="line" data-startTime="2306">than Opera Mini, which has 60, </span><span class="line" data-startTime="2309">but still a lot of people </span><span class="line" data-startTime="2309">are using this. </span> <span class="line" data-startTime="2312">And about a month ago, </span><span class="line" data-startTime="2312">we introduced </span><span class="line" data-startTime="2315">WebP into Opera Turbo. </span> <span class="line" data-startTime="2318">We found out, after doing some </span><span class="line" data-startTime="2318">research, that WebP was the </span><span class="line" data-startTime="2324">perfect fit to encode the </span><span class="line" data-startTime="2324">images for Opera Turbo. </span> <span class="line" data-startTime="2330">Here's a typical page. </span> <span class="line" data-startTime="2332">You save about 50% </span><span class="line" data-startTime="2332">of the bandwidth. </span></p>

<p><span class="line" data-startTime="2334">It'd be interesting to see how </span><span class="line" data-startTime="2334">much Opera Turbo can compress </span><span class="line" data-startTime="2338">on top of the page speed module </span><span class="line" data-startTime="2338">that we saw there. </span> <span class="line" data-startTime="2342">Whether those two will actually </span><span class="line" data-startTime="2342">really double the </span><span class="line" data-startTime="2345">performance or whether </span><span class="line" data-startTime="2345">they equal. </span> <span class="line" data-startTime="2347">We should look into that. </span> <span class="line" data-startTime="2349">But these are typical numbers </span><span class="line" data-startTime="2349">that we see, that you reduce </span><span class="line" data-startTime="2352">the size by 50% percent </span><span class="line" data-startTime="2352">and of course, then </span><span class="line" data-startTime="2355">time also goes down. </span> <span class="line" data-startTime="2358">So images is an important </span><span class="line" data-startTime="2358">part of this. </span> <span class="line" data-startTime="2360">And WebP we found out </span><span class="line" data-startTime="2360">was a perfect match. </span> <span class="line" data-startTime="2364">If we take just a sample image </span><span class="line" data-startTime="2364">found on Flickr, when we do </span><span class="line" data-startTime="2369">the really hard compression </span><span class="line" data-startTime="2369">here, when we tried to go </span><span class="line" data-startTime="2373">really, really low, </span><span class="line" data-startTime="2373">we see that JPEG </span><span class="line" data-startTime="2376">has significant artifact. </span> <span class="line" data-startTime="2378">It may be hard to see in this </span><span class="line" data-startTime="2378">projected mode here, but you </span><span class="line" data-startTime="2381">can see in the middle where JPEG </span><span class="line" data-startTime="2381">is used, we go down from </span><span class="line" data-startTime="2385">155 k to 8k. </span> <span class="line" data-startTime="2389">We see significant artifact </span><span class="line" data-startTime="2389">around the head of the turtle, </span><span class="line" data-startTime="2392">for example. </span></p>

<p><span class="line" data-startTime="2393">Whereas in WebP, which </span><span class="line" data-startTime="2393">is even lower &mdash; </span><span class="line" data-startTime="2396">it's down to only 5kb &mdash; </span><span class="line" data-startTime="2397">we don't see those artifacts. </span> <span class="line" data-startTime="2400">Now, this may be he's slightly </span><span class="line" data-startTime="2400">unfair to JPEG because the </span><span class="line" data-startTime="2403">original comes across </span><span class="line" data-startTime="2403">as a JPEG from the </span><span class="line" data-startTime="2406">first place, right? </span><span class="line" data-startTime="2407">So when you do another JPEG, it </span><span class="line" data-startTime="2407">seems like you get really </span><span class="line" data-startTime="2411">weird block effects when </span><span class="line" data-startTime="2411">these things double up. </span> <span class="line" data-startTime="2414">And that may be one reason why </span><span class="line" data-startTime="2414">WebP is performing so well. </span> <span class="line" data-startTime="2418">But so be it. </span></p>

<p><span class="line" data-startTime="2420">It works well, gives us </span><span class="line" data-startTime="2420">better compression. </span> <span class="line" data-startTime="2423">And here's another one. </span> <span class="line" data-startTime="2427">Again, we see that we have </span><span class="line" data-startTime="2427">strong artifact in the middle </span><span class="line" data-startTime="2432">image, whereas WebP gives </span><span class="line" data-startTime="2432">us better looking pages. </span> <span class="line" data-startTime="2439">Now here's the colleague </span><span class="line" data-startTime="2439">of mine, Charles. </span> <span class="line" data-startTime="2444">He's chief standards </span><span class="line" data-startTime="2444">officer at Opera. </span> <span class="line" data-startTime="2447">And also I think the WebP </span><span class="line" data-startTime="2447">looks the best here. </span> <span class="line" data-startTime="2451">If you look at the one </span><span class="line" data-startTime="2451">to the right, you see </span><span class="line" data-startTime="2453">his wrinkles there? </span><span class="line" data-startTime="2454">They they kind of disappeared. </span> <span class="line" data-startTime="2458">So if you want to look beautiful </span><span class="line" data-startTime="2458">on screen, perhaps </span><span class="line" data-startTime="2461">WebP is the image </span><span class="line" data-startTime="2461">format to use. </span></p>

<p><span class="line" data-startTime="2464">Is this something you </span><span class="line" data-startTime="2464">put into decoder? </span><span class="line" data-startTime="2466">[LAUGHTER] </span><span class="line" data-startTime="2469">OK. </span> <span class="line" data-startTime="2471">Very good. </span> <span class="line" data-startTime="2473">Now, the uses of WebP that's </span><span class="line" data-startTime="2473">we've seen, both in the Apache </span><span class="line" data-startTime="2479">module and in Opera Turbo, </span><span class="line" data-startTime="2479">that's where things are being </span><span class="line" data-startTime="2481">applied automatically. </span> <span class="line" data-startTime="2483">I think there's still a time </span><span class="line" data-startTime="2483">to go before you can start </span><span class="line" data-startTime="2485">actually putting WebP images </span><span class="line" data-startTime="2485">on the web in your pages. </span> <span class="line" data-startTime="2489">Because if you do so, it's </span><span class="line" data-startTime="2489">going to be disruptive. </span> <span class="line" data-startTime="2492">Because most browsers will </span><span class="line" data-startTime="2492">not be able to see </span><span class="line" data-startTime="2495">those images yet. </span> <span class="line" data-startTime="2497">If you use Opera or if you use </span><span class="line" data-startTime="2497">Chrome, you can go to the </span><span class="line" data-startTime="2500">gallery and it shows up. </span></p>

<p><span class="line" data-startTime="2502">But most other browsers will </span><span class="line" data-startTime="2502">not be able to show that. </span> <span class="line" data-startTime="2506">So there will be a time. </span> <span class="line" data-startTime="2508">And we had the same thing happen </span><span class="line" data-startTime="2508">when we introduced PNG </span><span class="line" data-startTime="2510">some years ago. </span> <span class="line" data-startTime="2512">It takes a while before </span><span class="line" data-startTime="2512">browsers catch up. </span> <span class="line" data-startTime="2514">I hope the other browsers will </span><span class="line" data-startTime="2514">catch up and add support for </span><span class="line" data-startTime="2517">WebP, just like they should </span><span class="line" data-startTime="2517">all support WebM as well. </span> <span class="line" data-startTime="2521">But until they do, you shouldn't </span><span class="line" data-startTime="2521">really exclude users </span><span class="line" data-startTime="2524">by relying on this </span><span class="line" data-startTime="2524">being available. </span> <span class="line" data-startTime="2530">As a web community, we need to </span><span class="line" data-startTime="2530">make sure that our webpages </span><span class="line" data-startTime="2534">work in most browsers </span><span class="line" data-startTime="2534">and most devices. </span> <span class="line" data-startTime="2537">And I think that's also an </span><span class="line" data-startTime="2537">encouragement to Google. </span> <span class="line" data-startTime="2540">I have to admit, at Opera we </span><span class="line" data-startTime="2540">have some problem with some of </span><span class="line" data-startTime="2543">the more experimentive Google </span><span class="line" data-startTime="2543">services that come out. </span> <span class="line" data-startTime="2548">You're not always good at </span><span class="line" data-startTime="2548">testing in all cases. </span> <span class="line" data-startTime="2552">So I encourage testing </span><span class="line" data-startTime="2552">to every one of us. </span></p>

<p><span class="line" data-startTime="2555">We need to make this web thing </span><span class="line" data-startTime="2555">work, we can't make it work </span><span class="line" data-startTime="2558">for half the people, </span><span class="line" data-startTime="2558">half the browsers. </span> <span class="line" data-startTime="2560">We need to make it work </span><span class="line" data-startTime="2560">for everything. </span> <span class="line" data-startTime="2562">That's one of the strengths </span><span class="line" data-startTime="2562">of the web, and I </span><span class="line" data-startTime="2564">hope that will continue. </span> <span class="line" data-startTime="2565">Thank you. </span> <span class="line" data-startTime="2566">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="2573"><span class="speakerName">Richard Rabbat</span>: So we have time </span><span class="line" data-startTime="2573">for questions, if you </span><span class="line" data-startTime="2576">have any questions. </span> <span class="line" data-startTime="2583">OK, go ahead. </span> <span class="line" data-startTime="2585">[SIDE CONVERSATION] </span><span class="line" data-startTime="2593">Question for Joshua, actually. </span> <span class="line" data-startTime="2596">Two things. </span> <span class="line" data-startTime="2597">We're using Rackspace cloud, </span><span class="line" data-startTime="2597">and we pay on a </span><span class="line" data-startTime="2602">compute-cycle basis. </span> <span class="line" data-startTime="2603">How would using mod_pagespeed </span><span class="line" data-startTime="2603">affect compute cycle usage? </span><span class="line" data-startTime="2609">And also, when you're doing </span><span class="line" data-startTime="2609">combined requests off of a </span><span class="line" data-startTime="2613">CDN, would that affect &mdash; when </span><span class="line" data-startTime="2613">you have multiple CDNs serving </span><span class="line" data-startTime="2619">the same content and you append </span><span class="line" data-startTime="2619">them for your CSS </span><span class="line" data-startTime="2622">requests, for instance &mdash; </span><span class="line" data-startTime="2623">would there be a performance </span><span class="line" data-startTime="2623">gain/loss? </span></p>

<p class="speaker"><span class="line" data-starttime="2628"><span class="speakerName">Joshua Marantz</span>: So the first </span><span class="line" data-startTime="2628">question is about the compute </span><span class="line" data-startTime="2632">costs associated with </span><span class="line" data-startTime="2632">mod_pagespeed. </span> <span class="line" data-startTime="2634">And I should point that </span><span class="line" data-startTime="2634">mod_pagespeed uses a lot of </span><span class="line" data-startTime="2638">caching internally. </span> <span class="line" data-startTime="2639">So although we are doing image </span><span class="line" data-startTime="2639">compression and image </span><span class="line" data-startTime="2642">resizing, et cetera, that's </span><span class="line" data-startTime="2642">really the only </span><span class="line" data-startTime="2645">compute-intensive thing </span><span class="line" data-startTime="2645">that we do. </span> <span class="line" data-startTime="2646">But we cache the results, and </span><span class="line" data-startTime="2646">we only do that once. </span> <span class="line" data-startTime="2649">So we think that amortized over </span><span class="line" data-startTime="2649">your entire site, it will </span><span class="line" data-startTime="2656">not be measurable. </span> <span class="line" data-startTime="2656">But also please take into </span><span class="line" data-startTime="2656">account if you pay for </span><span class="line" data-startTime="2659">bandwidth or requests, you'll </span><span class="line" data-startTime="2659">be serving a lot less bytes </span><span class="line" data-startTime="2664">and a lot less requests </span><span class="line" data-startTime="2664">with mod_pagespeed. </span> <span class="line" data-startTime="2669">Your second question is about </span><span class="line" data-startTime="2669">buying resources and CDNs. </span></p>

<p><span class="line" data-startTime="2673">And we support CDNs, we </span><span class="line" data-startTime="2673">support multi-server </span><span class="line" data-startTime="2678">configurations. </span> <span class="line" data-startTime="2680">I'm not sure I entirely </span><span class="line" data-startTime="2680">understand your question. </span> <span class="line" data-startTime="2685">Mod_pagespeed benefits CDNs </span><span class="line" data-startTime="2685">by making more resources </span><span class="line" data-startTime="2689">cacheable at the edge. </span> <span class="line" data-startTime="2690">So it's, in general, a win. </span> <span class="line" data-startTime="2692">And we enabled this because if </span><span class="line" data-startTime="2692">you remember, on the combined </span><span class="line" data-startTime="2698">CSS slide, the link name for the </span><span class="line" data-startTime="2698">combined CSS file encodes </span><span class="line" data-startTime="2703">all the information you need </span><span class="line" data-startTime="2703">to reproduce the result. </span> <span class="line" data-startTime="2706">Which is why multi-server </span><span class="line" data-startTime="2706">is not a problem. </span> <span class="line" data-startTime="2710">I hope that answers </span><span class="line" data-startTime="2710">your question. </span> <span class="line" data-startTime="2714">Howdy. </span> <span class="line" data-startTime="2715">So one of the big reasons that </span><span class="line" data-startTime="2715">PNG was so able to displace </span><span class="line" data-startTime="2721">GIF in many fields is that it </span><span class="line" data-startTime="2721">was not patent-encumbered. </span></p>

<p><span class="line" data-startTime="2725">And VP8 has, among other things, </span><span class="line" data-startTime="2725">not exactly been </span><span class="line" data-startTime="2731">forthcoming with complete </span><span class="line" data-startTime="2731">documentation for the format, </span><span class="line" data-startTime="2734">as is available for </span><span class="line" data-startTime="2734">JPEG and PNG. </span> <span class="line" data-startTime="2736">And also the guarantee of not </span><span class="line" data-startTime="2736">being patent-encumbered is </span><span class="line" data-startTime="2740">still a little bit shaky, to </span><span class="line" data-startTime="2740">the point where VP8 simply </span><span class="line" data-startTime="2744">isn't available destroys </span><span class="line" data-startTime="2744">the valuable freedom </span><span class="line" data-startTime="2747">for Dora, for example. </span> <span class="line" data-startTime="2749">So while I appreciate the </span><span class="line" data-startTime="2749">attempt to displace JPEG, now </span><span class="line" data-startTime="2754">that JPEG is actually </span><span class="line" data-startTime="2754">patent-free &mdash; the patents </span><span class="line" data-startTime="2756">expired four or five </span><span class="line" data-startTime="2756">years ago &mdash; </span><span class="line" data-startTime="2760">how is the WebP team planning on </span><span class="line" data-startTime="2760">addressing patent concerns. </span></p>

<p class="speaker"><span class="line" data-starttime="2764"><span class="speakerName">Richard Rabbat</span>: So I'm not a </span><span class="line" data-startTime="2764">lawyer, so I won't be talking </span><span class="line" data-startTime="2767">about a patent. </span> <span class="line" data-startTime="2770">But you are welcome to </span><span class="line" data-startTime="2770">talk to our lawyers </span><span class="line" data-startTime="2772">about patent issues. </span> <span class="line" data-startTime="2774">With respect to documentation, </span><span class="line" data-startTime="2774">I'll give you that we also </span><span class="line" data-startTime="2779">really lack on documentation. </span> <span class="line" data-startTime="2781">We try our hardest, </span><span class="line" data-startTime="2781">but at some point </span><span class="line" data-startTime="2783">we don't have enough &mdash; </span><span class="line" data-startTime="2787">it would be great if you can </span><span class="line" data-startTime="2787">contribute documentation. </span> <span class="line" data-startTime="2792">I don't understand VP8 because </span><span class="line" data-startTime="2792">there's no VP8 documentation </span><span class="line" data-startTime="2795">available for me to understand </span><span class="line" data-startTime="2795">it from. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2797"><span class="speakerName">Richard Rabbat</span>: So we've been </span><span class="line" data-startTime="2797">doing a lot of work on </span><span class="line" data-startTime="2800">documentation, so we have </span><span class="line" data-startTime="2800">updated a lot of </span><span class="line" data-startTime="2802">documentation on VP8. </span><span class="line" data-startTime="2805">And I can certainly point to the </span><span class="line" data-startTime="2805">people that are working on </span><span class="line" data-startTime="2809">the VP8 documentation. </span><span class="line" data-startTime="2810">If there's any specific </span><span class="line" data-startTime="2810">feedback, we can definitely </span><span class="line" data-startTime="2812">make sure that we cover it. </span><span class="line" data-startTime="2816">Are there plans to submit a </span><span class="line" data-startTime="2816">formal specification in the </span><span class="line" data-startTime="2819">manner of PNG to relevant </span><span class="line" data-startTime="2819">working groups for review? </span></p>

<p class="speaker"><span class="line" data-starttime="2825"><span class="speakerName">Richard Rabbat</span>: So I'm not the </span><span class="line" data-startTime="2825">product manager for VP8, so I </span><span class="line" data-startTime="2829">don't know exactly. </span><span class="line" data-startTime="2830">I know we have submitted an </span><span class="line" data-startTime="2830">informational RFC to document </span><span class="line" data-startTime="2837">what we do. </span><span class="line" data-startTime="2839">I don't know of the other </span><span class="line" data-startTime="2839">forward plans. </span><span class="line" data-startTime="2844">Fine, thank you. </span><span class="line" data-startTime="2847">So, does mod_pagespeed concept </span><span class="line" data-startTime="2847">change the way we should </span><span class="line" data-startTime="2850">approach design? </span><span class="line" data-startTime="2851">Should I have the designers now </span><span class="line" data-startTime="2851">producing all the pages </span><span class="line" data-startTime="2855">and putting the original art in </span><span class="line" data-startTime="2855">high quality large size and </span><span class="line" data-startTime="2860">breaking up the JavaScripts, </span><span class="line" data-startTime="2860">making no effort to do manual </span><span class="line" data-startTime="2865">optimization? </span><span class="line" data-startTime="2866">Because then the machine </span><span class="line" data-startTime="2866">optimizers could do a much </span><span class="line" data-startTime="2868">better job at that? </span></p>

<p class="speaker"><span class="line" data-starttime="2870"><span class="speakerName">Richard Rabbat</span>: Please don't. </span> <span class="line" data-startTime="2871">I'll start with that. </span> <span class="line" data-startTime="2874">We've seen a lot of HTML </span><span class="line" data-startTime="2874">files that lie to us. </span> <span class="line" data-startTime="2877">And for many reasons, we </span><span class="line" data-startTime="2877">can't optimize them. </span> <span class="line" data-startTime="2882">When somebody tells us what MIME </span><span class="line" data-startTime="2882">type that file is, for </span><span class="line" data-startTime="2886">example, is it's actually the </span><span class="line" data-startTime="2886">wrong MIME type, that's one of </span><span class="line" data-startTime="2891">the examples. </span> <span class="line" data-startTime="2896">The importance of mod_pagespeed </span><span class="line" data-startTime="2896">is that in many </span><span class="line" data-startTime="2901">cases, you don't have the cycles </span><span class="line" data-startTime="2901">to actually redo all </span><span class="line" data-startTime="2905">the designs. </span> <span class="line" data-startTime="2906">For example, every time you </span><span class="line" data-startTime="2906">change your UI layout, you </span><span class="line" data-startTime="2910">want to go and make every </span><span class="line" data-startTime="2910">image change. </span> <span class="line" data-startTime="2913">And you want to be careful about </span><span class="line" data-startTime="2913">the use of your front </span><span class="line" data-startTime="2918">end engineers for that. </span></p>

<p><span class="line" data-startTime="2920">And I'll let Josh </span><span class="line" data-startTime="2920">answer as well. </span></p>

<p class="speaker"><span class="line" data-starttime="2923"><span class="speakerName">Joshua Marantz</span>: Sure. </span><span class="line" data-startTime="2925">I don't think that there's a </span><span class="line" data-startTime="2925">need to do a complete 180 </span><span class="line" data-startTime="2929">degree turn in how you do your </span><span class="line" data-startTime="2929">design of your webpages. </span><span class="line" data-startTime="2934">But it offers you the </span><span class="line" data-startTime="2934">opportunity to gradually </span><span class="line" data-startTime="2938">consider maintainability and </span><span class="line" data-startTime="2938">efficiency of your design </span><span class="line" data-startTime="2943">process, and let machines take </span><span class="line" data-startTime="2943">care of the processes. </span><span class="line" data-startTime="2947">So you could get there, but as </span><span class="line" data-startTime="2947">always, I would recommend </span><span class="line" data-startTime="2951">taking it one step at a time. </span><span class="line" data-startTime="2955">This may be a silly question, </span><span class="line" data-startTime="2955">it made be enabled already, </span><span class="line" data-startTime="2958">but you're speaking of getting </span><span class="line" data-startTime="2958">mod_pagespeed enabled on </span><span class="line" data-startTime="2961">different hosts and different </span><span class="line" data-startTime="2961">servers and getting it built </span><span class="line" data-startTime="2964">into different stacks. </span><span class="line" data-startTime="2966">It seems to me that Google is </span><span class="line" data-startTime="2966">perfectly poised to do this, </span><span class="line" data-startTime="2968">considering it has its own stack </span><span class="line" data-startTime="2968">in Google App Engine. </span><span class="line" data-startTime="2972">Is mod_pagespeed available </span><span class="line" data-startTime="2972">for App Engine? </span><span class="line" data-startTime="2975">Is it going to be available </span><span class="line" data-startTime="2975">for App Engine? </span><span class="line" data-startTime="2978">Does it even apply </span><span class="line" data-startTime="2978">to App Engine? </span></p>

<p class="speaker"><span class="line" data-starttime="2981"><span class="speakerName">Richard Rabbat</span>: It is, I think, </span><span class="line" data-startTime="2981">the third bug that's </span><span class="line" data-startTime="2983">open on our issues list today. </span> <span class="line" data-startTime="2989">For App Engine, it </span><span class="line" data-startTime="2989">is currently not </span><span class="line" data-startTime="2992">enabled in App Engine. </span> <span class="line" data-startTime="2995">We've talked to the team, </span><span class="line" data-startTime="2995">they're very excited. </span> <span class="line" data-startTime="2998">We're excited about potentially </span><span class="line" data-startTime="2998">providing it, but </span><span class="line" data-startTime="3002">we have not done any immediate </span><span class="line" data-startTime="3002">work on this. </span> <span class="line" data-startTime="3008">We want to first focus on </span><span class="line" data-startTime="3008">stabilizing the technology, </span><span class="line" data-startTime="3012">making sure that we gets </span><span class="line" data-startTime="3012">the best out of it. </span> <span class="line" data-startTime="3015">And benzes then deployments with </span><span class="line" data-startTime="3015">other servers as well. </span> <span class="line" data-startTime="3022">One of the big questions, as </span><span class="line" data-startTime="3022">well, was how about EngineX? </span><span class="line" data-startTime="3025">How about Apache on Windows? </span><span class="line" data-startTime="3027">How about this? </span><span class="line" data-startTime="3029">Right now we're focused on the </span><span class="line" data-startTime="3029">core technology, and we'll </span><span class="line" data-startTime="3031">look at other things </span><span class="line" data-startTime="3031">in the future. </span></p>

<p><span class="line" data-startTime="3034">Thank you. </span> <span class="line" data-startTime="3036">I think you actually just </span><span class="line" data-startTime="3036">answered my question. </span> <span class="line" data-startTime="3038">We have seen a lot of success </span><span class="line" data-startTime="3038">with EngineX as a front end in </span><span class="line" data-startTime="3044">front of Apache, acting </span><span class="line" data-startTime="3044">as a reverse proxy. </span> <span class="line" data-startTime="3047">It would be really great to </span><span class="line" data-startTime="3047">implement some of these </span><span class="line" data-startTime="3049">techniques on that </span><span class="line" data-startTime="3049">level instead. </span> <span class="line" data-startTime="3051">So that's something that is on </span><span class="line" data-startTime="3051">the roadmap at some point? </span></p>

<p class="speaker"><span class="line" data-starttime="3056"><span class="speakerName">Joshua Marantz</span>: I stick EngineX </span><span class="line" data-startTime="3056">in front of Apache. </span><span class="line" data-startTime="3065">We've seen deployments where </span><span class="line" data-startTime="3065">EngineX is a front end and </span><span class="line" data-startTime="3070">Apache with mod_pagespeed </span><span class="line" data-startTime="3070">enabled is the back end, and </span><span class="line" data-startTime="3073">that should work great. </span><span class="line" data-startTime="3074">OK. </span><span class="line" data-startTime="3075">Yeah, thank you. </span><span class="line" data-startTime="3079">Can you talk to the </span><span class="line" data-startTime="3079">applicability of mod_pagespeed </span><span class="line" data-startTime="3083">and WebP or similar tools to </span><span class="line" data-startTime="3083">smartphones and tablets today </span><span class="line" data-startTime="3087">or in the future? </span></p>

<p class="speaker"><span class="line" data-starttime="3091"><span class="speakerName">Richard Rabbat</span>: For </span><span class="line" data-startTime="3091">mod_pagespeed, every time you </span><span class="line" data-startTime="3096">browse a page, you're going to </span><span class="line" data-startTime="3096">see a faster experience. </span><span class="line" data-startTime="3099">One of the really cool things </span><span class="line" data-startTime="3099">about mod_pagespeed is that it </span><span class="line" data-startTime="3104">reduces the number of </span><span class="line" data-startTime="3104">roundtrips you make. </span><span class="line" data-startTime="3106">And the roundtrip on a mobile </span><span class="line" data-startTime="3106">device is a couple of seconds </span><span class="line" data-startTime="3110">at some point. </span><span class="line" data-startTime="3111">So it's a very helpful tool for </span><span class="line" data-startTime="3111">a wireless and 3G and 4G </span><span class="line" data-startTime="3118">browsing experience. </span></p>

<p class="speaker"><span class="line" data-starttime="3120"><span class="speakerName">Joshua Marantz</span>: Yeah, I'll add </span><span class="line" data-startTime="3120">that mobile best practice are </span><span class="line" data-startTime="3125">different then desktop best </span><span class="line" data-startTime="3125">practices, in terms of </span><span class="line" data-startTime="3129">delivering the best </span><span class="line" data-startTime="3129">web experience. </span> <span class="line" data-startTime="3131">And one of the things that we </span><span class="line" data-startTime="3131">get the opportunity to do in </span><span class="line" data-startTime="3134">mod_pagespeed is deliver an </span><span class="line" data-startTime="3134">experience customized to the </span><span class="line" data-startTime="3138">user agent, because we have a </span><span class="line" data-startTime="3138">stack that we pay a lot of </span><span class="line" data-startTime="3146">attention to on a daily basis, </span><span class="line" data-startTime="3146">that gets to see the user </span><span class="line" data-startTime="3148">agent and then decide </span><span class="line" data-startTime="3148">what to do. </span> <span class="line" data-startTime="3149">So for example, today we do </span><span class="line" data-startTime="3149">image inlining only on </span><span class="line" data-startTime="3153">browsers that we know </span><span class="line" data-startTime="3153">to support it. </span> <span class="line" data-startTime="3156">And so, the image inlining is </span><span class="line" data-startTime="3156">automatic and it works. </span> <span class="line" data-startTime="3159">It doesn't leave </span><span class="line" data-startTime="3159">anybody behind. </span></p>

<p><span class="line" data-startTime="3161">That's kind of also the vision </span><span class="line" data-startTime="3161">with WebP, is that we can </span><span class="line" data-startTime="3163">transcode to WebP for browsers </span><span class="line" data-startTime="3163">that don't yet support it. </span> <span class="line" data-startTime="3168">But for browsers that do, you </span><span class="line" data-startTime="3168">would get WebP automatically </span><span class="line" data-startTime="3170">for free without having to. </span> <span class="line" data-startTime="3172">So along those same lines, </span><span class="line" data-startTime="3172">being able to have a </span><span class="line" data-startTime="3177">server-side decision about how </span><span class="line" data-startTime="3177">to render the webpage is only </span><span class="line" data-startTime="3180">going to benefit mobile. </span> <span class="line" data-startTime="3181">Have we gotten everything that </span><span class="line" data-startTime="3181">we want out of mobile </span><span class="line" data-startTime="3184">experience, out of mod_pagespeed </span><span class="line" data-startTime="3184">yet? </span><span class="line" data-startTime="3185">No, we're still working </span><span class="line" data-startTime="3185">on that. </span> <span class="line" data-startTime="3193">I work in organization I think </span><span class="line" data-startTime="3193">that has a fairly typical </span><span class="line" data-startTime="3196">workflow, in that we have a </span><span class="line" data-startTime="3196">centrally hosted content </span><span class="line" data-startTime="3199">management system which writes </span><span class="line" data-startTime="3199">out static assets to a CDN. </span> <span class="line" data-startTime="3205">So we don't have control over </span><span class="line" data-startTime="3205">the buildout of the technology </span><span class="line" data-startTime="3210">at the CDN, but we </span><span class="line" data-startTime="3210">would like to &mdash; </span><span class="line" data-startTime="3213">for static assets such as CSS </span><span class="line" data-startTime="3213">and JS files, we run a manual </span><span class="line" data-startTime="3219">compression script before </span><span class="line" data-startTime="3219">pushing out. </span></p>

<p><span class="line" data-startTime="3221">For images however, we don't </span><span class="line" data-startTime="3221">have anything in place, </span><span class="line" data-startTime="3227">essentially. </span> <span class="line" data-startTime="3228">Are there standalone </span><span class="line" data-startTime="3228">components? </span><span class="line" data-startTime="3229">Are there ways of ripping out </span><span class="line" data-startTime="3229">the image compression </span><span class="line" data-startTime="3232">components of this and running </span><span class="line" data-startTime="3232">that against our asses before </span><span class="line" data-startTime="3237">we push to CDN? </span></p>

<p class="speaker"><span class="line" data-starttime="3240"><span class="speakerName">Joshua Marantz</span>: So I guess the </span><span class="line" data-startTime="3240">point of mod_pagespeed is not </span><span class="line" data-startTime="3244">that we have new or unique image </span><span class="line" data-startTime="3244">processing capabilities. </span><span class="line" data-startTime="3249">Under the hood, actually </span><span class="line" data-startTime="3249">it's OpenCV. </span><span class="line" data-startTime="3252">ImageMagick is another good </span><span class="line" data-startTime="3252">engine that a lot of people </span><span class="line" data-startTime="3255">use when they're doing </span><span class="line" data-startTime="3255">this kind of </span><span class="line" data-startTime="3256">manual compression step. </span><span class="line" data-startTime="3258">The point of mod_pagespeed is </span><span class="line" data-startTime="3258">to save you the effort of </span><span class="line" data-startTime="3261">having to manage that </span><span class="line" data-startTime="3261">flow yourself. </span><span class="line" data-startTime="3263">But given that you have that </span><span class="line" data-startTime="3263">flow and you want to keep </span><span class="line" data-startTime="3266">doing it, something like </span><span class="line" data-startTime="3266">ImageMagick or other tools </span><span class="line" data-startTime="3269">like that are probably the best </span><span class="line" data-startTime="3269">bet for doing standalone </span><span class="line" data-startTime="3272">image compression. </span></p>

<p class="speaker"><span class="line" data-starttime="3273"><span class="speakerName">Richard Rabbat</span>: I think he was </span><span class="line" data-startTime="3273">talking about further out </span><span class="line" data-startTime="3276">where you have the HTML content </span><span class="line" data-startTime="3276">and you want to figure </span><span class="line" data-startTime="3280">out how the image should </span><span class="line" data-startTime="3280">be optimized </span><span class="line" data-startTime="3283">for that HTML content. </span><span class="line" data-startTime="3285">Yeah, there's a number </span><span class="line" data-startTime="3285">of touch points. </span><span class="line" data-startTime="3291">There's always, especially in </span><span class="line" data-startTime="3291">fairly large sites, you can </span><span class="line" data-startTime="3297">optimize at the CDN, you </span><span class="line" data-startTime="3297">can optimize before </span><span class="line" data-startTime="3298">you push to the CDN. </span><span class="line" data-startTime="3299">You could do some smart </span><span class="line" data-startTime="3299">edge-level page caching. </span><span class="line" data-startTime="3304">We've always taken a very simple </span><span class="line" data-startTime="3304">approach of, compress </span><span class="line" data-startTime="3307">everything, pull out all the </span><span class="line" data-startTime="3307">white space, pull out all the </span><span class="line" data-startTime="3310">comments, compress the graphics </span><span class="line" data-startTime="3310">as much as we can. </span><span class="line" data-startTime="3313">Prior to pushing out to the </span><span class="line" data-startTime="3313">CDN, and eliminate steps. </span><span class="line" data-startTime="3318">So I've see things like Yahoo </span><span class="line" data-startTime="3318">smush it, where you can upload </span><span class="line" data-startTime="3322">a bunch of images, they come </span><span class="line" data-startTime="3322">back looking exactly the same </span><span class="line" data-startTime="3324">but much smaller. </span><span class="line" data-startTime="3327">What I would love is an API that </span><span class="line" data-startTime="3327">we upload image, we send </span><span class="line" data-startTime="3331">the image to the API, the API </span><span class="line" data-startTime="3331">comes back with an optimized </span><span class="line" data-startTime="3335">lossless version of that </span><span class="line" data-startTime="3335">image, and then we </span><span class="line" data-startTime="3339">push it to the CDN. </span><span class="line" data-startTime="3341">If you're into custom </span><span class="line" data-startTime="3341">development. </span></p>

<p class="speaker"><span class="line" data-starttime="3343"><span class="speakerName">Richard Rabbat</span>: So we actually </span><span class="line" data-startTime="3343">have something that's on the </span><span class="line" data-startTime="3345">pagespeed online API part which </span><span class="line" data-startTime="3345">allows you to score the </span><span class="line" data-startTime="3353">page against the pagespeed's </span><span class="line" data-startTime="3353">rules. </span><span class="line" data-startTime="3356">We currently are going to give </span><span class="line" data-startTime="3356">you back results and tell you </span><span class="line" data-startTime="3358">what you could have </span><span class="line" data-startTime="3358">done better. </span><span class="line" data-startTime="3361">That's an interesting request </span><span class="line" data-startTime="3361">that we'll take into </span><span class="line" data-startTime="3365">consideration. </span><span class="line" data-startTime="3367">Thanks. </span><span class="line" data-startTime="3370">Hi, you mentioned that the </span><span class="line" data-startTime="3370">time to first byte on </span><span class="line" data-startTime="3373">mod_pagespeed is slightly </span><span class="line" data-startTime="3373">increased because of the </span><span class="line" data-startTime="3376">processing it does and some of </span><span class="line" data-startTime="3376">the optimization that applies. </span><span class="line" data-startTime="3381">Could some of that stuff </span><span class="line" data-startTime="3381">be done offline in a </span><span class="line" data-startTime="3383">pre-processing step? </span><span class="line" data-startTime="3384">Say, before I deploy </span><span class="line" data-startTime="3384">my resources? </span></p>

<p class="speaker"><span class="line" data-starttime="3387"><span class="speakerName">Joshua Marantz</span>: That's </span><span class="line" data-startTime="3387">a great question. </span> <span class="line" data-startTime="3388">Of course, all those things </span><span class="line" data-startTime="3388">could be done, but they have </span><span class="line" data-startTime="3395">not yet been done. </span> <span class="line" data-startTime="3397">But for the majority of </span><span class="line" data-startTime="3397">websites, we've taken kind of </span><span class="line" data-startTime="3401">a conservative approach to HTML </span><span class="line" data-startTime="3401">and assumed that it's </span><span class="line" data-startTime="3404">fairly dynamic and often </span><span class="line" data-startTime="3404">personalized to the user so </span><span class="line" data-startTime="3408">that caching HTML on the server </span><span class="line" data-startTime="3408">side is something that </span><span class="line" data-startTime="3412">would not be our default </span><span class="line" data-startTime="3412">behavior. </span> <span class="line" data-startTime="3416">However, on the resource </span><span class="line" data-startTime="3416">optimization side, </span><span class="line" data-startTime="3419">we already do that. </span> <span class="line" data-startTime="3420">Because we cache any </span><span class="line" data-startTime="3420">rewritten resource. </span> <span class="line" data-startTime="3422">So when I talked about that </span><span class="line" data-startTime="3422">overhead or that time to first </span><span class="line" data-startTime="3425">byte, that's generally from </span><span class="line" data-startTime="3425">running it through the HTML </span><span class="line" data-startTime="3430">filter, because we don't </span><span class="line" data-startTime="3430">cache the HTML. </span> <span class="line" data-startTime="3433">But we cache all of the </span><span class="line" data-startTime="3433">rewritten images and CSS files </span><span class="line" data-startTime="3436">so we don't have to redo </span><span class="line" data-startTime="3436">those every time. </span></p>

<p><span class="line" data-startTime="3439">Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="3441"><span class="speakerName">Richard Rabbat</span>: Thank </span><span class="line" data-startTime="3441">you all for coming. </span><span class="line" data-startTime="3444">I think a lot of people are </span><span class="line" data-startTime="3444">going to break for lunch now, </span><span class="line" data-startTime="3447">so we're keeping you away from </span><span class="line" data-startTime="3447">your food, so please go ahead. </span></p>