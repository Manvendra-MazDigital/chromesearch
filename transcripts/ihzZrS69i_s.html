<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>Google I/O 2013 &mdash; A Moving Experience</h1>

<h2>Chet Haase, Romain Guy</h2>

<a class="video" href="http://youtu.be/ihzZrS69i_s">youtu.be/ihzZrS69i_s</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="7"><span class="speakerName">Chet Haase</span>: Hello. </span><span class="line" data-startTime="7">I am not Romain Guy. </span></p>

<p class="speaker"><span class="line" data-starttime="9"><span class="speakerName">Romain Guy</span>: And I am </span><span class="line" data-startTime="9">not Chet Haase. </span><span class="line" data-startTime="12">That's a good thing, actually. </span></p>

<p class="speaker"><span class="line" data-starttime="14"><span class="speakerName">Chet Haase</span>: That's </span><span class="line" data-startTime="14">what I think. </span><span class="line" data-startTime="16">Welcome to "A Moving </span><span class="line" data-startTime="16">Experience." </span></p>

<p class="speaker"><span class="line" data-starttime="19"><span class="speakerName">Romain Guy</span>: So we're going </span><span class="line" data-startTime="19">to talk about animations. </span></p>

<p class="speaker"><span class="line" data-starttime="22"><span class="speakerName">Chet Haase</span>: Why are we going </span><span class="line" data-startTime="22">to talk about animation? </span><span class="line" data-startTime="24">So one of the questions </span><span class="line" data-startTime="24">that people &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="26"><span class="speakerName">Romain Guy</span>: I know why. </span><span class="line" data-startTime="26">That's because you cannot shut </span><span class="line" data-startTime="26">up about animations. </span></p>

<p class="speaker"><span class="line" data-starttime="29"><span class="speakerName">Chet Haase</span>: I'm going to talk </span><span class="line" data-startTime="29">about them because I &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="30"><span class="speakerName">Romain Guy</span>: You should </span><span class="line" data-startTime="30">see him at work. </span><span class="line" data-startTime="30">He's always like, animations, </span><span class="line" data-startTime="30">animations, animations, </span><span class="line" data-startTime="31">animations, animations, </span><span class="line" data-startTime="31">animations. </span><span class="line" data-startTime="33">OK. </span><span class="line" data-startTime="33">Now you can talk. </span></p>

<p class="speaker"><span class="line" data-starttime="35"><span class="speakerName">Chet Haase</span>: OK. </span><span class="line" data-startTime="36">So I'm going to talk about them </span><span class="line" data-startTime="36">because I enjoy talking </span><span class="line" data-startTime="39">about them. </span><span class="line" data-startTime="40">You are going to listen </span><span class="line" data-startTime="40">to them &mdash; </span><span class="line" data-startTime="41">Actually, I don't know why </span><span class="line" data-startTime="41">you're listening them. </span><span class="line" data-startTime="42">You should listen about </span><span class="line" data-startTime="42">animations because I believe </span><span class="line" data-startTime="46">they help create more compelling </span><span class="line" data-startTime="46">applications. </span><span class="line" data-startTime="50">They make applications maybe </span><span class="line" data-startTime="50">more fun, but that's not the </span><span class="line" data-startTime="52">real reason why it's actually </span><span class="line" data-startTime="52">worth spending effort on. </span></p>

<p class="speaker"><span class="line" data-starttime="55"><span class="speakerName">Romain Guy</span>: They also </span><span class="line" data-startTime="55">justify your salary. </span></p>

<p class="speaker"><span class="line" data-starttime="56"><span class="speakerName">Chet Haase</span>: They do </span><span class="line" data-startTime="56">justify my salary. </span> <span class="line" data-startTime="58">So I wish you would write more </span><span class="line" data-startTime="58">and more and require more </span><span class="line" data-startTime="60">feature requests in the Android </span><span class="line" data-startTime="60">platform, specifically </span><span class="line" data-startTime="63">around animations. </span> <span class="line" data-startTime="64">Thank you. </span> <span class="line" data-startTime="65">One of the most important </span><span class="line" data-startTime="65">reasons is to engage your </span><span class="line" data-startTime="68">user, to actually connect them </span><span class="line" data-startTime="68">to the application, make them </span><span class="line" data-startTime="71">feel good about it, give them </span><span class="line" data-startTime="71">a dynamic experience instead </span><span class="line" data-startTime="74">of just some random </span><span class="line" data-startTime="74">poorly-written page that they </span><span class="line" data-startTime="77">click through in some </span><span class="line" data-startTime="77">form that they hate. </span> <span class="line" data-startTime="79">Give them an experience from </span><span class="line" data-startTime="79">your application that lets </span><span class="line" data-startTime="81">them remember your application, </span><span class="line" data-startTime="81">the experience </span><span class="line" data-startTime="84">itself, and the precious quality </span><span class="line" data-startTime="84">time that they spent </span><span class="line" data-startTime="87">with it on their device. </span> <span class="line" data-startTime="89">In addition, it can help them </span><span class="line" data-startTime="89">understand what can be a very </span><span class="line" data-startTime="93">confusing user interface </span><span class="line" data-startTime="93">experience, especially for </span><span class="line" data-startTime="96">people like my mother. </span> <span class="line" data-startTime="98">If you can use animations to </span><span class="line" data-startTime="98">help the user understand that </span><span class="line" data-startTime="102">transitions and changes that are </span><span class="line" data-startTime="102">actually happening in the </span><span class="line" data-startTime="105">application and on the screen, </span><span class="line" data-startTime="105">then it can be a very helpful </span><span class="line" data-startTime="108">way to not only engage them and </span><span class="line" data-startTime="108">keep them connected but </span><span class="line" data-startTime="110">help them understand the flow of </span><span class="line" data-startTime="110">your application in the way </span><span class="line" data-startTime="114">that you want them to, alert </span><span class="line" data-startTime="114">them in a way that they can </span><span class="line" data-startTime="117">see on the screen of information </span><span class="line" data-startTime="117">that they need to </span><span class="line" data-startTime="119">know about, help them transition </span><span class="line" data-startTime="119">from state to state </span><span class="line" data-startTime="122">so they understand where they </span><span class="line" data-startTime="122">came from and how they got </span><span class="line" data-startTime="124">there so that they can stay </span><span class="line" data-startTime="124">connected to the different </span><span class="line" data-startTime="126">states in the application as </span><span class="line" data-startTime="126">you're going through them. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="130"><span class="speakerName">Romain Guy</span>: So first we're </span><span class="line" data-startTime="130">going to get started, and </span><span class="line" data-startTime="131">we're going to talk about four </span><span class="line" data-startTime="131">principles that are behind all </span><span class="line" data-startTime="135">good animations. </span> <span class="line" data-startTime="137">The first one is keep your </span><span class="line" data-startTime="137">animations short. </span> <span class="line" data-startTime="139">There is nothing more annoying </span><span class="line" data-startTime="139">than when use an app and you </span><span class="line" data-startTime="142">push a button, maybe </span><span class="line" data-startTime="142">by mistake, and </span><span class="line" data-startTime="144">then something happens. </span> <span class="line" data-startTime="146">We are a very impatient being. </span> <span class="line" data-startTime="148">Something that feels like it </span><span class="line" data-startTime="148">takes 10 years on screen </span><span class="line" data-startTime="152">actually might last for half </span><span class="line" data-startTime="152">a second or just a second. </span> <span class="line" data-startTime="155">But when you didn't want that </span><span class="line" data-startTime="155">animation, it's going to be </span><span class="line" data-startTime="157">very painful. </span> <span class="line" data-startTime="158">Actually, it happened to us </span><span class="line" data-startTime="158">in our previous session. </span> <span class="line" data-startTime="161">I was a little too impatient </span><span class="line" data-startTime="161">because I had a slow animation </span><span class="line" data-startTime="163">on one of the slides. </span> <span class="line" data-startTime="164">And I hit the arrow again, and </span><span class="line" data-startTime="164">that skipped it to another </span><span class="line" data-startTime="167">animation right after that. </span> <span class="line" data-startTime="170">So it can be very painful for </span><span class="line" data-startTime="170">the users and can be very </span><span class="line" data-startTime="173">painful for you as a developer, </span><span class="line" data-startTime="173">because you'll have </span><span class="line" data-startTime="175">to see that animation over </span><span class="line" data-startTime="175">and over and over again. </span></p>

<p><span class="line" data-startTime="177">I like to justify our principles </span><span class="line" data-startTime="177">in that way. </span> <span class="line" data-startTime="181">Developers, that's going </span><span class="line" data-startTime="181">to be painful for you. </span> <span class="line" data-startTime="184">Make it good for you, </span><span class="line" data-startTime="184">it's going to be </span><span class="line" data-startTime="185">good for the users. </span></p>

<p class="speaker"><span class="line" data-starttime="185"><span class="speakerName">Chet Haase</span>: Good. </span><span class="line" data-startTime="186">Good. </span></p>

<p class="speaker"><span class="line" data-starttime="186"><span class="speakerName">Romain Guy</span>: To give you </span><span class="line" data-startTime="186">an idea when you use a </span><span class="line" data-startTime="189">ViewPropertyAnimator on Android, </span><span class="line" data-startTime="189">we have a default </span><span class="line" data-startTime="191">duration that, I think, is set </span><span class="line" data-startTime="191">as, what, 300 milliseconds? </span></p>

<p class="speaker"><span class="line" data-starttime="193"><span class="speakerName">Chet Haase</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="195"><span class="speakerName">Romain Guy</span>: So 300 milliseconds </span><span class="line" data-startTime="195">is a good </span><span class="line" data-startTime="197">direction for a lot of </span><span class="line" data-startTime="197">animations on a mobile device. </span><span class="line" data-startTime="200">It's pretty short. </span><span class="line" data-startTime="202">It's not too short that we won't </span><span class="line" data-startTime="202">have enough frames to </span><span class="line" data-startTime="205">see the entirety of </span><span class="line" data-startTime="205">the animation. </span><span class="line" data-startTime="208">And for most animation, it's not </span><span class="line" data-startTime="208">going to annoy the user. </span></p>

<p class="speaker"><span class="line" data-starttime="210"><span class="speakerName">Chet Haase</span>: So one of the </span><span class="line" data-startTime="210">dynamics here, actually with a </span><span class="line" data-startTime="213">lot of this stuff, we don't </span><span class="line" data-startTime="213">have an answer. </span> <span class="line" data-startTime="215">We can't say 300 milliseconds </span><span class="line" data-startTime="215">is the duration that you </span><span class="line" data-startTime="218">should use for all animations, </span><span class="line" data-startTime="218">because that </span><span class="line" data-startTime="220">answer would be stupid. </span> <span class="line" data-startTime="221">Because it really depends </span><span class="line" data-startTime="221">on the situation. </span> <span class="line" data-startTime="223">If you're moving a view a very </span><span class="line" data-startTime="223">short distance, I would expect </span><span class="line" data-startTime="226">that animation to </span><span class="line" data-startTime="226">be far shorter. </span> <span class="line" data-startTime="228">If it's something that you </span><span class="line" data-startTime="228">expect to be almost an atomic </span><span class="line" data-startTime="230">action, I would expect it </span><span class="line" data-startTime="230">to be almost immediate. </span> <span class="line" data-startTime="233">But if you're moving a view, and </span><span class="line" data-startTime="233">it's a large complex view, </span><span class="line" data-startTime="236">and you're moving it from one </span><span class="line" data-startTime="236">side of the screen on a large </span><span class="line" data-startTime="238">tablet device down to the other </span><span class="line" data-startTime="238">side of the screen, </span><span class="line" data-startTime="240">bottom corner, well, maybe that </span><span class="line" data-startTime="242">duration should be longer. </span></p>

<p><span class="line" data-startTime="244">Make the duration appropriate </span><span class="line" data-startTime="244">to the animation that's </span><span class="line" data-startTime="247">actually happening </span><span class="line" data-startTime="247">and no longer. </span> <span class="line" data-startTime="249">A really good example of this </span><span class="line" data-startTime="249">is the window animation that </span><span class="line" data-startTime="251">we use on the platform. </span> <span class="line" data-startTime="253">When you switch activities or </span><span class="line" data-startTime="253">when you launch activities, we </span><span class="line" data-startTime="255">have a scaling fading </span><span class="line" data-startTime="255">animation. </span> <span class="line" data-startTime="257">Well, there's a lot of </span><span class="line" data-startTime="257">movement in that. </span> <span class="line" data-startTime="258">If you're scaling out from zero </span><span class="line" data-startTime="258">and you're fading in from </span><span class="line" data-startTime="261">zero to all the way opaque, </span><span class="line" data-startTime="261">you need to make it long </span><span class="line" data-startTime="263">enough that it actually makes </span><span class="line" data-startTime="263">sense and it's not stuttery </span><span class="line" data-startTime="265">and discontinuous, because </span><span class="line" data-startTime="265">it's trying to </span><span class="line" data-startTime="267">cover a lot of distance. </span> <span class="line" data-startTime="269">But if we did a really long </span><span class="line" data-startTime="269">duration, you would end up </span><span class="line" data-startTime="271">waiting a long time for </span><span class="line" data-startTime="271">that smooth animation. </span> <span class="line" data-startTime="274">It would be really annoying. </span> <span class="line" data-startTime="275">So what we do instead is we </span><span class="line" data-startTime="275">start a really long animation </span><span class="line" data-startTime="278">most of the way through. </span></p>

<p><span class="line" data-startTime="279">I think it's like 80% of the way </span><span class="line" data-startTime="279">opaque and 80% of the way </span><span class="line" data-startTime="282">scaled out. </span> <span class="line" data-startTime="283">And then we finish </span><span class="line" data-startTime="283">the animation. </span> <span class="line" data-startTime="285">So you get the implication of </span><span class="line" data-startTime="285">a very great distance being </span><span class="line" data-startTime="288">covered, but we do it in </span><span class="line" data-startTime="288">small enough duration </span><span class="line" data-startTime="289">that it's not annoying. </span></p>

<p class="speaker"><span class="line" data-starttime="290"><span class="speakerName">Romain Guy</span>: And what's very </span><span class="line" data-startTime="290">interesting is that the </span><span class="line" data-startTime="291">duration you choose will also </span><span class="line" data-startTime="291">depend very much on what kind </span><span class="line" data-startTime="295">of animation you're running. </span><span class="line" data-startTime="297">The best example of that is if </span><span class="line" data-startTime="297">you move something on screen. </span><span class="line" data-startTime="299">If it's a small button, you can </span><span class="line" data-startTime="299">use a very long duration, </span><span class="line" data-startTime="304">and it will still feel </span><span class="line" data-startTime="304">pretty good. </span><span class="line" data-startTime="306">But if you use something that's </span><span class="line" data-startTime="306">really big and really </span><span class="line" data-startTime="308">large and you have the same </span><span class="line" data-startTime="308">direction as with that small </span><span class="line" data-startTime="311">item, that small button, it will </span><span class="line" data-startTime="311">feel longer because the </span><span class="line" data-startTime="314">object will feel heavier. </span><span class="line" data-startTime="316">You can try that yourself. </span><span class="line" data-startTime="317">Write an application and try to </span><span class="line" data-startTime="317">move a really big rectangle </span><span class="line" data-startTime="320">versus a small rectangle with </span><span class="line" data-startTime="320">the same duration and the same </span><span class="line" data-startTime="322">distance, in the feel will be </span><span class="line" data-startTime="322">very different as a user. </span></p>

<p class="speaker"><span class="line" data-starttime="325"><span class="speakerName">Chet Haase</span>: That's actually why </span><span class="line" data-startTime="325">Galileo did the experiment </span><span class="line" data-startTime="328">with the stone and the feather, </span><span class="line" data-startTime="328">because he was </span><span class="line" data-startTime="330">testing animation durations. </span> <span class="line" data-startTime="335">Another important principle &mdash; </span><span class="line" data-startTime="335">we'll try to bring up a lot of </span><span class="line" data-startTime="337">classical science lessons </span><span class="line" data-startTime="337">for you in this talk &mdash; </span><span class="line" data-startTime="341">is to make your animations </span><span class="line" data-startTime="341">smooth. </span> <span class="line" data-startTime="345">If you have a really complicated </span><span class="line" data-startTime="345">animation that </span><span class="line" data-startTime="348">does a lot of really cool stuff </span><span class="line" data-startTime="348">and then it stutters in </span><span class="line" data-startTime="350">the middle, your user </span><span class="line" data-startTime="350">will hate you. </span> <span class="line" data-startTime="353">What you want is a </span><span class="line" data-startTime="353">smooth experience </span><span class="line" data-startTime="355">from start to finish. </span> <span class="line" data-startTime="356">Now sometimes it's not possible </span><span class="line" data-startTime="356">for you to get all </span><span class="line" data-startTime="358">the information that you need </span><span class="line" data-startTime="358">to create the animation </span><span class="line" data-startTime="362">without doing something like a </span><span class="line" data-startTime="362">layout that might be a little </span><span class="line" data-startTime="364">too expensive. </span> <span class="line" data-startTime="365">OK. </span></p>

<p><span class="line" data-startTime="365">Two tips about that. </span> <span class="line" data-startTime="366">Don't run layout during </span><span class="line" data-startTime="366">the animation. </span> <span class="line" data-startTime="368">We'll bring this up later just </span><span class="line" data-startTime="368">to drive the point home. </span> <span class="line" data-startTime="371">And the other is go ahead and </span><span class="line" data-startTime="371">run that layout or do that </span><span class="line" data-startTime="374">expensive operation at </span><span class="line" data-startTime="374">the beginning before </span><span class="line" data-startTime="376">the animation starts. </span> <span class="line" data-startTime="377">When it's done, get the </span><span class="line" data-startTime="377">information you need and then </span><span class="line" data-startTime="379">start the animation. </span> <span class="line" data-startTime="381">And do whatever you can to keep </span><span class="line" data-startTime="381">the animation running </span><span class="line" data-startTime="383">smooth and performant for the </span><span class="line" data-startTime="383">duration of the animation so </span><span class="line" data-startTime="386">that that experience is </span><span class="line" data-startTime="386">smooth to the user. </span></p>

<p><span class="line" data-startTime="388">Otherwise, your animation's </span><span class="line" data-startTime="388">going to get super annoying. </span> <span class="line" data-startTime="391">They're going to notice </span><span class="line" data-startTime="391">the animation. </span> <span class="line" data-startTime="392">They're going to notice </span><span class="line" data-startTime="392">it because it's bad. </span></p>

<p class="speaker"><span class="line" data-starttime="394"><span class="speakerName">Romain Guy</span>: So performance &mdash; </span><span class="line" data-startTime="396">we've talked about performance </span><span class="line" data-startTime="396">in many other talks before &mdash; </span><span class="line" data-startTime="398">is very, very important to </span><span class="line" data-startTime="398">having smooth animations. </span> <span class="line" data-startTime="401">But it's not just about </span><span class="line" data-startTime="401">performance. </span> <span class="line" data-startTime="403">If you change animations, the </span><span class="line" data-startTime="403">way you're going to change the </span><span class="line" data-startTime="407">animations, like the </span><span class="line" data-startTime="407">acceleration curves you're </span><span class="line" data-startTime="409">going to use, will also be very </span><span class="line" data-startTime="409">important to keep the </span><span class="line" data-startTime="411">animations smooth. </span> <span class="line" data-startTime="413">And I think we have an example </span><span class="line" data-startTime="413">later on where we have a </span><span class="line" data-startTime="415">bouncing button. </span></p>

<p><span class="line" data-startTime="416">And if you don't do the bouncing </span><span class="line" data-startTime="416">right, it will feel </span><span class="line" data-startTime="419">like the animations </span><span class="line" data-startTime="419">is stuttering. </span> <span class="line" data-startTime="420">It's not a performance issue. </span> <span class="line" data-startTime="421">It's just a timing issue. </span> <span class="line" data-startTime="422">So be also very careful </span><span class="line" data-startTime="422">with how you tie </span><span class="line" data-startTime="425">your animations together. </span></p>

<p class="speaker"><span class="line" data-starttime="429"><span class="speakerName">Chet Haase</span>: Here's another one </span><span class="line" data-startTime="429">with a beautiful organic </span><span class="line" data-startTime="430">picture behind it. </span><span class="line" data-startTime="431">Make them feel natural. </span><span class="line" data-startTime="433">Make the user not even notice </span><span class="line" data-startTime="433">the animation because it just </span><span class="line" data-startTime="435">feels like it needs </span><span class="line" data-startTime="435">to be there. </span><span class="line" data-startTime="437">This is the interaction that </span><span class="line" data-startTime="437">makes sense for the </span><span class="line" data-startTime="439">application, not just a whizzy </span><span class="line" data-startTime="439">animation that you thought </span><span class="line" data-startTime="443">looked cool at the time. </span><span class="line" data-startTime="444">The idea is to allow the user </span><span class="line" data-startTime="444">to interact with your </span><span class="line" data-startTime="448">application in a way that they </span><span class="line" data-startTime="448">enjoy and which feels very </span><span class="line" data-startTime="450">organic and natural to them, not </span><span class="line" data-startTime="450">which just feels cool to </span><span class="line" data-startTime="453">the developer that happened to </span><span class="line" data-startTime="453">write the whizzy animation. </span><span class="line" data-startTime="458">And finally, you should </span><span class="line" data-startTime="458">make your </span><span class="line" data-startTime="461">applications not arbitrary. </span><span class="line" data-startTime="465">One of my favorite examples, it </span><span class="line" data-startTime="465">was some release of Linux? </span></p>

<p class="speaker"><span class="line" data-starttime="468"><span class="speakerName">Romain Guy</span>: Yeah. </span><span class="line" data-startTime="468">On Linux Desktops, there was </span><span class="line" data-startTime="468">something called Compiz or &mdash; </span><span class="line" data-startTime="472">There are window managers that </span><span class="line" data-startTime="472">when you close the window it's </span><span class="line" data-startTime="473">really cool. </span><span class="line" data-startTime="474">The window catches on </span><span class="line" data-startTime="474">fire and disappears </span><span class="line" data-startTime="476">in a burst of smoke. </span><span class="line" data-startTime="478">Yeah. </span><span class="line" data-startTime="478">Don't do that. </span><span class="line" data-startTime="480">We could show you how to write </span><span class="line" data-startTime="480">the code to do that. </span><span class="line" data-startTime="482">Oh, also there was this </span><span class="line" data-startTime="482">awesome application, </span><span class="line" data-startTime="484">[? MyQuest 10. ?] </span><span class="line" data-startTime="485">When you burn a CD, the </span><span class="line" data-startTime="485">window would smoke. </span><span class="line" data-startTime="488">There would smoke coming out </span><span class="line" data-startTime="488">of the window like you're </span><span class="line" data-startTime="491">burning the CD. </span><span class="line" data-startTime="492">It's really cool. </span><span class="line" data-startTime="494">Don't do it. </span></p>

<p class="speaker"><span class="line" data-starttime="495"><span class="speakerName">Chet Haase</span>: It's really </span><span class="line" data-startTime="495">fun the first </span><span class="line" data-startTime="497">time and after that &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="498"><span class="speakerName">Romain Guy</span>: There's one </span><span class="line" data-startTime="498">situation where you can do it </span><span class="line" data-startTime="500">is when you're on stage at the </span><span class="line" data-startTime="500">conference and you show cool </span><span class="line" data-startTime="502">stuff to people and then you </span><span class="line" data-startTime="502">tell them to not do that. </span></p>

<p class="speaker"><span class="line" data-starttime="505"><span class="speakerName">Chet Haase</span>: We'll try to </span><span class="line" data-startTime="505">do some of that today. </span><span class="line" data-startTime="507">Don't do what we're doing. </span><span class="line" data-startTime="509">Yes. </span><span class="line" data-startTime="509">So make them make sense. </span><span class="line" data-startTime="511">Give them a purpose. </span><span class="line" data-startTime="512">Show the user what's going on </span><span class="line" data-startTime="512">in the UI, indicate some </span><span class="line" data-startTime="514">important action to them, help </span><span class="line" data-startTime="514">them during transitions in the </span><span class="line" data-startTime="517">experience, whatever. </span><span class="line" data-startTime="518">There's a reason for the </span><span class="line" data-startTime="518">animation to be there. </span><span class="line" data-startTime="520">Make that be the reason </span><span class="line" data-startTime="520">and not because you </span><span class="line" data-startTime="522">thought it was cool. </span><span class="line" data-startTime="524">So let's see a couple </span><span class="line" data-startTime="524">of examples. </span><span class="line" data-startTime="527">Actually, someone was just in </span><span class="line" data-startTime="527">office hours a few minutes ago </span><span class="line" data-startTime="530">asking, hey, I have a </span><span class="line" data-startTime="530">quick question for </span><span class="line" data-startTime="532">you if you have time. </span><span class="line" data-startTime="533">What is the correct way to </span><span class="line" data-startTime="533">do a ListView animation? </span></p>

<p class="speaker"><span class="line" data-starttime="535"><span class="speakerName">Romain Guy</span>: Here's the answer. </span></p>

<p class="speaker"><span class="line" data-starttime="536"><span class="speakerName">Chet Haase</span>: So we wrote some </span><span class="line" data-startTime="536">quick code, and we developed </span><span class="line" data-startTime="538">some slides. </span><span class="line" data-startTime="539">So we thought we would show you </span><span class="line" data-startTime="539">what we think would be the </span><span class="line" data-startTime="542">correct way to do this. </span><span class="line" data-startTime="544">A correct way do this. </span><span class="line" data-startTime="547">The example here is we're going </span><span class="line" data-startTime="547">to swipe an item out. </span><span class="line" data-startTime="553">And as we swipe it, </span><span class="line" data-startTime="553">it's doing a fade. </span><span class="line" data-startTime="555">And you can see behind it we've </span><span class="line" data-startTime="555">got a little backdrop </span><span class="line" data-startTime="558">there, and we've got some </span><span class="line" data-startTime="558">drop shadow there. </span><span class="line" data-startTime="560">And then when we let go, it </span><span class="line" data-startTime="560">moves the rest of the way off. </span><span class="line" data-startTime="563">Or if you don't move </span><span class="line" data-startTime="563">it enough, it </span><span class="line" data-startTime="564">snaps back into place. </span><span class="line" data-startTime="566">So we've got the animation </span><span class="line" data-startTime="566">of the swipe. </span><span class="line" data-startTime="568">And then after the item is gone, </span><span class="line" data-startTime="568">if we swiped it out, </span><span class="line" data-startTime="570">then the rest of the items </span><span class="line" data-startTime="570">animate into place. </span><span class="line" data-startTime="572">Fairly common for people </span><span class="line" data-startTime="572">to want to do this. </span><span class="line" data-startTime="574">Fairly common for people to not </span><span class="line" data-startTime="574">understand how to do this. </span><span class="line" data-startTime="578">So the interesting </span><span class="line" data-startTime="578">part might be &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="579"><span class="speakerName">Romain Guy</span>: How many of you </span><span class="line" data-startTime="579">have tried to do this? </span><span class="line" data-startTime="582">How many of you have </span><span class="line" data-startTime="582">failed to do it? </span></p>

<p class="speaker"><span class="line" data-starttime="585"><span class="speakerName">Chet Haase</span>: Come on. </span><span class="line" data-startTime="586">Don't be shy. </span></p>

<p class="speaker"><span class="line" data-starttime="587"><span class="speakerName">Romain Guy</span>: Sorry about that. </span><span class="line" data-startTime="588">It's mostly our fault. </span></p>

<p class="speaker"><span class="line" data-starttime="591"><span class="speakerName">Chet Haase</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="591"><span class="speakerName">Romain Guy</span>: So here's </span><span class="line" data-startTime="591">the answer. </span></p>

<p class="speaker"><span class="line" data-starttime="594"><span class="speakerName">Chet Haase</span>: Let's take </span><span class="line" data-startTime="594">a look at the code. </span><span class="line" data-startTime="595">This might get a little bogged </span><span class="line" data-startTime="595">down, because, of course, </span><span class="line" data-startTime="597">there's a bunch of </span><span class="line" data-startTime="597">code in there. </span><span class="line" data-startTime="598">We have a callback of code on </span><span class="line" data-startTime="598">the slide calling out the </span><span class="line" data-startTime="600">important parts. </span></p>

<p class="speaker"><span class="line" data-starttime="601"><span class="speakerName">Romain Guy</span>: Is the form big </span><span class="line" data-startTime="601">enough for everybody? </span><span class="line" data-startTime="604">People in the back? </span><span class="line" data-startTime="605">Or they don't care. </span><span class="line" data-startTime="605">They're asleep. </span><span class="line" data-startTime="606">OK. </span></p>

<p class="speaker"><span class="line" data-starttime="606"><span class="speakerName">Chet Haase</span>: They are asleep. </span></p>

<p class="speaker"><span class="line" data-starttime="607"><span class="speakerName">Romain Guy</span>: One guy said yes. </span></p>

<p class="speaker"><span class="line" data-starttime="609"><span class="speakerName">Chet Haase</span>: All right. </span><span class="line" data-startTime="610">All right. </span><span class="line" data-startTime="611">So here we are. </span><span class="line" data-startTime="613">We are in ListView Removal </span><span class="line" data-startTime="613">Animation. </span><span class="line" data-startTime="616">Actually, I want to </span><span class="line" data-startTime="616">take a look at the </span><span class="line" data-startTime="617">ArrayAdapter first. </span><span class="line" data-startTime="618">We create a stable ArrayAdapter, </span><span class="line" data-startTime="618">because I don't </span><span class="line" data-startTime="619">want my items to move </span><span class="line" data-startTime="619">out from under me. </span><span class="line" data-startTime="621">I don't want the content </span><span class="line" data-startTime="621">to change. </span><span class="line" data-startTime="623">So we will subclass ArrayAdapter </span><span class="line" data-startTime="623">and return back </span><span class="line" data-startTime="627">static item IDs. </span><span class="line" data-startTime="629">That's important. </span><span class="line" data-startTime="630">The other thing that we do in </span><span class="line" data-startTime="630">this very simple subclass is </span><span class="line" data-startTime="633">we set a listener, because I </span><span class="line" data-startTime="633">want to track the motion on </span><span class="line" data-startTime="637">each of the individual items as </span><span class="line" data-startTime="637">we're swiping out, because </span><span class="line" data-startTime="639">that's the indication that </span><span class="line" data-startTime="639">we want to remove them. </span></p>

<p class="speaker"><span class="line" data-starttime="641"><span class="speakerName">Romain Guy</span>: The stable IDs is </span><span class="line" data-startTime="641">a way for ListView to keep </span><span class="line" data-startTime="644">track of what data belongs </span><span class="line" data-startTime="644">to what row on screen. </span><span class="line" data-startTime="648">It works without it. </span><span class="line" data-startTime="650">But for this purpose, it's going </span><span class="line" data-startTime="650">to be a lot easier with </span><span class="line" data-startTime="652">stable IDs. </span></p>

<p class="speaker"><span class="line" data-starttime="653"><span class="speakerName">Chet Haase</span>: The </span><span class="line" data-startTime="653">BackgroundContainer is where </span><span class="line" data-startTime="654">we manage the graphics that </span><span class="line" data-startTime="654">are going to draw the </span><span class="line" data-startTime="656">background behind the item </span><span class="line" data-startTime="656">that's being swept away as </span><span class="line" data-startTime="659">well as the drop shadow in front </span><span class="line" data-startTime="659">of that background to </span><span class="line" data-startTime="661">sort of give the sense of depth, </span><span class="line" data-startTime="661">the difference between </span><span class="line" data-startTime="664">the layer that you're </span><span class="line" data-startTime="664">swiping from and the </span><span class="line" data-startTime="666">background behind it. </span> <span class="line" data-startTime="667">Now I could've, and did in the </span><span class="line" data-startTime="667">first version of this, simply </span><span class="line" data-startTime="669">have a background for </span><span class="line" data-startTime="669">the ListView itself. </span></p>

<p><span class="line" data-startTime="671">And then I ran some of the </span><span class="line" data-startTime="671">overdraw tools that we talked </span><span class="line" data-startTime="674">about in a previous </span><span class="line" data-startTime="674">session today. </span> <span class="line" data-startTime="675">And I could see that, in fact, </span><span class="line" data-startTime="675">we're drawing the background </span><span class="line" data-startTime="677">and then we're drawing </span><span class="line" data-startTime="677">all the list items. </span> <span class="line" data-startTime="679">That's a complete waste </span><span class="line" data-startTime="679">of rendering time. </span> <span class="line" data-startTime="680">All I really wanted was a </span><span class="line" data-startTime="680">background behind the item </span><span class="line" data-startTime="683">that was going away. </span> <span class="line" data-startTime="684">So I did that. </span> <span class="line" data-startTime="686">So we have some code in here, </span><span class="line" data-startTime="686">some initialization code that </span><span class="line" data-startTime="690">creates two drop shadows. </span> <span class="line" data-startTime="691">This could also just be a single </span><span class="line" data-startTime="691">9-patch that draws both </span><span class="line" data-startTime="694">the upper and the lower drop </span><span class="line" data-startTime="694">shadow in that space. </span></p>

<p><span class="line" data-startTime="698">When we're told to show the </span><span class="line" data-startTime="698">background, that trips a flag, </span><span class="line" data-startTime="700">an we say, OK. </span> <span class="line" data-startTime="701">We're going to be drawing </span><span class="line" data-startTime="701">stuff here. </span> <span class="line" data-startTime="702">Call our drawing routine. </span> <span class="line" data-startTime="704">And then we set up the area in </span><span class="line" data-startTime="704">the container where we're </span><span class="line" data-startTime="708">going to draw this </span><span class="line" data-startTime="708">information. </span> <span class="line" data-startTime="710">On size change, we set </span><span class="line" data-startTime="710">information about the shadows. </span> <span class="line" data-startTime="712">And then we override onDraw. </span> <span class="line" data-startTime="714">And in onDraw, we translate the </span><span class="line" data-startTime="714">canvas where we need to. </span> <span class="line" data-startTime="717">We draw the background color. </span> <span class="line" data-startTime="719">We draw the drop shadows. </span> <span class="line" data-startTime="719">We're done. </span> <span class="line" data-startTime="720">But all the animation logic is </span><span class="line" data-startTime="720">in ListView Removal Animation, </span><span class="line" data-startTime="724">which is here. </span></p>

<p><span class="line" data-startTime="724">I should point out too, I'm </span><span class="line" data-startTime="724">going to be doing some </span><span class="line" data-startTime="726">DevBytes episodes on these. </span> <span class="line" data-startTime="728">And we'll upload all of the </span><span class="line" data-startTime="728">projects for the code that </span><span class="line" data-startTime="730">you're going to see </span><span class="line" data-startTime="730">here today. </span> <span class="line" data-startTime="731">So I'm going really quickly </span><span class="line" data-startTime="731">through the code. </span> <span class="line" data-startTime="732">The code will eventually be </span><span class="line" data-startTime="732">available so that you can </span><span class="line" data-startTime="734">through it with better </span><span class="line" data-startTime="734">quality time later. </span> <span class="line" data-startTime="739">OK. </span> <span class="line" data-startTime="739">So we have a bunch of choices. </span> <span class="line" data-startTime="740">We add them to the list. </span> <span class="line" data-startTime="741">We create our stable array </span><span class="line" data-startTime="741">adapter, and we set the </span><span class="line" data-startTime="744">adapter on the list. </span></p>

<p><span class="line" data-startTime="745">All straightforward stuff </span><span class="line" data-startTime="745">for ListView stuff. </span> <span class="line" data-startTime="747">onTouchListener, what we want </span><span class="line" data-startTime="747">to do is track the action as </span><span class="line" data-startTime="750">we're swiping, because we want </span><span class="line" data-startTime="750">a little bit of not animated </span><span class="line" data-startTime="753">behavior but different </span><span class="line" data-startTime="753">drawing behavior. </span> <span class="line" data-startTime="755">We want to turn it translucent </span><span class="line" data-startTime="755">as it swipes back and forth. </span> <span class="line" data-startTime="758">But most importantly, when we </span><span class="line" data-startTime="758">lift our finger up, we want to </span><span class="line" data-startTime="762">determine whether it's going to </span><span class="line" data-startTime="762">snap back into place if we </span><span class="line" data-startTime="764">didn't drag it far enough or </span><span class="line" data-startTime="764">whether it's going to snap off </span><span class="line" data-startTime="766">the screen. </span> <span class="line" data-startTime="767">So we calculate how far I </span><span class="line" data-startTime="767">went before we let go. </span></p>

<p><span class="line" data-startTime="771">And then we either snap it </span><span class="line" data-startTime="771">back or snap it farther. </span> <span class="line" data-startTime="774">If we're snapping it off the </span><span class="line" data-startTime="774">screen, then we're going to </span><span class="line" data-startTime="777">animate the rest of </span><span class="line" data-startTime="777">the way here. </span> <span class="line" data-startTime="778">So we're going to get a </span><span class="line" data-startTime="778">ViewPropertyAnimator, and </span><span class="line" data-startTime="781">we're going to animate the </span><span class="line" data-startTime="781">alpha to all the way </span><span class="line" data-startTime="784">transparent, and we're going to </span><span class="line" data-startTime="784">animate translation to x. </span> <span class="line" data-startTime="787">So slide it all the way off. </span> <span class="line" data-startTime="789">And then when that animation </span><span class="line" data-startTime="789">is done, so with an end </span><span class="line" data-startTime="792">action, we're going to restore </span><span class="line" data-startTime="792">some values here. </span> <span class="line" data-startTime="796">And then we're going to </span><span class="line" data-startTime="796">animateOtherViews. </span> <span class="line" data-startTime="798">And that's where all </span><span class="line" data-startTime="798">the magic happens. </span></p>

<p><span class="line" data-startTime="800">So on to our next example. </span> <span class="line" data-startTime="802">No. </span> <span class="line" data-startTime="803">OK. animateOtherViews. </span> <span class="line" data-startTime="805">There's a couple of techniques </span><span class="line" data-startTime="805">here which you're going to see </span><span class="line" data-startTime="807">over and over again in these </span><span class="line" data-startTime="807">examples, as well as some </span><span class="line" data-startTime="809">other ones, where we </span><span class="line" data-startTime="809">get information </span><span class="line" data-startTime="812">before a layout happens. </span> <span class="line" data-startTime="814">And then we set a predraw </span><span class="line" data-startTime="814">listener. </span> <span class="line" data-startTime="816">Then we get the information </span><span class="line" data-startTime="816">from the views after the </span><span class="line" data-startTime="818">layout occurred. </span></p>

<p><span class="line" data-startTime="820">So we've already removed our </span><span class="line" data-startTime="820">item from the adapter, which </span><span class="line" data-startTime="823">means the layout is going to </span><span class="line" data-startTime="823">run, and it's going to </span><span class="line" data-startTime="825">reposition all the other views </span><span class="line" data-startTime="825">in the layout according to the </span><span class="line" data-startTime="829">change that just happened </span><span class="line" data-startTime="829">in the ListView, right? </span><span class="line" data-startTime="831">Standard ListView stuff. </span> <span class="line" data-startTime="832">What we want to do before </span><span class="line" data-startTime="832">that layout happens &mdash; </span><span class="line" data-startTime="835">this is synchronous &mdash; </span><span class="line" data-startTime="836">we remove from the adapter, and </span><span class="line" data-startTime="836">then immediately we go in </span><span class="line" data-startTime="839">and we do two things. </span> <span class="line" data-startTime="841">We get information about where </span><span class="line" data-startTime="841">each of those views is. </span> <span class="line" data-startTime="844">So where are you in the </span><span class="line" data-startTime="844">current container? </span><span class="line" data-startTime="846">And then we're going to store </span><span class="line" data-startTime="846">that in a map here, and we'll </span><span class="line" data-startTime="850">retrieve it later. </span></p>

<p><span class="line" data-startTime="851">And we're also going to use a </span><span class="line" data-startTime="851">property that's new in Jelly </span><span class="line" data-startTime="853">Bean called transient state. </span> <span class="line" data-startTime="854">We're going to say </span><span class="line" data-startTime="854">setHasTransientState true. </span> <span class="line" data-startTime="857">This is an important indicator </span><span class="line" data-startTime="857">to ListView to not mess with </span><span class="line" data-startTime="860">the view's content until I </span><span class="line" data-startTime="860">set it to false again. </span> <span class="line" data-startTime="863">This is a ref counted </span><span class="line" data-startTime="863">flag that we note. </span> <span class="line" data-startTime="865">And next time we go in to do </span><span class="line" data-startTime="865">a recycling pass, we don't </span><span class="line" data-startTime="869">recycle the views that have </span><span class="line" data-startTime="869">this flag set on them. </span> <span class="line" data-startTime="871">And the reason this is important </span><span class="line" data-startTime="871">for animating items </span><span class="line" data-startTime="873">in ListViews is it means that </span><span class="line" data-startTime="873">we're not going to change the </span><span class="line" data-startTime="876">content in views that you may </span><span class="line" data-startTime="876">be potentially moving around </span><span class="line" data-startTime="879">on the screen. </span> <span class="line" data-startTime="879">If you don't set that </span><span class="line" data-startTime="879">flag, who knows </span><span class="line" data-startTime="881">what's going to happen? </span><span class="line" data-startTime="882">In particular, what's going to </span><span class="line" data-startTime="882">happen immediately, it's going </span><span class="line" data-startTime="885">to run layout. </span> <span class="line" data-startTime="886">It's going to recycle </span><span class="line" data-startTime="886">everything. </span> <span class="line" data-startTime="888">And it's going to repopulate </span><span class="line" data-startTime="888">it in whatever </span><span class="line" data-startTime="890">order it deemed necessary. </span></p>

<p><span class="line" data-startTime="892">And that's probably not the </span><span class="line" data-startTime="892">effect you're looking for. </span> <span class="line" data-startTime="895">So setHasTransientState true to </span><span class="line" data-startTime="895">all of the views that are </span><span class="line" data-startTime="897">currently in the ListView. </span> <span class="line" data-startTime="899">We set an OnPreDraw listener. </span> <span class="line" data-startTime="902">Layout is magically going to </span><span class="line" data-startTime="902">run, because we're going to </span><span class="line" data-startTime="904">return back to the UI thread. </span> <span class="line" data-startTime="907">And then before we draw the </span><span class="line" data-startTime="907">results of that layout pass, </span><span class="line" data-startTime="910">we're going to get a call to </span><span class="line" data-startTime="910">our OnPreDraw function. </span> <span class="line" data-startTime="913">In here, we're going to remove </span><span class="line" data-startTime="913">the PreDraw listener. </span></p>

<p><span class="line" data-startTime="916">We don't want to </span><span class="line" data-startTime="916">listen anymore. </span> <span class="line" data-startTime="918">And then we're going to go </span><span class="line" data-startTime="918">in and find out where </span><span class="line" data-startTime="919">everything is now. </span> <span class="line" data-startTime="921">This is where it used to be. </span> <span class="line" data-startTime="922">This is the cached value </span><span class="line" data-startTime="922">that we had before. </span> <span class="line" data-startTime="924">This is where each </span><span class="line" data-startTime="924">child is now. </span> <span class="line" data-startTime="926">We're going to find out </span><span class="line" data-startTime="926">the difference. </span> <span class="line" data-startTime="928">We're going to calculate </span><span class="line" data-startTime="928">the delta. </span> <span class="line" data-startTime="929">We're going to set that as the </span><span class="line" data-startTime="929">translation Y property. </span></p>

<p><span class="line" data-startTime="932">So basically, we knew </span><span class="line" data-startTime="932">it came from here. </span> <span class="line" data-startTime="933">We know it's now there. </span> <span class="line" data-startTime="935">We're going to back translate it </span><span class="line" data-startTime="935">to where it was before, and </span><span class="line" data-startTime="937">we're going to animate zero. </span> <span class="line" data-startTime="939">So all we're doing is </span><span class="line" data-startTime="939">backtranslating and then </span><span class="line" data-startTime="941">animating to zero into the real </span><span class="line" data-startTime="941">position that that view </span><span class="line" data-startTime="944">occupies now. </span> <span class="line" data-startTime="946">The only other thing that we </span><span class="line" data-startTime="946">need to do here is we need to </span><span class="line" data-startTime="949">animate the new view that's </span><span class="line" data-startTime="949">going to be coming in from the </span><span class="line" data-startTime="951">bottom, or coming down </span><span class="line" data-startTime="951">from on top. </span> <span class="line" data-startTime="953">We know where that </span><span class="line" data-startTime="953">new view is now. </span> <span class="line" data-startTime="955">We just need to calculate where </span><span class="line" data-startTime="955">we want it to appear </span><span class="line" data-startTime="957">from, and then we slide that in </span><span class="line" data-startTime="957">along with everything else. </span> <span class="line" data-startTime="961">When we're all done, we set </span><span class="line" data-startTime="961">the hasTransientState to </span><span class="line" data-startTime="963">false, and we're finished. </span></p>

<p><span class="line" data-startTime="965">One other note about </span><span class="line" data-startTime="965">TransientState, </span><span class="line" data-startTime="966">ViewPropertyAnimator actually </span><span class="line" data-startTime="966">sets this property </span><span class="line" data-startTime="969">automatically. </span> <span class="line" data-startTime="970">So during a </span><span class="line" data-startTime="970">ViewPropertyAnimation, you </span><span class="line" data-startTime="973">views are safe. </span> <span class="line" data-startTime="973">They're not going to be recycled </span><span class="line" data-startTime="973">out from under you. </span> <span class="line" data-startTime="975">The reason that we had to set it </span><span class="line" data-startTime="975">manually, even in addition </span><span class="line" data-startTime="978">to the ViewPropertyAnimator is </span><span class="line" data-startTime="978">we didn't want to the views to </span><span class="line" data-startTime="981">change during the layout pass, </span><span class="line" data-startTime="981">which happens prior to the </span><span class="line" data-startTime="984">animation that we run. </span> <span class="line" data-startTime="987">And that's it. </span></p>

<p class="speaker"><span class="line" data-starttime="988"><span class="speakerName">Romain Guy</span>: Was that clear? </span><span class="line" data-startTime="989">You got all that? </span><span class="line" data-startTime="992">We will give you the code. </span></p>

<p class="speaker"><span class="line" data-starttime="995"><span class="speakerName">Chet Haase</span>: I think </span><span class="line" data-startTime="995">I've pretty much </span><span class="line" data-startTime="996">walked through this. </span></p>

<p class="speaker"><span class="line" data-starttime="998"><span class="speakerName">Romain Guy</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1000"><span class="speakerName">Chet Haase</span>: There you go. </span><span class="line" data-startTime="1001">It's like that. </span></p>

<p class="speaker"><span class="line" data-starttime="1002"><span class="speakerName">Romain Guy</span>: New demo. </span></p>

<p class="speaker"><span class="line" data-starttime="1002"><span class="speakerName">Chet Haase</span>: Easy. </span> <span class="line" data-startTime="1003">All right. </span> <span class="line" data-startTime="1003">Activity animations. </span> <span class="line" data-startTime="1005">So here's another one that </span><span class="line" data-startTime="1005">has become common. </span> <span class="line" data-startTime="1007">We have two things in the window </span><span class="line" data-startTime="1007">in activity changes </span><span class="line" data-startTime="1012">that are available to you. </span> <span class="line" data-startTime="1013">One is the standard activity </span><span class="line" data-startTime="1013">animations that occur already. </span> <span class="line" data-startTime="1017">You get fade-y, scale-y stuff </span><span class="line" data-startTime="1017">as activities launch. </span> <span class="line" data-startTime="1021">And they scale and </span><span class="line" data-startTime="1021">fade into view. </span> <span class="line" data-startTime="1025">That's fine. </span> <span class="line" data-startTime="1025">And that's actually great </span><span class="line" data-startTime="1025">for an activity launch. </span> <span class="line" data-startTime="1028">It's a nice consistent approach </span><span class="line" data-startTime="1029">to running any activity. </span> <span class="line" data-startTime="1031">But let's say you're running a </span><span class="line" data-startTime="1031">subactivity and you want to do </span><span class="line" data-startTime="1033">something customized. </span></p>

<p><span class="line" data-startTime="1034">We also offer the ability to </span><span class="line" data-startTime="1034">customize window animations. </span> <span class="line" data-startTime="1037">But it's very constrained </span><span class="line" data-startTime="1037">animations. </span> <span class="line" data-startTime="1040">We added to that recently so </span><span class="line" data-startTime="1040">you could do a scale and a </span><span class="line" data-startTime="1043">cross-fade from a thumbnail </span><span class="line" data-startTime="1043">in Jelly Bean 4.2. </span></p>

<p class="speaker"><span class="line" data-starttime="1047"><span class="speakerName">Romain Guy</span>: Yes. </span><span class="line" data-startTime="1047">4.1. </span></p>

<p class="speaker"><span class="line" data-starttime="1048"><span class="speakerName">Chet Haase</span>: 4.1. </span><span class="line" data-startTime="1049">And that's great. </span><span class="line" data-startTime="1051">But you still can't really </span><span class="line" data-startTime="1051">customize that. </span><span class="line" data-startTime="1053">You can do exactly that </span><span class="line" data-startTime="1053">thumbnail scale, and you can't </span><span class="line" data-startTime="1056">scale back to the thumbnail, </span><span class="line" data-startTime="1056">for instance. </span><span class="line" data-startTime="1058">So there's sort of hard </span><span class="line" data-startTime="1058">limitations to what you can do </span><span class="line" data-startTime="1061">with window animations. </span><span class="line" data-startTime="1062">So the recommendation is &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1064"><span class="speakerName">Romain Guy</span>: We have </span><span class="line" data-startTime="1064">a trick for you. </span> <span class="line" data-startTime="1065">So this is an animation. </span> <span class="line" data-startTime="1066">And actually, Hugo Barra &mdash; </span><span class="line" data-startTime="1068">who you've seen at the keynote, </span><span class="line" data-startTime="1068">sitting right here &mdash; </span><span class="line" data-startTime="1070">told us it would be really </span><span class="line" data-startTime="1070">cool if we could do it. </span> <span class="line" data-startTime="1071">And why is it not possible </span><span class="line" data-startTime="1071">to do it on Android? </span><span class="line" data-startTime="1074">And we're like, well, </span><span class="line" data-startTime="1074">of course we can. </span> <span class="line" data-startTime="1076">So we did it. </span> <span class="line" data-startTime="1077">Actually, Chet did it. </span> <span class="line" data-startTime="1079">So I'm going to tap </span><span class="line" data-startTime="1079">on a picture. </span> <span class="line" data-startTime="1080">And we'll animate from that </span><span class="line" data-startTime="1080">picture into a new activity. </span> <span class="line" data-startTime="1083">So this is not just a view </span><span class="line" data-startTime="1083">that we put on top of the </span><span class="line" data-startTime="1086">first activity. </span> <span class="line" data-startTime="1087">It's actually a new activity </span><span class="line" data-startTime="1087">that's showing details. </span> <span class="line" data-startTime="1090">And we can go back and forth </span><span class="line" data-startTime="1090">between the two. </span></p>

<p><span class="line" data-startTime="1093">And let me slow down the </span><span class="line" data-startTime="1093">animation for you so you see </span><span class="line" data-startTime="1095">exactly what's happening. </span> <span class="line" data-startTime="1096">There's a drop shadow. </span> <span class="line" data-startTime="1097">We scale up the image, we </span><span class="line" data-startTime="1097">fade the background, and </span><span class="line" data-startTime="1100">we bring the text. </span> <span class="line" data-startTime="1101">And it's actually pretty </span><span class="line" data-startTime="1101">easy to implement. </span> <span class="line" data-startTime="1102">The trick is the new activity </span><span class="line" data-startTime="1102">is actually </span><span class="line" data-startTime="1104">a transparent activity. </span> <span class="line" data-startTime="1106">And all the animations are view </span><span class="line" data-startTime="1106">animations inside that </span><span class="line" data-startTime="1109">transparent activity. </span> <span class="line" data-startTime="1110">So we're going to take </span><span class="line" data-startTime="1110">a look at the code. </span> <span class="line" data-startTime="1114">And it's going to be </span><span class="line" data-startTime="1114">a little easier. </span> <span class="line" data-startTime="1116">Let's get rid of </span><span class="line" data-startTime="1116">all that stuff. </span> <span class="line" data-startTime="1122">There we go. </span></p>

<p><span class="line" data-startTime="1122">So we have two activities. </span> <span class="line" data-startTime="1124">We have Activity Animations. </span> <span class="line" data-startTime="1125">That's the main activity </span><span class="line" data-startTime="1125">of the application. </span> <span class="line" data-startTime="1127">And we have Picture </span><span class="line" data-startTime="1127">Details Activity. </span> <span class="line" data-startTime="1129">And there's another interesting </span><span class="line" data-startTime="1129">class called </span><span class="line" data-startTime="1131">Shadow Layout. </span> <span class="line" data-startTime="1132">We'll take a look at that </span><span class="line" data-startTime="1132">a little later. </span> <span class="line" data-startTime="1134">So the main activity </span><span class="line" data-startTime="1134">doesn't do much. </span> <span class="line" data-startTime="1136">It sets a grid. </span> <span class="line" data-startTime="1137">We use a color matrix filter </span><span class="line" data-startTime="1137">to make all the images be </span><span class="line" data-startTime="1141">greyscale, because we also </span><span class="line" data-startTime="1141">animate from greyscale to </span><span class="line" data-startTime="1144">color when we scale </span><span class="line" data-startTime="1144">up the image. </span> <span class="line" data-startTime="1146">Then we just set </span><span class="line" data-startTime="1146">up our adaptor. </span></p>

<p><span class="line" data-startTime="1147">So that's not very </span><span class="line" data-startTime="1147">interesting. </span> <span class="line" data-startTime="1148">The interesting part is what </span><span class="line" data-startTime="1148">happens when you click on one </span><span class="line" data-startTime="1152">of the thumbnails. </span> <span class="line" data-startTime="1154">So what we do is we're going </span><span class="line" data-startTime="1154">to start the next activity, </span><span class="line" data-startTime="1159">and we're going to add a lot of </span><span class="line" data-startTime="1159">extras to the intent that </span><span class="line" data-startTime="1162">we use to start the activity. </span> <span class="line" data-startTime="1164">So what we want to send to the </span><span class="line" data-startTime="1164">new activity is the position </span><span class="line" data-startTime="1167">on screen of the thumbnail. </span> <span class="line" data-startTime="1169">So to do this on View, there's </span><span class="line" data-startTime="1169">a method called </span><span class="line" data-startTime="1171">getLocationOnScreen. </span> <span class="line" data-startTime="1173">You give it an array, and we're </span><span class="line" data-startTime="1173">going to fill the array </span><span class="line" data-startTime="1175">with the x and y position </span><span class="line" data-startTime="1175">of that view in screen </span><span class="line" data-startTime="1177">coordinates. </span> <span class="line" data-startTime="1178">So it's not in parent </span><span class="line" data-startTime="1178">coordinates. </span></p>

<p><span class="line" data-startTime="1179">It's different from getLeft </span><span class="line" data-startTime="1179">and getTop. </span> <span class="line" data-startTime="1181">It's not in window </span><span class="line" data-startTime="1181">coordinates. </span> <span class="line" data-startTime="1183">There's another method </span><span class="line" data-startTime="1183">for that. </span> <span class="line" data-startTime="1184">It's in screen coordinates. </span> <span class="line" data-startTime="1186">We create our new intent. </span> <span class="line" data-startTime="1189">We remembered your </span><span class="line" data-startTime="1189">orientation. </span> <span class="line" data-startTime="1191">We'll talk about that later. </span> <span class="line" data-startTime="1193">And then we store the </span><span class="line" data-startTime="1193">width and the </span><span class="line" data-startTime="1194">height of the thumbnail. </span> <span class="line" data-startTime="1195">We store the position </span><span class="line" data-startTime="1195">on screen. </span> <span class="line" data-startTime="1198">We store the resource idea of </span><span class="line" data-startTime="1198">the thumbnail, like what big </span><span class="line" data-startTime="1201">image should we be showing, as </span><span class="line" data-startTime="1201">well as the description. </span></p>

<p><span class="line" data-startTime="1205">And finally, at the end, </span><span class="line" data-startTime="1205">we call this method </span><span class="line" data-startTime="1208">overridePendingTransitions. </span> <span class="line" data-startTime="1210">And by pressing 00, we tell the </span><span class="line" data-startTime="1210">Window Manager that we do </span><span class="line" data-startTime="1213">not want a new window </span><span class="line" data-startTime="1213">animation. </span> <span class="line" data-startTime="1214">We're going to take care of </span><span class="line" data-startTime="1214">everything, and we're going to </span><span class="line" data-startTime="1218">do our view animations. </span> <span class="line" data-startTime="1220">So then we launch the Picture </span><span class="line" data-startTime="1220">Details activity. </span> <span class="line" data-startTime="1224">An in onCreate, we just extract </span><span class="line" data-startTime="1224">all the data we need </span><span class="line" data-startTime="1228">from the bundle in the intent. </span> <span class="line" data-startTime="1231">And here's what happens when </span><span class="line" data-startTime="1231">we run the animation. </span></p>

<p><span class="line" data-startTime="1234">So we checked the </span><span class="line" data-startTime="1234">savedInstanceState. </span> <span class="line" data-startTime="1236">So if we have a </span><span class="line" data-startTime="1236">savedInstanceState, that means </span><span class="line" data-startTime="1239">there was a configuration </span><span class="line" data-startTime="1239">change. </span> <span class="line" data-startTime="1240">And most of the time, it's </span><span class="line" data-startTime="1240">going to be a rotation. </span> <span class="line" data-startTime="1242">In that case, we do not want </span><span class="line" data-startTime="1242">to run the animation again. </span> <span class="line" data-startTime="1245">So we only run the animation </span><span class="line" data-startTime="1245">when the first time we bring </span><span class="line" data-startTime="1247">up the activity. </span> <span class="line" data-startTime="1248">So the savedInstanceState </span><span class="line" data-startTime="1248">is null. </span> <span class="line" data-startTime="1251">So we set the viewTreeObserver. </span> <span class="line" data-startTime="1253">And the viewTreeObserver &mdash; </span><span class="line" data-startTime="1254">sorry &mdash; </span><span class="line" data-startTime="1255">will use an [INAUDIBLE] </span><span class="line" data-startTime="1256">listener. </span></p>

<p><span class="line" data-startTime="1259">Because we're on the onCreate </span><span class="line" data-startTime="1259">method, that callback will be </span><span class="line" data-startTime="1262">invoked before we draw the </span><span class="line" data-startTime="1262">first frame but after the </span><span class="line" data-startTime="1266">layout, so after all the items </span><span class="line" data-startTime="1266">are positioned in the window. </span> <span class="line" data-startTime="1269">So they have their widths, they </span><span class="line" data-startTime="1269">have their height, and </span><span class="line" data-startTime="1271">they have their position. </span> <span class="line" data-startTime="1273">First thing we do is we remove </span><span class="line" data-startTime="1273">the listener because we don't </span><span class="line" data-startTime="1275">need it anymore. </span> <span class="line" data-startTime="1277">And then we had our image with </span><span class="line" data-startTime="1277">the big version of the image. </span> <span class="line" data-startTime="1280">It's not the thumbnail </span><span class="line" data-startTime="1280">anymore. </span> <span class="line" data-startTime="1281">We're in the new activity. </span> <span class="line" data-startTime="1282">And we do what we've done in </span><span class="line" data-startTime="1282">the previous activity. </span> <span class="line" data-startTime="1285">We look at the location on </span><span class="line" data-startTime="1285">screen of the image. </span> <span class="line" data-startTime="1288">So we know where we came from </span><span class="line" data-startTime="1288">the previous activity in the </span><span class="line" data-startTime="1292">intent, and we know where </span><span class="line" data-startTime="1292">we want to go. </span> <span class="line" data-startTime="1295">We also compute the </span><span class="line" data-startTime="1295">scale factor. </span></p>

<p><span class="line" data-startTime="1297">So what is the difference in </span><span class="line" data-startTime="1297">size between the big version </span><span class="line" data-startTime="1301">of the image and the </span><span class="line" data-startTime="1301">small thumbnail? </span><span class="line" data-startTime="1302">And finally, we start </span><span class="line" data-startTime="1302">our animation. </span> <span class="line" data-startTime="1305">The animation itself </span><span class="line" data-startTime="1305">is very simple. </span> <span class="line" data-startTime="1307">We have our image that's been </span><span class="line" data-startTime="1307">laid out at its final size, so </span><span class="line" data-startTime="1311">it's taking most of the </span><span class="line" data-startTime="1311">space on screen. </span> <span class="line" data-startTime="1314">We change its position and its </span><span class="line" data-startTime="1314">scale so that it matches </span><span class="line" data-startTime="1318">exactly the position </span><span class="line" data-startTime="1318">of the thumbnail in </span><span class="line" data-startTime="1320">the previous activity. </span> <span class="line" data-startTime="1321">And remember, because we're a </span><span class="line" data-startTime="1321">transparent activity, it will </span><span class="line" data-startTime="1323">look like we're in the </span><span class="line" data-startTime="1323">same activity. </span> <span class="line" data-startTime="1327">The text is a special case. </span></p>

<p><span class="line" data-startTime="1328">We make it invisible. </span> <span class="line" data-startTime="1330">And then, all we do is we </span><span class="line" data-startTime="1330">animate the ImageView, and we </span><span class="line" data-startTime="1332">tell it to scale back to its </span><span class="line" data-startTime="1332">normal size, so 100% scale x </span><span class="line" data-startTime="1336">and scale y and 0 for </span><span class="line" data-startTime="1336">the translation. </span> <span class="line" data-startTime="1339">At the end of the animation, we </span><span class="line" data-startTime="1339">just animate the text, but </span><span class="line" data-startTime="1342">just for the nice effect. </span> <span class="line" data-startTime="1343">We have secondary animations. </span> <span class="line" data-startTime="1345">And we're going to talk </span><span class="line" data-startTime="1345">about secondary </span><span class="line" data-startTime="1347">animations a little later. </span> <span class="line" data-startTime="1348">But we fade in the </span><span class="line" data-startTime="1348">black background. </span></p>

<p><span class="line" data-startTime="1351">We turn the image from greyscale </span><span class="line" data-startTime="1351">to colors, and we're </span><span class="line" data-startTime="1356">going to show you </span><span class="line" data-startTime="1356">how to do this. </span> <span class="line" data-startTime="1357">As you can see here, we're </span><span class="line" data-startTime="1357">modifying a property called </span><span class="line" data-startTime="1360">Saturation on our </span><span class="line" data-startTime="1360">own activity. </span> <span class="line" data-startTime="1363">So we've created a </span><span class="line" data-startTime="1363">custom property. </span> <span class="line" data-startTime="1365">It's not a feature of view. </span> <span class="line" data-startTime="1366">It's not a future </span><span class="line" data-startTime="1366">of the UI token. </span> <span class="line" data-startTime="1367">It's something we've </span><span class="line" data-startTime="1367">built ourselves. </span> <span class="line" data-startTime="1369">And you're going to see, if </span><span class="line" data-startTime="1369">you've never done that, it's </span><span class="line" data-startTime="1371">extremely simple to create </span><span class="line" data-startTime="1371">your own properties. </span> <span class="line" data-startTime="1374">And we'll also animate the </span><span class="line" data-startTime="1374">shadow of the picture. </span> <span class="line" data-startTime="1377">We have this property </span><span class="line" data-startTime="1377">called shadowDepth </span><span class="line" data-startTime="1379">on our shadow layout. </span> <span class="line" data-startTime="1383">And here is our custom </span><span class="line" data-startTime="1383">property. </span> <span class="line" data-startTime="1386">So we need a setSaturation </span><span class="line" data-startTime="1386">method We also have a </span><span class="line" data-startTime="1388">getSaturation method. </span> <span class="line" data-startTime="1390">And all we do is we change the </span><span class="line" data-startTime="1390">situation in our color matrix, </span><span class="line" data-startTime="1392">we create a new filter, and we </span><span class="line" data-startTime="1392">set that filter on the image. </span></p>

<p><span class="line" data-startTime="1395">And you're automatically going </span><span class="line" data-startTime="1395">to get that nice greyscale to </span><span class="line" data-startTime="1398">color effect. </span> <span class="line" data-startTime="1399">One interesting trick </span><span class="line" data-startTime="1399">here is that we </span><span class="line" data-startTime="1401">override the finish method. </span></p>

<p class="speaker"><span class="line" data-starttime="1404"><span class="speakerName">Chet Haase</span>: Specifically </span><span class="line" data-startTime="1404">for the </span><span class="line" data-startTime="1405">overridePendingTransitions. </span><span class="line" data-startTime="1406">Because, like we did on the way </span><span class="line" data-startTime="1406">in, we don't want to run </span><span class="line" data-startTime="1409">window animations and have them </span><span class="line" data-startTime="1409">get in the way and be </span><span class="line" data-startTime="1412">parallel to the things that </span><span class="line" data-startTime="1412">we're trying to do in our </span><span class="line" data-startTime="1414">customized activity </span><span class="line" data-startTime="1414">animations. </span><span class="line" data-startTime="1416">So as soon as we're actually </span><span class="line" data-startTime="1416">finishing, then we </span><span class="line" data-startTime="1418">overridePendingTransitions, </span><span class="line" data-startTime="1418">window animations get out of </span><span class="line" data-startTime="1420">the way, and we customize </span><span class="line" data-startTime="1420">the return </span><span class="line" data-startTime="1422">back to the main activity. </span></p>

<p class="speaker"><span class="line" data-starttime="1423"><span class="speakerName">Romain Guy</span>: And we also trap </span><span class="line" data-startTime="1423">the Back key events. </span><span class="line" data-startTime="1428">So when the Back key is pressed, </span><span class="line" data-startTime="1428">by default we're </span><span class="line" data-startTime="1430">going to finish the activity. </span><span class="line" data-startTime="1431">That's the default behavior </span><span class="line" data-startTime="1431">of the Toolkit. </span><span class="line" data-startTime="1433">Here, we're prevented </span><span class="line" data-startTime="1433">from doing that. </span><span class="line" data-startTime="1434">What we want is we first want </span><span class="line" data-startTime="1434">to run our animations. </span><span class="line" data-startTime="1437">So we call runExitAnimation, </span><span class="line" data-startTime="1437">which is very similar to the </span><span class="line" data-startTime="1440">animation we saw for the </span><span class="line" data-startTime="1440">enter animation. </span><span class="line" data-startTime="1442">And at the end of the exit </span><span class="line" data-startTime="1442">animation, we're going to </span><span class="line" data-startTime="1445">execute this runable, and </span><span class="line" data-startTime="1445">it's just going to </span><span class="line" data-startTime="1446">call the finish method. </span><span class="line" data-startTime="1449">Do you want to show </span><span class="line" data-startTime="1449">the shadow layout? </span></p>

<p class="speaker"><span class="line" data-starttime="1451"><span class="speakerName">Chet Haase</span>: Sure. </span><span class="line" data-startTime="1451">So shadow layout, is it's a </span><span class="line" data-startTime="1451">very simple view group. </span><span class="line" data-startTime="1454">I wanted the ability for a </span><span class="line" data-startTime="1454">container to put shadows </span><span class="line" data-startTime="1457">behind all of its children. </span><span class="line" data-startTime="1459">It has one property, which is </span><span class="line" data-startTime="1459">the depth, which gets animated </span><span class="line" data-startTime="1461">over time as that thumbnail </span><span class="line" data-startTime="1461">scales into the nice colorized </span><span class="line" data-startTime="1465">large version of the picture. </span><span class="line" data-startTime="1468">And as that animates, </span><span class="line" data-startTime="1468">it's going to </span><span class="line" data-startTime="1469">animate its depth property. </span><span class="line" data-startTime="1471">The depth property is then used </span><span class="line" data-startTime="1471">to determine two things </span><span class="line" data-startTime="1473">about the shadow, </span><span class="line" data-startTime="1473">the opacity &mdash; </span><span class="line" data-startTime="1475">so we're going to be </span><span class="line" data-startTime="1475">animating alpha &mdash; </span><span class="line" data-startTime="1477">as well as the offsets. </span><span class="line" data-startTime="1478">So we're basically going to draw </span><span class="line" data-startTime="1478">a shadow that gets larger </span><span class="line" data-startTime="1481">and more translucent as the </span><span class="line" data-startTime="1481">image comes into place in its </span><span class="line" data-startTime="1484">large version. </span><span class="line" data-startTime="1486">We're going to set up the </span><span class="line" data-startTime="1486">shadow itself here. </span><span class="line" data-startTime="1489">Some rendering details </span><span class="line" data-startTime="1489">about creating a </span><span class="line" data-startTime="1491">nice blurred shadow. </span></p>

<p class="speaker"><span class="line" data-starttime="1494"><span class="speakerName">Romain Guy</span>: Yeah. </span><span class="line" data-startTime="1494">We don't have much time </span><span class="line" data-startTime="1494">to talk about it. </span></p>

<p class="speaker"><span class="line" data-starttime="1496"><span class="speakerName">Chet Haase</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="1496"><span class="speakerName">Romain Guy</span>: But if you're </span><span class="line" data-startTime="1496">interested in how to create a </span><span class="line" data-startTime="1498">blurry shadow without </span><span class="line" data-startTime="1498">using a 9-patch &mdash; </span><span class="line" data-startTime="1500">You could be using a 9-patch. </span><span class="line" data-startTime="1501">That's a great way of doing </span><span class="line" data-startTime="1501">it, if you want to do it </span><span class="line" data-startTime="1503">programmatically. </span><span class="line" data-startTime="1504">You can refer to that </span><span class="line" data-startTime="1504">piece of code here. </span></p>

<p class="speaker"><span class="line" data-starttime="1506"><span class="speakerName">Chet Haase</span>: We set the </span><span class="line" data-startTime="1506">shadow depth here. </span> <span class="line" data-startTime="1507">This is called by </span><span class="line" data-startTime="1507">the animation. </span> <span class="line" data-startTime="1509">Then we invalidate when the </span><span class="line" data-startTime="1509">depth is change so that we'll </span><span class="line" data-startTime="1512">actually redraw this </span><span class="line" data-startTime="1512">container. </span> <span class="line" data-startTime="1513">And then we override on draw, </span><span class="line" data-startTime="1513">which processes through all </span><span class="line" data-startTime="1516">the children of this </span><span class="line" data-startTime="1516">container. </span> <span class="line" data-startTime="1518">In this case, there's just one, </span><span class="line" data-startTime="1518">and it draws the shadow </span><span class="line" data-startTime="1520">appropriately. </span> <span class="line" data-startTime="1524">All right. </span> <span class="line" data-startTime="1526">This is callouts to the </span><span class="line" data-startTime="1526">various details there. </span> <span class="line" data-startTime="1529">I think we went through </span><span class="line" data-startTime="1529">enough details on how </span><span class="line" data-startTime="1530">to make that work. </span> <span class="line" data-startTime="1531">Again, the slides and the code </span><span class="line" data-startTime="1531">will be posted later for the </span><span class="line" data-startTime="1534">real details. </span></p>

<p><span class="line" data-startTime="1535">We also wanted to talk about </span><span class="line" data-startTime="1535">some cartoon animation </span><span class="line" data-startTime="1537">techniques. </span> <span class="line" data-startTime="1537">It turns out that there were </span><span class="line" data-startTime="1537">some people back in the '20s </span><span class="line" data-startTime="1540">and '30s and Disney who thought </span><span class="line" data-startTime="1540">really hard about how </span><span class="line" data-startTime="1543">to make engaging animations. </span> <span class="line" data-startTime="1545">And they had a couple of very </span><span class="line" data-startTime="1545">important constraints that </span><span class="line" data-startTime="1547">were important to them and are </span><span class="line" data-startTime="1547">still important to us, which </span><span class="line" data-startTime="1550">is there's a very little </span><span class="line" data-startTime="1550">amount of time and a </span><span class="line" data-startTime="1554">potentially complex scene on the </span><span class="line" data-startTime="1554">screen which the user has </span><span class="line" data-startTime="1558">to understand. </span> <span class="line" data-startTime="1561">They developed these 12 </span><span class="line" data-startTime="1561">principles of animation. </span></p>

<p><span class="line" data-startTime="1565">And a lot of them focus around </span><span class="line" data-startTime="1565">focusing the user's attention </span><span class="line" data-startTime="1568">on exactly what they need them </span><span class="line" data-startTime="1568">to understand, simplifying </span><span class="line" data-startTime="1572">that action as much as possible, </span><span class="line" data-startTime="1572">and indicating and </span><span class="line" data-startTime="1574">exaggerating around that action </span><span class="line" data-startTime="1574">so that they can get </span><span class="line" data-startTime="1577">all the information to quickly </span><span class="line" data-startTime="1577">understand the important </span><span class="line" data-startTime="1580">information about exactly </span><span class="line" data-startTime="1580">how Mickey was </span><span class="line" data-startTime="1582">running on the screen. </span></p>

<p class="speaker"><span class="line" data-starttime="1584"><span class="speakerName">Romain Guy</span>: So we're not going </span><span class="line" data-startTime="1584">to talk about all the </span><span class="line" data-startTime="1585">principles of cartoon </span><span class="line" data-startTime="1585">animations, because they don't </span><span class="line" data-startTime="1588">all apply to UIs. </span> <span class="line" data-startTime="1590">And there's a lot of overlap </span><span class="line" data-startTime="1590">between the different </span><span class="line" data-startTime="1592">techniques. </span> <span class="line" data-startTime="1593">But we're going to show </span><span class="line" data-startTime="1593">you a few of them. </span> <span class="line" data-startTime="1595">And we'll have demos showing you </span><span class="line" data-startTime="1595">how to implement those in </span><span class="line" data-startTime="1597">your applications. </span> <span class="line" data-startTime="1599">So the first one is squash </span><span class="line" data-startTime="1599">and stretch. </span> <span class="line" data-startTime="1601">And remember, one of the </span><span class="line" data-startTime="1601">principles of good animations </span><span class="line" data-startTime="1604">is that your animation </span><span class="line" data-startTime="1604">should feel natural. </span> <span class="line" data-startTime="1607">And this is one way of making </span><span class="line" data-startTime="1607">your animations feel natural. </span> <span class="line" data-startTime="1611">When you move something, instead </span><span class="line" data-startTime="1611">of just moving the </span><span class="line" data-startTime="1614">object, you can try to elongate </span><span class="line" data-startTime="1614">the object to squash </span><span class="line" data-startTime="1617">it and stretch it, pretty much, </span><span class="line" data-startTime="1617">to give it this more </span><span class="line" data-startTime="1620">natural feel. </span> <span class="line" data-startTime="1620">This is not quite what </span><span class="line" data-startTime="1620">happens in real life. </span> <span class="line" data-startTime="1623">But I'm sure you've all seen </span><span class="line" data-startTime="1623">cartoons where someone kicks </span><span class="line" data-startTime="1626">in a soccer bowl and the </span><span class="line" data-startTime="1626">soccer ball becomes an </span><span class="line" data-startTime="1629">ellipse, pretty much. </span></p>

<p><span class="line" data-startTime="1632">And this is something that we </span><span class="line" data-startTime="1632">can do very easily in our UIs. </span></p>

<p class="speaker"><span class="line" data-starttime="1637"><span class="speakerName">Chet Haase</span>: Another important </span><span class="line" data-startTime="1637">principle is timing. </span><span class="line" data-startTime="1639">And this refers to a couple of </span><span class="line" data-startTime="1639">different elements of timing. </span><span class="line" data-startTime="1641">There's a non-linear timing, </span><span class="line" data-startTime="1641">which is important for </span><span class="line" data-startTime="1643">conveying natural motion. </span><span class="line" data-startTime="1645">People and objects in our real </span><span class="line" data-startTime="1645">world don't move linearly. </span><span class="line" data-startTime="1649">You don't start at the speed </span><span class="line" data-startTime="1649">that you're going to be </span><span class="line" data-startTime="1651">traveling the entire time </span><span class="line" data-startTime="1651">linearly and then stop </span><span class="line" data-startTime="1654">immediately. </span><span class="line" data-startTime="1654">Instead, you accelerate into a </span><span class="line" data-startTime="1654">pace and decelerate out of it, </span><span class="line" data-startTime="1657">in general, unless </span><span class="line" data-startTime="1657">you hit a wall. </span></p>

<p class="speaker"><span class="line" data-starttime="1661"><span class="speakerName">Romain Guy</span>: Or if you're </span><span class="line" data-startTime="1661">really weird. </span></p>

<p class="speaker"><span class="line" data-starttime="1663"><span class="speakerName">Chet Haase</span>: Unless you're </span><span class="line" data-startTime="1663">really weird or a robot. </span> <span class="line" data-startTime="1666">The other important element of </span><span class="line" data-startTime="1666">timing is to choose timing </span><span class="line" data-startTime="1668">that is appropriate </span><span class="line" data-startTime="1668">to the action. </span> <span class="line" data-startTime="1670">We talked about short durations </span><span class="line" data-startTime="1670">before, the </span><span class="line" data-startTime="1674">animations being as short </span><span class="line" data-startTime="1674">as they need to be. </span> <span class="line" data-startTime="1676">But there's other elements </span><span class="line" data-startTime="1676">of duration as well. </span> <span class="line" data-startTime="1680">As Steve Martin said, </span><span class="line" data-startTime="1680">the important </span><span class="line" data-startTime="1682">thing here is timing. </span> <span class="line" data-startTime="1685">So let's take a look at a </span><span class="line" data-startTime="1685">quick demo of squash and </span><span class="line" data-startTime="1688">stretch and a little </span><span class="line" data-startTime="1688">bit of code. </span></p>

<p><span class="line" data-startTime="1694">So the idea here is you click </span><span class="line" data-startTime="1694">the button, and we're going to </span><span class="line" data-startTime="1698">bounce it off the bottom </span><span class="line" data-startTime="1698">of the screen. </span> <span class="line" data-startTime="1700">We can slow that down </span><span class="line" data-startTime="1700">so you can see </span><span class="line" data-startTime="1704">what's actually happening. </span> <span class="line" data-startTime="1705">So there's a couple of things. </span> <span class="line" data-startTime="1706">The down animation is a little </span><span class="line" data-startTime="1706">more subtle than you might </span><span class="line" data-startTime="1710">have suspected at first. </span> <span class="line" data-startTime="1712">You can see it's actually </span><span class="line" data-startTime="1712">elongating a little </span><span class="line" data-startTime="1713">bit on the way down. </span> <span class="line" data-startTime="1714">It's very subtle, but you kind </span><span class="line" data-startTime="1714">of pick up that change. </span> <span class="line" data-startTime="1717">And it gives the indication that </span><span class="line" data-startTime="1717">this button is actually </span><span class="line" data-startTime="1719">kind of a rubbery material that </span><span class="line" data-startTime="1719">changes and is affected </span><span class="line" data-startTime="1722">by gravity is also affected </span><span class="line" data-startTime="1722">by hitting the floor. </span> <span class="line" data-startTime="1725">Maybe not something you want </span><span class="line" data-startTime="1725">to do in your UIs. </span></p>

<p><span class="line" data-startTime="1727">I would not recommend </span><span class="line" data-startTime="1727">it, in general. </span> <span class="line" data-startTime="1729">But in some situations, adding </span><span class="line" data-startTime="1729">a little bit of organic </span><span class="line" data-startTime="1732">properties to an object </span><span class="line" data-startTime="1732">is appropriate. </span></p>

<p class="speaker"><span class="line" data-starttime="1734"><span class="speakerName">Romain Guy</span>: Actually, we'll </span><span class="line" data-startTime="1734">have an example of an </span><span class="line" data-startTime="1735">application on the Play Store, </span><span class="line" data-startTime="1735">a pretty serious application </span><span class="line" data-startTime="1739">that uses some of these </span><span class="line" data-startTime="1739">animation techniques. </span></p>

<p class="speaker"><span class="line" data-starttime="1746"><span class="speakerName">Chet Haase</span>: So actually, the </span><span class="line" data-startTime="1746">code for this, it's basically </span><span class="line" data-startTime="1749">the same details </span><span class="line" data-startTime="1749">over and over. </span> <span class="line" data-startTime="1750">This is just a sequenced </span><span class="line" data-startTime="1750">animation </span><span class="line" data-startTime="1752">where we run it down. </span> <span class="line" data-startTime="1753">We run a reversing animation, </span><span class="line" data-startTime="1753">and squashes and stretches </span><span class="line" data-startTime="1757">out, squashes and stretches </span><span class="line" data-startTime="1757">back, and then </span><span class="line" data-startTime="1759">it runs back up. </span> <span class="line" data-startTime="1760">And this is just pure </span><span class="line" data-startTime="1760">application of </span><span class="line" data-startTime="1762">PropertyValuesHolder creating an </span><span class="line" data-startTime="1762">ObjectAnimator object that </span><span class="line" data-startTime="1767">can animate multiple properties </span><span class="line" data-startTime="1767">at the same time. </span> <span class="line" data-startTime="1769">We set specific interpolaters </span><span class="line" data-startTime="1769">to get an accelerated feel </span><span class="line" data-startTime="1772">down, to get a deceleration </span><span class="line" data-startTime="1772">feel as it squashes and </span><span class="line" data-startTime="1776">stretches, and then the </span><span class="line" data-startTime="1776">reverse behavior on </span><span class="line" data-startTime="1778">the way back up. </span> <span class="line" data-startTime="1779">We stretch. </span> <span class="line" data-startTime="1781">It's just the same thing </span><span class="line" data-startTime="1781">over and over again. </span></p>

<p><span class="line" data-startTime="1782">PropertyValuesHolder, </span><span class="line" data-startTime="1782">ObjectAnimator, </span><span class="line" data-startTime="1784">they're your friend. </span> <span class="line" data-startTime="1785">We repeat the animation on the </span><span class="line" data-startTime="1785">squash and the stretch, and we </span><span class="line" data-startTime="1789">set the duration very carefully </span><span class="line" data-startTime="1789">to sort of give the </span><span class="line" data-startTime="1791">right feeling between all these </span><span class="line" data-startTime="1791">different dynamics here. </span> <span class="line" data-startTime="1794">And then we create an animator </span><span class="line" data-startTime="1794">set to run these different </span><span class="line" data-startTime="1796">animations sequentially. </span> <span class="line" data-startTime="1798">Pretty straightforward. </span> <span class="line" data-startTime="1800">Moving on. </span> <span class="line" data-startTime="1801">Next principle, anticipation. </span> <span class="line" data-startTime="1808">This was important for the </span><span class="line" data-startTime="1808">animators to indicate what was </span><span class="line" data-startTime="1813">about to happen. </span></p>

<p class="speaker"><span class="line" data-starttime="1814"><span class="speakerName">Romain Guy</span>: For instance, if I </span><span class="line" data-startTime="1814">want to punch Chet, I will </span><span class="line" data-startTime="1816">start by doing this. </span></p>

<p class="speaker"><span class="line" data-starttime="1818"><span class="speakerName">Chet Haase</span>: And I might </span><span class="line" data-startTime="1818">start by doing this. </span> <span class="line" data-startTime="1820">If Mickey is about to run, he </span><span class="line" data-startTime="1820">wouldn't just start running. </span> <span class="line" data-startTime="1824">Instead, he would rear </span><span class="line" data-startTime="1824">back and run. </span> <span class="line" data-startTime="1825">And this was an important </span><span class="line" data-startTime="1825">indicator to the viewer that </span><span class="line" data-startTime="1828">something was about to happen, </span><span class="line" data-startTime="1828">a running action </span><span class="line" data-startTime="1830">was about to happen. </span> <span class="line" data-startTime="1831">So when it actually happened, </span><span class="line" data-startTime="1831">they would be clued into that </span><span class="line" data-startTime="1833">exactly going on, instead of he </span><span class="line" data-startTime="1833">runs, he's off the screen </span><span class="line" data-startTime="1837">immediately, they blinked in </span><span class="line" data-startTime="1837">that instant, and they don't </span><span class="line" data-startTime="1840">know where Mickey went. </span> <span class="line" data-startTime="1841">So anticipation can be used to </span><span class="line" data-startTime="1841">help the user understand an </span><span class="line" data-startTime="1844">action that is about to occur. </span></p>

<p><span class="line" data-startTime="1847">So if we switch over </span><span class="line" data-startTime="1847">to the demo &mdash; </span><span class="line" data-startTime="1854">So That's right. </span> <span class="line" data-startTime="1855">I was going to run this </span><span class="line" data-startTime="1855">on the next one. </span> <span class="line" data-startTime="1857">So we have this AnticiButton. </span> <span class="line" data-startTime="1859">This is a custom button. </span> <span class="line" data-startTime="1863">There's a couple of different </span><span class="line" data-startTime="1863">things going on here. </span> <span class="line" data-startTime="1865">One is the anticipation. </span> <span class="line" data-startTime="1866">As I click on it, it's rearing </span><span class="line" data-startTime="1866">back, indicating that it's </span><span class="line" data-startTime="1869">going to do that run to the </span><span class="line" data-startTime="1869">other side of the screen. </span> <span class="line" data-startTime="1873">So when I release it, then </span><span class="line" data-startTime="1873">it actually moves. </span> <span class="line" data-startTime="1875">And then when it hits the other </span><span class="line" data-startTime="1875">side it's going to do </span><span class="line" data-startTime="1878">the other principle that we're </span><span class="line" data-startTime="1878">going to talk about on the </span><span class="line" data-startTime="1880">next slide. </span></p>

<p class="speaker"><span class="line" data-starttime="1884"><span class="speakerName">Romain Guy</span>: So this is the </span><span class="line" data-startTime="1884">source code for this demo. </span><span class="line" data-startTime="1887">So before we run the animation, </span><span class="line" data-startTime="1887">we need a way to be </span><span class="line" data-startTime="1889">able to do that deformation </span><span class="line" data-startTime="1889">on the button. </span><span class="line" data-startTime="1891">It's actually very easy to do. </span><span class="line" data-startTime="1893">We have our custom </span><span class="line" data-startTime="1893">class right here. </span><span class="line" data-startTime="1895">So we extend the button class. </span><span class="line" data-startTime="1898">We are a small constructor. </span><span class="line" data-startTime="1899">Structure just set the </span><span class="line" data-startTime="1899">ClickListener. </span><span class="line" data-startTime="1901">We also set a TouchListener, </span><span class="line" data-startTime="1901">because what we want to do is </span><span class="line" data-startTime="1903">on the down event we want </span><span class="line" data-startTime="1903">to be able to start the </span><span class="line" data-startTime="1907">anticipation, and on the </span><span class="line" data-startTime="1907">up event we want to </span><span class="line" data-startTime="1909">run our click animation. </span><span class="line" data-startTime="1911">So to do this skew here we're </span><span class="line" data-startTime="1911">going to do something that I </span><span class="line" data-startTime="1914">said it was not possible </span><span class="line" data-startTime="1914">yesterday. </span></p>

<p class="speaker"><span class="line" data-starttime="1916"><span class="speakerName">Chet Haase</span>: He lied. </span></p>

<p class="speaker"><span class="line" data-starttime="1917"><span class="speakerName">Romain Guy</span>: No. </span><span class="line" data-startTime="1918">I was misguided. </span><span class="line" data-startTime="1920">I misremembered. </span><span class="line" data-startTime="1921">The draw method is not final. </span><span class="line" data-startTime="1923">You can override it. </span><span class="line" data-startTime="1924">But if you do, make sure you </span><span class="line" data-startTime="1924">call the super.draw method. </span></p>

<p class="speaker"><span class="line" data-starttime="1927"><span class="speakerName">Chet Haase</span>: And point of fact, </span><span class="line" data-startTime="1927">it's the only way that you can </span><span class="line" data-startTime="1930">do this effect on </span><span class="line" data-startTime="1930">some widgets. </span><span class="line" data-startTime="1932">You can do the skew effect on </span><span class="line" data-startTime="1932">a TextView by overriding on </span><span class="line" data-startTime="1935">draw, which is a safer </span><span class="line" data-startTime="1935">thing to override. </span><span class="line" data-startTime="1937">But you actually need to </span><span class="line" data-startTime="1937">override draw for the button, </span><span class="line" data-startTime="1940">because that's where some of the </span><span class="line" data-startTime="1940">stuff happens that you &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1942"><span class="speakerName">Romain Guy</span>: For instance, </span><span class="line" data-startTime="1942">the background. </span></p>

<p class="speaker"><span class="line" data-starttime="1944"><span class="speakerName">Chet Haase</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="1944"><span class="speakerName">Romain Guy</span>: So the </span><span class="line" data-startTime="1944">implementation is pretty simple. </span> <span class="line" data-startTime="1946">We have our canvas. </span> <span class="line" data-startTime="1946">We have a skew factor. </span> <span class="line" data-startTime="1948">That's what we're going </span><span class="line" data-startTime="1948">to animate. </span> <span class="line" data-startTime="1950">And we just call the </span><span class="line" data-startTime="1950">canvas.skew method. </span> <span class="line" data-startTime="1952">So you don't have much to do. </span> <span class="line" data-startTime="1954">The translation here is just so </span><span class="line" data-startTime="1954">that we can do this skew in </span><span class="line" data-startTime="1957">the right place. </span> <span class="line" data-startTime="1958">And then we call the </span><span class="line" data-startTime="1958">super.draw method. </span> <span class="line" data-startTime="1961">Then, when we run the </span><span class="line" data-startTime="1961">click animation &mdash; </span><span class="line" data-startTime="1964">Let's see. </span> <span class="line" data-startTime="1965">No. </span> <span class="line" data-startTime="1965">We have the anticipation </span><span class="line" data-startTime="1965">animation first. </span></p>

<p><span class="line" data-startTime="1967">So on the down event, when you </span><span class="line" data-startTime="1967">push the button, we want to </span><span class="line" data-startTime="1973">start doing the anticipation. </span> <span class="line" data-startTime="1974">So this is where we run </span><span class="line" data-startTime="1974">this animation. </span> <span class="line" data-startTime="1976">So we just skew to the left. </span> <span class="line" data-startTime="1978">It's a normal animation. </span> <span class="line" data-startTime="1980">And if you let go of the button </span><span class="line" data-startTime="1980">and the animation is </span><span class="line" data-startTime="1982">not over, we're going to finish </span><span class="line" data-startTime="1982">this animation when I </span><span class="line" data-startTime="1986">cancel it and go back </span><span class="line" data-startTime="1986">to the origin. </span> <span class="line" data-startTime="1992">And then when we let go, we're </span><span class="line" data-startTime="1992">going to create the move </span><span class="line" data-startTime="1995">animation, so we're going to </span><span class="line" data-startTime="1995">have it translate the button. </span> <span class="line" data-startTime="1998">And at the same time, </span><span class="line" data-startTime="1998">we want to do the </span><span class="line" data-startTime="2000">overshoot at the end. </span></p>

<p><span class="line" data-startTime="2001">So when we reach the end of the </span><span class="line" data-startTime="2001">animation, we're going to </span><span class="line" data-startTime="2004">skew to the left and skew to </span><span class="line" data-startTime="2004">the right back and forth. </span> <span class="line" data-startTime="2007">And the easiest way to do it is </span><span class="line" data-startTime="2007">to use something called the </span><span class="line" data-startTime="2010">overshoot interpolater. </span> <span class="line" data-startTime="2011">So if you look at the </span><span class="line" data-startTime="2011">interpolation curves, a linear </span><span class="line" data-startTime="2014">curve is just a straight line. </span> <span class="line" data-startTime="2016">We also have the accelerate </span><span class="line" data-startTime="2016">and decelerate curves. </span> <span class="line" data-startTime="2018">They look like S's or like an </span><span class="line" data-startTime="2018">F. And the overshoot looks </span><span class="line" data-startTime="2022">like, basically, a bounce. </span> <span class="line" data-startTime="2024">So this wobble effect, there's </span><span class="line" data-startTime="2024">nothing for you to do. </span> <span class="line" data-startTime="2026">All you do is you animate </span><span class="line" data-startTime="2026">this skewx. </span> <span class="line" data-startTime="2028">You set the overshoot </span><span class="line" data-startTime="2028">interpolater on the animation, </span><span class="line" data-startTime="2031">and that's what's </span><span class="line" data-startTime="2031">going to happen. </span> <span class="line" data-startTime="2033">And finally, we use an animator </span><span class="line" data-startTime="2033">set to sequence all </span><span class="line" data-startTime="2036">this animation. </span></p>

<p><span class="line" data-startTime="2037">So we're going to do the move. </span> <span class="line" data-startTime="2038">We're going to do the skew </span><span class="line" data-startTime="2038">at the end when we </span><span class="line" data-startTime="2041">run against the wall. </span> <span class="line" data-startTime="2042">And then we're going </span><span class="line" data-startTime="2042">to run the wobble. </span></p>

<p class="speaker"><span class="line" data-starttime="2054"><span class="speakerName">Chet Haase</span>: So next principle, </span><span class="line" data-startTime="2054">which you also saw in that </span><span class="line" data-startTime="2056">demo, is follow through and </span><span class="line" data-startTime="2056">overlapping action. </span> <span class="line" data-startTime="2059">When the button hits the </span><span class="line" data-startTime="2059">right-hand side, we want it to </span><span class="line" data-startTime="2061">have this feeling that </span><span class="line" data-startTime="2061">it actually is a </span><span class="line" data-startTime="2063">more organic material. </span> <span class="line" data-startTime="2065">So when it hits that wall, it </span><span class="line" data-startTime="2065">can't just stop immediately. </span> <span class="line" data-startTime="2069">Instead, part of it </span><span class="line" data-startTime="2069">would carry on. </span> <span class="line" data-startTime="2071">When we hit a wall, then part </span><span class="line" data-startTime="2071">of our body will not hit the </span><span class="line" data-startTime="2075">wall all at the same </span><span class="line" data-startTime="2075">time and not stop. </span> <span class="line" data-startTime="2077">Instead, it's going to </span><span class="line" data-startTime="2077">wrap around the solid </span><span class="line" data-startTime="2079">parts that did stop. </span> <span class="line" data-startTime="2080">So how can you indicate </span><span class="line" data-startTime="2080">that with a button? </span><span class="line" data-startTime="2082">Well, we actually continued </span><span class="line" data-startTime="2082">the skew. </span> <span class="line" data-startTime="2084">So as soon as it stops on the </span><span class="line" data-startTime="2084">right, the skew continues and </span><span class="line" data-startTime="2087">goes past, indicating that may </span><span class="line" data-startTime="2087">be it had a little too much </span><span class="line" data-startTime="2091">for lunch and it's going to </span><span class="line" data-startTime="2091">carry on where the rest of the </span><span class="line" data-startTime="2093">button stopped. </span> <span class="line" data-startTime="2094">And then once it gets to that </span><span class="line" data-startTime="2094">final point, then it's going </span><span class="line" data-startTime="2096">to wobble back to </span><span class="line" data-startTime="2096">the end point. </span></p>

<p><span class="line" data-startTime="2098">So we saw that demo. </span> <span class="line" data-startTime="2099">I think we're going to skip </span><span class="line" data-startTime="2099">the live button demo. </span> <span class="line" data-startTime="2101">It was another thing </span><span class="line" data-startTime="2101">about anticipation. </span> <span class="line" data-startTime="2103">Instead, we're going to </span><span class="line" data-startTime="2103">do non-linear motion. </span> <span class="line" data-startTime="2106">We'll show the demo. </span> <span class="line" data-startTime="2107">This actually comes from code </span><span class="line" data-startTime="2107">that I posted on my blog, </span><span class="line" data-startTime="2112">curved animation in Android. </span> <span class="line" data-startTime="2114">So we'll post to DevBytes </span><span class="line" data-startTime="2114">about this as well. </span> <span class="line" data-startTime="2116">But I'll save the code for the </span><span class="line" data-startTime="2116">article for doing this. </span> <span class="line" data-startTime="2120">The idea here is that we want </span><span class="line" data-startTime="2120">to be able to move things </span><span class="line" data-startTime="2125">naturally on the screen. </span> <span class="line" data-startTime="2126">Just like timing shouldn't be </span><span class="line" data-startTime="2126">linear, in general motion </span><span class="line" data-startTime="2129">shouldn't be linear either. </span></p>

<p><span class="line" data-startTime="2131">There's a more natural feel to </span><span class="line" data-startTime="2131">things settling into place, </span><span class="line" data-startTime="2134">which is not moving </span><span class="line" data-startTime="2134">in a direct line. </span> <span class="line" data-startTime="2135">It's moving like people and real </span><span class="line" data-startTime="2135">things in the world move. </span> <span class="line" data-startTime="2139">So sometimes curved motion </span><span class="line" data-startTime="2139">make sense instead. </span> <span class="line" data-startTime="2143">And as I said, we'll skip </span><span class="line" data-startTime="2143">that code for now. </span> <span class="line" data-startTime="2146">Let me talk a little bit </span><span class="line" data-startTime="2146">about exaggeration. </span> <span class="line" data-startTime="2149">And that's another technique </span><span class="line" data-startTime="2149">that the original animators </span><span class="line" data-startTime="2153">used to help indicate </span><span class="line" data-startTime="2153">what was going on. </span> <span class="line" data-startTime="2156">If you're going to have a big </span><span class="line" data-startTime="2156">nose, make it a really big </span><span class="line" data-startTime="2158">nose, indicate that this </span><span class="line" data-startTime="2158">is one honking schnoz. </span> <span class="line" data-startTime="2161">You want to make everything </span><span class="line" data-startTime="2161">bigger than life to help the </span><span class="line" data-startTime="2164">user understand things even </span><span class="line" data-startTime="2164">clearer and more quickly than </span><span class="line" data-startTime="2167">they would otherwise. </span> <span class="line" data-startTime="2168">And in animation, that can help </span><span class="line" data-startTime="2168">as well to exaggerate </span><span class="line" data-startTime="2172">behavior, to either make things </span><span class="line" data-startTime="2172">sort of hyperreal or </span><span class="line" data-startTime="2175">just hyper accentuate what's </span><span class="line" data-startTime="2175">going on to help them </span><span class="line" data-startTime="2179">understand quickly </span><span class="line" data-startTime="2179">what's happening. </span></p>

<p><span class="line" data-startTime="2181">For this, we're going </span><span class="line" data-startTime="2181">to run a demo. </span> <span class="line" data-startTime="2183">Again, I'm not going to go into </span><span class="line" data-startTime="2183">the code on this, because </span><span class="line" data-startTime="2185">there's a lot of code. </span> <span class="line" data-startTime="2185">There's a lot of different </span><span class="line" data-startTime="2185">pieces. </span> <span class="line" data-startTime="2187">We've actually seen all the </span><span class="line" data-startTime="2187">different elements of this </span><span class="line" data-startTime="2190">throughout the other </span><span class="line" data-startTime="2190">little microdemos. </span> <span class="line" data-startTime="2193">We've got custom activity </span><span class="line" data-startTime="2193">animations as we launch from </span><span class="line" data-startTime="2196">this activity into </span><span class="line" data-startTime="2196">the next one. </span> <span class="line" data-startTime="2199">So that's actually going </span><span class="line" data-startTime="2199">into a subactivity. </span></p>

<p><span class="line" data-startTime="2201">We didn't use window </span><span class="line" data-startTime="2201">animations. </span> <span class="line" data-startTime="2203">We used custom activity </span><span class="line" data-startTime="2203">animations where we came in </span><span class="line" data-startTime="2205">immediately with the white </span><span class="line" data-startTime="2205">background and then animated </span><span class="line" data-startTime="2207">the elements in that view. </span> <span class="line" data-startTime="2209">We have a couple of different </span><span class="line" data-startTime="2209">things going on here. </span> <span class="line" data-startTime="2212">One is that the buttons actually </span><span class="line" data-startTime="2212">popped in, so they </span><span class="line" data-startTime="2215">sort of did an overshoot as they </span><span class="line" data-startTime="2215">faded and popped onto the </span><span class="line" data-startTime="2217">screen, to give a feeling of </span><span class="line" data-startTime="2217">engagement, some feeling of </span><span class="line" data-startTime="2220">fun to the kid that they want </span><span class="line" data-startTime="2220">to attract and engage in the </span><span class="line" data-startTime="2223">application. </span> <span class="line" data-startTime="2224">They want to be very </span><span class="line" data-startTime="2224">interactive. </span> <span class="line" data-startTime="2226">And then the text skews </span><span class="line" data-startTime="2226">to give that </span><span class="line" data-startTime="2228">anticipation feeling. </span> <span class="line" data-startTime="2232">Engagement is very important </span><span class="line" data-startTime="2232">in monetization. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2234"><span class="speakerName">Romain Guy</span>: What's the number? </span></p>

<p class="speaker"><span class="line" data-starttime="2237"><span class="speakerName">Chet Haase</span>: So that's </span><span class="line" data-startTime="2237">the entire activity. </span><span class="line" data-startTime="2239">We won't enter the credit </span><span class="line" data-startTime="2239">card right now. </span><span class="line" data-startTime="2241">But another one is just you've </span><span class="line" data-startTime="2241">got the button there. </span><span class="line" data-startTime="2243">You know what? </span><span class="line" data-startTime="2244">You really want the kid </span><span class="line" data-startTime="2244">to start playing. </span><span class="line" data-startTime="2246">So this is a little bit funny. </span><span class="line" data-startTime="2249">We're probably not all writing </span><span class="line" data-startTime="2249">cartoon applications, and it </span><span class="line" data-startTime="2252">may be easy to write this off. </span><span class="line" data-startTime="2254">But we've actually seen cartoon </span><span class="line" data-startTime="2254">effects in other </span><span class="line" data-startTime="2256">applications, again, used for </span><span class="line" data-startTime="2256">the idea of engagement, of </span><span class="line" data-startTime="2260">being fun, of being attractive, </span><span class="line" data-startTime="2260">and being </span><span class="line" data-startTime="2263">enjoyable to use. </span><span class="line" data-startTime="2264">So here's the Path </span><span class="line" data-startTime="2264">application. </span></p>

<p class="speaker"><span class="line" data-starttime="2266"><span class="speakerName">Romain Guy</span>: In this application, </span><span class="line" data-startTime="2266">look, there's my </span><span class="line" data-startTime="2269">avatar right here. </span><span class="line" data-startTime="2270">Focus on the little circle </span><span class="line" data-startTime="2270">just under the avatar. </span><span class="line" data-startTime="2272">So I'm going to start scrolling </span><span class="line" data-startTime="2272">the list, and you </span><span class="line" data-startTime="2275">can see there's this </span><span class="line" data-startTime="2275">anticipation. </span><span class="line" data-startTime="2277">It's stretching and stretching </span><span class="line" data-startTime="2277">and stretching. </span><span class="line" data-startTime="2279">There's the wobble. </span></p>

<p class="speaker"><span class="line" data-starttime="2281"><span class="speakerName">Chet Haase</span>: Yeah. </span><span class="line" data-startTime="2281">It stretches organically, just </span><span class="line" data-startTime="2281">like our button did when it </span><span class="line" data-startTime="2286">squashed and stretched. </span><span class="line" data-startTime="2288">And then it snapped down. </span><span class="line" data-startTime="2289">And it didn't just </span><span class="line" data-startTime="2289">snap into place. </span><span class="line" data-startTime="2291">It did a wobble. </span><span class="line" data-startTime="2292">So it's got this feeling that </span><span class="line" data-startTime="2292">it's rubbery, it's organic, </span><span class="line" data-startTime="2295">and, even more so, it's fun. </span></p>

<p class="speaker"><span class="line" data-starttime="2297"><span class="speakerName">Romain Guy</span>: You know, </span><span class="line" data-startTime="2297">that animation is </span><span class="line" data-startTime="2298">pretty annoying, actually. </span></p>

<p class="speaker"><span class="line" data-starttime="2300"><span class="speakerName">Chet Haase</span>: Doesn't it make </span><span class="line" data-startTime="2300">you want to enter a credit </span><span class="line" data-startTime="2302">card, though? </span><span class="line" data-startTime="2302">It does me. </span></p>

<p class="speaker"><span class="line" data-starttime="2303"><span class="speakerName">Romain Guy</span>: It makes me want </span><span class="line" data-startTime="2303">to turn off the phone. </span></p>

<p class="speaker"><span class="line" data-starttime="2310"><span class="speakerName">Chet Haase</span>: All right. </span><span class="line" data-startTime="2311">Some quick tips here. </span><span class="line" data-startTime="2312">We've seen some of these </span><span class="line" data-startTime="2312">along the way. </span><span class="line" data-startTime="2313">It's worth calling them out. </span></p>

<p class="speaker"><span class="line" data-starttime="2315"><span class="speakerName">Romain Guy</span>: Really quick. </span></p>

<p class="speaker"><span class="line" data-starttime="2316"><span class="speakerName">Chet Haase</span>: Very quick tips, </span><span class="line" data-startTime="2316">in 1 minute and 32. </span> <span class="line" data-startTime="2319">Avoid layout. </span> <span class="line" data-startTime="2320">If you want to have smooth </span><span class="line" data-startTime="2320">animations, don't run layout </span><span class="line" data-startTime="2322">on every frame. </span> <span class="line" data-startTime="2323">We've seen people trying </span><span class="line" data-startTime="2323">to do ListView </span><span class="line" data-startTime="2325">animations with this approach. </span> <span class="line" data-startTime="2326">Sometimes that's the only </span><span class="line" data-startTime="2326">way to accomplish it. </span> <span class="line" data-startTime="2328">But frankly, if you can't run </span><span class="line" data-startTime="2328">the animation smoothly because </span><span class="line" data-startTime="2331">it's doing too much work, such </span><span class="line" data-startTime="2331">as laying out a really complex </span><span class="line" data-startTime="2334">container, maybe an animation is </span><span class="line" data-startTime="2334">not the right solution for </span><span class="line" data-startTime="2338">that problem. </span></p>

<p><span class="line" data-startTime="2339">Avoid layout. </span> <span class="line" data-startTime="2340">If you have to run layout to get </span><span class="line" data-startTime="2340">the after positions that </span><span class="line" data-startTime="2342">you're going to animate </span><span class="line" data-startTime="2342">into, that's fine. </span> <span class="line" data-startTime="2344">Run layout. </span> <span class="line" data-startTime="2345">Then run your animation. </span> <span class="line" data-startTime="2346">Make sure you don't run layout </span><span class="line" data-startTime="2346">during the animation. </span></p>

<p class="speaker"><span class="line" data-starttime="2348"><span class="speakerName">Romain Guy</span>: But it's pretty much </span><span class="line" data-startTime="2348">guaranteed that if you </span><span class="line" data-startTime="2349">run a layout on every frame </span><span class="line" data-startTime="2349">your animation will be </span><span class="line" data-startTime="2352">stuttering. </span><span class="line" data-startTime="2354">ViewTreeObserver, you </span><span class="line" data-startTime="2354">saw it real briefly. </span><span class="line" data-startTime="2357">If you don't know about this </span><span class="line" data-startTime="2357">class, I really encourage you </span><span class="line" data-startTime="2359">to take a look at it. </span><span class="line" data-startTime="2360">It can be used to </span><span class="line" data-startTime="2360">listen to global </span><span class="line" data-startTime="2362">events in the view hierarchy. </span><span class="line" data-startTime="2364">So you can get an event when we </span><span class="line" data-startTime="2364">are about to draw a frame. </span><span class="line" data-startTime="2367">You can get an event when we're </span><span class="line" data-startTime="2367">about to layout a frame. </span><span class="line" data-startTime="2370">You can also know when the </span><span class="line" data-startTime="2370">touch mode has changed. </span><span class="line" data-startTime="2372">So if you have a device with a </span><span class="line" data-startTime="2372">keyboard, you'll be notified </span><span class="line" data-startTime="2375">when the keyboard becomes active </span><span class="line" data-startTime="2375">versus the touchscreen. </span><span class="line" data-startTime="2378">There's global focus changes. </span><span class="line" data-startTime="2380">A lot of very useful information </span><span class="line" data-startTime="2380">comes from the </span><span class="line" data-startTime="2382">ViewTreeObserver. </span><span class="line" data-startTime="2383">And we actually use it quite </span><span class="line" data-startTime="2383">a bit internally. </span></p>

<p class="speaker"><span class="line" data-starttime="2386"><span class="speakerName">Chet Haase</span>: And layers is more </span><span class="line" data-startTime="2386">of a performance tip. </span><span class="line" data-startTime="2389">If you have a complex view or a </span><span class="line" data-startTime="2389">complex view hierarchy that </span><span class="line" data-startTime="2391">you want to animate, consider </span><span class="line" data-startTime="2391">setting a hardware layer on it </span><span class="line" data-startTime="2394">during the animation. </span><span class="line" data-startTime="2396">Don't set a layer on something </span><span class="line" data-startTime="2396">that is actually changing, </span><span class="line" data-startTime="2398">because we're going to </span><span class="line" data-startTime="2398">have to recreate that </span><span class="line" data-startTime="2399">layer on every frame. </span><span class="line" data-startTime="2400">But do set it on a complex view </span><span class="line" data-startTime="2400">whose alpha that you want </span><span class="line" data-startTime="2403">to animate or that you want to </span><span class="line" data-startTime="2403">translate on the screen. </span></p>

<p class="speaker"><span class="line" data-starttime="2406"><span class="speakerName">Romain Guy</span>: So if you want to </span><span class="line" data-startTime="2406">know more, we gave a talk </span><span class="line" data-startTime="2408">called "Animation Rules" </span><span class="line" data-startTime="2408">at Devoxx 2009. </span><span class="line" data-startTime="2411">It's available online </span><span class="line" data-startTime="2411">at parleys.com. </span><span class="line" data-startTime="2413">Chet has an awesome series of </span><span class="line" data-startTime="2413">DevBytes on YouTube about </span><span class="line" data-startTime="2417">animations. </span><span class="line" data-startTime="2419">You can also check out "The </span><span class="line" data-startTime="2419">Illusion of Life". </span><span class="line" data-startTime="2421">It's the book that we </span><span class="line" data-startTime="2421">are referring to. </span><span class="line" data-startTime="2423">It's a great book, if you manage </span><span class="line" data-startTime="2423">to carry it back home, </span><span class="line" data-startTime="2425">because it's pretty big. </span></p>

<p class="speaker"><span class="line" data-starttime="2427"><span class="speakerName">Chet Haase</span>: It's a coffee </span><span class="line" data-startTime="2427">table book. </span><span class="line" data-startTime="2428">It is the size of </span><span class="line" data-startTime="2428">a coffee table. </span></p>

<p class="speaker"><span class="line" data-starttime="2429"><span class="speakerName">Romain Guy</span>: I use it as a </span><span class="line" data-startTime="2429">coffee table, actually. </span><span class="line" data-startTime="2432">No. </span><span class="line" data-startTime="2432">It's a fantastic book. </span><span class="line" data-startTime="2433">It's very interesting. </span><span class="line" data-startTime="2434">The parts about the principal of </span><span class="line" data-startTime="2434">animation is really short, </span><span class="line" data-startTime="2436">but there's a great history of </span><span class="line" data-startTime="2436">Disney and how they came up </span><span class="line" data-startTime="2440">with all those fantastic </span><span class="line" data-startTime="2440">cartoons. </span><span class="line" data-startTime="2442">So check it out. </span><span class="line" data-startTime="2443">Our websites. </span><span class="line" data-startTime="2444">And we're out of time. </span><span class="line" data-startTime="2445">So if you have questions for us, </span><span class="line" data-startTime="2445">we'll be at the Sandbox &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2448"><span class="speakerName">Chet Haase</span>: After the </span><span class="line" data-startTime="2448">fireside chat. </span></p>

<p class="speaker"><span class="line" data-starttime="2449"><span class="speakerName">Romain Guy</span>:  &mdash; after </span><span class="line" data-startTime="2449">the fireside chat. </span><span class="line" data-startTime="2450">Yes. </span><span class="line" data-startTime="2450">There's that. </span><span class="line" data-startTime="2452">And before you exit the room, </span><span class="line" data-startTime="2452">if you want to rate this </span><span class="line" data-startTime="2454">session, you can scan the </span><span class="line" data-startTime="2454">QR codes by the doors. </span><span class="line" data-startTime="2457">Thank you very much. </span></p>

<p class="speaker"><span class="line" data-starttime="2457"><span class="speakerName">Chet Haase</span>: Thanks. </span></p></div>