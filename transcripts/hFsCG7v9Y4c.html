<p class="speaker"><span class="line" data-starttime="4"><span class="speakerName">Chris Wilson</span>: Good afternoon </span><span class="line" data-startTime="4">and welcome to Turning </span><span class="line" data-startTime="7">the Web Up to 11. </span> <span class="line" data-startTime="8">I'm Chris Wilson. </span> <span class="line" data-startTime="9">I'm a Developer Advocate </span><span class="line" data-startTime="9">on the Chrome team. </span> <span class="line" data-startTime="12">And I'm here to take you </span><span class="line" data-startTime="12">on a journey through </span><span class="line" data-startTime="13">the Web Audio API. </span> <span class="line" data-startTime="15">So if you didn't know what </span><span class="line" data-startTime="15">I was going to talk </span><span class="line" data-startTime="17">about, now you do. </span> <span class="line" data-startTime="19">I wanted to start by showing why </span><span class="line" data-startTime="19">I'm so excited about the </span><span class="line" data-startTime="22">Web Audio API. </span> <span class="line" data-startTime="24">When I first ran across the Web </span><span class="line" data-startTime="24">Audio work, I got really </span><span class="line" data-startTime="28">excited because for the last </span><span class="line" data-startTime="28">couple years, I've gotten </span><span class="line" data-startTime="30">really interested in building </span><span class="line" data-startTime="30">and using software </span><span class="line" data-startTime="33">synthesizers, drum machines, all </span><span class="line" data-startTime="33">kinds of production stuff, </span><span class="line" data-startTime="36">on desktop and also </span><span class="line" data-startTime="36">on tablets. </span> <span class="line" data-startTime="40">And I'd gotten really </span><span class="line" data-startTime="40">excited about this. </span></p>

<p><span class="line" data-startTime="42">I wanted to start </span><span class="line" data-startTime="42">building my own. </span> <span class="line" data-startTime="43">And as I looked at the Web Audio </span><span class="line" data-startTime="43">API, it looked super </span><span class="line" data-startTime="46">easy to do, super interesting. </span> <span class="line" data-startTime="49">And I actually very quickly </span><span class="line" data-startTime="49">realized that most of building </span><span class="line" data-startTime="52">a software synthesizer with </span><span class="line" data-startTime="52">web audio ends up being a </span><span class="line" data-startTime="55">really big user interface </span><span class="line" data-startTime="55">chore. </span> <span class="line" data-startTime="58">And I'm not a great </span><span class="line" data-startTime="58">UI designer. </span> <span class="line" data-startTime="60">You'll probably notice </span><span class="line" data-startTime="60">that during my deck. </span> <span class="line" data-startTime="64">So I set my sights on a </span><span class="line" data-startTime="64">different challenge. </span> <span class="line" data-startTime="66">Because I wanted to do something </span><span class="line" data-startTime="66">that was really </span><span class="line" data-startTime="69">pretty heavy duty with </span><span class="line" data-startTime="69">audio processing. </span></p>

<p><span class="line" data-startTime="71">So I decided I would set my </span><span class="line" data-startTime="71">sights on making robot voices. </span> <span class="line" data-startTime="75">Or more particularly, building </span><span class="line" data-startTime="75">a vocoder and trying to </span><span class="line" data-startTime="80">replicate Styx's seminal </span><span class="line" data-startTime="80">1983 hit "Mr. Roboto." </span><span class="line" data-startTime="85">And I'm actually happy </span><span class="line" data-startTime="85">to report that I've </span><span class="line" data-startTime="87">managed to do this. </span> <span class="line" data-startTime="89">This is actually a vocoder </span><span class="line" data-startTime="89">that I built. </span> <span class="line" data-startTime="91">It's up on GitHub right now. </span> <span class="line" data-startTime="93">There's a link to it at </span><span class="line" data-startTime="93">the end of the deck. </span> <span class="line" data-startTime="95">So you can go play with it </span><span class="line" data-startTime="95">yourself, or fork it and do </span><span class="line" data-startTime="98">all kinds of interesting </span><span class="line" data-startTime="98">things with it. </span></p>

<p><span class="line" data-startTime="100">So how many people know what a </span><span class="line" data-startTime="100">vocoder is or how it works? </span><span class="line" data-startTime="105">Yeah, the guy on the Web Audio </span><span class="line" data-startTime="105">team doesn't actually get to </span><span class="line" data-startTime="108">raise his hand. </span> <span class="line" data-startTime="109">But I kind of figured. </span> <span class="line" data-startTime="110">So I don't want to get </span><span class="line" data-startTime="110">really deeply to </span><span class="line" data-startTime="112">vocoder theory or anything. </span> <span class="line" data-startTime="114">Basically, what a vocoder does </span><span class="line" data-startTime="114">is it takes one signal, </span><span class="line" data-startTime="119">generally called the modulator, </span><span class="line" data-startTime="119">it's usually a </span><span class="line" data-startTime="121">vocal sample. </span> <span class="line" data-startTime="122">Something like this &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="124"><span class="speakerName">Playback</span>: Four score and seven </span><span class="line" data-startTime="124">years ago, our fathers brought </span><span class="line" data-startTime="127">forth on this continent. </span></p>

<p class="speaker"><span class="line" data-starttime="129"><span class="speakerName">Chris Wilson</span>: And it maps the </span><span class="line" data-startTime="129">frequency characteristics of </span><span class="line" data-startTime="132">that sound over time. </span><span class="line" data-startTime="134">It chops it up into </span><span class="line" data-startTime="134">frequency bands. </span><span class="line" data-startTime="136">And then it watches how </span><span class="line" data-startTime="136">much energy is in </span><span class="line" data-startTime="138">each frequency band. </span><span class="line" data-startTime="140">And it maps it onto a different </span><span class="line" data-startTime="140">signal, the carrier </span><span class="line" data-startTime="142">signal, which is usually </span><span class="line" data-startTime="142">a synthesized sound. </span><span class="line" data-startTime="145">Something like this &mdash; </span><span class="line" data-startTime="146">[BUZZING NOISE] </span></p>

<p class="speaker"><span class="line" data-starttime="148"><span class="speakerName">Chris Wilson</span>: And I had </span><span class="line" data-startTime="148">to tell the audio guys </span><span class="line" data-startTime="150">beforehand, No, that's not </span><span class="line" data-startTime="150">something going wrong. </span><span class="line" data-startTime="153">That is actually what </span><span class="line" data-startTime="153">it's supposed to </span><span class="line" data-startTime="154">sound like right now. </span><span class="line" data-startTime="156">It sounds really awful, right? </span><span class="line" data-startTime="157">But when you actually map the </span><span class="line" data-startTime="157">frequency characteristics onto </span><span class="line" data-startTime="160">that sound, it ends up sounding </span><span class="line" data-startTime="160">kind of like this &mdash; </span><span class="line" data-startTime="163">PLAYBACK: [ROBOT VOICE] </span><span class="line" data-startTime="163">Four score and seven years ago, </span><span class="line" data-startTime="163">our fathers brought forth </span><span class="line" data-startTime="166">on this continent. </span><span class="line" data-startTime="167">[CONTINUES PLAYING </span><span class="line" data-startTime="167">IN BACKGROUND] </span></p>

<p class="speaker"><span class="line" data-starttime="167"><span class="speakerName">Chris Wilson</span>: It's </span><span class="line" data-startTime="167">kind of cool. </span><span class="line" data-startTime="168">It's actually somewhat </span><span class="line" data-startTime="168">recognizable. </span><span class="line" data-startTime="171">Now the interesting thing about </span><span class="line" data-startTime="171">this code, to me after </span><span class="line" data-startTime="176">having written it, is that this </span><span class="line" data-startTime="176">is not being precomputed. </span><span class="line" data-startTime="179">This is actually </span><span class="line" data-startTime="179">happening live. </span><span class="line" data-startTime="182">In fact, I can change </span><span class="line" data-startTime="182">characteristics. </span><span class="line" data-startTime="183">Like I can detune the </span><span class="line" data-startTime="183">voices being used. </span><span class="line" data-startTime="186">[VOICE SPEEDS UP] </span></p>

<p class="speaker"><span class="line" data-starttime="187"><span class="speakerName">Chris Wilson</span>: And change </span><span class="line" data-startTime="187">how it sounds. </span><span class="line" data-startTime="189">[VOICE SLOWS DOWN] </span></p>

<p class="speaker"><span class="line" data-starttime="194"><span class="speakerName">Chris Wilson</span>: Or I can also </span><span class="line" data-startTime="194">change what voices are being </span><span class="line" data-startTime="196">used to produce it. </span><span class="line" data-startTime="198">So if I grab and &mdash; </span><span class="line" data-startTime="200">[VOICE DEEPENS] </span></p>

<p class="speaker"><span class="line" data-starttime="205"><span class="speakerName">Chris Wilson</span>: I'm probably using </span><span class="line" data-startTime="205">a different sample or </span><span class="line" data-startTime="206">something like that. </span> <span class="line" data-startTime="208">So I have a lot of control </span><span class="line" data-startTime="208">over what's going on. </span> <span class="line" data-startTime="211">In fact, the only bit of my </span><span class="line" data-startTime="211">JavaScript code that's running </span><span class="line" data-startTime="215">while this is going, is the </span><span class="line" data-startTime="215">stuff used to animate the </span><span class="line" data-startTime="217">vocoder bands, how the frequency </span><span class="line" data-startTime="217">bands are jumping </span><span class="line" data-startTime="220">around, and the input </span><span class="line" data-startTime="220">and output signals. </span> <span class="line" data-startTime="224">So the ability to build rich </span><span class="line" data-startTime="224">audio applications like this. </span> <span class="line" data-startTime="228">Because by the way, I'm </span><span class="line" data-startTime="228">not an audio engineer. </span> <span class="line" data-startTime="230">I'm not a digital signal </span><span class="line" data-startTime="230">processing expert or anything. </span> <span class="line" data-startTime="233">It did take me a lot of trial </span><span class="line" data-startTime="233">and error to build this. </span> <span class="line" data-startTime="237">But the ability to build rich </span><span class="line" data-startTime="237">audio apps like this, without </span><span class="line" data-startTime="241">having a degree in audio </span><span class="line" data-startTime="241">engineering, is why I'm so </span><span class="line" data-startTime="244">excited about the processing </span><span class="line" data-startTime="244">capabilities here. </span> <span class="line" data-startTime="250">And I will stop that. </span></p>

<p><span class="line" data-startTime="251">Because you can go play </span><span class="line" data-startTime="251">with it yourself. </span> <span class="line" data-startTime="255">Oops. </span> <span class="line" data-startTime="257">Click on my slides here. </span> <span class="line" data-startTime="259">So you might start out by </span><span class="line" data-startTime="259">asking, why do we even need </span><span class="line" data-startTime="262">another API? </span><span class="line" data-startTime="264">We already have the HTML5 </span><span class="line" data-startTime="264">audio element. </span> <span class="line" data-startTime="267">And I love the HTML5 </span><span class="line" data-startTime="267">audio element. </span> <span class="line" data-startTime="269">Because it wraps everything </span><span class="line" data-startTime="269">about audio &mdash; </span><span class="line" data-startTime="272">loading, decoding, and playing </span><span class="line" data-startTime="272">audio &mdash; all up into one easy, </span><span class="line" data-startTime="275">declarative step. </span> <span class="line" data-startTime="276">Right? </span><span class="line" data-startTime="276">You stick an audio tag in. </span> <span class="line" data-startTime="278">You tell it whether you want to </span><span class="line" data-startTime="278">show the controls or not, </span><span class="line" data-startTime="280">whether you want to pre-load </span><span class="line" data-startTime="280">it, give it the source, and </span><span class="line" data-startTime="283">you're good to go. </span> <span class="line" data-startTime="284">Like I can &mdash; </span><span class="line" data-startTime="285">gonna turn my sound down </span><span class="line" data-startTime="285">just a little here. </span> <span class="line" data-startTime="290">I click the button. </span> <span class="line" data-startTime="291">[LASER SOUND] </span></p>

<p class="speaker"><span class="line" data-starttime="292"><span class="speakerName">Chris Wilson</span>: I probably </span><span class="line" data-startTime="292">can turn it back up. </span><span class="line" data-startTime="293">[LASER SOUND] </span></p>

<p class="speaker"><span class="line" data-starttime="294"><span class="speakerName">Chris Wilson</span>: Click </span><span class="line" data-startTime="294">the button. </span><span class="line" data-startTime="295">And it plays the sound. </span><span class="line" data-startTime="296">In fact, I even get built-in </span><span class="line" data-startTime="296">scrubbing of the sound. </span><span class="line" data-startTime="298">So I can &mdash; </span><span class="line" data-startTime="300">if I stop hitting my </span><span class="line" data-startTime="300">right button &mdash; </span><span class="line" data-startTime="302">[PLAYS END OF LASER SOUND] </span></p>

<p class="speaker"><span class="line" data-starttime="303"><span class="speakerName">Chris Wilson</span>: I can scrub </span><span class="line" data-startTime="303">it to part of the </span><span class="line" data-startTime="304">sound and hit play. </span> <span class="line" data-startTime="306">Now this is great. </span> <span class="line" data-startTime="307">But the thing that you don't </span><span class="line" data-startTime="307">get from the HTML5 audio </span><span class="line" data-startTime="310">element is you don't get </span><span class="line" data-startTime="310">sample-accurate control over </span><span class="line" data-startTime="314">when the sound is going </span><span class="line" data-startTime="314">to be played. </span> <span class="line" data-startTime="316">And it really struggles with </span><span class="line" data-startTime="316">scalability, when you have a </span><span class="line" data-startTime="319">whole bunch of sounds what you </span><span class="line" data-startTime="319">want to play all at the same </span><span class="line" data-startTime="321">time or very close </span><span class="line" data-startTime="321">to each other. </span> <span class="line" data-startTime="323">It's kind of a challenge to </span><span class="line" data-startTime="323">get it to scale to that. </span> <span class="line" data-startTime="327">Now the Web Audio API is </span><span class="line" data-startTime="327">designed a little bit </span><span class="line" data-startTime="329">differently. </span> <span class="line" data-startTime="329">It's really designed around </span><span class="line" data-startTime="329">this idea of having very </span><span class="line" data-startTime="332">precise timing of </span><span class="line" data-startTime="332">lots of sounds. </span></p>

<p><span class="line" data-startTime="335">So I can play the same </span><span class="line" data-startTime="335">sound sample. </span> <span class="line" data-startTime="339">[LASER SOUND] </span></p>

<p class="speaker"><span class="line" data-starttime="340"><span class="speakerName">Chris Wilson</span>: But I can also </span><span class="line" data-startTime="340">play it a lot of times. </span><span class="line" data-startTime="342">[MULTIPLE SIMULTANEOUS </span><span class="line" data-startTime="342">LASER SOUNDS] </span></p>

<p class="speaker"><span class="line" data-starttime="344"><span class="speakerName">Chris Wilson</span>: And it's very </span><span class="line" data-startTime="344">precise in timing as to when </span><span class="line" data-startTime="348">it's playing, exactly when </span><span class="line" data-startTime="348">I hit the button. </span><span class="line" data-startTime="353">The Web Audio API also provides </span><span class="line" data-startTime="353">a really rich audio </span><span class="line" data-startTime="356">pipeline for building effects </span><span class="line" data-startTime="356">and filters and routing audio </span><span class="line" data-startTime="360">around in different </span><span class="line" data-startTime="360">powerful ways. </span><span class="line" data-startTime="362">So adding an effect </span><span class="line" data-startTime="362">to that same sound </span><span class="line" data-startTime="365">file is really easy. </span><span class="line" data-startTime="366">[LASER SOUND ECHOING] </span></p>

<p class="speaker"><span class="line" data-starttime="369"><span class="speakerName">Chris Wilson</span>: And then finally, </span><span class="line" data-startTime="369">the Web Audio API </span><span class="line" data-startTime="371">builds in a bunch of hooks </span><span class="line" data-startTime="371">so you can analyze, and </span><span class="line" data-startTime="375">visualize, and kind of </span><span class="line" data-startTime="375">manipulate the data on the </span><span class="line" data-startTime="378">fly, as well. </span><span class="line" data-startTime="379">So it's really pretty easy </span><span class="line" data-startTime="379">to build something like &mdash; </span><span class="line" data-startTime="382">[MUSIC PLAYING WITH </span><span class="line" data-startTime="382">VISUAL ANALYZER] </span></p>

<p class="speaker"><span class="line" data-starttime="384"><span class="speakerName">Chris Wilson</span>: A visual </span><span class="line" data-startTime="384">analyzer. </span><span class="line" data-startTime="387">I actually built this </span><span class="line" data-startTime="387">visual analyzer </span><span class="line" data-startTime="388">special for this talk. </span><span class="line" data-startTime="390">And it didn't take very long. </span><span class="line" data-startTime="391">We're going to walk through the </span><span class="line" data-startTime="391">code a little bit later. </span><span class="line" data-startTime="394">So looking at the API from the </span><span class="line" data-startTime="394">top down, it's kind of </span><span class="line" data-startTime="398">surprising that it's actually </span><span class="line" data-startTime="398">designed to be a relatively </span><span class="line" data-startTime="401">high-level API. </span><span class="line" data-startTime="403">It's really pretty easy to do </span><span class="line" data-startTime="403">basic tasks in the API, like &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="407"><span class="speakerName">Playback</span>: Play sound now. </span></p>

<p class="speaker"><span class="line" data-starttime="409"><span class="speakerName">Chris Wilson</span>: Playing a sound. </span> <span class="line" data-startTime="410">That's the code for </span><span class="line" data-startTime="410">it right there. </span> <span class="line" data-startTime="411">That's all that I needed to </span><span class="line" data-startTime="411">do to play that sound. </span> <span class="line" data-startTime="414">Because I'd already had the </span><span class="line" data-startTime="414">buffer loaded and we'll talk </span><span class="line" data-startTime="416">about that. </span> <span class="line" data-startTime="418">But even better than that, the </span><span class="line" data-startTime="418">effects and filters engine </span><span class="line" data-startTime="422">doesn't require you to </span><span class="line" data-startTime="422">be a DSP engineer. </span> <span class="line" data-startTime="426">If you told me that in order to </span><span class="line" data-startTime="426">build that vocoder I had to </span><span class="line" data-startTime="429">go build my own FFT algorithm </span><span class="line" data-startTime="429">implementation, and come up </span><span class="line" data-startTime="434">with a bunch of matrices </span><span class="line" data-startTime="434">and transforms, and </span><span class="line" data-startTime="436">stick it all together. </span> <span class="line" data-startTime="438">I would have walked away and </span><span class="line" data-startTime="438">done something else, frankly. </span></p>

<p><span class="line" data-startTime="441">Math is not my favorite thing </span><span class="line" data-startTime="441">to do on a sunny afternoon. </span> <span class="line" data-startTime="444">So I probably would have figured </span><span class="line" data-startTime="444">out something else. </span> <span class="line" data-startTime="449">But if you want to do that, if </span><span class="line" data-startTime="449">you want to get right down </span><span class="line" data-startTime="452">into the guts and do your own </span><span class="line" data-startTime="452">processing in JavaScript, on </span><span class="line" data-startTime="455">the fly, you absolutely </span><span class="line" data-startTime="455">can do that with the </span><span class="line" data-startTime="458">Web Audio API, too. </span> <span class="line" data-startTime="460">But most of the effects engine, </span><span class="line" data-startTime="460">and certainly the </span><span class="line" data-startTime="463">routing engine that we provide </span><span class="line" data-startTime="463">in the implementation, it uses </span><span class="line" data-startTime="468">a separate high-priority </span><span class="line" data-startTime="468">thread. </span> <span class="line" data-startTime="469">It uses native implementation of </span><span class="line" data-startTime="469">FFTs and things like that. </span></p>

<p><span class="line" data-startTime="473">And that way we can resist </span><span class="line" data-startTime="473">problems like glitching. </span> <span class="line" data-startTime="477">So if you have an application </span><span class="line" data-startTime="477">that has pretty rich visuals </span><span class="line" data-startTime="482">and nice animation, here. </span> <span class="line" data-startTime="485">[PLAYS POOL GAME] </span></p>

<p class="speaker"><span class="line" data-starttime="491"><span class="speakerName">Chris Wilson</span>: I never sink </span><span class="line" data-startTime="491">anywhere when I do this. </span> <span class="line" data-startTime="493">But this actually has </span><span class="line" data-startTime="493">really rich sound. </span> <span class="line" data-startTime="495">It's in 3D. </span> <span class="line" data-startTime="496">So you actually hear the balls </span><span class="line" data-startTime="496">clicking together in the </span><span class="line" data-startTime="499">appropriate place </span><span class="line" data-startTime="499">and everything. </span> <span class="line" data-startTime="501">It works better with headphones </span><span class="line" data-startTime="502">obviously than in the room. </span> <span class="line" data-startTime="505">But you could tell </span><span class="line" data-startTime="505">the sound wasn't </span><span class="line" data-startTime="507">interfering with the audio. </span> <span class="line" data-startTime="508">And the audio wasn't interfering </span><span class="line" data-startTime="508">with the sound. </span> <span class="line" data-startTime="510">And this is really critical, </span><span class="line" data-startTime="510">to not have these things </span><span class="line" data-startTime="515">interact with each other </span><span class="line" data-startTime="515">accidentally. </span> <span class="line" data-startTime="519">Now when you look at what you </span><span class="line" data-startTime="519">need to build gaming. </span> <span class="line" data-startTime="522">Because there are really two </span><span class="line" data-startTime="522">major scenarios that we're </span><span class="line" data-startTime="525">super interested in &mdash; </span><span class="line" data-startTime="527">music applications and gaming. </span> <span class="line" data-startTime="530">Gaming has a lot of features </span><span class="line" data-startTime="530">that are expected for high-end </span><span class="line" data-startTime="534">console games. </span> <span class="line" data-startTime="536">You expect to see things like </span><span class="line" data-startTime="536">I talked before about very </span><span class="line" data-startTime="538">precise timing of audio </span><span class="line" data-startTime="538">elements and </span><span class="line" data-startTime="541">simultaneous sounds. </span></p>

<p><span class="line" data-startTime="542">But you also expect to be able </span><span class="line" data-startTime="542">to do things like position </span><span class="line" data-startTime="545">sound in 3D, have automatic </span><span class="line" data-startTime="545">effects happen, like Doppler </span><span class="line" data-startTime="549">shift when the siren races past </span><span class="line" data-startTime="549">you and the pitch seems </span><span class="line" data-startTime="552">to change because of </span><span class="line" data-startTime="552">the physics of it. </span> <span class="line" data-startTime="557">You also want to be able to do </span><span class="line" data-startTime="557">things like filtering effects. </span> <span class="line" data-startTime="559">So that, if you're doing a </span><span class="line" data-startTime="559">live chat, you want it to </span><span class="line" data-startTime="562">sound like it's coming over the </span><span class="line" data-startTime="562">radio or over a telephone. </span> <span class="line" data-startTime="565">So I can take that same </span><span class="line" data-startTime="565">sample I did earlier &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="568"><span class="speakerName">Playback</span>: Play sound now. </span></p>

<p class="speaker"><span class="line" data-starttime="569"><span class="speakerName">Chris Wilson</span>: And filter it so </span><span class="line" data-startTime="569">it sounds like it's coming </span><span class="line" data-startTime="571">over a really kind of </span><span class="line" data-startTime="571">crappy-quality telephone. </span> <span class="line" data-startTime="575">And, of course, replicating </span><span class="line" data-startTime="575">acoustic environments. </span> <span class="line" data-startTime="578">Like if you fire your BFG 9,000 </span><span class="line" data-startTime="578">in a huge hall, you </span><span class="line" data-startTime="582">expect it to sound a little </span><span class="line" data-startTime="582">different than if you fire it </span><span class="line" data-startTime="584">in a small room. </span> <span class="line" data-startTime="587">And, of course, you need the </span><span class="line" data-startTime="587">ability to create rhythms and </span><span class="line" data-startTime="590">sequences and things </span><span class="line" data-startTime="590">like that. </span> <span class="line" data-startTime="591">But also do automation. </span></p>

<p><span class="line" data-startTime="593">Do automated fade ins, fade </span><span class="line" data-startTime="593">outs, that sort of thing. </span> <span class="line" data-startTime="598">On top of that, for music </span><span class="line" data-startTime="598">applications you also need to </span><span class="line" data-startTime="601">be able to generate sound. </span> <span class="line" data-startTime="603">You need oscillators. </span> <span class="line" data-startTime="604">You need things like dynamics </span><span class="line" data-startTime="604">processing, and distortion, </span><span class="line" data-startTime="607">and things like that. </span> <span class="line" data-startTime="609">And, of course, this is where </span><span class="line" data-startTime="609">frequency and waveform </span><span class="line" data-startTime="611">analysis gets really </span><span class="line" data-startTime="611">interesting. </span> <span class="line" data-startTime="615">So I want to start diving in </span><span class="line" data-startTime="615">to how we make this happen </span><span class="line" data-startTime="618">with the Web Audio API. </span> <span class="line" data-startTime="621">This is an application </span><span class="line" data-startTime="621">that I wrote. </span> <span class="line" data-startTime="622">I'm going to use this multiple </span><span class="line" data-startTime="622">times during the talk. </span> <span class="line" data-startTime="625">It's also posted on GitHub. </span></p>

<p><span class="line" data-startTime="626">It's also posted publicly. </span> <span class="line" data-startTime="628">So you can just go run it. </span> <span class="line" data-startTime="629">It basically is something that </span><span class="line" data-startTime="629">I built to let me kind of </span><span class="line" data-startTime="632">explore, visually, the </span><span class="line" data-startTime="632">Web Audio API. </span> <span class="line" data-startTime="636">So the first thing to understand </span><span class="line" data-startTime="636">is that the Web </span><span class="line" data-startTime="637">Audio API works on the concept </span><span class="line" data-startTime="637">of a node graph. </span> <span class="line" data-startTime="643">You create nodes. </span> <span class="line" data-startTime="645">So I just created an audio </span><span class="line" data-startTime="645">buffer source node. </span> <span class="line" data-startTime="647">And you connect them. </span> <span class="line" data-startTime="649">And in this case I'm going to </span><span class="line" data-startTime="649">connect it to the speakers. </span> <span class="line" data-startTime="652">Because you need to connect </span><span class="line" data-startTime="652">everything to the speakers if </span><span class="line" data-startTime="654">you want to hear a sound. </span> <span class="line" data-startTime="656">And I'll hit play. </span> <span class="line" data-startTime="658">[BELL DINGS] </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="660"><span class="speakerName">Chris Wilson</span>: Yay. </span> <span class="line" data-startTime="661">So you get the basic idea. </span> <span class="line" data-startTime="663">Create nodes, connect them </span><span class="line" data-startTime="663">together, hit play. </span> <span class="line" data-startTime="666">Now these node graphs can </span><span class="line" data-startTime="666">be varying complexity. </span> <span class="line" data-startTime="673">What I just had here, that just </span><span class="line" data-startTime="673">went away, was actually </span><span class="line" data-startTime="678">really simple. </span> <span class="line" data-startTime="678">It just had two nodes &mdash; </span><span class="line" data-startTime="680">the source code and the speaker </span><span class="line" data-startTime="682">destination node that I played. </span> <span class="line" data-startTime="684">This is a little bit more </span><span class="line" data-startTime="684">complex node graph. </span> <span class="line" data-startTime="686">But if you work through it one </span><span class="line" data-startTime="686">piece at a time, it's pretty </span><span class="line" data-startTime="689">straightforward. </span> <span class="line" data-startTime="690">There's a few sources. </span> <span class="line" data-startTime="691">There's a few effects. </span> <span class="line" data-startTime="692">They're mixed together in </span><span class="line" data-startTime="692">sub-mixes and then it goes </span><span class="line" data-startTime="695">through a compressor </span><span class="line" data-startTime="695">and gets played. </span></p>

<p><span class="line" data-startTime="698">That vocoder app that I ran in </span><span class="line" data-startTime="698">the beginning, by the way, is </span><span class="line" data-startTime="701">a really complex node graph. </span> <span class="line" data-startTime="703">It has somewhere around 420 </span><span class="line" data-startTime="703">nodes, I think, active while </span><span class="line" data-startTime="708">it's playing, the whole time. </span> <span class="line" data-startTime="710">So you can tell how </span><span class="line" data-startTime="710">scalable it is. </span> <span class="line" data-startTime="712">Because that's running on my </span><span class="line" data-startTime="712">two-year-old MacBook Pro. </span> <span class="line" data-startTime="716">And really doesn't make the </span><span class="line" data-startTime="716">system sweat even that much. </span> <span class="line" data-startTime="720">For a while I was accidentally </span><span class="line" data-startTime="720">running two copies at the same </span><span class="line" data-startTime="723">time, I was wondering why I </span><span class="line" data-startTime="723">got a weird effect, but &mdash; </span><span class="line" data-startTime="728">So I want to start by walking </span><span class="line" data-startTime="728">through how to build all of </span><span class="line" data-startTime="734">this audio code. </span> <span class="line" data-startTime="735">I'm not going to dig into the </span><span class="line" data-startTime="735">code of the vocoder app. </span> <span class="line" data-startTime="738">I started trying to do that and </span><span class="line" data-startTime="738">realized it's kind of hard </span><span class="line" data-startTime="740">to explain in an hour. </span></p>

<p><span class="line" data-startTime="743">But, at the same time, I do want </span><span class="line" data-startTime="743">to walk through each of </span><span class="line" data-startTime="746">these building blocks </span><span class="line" data-startTime="746">and help you </span><span class="line" data-startTime="748">understand how to use them. </span> <span class="line" data-startTime="750">Now you're going to have </span><span class="line" data-startTime="750">to bear with me. </span> <span class="line" data-startTime="752">We have to get through five </span><span class="line" data-startTime="752">types before I can start </span><span class="line" data-startTime="755">playing with the fun stuff. </span> <span class="line" data-startTime="757">The first of those is </span><span class="line" data-startTime="757">the AudioContext. </span> <span class="line" data-startTime="760">The AudioContext is kind of the </span><span class="line" data-startTime="760">root of all things audio. </span> <span class="line" data-startTime="765">This is kind of similar to </span><span class="line" data-startTime="765">a 2D canvas context. </span> <span class="line" data-startTime="768">So you create one of these. </span> <span class="line" data-startTime="771">And this is where you </span><span class="line" data-startTime="771">get access to all </span><span class="line" data-startTime="773">the other fun stuff. </span> <span class="line" data-startTime="774">First and foremost, of course, </span><span class="line" data-startTime="774">this is where you get access </span><span class="line" data-startTime="777">to the speakers. </span></p>

<p><span class="line" data-startTime="778">And you have to route </span><span class="line" data-startTime="778">everything to this </span><span class="line" data-startTime="780">destination, to the speakers, </span><span class="line" data-startTime="780">in order to </span><span class="line" data-startTime="783">have it make sound. </span> <span class="line" data-startTime="784">Otherwise you're not plugging </span><span class="line" data-startTime="784">the cable into </span><span class="line" data-startTime="786">anything, in effect. </span> <span class="line" data-startTime="788">But we also have methods here </span><span class="line" data-startTime="788">to create audio buffers, to </span><span class="line" data-startTime="791">decode audio buffers from common </span><span class="line" data-startTime="791">file formats like mp3, </span><span class="line" data-startTime="796">or wav, or ogg, or that </span><span class="line" data-startTime="796">sort of thing. </span> <span class="line" data-startTime="799">And this is also down at the </span><span class="line" data-startTime="799">bottom where we create all </span><span class="line" data-startTime="801">kinds of different </span><span class="line" data-startTime="801">audio nodes. </span> <span class="line" data-startTime="803">And we're going to walk through </span><span class="line" data-startTime="803">each one of those </span><span class="line" data-startTime="804">audio nodes. </span></p>

<p><span class="line" data-startTime="806">This is a good time to mention, </span><span class="line" data-startTime="806">by the way, I show </span><span class="line" data-startTime="808">you a lot of interfaces </span><span class="line" data-startTime="808">in this talk. </span> <span class="line" data-startTime="811">These are not the precise </span><span class="line" data-startTime="811">interface declarations. </span> <span class="line" data-startTime="815">I tried to simplify them to </span><span class="line" data-startTime="815">make them a little more </span><span class="line" data-startTime="817">understandable. </span> <span class="line" data-startTime="819">And, obviously, like I've </span><span class="line" data-startTime="819">cropped a bunch the audio </span><span class="line" data-startTime="821">nodes out of the bottom here. </span> <span class="line" data-startTime="822">So look in the spec </span><span class="line" data-startTime="822">if you want the </span><span class="line" data-startTime="824">full, complete version. </span> <span class="line" data-startTime="827">So this is the first line of Web </span><span class="line" data-startTime="827">Audio applications, or a </span><span class="line" data-startTime="832">very early line, I should say. </span> <span class="line" data-startTime="834">You need to create a </span><span class="line" data-startTime="834">new AudioContext. </span> <span class="line" data-startTime="837">Right now, obviously, we're a </span><span class="line" data-startTime="837">WebKit prefix, vendor prefix. </span> <span class="line" data-startTime="841">Sooner or later, that will go </span><span class="line" data-startTime="841">away as we move the spec </span><span class="line" data-startTime="843">through the standards process. </span></p>

<p><span class="line" data-startTime="847">Now the second type </span><span class="line" data-startTime="847">is AudioNode. </span> <span class="line" data-startTime="850">And I already said Web Audio API </span><span class="line" data-startTime="850">is based on the concept of </span><span class="line" data-startTime="854">a node graph. </span> <span class="line" data-startTime="855">AudioNode is basically the super </span><span class="line" data-startTime="855">class for all nodes in </span><span class="line" data-startTime="858">that graph. </span> <span class="line" data-startTime="859">In fact, it really only has </span><span class="line" data-startTime="859">two things that are super </span><span class="line" data-startTime="862">interesting. </span> <span class="line" data-startTime="863">It has a connect. </span> <span class="line" data-startTime="864">It has a disconnect. </span> <span class="line" data-startTime="865">You want to connect a source </span><span class="line" data-startTime="865">node to a destination node, </span><span class="line" data-startTime="868">you just call source.connect </span><span class="line" data-startTime="868">and pass it the destination </span><span class="line" data-startTime="871">you want to connect it to. </span> <span class="line" data-startTime="874">I will point out, here, there's </span><span class="line" data-startTime="874">a second connect </span><span class="line" data-startTime="876">method that takes </span><span class="line" data-startTime="876">an AudioParam. </span> <span class="line" data-startTime="879">I don't want to get into the </span><span class="line" data-startTime="879">implications of that, yet. </span> <span class="line" data-startTime="882">But I did want to call it out. </span> <span class="line" data-startTime="883">Because it's going to be </span><span class="line" data-startTime="883">important later on. </span> <span class="line" data-startTime="886">And that leads me to the third </span><span class="line" data-startTime="886">type, which is AudioParam. </span></p>

<p><span class="line" data-startTime="889">The AudioParam is a really </span><span class="line" data-startTime="889">kind of complex type to </span><span class="line" data-startTime="893">understand at first. </span> <span class="line" data-startTime="895">But it ends up being super, </span><span class="line" data-startTime="895">super important. </span> <span class="line" data-startTime="897">So most of the values, the </span><span class="line" data-startTime="897">things you would think of as </span><span class="line" data-startTime="900">values in the Web Audio API, </span><span class="line" data-startTime="900">like the volume on a </span><span class="line" data-startTime="904">gain-controlling node, </span><span class="line" data-startTime="904">for example. </span> <span class="line" data-startTime="906">They're actually represented </span><span class="line" data-startTime="906">as AudioParams. </span> <span class="line" data-startTime="909">Now you can still get and set </span><span class="line" data-startTime="909">the values, the first thing in </span><span class="line" data-startTime="912">the interface declaration. </span> <span class="line" data-startTime="913">You can go in and grab the </span><span class="line" data-startTime="913">value out of there. </span> <span class="line" data-startTime="915">You can manipulate </span><span class="line" data-startTime="915">it, set it to </span><span class="line" data-startTime="918">something different, whatever. </span> <span class="line" data-startTime="919">And that's an easy </span><span class="line" data-startTime="919">way to use it. </span> <span class="line" data-startTime="921">And I do use it that </span><span class="line" data-startTime="921">way a lot. </span></p>

<p><span class="line" data-startTime="923">But at the same time you </span><span class="line" data-startTime="923">can also do things </span><span class="line" data-startTime="925">that schedule it. </span> <span class="line" data-startTime="926">So you can say, I want to set </span><span class="line" data-startTime="926">the value at a particular time </span><span class="line" data-startTime="929">in the future. </span> <span class="line" data-startTime="930">Or, my personal favorite, I want </span><span class="line" data-startTime="930">to ramp this over time. </span> <span class="line" data-startTime="934">I want to set the value to zero </span><span class="line" data-startTime="934">now, but I want to ramp </span><span class="line" data-startTime="936">it up to one over the course </span><span class="line" data-startTime="936">of the next couple seconds. </span> <span class="line" data-startTime="939">And we handle that for you </span><span class="line" data-startTime="939">under the covers in </span><span class="line" data-startTime="941">the Web Audio API. </span> <span class="line" data-startTime="943">So you get really, really </span><span class="line" data-startTime="943">smooth automation. </span> <span class="line" data-startTime="945">Because of course we can </span><span class="line" data-startTime="945">do that very fast. </span> <span class="line" data-startTime="947">And I will show several examples </span><span class="line" data-startTime="947">of how to do that. </span> <span class="line" data-startTime="951">So we covered the three </span><span class="line" data-startTime="951">infrastructure bits of </span><span class="line" data-startTime="955">context, nodes, and params. </span> <span class="line" data-startTime="957">Now I want to talk </span><span class="line" data-startTime="957">about sounds. </span></p>

<p><span class="line" data-startTime="959">And AudioBuffer is the </span><span class="line" data-startTime="959">first thing to talk </span><span class="line" data-startTime="962">about, audio buffers. </span> <span class="line" data-startTime="963">It represents a decoded </span><span class="line" data-startTime="963">buffer of sound. </span> <span class="line" data-startTime="969">So that means it's actually </span><span class="line" data-startTime="969">in memory. </span> <span class="line" data-startTime="971">And the bits are right there, </span><span class="line" data-startTime="971">lined up in a row for you. </span> <span class="line" data-startTime="975">You can actually access them </span><span class="line" data-startTime="975">in here as a float32array. </span> <span class="line" data-startTime="979">You can go directly twiddle, </span><span class="line" data-startTime="979">get, set, whatever you want to </span><span class="line" data-startTime="982">do with those bits. </span> <span class="line" data-startTime="984">You can, of course, also see the </span><span class="line" data-startTime="984">sample rate and how long </span><span class="line" data-startTime="987">the buffer is and that sort </span><span class="line" data-startTime="987">of thing, if you want. </span> <span class="line" data-startTime="990">But if you want to, you can </span><span class="line" data-startTime="990">access the data directly. </span> <span class="line" data-startTime="994">In fact, this set of code </span><span class="line" data-startTime="994">creates an audio buffer and </span><span class="line" data-startTime="999">gets the data, gets a pointer </span><span class="line" data-startTime="999">to the data, and then just </span><span class="line" data-startTime="1003">sets it to random numbers. </span></p>

<p><span class="line" data-startTime="1006">This sounds like a goofy </span><span class="line" data-startTime="1006">thing to do, but </span><span class="line" data-startTime="1009">actually this is how &mdash; </span><span class="line" data-startTime="1010">[STATIC] </span></p>

<p class="speaker"><span class="line" data-starttime="1012"><span class="speakerName">Chris Wilson</span>: This is how </span><span class="line" data-startTime="1012">you get white noise. </span> <span class="line" data-startTime="1014">You know, white noise is </span><span class="line" data-startTime="1014">actually musically useful in a </span><span class="line" data-startTime="1016">number of cases. </span> <span class="line" data-startTime="1017">Like the vocoder app uses white </span><span class="line" data-startTime="1017">noise in one place. </span> <span class="line" data-startTime="1023">So it's something that </span><span class="line" data-startTime="1023">you may want to do. </span> <span class="line" data-startTime="1025">Now, of course, you typically </span><span class="line" data-startTime="1025">aren't really going to want to </span><span class="line" data-startTime="1030">directly set these values. </span> <span class="line" data-startTime="1032">You're going to want to load </span><span class="line" data-startTime="1032">them from somewhere. </span> <span class="line" data-startTime="1035">So usually, you'll do </span><span class="line" data-startTime="1035">something like this. </span></p>

<p><span class="line" data-startTime="1038">This is using pretty standard </span><span class="line" data-startTime="1038">XMLHttpRequest code. </span> <span class="line" data-startTime="1042">I set up a new XHR request. </span> <span class="line" data-startTime="1047">I open it with a get. </span> <span class="line" data-startTime="1048">I point it to an mp3 </span><span class="line" data-startTime="1048">file, in this case. </span> <span class="line" data-startTime="1051">The only interesting bits here </span><span class="line" data-startTime="1051">are I set the response type to </span><span class="line" data-startTime="1054">arraybuffer. </span> <span class="line" data-startTime="1056">Because I want to get this back </span><span class="line" data-startTime="1056">as an array, not as a </span><span class="line" data-startTime="1059">bunch of plain text. </span> <span class="line" data-startTime="1059">It's an audio file. </span> <span class="line" data-startTime="1060">It's probably not &mdash; </span><span class="line" data-startTime="1061">plain text is not going to </span><span class="line" data-startTime="1061">be super interesting. </span> <span class="line" data-startTime="1064">And then when it loads, I </span><span class="line" data-startTime="1064">call the AudioContext's </span><span class="line" data-startTime="1068">decodeAudioData method. </span></p>

<p><span class="line" data-startTime="1070">And I give it that buffer that </span><span class="line" data-startTime="1070">I just got back from XHR. </span> <span class="line" data-startTime="1075">And when it asynchronously </span><span class="line" data-startTime="1075">completes, it passes me back a </span><span class="line" data-startTime="1080">buffer, an audio buffer, </span><span class="line" data-startTime="1080">that I can then do </span><span class="line" data-startTime="1082">whatever I want with. </span> <span class="line" data-startTime="1085">Now what, you might ask, do </span><span class="line" data-startTime="1085">I do with an audio buffer? </span><span class="line" data-startTime="1088">It's not a node, you might </span><span class="line" data-startTime="1088">notice if you go back to the </span><span class="line" data-startTime="1091">interface that we had </span><span class="line" data-startTime="1091">a minute ago. </span> <span class="line" data-startTime="1093">It doesn't derive from node. </span> <span class="line" data-startTime="1096">It's an object in </span><span class="line" data-startTime="1096">its own right. </span> <span class="line" data-startTime="1098">So what you do is you use an </span><span class="line" data-startTime="1098">AudioBufferSourceNode. </span> <span class="line" data-startTime="1103">An AudioBufferSourceNode is a </span><span class="line" data-startTime="1103">node that we wrap around &mdash; </span><span class="line" data-startTime="1106">or actually, we point </span><span class="line" data-startTime="1106">to an audio buffer. </span></p>

<p><span class="line" data-startTime="1110">And it's really important to </span><span class="line" data-startTime="1110">understand this is a one shot </span><span class="line" data-startTime="1113">playback node. </span> <span class="line" data-startTime="1115">AudioBufferSourceNode can </span><span class="line" data-startTime="1115">only be played once. </span> <span class="line" data-startTime="1118">This is really, really super </span><span class="line" data-startTime="1118">important, which is why I say </span><span class="line" data-startTime="1120">it multiple times during </span><span class="line" data-startTime="1120">this slide. </span> <span class="line" data-startTime="1122">Once you've played the </span><span class="line" data-startTime="1122">AudioBufferSourceNode once, </span><span class="line" data-startTime="1125">you have to throw it away. </span> <span class="line" data-startTime="1127">You don't have to throw </span><span class="line" data-startTime="1127">away the buffer. </span> <span class="line" data-startTime="1129">The buffer you can keep </span><span class="line" data-startTime="1129">around and use as many </span><span class="line" data-startTime="1131">times as you want. </span> <span class="line" data-startTime="1132">In fact, you can share </span><span class="line" data-startTime="1132">it with multiple </span><span class="line" data-startTime="1134">AudioBufferSourceNodes Buffer </span><span class="line" data-startTime="1134">Source that are </span><span class="line" data-startTime="1136">playing at the same time. </span> <span class="line" data-startTime="1138">When I hit the fire button </span><span class="line" data-startTime="1138">repeatedly earlier, I only had </span><span class="line" data-startTime="1140">one copy of that sound buffer. </span></p>

<p><span class="line" data-startTime="1143">I just had multiple buffer </span><span class="line" data-startTime="1143">source nodes that pointed to </span><span class="line" data-startTime="1145">it and were playing </span><span class="line" data-startTime="1145">at the same time. </span> <span class="line" data-startTime="1148">So buffer source node, the type </span><span class="line" data-startTime="1148">points to the buffer that </span><span class="line" data-startTime="1152">it's playing. </span> <span class="line" data-startTime="1153">It also lets you change </span><span class="line" data-startTime="1153">the playback rate. </span> <span class="line" data-startTime="1155">So you can make it playback </span><span class="line" data-startTime="1155">faster or slower. </span> <span class="line" data-startTime="1158">Meaning you can increase </span><span class="line" data-startTime="1158">or decrease the pitch. </span> <span class="line" data-startTime="1161">You can loop it. </span> <span class="line" data-startTime="1162">You can tell it when </span><span class="line" data-startTime="1162">to start playing. </span> <span class="line" data-startTime="1164">And you can tell when </span><span class="line" data-startTime="1164">to stop playing. </span> <span class="line" data-startTime="1167">So let's look at how we use </span><span class="line" data-startTime="1167">these two together. </span></p>

<p><span class="line" data-startTime="1172">So the top part of this code </span><span class="line" data-startTime="1172">sample is the code you just </span><span class="line" data-startTime="1175">saw to do an XMLHttpRequest, </span><span class="line" data-startTime="1175">get the data back, call the </span><span class="line" data-startTime="1180">code audio data, and </span><span class="line" data-startTime="1180">get a buffer. </span> <span class="line" data-startTime="1183">And the only difference is once </span><span class="line" data-startTime="1183">I've gotten the buffer, I </span><span class="line" data-startTime="1185">call this method bark(). </span> <span class="line" data-startTime="1187">And bark() creates a buffer </span><span class="line" data-startTime="1187">source node, points the buffer </span><span class="line" data-startTime="1191">for the buffer source node to </span><span class="line" data-startTime="1191">what we just loaded, connects </span><span class="line" data-startTime="1195">it to the speaker &mdash; </span><span class="line" data-startTime="1196">because remember, we have to </span><span class="line" data-startTime="1196">connect everything to the </span><span class="line" data-startTime="1198">speakers or we don't </span><span class="line" data-startTime="1198">hear anything &mdash; </span><span class="line" data-startTime="1200">and then calls noteOn </span><span class="line" data-startTime="1200">to start it. </span> <span class="line" data-startTime="1202">And I can &mdash; </span><span class="line" data-startTime="1204">[BARK] </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1205"><span class="speakerName">Chris Wilson</span>:  &mdash; make it bark. </span><span class="line" data-startTime="1206">There's "Hello, World," </span><span class="line" data-startTime="1206">right there. </span><span class="line" data-startTime="1208">"Hello, dog," I don't </span><span class="line" data-startTime="1208">know, whatever. </span><span class="line" data-startTime="1210">Now if this were my </span><span class="line" data-startTime="1210">dog, on the other </span><span class="line" data-startTime="1212">hand, it would be loop. </span><span class="line" data-startTime="1214">Because she barks &mdash; </span><span class="line" data-startTime="1215">[REPEATED BARKING] </span></p>

<p class="speaker"><span class="line" data-starttime="1217"><span class="speakerName">Chris Wilson</span>: A lot. </span> <span class="line" data-startTime="1218">I didn't actually want to </span><span class="line" data-startTime="1218">run this for 10 minutes. </span> <span class="line" data-startTime="1221">But she does back about that </span><span class="line" data-startTime="1221">long, most of the time. </span> <span class="line" data-startTime="1224">Now, there are a couple things </span><span class="line" data-startTime="1224">that I want to point out here. </span> <span class="line" data-startTime="1227">One thing that I should have </span><span class="line" data-startTime="1227">mentioned before, when I was </span><span class="line" data-startTime="1230">talking about writing values </span><span class="line" data-startTime="1230">in, is the sound values are </span><span class="line" data-startTime="1233">actually floating-point </span><span class="line" data-startTime="1233">numbers. </span> <span class="line" data-startTime="1235">It's negative one to one is </span><span class="line" data-startTime="1235">the range that we have. </span> <span class="line" data-startTime="1240">But it's floating point. </span> <span class="line" data-startTime="1241">It's not 16-bit integers, it's </span><span class="line" data-startTime="1241">not 24-bit integers, or 32-bit </span><span class="line" data-startTime="1245">integers, which if you were </span><span class="line" data-startTime="1245">heavy into digital sound in </span><span class="line" data-startTime="1249">the past, you might </span><span class="line" data-startTime="1249">have expected. </span></p>

<p><span class="line" data-startTime="1251">The reason is that gives us </span><span class="line" data-startTime="1251">a lot of play in where the </span><span class="line" data-startTime="1255">dynamic range gets applied. </span> <span class="line" data-startTime="1257">So we still have a lot </span><span class="line" data-startTime="1257">of dynamic range. </span> <span class="line" data-startTime="1259">We're not wasting the </span><span class="line" data-startTime="1259">dynamic range. </span> <span class="line" data-startTime="1261">But it helps us to </span><span class="line" data-startTime="1261">avoid clipping. </span> <span class="line" data-startTime="1264">The second thing here </span><span class="line" data-startTime="1264">is I've been passing </span><span class="line" data-startTime="1267">these time values around. </span> <span class="line" data-startTime="1269">Like here I call </span><span class="line" data-startTime="1269">audioContext.currentTime plus 600. </span> <span class="line" data-startTime="1275">So time, in the Web Audio API, </span><span class="line" data-startTime="1275">is an interesting beast </span><span class="line" data-startTime="1280">because it's in seconds. </span> <span class="line" data-startTime="1282">It's not in milliseconds. </span> <span class="line" data-startTime="1284">But it's a floating-point </span><span class="line" data-startTime="1284">number. </span> <span class="line" data-startTime="1286">And this is really why we used </span><span class="line" data-startTime="1286">milliseconds for a long time. </span> <span class="line" data-startTime="1289">I imagine that very few of you </span><span class="line" data-startTime="1289">in the room have not used </span><span class="line" data-startTime="1293">setTimeout at one point or </span><span class="line" data-startTime="1293">another in web programming. </span> <span class="line" data-startTime="1297">SetTimeout takes values </span><span class="line" data-startTime="1297">in milliseconds. </span></p>

<p><span class="line" data-startTime="1299">The problem with this is a </span><span class="line" data-startTime="1299">millisecond is actually a </span><span class="line" data-startTime="1302">really long time when </span><span class="line" data-startTime="1302">you're looking at </span><span class="line" data-startTime="1304">each sample of audio. </span> <span class="line" data-startTime="1306">Right? </span><span class="line" data-startTime="1306">In one millisecond, on a </span><span class="line" data-startTime="1306">CD-quality audio, that's 44 </span><span class="line" data-startTime="1311">and a tenth samples. </span> <span class="line" data-startTime="1313">You're not very precise </span><span class="line" data-startTime="1313">in that case. </span> <span class="line" data-startTime="1315">So we needed something more </span><span class="line" data-startTime="1315">precise and went with seconds </span><span class="line" data-startTime="1318">not milliseconds. </span> <span class="line" data-startTime="1320">Secondly, you want to </span><span class="line" data-startTime="1320">grab this from the </span><span class="line" data-startTime="1324">audioContext.currentTime. </span> <span class="line" data-startTime="1327">You don't grab it </span><span class="line" data-startTime="1327">from time.now or </span><span class="line" data-startTime="1329">something like that. </span></p>

<p><span class="line" data-startTime="1330">It's not the Unix Epoch clock. </span> <span class="line" data-startTime="1332">It actually starts at zero when </span><span class="line" data-startTime="1332">the context is created. </span> <span class="line" data-startTime="1335">That's not a super useful point </span><span class="line" data-startTime="1335">in time, it's more a </span><span class="line" data-startTime="1339">relative unit than an absolute </span><span class="line" data-startTime="1339">unit, in that sense. </span> <span class="line" data-startTime="1343">But finally, and also critically </span><span class="line" data-startTime="1343">important, you kind </span><span class="line" data-startTime="1347">of have to be careful. </span> <span class="line" data-startTime="1348">Because this is a </span><span class="line" data-startTime="1348">different clock. </span> <span class="line" data-startTime="1351">It literally may have a </span><span class="line" data-startTime="1351">different clock crystal that </span><span class="line" data-startTime="1354">it's running off of. </span> <span class="line" data-startTime="1355">Because audio hardware systems </span><span class="line" data-startTime="1355">frequently have a separate </span><span class="line" data-startTime="1358">crystal that keeps the </span><span class="line" data-startTime="1358">audio very stable. </span> <span class="line" data-startTime="1362">And the CPU may spin its </span><span class="line" data-startTime="1362">crystal up or down or </span><span class="line" data-startTime="1364">something like that for power </span><span class="line" data-startTime="1364">management reasons. </span> <span class="line" data-startTime="1369">So by now, we're, I don't know, </span><span class="line" data-startTime="1369">a little under halfway </span><span class="line" data-startTime="1374">through, and you're thinking, </span><span class="line" data-startTime="1374">that's great. </span> <span class="line" data-startTime="1377">You dumped a bunch of types on </span><span class="line" data-startTime="1377">me, a whole bunch of code, and </span><span class="line" data-startTime="1380">fundamentally all you did </span><span class="line" data-startTime="1380">was make a dog bark. </span></p>

<p><span class="line" data-startTime="1383">And I can loop that in the </span><span class="line" data-startTime="1383">HTML5 audio tag, too. </span> <span class="line" data-startTime="1386">So what have you shown me that's </span><span class="line" data-startTime="1386">really interesting? </span><span class="line" data-startTime="1389">Well, first and foremost, you </span><span class="line" data-startTime="1389">don't usually do code the way </span><span class="line" data-startTime="1393">that I did it there. </span> <span class="line" data-startTime="1394">Most particularly, you don't </span><span class="line" data-startTime="1394">usually immediately play the </span><span class="line" data-startTime="1398">sound buffer when you've loaded </span><span class="line" data-startTime="1398">it with web audio. </span> <span class="line" data-startTime="1401">It's called a buffer </span><span class="line" data-startTime="1401">for a reason. </span> <span class="line" data-startTime="1402">You want to keep it around </span><span class="line" data-startTime="1402">for a while. </span></p>

<p><span class="line" data-startTime="1404">In fact, I use about a dozen </span><span class="line" data-startTime="1404">sound samples during the </span><span class="line" data-startTime="1408">course of this talk. </span> <span class="line" data-startTime="1410">And I've loaded all of them. </span> <span class="line" data-startTime="1411">I loaded them all when the page </span><span class="line" data-startTime="1411">loaded the first time. </span> <span class="line" data-startTime="1413">And I just hang on </span><span class="line" data-startTime="1413">to the buffer. </span> <span class="line" data-startTime="1415">And I use them whenever </span><span class="line" data-startTime="1415">I want. </span> <span class="line" data-startTime="1416">So there are a couple samples </span><span class="line" data-startTime="1416">that I use repeatedly. </span> <span class="line" data-startTime="1420">They're already in memory. </span> <span class="line" data-startTime="1422">I don't need to worry about, </span><span class="line" data-startTime="1422">Are they still there? </span><span class="line" data-startTime="1424">Do I load them again? </span><span class="line" data-startTime="1425">Are they going to get </span><span class="line" data-startTime="1425">cached or not? </span><span class="line" data-startTime="1428">Now, there is, of course, </span><span class="line" data-startTime="1428">one other </span><span class="line" data-startTime="1432">critical difference here. </span> <span class="line" data-startTime="1434">Which is the Web Audio API has </span><span class="line" data-startTime="1434">a lot of audio nodes for </span><span class="line" data-startTime="1437">processing. </span> <span class="line" data-startTime="1438">We can do a lot of interesting </span><span class="line" data-startTime="1438">things with the audio, once </span><span class="line" data-startTime="1442">we've started playing. </span> <span class="line" data-startTime="1443">I just wanted to get </span><span class="line" data-startTime="1443">out of the way, </span><span class="line" data-startTime="1446">how do you play something. </span></p>

<p><span class="line" data-startTime="1447">Because it's actually </span><span class="line" data-startTime="1447">relatively easy. </span> <span class="line" data-startTime="1449">And by the way, if you want to </span><span class="line" data-startTime="1449">use the HTML5 audio, as I did </span><span class="line" data-startTime="1453">mention before, HTML5 audio </span><span class="line" data-startTime="1453">supports streaming. </span> <span class="line" data-startTime="1457">And streaming is a critically </span><span class="line" data-startTime="1457">important thing to do for some </span><span class="line" data-startTime="1460">types of audio. </span> <span class="line" data-startTime="1461">If you want to play background </span><span class="line" data-startTime="1461">music for a game, for example, </span><span class="line" data-startTime="1464">you may not want to load </span><span class="line" data-startTime="1464">all of that into </span><span class="line" data-startTime="1466">an in-memory buffer. </span> <span class="line" data-startTime="1467">So here, you can take an HTML5 </span><span class="line" data-startTime="1467">audio element and grab its </span><span class="line" data-startTime="1472">audio output by calling </span><span class="line" data-startTime="1472">audioContext.cre </span><span class="line" data-startTime="1474">ateMediaElementSource, handing </span><span class="line" data-startTime="1474">it the HTML5 audio or video </span><span class="line" data-startTime="1479">element, and it grabs the sound </span><span class="line" data-startTime="1479">output from that tag, </span><span class="line" data-startTime="1483">from that element. </span> <span class="line" data-startTime="1484">And then you can connect it </span><span class="line" data-startTime="1484">to wherever you want. </span></p>

<p><span class="line" data-startTime="1486">You can connect it to the </span><span class="line" data-startTime="1486">effects pipeline. </span> <span class="line" data-startTime="1488">You can route it. </span> <span class="line" data-startTime="1489">You can change its gain, </span><span class="line" data-startTime="1489">all kinds of things. </span> <span class="line" data-startTime="1492">So it does integrate very </span><span class="line" data-startTime="1492">well into the Web </span><span class="line" data-startTime="1494">Audio API as well. </span> <span class="line" data-startTime="1498">So I want to walk through each </span><span class="line" data-startTime="1498">of the types of processing </span><span class="line" data-startTime="1501">nodes, and what they can do, </span><span class="line" data-startTime="1501">and how to use them. </span> <span class="line" data-startTime="1504">The first one, and kind of the </span><span class="line" data-startTime="1504">easiest one to knock out </span><span class="line" data-startTime="1508">first, I guess, is </span><span class="line" data-startTime="1508">the gain node. </span> <span class="line" data-startTime="1510">And gain node is pretty </span><span class="line" data-startTime="1510">straightforward. </span> <span class="line" data-startTime="1512">It lets you control the </span><span class="line" data-startTime="1512">gain, AKA volume. </span> <span class="line" data-startTime="1515">And I'll just drop a sound file </span><span class="line" data-startTime="1515">in, drop a gain node in, </span><span class="line" data-startTime="1523">connect the sound file to the </span><span class="line" data-startTime="1523">gain node, the speakers. </span> <span class="line" data-startTime="1528">Let's choose a different </span><span class="line" data-startTime="1528">sound here. </span></p>

<p><span class="line" data-startTime="1532">[MUSIC PLAYING] </span></p>

<p class="speaker"><span class="line" data-starttime="1534"><span class="speakerName">Chris Wilson</span>: OK. </span><span class="line" data-startTime="1534">So I've done my sound playing. </span><span class="line" data-startTime="1537">And now I can change </span><span class="line" data-startTime="1537">the gain value. </span><span class="line" data-startTime="1538">[MUSIC FADES OUT] </span></p>

<p class="speaker"><span class="line" data-starttime="1540"><span class="speakerName">Chris Wilson</span>: And it </span><span class="line" data-startTime="1540">makes it quieter. </span><span class="line" data-startTime="1541">[MUSIC FADES IN] </span></p>

<p class="speaker"><span class="line" data-starttime="1543"><span class="speakerName">Chris Wilson</span>: Or makes </span><span class="line" data-startTime="1543">it a lot louder. </span> <span class="line" data-startTime="1546">Pretty straightforward, </span><span class="line" data-startTime="1546">pretty easy. </span> <span class="line" data-startTime="1550">However, it's important to </span><span class="line" data-startTime="1550">understand gain nodes are </span><span class="line" data-startTime="1553">fantastically useful and really, </span><span class="line" data-startTime="1553">really important. </span> <span class="line" data-startTime="1556">Because this is how you create </span><span class="line" data-startTime="1556">a lot of the points in the </span><span class="line" data-startTime="1559">routing graph. </span> <span class="line" data-startTime="1560">This is how you create things </span><span class="line" data-startTime="1560">like sub-mixes. </span> <span class="line" data-startTime="1563">If you are implementing a game </span><span class="line" data-startTime="1563">sound manager, for example, </span><span class="line" data-startTime="1566">and you're creating a bunch of </span><span class="line" data-startTime="1566">effect sounds, like guns </span><span class="line" data-startTime="1570">firing, or whatever, that </span><span class="line" data-startTime="1570">probably all gets connected to </span><span class="line" data-startTime="1573">a single gain node </span><span class="line" data-startTime="1573">that lets you </span><span class="line" data-startTime="1575">control the effects volume. </span> <span class="line" data-startTime="1576">And then you have a different </span><span class="line" data-startTime="1576">gain node that lets you </span><span class="line" data-startTime="1578">control the music volume. </span> <span class="line" data-startTime="1579">And maybe you have a master </span><span class="line" data-startTime="1579">volume that they </span><span class="line" data-startTime="1581">both connect to. </span></p>

<p><span class="line" data-startTime="1582">But all of these </span><span class="line" data-startTime="1582">routing points, </span><span class="line" data-startTime="1584">frequently, are gain nodes. </span> <span class="line" data-startTime="1585">Because they're an easy </span><span class="line" data-startTime="1585">thing to hang off of. </span> <span class="line" data-startTime="1590">I should also mention, by the </span><span class="line" data-startTime="1590">way, implicitly you can make </span><span class="line" data-startTime="1594">more than one connection at </span><span class="line" data-startTime="1594">any node connection point. </span> <span class="line" data-startTime="1597">If you connect multiple nodes to </span><span class="line" data-startTime="1597">one destination, they just </span><span class="line" data-startTime="1601">automatically mix together. </span> <span class="line" data-startTime="1603">So if I have my dog barking &mdash; </span><span class="line" data-startTime="1605">[BARK] </span><span class="line" data-startTime="1606">CHRIS </span></p>

<p class="speaker"><span class="line" data-starttime="1606"><span class="speakerName">Chris Wilson</span>:  &mdash; my cat [MEOW] </span></p>

<p class="speaker"><span class="line" data-starttime="1608"><span class="speakerName">Chris Wilson</span>:  &mdash; and I just </span><span class="line" data-startTime="1608">connect them both to the same </span><span class="line" data-startTime="1610">destination down below, </span><span class="line" data-startTime="1610">and call noteOn </span><span class="line" data-startTime="1612">on at the same time &mdash; </span><span class="line" data-startTime="1613">[SIMULTANEOUS BARK AND MEOW] </span></p>

<p class="speaker"><span class="line" data-starttime="1614"><span class="speakerName">Chris Wilson</span>: You get </span><span class="line" data-startTime="1614">them both together. </span> <span class="line" data-startTime="1615">It just mixes them together. </span> <span class="line" data-startTime="1617">And, of course, if I connected </span><span class="line" data-startTime="1617">one node to multiple </span><span class="line" data-startTime="1621">destination nodes, </span><span class="line" data-startTime="1621">that also works. </span> <span class="line" data-startTime="1623">It just automatically </span><span class="line" data-startTime="1623">fans out. </span> <span class="line" data-startTime="1625">In fact, my vocoder app in the </span><span class="line" data-startTime="1625">beginning, I mentioned at one </span><span class="line" data-startTime="1628">point it's a 28-band vocoder. </span> <span class="line" data-startTime="1631">That means one of the nodes fans </span><span class="line" data-startTime="1631">out to 28 other nodes. </span> <span class="line" data-startTime="1636">And then at the other end, 28 </span><span class="line" data-startTime="1636">nodes all have to mix back </span><span class="line" data-startTime="1640">down together into one node. </span> <span class="line" data-startTime="1642">And I just do that by </span><span class="line" data-startTime="1642">connecting them. </span> <span class="line" data-startTime="1643">I didn't have to do anything </span><span class="line" data-startTime="1643">special or come up with a </span><span class="line" data-startTime="1645">special node to do that. </span> <span class="line" data-startTime="1648">Now, I also want to point out &mdash; </span><span class="line" data-startTime="1648">remember I said that all </span><span class="line" data-startTime="1655">the things that you would think </span><span class="line" data-startTime="1655">of like parameters, like </span><span class="line" data-startTime="1658">gain on a gain node, are </span><span class="line" data-startTime="1658">actually AudioParams. </span></p>

<p><span class="line" data-startTime="1661">This lets you do automation. </span> <span class="line" data-startTime="1664">So I can do things like </span><span class="line" data-startTime="1664">this automated fade </span><span class="line" data-startTime="1666">that I played earlier. </span> <span class="line" data-startTime="1667">[MUSIC FADES IN AND OUT] </span></p>

<p class="speaker"><span class="line" data-starttime="1669"><span class="speakerName">Chris Wilson</span>: I should </span><span class="line" data-startTime="1669">have played earlier. </span><span class="line" data-startTime="1671">And it fades it in, </span><span class="line" data-startTime="1671">and fades it out. </span><span class="line" data-startTime="1673">And I did this simply by saying, </span><span class="line" data-startTime="1673">I want to start by </span><span class="line" data-startTime="1677">creating a gain node, inserting </span><span class="line" data-startTime="1677">it into the path, </span><span class="line" data-startTime="1680">and then, right now, set </span><span class="line" data-startTime="1680">the value to zero. </span><span class="line" data-startTime="1683">In two seconds, I want you </span><span class="line" data-startTime="1683">to have ramped up to 1.0. </span><span class="line" data-startTime="1687">And four seconds from now, I </span><span class="line" data-startTime="1687">want you to have ramped back </span><span class="line" data-startTime="1691">down to zero. </span><span class="line" data-startTime="1693">These are really </span><span class="line" data-startTime="1693">easy to set up. </span><span class="line" data-startTime="1695">And as I said, they happen </span><span class="line" data-startTime="1695">very, very smoothly. </span><span class="line" data-startTime="1698">Because we handle them under </span><span class="line" data-startTime="1698">the covers a very high time </span><span class="line" data-startTime="1701">resolution. </span><span class="line" data-startTime="1705">Now my next node type &mdash; </span><span class="line" data-startTime="1707">it's also relatively basic &mdash; </span><span class="line" data-startTime="1709">is a delay node. </span><span class="line" data-startTime="1712">Now, it's pretty obvious </span><span class="line" data-startTime="1712">what a delay node does. </span><span class="line" data-startTime="1716">It delays the audio </span><span class="line" data-startTime="1716">sent through it. </span><span class="line" data-startTime="1719">So I'm going to create a delay </span><span class="line" data-startTime="1719">node and hook it up. </span><span class="line" data-startTime="1729">And I'll hit play &mdash; </span><span class="line" data-startTime="1730">[BELL DINGS] </span></p>

<p class="speaker"><span class="line" data-starttime="1732"><span class="speakerName">Chris Wilson</span>:  &mdash; and the </span><span class="line" data-startTime="1732">interesting thing is you </span><span class="line" data-startTime="1734">probably didn't notice </span><span class="line" data-startTime="1734">anything different. </span> <span class="line" data-startTime="1735">Well, it's because what </span><span class="line" data-startTime="1735">goes through the </span><span class="line" data-startTime="1737">node is entirely delayed. </span> <span class="line" data-startTime="1740">So it's not mixing it </span><span class="line" data-startTime="1740">back together with </span><span class="line" data-startTime="1742">the original sound. </span> <span class="line" data-startTime="1744">It's only delaying all the </span><span class="line" data-startTime="1744">audio going through it. </span> <span class="line" data-startTime="1746">So there was an extra 0.2 </span><span class="line" data-startTime="1746">seconds from when I hit the </span><span class="line" data-startTime="1749">button to when it played. </span> <span class="line" data-startTime="1751">But of course that's not </span><span class="line" data-startTime="1751">really noticeable. </span> <span class="line" data-startTime="1753">Now, if I wanted to, to sound </span><span class="line" data-startTime="1753">like an echo, then I can </span><span class="line" data-startTime="1757">connect the original source </span><span class="line" data-startTime="1757">straight to the speaker </span><span class="line" data-startTime="1760">destination, too, and </span><span class="line" data-startTime="1760">play it again. </span> <span class="line" data-startTime="1764">And now you get the </span><span class="line" data-startTime="1764">echo effect. </span> <span class="line" data-startTime="1767">Now if you really want what you </span><span class="line" data-startTime="1767">classically think of as a </span><span class="line" data-startTime="1770">fading feedback echo digital </span><span class="line" data-startTime="1770">delay, you want to </span><span class="line" data-startTime="1774">add a gain node in. </span> <span class="line" data-startTime="1779">Let's move it where we </span><span class="line" data-startTime="1779">can actually see </span><span class="line" data-startTime="1780">where the routing goes. </span></p>

<p><span class="line" data-startTime="1782">And you want to put a cycle </span><span class="line" data-startTime="1782">through this delay. </span> <span class="line" data-startTime="1784">So the output of the delay </span><span class="line" data-startTime="1784">goes into the gain node. </span> <span class="line" data-startTime="1788">And the gain node goes </span><span class="line" data-startTime="1788">back into the delay. </span> <span class="line" data-startTime="1791">And a critically important </span><span class="line" data-startTime="1791">piece is set the </span><span class="line" data-startTime="1793">gain less than one. </span> <span class="line" data-startTime="1795">And now when I play it, it's </span><span class="line" data-startTime="1795">gonna cycle through this </span><span class="line" data-startTime="1798">delay-gain, delay-gain, </span><span class="line" data-startTime="1798">delay-gain, until the sound </span><span class="line" data-startTime="1801">just dies back down to zero. </span> <span class="line" data-startTime="1804">So you can hear how I can </span><span class="line" data-startTime="1804">build a digital delay. </span> <span class="line" data-startTime="1808">In fact, for any studio </span><span class="line" data-startTime="1808">engineer types in the </span><span class="line" data-startTime="1812">audience, if you want to build </span><span class="line" data-startTime="1812">multi-tap delays, you just </span><span class="line" data-startTime="1815">stack a few delay nodes </span><span class="line" data-startTime="1815">in parallel. </span></p>

<p><span class="line" data-startTime="1817">If you want to do things like </span><span class="line" data-startTime="1817">multi-channel effects like </span><span class="line" data-startTime="1820">ping-pong delay, I'll actually </span><span class="line" data-startTime="1820">get into that later. </span> <span class="line" data-startTime="1823">They're really easy to do. </span> <span class="line" data-startTime="1824">Because you have the basic </span><span class="line" data-startTime="1824">tool kit for doing delay. </span> <span class="line" data-startTime="1828">And all you have to </span><span class="line" data-startTime="1828">do is route it in </span><span class="line" data-startTime="1830">an interesting way. </span> <span class="line" data-startTime="1835">Now another amazing thing is </span><span class="line" data-startTime="1835">that delay time is actually an </span><span class="line" data-startTime="1840">audio param. </span> <span class="line" data-startTime="1841">That means you can schedule </span><span class="line" data-startTime="1841">changes to it. </span> <span class="line" data-startTime="1843">You can make changes to it live </span><span class="line" data-startTime="1843">and things will happen. </span> <span class="line" data-startTime="1847">So if I wanted to do code like </span><span class="line" data-startTime="1847">this, I can actually increase </span><span class="line" data-startTime="1851">the delay time over time. </span> <span class="line" data-startTime="1853">And it automatically </span><span class="line" data-startTime="1853">makes it happen. </span> <span class="line" data-startTime="1856">So &mdash; </span><span class="line" data-startTime="1857">PLAYBACK: [ECHOING] </span><span class="line" data-startTime="1857">Hello. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1862"><span class="speakerName">Chris Wilson</span>: OK. </span><span class="line" data-startTime="1862">That one didn't sound right. </span><span class="line" data-startTime="1864">I'm gonna restart this. </span><span class="line" data-startTime="1867">For some reason, this </span><span class="line" data-startTime="1867">demo occasionally </span><span class="line" data-startTime="1869">decides to be finicky. </span><span class="line" data-startTime="1872">So I'm gonna try </span><span class="line" data-startTime="1872">that one again. </span><span class="line" data-startTime="1877">PLAYBACK: [ECHOING] </span><span class="line" data-startTime="1877">Hello. </span></p>

<p class="speaker"><span class="line" data-starttime="1881"><span class="speakerName">Chris Wilson</span>: There we go. </span> <span class="line" data-startTime="1883">Kind of a subtle effect. </span> <span class="line" data-startTime="1884">But it's basically increasing </span><span class="line" data-startTime="1884">the delay time over time. </span> <span class="line" data-startTime="1889">I mentioned before, you can also </span><span class="line" data-startTime="1889">connect audio nodes into </span><span class="line" data-startTime="1893">AudioParams, like take the </span><span class="line" data-startTime="1893">output of an audio feed and </span><span class="line" data-startTime="1898">pump it straight in as a </span><span class="line" data-startTime="1898">parameter controller. </span> <span class="line" data-startTime="1900">This is how you do effects like </span><span class="line" data-startTime="1900">flanging and chorusing, </span><span class="line" data-startTime="1903">which basically just have an </span><span class="line" data-startTime="1903">oscillator modulating the </span><span class="line" data-startTime="1906">display time. </span> <span class="line" data-startTime="1908">I'll have a demo about that </span><span class="line" data-startTime="1908">up on the net later. </span> <span class="line" data-startTime="1911">I didn't put it in here because </span><span class="line" data-startTime="1911">it's kind of hard to </span><span class="line" data-startTime="1913">walk through the code for it. </span> <span class="line" data-startTime="1918">Now is the time, actually, in </span><span class="line" data-startTime="1918">this talk, to introduce a </span><span class="line" data-startTime="1921">really, really good </span><span class="line" data-startTime="1921">friend of mine &mdash; </span><span class="line" data-startTime="1923">the RealtimeAnalyserNode. </span> <span class="line" data-startTime="1925">And I say a really, really good </span><span class="line" data-startTime="1925">friend of mine because I </span><span class="line" data-startTime="1927">used these constantly while </span><span class="line" data-startTime="1927">I was debugging my vocoder </span><span class="line" data-startTime="1931">application to figure out </span><span class="line" data-startTime="1931">what was going on </span><span class="line" data-startTime="1934">in the sound feed. </span></p>

<p><span class="line" data-startTime="1936">Because it turns out, you really </span><span class="line" data-startTime="1936">cannot debug an audio </span><span class="line" data-startTime="1939">application by using </span><span class="line" data-startTime="1939">console.log to </span><span class="line" data-startTime="1941">spit out sound values. </span> <span class="line" data-startTime="1943">It just doesn't work. </span> <span class="line" data-startTime="1944">Like you have 44,000 values blow </span><span class="line" data-startTime="1944">past in a second, you're </span><span class="line" data-startTime="1949">not going to recognize the </span><span class="line" data-startTime="1949">pattern and say, Oh yeah, </span><span class="line" data-startTime="1951">that's a sine wave. </span> <span class="line" data-startTime="1953">So the RealtimeAnalyserNode </span><span class="line" data-startTime="1953">is what lets </span><span class="line" data-startTime="1957">you visualize things. </span> <span class="line" data-startTime="1959">Like this. </span> <span class="line" data-startTime="1960">So all that this does &mdash; </span><span class="line" data-startTime="1962">you can set this up and tell </span><span class="line" data-startTime="1962">it, I want to get an array </span><span class="line" data-startTime="1967">that represents the frequency </span><span class="line" data-startTime="1967">band energy. </span></p>

<p><span class="line" data-startTime="1969">And you can tell it how </span><span class="line" data-startTime="1969">detailed you want </span><span class="line" data-startTime="1971">that array to be. </span> <span class="line" data-startTime="1973">Or you can say, I want kind </span><span class="line" data-startTime="1973">of a chunk of the </span><span class="line" data-startTime="1976">waveform, as well. </span> <span class="line" data-startTime="1977">We use the same node to give </span><span class="line" data-startTime="1977">you both of those features. </span> <span class="line" data-startTime="1981">The frequency data you can ask </span><span class="line" data-startTime="1981">for as a Unit8 or as a float. </span> <span class="line" data-startTime="1983">It's kind of totally up to </span><span class="line" data-startTime="1983">you in your coding how </span><span class="line" data-startTime="1986">you want to do it. </span> <span class="line" data-startTime="1988">So let's see how we </span><span class="line" data-startTime="1988">actually do this. </span> <span class="line" data-startTime="1993">So here's how you use it. </span> <span class="line" data-startTime="1994">The frequency buckets, by the </span><span class="line" data-startTime="1994">way, are split up linearly </span><span class="line" data-startTime="1997">across zero to the NyQuist </span><span class="line" data-startTime="1997">frequency, which is half of </span><span class="line" data-startTime="2001">the AudioContext's </span><span class="line" data-startTime="2001">sample rate. </span> <span class="line" data-startTime="2004">So if you say you want 1,024 </span><span class="line" data-startTime="2004">buckets, then it's going to </span><span class="line" data-startTime="2008">chop that up evenly </span><span class="line" data-startTime="2008">across zero to </span><span class="line" data-startTime="2011">probably 22.05 kilohertz. </span> <span class="line" data-startTime="2015">And then, at some point in time, </span><span class="line" data-startTime="2015">what you do is you go to </span><span class="line" data-startTime="2019">your analyser. </span> <span class="line" data-startTime="2020">And you pass it an array </span><span class="line" data-startTime="2020">that you've created. </span></p>

<p><span class="line" data-startTime="2022">And you say, Give me the bite </span><span class="line" data-startTime="2022">frequency count data here. </span> <span class="line" data-startTime="2026">And it performs the frequency </span><span class="line" data-startTime="2026">analysis of the current sound </span><span class="line" data-startTime="2029">and passes it back to you. </span> <span class="line" data-startTime="2032">And then of course you just go </span><span class="line" data-startTime="2032">in a loop through that array. </span> <span class="line" data-startTime="2035">Do whatever you want to make </span><span class="line" data-startTime="2035">something interesting </span><span class="line" data-startTime="2038">visually, or do interesting </span><span class="line" data-startTime="2038">analysis, or </span><span class="line" data-startTime="2041">whatever you want. </span> <span class="line" data-startTime="2043">In the case of this visualizer, </span><span class="line" data-startTime="2043">all I did was I </span><span class="line" data-startTime="2047">walked through that array </span><span class="line" data-startTime="2047">and drew little </span><span class="line" data-startTime="2048">boxes on the screen. </span> <span class="line" data-startTime="2051">But, of course, if you do that </span><span class="line" data-startTime="2051">on a RequestAnimationFrame </span><span class="line" data-startTime="2054">timer, then it happens at the </span><span class="line" data-startTime="2054">refresh rate of your monitor </span><span class="line" data-startTime="2057">or whatever. </span></p>

<p><span class="line" data-startTime="2058">And you can do something </span><span class="line" data-startTime="2058">that looks very live. </span> <span class="line" data-startTime="2061">Right. </span> <span class="line" data-startTime="2061">You're doing it constantly. </span> <span class="line" data-startTime="2063">You're getting lots </span><span class="line" data-startTime="2063">of analysis. </span> <span class="line" data-startTime="2065">Please, by the way, don't use </span><span class="line" data-startTime="2065">setTimeout to do this. </span> <span class="line" data-startTime="2067">SetTimeout's not a great way </span><span class="line" data-startTime="2067">to do animation anyways. </span> <span class="line" data-startTime="2070">But it gets even worse </span><span class="line" data-startTime="2070">in sound sometimes. </span> <span class="line" data-startTime="2074">So now that we've looked </span><span class="line" data-startTime="2074">at frequency analysers. </span> <span class="line" data-startTime="2080">Now we can talk about </span><span class="line" data-startTime="2080">filter nodes. </span> <span class="line" data-startTime="2083">So filtering is a process </span><span class="line" data-startTime="2083">that happens in </span><span class="line" data-startTime="2086">the frequency domain. </span> <span class="line" data-startTime="2088">It changes the response </span><span class="line" data-startTime="2088">across frequencies. </span> <span class="line" data-startTime="2091">So we have a bunch of </span><span class="line" data-startTime="2091">different types. </span></p>

<p><span class="line" data-startTime="2092">We have LOWPASS, HIGHPASS, </span><span class="line" data-startTime="2092">BANDPASS, LOW and HIGH </span><span class="line" data-startTime="2096">shelving filters, PEAKING </span><span class="line" data-startTime="2096">filter, NOTCH filter, and </span><span class="line" data-startTime="2098">ALLPASS filter. </span> <span class="line" data-startTime="2099">I don't expect to magically </span><span class="line" data-startTime="2099">know what all </span><span class="line" data-startTime="2101">those do, or care. </span> <span class="line" data-startTime="2103">This actually let you play with </span><span class="line" data-startTime="2103">the parameters and see </span><span class="line" data-startTime="2106">what happens when you change </span><span class="line" data-startTime="2106">the frequency. </span> <span class="line" data-startTime="2109">When you change from a LOWPASS </span><span class="line" data-startTime="2109">filter, which lets all the low </span><span class="line" data-startTime="2111">frequencies through but cuts </span><span class="line" data-startTime="2111">off the high ones, to a </span><span class="line" data-startTime="2115">HIGHPASS filter, you can </span><span class="line" data-startTime="2115">see how it shifts. </span></p>

<p><span class="line" data-startTime="2118">It's a neat little graph to play </span><span class="line" data-startTime="2118">with and gives you some </span><span class="line" data-startTime="2121">idea of how things work. </span> <span class="line" data-startTime="2123">And, by the way, the parameters </span><span class="line" data-startTime="2123">in this are </span><span class="line" data-startTime="2125">frequency and Q, or occasionally </span><span class="line" data-startTime="2125">what's referred </span><span class="line" data-startTime="2129">to as quality, or sometimes </span><span class="line" data-startTime="2129">resonance. </span> <span class="line" data-startTime="2132">Because it's sort of </span><span class="line" data-startTime="2132">a related concept. </span> <span class="line" data-startTime="2134">So like here, if I pump up the </span><span class="line" data-startTime="2134">Q, you can see how it sort of </span><span class="line" data-startTime="2138">accentuates whatever </span><span class="line" data-startTime="2138">the frequency is. </span> <span class="line" data-startTime="2141">It's causing a resonance </span><span class="line" data-startTime="2141">right at that spot. </span> <span class="line" data-startTime="2144">Now this is great. </span></p>

<p><span class="line" data-startTime="2146">I'm showing you some </span><span class="line" data-startTime="2146">neat graphs. </span> <span class="line" data-startTime="2147">You can actually hear and see </span><span class="line" data-startTime="2147">how it sounds, by using my </span><span class="line" data-startTime="2151">neat little demo app here. </span> <span class="line" data-startTime="2153">And don't worry, this is the </span><span class="line" data-startTime="2153">most complex graph I'm going </span><span class="line" data-startTime="2156">to draw in this thing on my </span><span class="line" data-startTime="2156">little track-pad here. </span> <span class="line" data-startTime="2159">So let's create an </span><span class="line" data-startTime="2159">AudioBufferSource, grab an </span><span class="line" data-startTime="2163">analyser, a filter, and </span><span class="line" data-startTime="2163">another analyser. </span> <span class="line" data-startTime="2168">And let's see if I can get these </span><span class="line" data-startTime="2168">all to fit on the screen </span><span class="line" data-startTime="2170">at the same time. </span> <span class="line" data-startTime="2174">There we go. </span> <span class="line" data-startTime="2177">Connect. </span> <span class="line" data-startTime="2179">You know, If I had had time I </span><span class="line" data-startTime="2179">would have figured out how to </span><span class="line" data-startTime="2183">pre-load these in </span><span class="line" data-startTime="2183">my app, but &mdash; </span><span class="line" data-startTime="2187">all right. </span></p>

<p><span class="line" data-startTime="2187">Let's use our same drum </span><span class="line" data-startTime="2187">sample and loop it. </span> <span class="line" data-startTime="2190">[MUTED DRUMS] </span></p>

<p class="speaker"><span class="line" data-starttime="2191"><span class="speakerName">Chris Wilson</span>: And you can hear </span><span class="line" data-startTime="2191">how all the high frequencies </span><span class="line" data-startTime="2193">are getting cut off on </span><span class="line" data-startTime="2193">this sound sample. </span><span class="line" data-startTime="2195">You can actually see it in the </span><span class="line" data-startTime="2195">difference between the before </span><span class="line" data-startTime="2198">and after analyser here. </span><span class="line" data-startTime="2200">And if I play with </span><span class="line" data-startTime="2200">the frequency &mdash; </span><span class="line" data-startTime="2203">[MUSIC FADES IN] </span></p>

<p class="speaker"><span class="line" data-starttime="2206"><span class="speakerName">Chris Wilson</span>:  &mdash; you can </span><span class="line" data-startTime="2206">hear it open up. </span><span class="line" data-startTime="2206">And now I'm pretty much passing </span><span class="line" data-startTime="2206">through all of the </span><span class="line" data-startTime="2209">frequencies. </span><span class="line" data-startTime="2210">But just for kicks, let's </span><span class="line" data-startTime="2210">crank up the resonance. </span><span class="line" data-startTime="2216">[MUSIC WARPS] </span></p>

<p class="speaker"><span class="line" data-starttime="2222"><span class="speakerName">Chris Wilson</span>: OK. </span><span class="line" data-startTime="2223">So I'm not Paul Oakenfold. </span><span class="line" data-startTime="2225">But you get how this </span><span class="line" data-startTime="2225">stuff works. </span><span class="line" data-startTime="2227">And you get the application </span><span class="line" data-startTime="2227">of these kinds of things. </span><span class="line" data-startTime="2230">Now it's turning into </span><span class="line" data-startTime="2230">a UI problem &mdash; </span><span class="line" data-startTime="2233">to build some really cool DJ </span><span class="line" data-startTime="2233">tools, which I'm kind of </span><span class="line" data-startTime="2236">excited about building next. </span><span class="line" data-startTime="2239">That'll be my next </span><span class="line" data-startTime="2239">little fun game. </span><span class="line" data-startTime="2243">Now, I also wanted to point out, </span><span class="line" data-startTime="2243">again, frequency and Q? </span><span class="line" data-startTime="2248">They're both AudioParams, so </span><span class="line" data-startTime="2248">you can automate them. </span><span class="line" data-startTime="2251">You can change these </span><span class="line" data-startTime="2251">automatically over time. </span><span class="line" data-startTime="2254">And so I took this, and I took </span><span class="line" data-startTime="2254">the output of a standard, I </span><span class="line" data-startTime="2258">think it's a triangle wave, and </span><span class="line" data-startTime="2258">just pumped it straight </span><span class="line" data-startTime="2261">into a filter. </span><span class="line" data-startTime="2263">So the original sound is </span><span class="line" data-startTime="2263">an unchanging wave. </span><span class="line" data-startTime="2267">And I just changed the filter </span><span class="line" data-startTime="2267">and told it, hey, sweep the </span><span class="line" data-startTime="2270">filter from zero to 2,000 hertz </span><span class="line" data-startTime="2270">over the course of two </span><span class="line" data-startTime="2274">seconds, and then back </span><span class="line" data-startTime="2274">down to zero. </span><span class="line" data-startTime="2276">I think I automated </span><span class="line" data-startTime="2276">the Q, too. </span><span class="line" data-startTime="2278">[SOUND EFFECT] </span></p>

<p class="speaker"><span class="line" data-starttime="2283"><span class="speakerName">Chris Wilson</span>: So you can do </span><span class="line" data-startTime="2283">these neat little filter </span><span class="line" data-startTime="2284">sweeps really, really easily. </span><span class="line" data-startTime="2286">That actually is the </span><span class="line" data-startTime="2286">code snippet pasted </span><span class="line" data-startTime="2288">out of my js file. </span><span class="line" data-startTime="2291">And you can take that same </span><span class="line" data-startTime="2291">filter, and you can use it to </span><span class="line" data-startTime="2294">process other things. </span><span class="line" data-startTime="2296">You don't have to have an </span><span class="line" data-startTime="2296">unchanging sound that you </span><span class="line" data-startTime="2298">start with. </span><span class="line" data-startTime="2298">[MUSIC PLAYS] </span></p>

<p class="speaker"><span class="line" data-starttime="2304"><span class="speakerName">Chris Wilson</span>: Sorry, I should </span><span class="line" data-startTime="2304">have cranked that up a little. </span><span class="line" data-startTime="2306">[MUSIC PLAYS LOUDER] </span></p>

<p class="speaker"><span class="line" data-starttime="2311"><span class="speakerName">Chris Wilson</span>: So you can do </span><span class="line" data-startTime="2311">all kinds of fun things by </span><span class="line" data-startTime="2313">automating those filters, as </span><span class="line" data-startTime="2313">well as just twiddling the </span><span class="line" data-startTime="2316">values yourself. </span><span class="line" data-startTime="2317">In fact, filters are also how </span><span class="line" data-startTime="2317">you get effects like, I'm </span><span class="line" data-startTime="2321">talking on a telephone, or I'm </span><span class="line" data-startTime="2321">talking on an am radio, or </span><span class="line" data-startTime="2323">something like that. </span><span class="line" data-startTime="2325">You can take the original </span><span class="line" data-startTime="2325">sound, here &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2327"><span class="speakerName">Playback</span>: Play sound now. </span></p>

<p class="speaker"><span class="line" data-starttime="2329"><span class="speakerName">Chris Wilson</span>: Which </span><span class="line" data-startTime="2329">you heard earlier. </span><span class="line" data-startTime="2330">And all that I do in this other </span><span class="line" data-startTime="2330">sample is I pump it </span><span class="line" data-startTime="2333">through a couple of filters to </span><span class="line" data-startTime="2333">mask off the low and the high </span><span class="line" data-startTime="2337">frequencies. </span><span class="line" data-startTime="2337">It turns out a telephone sound </span><span class="line" data-startTime="2337">is really just &mdash; the old </span><span class="line" data-startTime="2341">telephone system chopped off </span><span class="line" data-startTime="2341">all of the upper and lower </span><span class="line" data-startTime="2344">frequencies. </span><span class="line" data-startTime="2344">Because of the way that </span><span class="line" data-startTime="2344">they transferred the </span><span class="line" data-startTime="2346">data across the lines. </span></p>

<p class="speaker"><span class="line" data-starttime="2348"><span class="speakerName">Playback</span>: Play sound now. </span></p>

<p class="speaker"><span class="line" data-starttime="2349"><span class="speakerName">Chris Wilson</span>: And you get </span><span class="line" data-startTime="2349">something like that, just by </span><span class="line" data-startTime="2352">filtering off those </span><span class="line" data-startTime="2352">frequencies. </span></p>

<p class="speaker"><span class="line" data-starttime="2356"><span class="speakerName">Chris Wilson</span>: So now we've got </span><span class="line" data-startTime="2356">all these really cool sounds, </span><span class="line" data-startTime="2359">or the tools to build all of </span><span class="line" data-startTime="2359">them, we need to position them </span><span class="line" data-startTime="2363">in 3D space. </span><span class="line" data-startTime="2365">There's a great tutorial on </span><span class="line" data-startTime="2365">HTML5Rocks about this. </span><span class="line" data-startTime="2368">I basically decided I couldn't </span><span class="line" data-startTime="2368">improve on that a whole lot, </span><span class="line" data-startTime="2370">so I was just going to show </span><span class="line" data-startTime="2370">the demo for it &mdash; </span><span class="line" data-startTime="2372">[MUSIC PLAYS] </span></p>

<p class="speaker"><span class="line" data-starttime="2374"><span class="speakerName">Chris Wilson</span>: And talk through </span><span class="line" data-startTime="2374">it a little bit. </span> <span class="line" data-startTime="2375">And you'll see as we </span><span class="line" data-startTime="2375">move around here &mdash; </span><span class="line" data-startTime="2379">hopefully, you're hearing </span><span class="line" data-startTime="2379">the audio move around. </span> <span class="line" data-startTime="2386">I wanna thank the sound guys </span><span class="line" data-startTime="2386">again for getting the room set </span><span class="line" data-startTime="2388">up for stereo. </span> <span class="line" data-startTime="2389">Because it definitely </span><span class="line" data-startTime="2389">would not been </span><span class="line" data-startTime="2391">as impressive otherwise. </span> <span class="line" data-startTime="2395">So the way that you do this is </span><span class="line" data-startTime="2395">you create an AudioPannerNode. </span> <span class="line" data-startTime="2398">You just pump your sound into </span><span class="line" data-startTime="2398">an AudioPannerNode. </span> <span class="line" data-startTime="2401">And you set its position, its </span><span class="line" data-startTime="2401">orientation if you want to </span><span class="line" data-startTime="2404">sound to be directional, </span><span class="line" data-startTime="2404">and its velocity. </span> <span class="line" data-startTime="2408">And this sounds really </span><span class="line" data-startTime="2408">complex to do. </span> <span class="line" data-startTime="2411">Obviously, it makes sense for </span><span class="line" data-startTime="2411">the demo that I just showed </span><span class="line" data-startTime="2413">you where it's really </span><span class="line" data-startTime="2413">a 3D space. </span></p>

<p><span class="line" data-startTime="2415">But maybe you just want to take </span><span class="line" data-startTime="2415">a normal sound and pan it </span><span class="line" data-startTime="2418">to the left or the right. </span> <span class="line" data-startTime="2420">Well that's actually </span><span class="line" data-startTime="2420">really easy to do. </span> <span class="line" data-startTime="2422">You just create a panner node, </span><span class="line" data-startTime="2422">you set the position to </span><span class="line" data-startTime="2424">straight ahead, and then you can </span><span class="line" data-startTime="2424">animate the x position to </span><span class="line" data-startTime="2429">change where it is, </span><span class="line" data-startTime="2429">left or right. </span> <span class="line" data-startTime="2431">And you end up with something </span><span class="line" data-startTime="2431">like this &mdash; </span><span class="line" data-startTime="2433">[MUSIC PLAYS, PANNING </span><span class="line" data-startTime="2433">LEFT AND RIGHT] </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2444"><span class="speakerName">Chris Wilson</span>: So it's actually </span><span class="line" data-startTime="2444">really easy to do simple </span><span class="line" data-startTime="2446">things, as well. </span><span class="line" data-startTime="2447">You don't have to do super </span><span class="line" data-startTime="2447">complex 3D math to figure out </span><span class="line" data-startTime="2451">where to position things. </span><span class="line" data-startTime="2453">This is also, by the way, how </span><span class="line" data-startTime="2453">you get Doppler effects. </span><span class="line" data-startTime="2456">That whole setVelocity </span><span class="line" data-startTime="2456">method is to set the </span><span class="line" data-startTime="2459">velocity of an object. </span><span class="line" data-startTime="2461">So that you get these </span><span class="line" data-startTime="2461">sounds where &mdash; </span><span class="line" data-startTime="2465">[SIREN] </span></p>

<p class="speaker"><span class="line" data-starttime="2468"><span class="speakerName">Chris Wilson</span>: You can hear the </span><span class="line" data-startTime="2468">pitch change as something </span><span class="line" data-startTime="2470">races past you. </span> <span class="line" data-startTime="2471">So given the number of </span><span class="line" data-startTime="2471">ambulances or policemen that </span><span class="line" data-startTime="2478">I've heard going around on the </span><span class="line" data-startTime="2478">streets of San Francisco the </span><span class="line" data-startTime="2481">last couple days, you </span><span class="line" data-startTime="2481">hear this a lot. </span> <span class="line" data-startTime="2483">But you expect that </span><span class="line" data-startTime="2483">sound to change. </span> <span class="line" data-startTime="2485">If you were playing a game and </span><span class="line" data-startTime="2485">you raced past the police </span><span class="line" data-startTime="2488">officer in the game and the </span><span class="line" data-startTime="2488">pitch of the siren didn't </span><span class="line" data-startTime="2491">change, you would </span><span class="line" data-startTime="2491">actually notice. </span> <span class="line" data-startTime="2493">It would be kind of weird. </span> <span class="line" data-startTime="2494">It would be jarring. </span> <span class="line" data-startTime="2494">Because that's not the way that </span><span class="line" data-startTime="2494">it works in real life. </span> <span class="line" data-startTime="2498">And this just magically </span><span class="line" data-startTime="2498">happened. </span> <span class="line" data-startTime="2500">All you had to do was set the </span><span class="line" data-startTime="2500">velocity of the object and we </span><span class="line" data-startTime="2503">knew to change the pitch </span><span class="line" data-startTime="2503">of the object. </span> <span class="line" data-startTime="2507">Now, all of these things. </span> <span class="line" data-startTime="2512">All of these AudioPannerNodes </span><span class="line" data-startTime="2512">that may be in play, they're </span><span class="line" data-startTime="2515">all relative to a listener </span><span class="line" data-startTime="2515">somewhere. </span> <span class="line" data-startTime="2518">You have to position </span><span class="line" data-startTime="2518">the person hearing </span><span class="line" data-startTime="2520">all of these things. </span></p>

<p><span class="line" data-startTime="2522">And the person hearing all these </span><span class="line" data-startTime="2522">things is an attribute </span><span class="line" data-startTime="2526">of the speakers, in effect. </span> <span class="line" data-startTime="2528">It's an attribute of </span><span class="line" data-startTime="2528">the entire context. </span> <span class="line" data-startTime="2530">So the AudioListener hangs </span><span class="line" data-startTime="2530">directly off the AudioContext. </span> <span class="line" data-startTime="2533">There's only one of them. </span> <span class="line" data-startTime="2535">You don't create these. </span> <span class="line" data-startTime="2536">It's always there. </span> <span class="line" data-startTime="2537">And you just set your position, </span><span class="line" data-startTime="2537">or your orientation </span><span class="line" data-startTime="2540">or velocity. </span> <span class="line" data-startTime="2541">When I moved around in that </span><span class="line" data-startTime="2541">sound field during the demo a </span><span class="line" data-startTime="2544">couple seconds ago, I was </span><span class="line" data-startTime="2544">changing the AudioListener </span><span class="line" data-startTime="2547">properties, as well as the </span><span class="line" data-startTime="2547">visual representation of that. </span> <span class="line" data-startTime="2553">So with that, I want to jump </span><span class="line" data-startTime="2553">to another fun node &mdash; </span><span class="line" data-startTime="2558">the ConvolverNode. </span> <span class="line" data-startTime="2561">So convolution is a process to </span><span class="line" data-startTime="2561">digitally simulate a space, or </span><span class="line" data-startTime="2568">a process actually. </span> <span class="line" data-startTime="2570">Because you can use this to </span><span class="line" data-startTime="2570">simulate room ambiance, like </span><span class="line" data-startTime="2573">the way sound bounces </span><span class="line" data-startTime="2573">around in this room. </span></p>

<p><span class="line" data-startTime="2576">This room has kind of a </span><span class="line" data-startTime="2576">nice response to it. </span> <span class="line" data-startTime="2578">I can hear my voice bouncing </span><span class="line" data-startTime="2578">off the back wall. </span> <span class="line" data-startTime="2582">But you can also use it to </span><span class="line" data-startTime="2582">simulate an analog processor. </span> <span class="line" data-startTime="2586">Something that you use to plug </span><span class="line" data-startTime="2586">an audio signal through. </span> <span class="line" data-startTime="2592">The way that this works is you </span><span class="line" data-startTime="2592">use these things called </span><span class="line" data-startTime="2594">Impulse Response files. </span> <span class="line" data-startTime="2595">And Impulse Response files </span><span class="line" data-startTime="2595">can be recorded. </span> <span class="line" data-startTime="2598">You can literally go into a room </span><span class="line" data-startTime="2598">like this with a couple </span><span class="line" data-startTime="2601">microphones and a speaker, play </span><span class="line" data-startTime="2601">a set of sounds, and then </span><span class="line" data-startTime="2605">run that through this </span><span class="line" data-startTime="2605">convolution processing </span><span class="line" data-startTime="2607">software, and it creates </span><span class="line" data-startTime="2607">a sound file that is </span><span class="line" data-startTime="2610">representative of how this room </span><span class="line" data-startTime="2613">responds to a sound impulse. </span></p>

<p><span class="line" data-startTime="2616">Or you can have been generated </span><span class="line" data-startTime="2616">algorithmically. </span> <span class="line" data-startTime="2619">Or you can just come up with </span><span class="line" data-startTime="2619">really wacky ones, which </span><span class="line" data-startTime="2621">usually has very unpredictable </span><span class="line" data-startTime="2621">results, of course. </span> <span class="line" data-startTime="2624">But fundamentally, in order to </span><span class="line" data-startTime="2624">simulate different responses, </span><span class="line" data-startTime="2630">you have to use this </span><span class="line" data-startTime="2630">file, a sound file. </span> <span class="line" data-startTime="2632">There are tons of these </span><span class="line" data-startTime="2632">available on the net, freely. </span> <span class="line" data-startTime="2635">You can just go search for </span><span class="line" data-startTime="2635">Impulse Response files. </span> <span class="line" data-startTime="2638">Tons of them are out there. </span></p>

<p><span class="line" data-startTime="2640">Lots of hall reverbs, room </span><span class="line" data-startTime="2640">reverbs, and things like that, </span><span class="line" data-startTime="2643">as well as some really </span><span class="line" data-startTime="2643">crazy ones. </span> <span class="line" data-startTime="2645">Again, I do want to point out </span><span class="line" data-startTime="2645">the output of this node is </span><span class="line" data-startTime="2648">just the processed signal. </span> <span class="line" data-startTime="2650">And typically, you don't </span><span class="line" data-startTime="2650">just hear the echos. </span> <span class="line" data-startTime="2653">You hear the original </span><span class="line" data-startTime="2653">sound too. </span> <span class="line" data-startTime="2655">So you probably want to mix </span><span class="line" data-startTime="2655">these together when you </span><span class="line" data-startTime="2657">actually use it. </span> <span class="line" data-startTime="2659">But ConvolverNode is pretty </span><span class="line" data-startTime="2659">straightforward because it </span><span class="line" data-startTime="2661">basically has one property that </span><span class="line" data-startTime="2661">you really care about. </span> <span class="line" data-startTime="2664">It's a buffer. </span> <span class="line" data-startTime="2666">Remember I said these are </span><span class="line" data-startTime="2666">Impulse Response files. </span> <span class="line" data-startTime="2668">They're sound files. </span> <span class="line" data-startTime="2669">You load them the same way you </span><span class="line" data-startTime="2669">load any other sound sample. </span> <span class="line" data-startTime="2673">You just set it here, rather </span><span class="line" data-startTime="2673">than setting it in </span><span class="line" data-startTime="2675">AudioBufferSource node. </span></p>

<p><span class="line" data-startTime="2678">So to do this, I'm going to use </span><span class="line" data-startTime="2678">my favorite drum sample </span><span class="line" data-startTime="2682">that I keep using. </span> <span class="line" data-startTime="2683">[MUSIC PLAYS] </span></p>

<p class="speaker"><span class="line" data-starttime="2685"><span class="speakerName">Chris Wilson</span>: Turn that </span><span class="line" data-startTime="2685">down a little bit. </span><span class="line" data-startTime="2687">And so I took my drum sound, I </span><span class="line" data-startTime="2687">created a ConvolverNode, I </span><span class="line" data-startTime="2691">pumped the drum sound into that </span><span class="line" data-startTime="2691">ConvolverNode, but also </span><span class="line" data-startTime="2694">connected it to the speakers &mdash; </span><span class="line" data-startTime="2695">to the destination. </span><span class="line" data-startTime="2696">So I hear both of them. </span><span class="line" data-startTime="2698">And then all that I'm going to </span><span class="line" data-startTime="2698">do now, is I'm gonna switch </span><span class="line" data-startTime="2701">what the ImpulseResponseBuffer </span><span class="line" data-startTime="2701">is. </span><span class="line" data-startTime="2703">So I can change it to a hall &mdash; </span><span class="line" data-startTime="2705">[MUSIC ALTERS] </span></p>

<p class="speaker"><span class="line" data-starttime="2708"><span class="speakerName">Chris Wilson</span>: Which I </span><span class="line" data-startTime="2708">hope you can hear. </span><span class="line" data-startTime="2710">I can change it to </span><span class="line" data-startTime="2710">a spring reverb. </span><span class="line" data-startTime="2712">[MUSIC ALTERS] </span></p>

<p class="speaker"><span class="line" data-starttime="2714"><span class="speakerName">Chris Wilson</span>: Spring reverb is </span><span class="line" data-startTime="2714">an old analog processor that </span><span class="line" data-startTime="2717">literally used springs. </span><span class="line" data-startTime="2719">And you can kind of hear this </span><span class="line" data-startTime="2719">weird slapping noise going </span><span class="line" data-startTime="2722">back and forth as a </span><span class="line" data-startTime="2722">characteristic of spring reverb. </span><span class="line" data-startTime="2725">You can do a comb filter. </span><span class="line" data-startTime="2727">[MUSIC ALTERS] </span></p>

<p class="speaker"><span class="line" data-starttime="2728"><span class="speakerName">Chris Wilson</span>: Which has a </span><span class="line" data-startTime="2728">really, really awful sound. </span><span class="line" data-startTime="2730">I'm not gonna stay </span><span class="line" data-startTime="2730">on that one. </span><span class="line" data-startTime="2732">Or, my personal favorite with </span><span class="line" data-startTime="2732">drums, is a backwards reverb. </span><span class="line" data-startTime="2736">[MUSIC ALTERS] </span></p>

<p class="speaker"><span class="line" data-starttime="2736"><span class="speakerName">Chris Wilson</span>: Because you can </span><span class="line" data-startTime="2736">do any Impulse Response. </span><span class="line" data-startTime="2739">This Impulse Response may be </span><span class="line" data-startTime="2739">completely the opposite in </span><span class="line" data-startTime="2742">time of what you would </span><span class="line" data-startTime="2742">actually hear </span><span class="line" data-startTime="2745">in the reverb space. </span><span class="line" data-startTime="2747">So if I stop it. </span><span class="line" data-startTime="2748">[MUSIC FADES] </span></p>

<p class="speaker"><span class="line" data-starttime="2750"><span class="speakerName">Chris Wilson</span>: You can actually </span><span class="line" data-startTime="2750">hear the reversed </span><span class="line" data-startTime="2753">reverb sound of that. </span> <span class="line" data-startTime="2757">OK. </span> <span class="line" data-startTime="2758">So we've talked a lot </span><span class="line" data-startTime="2758">about how to build </span><span class="line" data-startTime="2762">these processing systems. </span> <span class="line" data-startTime="2767">I want to talk for a minute </span><span class="line" data-startTime="2767">about how to synthesize sound. </span> <span class="line" data-startTime="2770">How to do musical applications </span><span class="line" data-startTime="2770">with sound, not just provide </span><span class="line" data-startTime="2773">ambient environments </span><span class="line" data-startTime="2773">for sound. </span> <span class="line" data-startTime="2776">First and foremost, </span><span class="line" data-startTime="2776">it's actually </span><span class="line" data-startTime="2778">really easy to do this. </span> <span class="line" data-startTime="2780">If you go and just do a search </span><span class="line" data-startTime="2780">for Web Audio API demos, </span><span class="line" data-startTime="2783">there's a whole bunch of demos </span><span class="line" data-startTime="2783">out there that are different </span><span class="line" data-startTime="2787">synthesizers. </span> <span class="line" data-startTime="2788">This is only one of them. </span> <span class="line" data-startTime="2789">It's actually a fairly </span><span class="line" data-startTime="2789">simplistic one, </span><span class="line" data-startTime="2790">which is why use it. </span></p>

<p><span class="line" data-startTime="2791">But &mdash; </span><span class="line" data-startTime="2792">[PLAYS SYNTHESIZER] </span></p>

<p class="speaker"><span class="line" data-starttime="2792"><span class="speakerName">Chris Wilson</span>: It has controls </span><span class="line" data-startTime="2792">for all of these different </span><span class="line" data-startTime="2795">things that I'm playing </span><span class="line" data-startTime="2795">around with. </span> <span class="line" data-startTime="2799">It's actually &mdash; </span><span class="line" data-startTime="2800">the hardest part about building </span><span class="line" data-startTime="2800">something like this </span><span class="line" data-startTime="2802">is providing the user </span><span class="line" data-startTime="2802">experience for it. </span> <span class="line" data-startTime="2805">I've actually built a test-bed </span><span class="line" data-startTime="2805">synthesizer out that </span><span class="line" data-startTime="2809">has no UI at all. </span> <span class="line" data-startTime="2812">And it's really easy &mdash; like the </span><span class="line" data-startTime="2812">actual sound production. </span> <span class="line" data-startTime="2815">I want to build an envelope, I </span><span class="line" data-startTime="2815">want to stick a filter in, I </span><span class="line" data-startTime="2817">want to control some other </span><span class="line" data-startTime="2817">properties of it, is like a </span><span class="line" data-startTime="2820">dozen lines of code. </span></p>

<p><span class="line" data-startTime="2822">The rest of it, the shell for </span><span class="line" data-startTime="2822">drawing knobs and everything </span><span class="line" data-startTime="2825">else is actually a lot </span><span class="line" data-startTime="2825">more troublesome. </span> <span class="line" data-startTime="2829">And remember when I mentioned </span><span class="line" data-startTime="2829">before, you can actually </span><span class="line" data-startTime="2832">connect AudioNodes to </span><span class="line" data-startTime="2832">AudioParams, as well. </span> <span class="line" data-startTime="2837">For those of you who are synth </span><span class="line" data-startTime="2837">geeks, like me &mdash; because I've </span><span class="line" data-startTime="2840">loved synthesizers since </span><span class="line" data-startTime="2840">I was about 12 &mdash; </span><span class="line" data-startTime="2844">this is how you get things </span><span class="line" data-startTime="2844">like low-frequency </span><span class="line" data-startTime="2847">oscillators. </span> <span class="line" data-startTime="2847">It's how you do things </span><span class="line" data-startTime="2847">like FM synthesis. </span></p>

<p><span class="line" data-startTime="2850">They're actually just </span><span class="line" data-startTime="2850">intersecting two different </span><span class="line" data-startTime="2851">audio signals or multiplying </span><span class="line" data-startTime="2851">them together. </span> <span class="line" data-startTime="2856">So the first and most </span><span class="line" data-startTime="2856">fundamental piece of </span><span class="line" data-startTime="2859">generating sound is </span><span class="line" data-startTime="2859">an oscillator. </span> <span class="line" data-startTime="2862">Oscillators provide a periodic </span><span class="line" data-startTime="2862">waveform source. </span> <span class="line" data-startTime="2866">It's going to draw for you, or </span><span class="line" data-startTime="2866">create for you, things like a </span><span class="line" data-startTime="2870">sine </span><span class="line" data-startTime="2870">wave, [BEEP] </span></p>

<p class="speaker"><span class="line" data-starttime="2872"><span class="speakerName">Chris Wilson</span>: Square wave. </span><span class="line" data-startTime="2873">[BEEP] </span></p>

<p class="speaker"><span class="line" data-starttime="2874"><span class="speakerName">Chris Wilson</span>: Sawtooth wave. </span><span class="line" data-startTime="2875">[BEEP] </span></p>

<p class="speaker"><span class="line" data-starttime="2877"><span class="speakerName">Chris Wilson</span>: And </span><span class="line" data-startTime="2877">a triangle wave. </span><span class="line" data-startTime="2878">[BEEP] </span></p>

<p class="speaker"><span class="line" data-starttime="2880"><span class="speakerName">Chris Wilson</span>: Those all sound </span><span class="line" data-startTime="2880">kind of vaguely similar. </span> <span class="line" data-startTime="2882">It's because I didn't </span><span class="line" data-startTime="2882">alter the pitch. </span> <span class="line" data-startTime="2883">I haven't filtered them. </span> <span class="line" data-startTime="2885">They're not super complex </span><span class="line" data-startTime="2885">waveforms. </span> <span class="line" data-startTime="2887">But they are different. </span> <span class="line" data-startTime="2888">And they have very different </span><span class="line" data-startTime="2888">harmonic characteristics, </span><span class="line" data-startTime="2890">which give you some interesting </span><span class="line" data-startTime="2890">properties. </span> <span class="line" data-startTime="2893">So an oscillator is an </span><span class="line" data-startTime="2893">AudioSourceNode. </span> <span class="line" data-startTime="2896">It's an audio node that you </span><span class="line" data-startTime="2896">can connect up to a </span><span class="line" data-startTime="2898">destination. </span> <span class="line" data-startTime="2899">It lets you control the </span><span class="line" data-startTime="2899">frequency in hertz, it </span><span class="line" data-startTime="2904">actually also lets you </span><span class="line" data-startTime="2904">control the frequency </span><span class="line" data-startTime="2906">with the detune parameter. </span> <span class="line" data-startTime="2908">Detuning basically lets you </span><span class="line" data-startTime="2908">control using a different unit </span><span class="line" data-startTime="2911">known as cents. </span> <span class="line" data-startTime="2912">Cents are great for musical </span><span class="line" data-startTime="2912">applications because in an </span><span class="line" data-startTime="2916">equal-tempered scale there's </span><span class="line" data-startTime="2916">100 cents per note. </span></p>

<p><span class="line" data-startTime="2919">So it's super easy to say, </span><span class="line" data-startTime="2919">I want three octaves up. </span> <span class="line" data-startTime="2922">It's three times 12 times 100. </span> <span class="line" data-startTime="2927">And just like </span><span class="line" data-startTime="2927">AudioBufferSourceNode you have </span><span class="line" data-startTime="2929">noteOn, noteOff, and that </span><span class="line" data-startTime="2929">sort of things. </span> <span class="line" data-startTime="2931">Now, I did skip that we </span><span class="line" data-startTime="2931">have another type up </span><span class="line" data-startTime="2934">there, called custom. </span> <span class="line" data-startTime="2937">Custom lets us use this really </span><span class="line" data-startTime="2937">interesting oscillator called </span><span class="line" data-startTime="2941">a wavetable oscillator. </span> <span class="line" data-startTime="2943">Wavetables are not a sample </span><span class="line" data-startTime="2943">playback buffer. </span> <span class="line" data-startTime="2945">The term got misused in </span><span class="line" data-startTime="2945">the late '80s and </span><span class="line" data-startTime="2948">early '90s for a while. </span> <span class="line" data-startTime="2950">It's actually a way to produce </span><span class="line" data-startTime="2950">sound that uses &mdash; </span><span class="line" data-startTime="2956">looks like my page didn't </span><span class="line" data-startTime="2956">load, hang on. </span> <span class="line" data-startTime="2961">Let's try this again. </span> <span class="line" data-startTime="2964">There we go. </span> <span class="line" data-startTime="2967">It creates wave forms by adding </span><span class="line" data-startTime="2967">different coefficients </span><span class="line" data-startTime="2973">onto harmonic partials. </span> <span class="line" data-startTime="2975">So it basically stacks up </span><span class="line" data-startTime="2975">harmonics of the same tone. </span></p>

<p><span class="line" data-startTime="2979">And then lets you control how </span><span class="line" data-startTime="2979">much of each harmonic to draw, </span><span class="line" data-startTime="2982">or to play, to add </span><span class="line" data-startTime="2982">to the waveform. </span> <span class="line" data-startTime="2985">So here, we start out </span><span class="line" data-startTime="2985">with a fairly </span><span class="line" data-startTime="2986">simple set of harmonics. </span> <span class="line" data-startTime="2987">[DEEP BUZZING NOISE] </span></p>

<p class="speaker"><span class="line" data-starttime="2988"><span class="speakerName">Chris Wilson</span>: There's three </span><span class="line" data-startTime="2988">harmonics playing. </span><span class="line" data-startTime="2989">And it sounds pretty basic. </span><span class="line" data-startTime="2991">It's not a very rich </span><span class="line" data-startTime="2991">sound or anything. </span><span class="line" data-startTime="2993">But I can draw in more &mdash; </span><span class="line" data-startTime="2995">[SOUND ALTERS] </span></p>

<p class="speaker"><span class="line" data-starttime="2999"><span class="speakerName">Chris Wilson</span>: And you can get a </span><span class="line" data-startTime="2999">lot more interesting sound. </span> <span class="line" data-startTime="3004">So this is kind of weird. </span> <span class="line" data-startTime="3005">It's a very deep area to build </span><span class="line" data-startTime="3005">complex waveforms. </span> <span class="line" data-startTime="3009">Because you can sit there </span><span class="line" data-startTime="3009">and tweak the </span><span class="line" data-startTime="3011">partials all you want. </span> <span class="line" data-startTime="3014">But I don't want to go </span><span class="line" data-startTime="3014">too deeply into it. </span> <span class="line" data-startTime="3016">Because we could just sit </span><span class="line" data-startTime="3016">here and play with </span><span class="line" data-startTime="3019">partials all day. </span> <span class="line" data-startTime="3020">It's a different way </span><span class="line" data-startTime="3020">of creating sounds. </span> <span class="line" data-startTime="3022">It's a different generation </span><span class="line" data-startTime="3022">system. </span> <span class="line" data-startTime="3023">It actually was very popular </span><span class="line" data-startTime="3023">in the early '80s. </span></p>

<p><span class="line" data-startTime="3026">There was a PPG wave synthesizer </span><span class="line" data-startTime="3026">that kind of </span><span class="line" data-startTime="3029">kicked off the usage of this. </span> <span class="line" data-startTime="3031">The great thing, to me, </span><span class="line" data-startTime="3031">is this creates a very </span><span class="line" data-startTime="3035">spectrum-rich sound, creates a </span><span class="line" data-startTime="3035">lot of harmonics, which was </span><span class="line" data-startTime="3038">super useful in building </span><span class="line" data-startTime="3038">the vocoder. </span> <span class="line" data-startTime="3042">The sound that I used </span><span class="line" data-startTime="3042">for that vocoder </span><span class="line" data-startTime="3043">is actually a wavetable. </span> <span class="line" data-startTime="3051">OK. </span> <span class="line" data-startTime="3052">So we've created sound. </span> <span class="line" data-startTime="3054">Now we need to process </span><span class="line" data-startTime="3054">it a little bit more. </span> <span class="line" data-startTime="3055">And there a couple of node </span><span class="line" data-startTime="3055">types that are really </span><span class="line" data-startTime="3059">musically interesting. </span></p>

<p><span class="line" data-startTime="3060">The first of these is </span><span class="line" data-startTime="3060">Compressor node. </span> <span class="line" data-startTime="3063">Now compressors are a very </span><span class="line" data-startTime="3063">common musical tool. </span> <span class="line" data-startTime="3066">In fact, that picture of a </span><span class="line" data-startTime="3066">rack of music equipment? </span><span class="line" data-startTime="3069">That's actually from </span><span class="line" data-startTime="3069">my basement studio. </span> <span class="line" data-startTime="3072">One of the units in that is </span><span class="line" data-startTime="3072">a hardware compressor. </span> <span class="line" data-startTime="3075">And compression basically </span><span class="line" data-startTime="3075">controls the volume peaks of a </span><span class="line" data-startTime="3078">sound, but tries to increase </span><span class="line" data-startTime="3078">the overall volume. </span> <span class="line" data-startTime="3081">So this is a before-and-after </span><span class="line" data-startTime="3081">picture of the same sound </span><span class="line" data-startTime="3085">sample, of me playing </span><span class="line" data-startTime="3085">my bass guitar. </span> <span class="line" data-startTime="3088">The first one is uncompressed. </span> <span class="line" data-startTime="3089">The second one is compressed. </span> <span class="line" data-startTime="3091">I've actually increased the </span><span class="line" data-startTime="3091">average volume, but I've had </span><span class="line" data-startTime="3094">to turn it down in a couple of </span><span class="line" data-startTime="3094">places to make sure that I </span><span class="line" data-startTime="3098">don't spike past the </span><span class="line" data-startTime="3098">clipping range. </span></p>

<p><span class="line" data-startTime="3104">So this is kind of like having </span><span class="line" data-startTime="3104">an engineer who sits there </span><span class="line" data-startTime="3107">with his hand on the volume knob </span><span class="line" data-startTime="3107">with an extremely fast </span><span class="line" data-startTime="3110">reaction time. </span> <span class="line" data-startTime="3111">You can actually see </span><span class="line" data-startTime="3111">how this works &mdash; </span><span class="line" data-startTime="3115">[MUSIC PLAYS] </span></p>

<p class="speaker"><span class="line" data-starttime="3117"><span class="speakerName">Chris Wilson</span>: Here. </span> <span class="line" data-startTime="3117">These are really standardized </span><span class="line" data-startTime="3117">controls, by the way. </span> <span class="line" data-startTime="3121">The AudioParams that give you </span><span class="line" data-startTime="3121">controls on Compressor node </span><span class="line" data-startTime="3124">for threshold, knee, ratio, </span><span class="line" data-startTime="3124">attack, and release. </span> <span class="line" data-startTime="3127">These are the five standard </span><span class="line" data-startTime="3127">things that you get on a </span><span class="line" data-startTime="3130">compressor. </span> <span class="line" data-startTime="3131">There's actually knobs that say </span><span class="line" data-startTime="3131">threshold, knee, ratio, </span><span class="line" data-startTime="3133">attack, and release </span><span class="line" data-startTime="3133">on that hardware </span><span class="line" data-startTime="3135">compressor that I have. </span> <span class="line" data-startTime="3136">[MUSIC VOLUME INCREASES] </span></p>

<p class="speaker"><span class="line" data-starttime="3138"><span class="speakerName">Chris Wilson</span>: Now the little </span><span class="line" data-startTime="3138">bouncing red bar shows you how </span><span class="line" data-startTime="3140">much compression is being </span><span class="line" data-startTime="3140">applied at any </span><span class="line" data-startTime="3143">given point in time. </span><span class="line" data-startTime="3144">So I can crank the threshold </span><span class="line" data-startTime="3144">down, crank the knee up, crank </span><span class="line" data-startTime="3151">the ratio up. </span><span class="line" data-startTime="3153">[MUSIC ALTERS] </span></p>

<p class="speaker"><span class="line" data-starttime="3153"><span class="speakerName">Chris Wilson</span>: And you can </span><span class="line" data-startTime="3153">probably tell in the back. </span><span class="line" data-startTime="3155">It sounds a little </span><span class="line" data-startTime="3155">muddled, for me. </span><span class="line" data-startTime="3157">But you can probably </span><span class="line" data-startTime="3157">tell in the back. </span><span class="line" data-startTime="3159">Suddenly, the peaks aren't so </span><span class="line" data-startTime="3159">loud, but the whole sound is a </span><span class="line" data-startTime="3165">little bit muddled right </span><span class="line" data-startTime="3165">now, actually. </span><span class="line" data-startTime="3168">Because you don't generally </span><span class="line" data-startTime="3168">over-compress like this. </span><span class="line" data-startTime="3170">If you want to, you can change </span><span class="line" data-startTime="3170">the attack time, and you'll </span><span class="line" data-startTime="3173">start hearing some of the &mdash; </span><span class="line" data-startTime="3174">[MUSIC ALTERS] </span></p>

<p class="speaker"><span class="line" data-starttime="3176"><span class="speakerName">Chris Wilson</span>: Some of the </span><span class="line" data-startTime="3176">poppiness of the attack is </span><span class="line" data-startTime="3177">back, which is why you have all </span><span class="line" data-startTime="3177">these different controls. </span><span class="line" data-startTime="3181">[MUSIC STOPS] </span></p>

<p class="speaker"><span class="line" data-starttime="3182"><span class="speakerName">Chris Wilson</span>: So I'm not going </span><span class="line" data-startTime="3182">to do a class in how to use </span><span class="line" data-startTime="3184">compressors. </span> <span class="line" data-startTime="3185">I just wanted to say, this </span><span class="line" data-startTime="3185">is a tool that we have. </span> <span class="line" data-startTime="3189">The last processing node </span><span class="line" data-startTime="3189">tool in our toolbox is </span><span class="line" data-startTime="3193">a WaveShaper node. </span> <span class="line" data-startTime="3194">WaveShapers are a little </span><span class="line" data-startTime="3194">bit complex to explain. </span> <span class="line" data-startTime="3197">Basically, what they do is they </span><span class="line" data-startTime="3197">let you create a curve, a </span><span class="line" data-startTime="3201">response curve, that's like </span><span class="line" data-startTime="3201">a sample look-up table. </span> <span class="line" data-startTime="3205">And it happens on every </span><span class="line" data-startTime="3205">sound sample. </span> <span class="line" data-startTime="3207">So for every sample it </span><span class="line" data-startTime="3207">says, I'm actually </span><span class="line" data-startTime="3210">going to return this. </span> <span class="line" data-startTime="3211">If I set a curve that was </span><span class="line" data-startTime="3211">actually just a flat line on a </span><span class="line" data-startTime="3216">45 degree angle down here, then </span><span class="line" data-startTime="3216">it would actually just </span><span class="line" data-startTime="3219">have the output be exactly </span><span class="line" data-startTime="3219">the same as the input. </span> <span class="line" data-startTime="3222">Otherwise it's going to change </span><span class="line" data-startTime="3222">the waveforms that go through. </span></p>

<p><span class="line" data-startTime="3226">Not control the volume over </span><span class="line" data-startTime="3226">time, like a Compressor node. </span> <span class="line" data-startTime="3229">But actually change the </span><span class="line" data-startTime="3229">waveforms and kind of squish </span><span class="line" data-startTime="3232">the peaks down a little bit. </span> <span class="line" data-startTime="3233">So I can use this to create like </span><span class="line" data-startTime="3233">distortion and overdrive. </span> <span class="line" data-startTime="3237">[GUITAR] </span></p>

<p class="speaker"><span class="line" data-starttime="3238"><span class="speakerName">Chris Wilson</span>: So here, you have </span><span class="line" data-startTime="3238">me playing the guitar. </span><span class="line" data-startTime="3242">And if I just drive the gain a </span><span class="line" data-startTime="3242">little bit more to push up </span><span class="line" data-startTime="3246">into the areas that </span><span class="line" data-startTime="3246">get clipped off &mdash; </span><span class="line" data-startTime="3249">[GUITAR DISTORTS] </span></p>

<p class="speaker"><span class="line" data-starttime="3251"><span class="speakerName">Chris Wilson</span>: You can hear </span><span class="line" data-startTime="3251">it sounds like a guitar </span><span class="line" data-startTime="3253">distortion pedal, or </span><span class="line" data-startTime="3253">over-driving an amplifier. </span><span class="line" data-startTime="3257">And this is just a &mdash; </span><span class="line" data-startTime="3258">[GUITAR STOPS] </span></p>

<p class="speaker"><span class="line" data-starttime="3259"><span class="speakerName">Chris Wilson</span>: A single sound </span><span class="line" data-startTime="3259">curve that I created and </span><span class="line" data-startTime="3261">shoved into there. </span> <span class="line" data-startTime="3262">You can actually change these </span><span class="line" data-startTime="3262">curves infinitely. </span> <span class="line" data-startTime="3265">You can give it any size of </span><span class="line" data-startTime="3265">array curve that you want. </span> <span class="line" data-startTime="3269">And you can change what the </span><span class="line" data-startTime="3269">response looks like and get </span><span class="line" data-startTime="3271">very, very different </span><span class="line" data-startTime="3271">distortion effects. </span> <span class="line" data-startTime="3276">OK. </span> <span class="line" data-startTime="3277">Almost there. </span> <span class="line" data-startTime="3280">So I haven't mentioned mono </span><span class="line" data-startTime="3280">sound versus stereo sound, </span><span class="line" data-startTime="3283">versus 5.1 surround sound, </span><span class="line" data-startTime="3283">or anything like that. </span></p>

<p><span class="line" data-startTime="3287">Mostly because the Web Audio </span><span class="line" data-startTime="3287">API, for the most part, just </span><span class="line" data-startTime="3290">kind of handles it for you. </span> <span class="line" data-startTime="3292">You don't have to deal </span><span class="line" data-startTime="3292">with channels. </span> <span class="line" data-startTime="3294">It just sort of magically </span><span class="line" data-startTime="3294">upgrades whenever it needs to </span><span class="line" data-startTime="3297">go to stereo, or if you have a </span><span class="line" data-startTime="3297">mono signal, or upgrades all </span><span class="line" data-startTime="3301">the way to 5.1 surround sound </span><span class="line" data-startTime="3301">if it has to, whatever. </span> <span class="line" data-startTime="3304">If you really do want </span><span class="line" data-startTime="3304">to poke into channel </span><span class="line" data-startTime="3306">control, you can do that. </span> <span class="line" data-startTime="3308">Most of those connections may </span><span class="line" data-startTime="3308">be more than one channel. </span> <span class="line" data-startTime="3312">And you just don't have to worry </span><span class="line" data-startTime="3312">about whether it's a </span><span class="line" data-startTime="3315">mono or stereo signal. </span> <span class="line" data-startTime="3317">If you want to, use an audio </span><span class="line" data-startTime="3317">channel splitter and an audio </span><span class="line" data-startTime="3320">channel merger. </span> <span class="line" data-startTime="3322">So for example, I mentioned </span><span class="line" data-startTime="3322">a ping-pong delay. </span> <span class="line" data-startTime="3325">Ping-pong delay bounces the </span><span class="line" data-startTime="3325">delay back and forth between </span><span class="line" data-startTime="3328">the left and the </span><span class="line" data-startTime="3328">right channels. </span></p>

<p><span class="line" data-startTime="3329">So it sounds kind </span><span class="line" data-startTime="3329">of like this &mdash; </span><span class="line" data-startTime="3331">[BELL DINGS] </span></p>

<p class="speaker"><span class="line" data-starttime="3334"><span class="speakerName">Chris Wilson</span>: Hopefully you hear </span><span class="line" data-startTime="3334">that bouncing between the </span><span class="line" data-startTime="3336">channels back there. </span><span class="line" data-startTime="3337">[BELL DINGS] </span></p>

<p class="speaker"><span class="line" data-starttime="3338"><span class="speakerName">Chris Wilson</span>: You'd accomplish </span><span class="line" data-startTime="3338">this just by taking two </span><span class="line" data-startTime="3341">delays, feeding the original </span><span class="line" data-startTime="3341">signal into one side, </span><span class="line" data-startTime="3343">[BELL DINGS] </span></p>

<p class="speaker"><span class="line" data-starttime="3344"><span class="speakerName">Chris Wilson</span>: And then crossing </span><span class="line" data-startTime="3344">the feedback loop. </span> <span class="line" data-startTime="3345">So it goes from the left channel </span><span class="line" data-startTime="3345">output into the right </span><span class="line" data-startTime="3348">channel's delay node and </span><span class="line" data-startTime="3348">then back the same </span><span class="line" data-startTime="3351">way the other direction. </span> <span class="line" data-startTime="3354">And, of course, you can </span><span class="line" data-startTime="3354">individually control in here </span><span class="line" data-startTime="3357">how long the delay is for each </span><span class="line" data-startTime="3357">side, and that kind of stuff. </span> <span class="line" data-startTime="3362">So I mentioned at the very </span><span class="line" data-startTime="3362">beginning you can actually </span><span class="line" data-startTime="3366">plug in and do any kind of </span><span class="line" data-startTime="3366">custom JavaScript you want to, </span><span class="line" data-startTime="3369">on a sound node. </span> <span class="line" data-startTime="3371">JavaScriptAudioNode is </span><span class="line" data-startTime="3371">how you do that. </span> <span class="line" data-startTime="3373">You plug in, you set up an event </span><span class="line" data-startTime="3373">listener, and then you </span><span class="line" data-startTime="3376">process buffers of audio </span><span class="line" data-startTime="3376">in that event listener. </span> <span class="line" data-startTime="3380">I'm not going to go into </span><span class="line" data-startTime="3380">the demo of this. </span></p>

<p><span class="line" data-startTime="3382">It's really subtle and it takes </span><span class="line" data-startTime="3382">a lot of explaining. </span> <span class="line" data-startTime="3384">And we are at about three </span><span class="line" data-startTime="3384">minutes left, I think. </span> <span class="line" data-startTime="3388">So but this is how you do it. </span> <span class="line" data-startTime="3391">There's some pretty good </span><span class="line" data-startTime="3391">examples of how to do it on </span><span class="line" data-startTime="3394">the Chromium sight. </span> <span class="line" data-startTime="3396">And I want to jump to where </span><span class="line" data-startTime="3396">we are with Web Audio. </span> <span class="line" data-startTime="3399">One of the first questions </span><span class="line" data-startTime="3399">is always, So </span><span class="line" data-startTime="3401">is this Chrome only? </span><span class="line" data-startTime="3403">And it is supported in Chrome, </span><span class="line" data-startTime="3403">Windows, Mac OS, and Linux. </span> <span class="line" data-startTime="3407">ChromeOS actually just </span><span class="line" data-startTime="3407">enabled it, as well. </span> <span class="line" data-startTime="3409">So we have it on Chrome OS. </span> <span class="line" data-startTime="3411">But even more interestingly, </span><span class="line" data-startTime="3411">Safari has now enabled in </span><span class="line" data-startTime="3415">nightly builds and </span><span class="line" data-startTime="3415">it's shipping in </span><span class="line" data-startTime="3416">the Safari 5.2 beta. </span> <span class="line" data-startTime="3418">And, my personal favorite, </span><span class="line" data-startTime="3418">it's now on the </span><span class="line" data-startTime="3420">iOS 6 betas, also. </span> <span class="line" data-startTime="3422">So you can get the Web Audio </span><span class="line" data-startTime="3422">API on your iPhone or iPad. </span></p>

<p><span class="line" data-startTime="3427">Apple actually covered the Web </span><span class="line" data-startTime="3427">Audio API in one of their </span><span class="line" data-startTime="3430">sessions in WWDC earlier </span><span class="line" data-startTime="3430">this month, which </span><span class="line" data-startTime="3433">I thought was great. </span> <span class="line" data-startTime="3435">And we have some really active </span><span class="line" data-startTime="3435">discussion going on on the Web </span><span class="line" data-startTime="3440">Audio working group, of </span><span class="line" data-startTime="3440">which I'm a member. </span> <span class="line" data-startTime="3442">We have a bunch of active </span><span class="line" data-startTime="3442">participants from Mozilla, </span><span class="line" data-startTime="3445">Opera, the Internet Explorer </span><span class="line" data-startTime="3445">team, a bunch of other </span><span class="line" data-startTime="3448">industry people, as well, </span><span class="line" data-startTime="3448">helping to get the </span><span class="line" data-startTime="3451">specification to the point where </span><span class="line" data-startTime="3451">we can get rid of vendor </span><span class="line" data-startTime="3454">prefix and turn it into </span><span class="line" data-startTime="3454">a solid standard. </span> <span class="line" data-startTime="3458">And, of course, if you need </span><span class="line" data-startTime="3458">it today though in other </span><span class="line" data-startTime="3460">browsers, use ChromeFrame. </span></p>

<p><span class="line" data-startTime="3463">I promised I would plug </span><span class="line" data-startTime="3463">for ChromeFrame, so. </span> <span class="line" data-startTime="3466">So we are just about </span><span class="line" data-startTime="3466">out of time. </span> <span class="line" data-startTime="3469">But I did want to call out two </span><span class="line" data-startTime="3469">features that I'm actually </span><span class="line" data-startTime="3472">really excited about coming </span><span class="line" data-startTime="3472">up in the future. </span> <span class="line" data-startTime="3475">They're not quite there yet, so </span><span class="line" data-startTime="3475">I can't demo them, really. </span> <span class="line" data-startTime="3478">But they are exciting. </span> <span class="line" data-startTime="3480">And I also want to kind of </span><span class="line" data-startTime="3480">paint a picture of what I </span><span class="line" data-startTime="3483">really hope people build </span><span class="line" data-startTime="3483">and what I'm really </span><span class="line" data-startTime="3486">excited about building. </span> <span class="line" data-startTime="3488">First and foremost, I'm super </span><span class="line" data-startTime="3488">pumped to have audio input. </span> <span class="line" data-startTime="3493">Jan can tell you I keep pinging </span><span class="line" data-startTime="3493">the team like, When am </span><span class="line" data-startTime="3496">I gonna get my audio input? </span><span class="line" data-startTime="3497">When am I going to get </span><span class="line" data-startTime="3497">my audio input? </span><span class="line" data-startTime="3499">Mostly because I want </span><span class="line" data-startTime="3499">to plug a live </span><span class="line" data-startTime="3501">microphone into my vocoder. </span> <span class="line" data-startTime="3503">And do stuff like that, like </span><span class="line" data-startTime="3503">plug my guitar in and create </span><span class="line" data-startTime="3507">my own guitar amp simulators, </span><span class="line" data-startTime="3507">and stuff like that. </span> <span class="line" data-startTime="3510">Because they're pretty easy to </span><span class="line" data-startTime="3510">do using the Web Audio API. </span> <span class="line" data-startTime="3514">Not quite there yet, hopefully </span><span class="line" data-startTime="3514">will be in the near future. </span></p>

<p><span class="line" data-startTime="3518">The second one is one that is </span><span class="line" data-startTime="3518">a little bit further out. </span> <span class="line" data-startTime="3521">But I'm actually the co-editor </span><span class="line" data-startTime="3521">of a proposal in the W3C to do </span><span class="line" data-startTime="3526">MIDI input. </span> <span class="line" data-startTime="3527">Some of you up front may notice </span><span class="line" data-startTime="3527">that I've actually </span><span class="line" data-startTime="3530">driven some of these demos off </span><span class="line" data-startTime="3530">a little keyboard here. </span> <span class="line" data-startTime="3533">I'm cheating because </span><span class="line" data-startTime="3533">that uses a plugin. </span> <span class="line" data-startTime="3536">And I've just hard-wired the </span><span class="line" data-startTime="3536">plug-in in to do the </span><span class="line" data-startTime="3538">appropriate thing. </span> <span class="line" data-startTime="3540">But the specification that I'm </span><span class="line" data-startTime="3540">co-editing will eventually </span><span class="line" data-startTime="3544">allow us to have that as part </span><span class="line" data-startTime="3544">of the web platform. </span></p>

<p><span class="line" data-startTime="3548">And we can natively just </span><span class="line" data-startTime="3548">handle MIDI input. </span> <span class="line" data-startTime="3550">So you can do controllers, </span><span class="line" data-startTime="3550">you can access external </span><span class="line" data-startTime="3553">synthesizers, you can do all </span><span class="line" data-startTime="3553">kinds of cool stuff. </span> <span class="line" data-startTime="3555">Light shows are generally driven </span><span class="line" data-startTime="3555">by MIDI, as well, like </span><span class="line" data-startTime="3558">all the controllers for the </span><span class="line" data-startTime="3558">fancy lights last night are </span><span class="line" data-startTime="3561">driven through that. </span> <span class="line" data-startTime="3565">Now for awesome apps </span><span class="line" data-startTime="3565">that I really want </span><span class="line" data-startTime="3567">to see people build? </span><span class="line" data-startTime="3568">There's tons of them. </span> <span class="line" data-startTime="3569">First and foremost, great game </span><span class="line" data-startTime="3569">audio, like really richly </span><span class="line" data-startTime="3572">interactive. </span> <span class="line" data-startTime="3573">Don't just make it beep. </span> <span class="line" data-startTime="3575">Make it beep differently </span><span class="line" data-startTime="3575">depending on some parameter I </span><span class="line" data-startTime="3579">can't even think of. </span> <span class="line" data-startTime="3580">Like how fast someone's </span><span class="line" data-startTime="3580">running, or whatever. </span> <span class="line" data-startTime="3582">But we have the tools to build </span><span class="line" data-startTime="3582">shared music composition </span><span class="line" data-startTime="3585">tools, and digital audio </span><span class="line" data-startTime="3585">workstations, and all this </span><span class="line" data-startTime="3587">kind of stuff today. </span> <span class="line" data-startTime="3590">So with that, no deck is </span><span class="line" data-startTime="3590">complete without tons of </span><span class="line" data-startTime="3594">references. </span> <span class="line" data-startTime="3595">You don't have to </span><span class="line" data-startTime="3595">memorize these </span><span class="line" data-startTime="3597">because the deck's posted. </span> <span class="line" data-startTime="3599">You don't even have to memorize </span><span class="line" data-startTime="3599">the thing at the top, </span><span class="line" data-startTime="3601">because it's on my last slide in </span><span class="line" data-startTime="3601">a shortened form and it'll </span><span class="line" data-startTime="3604">be easier to read. </span></p>

<p><span class="line" data-startTime="3606">If you don't already follow </span><span class="line" data-startTime="3606">Chrome developers on Google+, </span><span class="line" data-startTime="3609">please add us to a circle. </span> <span class="line" data-startTime="3611">We do lots of communication </span><span class="line" data-startTime="3611">there. </span> <span class="line" data-startTime="3612">But we do try to keep it nice </span><span class="line" data-startTime="3612">and concise and useful and </span><span class="line" data-startTime="3615">interesting. </span> <span class="line" data-startTime="3617">And with that, thank you. </span> <span class="line" data-startTime="3620">We're basically out of time. </span> <span class="line" data-startTime="3622">But I'm going to </span><span class="line" data-startTime="3622">be around now. </span> <span class="line" data-startTime="3623">I'll be outside once we've </span><span class="line" data-startTime="3623">packed up here. </span> <span class="line" data-startTime="3626">And I'll be doing office hours </span><span class="line" data-startTime="3626">for the next hour or two, too, </span><span class="line" data-startTime="3629">if you have other questions. </span> <span class="line" data-startTime="3630">Thanks. </span> <span class="line" data-startTime="3631">[APPLAUSE] </span></p>