<p class="speaker"><span class="line" data-starttime="10"><span class="speakerName">Pete LePage</span>: Well, welcome </span><span class="line" data-startTime="10">everybody to another addition </span><span class="line" data-startTime="13">"Chrome Apps Office Hours." </span><span class="line" data-startTime="13">Today we've got Joe Marini, </span><span class="line" data-startTime="17">who is joining us from Mountain </span><span class="line" data-startTime="17">View and is going to </span><span class="line" data-startTime="19">be talking about the new Synced </span><span class="line" data-startTime="19">File System APIs. </span><span class="line" data-startTime="24">Joe, why don't I pass it over </span><span class="line" data-startTime="24">to you and you can give it a </span><span class="line" data-startTime="26">little introduction? </span></p>

<p class="speaker"><span class="line" data-starttime="28"><span class="speakerName">Joe Marini</span>: All right, </span><span class="line" data-startTime="28">I appreciate that </span><span class="line" data-startTime="28">Pete, thanks very much. </span> <span class="line" data-startTime="29">Hi everyone, I am Joe Marini. </span> <span class="line" data-startTime="31">I am a developer advocate here </span><span class="line" data-startTime="31">on the Chrome team and I work </span><span class="line" data-startTime="34">on Chrome Apps, Chrome </span><span class="line" data-startTime="34">Extensions, Chrome Web Store, </span><span class="line" data-startTime="38">all things Chrome. </span> <span class="line" data-startTime="39">Chrome all the time, </span><span class="line" data-startTime="39">Chrome everywhere. </span> <span class="line" data-startTime="40">And yes, today I'm going to be </span><span class="line" data-startTime="40">talking about the Sync File </span><span class="line" data-startTime="43">System The Sync File System </span><span class="line" data-startTime="43">API is a new feature. </span></p>

<p><span class="line" data-startTime="47">It's on the bleeding edge. </span> <span class="line" data-startTime="48">It's right now only in M27 </span><span class="line" data-startTime="48">Canary, so if you're going to </span><span class="line" data-startTime="51">follow along with me here or </span><span class="line" data-startTime="51">work on this on your own later </span><span class="line" data-startTime="55">you want to make sure that you </span><span class="line" data-startTime="55">have the version of M27 Canary </span><span class="line" data-startTime="58">build on your computer. </span> <span class="line" data-startTime="60">So the Synchronized File System </span><span class="line" data-startTime="60">is our API addition </span><span class="line" data-startTime="64">that's layered on top of the </span><span class="line" data-startTime="64">existing HTML5 File System for </span><span class="line" data-startTime="68">Chrome Apps and Extensions. </span> <span class="line" data-startTime="70">And it basically allows you to </span><span class="line" data-startTime="70">build apps and extensions that </span><span class="line" data-startTime="73">synchronize data via files </span><span class="line" data-startTime="73">using a cloud back end. </span> <span class="line" data-startTime="81">Now we architected it so it </span><span class="line" data-startTime="81">can work with a variety of </span><span class="line" data-startTime="84">cloud back ends. </span></p>

<p><span class="line" data-startTime="84">Right now the one we </span><span class="line" data-startTime="84">ship with is Drive. </span> <span class="line" data-startTime="87">So if you're using </span><span class="line" data-startTime="87">Google Drive &mdash; </span><span class="line" data-startTime="88">I'm assuming most of you are </span><span class="line" data-startTime="88">familiar with Google Drive &mdash; </span><span class="line" data-startTime="91">you can build applications </span><span class="line" data-startTime="91">that sync files with each </span><span class="line" data-startTime="93">other via the Google </span><span class="line" data-startTime="93">Drive back end. </span> <span class="line" data-startTime="96">Now you might be thinking to </span><span class="line" data-startTime="96">yourself, well, wait a second </span><span class="line" data-startTime="99">the Chrome API already has a </span><span class="line" data-startTime="99">synchronization method for </span><span class="line" data-startTime="102">data, it's called Chrome </span><span class="line" data-startTime="102">storage.sync. </span> <span class="line" data-startTime="104">How is this different </span><span class="line" data-startTime="104">than that? </span><span class="line" data-startTime="106">So look at it this way, Chrome </span><span class="line" data-startTime="106">storage.sync is sort of our </span><span class="line" data-startTime="110">synchronized analog to the </span><span class="line" data-startTime="110">existing local storage </span><span class="line" data-startTime="113">mechanism that you have </span><span class="line" data-startTime="113">in HTML5, right? </span><span class="line" data-startTime="115">You can store individual </span><span class="line" data-startTime="115">objects, pieces of data, and </span><span class="line" data-startTime="118">then using Chrome storage.sync, </span><span class="line" data-startTime="118">you get the same </span><span class="line" data-startTime="120">kind of functionality but it </span><span class="line" data-startTime="120">gets synced between your app </span><span class="line" data-startTime="124">or extension via the </span><span class="line" data-startTime="124">network back end. </span></p>

<p><span class="line" data-startTime="127">And those are for small </span><span class="line" data-startTime="127">individual pieces of data. </span> <span class="line" data-startTime="129">So the Sync File System API is </span><span class="line" data-startTime="129">different in that it's the </span><span class="line" data-startTime="135">synced analog to the </span><span class="line" data-startTime="135">HTML5 File System. </span> <span class="line" data-startTime="139">So for larger pieces of data, </span><span class="line" data-startTime="139">especially those exceeding </span><span class="line" data-startTime="142">several megabytes file size, you </span><span class="line" data-startTime="142">can have the same feature </span><span class="line" data-startTime="146">of syncing via files in addition </span><span class="line" data-startTime="146">to the ability to </span><span class="line" data-startTime="149">sync individual pieces </span><span class="line" data-startTime="149">of data. </span> <span class="line" data-startTime="152">So with that, if you take a look </span><span class="line" data-startTime="152">at the screen over here, </span><span class="line" data-startTime="155">I've got the Sync File </span><span class="line" data-startTime="155">System API up. </span> <span class="line" data-startTime="158">Now again, I want to emphasize </span><span class="line" data-startTime="158">that this is still in </span><span class="line" data-startTime="161">development. </span> <span class="line" data-startTime="162">It's in the Canary, so this </span><span class="line" data-startTime="162">API might change slightly </span><span class="line" data-startTime="164">between now and when you </span><span class="line" data-startTime="164">use it in the future. </span></p>

<p><span class="line" data-startTime="167">So at the moment we have a </span><span class="line" data-startTime="167">couple of additions to the </span><span class="line" data-startTime="170">File System API. </span> <span class="line" data-startTime="171">And it's important to point </span><span class="line" data-startTime="171">out that when you use this </span><span class="line" data-startTime="173">API, the objects you'll be </span><span class="line" data-startTime="173">working with are pretty much </span><span class="line" data-startTime="176">HTML5 File System Objects. </span> <span class="line" data-startTime="179">So for example, you see the </span><span class="line" data-startTime="179">first API call there, </span><span class="line" data-startTime="182">requestFileSystem, that takes </span><span class="line" data-startTime="182">a call back just like the </span><span class="line" data-startTime="185">regular HTML5 File </span><span class="line" data-startTime="185">System one does. </span> <span class="line" data-startTime="188">And it gives you a File System </span><span class="line" data-startTime="188">Object that you can use in </span><span class="line" data-startTime="190">your callback to work </span><span class="line" data-startTime="190">with files. </span> <span class="line" data-startTime="192">So that's how you request </span><span class="line" data-startTime="192">the Sync File System &mdash; </span><span class="line" data-startTime="195">is the requestFileSystem </span><span class="line" data-startTime="195">API call. </span> <span class="line" data-startTime="198">You can also see what the </span><span class="line" data-startTime="198">current usage and quota of the </span><span class="line" data-startTime="202">Sync File System is </span><span class="line" data-startTime="202">by using the Get </span><span class="line" data-startTime="204">Usage and Quota function. </span></p>

<p><span class="line" data-startTime="206">Just a bit of a caveat, right </span><span class="line" data-startTime="206">now for the cloud side of </span><span class="line" data-startTime="209">things, this function probably </span><span class="line" data-startTime="209">isn't going to return the </span><span class="line" data-startTime="213">right information. </span> <span class="line" data-startTime="213">We're working on that, but just </span><span class="line" data-startTime="213">be aware of that if you </span><span class="line" data-startTime="216">try this demo later on. </span> <span class="line" data-startTime="218">So that returns an object </span><span class="line" data-startTime="218">called Storage Info. </span> <span class="line" data-startTime="220">And there's a couple properties </span><span class="line" data-startTime="220">you can look at to </span><span class="line" data-startTime="222">see how much storage you're </span><span class="line" data-startTime="222">using versus how </span><span class="line" data-startTime="225">much your quota is. </span> <span class="line" data-startTime="226">And there's a couple of other </span><span class="line" data-startTime="226">API functions that have to do </span><span class="line" data-startTime="229">with the status of files. </span> <span class="line" data-startTime="231">Because obviously, when you're </span><span class="line" data-startTime="231">working with synchronized </span><span class="line" data-startTime="233">files, there's going to be time </span><span class="line" data-startTime="233">periods when a file is </span><span class="line" data-startTime="237">going from one destination to </span><span class="line" data-startTime="237">another, or it might have </span><span class="line" data-startTime="239">changed and that change </span><span class="line" data-startTime="239">needs to propagate </span><span class="line" data-startTime="241">across all the instances. </span></p>

<p><span class="line" data-startTime="243">So one of these is an </span><span class="line" data-startTime="243">API call, one of </span><span class="line" data-startTime="244">these is an event listener. </span> <span class="line" data-startTime="246">So let's go to the event </span><span class="line" data-startTime="246">listener first, that's the </span><span class="line" data-startTime="248">fourth API down there, and </span><span class="line" data-startTime="248">that's the on-file status </span><span class="line" data-startTime="250">changed event. </span> <span class="line" data-startTime="251">And you use this like </span><span class="line" data-startTime="251">you use any other </span><span class="line" data-startTime="253">Chrome API event listener. </span> <span class="line" data-startTime="254">We have an Add Listener call. </span> <span class="line" data-startTime="256">And the callback that will get </span><span class="line" data-startTime="256">called when the file status </span><span class="line" data-startTime="261">changed event fires is going </span><span class="line" data-startTime="261">to give you a piece of </span><span class="line" data-startTime="263">information about what </span><span class="line" data-startTime="263">it was that changed. </span></p>

<p><span class="line" data-startTime="266">So for example, it'll tell you </span><span class="line" data-startTime="266">the file entry object of the </span><span class="line" data-startTime="268">file that changed. </span> <span class="line" data-startTime="270">It will give you a status </span><span class="line" data-startTime="270">of what the change was. </span> <span class="line" data-startTime="272">And right now the status can be </span><span class="line" data-startTime="272">either synced, pending, or </span><span class="line" data-startTime="275">conflicting. </span> <span class="line" data-startTime="277">The action is the sync action </span><span class="line" data-startTime="277">that's going to take and it </span><span class="line" data-startTime="281">could be either added, </span><span class="line" data-startTime="281">updated, or deleted. </span> <span class="line" data-startTime="283">So it tells you what happened </span><span class="line" data-startTime="283">to the file. </span> <span class="line" data-startTime="285">And the direction is the sync </span><span class="line" data-startTime="285">direction for the event. </span> <span class="line" data-startTime="288">So these directions either could </span><span class="line" data-startTime="288">be going from local to </span><span class="line" data-startTime="290">remote or remote to local. </span></p>

<p><span class="line" data-startTime="292">So the event tells you about </span><span class="line" data-startTime="292">the file change event. </span> <span class="line" data-startTime="298">So going back a little bit, </span><span class="line" data-startTime="298">we have the file status. </span> <span class="line" data-startTime="300">You can actually call this </span><span class="line" data-startTime="300">function at any time on a file </span><span class="line" data-startTime="303">entry that you have and it will </span><span class="line" data-startTime="303">tell you what the status </span><span class="line" data-startTime="305">of the file is. </span> <span class="line" data-startTime="306">Again, it's going to be </span><span class="line" data-startTime="306">synced, pending, or </span><span class="line" data-startTime="307">conflicting. </span> <span class="line" data-startTime="309">Currently, we don't have </span><span class="line" data-startTime="309">an API to help you </span><span class="line" data-startTime="312">with resolving conflicts. </span> <span class="line" data-startTime="314">We are actually considering </span><span class="line" data-startTime="314">working on that. </span> <span class="line" data-startTime="316">So I figure that might come up </span><span class="line" data-startTime="316">in the questions later, but </span><span class="line" data-startTime="319">let me just get that out </span><span class="line" data-startTime="319">of the way right now. </span> <span class="line" data-startTime="321">There's no dedicated API right </span><span class="line" data-startTime="321">now to resolve conflicts, but </span><span class="line" data-startTime="324">that is something that we're </span><span class="line" data-startTime="324">looking very seriously at. </span></p>

<p><span class="line" data-startTime="327">OK, so that's the API. </span> <span class="line" data-startTime="329">Let me take a look over here in </span><span class="line" data-startTime="329">the Google Chrome GitHub. </span> <span class="line" data-startTime="333">So the sample app I'm going to </span><span class="line" data-startTime="333">be showing you today is called </span><span class="line" data-startTime="335">the syncfs-editor project. </span> <span class="line" data-startTime="338">And if you go to GitHub under </span><span class="line" data-startTime="338">the Google Chrome category, </span><span class="line" data-startTime="342">you scroll down here, you'll see </span><span class="line" data-startTime="342">it's this guy right here, </span><span class="line" data-startTime="344">syncfs-editor. </span></p>

<p class="speaker"><span class="line" data-starttime="345"><span class="speakerName">Pete LePage</span>: Cool. </span><span class="line" data-startTime="345">And the link for that is </span><span class="line" data-startTime="345">up on screen for those </span><span class="line" data-startTime="348">folks who are watching. </span></p>

<p class="speaker"><span class="line" data-starttime="349"><span class="speakerName">Joe Marini</span>: OK, great. </span> <span class="line" data-startTime="350">So that link right there. </span> <span class="line" data-startTime="351">So when I click on it, you can </span><span class="line" data-startTime="351">see this is the code I'm going </span><span class="line" data-startTime="354">to be working with. </span> <span class="line" data-startTime="354">So if you want to follow along </span><span class="line" data-startTime="354">or download it for later, this </span><span class="line" data-startTime="357">is where you go to get it. </span> <span class="line" data-startTime="358">All right, let me jump over to </span><span class="line" data-startTime="358">my Extensions tab because I've </span><span class="line" data-startTime="361">now got this loaded </span><span class="line" data-startTime="361">as an unpacked </span><span class="line" data-startTime="363">extension in my Canary. </span> <span class="line" data-startTime="364">And I'm going to go ahead </span><span class="line" data-startTime="364">and launch it. </span> <span class="line" data-startTime="367">And let me bring it down </span><span class="line" data-startTime="367">so we can all see it. </span> <span class="line" data-startTime="371">OK. </span></p>

<p><span class="line" data-startTime="372">So this is the app. </span> <span class="line" data-startTime="372">Now it's pretty straightforward, </span><span class="line" data-startTime="372">basic </span><span class="line" data-startTime="374">application. </span> <span class="line" data-startTime="375">On the right-hand side there, </span><span class="line" data-startTime="375">you see an editing area. </span> <span class="line" data-startTime="378">On the left-hand side, there's </span><span class="line" data-startTime="378">an area where file information </span><span class="line" data-startTime="381">is going to show up. </span> <span class="line" data-startTime="382">And I've got two buttons </span><span class="line" data-startTime="382">on the top there. </span> <span class="line" data-startTime="384">One is called Syncable, one </span><span class="line" data-startTime="384">is called Temporary. </span> <span class="line" data-startTime="386">This particular sample app </span><span class="line" data-startTime="386">uses both the HTML5 File </span><span class="line" data-startTime="390">System's temporary storage so </span><span class="line" data-startTime="390">that you can contrast its </span><span class="line" data-startTime="392">usage with the Syncable </span><span class="line" data-startTime="392">File System. </span></p>

<p><span class="line" data-startTime="395">So let's just go ahead </span><span class="line" data-startTime="395">and create a file. </span> <span class="line" data-startTime="397">I'm going to go to my text area </span><span class="line" data-startTime="397">and I'm just going to </span><span class="line" data-startTime="400">type, you know, this </span><span class="line" data-startTime="400">is a file. </span> <span class="line" data-startTime="403">And I'm going to click </span><span class="line" data-startTime="403">the Save As button. </span> <span class="line" data-startTime="406">And I'll save it as, let's </span><span class="line" data-startTime="406">see, testfile1.txt. </span> <span class="line" data-startTime="411">I'll click Save. </span> <span class="line" data-startTime="412">Now watch the left-hand column </span><span class="line" data-startTime="412">over there underneath where it </span><span class="line" data-startTime="415">says Usage and Reload. </span> <span class="line" data-startTime="417">I'm going to click Save. </span> <span class="line" data-startTime="418">So you can see now that it's &mdash; </span><span class="line" data-startTime="418">there's that little icon </span><span class="line" data-startTime="421">showing that it's syncing. </span> <span class="line" data-startTime="422">And you could see &mdash; oh, in this </span><span class="line" data-startTime="422">case, it looks like have </span><span class="line" data-startTime="424">a little bit of an error. </span> <span class="line" data-startTime="425">So I'm wondering if it's because </span><span class="line" data-startTime="425">my authentication in </span><span class="line" data-startTime="428">my Google Drive ran out. </span> <span class="line" data-startTime="430">But in any case, you can see </span><span class="line" data-startTime="430">that we're taking advantage of </span><span class="line" data-startTime="432">the status changed events there </span><span class="line" data-startTime="432">to update the icon that </span><span class="line" data-startTime="436">goes with the file. </span></p>

<p><span class="line" data-startTime="437">So in this case, it looks </span><span class="line" data-startTime="437">like the sync broke. </span> <span class="line" data-startTime="440">Let me just make </span><span class="line" data-startTime="440">a change to it. </span> <span class="line" data-startTime="442">Click Save. </span> <span class="line" data-startTime="445">And it's applying the </span><span class="line" data-startTime="445">local change. </span> <span class="line" data-startTime="447">Yeah, I think my authentication </span><span class="line" data-startTime="447">probably timed </span><span class="line" data-startTime="450">out on me in Google Drive. </span> <span class="line" data-startTime="452">But anyway, that's not </span><span class="line" data-startTime="452">why we're here. </span> <span class="line" data-startTime="453">We're not here to &mdash; </span><span class="line" data-startTime="455">let's just go over to the code </span><span class="line" data-startTime="455">and see what's going on. </span> <span class="line" data-startTime="458">All right. </span> <span class="line" data-startTime="460">So this is the code for the </span><span class="line" data-startTime="460">sample and let me start off by </span><span class="line" data-startTime="463">taking a look at </span><span class="line" data-startTime="463">the HTML file. </span> <span class="line" data-startTime="466">So this is the user interface </span><span class="line" data-startTime="466">for the sample. </span> <span class="line" data-startTime="469">You can see that it's </span><span class="line" data-startTime="469">an HTML file. </span></p>

<p><span class="line" data-startTime="470">It's pretty simple, basically </span><span class="line" data-startTime="470">just a bunch of divs that hold </span><span class="line" data-startTime="473">the editor and the area where </span><span class="line" data-startTime="473">we see file information, </span><span class="line" data-startTime="476">that's pretty much about it. </span> <span class="line" data-startTime="478">There's also a couple of classes </span><span class="line" data-startTime="478">that we build, one is </span><span class="line" data-startTime="480">called the Editor class. </span> <span class="line" data-startTime="482">This basically handles all the </span><span class="line" data-startTime="482">text editing for the sample. </span> <span class="line" data-startTime="485">So if you want to look in here </span><span class="line" data-startTime="485">to see how we're doing, for </span><span class="line" data-startTime="487">example, showing the dialogue </span><span class="line" data-startTime="487">or building the editor, </span><span class="line" data-startTime="491">that's up to you. </span> <span class="line" data-startTime="492">So there's another class we </span><span class="line" data-startTime="492">have called the Filer. </span> <span class="line" data-startTime="495">This class, again, just a </span><span class="line" data-startTime="495">bunch of utilities for </span><span class="line" data-startTime="499">wrapping various file operations </span><span class="line" data-startTime="499">that we have to do. </span></p>

<p><span class="line" data-startTime="502">So let me show you first </span><span class="line" data-startTime="502">the Manifest. </span> <span class="line" data-startTime="504">Again, all applications and </span><span class="line" data-startTime="504">extensions for Chrome have a </span><span class="line" data-startTime="507">Manifest file. </span> <span class="line" data-startTime="508">And to use the Sync File System, </span><span class="line" data-startTime="508">I simply need to </span><span class="line" data-startTime="510">specify the Sync File System </span><span class="line" data-startTime="510">permission here in my </span><span class="line" data-startTime="514">Manifest, and nothing </span><span class="line" data-startTime="514">special beyond that. </span> <span class="line" data-startTime="517">So once I've got the permission </span><span class="line" data-startTime="517">specified, I can </span><span class="line" data-startTime="520">start using the API. </span> <span class="line" data-startTime="522">Now this here, the main .js </span><span class="line" data-startTime="522">file, this is where we set up </span><span class="line" data-startTime="527">the Synchronized File </span><span class="line" data-startTime="527">System for use. </span> <span class="line" data-startTime="530">So here at the top we have an </span><span class="line" data-startTime="530">event listener for when the </span><span class="line" data-startTime="533">DOM content loads. </span></p>

<p><span class="line" data-startTime="535">And what we're doing is seeing </span><span class="line" data-startTime="535">if we support the Synchronized </span><span class="line" data-startTime="539">File System. </span> <span class="line" data-startTime="540">So the support Sync File System </span><span class="line" data-startTime="540">Boolean right here is </span><span class="line" data-startTime="543">set by seeing if we're </span><span class="line" data-startTime="543">in Chrome. </span> <span class="line" data-startTime="545">And if we've got the Chrome </span><span class="line" data-startTime="545">Sync File System Object, </span><span class="line" data-startTime="547">that's great. </span> <span class="line" data-startTime="548">And if we support it, then </span><span class="line" data-startTime="548">we're going to call this </span><span class="line" data-startTime="549">function here called Open the </span><span class="line" data-startTime="549">Syncable File System. </span> <span class="line" data-startTime="553">So let's scroll down. </span> <span class="line" data-startTime="555">All right. </span> <span class="line" data-startTime="556">The function for opening the </span><span class="line" data-startTime="556">Syncable File System </span><span class="line" data-startTime="560">essentially checks to see that </span><span class="line" data-startTime="560">we're in Chrome and then calls </span><span class="line" data-startTime="563">the requestFileSystem function </span><span class="line" data-startTime="563">that I talked about </span><span class="line" data-startTime="566">earlier in the API. </span> <span class="line" data-startTime="568">Check to see if we got </span><span class="line" data-startTime="568">any kind of error. </span> <span class="line" data-startTime="570">And assuming everything is OK, </span><span class="line" data-startTime="570">we have this function here </span><span class="line" data-startTime="574">called onFileSystemOpened. </span></p>

<p><span class="line" data-startTime="576">And in onFileSystemOpened, we </span><span class="line" data-startTime="576">just blog a message out to the </span><span class="line" data-startTime="580">console saying, hey, we got the </span><span class="line" data-startTime="580">file system, everything </span><span class="line" data-startTime="583">seems to be OK. </span> <span class="line" data-startTime="584">We create a new editor, we </span><span class="line" data-startTime="584">create a new file to go with </span><span class="line" data-startTime="586">it, and then we're </span><span class="line" data-startTime="586">off and running. </span> <span class="line" data-startTime="588">So let's go over to </span><span class="line" data-startTime="588">the filer class. </span> <span class="line" data-startTime="592">And let's &mdash; </span><span class="line" data-startTime="592">I'm just going to do a quick </span><span class="line" data-startTime="592">search for the usage. </span> <span class="line" data-startTime="598">Show Usage, there it is. </span> <span class="line" data-startTime="601">And here in the Show Usage </span><span class="line" data-startTime="601">function, this is where we're </span><span class="line" data-startTime="605">calling the Sync File System's </span><span class="line" data-startTime="605">Get Usage and Quota function </span><span class="line" data-startTime="609">to see how much of our quota </span><span class="line" data-startTime="609">we have and how much of it </span><span class="line" data-startTime="613">that we are using. </span></p>

<p><span class="line" data-startTime="614">And then let's go ahead and </span><span class="line" data-startTime="614">take a look at the status </span><span class="line" data-startTime="618">changed message. </span> <span class="line" data-startTime="620">So down here in this function </span><span class="line" data-startTime="620">where we create the filer we </span><span class="line" data-startTime="627">set up, assuming that we're </span><span class="line" data-startTime="627">using the Syncable File System </span><span class="line" data-startTime="630">instead of the temporary one, </span><span class="line" data-startTime="630">we're setting up our event </span><span class="line" data-startTime="633">listener to see if the file </span><span class="line" data-startTime="633">status has changed. </span> <span class="line" data-startTime="637">And then if the service status </span><span class="line" data-startTime="637">has changed, we have those two </span><span class="line" data-startTime="640">event handlers. </span> <span class="line" data-startTime="641">And that's what's going to get </span><span class="line" data-startTime="641">triggered when &mdash; so, for </span><span class="line" data-startTime="643">example, if I make a change to </span><span class="line" data-startTime="643">the file on this side or if I </span><span class="line" data-startTime="646">go to another instance of my </span><span class="line" data-startTime="646">app running on another </span><span class="line" data-startTime="648">computer and I make a change </span><span class="line" data-startTime="648">on that side, this is the </span><span class="line" data-startTime="651">event that will get triggered. </span> <span class="line" data-startTime="653">So pretty straightforward, </span><span class="line" data-startTime="653">simple API. </span> <span class="line" data-startTime="656">From here on out it's just </span><span class="line" data-startTime="656">HTML5 File System calls. </span></p>

<p><span class="line" data-startTime="660">So, for example, if </span><span class="line" data-startTime="660">we scroll down &mdash; </span><span class="line" data-startTime="663">I'll just do a search for </span><span class="line" data-startTime="663">the getRoot, fs.root. </span> <span class="line" data-startTime="671">And that is in &mdash; </span><span class="line" data-startTime="673">hang on a second. </span> <span class="line" data-startTime="674">There we go. </span> <span class="line" data-startTime="677">Let me find the Save. </span> <span class="line" data-startTime="678">Where's the Save? </span><span class="line" data-startTime="682">Oh, it's in the &mdash; sorry, </span><span class="line" data-startTime="682">it's in the utilities. </span> <span class="line" data-startTime="684">There's a utilities </span><span class="line" data-startTime="684">thing in here. </span> <span class="line" data-startTime="688">And it's &mdash; </span><span class="line" data-startTime="689">oh no, sorry, it's </span><span class="line" data-startTime="689">in the editor. </span> <span class="line" data-startTime="692">There we go, there's the Save. </span> <span class="line" data-startTime="694">So here we have the methods </span><span class="line" data-startTime="694">that are going to handle </span><span class="line" data-startTime="699">things like opening, loading, </span><span class="line" data-startTime="699">and saving files. </span> <span class="line" data-startTime="701">And you can see that from here </span><span class="line" data-startTime="701">on out, it's just using </span><span class="line" data-startTime="704">regular old HTML5 File </span><span class="line" data-startTime="704">System APIs. </span></p>

<p><span class="line" data-startTime="708">So here's the File System </span><span class="line" data-startTime="708">root, getFile. </span> <span class="line" data-startTime="710">If you've done any work with </span><span class="line" data-startTime="710">the HTML5 File System, this </span><span class="line" data-startTime="713">will probably look </span><span class="line" data-startTime="713">familiar to you. </span> <span class="line" data-startTime="714">It's creating blobs, saving </span><span class="line" data-startTime="714">blob URLs out to the file. </span> <span class="line" data-startTime="718">So what we've done here </span><span class="line" data-startTime="718">essentially, just to sum up, </span><span class="line" data-startTime="721">is we've taken the HTML5 File </span><span class="line" data-startTime="721">System and we've layered our </span><span class="line" data-startTime="724">syncing architecture on top of </span><span class="line" data-startTime="724">it so that you can build </span><span class="line" data-startTime="726">applications that sync </span><span class="line" data-startTime="726">files to and from a </span><span class="line" data-startTime="730">remote cloud service. </span> <span class="line" data-startTime="732">This case, Google Drive. </span></p>

<p><span class="line" data-startTime="733">In the future, who knows? </span><span class="line" data-startTime="734">But using this API, once it goes </span><span class="line" data-startTime="734">into Stable, you'll be </span><span class="line" data-startTime="737">able to build extensions and </span><span class="line" data-startTime="737">apps that built synced files. </span></p>

<p class="speaker"><span class="line" data-starttime="742"><span class="speakerName">Pete LePage</span>: Sweet. </span><span class="line" data-startTime="743">Very cool. </span></p>

<p class="speaker"><span class="line" data-starttime="744"><span class="speakerName">Joe Marini</span>: Yeah. </span><span class="line" data-startTime="744">Yeah, it is very cool. </span><span class="line" data-startTime="746">I've been playing around with </span><span class="line" data-startTime="746">it and seems to work pretty </span><span class="line" data-startTime="749">well, assuming that you're </span><span class="line" data-startTime="749">authenticated properly. </span><span class="line" data-startTime="752">So I think now might be a good </span><span class="line" data-startTime="752">moment to check to see if we </span><span class="line" data-startTime="755">have any questions. </span></p>

<p class="speaker"><span class="line" data-starttime="757"><span class="speakerName">Pete LePage</span>: Yeah, I think </span><span class="line" data-startTime="757">there are a couple of </span><span class="line" data-startTime="758">questions up there. </span></p>

<p class="speaker"><span class="line" data-starttime="759"><span class="speakerName">Joe Marini</span>: OK, great. </span></p>

<p class="speaker"><span class="line" data-starttime="759"><span class="speakerName">Pete LePage</span>: So I'm looking at </span><span class="line" data-startTime="759">one from Brian Tredaway in </span><span class="line" data-startTime="764">Washington &mdash; </span><span class="line" data-startTime="765">wants to know, can I read any </span><span class="line" data-startTime="765">files from the user's Google </span><span class="line" data-startTime="769">Drive with these APIs, or </span><span class="line" data-startTime="769">am I limited to only </span><span class="line" data-startTime="772">stuff I've put up there? </span></p>

<p class="speaker"><span class="line" data-starttime="774"><span class="speakerName">Joe Marini</span>: Yup, that's </span><span class="line" data-startTime="774">a great question. </span><span class="line" data-startTime="776">Yeah. </span><span class="line" data-startTime="776">Yeah, that's a great </span><span class="line" data-startTime="776">question, Brian. </span><span class="line" data-startTime="778">So right now, and I think for </span><span class="line" data-startTime="778">the foreseeable future, the </span><span class="line" data-startTime="780">way that it works is &mdash; </span><span class="line" data-startTime="781">again, this works the same way </span><span class="line" data-startTime="781">as the HTML5 File System does, </span><span class="line" data-startTime="785">so each app gets its own per-app </span><span class="line" data-startTime="785">sandboxed File System </span><span class="line" data-startTime="791">that just happens to be on </span><span class="line" data-startTime="791">the user's Google Drive. </span><span class="line" data-startTime="794">And it's important to point </span><span class="line" data-startTime="794">out that the user doesn't </span><span class="line" data-startTime="797">actually see the folder where </span><span class="line" data-startTime="797">these files go by default in </span><span class="line" data-startTime="802">their Google Drive interface. </span></p>

<p class="speaker"><span class="line" data-starttime="803"><span class="speakerName">Pete LePage</span>: Interesting, OK. </span></p>

<p class="speaker"><span class="line" data-starttime="804"><span class="speakerName">Joe Marini</span>: A power user can </span><span class="line" data-startTime="804">search for the file and it'll </span><span class="line" data-startTime="806">show up in the All Items view </span><span class="line" data-startTime="806">and then they can see the name </span><span class="line" data-startTime="809">of the folder. </span><span class="line" data-startTime="810">Essentially, the name of the </span><span class="line" data-startTime="810">folder is the same ID as the </span><span class="line" data-startTime="813">app or the extension that's </span><span class="line" data-startTime="813">creating the file. </span></p>

<p class="speaker"><span class="line" data-starttime="815"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="815"><span class="speakerName">Joe Marini</span>: So that's how we </span><span class="line" data-startTime="815">keep track of the instances. </span><span class="line" data-startTime="817">But no, you only have access to </span><span class="line" data-startTime="817">your Sandbox, which is the </span><span class="line" data-startTime="820">same way that the existing </span><span class="line" data-startTime="820">HTML5 File </span><span class="line" data-startTime="824">System API works today. </span></p>

<p class="speaker"><span class="line" data-starttime="825"><span class="speakerName">Pete LePage</span>: Cool, OK. </span><span class="line" data-startTime="827">So in that same way, then, if </span><span class="line" data-startTime="827">the user wants to delete stuff </span><span class="line" data-startTime="832">after they've installed the </span><span class="line" data-startTime="832">directory, does it get deleted </span><span class="line" data-startTime="835">automatically or do they </span><span class="line" data-startTime="835">have to go find it </span><span class="line" data-startTime="837">and then delete it? </span></p>

<p class="speaker"><span class="line" data-starttime="838"><span class="speakerName">Joe Marini</span>: Yeah, so what's </span><span class="line" data-startTime="838">going to happen is &mdash; </span><span class="line" data-startTime="839">so file management is done </span><span class="line" data-startTime="839">either through your app or, if </span><span class="line" data-startTime="843">you're app gets blown away, then </span><span class="line" data-startTime="843">your data will get blown </span><span class="line" data-startTime="847">away as well. </span></p>

<p class="speaker"><span class="line" data-starttime="850"><span class="speakerName">Pete LePage</span>: That's an </span><span class="line" data-startTime="850">interesting scenario. </span><span class="line" data-startTime="852">That's something that I think </span><span class="line" data-startTime="852">we'd probably like to hear </span><span class="line" data-startTime="854">feedback from you guys who are </span><span class="line" data-startTime="854">watching today about this. </span></p>

<p class="speaker"><span class="line" data-starttime="857"><span class="speakerName">Joe Marini</span>: Yes, exactly. </span><span class="line" data-startTime="858">And again, just to emphasize </span><span class="line" data-startTime="858">that point even further, we're </span><span class="line" data-startTime="862">still in Canary on this. </span><span class="line" data-startTime="863">There's plenty of time for </span><span class="line" data-startTime="863">you to give us feedback. </span><span class="line" data-startTime="865">We'd love to hear from you on </span><span class="line" data-startTime="865">our forums and on our D+ page. </span><span class="line" data-startTime="867">So anything that you'd like to </span><span class="line" data-startTime="867">see the API do or not do, or </span><span class="line" data-startTime="872">do differently, please, please </span><span class="line" data-startTime="872">speak up, let us know. </span><span class="line" data-startTime="875">We want to make this useful for </span><span class="line" data-startTime="875">all of you in your apps. </span></p>

<p class="speaker"><span class="line" data-starttime="878"><span class="speakerName">Pete LePage</span>: Cool. </span><span class="line" data-startTime="880">So this is my question, this is </span><span class="line" data-startTime="880">not one from our list, but </span><span class="line" data-startTime="884">you were talking about your </span><span class="line" data-startTime="884">authentication expired. </span><span class="line" data-startTime="886">How does authentication </span><span class="line" data-startTime="886">work for this? </span><span class="line" data-startTime="891">How does it know where </span><span class="line" data-startTime="891">to go and what to do? </span></p>

<p class="speaker"><span class="line" data-starttime="894"><span class="speakerName">Joe Marini</span>: Great question. </span><span class="line" data-startTime="895">Yeah, so by default, the Sync </span><span class="line" data-startTime="895">File System works by using </span><span class="line" data-startTime="900">whatever the signed-in </span><span class="line" data-startTime="900">profile of Chrome is. </span><span class="line" data-startTime="904">So if you're signed into a </span><span class="line" data-startTime="904">specific profile in your </span><span class="line" data-startTime="908">Chrome Runtime, that's the </span><span class="line" data-startTime="908">profile it's going to use for </span><span class="line" data-startTime="912">the Google Drive </span><span class="line" data-startTime="912">authentication. </span><span class="line" data-startTime="913">So assuming that you're </span><span class="line" data-startTime="913">authenticated into Google </span><span class="line" data-startTime="916">Drive and you've got everything </span><span class="line" data-startTime="916">set up properly </span><span class="line" data-startTime="919">that you normally would anyway, </span><span class="line" data-startTime="919">which if you've got </span><span class="line" data-startTime="922">Google Drive installed on your </span><span class="line" data-startTime="922">machine, you've got your </span><span class="line" data-startTime="924">credentials stored in Google </span><span class="line" data-startTime="924">Drive, it's going to use </span><span class="line" data-startTime="928">whatever the profile is that's </span><span class="line" data-startTime="928">currently signed in. </span></p>

<p class="speaker"><span class="line" data-starttime="930"><span class="speakerName">Pete LePage</span>: OK, yeah. </span><span class="line" data-startTime="931">That makes perfect sense. </span></p>

<p class="speaker"><span class="line" data-starttime="933"><span class="speakerName">Joe Marini</span>: Yes, exactly. </span></p>

<p class="speaker"><span class="line" data-starttime="933"><span class="speakerName">Pete LePage</span>: Cool. </span><span class="line" data-startTime="934">So A.A. from somewhere here in </span><span class="line" data-startTime="934">the US wants to know are the </span><span class="line" data-startTime="938">files synced in chunks </span><span class="line" data-startTime="938">or as full files? </span></p>

<p class="speaker"><span class="line" data-starttime="942"><span class="speakerName">Joe Marini</span>: That's </span><span class="line" data-startTime="942">a good question. </span><span class="line" data-startTime="943">I'm not deeply familiar </span><span class="line" data-startTime="943">with exactly how </span><span class="line" data-startTime="947">the files are synced. </span><span class="line" data-startTime="949">It's whatever the Google Drive </span><span class="line" data-startTime="949">back end is using. </span><span class="line" data-startTime="953">I believe they're synced </span><span class="line" data-startTime="953">as chunks, but I'm </span><span class="line" data-startTime="956">not entirely sure. </span><span class="line" data-startTime="958">What I'll do is I'll </span><span class="line" data-startTime="958">go check on that. </span><span class="line" data-startTime="961">Do me a favor, just post that </span><span class="line" data-startTime="961">question in our forum so that </span><span class="line" data-startTime="964">way I have a marker for it </span><span class="line" data-startTime="964">and I can respond so that </span><span class="line" data-startTime="966">everybody can see the answer. </span></p>

<p class="speaker"><span class="line" data-starttime="967"><span class="speakerName">Pete LePage</span>: Cool. </span><span class="line" data-startTime="968">So here's another question </span><span class="line" data-startTime="968">from me. </span><span class="line" data-startTime="972">So if I go on one computer and </span><span class="line" data-startTime="972">I create a whole bunch of </span><span class="line" data-startTime="976">files and they get pushed up </span><span class="line" data-startTime="976">to Drive and then I go to a </span><span class="line" data-startTime="979">different computer, are those </span><span class="line" data-startTime="979">files pulled down and sitting </span><span class="line" data-startTime="983">locally on my other computer, or </span><span class="line" data-startTime="983">are they only grabbed from </span><span class="line" data-startTime="987">Google Drive when my app </span><span class="line" data-startTime="987">goes and asks for them? </span></p>

<p class="speaker"><span class="line" data-starttime="991"><span class="speakerName">Joe Marini</span>: So no, they are </span><span class="line" data-startTime="991">synced the same way that </span><span class="line" data-startTime="994">Google Drive syncs </span><span class="line" data-startTime="994">other files. </span></p>

<p class="speaker"><span class="line" data-starttime="996"><span class="speakerName">Pete LePage</span>: OK. </span></p>

<p class="speaker"><span class="line" data-starttime="997"><span class="speakerName">Joe Marini</span>: So the cloud service </span><span class="line" data-startTime="997">back end &mdash; in this </span><span class="line" data-startTime="1000">case, Google Drive &mdash; </span><span class="line" data-startTime="1002">just syncs files </span><span class="line" data-startTime="1002">automatically. </span><span class="line" data-startTime="1005">It uses that feature to sync </span><span class="line" data-startTime="1005">the files, that way it </span><span class="line" data-startTime="1008">abstracts that notion away </span><span class="line" data-startTime="1008">from your app, right? </span></p>

<p class="speaker"><span class="line" data-starttime="1010"><span class="speakerName">Pete LePage</span>: Right. </span></p>

<p class="speaker"><span class="line" data-starttime="1010"><span class="speakerName">Joe Marini</span>: Your app doesn't </span><span class="line" data-startTime="1010">have to worry about, well, </span><span class="line" data-startTime="1012">when do I ask for </span><span class="line" data-startTime="1012">a file and did I </span><span class="line" data-startTime="1016">remember to ask this file? </span><span class="line" data-startTime="1017">And when did I last </span><span class="line" data-startTime="1017">ask for this file? </span><span class="line" data-startTime="1018">And so it lets Google Drive do </span><span class="line" data-startTime="1018">what Google Drive does best, </span><span class="line" data-startTime="1022">which is handle the mechanics </span><span class="line" data-startTime="1022">and the timing of syncing. </span></p>

<p class="speaker"><span class="line" data-starttime="1025"><span class="speakerName">Pete LePage</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1025"><span class="speakerName">Joe Marini</span>: And that's why that </span><span class="line" data-startTime="1025">event for handling the </span><span class="line" data-startTime="1028">status change is so important. </span><span class="line" data-startTime="1030">So that way it abstracts away </span><span class="line" data-startTime="1030">when things happen to you and </span><span class="line" data-startTime="1033">just lets you know hey, </span><span class="line" data-startTime="1033">this file changed. </span><span class="line" data-startTime="1036">Or when you change the file, you </span><span class="line" data-startTime="1036">don't have to remember it </span><span class="line" data-startTime="1038">to push things up, </span><span class="line" data-startTime="1038">it just happens. </span><span class="line" data-startTime="1040">So it's all handled in the </span><span class="line" data-startTime="1040">background for you by Drive. </span></p>

<p class="speaker"><span class="line" data-starttime="1043"><span class="speakerName">Pete LePage</span>: Cool. </span><span class="line" data-startTime="1044">Awesome. </span><span class="line" data-startTime="1045">Well, I think that's all </span><span class="line" data-startTime="1045">the time we have &mdash; </span><span class="line" data-startTime="1048">well, actually it's not all the </span><span class="line" data-startTime="1048">time, but those are all </span><span class="line" data-startTime="1050">the questions that </span><span class="line" data-startTime="1050">we have today. </span><span class="line" data-startTime="1052">So I want to say thanks Joe </span><span class="line" data-startTime="1052">for joining us and talking </span><span class="line" data-startTime="1056">about this and giving us a good </span><span class="line" data-startTime="1056">overview and a little bit </span><span class="line" data-startTime="1059">of a deep dive. </span><span class="line" data-startTime="1061">You're going to be </span><span class="line" data-startTime="1061">back next week. </span><span class="line" data-startTime="1063">We're going to be </span><span class="line" data-startTime="1063">talking about &mdash; </span><span class="line" data-startTime="1066">I keep forgetting this and </span><span class="line" data-startTime="1066">it's, like, we've been </span><span class="line" data-startTime="1068">talking about it. </span></p>

<p class="speaker"><span class="line" data-starttime="1069"><span class="speakerName">Joe Marini</span>: It's the </span><span class="line" data-startTime="1069">interapp messaging. </span></p>

<p class="speaker"><span class="line" data-starttime="1069"><span class="speakerName">Pete LePage</span>: That's what </span><span class="line" data-startTime="1069">it is, thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="1070"><span class="speakerName">Joe Marini</span>: So I'll be showing </span><span class="line" data-startTime="1070">you how to send messages from </span><span class="line" data-startTime="1073">one app to another, even to an </span><span class="line" data-startTime="1073">extension running inside </span><span class="line" data-startTime="1077">Chrome proper. </span></p>

<p class="speaker"><span class="line" data-starttime="1078"><span class="speakerName">Pete LePage</span>: That's </span><span class="line" data-startTime="1078">a good one, yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1079"><span class="speakerName">Joe Marini</span>: Yeah, so next week </span><span class="line" data-startTime="1079">should be interesting, we've </span><span class="line" data-startTime="1081">had lots of requests for this. </span><span class="line" data-startTime="1083">And we now have an API that lets </span><span class="line" data-startTime="1083">you message between apps </span><span class="line" data-startTime="1086">and extensions. </span><span class="line" data-startTime="1086">It's actually really </span><span class="line" data-startTime="1086">pretty cool. </span><span class="line" data-startTime="1088">So yeah, come back next week. </span></p>

<p class="speaker"><span class="line" data-starttime="1090"><span class="speakerName">Pete LePage</span>: Awesome, </span><span class="line" data-startTime="1090">so that's next week. </span></p>

<p class="speaker"><span class="line" data-starttime="1091"><span class="speakerName">Joe Marini</span>: Thanks again, </span><span class="line" data-startTime="1091">for anybody who &mdash; </span><span class="line" data-startTime="1092">Yeah. </span><span class="line" data-startTime="1092">I'm sorry, what? </span></p>

<p class="speaker"><span class="line" data-starttime="1093"><span class="speakerName">Pete LePage</span>: That's next week </span><span class="line" data-startTime="1093">4 o'clock Eastern, 1 o'clock </span><span class="line" data-startTime="1096">Pacific, and adjust time </span><span class="line" data-startTime="1096">zones for wherever else </span><span class="line" data-startTime="1100">you happen to be. </span></p>

<p class="speaker"><span class="line" data-starttime="1101"><span class="speakerName">Joe Marini</span>: Exactly. </span><span class="line" data-startTime="1102">And thanks everybody for showing </span><span class="line" data-startTime="1102">up today to see the </span><span class="line" data-startTime="1105">Synchronized File System API. </span><span class="line" data-startTime="1106">Remember to go to the Google </span><span class="line" data-startTime="1106">Chrome GitHub. </span><span class="line" data-startTime="1109">Take a look at the Chrome </span><span class="line" data-startTime="1109">app samples repository. </span><span class="line" data-startTime="1111">Pull it down, start playing </span><span class="line" data-startTime="1111">with it, start hacking. </span><span class="line" data-startTime="1113">And we're excited to see </span><span class="line" data-startTime="1113">what you guys come up </span><span class="line" data-startTime="1115">with using our APIs. </span></p>

<p class="speaker"><span class="line" data-starttime="1116"><span class="speakerName">Pete LePage</span>: Absolutely. </span><span class="line" data-startTime="1117">All right, well thanks for </span><span class="line" data-startTime="1117">joining, everybody, and we'll </span><span class="line" data-startTime="1120">see you all soon. </span><span class="line" data-startTime="1121">Bye-bye. </span></p>

<p class="speaker"><span class="line" data-starttime="1121"><span class="speakerName">Joe Marini</span>: Thanks. </span></p>