<p><span class="line" data-startTime="8">Hello and welcome to another </span><span class="line" data-startTime="8">episode of GDL IL Google </span><span class="line" data-startTime="12">Developer Live Israel. </span> <span class="line" data-startTime="14">This episode we are going just </span><span class="line" data-startTime="14">to elaborate a bit on the </span><span class="line" data-startTime="18">service site that we showed in </span><span class="line" data-startTime="18">the last episode of the mobile </span><span class="line" data-startTime="22">web app with AppScript. </span> <span class="line" data-startTime="24">And basically, what I would like </span><span class="line" data-startTime="24">to do is to show you the </span><span class="line" data-startTime="27">code that we are leveraging in </span><span class="line" data-startTime="27">AppScript inside our Google </span><span class="line" data-startTime="31">Sheet when we are coming to </span><span class="line" data-startTime="31">build a service site that </span><span class="line" data-startTime="35">would enable us to manage our </span><span class="line" data-startTime="35">content that later on we'll </span><span class="line" data-startTime="41">work with and show inside </span><span class="line" data-startTime="41">the mobile web app. </span> <span class="line" data-startTime="44">So let me share my screen. </span> <span class="line" data-startTime="47">And as you could see </span><span class="line" data-startTime="47">here, this is how </span><span class="line" data-startTime="50">a doc is look like. </span></p>

<p><span class="line" data-startTime="52">And you could see here that I'm </span><span class="line" data-startTime="52">having few fields that I </span><span class="line" data-startTime="57">will ask my editor </span><span class="line" data-startTime="57">to fill for me. </span> <span class="line" data-startTime="61">And in a minute, we'll see how </span><span class="line" data-startTime="61">easy it is to work and get an </span><span class="line" data-startTime="65">address and basically calculate </span><span class="line" data-startTime="65">automatically from </span><span class="line" data-startTime="68">it the [INAUDIBLE] longitude </span><span class="line" data-startTime="68">and latitude. </span> <span class="line" data-startTime="71">Here, for instance, </span><span class="line" data-startTime="71">as you could see &mdash; </span><span class="line" data-startTime="74">let me make it bigger. </span> <span class="line" data-startTime="75">I'm just concatenating </span><span class="line" data-startTime="75">using this function. </span> <span class="line" data-startTime="79">So the value of column D will </span><span class="line" data-startTime="79">basically be derived from </span><span class="line" data-startTime="83">column B and C, in this case. </span></p>

<p><span class="line" data-startTime="86">And here I'll just go and fill </span><span class="line" data-startTime="86">the addresses I would like. </span> <span class="line" data-startTime="90">In this example, it's in Hebrew, </span><span class="line" data-startTime="90">but of course, you can </span><span class="line" data-startTime="92">imagine that it will be in </span><span class="line" data-startTime="92">English or any other language. </span> <span class="line" data-startTime="95">The other thing about it will be </span><span class="line" data-startTime="95">that basically you'll to be </span><span class="line" data-startTime="102">able to work with this. </span> <span class="line" data-startTime="107">And Google Geocoder will work </span><span class="line" data-startTime="107">with any language that you </span><span class="line" data-startTime="111">will be able to be input here. </span> <span class="line" data-startTime="114">And we'll see it in a second. </span> <span class="line" data-startTime="116">So those are the input points </span><span class="line" data-startTime="116">that the editor </span><span class="line" data-startTime="121">will fill for us. </span> <span class="line" data-startTime="123">And then, what we'll need to </span><span class="line" data-startTime="123">do is go here to File and </span><span class="line" data-startTime="126">basically publish </span><span class="line" data-startTime="126">it to the web. </span></p>

<p><span class="line" data-startTime="129">And the nice thing here is that </span><span class="line" data-startTime="129">we could choose several </span><span class="line" data-startTime="131">things when we want to do it. </span> <span class="line" data-startTime="133">So once I'm clicking here on </span><span class="line" data-startTime="133">Start Publishing, you could </span><span class="line" data-startTime="136">see that I have here the </span><span class="line" data-startTime="136">timestamp of when </span><span class="line" data-startTime="139">it was first published. </span> <span class="line" data-startTime="140">And from this minute any changes </span><span class="line" data-startTime="140">that will be made will </span><span class="line" data-startTime="145">be automatically because I </span><span class="line" data-startTime="145">clicked this check box. </span> <span class="line" data-startTime="148">And here I could basically check </span><span class="line" data-startTime="148">and see if I want it as </span><span class="line" data-startTime="152">a web page or maybe as </span><span class="line" data-startTime="152">a Atom feed, RSS </span><span class="line" data-startTime="156">feed, and other things. </span> <span class="line" data-startTime="158">If I'm doing things like </span><span class="line" data-startTime="158">exporting it as RSS feed, here </span><span class="line" data-startTime="164">at the end if I'll change </span><span class="line" data-startTime="164">it from RSS to JSON, </span><span class="line" data-startTime="167">it will also work. </span></p>

<p><span class="line" data-startTime="168">So for us, in the front end </span><span class="line" data-startTime="168">development world, to work </span><span class="line" data-startTime="173">with JSON object will be </span><span class="line" data-startTime="173">much easier and nicer. </span> <span class="line" data-startTime="175">And we don't need any library </span><span class="line" data-startTime="175">to parse Atom </span><span class="line" data-startTime="177">feeds or RSS feeds. </span> <span class="line" data-startTime="180">Once I'm doing that, I'll </span><span class="line" data-startTime="180">go here to Tools. </span> <span class="line" data-startTime="183">And I'll basically click </span><span class="line" data-startTime="183">on the Script Editor. </span> <span class="line" data-startTime="186">And as you can see here, I'm </span><span class="line" data-startTime="186">jumping to a new tab that's </span><span class="line" data-startTime="189">letting me work with </span><span class="line" data-startTime="189">AppScript. </span> <span class="line" data-startTime="191">Now here I'll make this code </span><span class="line" data-startTime="191">just a bit larger and we'll go </span><span class="line" data-startTime="194">over quite quickly because </span><span class="line" data-startTime="194">it's a very simple, </span><span class="line" data-startTime="197">self-explanatory code. </span> <span class="line" data-startTime="199">What we're doing here is </span><span class="line" data-startTime="199">basically on open I want to </span><span class="line" data-startTime="203">add a new menu item. </span> <span class="line" data-startTime="205">And let me go back here </span><span class="line" data-startTime="205">and show you. </span> <span class="line" data-startTime="208">Here I have a new menu item </span><span class="line" data-startTime="208">that I created for my app. </span></p>

<p><span class="line" data-startTime="211">So my editor, after he or she </span><span class="line" data-startTime="211">are filling the details here, </span><span class="line" data-startTime="215">it's good to be able to </span><span class="line" data-startTime="215">show them on a map. </span> <span class="line" data-startTime="218">So when they are clicking, the </span><span class="line" data-startTime="218">script is running in the </span><span class="line" data-startTime="220">background creating a map. </span> <span class="line" data-startTime="222">And as you can see, I have </span><span class="line" data-startTime="222">markers on the map that are </span><span class="line" data-startTime="224">just showing visually that what </span><span class="line" data-startTime="224">we did is the correct. </span> <span class="line" data-startTime="227">And of course, at the bottom we </span><span class="line" data-startTime="227">have a widget containing a </span><span class="line" data-startTime="230">table with all the details. </span> <span class="line" data-startTime="232">Now, in the script itself, this </span><span class="line" data-startTime="232">four or five lines of </span><span class="line" data-startTime="237">code basically just adding this </span><span class="line" data-startTime="237">menu to the spreadsheet </span><span class="line" data-startTime="240">and allowing me to execute the </span><span class="line" data-startTime="240">station location map function. </span> <span class="line" data-startTime="246">Actually, I need to put </span><span class="line" data-startTime="246">a better name there. </span></p>

<p><span class="line" data-startTime="248">But it's OK. </span> <span class="line" data-startTime="250">In the function itself, what </span><span class="line" data-startTime="250">I'm getting is basically </span><span class="line" data-startTime="253">getting a handler on the current </span><span class="line" data-startTime="253">sheet that I'm going </span><span class="line" data-startTime="257">to work with. </span> <span class="line" data-startTime="258">And in our case, it's </span><span class="line" data-startTime="258">the geo one. </span> <span class="line" data-startTime="260">You can think about a scenario </span><span class="line" data-startTime="260">when you want to keep revision </span><span class="line" data-startTime="263">of the history. </span> <span class="line" data-startTime="264">That time then maybe you will </span><span class="line" data-startTime="264">add more and more sheets to </span><span class="line" data-startTime="268">this main doc. </span> <span class="line" data-startTime="271">After that I'm going and I'm </span><span class="line" data-startTime="271">using Get Range function. </span> <span class="line" data-startTime="277">And basically, I'm just focusing </span><span class="line" data-startTime="277">on a portion of this </span><span class="line" data-startTime="280">spreadsheet just so I'll be </span><span class="line" data-startTime="280">able to get the station </span><span class="line" data-startTime="284">information. </span></p>

<p><span class="line" data-startTime="285">In my case, I want to get the </span><span class="line" data-startTime="285">address and then the city name </span><span class="line" data-startTime="289">because from the combination of </span><span class="line" data-startTime="289">those two I'll be able to </span><span class="line" data-startTime="295">compose the address. </span> <span class="line" data-startTime="297">Later on, I'm just calling a </span><span class="line" data-startTime="297">static map object and of </span><span class="line" data-startTime="301">course, creating my UI. </span> <span class="line" data-startTime="303">The UI is the dialog that you </span><span class="line" data-startTime="303">saw that we presented the user </span><span class="line" data-startTime="308">after we gathered all </span><span class="line" data-startTime="308">the information. </span> <span class="line" data-startTime="310">And then I'm creating another </span><span class="line" data-startTime="310">grid object that's letting me </span><span class="line" data-startTime="313">up the raw text information </span><span class="line" data-startTime="313">below the map so it will be </span><span class="line" data-startTime="316">very clear which marker is </span><span class="line" data-startTime="316">belonging to which station. </span> <span class="line" data-startTime="320">And then, there's the simple </span><span class="line" data-startTime="320">loop that's just going over </span><span class="line" data-startTime="324">those lines with addresses, </span><span class="line" data-startTime="324">adding them to the map, as you </span><span class="line" data-startTime="329">could see here, with </span><span class="line" data-startTime="329">the marker info. </span> <span class="line" data-startTime="332">In our case, that row and </span><span class="line" data-startTime="332">column, so the cell itself, </span><span class="line" data-startTime="340">will contain the geo location. </span> <span class="line" data-startTime="341">And it's very easy to use that </span><span class="line" data-startTime="341">marker with a geo point just </span><span class="line" data-startTime="346">to put it in a certain </span><span class="line" data-startTime="346">place on the map. </span></p>

<p><span class="line" data-startTime="349">And for the grid widget, of </span><span class="line" data-startTime="349">course, we'll want the full </span><span class="line" data-startTime="351">address and the name and </span><span class="line" data-startTime="351">all the other things. </span> <span class="line" data-startTime="354">Here there's an interesting </span><span class="line" data-startTime="354">thing that I would </span><span class="line" data-startTime="356">love to show you. </span> <span class="line" data-startTime="357">And I'll put a break point. </span> <span class="line" data-startTime="358">And we'll go into </span><span class="line" data-startTime="358">it in a second. </span> <span class="line" data-startTime="360">And that's the newGeocoder </span><span class="line" data-startTime="360">object that will basically </span><span class="line" data-startTime="365">allow us to get the address and </span><span class="line" data-startTime="365">to extract and gain from </span><span class="line" data-startTime="369">it the longitude and latitude. </span> <span class="line" data-startTime="371">You could get actually more geo </span><span class="line" data-startTime="371">information out of this, </span><span class="line" data-startTime="374">but in this example, we'll </span><span class="line" data-startTime="374">just focus on these two </span><span class="line" data-startTime="377">because that's what we need </span><span class="line" data-startTime="377">to create our basic app. </span> <span class="line" data-startTime="381">Let me try and run it in the </span><span class="line" data-startTime="381">debug mode and show you how </span><span class="line" data-startTime="384">it's working. </span> <span class="line" data-startTime="385">So here is a function </span><span class="line" data-startTime="385">that I choose. </span></p>

<p><span class="line" data-startTime="389">And now I'll click debugging. </span> <span class="line" data-startTime="391">And the first time that you run </span><span class="line" data-startTime="391">it, you'll get a very big </span><span class="line" data-startTime="394">dialogue that just warns </span><span class="line" data-startTime="394">you and ask your </span><span class="line" data-startTime="396">permission to do so. </span> <span class="line" data-startTime="397">I did it in the final rehearsal </span><span class="line" data-startTime="397">to this show, so it </span><span class="line" data-startTime="400">doesn't prompt it now to me. </span> <span class="line" data-startTime="404">But after you acknowledge it </span><span class="line" data-startTime="404">for the first time, it will </span><span class="line" data-startTime="407">work on each and every run. </span> <span class="line" data-startTime="410">As you saw here, I just </span><span class="line" data-startTime="410">got this break point. </span> <span class="line" data-startTime="414">And if I'll, of course, go over </span><span class="line" data-startTime="414">geoResults, you could see </span><span class="line" data-startTime="420">here that it's undefined. </span> <span class="line" data-startTime="422">But if I'll just give it </span><span class="line" data-startTime="422">permission to pass it, now you </span><span class="line" data-startTime="427">see here that in geoResults, </span><span class="line" data-startTime="427">if I'll click on the plus </span><span class="line" data-startTime="431">sign, basically we </span><span class="line" data-startTime="431">got two things. </span></p>

<p><span class="line" data-startTime="433">One is the status. </span> <span class="line" data-startTime="434">And luckily for us, </span><span class="line" data-startTime="434">everything is OK. </span> <span class="line" data-startTime="436">So that's why here, on the next </span><span class="line" data-startTime="436">line, I'll just make sure </span><span class="line" data-startTime="439">that it's OK. </span> <span class="line" data-startTime="440">If it's OK, I can </span><span class="line" data-startTime="440">parse the data. </span> <span class="line" data-startTime="442">If it's not, I want to log it. </span> <span class="line" data-startTime="444">And it's here. </span> <span class="line" data-startTime="445">And if it's OK, like in our </span><span class="line" data-startTime="445">case, you could see the </span><span class="line" data-startTime="448">results object that's containing </span><span class="line" data-startTime="448">lots of different </span><span class="line" data-startTime="450">parameters. </span> <span class="line" data-startTime="452">In our case, we have the </span><span class="line" data-startTime="452">geometry that's containing </span><span class="line" data-startTime="456">bounds, viewports, location </span><span class="line" data-startTime="456">data, and </span><span class="line" data-startTime="459">lots of other things. </span> <span class="line" data-startTime="461">And in our case, as you could </span><span class="line" data-startTime="461">see, I'm taking the longitude </span><span class="line" data-startTime="465">and the latitude, just the </span><span class="line" data-startTime="465">opposite what I said, and once </span><span class="line" data-startTime="470">I got those two, I can release </span><span class="line" data-startTime="470">it and just keep running and </span><span class="line" data-startTime="474">getting a new point each time. </span></p>

<p><span class="line" data-startTime="477">We could click on the view and </span><span class="line" data-startTime="477">then basically see the logs. </span> <span class="line" data-startTime="480">And as you could see while I'm </span><span class="line" data-startTime="480">using the logger object, as </span><span class="line" data-startTime="483">you could see, I got the </span><span class="line" data-startTime="483">new geo point from </span><span class="line" data-startTime="486">the specific address. </span> <span class="line" data-startTime="488">I can now just turn off the </span><span class="line" data-startTime="488">break point and resume the run </span><span class="line" data-startTime="492">of this script. </span> <span class="line" data-startTime="494">And after it's done, you see </span><span class="line" data-startTime="494">that everything is off from </span><span class="line" data-startTime="498">the debug mode. </span> <span class="line" data-startTime="500">I can again to the logs and see </span><span class="line" data-startTime="500">that for the three points </span><span class="line" data-startTime="502">that I have in the spreadsheet </span><span class="line" data-startTime="502">I now have three geo points </span><span class="line" data-startTime="506">that I could use. </span> <span class="line" data-startTime="508">One last nice little trick </span><span class="line" data-startTime="508">that we have here is that </span><span class="line" data-startTime="512">we're using Waze web API. </span> <span class="line" data-startTime="514">And if you are basically, in </span><span class="line" data-startTime="514">your mobile web app, putting </span><span class="line" data-startTime="518">this link and the user will open </span><span class="line" data-startTime="518">your mobile web app from </span><span class="line" data-startTime="522">any mobile devices out there, </span><span class="line" data-startTime="522">and they already have Waze </span><span class="line" data-startTime="527">installed, this link will </span><span class="line" data-startTime="527">basically inform the device </span><span class="line" data-startTime="531">itself to open the Waze </span><span class="line" data-startTime="531">application with these </span><span class="line" data-startTime="534">specific points. </span></p>

<p><span class="line" data-startTime="535">So they could navigate to </span><span class="line" data-startTime="535">this point immediately. </span> <span class="line" data-startTime="539">The app itself &mdash; </span><span class="line" data-startTime="541">just to show you how </span><span class="line" data-startTime="541">does it look like &mdash; </span><span class="line" data-startTime="543">is live and it's here. </span> <span class="line" data-startTime="545">And we have two versions </span><span class="line" data-startTime="545">of the app. </span> <span class="line" data-startTime="547">One looks like that. </span> <span class="line" data-startTime="549">And that's basically </span><span class="line" data-startTime="549">a version that is </span><span class="line" data-startTime="551">based on Twitter Bootstrap. </span> <span class="line" data-startTime="553">So it will work on all the major </span><span class="line" data-startTime="553">browsers out there, i.e. </span> <span class="line" data-startTime="557">Firefox, Safari, and </span><span class="line" data-startTime="557">of course, Chrome. </span> <span class="line" data-startTime="559">And another version of it is </span><span class="line" data-startTime="559">[INAUDIBLE], but just add </span><span class="line" data-startTime="566">jQuery [INAUDIBLE] </span><span class="line" data-startTime="568">to the picture. </span> <span class="line" data-startTime="570">And it will be here. </span> <span class="line" data-startTime="574">And as you could see, it's more </span><span class="line" data-startTime="574">themed as a mobile web </span><span class="line" data-startTime="579">app with some nice features, </span><span class="line" data-startTime="579">like an about page that is </span><span class="line" data-startTime="583">flipping and other things that </span><span class="line" data-startTime="583">you could do, like the buttons </span><span class="line" data-startTime="587">that will navigate and </span><span class="line" data-startTime="587">other cool things. </span></p>

<p><span class="line" data-startTime="590">Of course, the map here </span><span class="line" data-startTime="590">is fully functional. </span> <span class="line" data-startTime="593">And the user can dive into it </span><span class="line" data-startTime="593">and get direction on points </span><span class="line" data-startTime="598">and lots of other things. </span> <span class="line" data-startTime="600">So that's basically the </span><span class="line" data-startTime="600">major three components </span><span class="line" data-startTime="603">that I wanted to cover. </span> <span class="line" data-startTime="606">If you have any questions </span><span class="line" data-startTime="606">now it's an </span><span class="line" data-startTime="608">excellent time to do so. </span> <span class="line" data-startTime="609">And if not, just feel </span><span class="line" data-startTime="609">free to reach out to </span><span class="line" data-startTime="611">me on G+, on Twitter. </span> <span class="line" data-startTime="613">On both of them, it's greenido </span><span class="line" data-startTime="613">as one word. </span> <span class="line" data-startTime="616">Let's see if we have on the </span><span class="line" data-startTime="616">Hangout chat some question </span><span class="line" data-startTime="619">that people entered. </span> <span class="line" data-startTime="625">I don't see any, so until next </span><span class="line" data-startTime="625">week be strong and bye-bye. </span></p>