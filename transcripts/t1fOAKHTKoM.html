<p class="speaker"><span class="line" data-starttime="0"><span class="speakerName">Pamela Fox</span>: Hello. </span></p>

<p class="speaker"><span class="line" data-starttime="1"><span class="speakerName">Audience</span>: Hello. </span></p>

<p class="speaker"><span class="line" data-starttime="3"><span class="speakerName">Pamela Fox</span>: How are you? </span></p>

<p class="speaker"><span class="line" data-starttime="4"><span class="speakerName">Audience</span>: [INAUDIBLE]. </span></p>

<p class="speaker"><span class="line" data-starttime="6"><span class="speakerName">Pamela Fox</span>: OK. </span><span class="line" data-startTime="7">How are you? </span></p>

<p class="speaker"><span class="line" data-starttime="7"><span class="speakerName">Audience</span>: Good. </span></p>

<p class="speaker"><span class="line" data-starttime="8"><span class="speakerName">Pamela Fox</span>: All right. </span> <span class="line" data-startTime="8">OK. </span> <span class="line" data-startTime="8">Good. </span> <span class="line" data-startTime="10">I know this is like the time </span><span class="line" data-startTime="10">of the afternoon where </span><span class="line" data-startTime="11">typically you sleep. </span> <span class="line" data-startTime="12">And they did just turn </span><span class="line" data-startTime="12">off the lights. </span> <span class="line" data-startTime="14">But I will try and be as loud </span><span class="line" data-startTime="14">and obnoxious as possible in </span><span class="line" data-startTime="17">order to keep you awake. </span> <span class="line" data-startTime="18">So my name is Pamela fox. </span> <span class="line" data-startTime="20">I'm a product engineer </span><span class="line" data-startTime="20">at Coursera. </span> <span class="line" data-startTime="22">And today I want to </span><span class="line" data-startTime="22">talk about feature </span><span class="line" data-startTime="24">detection in the real world. </span> <span class="line" data-startTime="26">So this shit's gonna get real. </span> <span class="line" data-startTime="28">All right. </span> <span class="line" data-startTime="29">So you guys are in </span><span class="line" data-startTime="29">a Chrome track. </span> <span class="line" data-startTime="32">And presumably you guys are all </span><span class="line" data-startTime="32">on the Chrome track and </span><span class="line" data-startTime="34">doing web development stuff. </span> <span class="line" data-startTime="36">And you're probably all pretty </span><span class="line" data-startTime="36">excited about HTML5, right? </span><span class="line" data-startTime="39">Whoo. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="40"><span class="speakerName">Audience</span>: Whoo. </span></p>

<p class="speaker"><span class="line" data-starttime="41"><span class="speakerName">Pamela Fox</span>: So HTML5 is awesome, </span><span class="line" data-startTime="41">because it's bringing </span><span class="line" data-startTime="43">us all these things that for </span><span class="line" data-startTime="43">years and years we wanted as </span><span class="line" data-startTime="45">web developers. </span> <span class="line" data-startTime="46">And we had to do all </span><span class="line" data-startTime="46">these crazy hacks </span><span class="line" data-startTime="48">in order to do them. </span> <span class="line" data-startTime="49">And finally, the browsers are </span><span class="line" data-startTime="49">just making it really </span><span class="line" data-startTime="51">easy for us, right? </span><span class="line" data-startTime="53">I remember once spending two </span><span class="line" data-startTime="53">months implementing rounded </span><span class="line" data-startTime="56">corners on this little gadget </span><span class="line" data-startTime="56">back when I was working at </span><span class="line" data-startTime="58">Google, and finally getting it </span><span class="line" data-startTime="58">to work in IE6, and then </span><span class="line" data-startTime="62">taking it to UX Review with </span><span class="line" data-startTime="62">Marissa finding out that </span><span class="line" data-startTime="65">apparently we didn't do rounded </span><span class="line" data-startTime="65">corners at Google. </span> <span class="line" data-startTime="69">So stuff like that, right? </span><span class="line" data-startTime="70">These days it would take me </span><span class="line" data-startTime="70">one line of code to put a </span><span class="line" data-startTime="73">border radius on there and </span><span class="line" data-startTime="73">then get it rejected. </span> <span class="line" data-startTime="75">And hey, life would </span><span class="line" data-startTime="75">go on, right? </span><span class="line" data-startTime="77">So HTML5 is great, because we </span><span class="line" data-startTime="77">get all these new features. </span></p>

<p><span class="line" data-startTime="80">But we're getting them </span><span class="line" data-startTime="80">incrementally, right? </span><span class="line" data-startTime="81">So we have them in </span><span class="line" data-startTime="81">some browsers. </span> <span class="line" data-startTime="83">We don't have them in </span><span class="line" data-startTime="83">other browsers. </span> <span class="line" data-startTime="84">We have kind of parts of the </span><span class="line" data-startTime="84">features in some and they </span><span class="line" data-startTime="86">don't quite work. </span> <span class="line" data-startTime="88">So that means we actually have </span><span class="line" data-startTime="88">to worry about whether a </span><span class="line" data-startTime="91">particular feature is actually </span><span class="line" data-startTime="91">supported, because most of us </span><span class="line" data-startTime="94">probably have to actually </span><span class="line" data-startTime="94">develop things </span><span class="line" data-startTime="96">for multiple browsers. </span> <span class="line" data-startTime="99">If we could, we'd probably just </span><span class="line" data-startTime="99">tell all of our users, </span><span class="line" data-startTime="101">hey, just use Chrome. </span></p>

<p><span class="line" data-startTime="104">I've tried that. </span> <span class="line" data-startTime="105">It kind of works. </span> <span class="line" data-startTime="107">So what do we do? </span><span class="line" data-startTime="109">We think to ourself </span><span class="line" data-startTime="109">like, all right, I </span><span class="line" data-startTime="110">want to use this feature. </span> <span class="line" data-startTime="112">But first I need to see </span><span class="line" data-startTime="112">if it's supported. </span> <span class="line" data-startTime="114">How should I do that? </span><span class="line" data-startTime="115">The obvious thing to do is to </span><span class="line" data-startTime="115">ask the browser, like, hey, I </span><span class="line" data-startTime="119">want to use this feature. </span> <span class="line" data-startTime="120">Do you use that? </span><span class="line" data-startTime="121">And we do that via this </span><span class="line" data-startTime="121">technique that we </span><span class="line" data-startTime="123">call feature detection. </span> <span class="line" data-startTime="124">And we have various </span><span class="line" data-startTime="124">ways of actually </span><span class="line" data-startTime="126">doing feature detection. </span> <span class="line" data-startTime="128">So here are some examples. </span> <span class="line" data-startTime="129">If we want to know if a </span><span class="line" data-startTime="129">browser supports some </span><span class="line" data-startTime="132">JavaScript API, we might </span><span class="line" data-startTime="132">ask, OK, does </span><span class="line" data-startTime="135">window.webkitAudioContext </span><span class="line" data-startTime="135">exist? </span><span class="line" data-startTime="139">If it does exist, than this </span><span class="line" data-startTime="139">browser supports that </span><span class="line" data-startTime="142">particular JavaScript API. </span> <span class="line" data-startTime="143">If we're trying to see if a </span><span class="line" data-startTime="143">particular HTML element works, </span><span class="line" data-startTime="146">we can try creating the HTML </span><span class="line" data-startTime="146">element and seeing if it gets </span><span class="line" data-startTime="149">particular attributes </span><span class="line" data-startTime="149">automatically applied to it by </span><span class="line" data-startTime="151">the browser. </span></p>

<p><span class="line" data-startTime="153">If we want to know some CSS </span><span class="line" data-startTime="153">works, we can just create an </span><span class="line" data-startTime="158">element and see if that style </span><span class="line" data-startTime="158">property is actually a key on </span><span class="line" data-startTime="163">that element. </span> <span class="line" data-startTime="164">And most of us probably use </span><span class="line" data-startTime="164">Modernizr, which is a library </span><span class="line" data-startTime="167">that does these detections for </span><span class="line" data-startTime="167">you behind the scenes. </span> <span class="line" data-startTime="170">And then you just </span><span class="line" data-startTime="170">ask Modernizr, </span><span class="line" data-startTime="172">hey, does this work? </span><span class="line" data-startTime="174">So that's feature detection. </span> <span class="line" data-startTime="176">And it sounds like it's </span><span class="line" data-startTime="176">actually really great. </span> <span class="line" data-startTime="179">All we have to do is say, we </span><span class="line" data-startTime="179">want to use this feature, just </span><span class="line" data-startTime="181">tell the browser, hey, </span><span class="line" data-startTime="181">tell us if it works. </span> <span class="line" data-startTime="186">So it's really, really awesome </span><span class="line" data-startTime="186">when it works. </span> <span class="line" data-startTime="188">It's a great idea. </span> <span class="line" data-startTime="189">However, it doesn't </span><span class="line" data-startTime="189">always work. </span> <span class="line" data-startTime="193">Sometimes it's impossible </span><span class="line" data-startTime="193">to detect a feature. </span> <span class="line" data-startTime="195">Sometimes you get false </span><span class="line" data-startTime="195">negatives, positive falsities, </span><span class="line" data-startTime="199">whatever you want to call </span><span class="line" data-startTime="199">them, all those things. </span> <span class="line" data-startTime="201">And you need a different plan. </span></p>

<p><span class="line" data-startTime="203">And a lot of times what </span><span class="line" data-startTime="203">you do instead is </span><span class="line" data-startTime="206">use user agent detection. </span> <span class="line" data-startTime="208">And this is where we just look </span><span class="line" data-startTime="208">at the navigator.userAgent. </span> <span class="line" data-startTime="212">And we try to understand </span><span class="line" data-startTime="212">what device and what </span><span class="line" data-startTime="215">browser a user is using. </span> <span class="line" data-startTime="218">So a very basic check here. </span> <span class="line" data-startTime="219">If I want to know if they're on </span><span class="line" data-startTime="219">an iPad or iPhone, I'm just </span><span class="line" data-startTime="222">looking for iPhone or iPod </span><span class="line" data-startTime="222">in that user agent, </span><span class="line" data-startTime="225">doing a regex here. </span> <span class="line" data-startTime="226">This is where we have </span><span class="line" data-startTime="226">a lot of regex's. </span> <span class="line" data-startTime="229">I hate regex's, so I will never </span><span class="line" data-startTime="229">make these up myself. </span> <span class="line" data-startTime="233">But they get worse. </span> <span class="line" data-startTime="235">So if I want to check for mobile </span><span class="line" data-startTime="235">browsers, maybe the top </span><span class="line" data-startTime="238">mobile browsers, here's a check </span><span class="line" data-startTime="238">that gets a bit more of </span><span class="line" data-startTime="241">a crazier regex that's going </span><span class="line" data-startTime="241">to get me maybe the top 10 </span><span class="line" data-startTime="245">mobile browsers. </span> <span class="line" data-startTime="248">But it's not that simple. </span></p>

<p><span class="line" data-startTime="249">There's a lot more browsers out </span><span class="line" data-startTime="249">there and devices in the </span><span class="line" data-startTime="252">world, especially as you </span><span class="line" data-startTime="252">go international. </span> <span class="line" data-startTime="253">I know a lot of you are </span><span class="line" data-startTime="253">from outside America. </span> <span class="line" data-startTime="256">And I'm sure you have Android </span><span class="line" data-startTime="256">devices that I've never even </span><span class="line" data-startTime="258">heard of, right? </span><span class="line" data-startTime="260">So if you really wanted to </span><span class="line" data-startTime="260">check for every mobile </span><span class="line" data-startTime="262">browser, you get something </span><span class="line" data-startTime="262">like this. </span> <span class="line" data-startTime="265">I think this from </span><span class="line" data-startTime="265">mobilebrowserdetect.com. </span> <span class="line" data-startTime="268">And as you can see, there's </span><span class="line" data-startTime="268">a lot of mobile </span><span class="line" data-startTime="271">browsers in the world. </span></p>

<p><span class="line" data-startTime="273">Do you actually need to </span><span class="line" data-startTime="273">check for all of them? </span><span class="line" data-startTime="274">I don't know. </span> <span class="line" data-startTime="275">I don't know you're doing. </span> <span class="line" data-startTime="278">But this is an example of </span><span class="line" data-startTime="278">how intense user agent </span><span class="line" data-startTime="281">sniffing can be. </span> <span class="line" data-startTime="282">And we usually don't want to do </span><span class="line" data-startTime="282">user agent sniffing for a </span><span class="line" data-startTime="285">couple reasons. </span> <span class="line" data-startTime="286">First of all, we have </span><span class="line" data-startTime="286">to write regex's. </span> <span class="line" data-startTime="288">And I don't know about you, </span><span class="line" data-startTime="288">but I don't like regex. </span> <span class="line" data-startTime="292">The thing is, it's very </span><span class="line" data-startTime="292">easy to get it wrong. </span> <span class="line" data-startTime="294">It's generally easy to </span><span class="line" data-startTime="294">get regex's wrong. </span></p>

<p><span class="line" data-startTime="296">But it's also really easy to get </span><span class="line" data-startTime="296">user agents wrong, because </span><span class="line" data-startTime="299">user agents, they're kind of </span><span class="line" data-startTime="299">these crazy strings that </span><span class="line" data-startTime="301">browsers come up with. </span> <span class="line" data-startTime="302">And browsers are always trying </span><span class="line" data-startTime="302">to fool developers into </span><span class="line" data-startTime="305">thinking that they're not </span><span class="line" data-startTime="305">what they used to be. </span> <span class="line" data-startTime="307">So I think the new IE10 has </span><span class="line" data-startTime="307">gotten rid of something in its </span><span class="line" data-startTime="311">user agent string that people </span><span class="line" data-startTime="311">normally sniff for to find out </span><span class="line" data-startTime="314">that it's IE, because IE10, they </span><span class="line" data-startTime="314">don't want you thinking </span><span class="line" data-startTime="316">it's IE anymore, because </span><span class="line" data-startTime="316">it's cool now. </span> <span class="line" data-startTime="319">And then &mdash; </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="320"><span class="speakerName">Audience</span>: [LAUGHTER] </span></p>

<p class="speaker"><span class="line" data-starttime="321"><span class="speakerName">Pamela Fox</span>: Oh, you guys </span><span class="line" data-startTime="321">didn't get that memo. </span> <span class="line" data-startTime="323">OK. </span> <span class="line" data-startTime="323">And then some browsers, like </span><span class="line" data-startTime="323">if you're viewing IE with </span><span class="line" data-startTime="326">Chrome Frame, it'll tell you </span><span class="line" data-startTime="326">Chrome in the user agent. </span> <span class="line" data-startTime="329">But then Chrome Frame might </span><span class="line" data-startTime="329">not actually be </span><span class="line" data-startTime="332">running on the page. </span> <span class="line" data-startTime="333">So that's kind of confusing. </span> <span class="line" data-startTime="334">And then of course every user </span><span class="line" data-startTime="334">agent string in the world has </span><span class="line" data-startTime="336">Mozilla, because that was </span><span class="line" data-startTime="336">the original dupe. </span> <span class="line" data-startTime="340">So user agent detection </span><span class="line" data-startTime="340">can be really tricky. </span> <span class="line" data-startTime="342">And it also means that when </span><span class="line" data-startTime="342">you're detecting the user </span><span class="line" data-startTime="344">agent, if that user agent </span><span class="line" data-startTime="344">eventually does come to </span><span class="line" data-startTime="347">support a feature, you've </span><span class="line" data-startTime="347">prematurely blocked it. </span></p>

<p><span class="line" data-startTime="350">If you say like, hey, Safari </span><span class="line" data-startTime="350">doesn't support this feature, </span><span class="line" data-startTime="353">we're not going to use this </span><span class="line" data-startTime="353">feature in Safari, and then </span><span class="line" data-startTime="357">Safari tomorrow comes out with </span><span class="line" data-startTime="357">a release that supports that </span><span class="line" data-startTime="360">feature, you've probably moved </span><span class="line" data-startTime="360">on to other things. </span> <span class="line" data-startTime="363">The chance that you're actually </span><span class="line" data-startTime="363">going to update that </span><span class="line" data-startTime="364">bit of code that blocks Safari </span><span class="line" data-startTime="364">users is really small. </span> <span class="line" data-startTime="368">So we don't like user agent </span><span class="line" data-startTime="368">detection because it's often </span><span class="line" data-startTime="370">not future-thinking. </span> <span class="line" data-startTime="372">It can really easily leave us in </span><span class="line" data-startTime="372">a state where parts of our </span><span class="line" data-startTime="375">site aren't working as well when </span><span class="line" data-startTime="375">they actually could be, </span><span class="line" data-startTime="379">because these browsers </span><span class="line" data-startTime="379">do move fast. </span> <span class="line" data-startTime="381">But it is a tool that </span><span class="line" data-startTime="381">we can use. </span></p>

<p><span class="line" data-startTime="385">So here's the thing. </span> <span class="line" data-startTime="386">We have these two tools, feature </span><span class="line" data-startTime="386">detection and user </span><span class="line" data-startTime="388">agent sniffing. </span> <span class="line" data-startTime="389">And a lot of people will tell </span><span class="line" data-startTime="389">you, hey, you've got to use </span><span class="line" data-startTime="392">feature detection. </span> <span class="line" data-startTime="393">You've got to use feature </span><span class="line" data-startTime="393">detection. </span> <span class="line" data-startTime="394">That's the only way. </span> <span class="line" data-startTime="395">And I definitely do try to. </span> <span class="line" data-startTime="398">But I've run into all these </span><span class="line" data-startTime="398">cases where it hasn't quite </span><span class="line" data-startTime="402">worked and I've had to use </span><span class="line" data-startTime="402">other techniques instead. </span> <span class="line" data-startTime="404">So I wanted to share those with </span><span class="line" data-startTime="404">you so that hopefully </span><span class="line" data-startTime="407">when you guys are working on </span><span class="line" data-startTime="407">using these fancy new features </span><span class="line" data-startTime="411">yourself, you'll know what to </span><span class="line" data-startTime="411">look out for and you'll know </span><span class="line" data-startTime="414">how to react yourself so that </span><span class="line" data-startTime="414">you can spend less time </span><span class="line" data-startTime="417">figuring out how to detect </span><span class="line" data-startTime="417">things and just move on to </span><span class="line" data-startTime="419">actually making stuff happen, </span><span class="line" data-startTime="419">which is what </span><span class="line" data-startTime="421">we all want to do. </span></p>

<p><span class="line" data-startTime="423">So let's talk about </span><span class="line" data-startTime="423">a few cases. </span> <span class="line" data-startTime="426">LocalStorage is this cool, </span><span class="line" data-startTime="426">lightweight storage API. </span> <span class="line" data-startTime="432">It's actually supported in a </span><span class="line" data-startTime="432">quite a few browsers now. </span> <span class="line" data-startTime="434">It's from the W3 Web </span><span class="line" data-startTime="434">Storage spec. </span> <span class="line" data-startTime="437">And it's a very simple key </span><span class="line" data-startTime="437">value store that you can </span><span class="line" data-startTime="441">access from JavaScript and use </span><span class="line" data-startTime="441">to store in cache data from </span><span class="line" data-startTime="445">your application. </span> <span class="line" data-startTime="447">And I thought it was </span><span class="line" data-startTime="447">really cool. </span> <span class="line" data-startTime="450">So I wrote a library on top of </span><span class="line" data-startTime="450">LocalStorage called lscache, </span><span class="line" data-startTime="454">which was inspired by memcache, </span><span class="line" data-startTime="454">which is a tool we </span><span class="line" data-startTime="456">use on the server and would </span><span class="line" data-startTime="456">allow me to store stuff in </span><span class="line" data-startTime="459">LocalStorage with a particular </span><span class="line" data-startTime="459">expiration and then they would </span><span class="line" data-startTime="462">get automatically kicked out. </span> <span class="line" data-startTime="463">So in this library, I thought it </span><span class="line" data-startTime="463">would be responsible of me </span><span class="line" data-startTime="467">to actually check to see if </span><span class="line" data-startTime="467">LocalStorage worked in the </span><span class="line" data-startTime="470">browser before I attempted </span><span class="line" data-startTime="470">to store anything in it. </span> <span class="line" data-startTime="474">So I needed to figure out how </span><span class="line" data-startTime="474">to do this detection. </span></p>

<p><span class="line" data-startTime="476">So I started off with the most </span><span class="line" data-startTime="476">basic thing I could do, which </span><span class="line" data-startTime="480">is, OK, LocalStorage on </span><span class="line" data-startTime="480">window and not null? </span><span class="line" data-startTime="486">Therefore, this browser supports </span><span class="line" data-startTime="486">the LocalStorage API. </span> <span class="line" data-startTime="491">That was my very naive </span><span class="line" data-startTime="491">first attempt. </span> <span class="line" data-startTime="494">But what happened is that you </span><span class="line" data-startTime="494">could have LocalStorage </span><span class="line" data-startTime="497">supported by a browser. </span> <span class="line" data-startTime="499">It didn't mean you could </span><span class="line" data-startTime="499">actually use it, because it </span><span class="line" data-startTime="502">could be that the browser was </span><span class="line" data-startTime="502">currently in incognito mode </span><span class="line" data-startTime="505">and doesn't let you store </span><span class="line" data-startTime="505">LocalStorage. </span> <span class="line" data-startTime="507">It could be that the </span><span class="line" data-startTime="507">LocalStorage was over quota. </span> <span class="line" data-startTime="511">It could be just for whatever </span><span class="line" data-startTime="511">reason &mdash; there was one version </span><span class="line" data-startTime="513">of iPad where they just </span><span class="line" data-startTime="513">turned it off. </span> <span class="line" data-startTime="515">So the only way you can actually </span><span class="line" data-startTime="515">check to see if </span><span class="line" data-startTime="518">LocalStorage works is to </span><span class="line" data-startTime="518">try and use it the way </span><span class="line" data-startTime="520">you want to use it. </span> <span class="line" data-startTime="521">So my LocalStorage check then </span><span class="line" data-startTime="521">turned into this, which is, </span><span class="line" data-startTime="524">OK, let's try to set an item </span><span class="line" data-startTime="524">in the cache and remove the </span><span class="line" data-startTime="529">item from the cache. </span> <span class="line" data-startTime="530">And if we're able to do that </span><span class="line" data-startTime="530">and we don't get any </span><span class="line" data-startTime="532">exceptions during that time, </span><span class="line" data-startTime="532">then OK, LocalStorage works. </span></p>

<p><span class="line" data-startTime="537">So the only way I could actually </span><span class="line" data-startTime="537">check this was to use </span><span class="line" data-startTime="539">it exactly the way I wanted </span><span class="line" data-startTime="539">to be able to use it. </span> <span class="line" data-startTime="543">So I went to that check. </span> <span class="line" data-startTime="545">Now, even that caused </span><span class="line" data-startTime="545">me some problems. </span> <span class="line" data-startTime="550">So I was using this in </span><span class="line" data-startTime="550">a mobile web app. </span> <span class="line" data-startTime="552">It was a PhoneGap hybrid app. </span> <span class="line" data-startTime="554">And I noticed that my web app </span><span class="line" data-startTime="554">was taken a long time to load. </span> <span class="line" data-startTime="558">And I was trying to get </span><span class="line" data-startTime="558">this load time down. </span> <span class="line" data-startTime="560">So I profiled it. </span> <span class="line" data-startTime="561">I put little new Date </span><span class="line" data-startTime="561">in between all the </span><span class="line" data-startTime="565">things that it did. </span> <span class="line" data-startTime="565">And I tried to figure out, why </span><span class="line" data-startTime="565">is it taking so much time just </span><span class="line" data-startTime="568">to get to this main screen? </span><span class="line" data-startTime="570">And I found it was actually </span><span class="line" data-startTime="570">taking something like 300 </span><span class="line" data-startTime="573">milliseconds on Android in </span><span class="line" data-startTime="573">order to get through this </span><span class="line" data-startTime="576">LocalStorage detection check, </span><span class="line" data-startTime="576">because in my code I had </span><span class="line" data-startTime="580">script source equals </span><span class="line" data-startTime="580">lscache.js. </span></p>

<p><span class="line" data-startTime="582">It would execute that code. </span> <span class="line" data-startTime="583">And that code would </span><span class="line" data-startTime="583">immediately do the </span><span class="line" data-startTime="585">LocalStorage detection check. </span> <span class="line" data-startTime="587">So what I realized was I needed </span><span class="line" data-startTime="587">to stop doing that </span><span class="line" data-startTime="589">detection check on page load, </span><span class="line" data-startTime="589">and defer it, only do it later </span><span class="line" data-startTime="594">when I actually needed it. </span> <span class="line" data-startTime="596">So what I did is I made a little </span><span class="line" data-startTime="596">cached variable to </span><span class="line" data-startTime="598">remember where LocalStorage </span><span class="line" data-startTime="598">works, because we don't want </span><span class="line" data-startTime="601">to do this check all the time. </span> <span class="line" data-startTime="602">We just want to do it once. </span> <span class="line" data-startTime="604">So basically what happens, </span><span class="line" data-startTime="604">every time you try to use </span><span class="line" data-startTime="606">lscache, it will check to </span><span class="line" data-startTime="606">see, have we figured </span><span class="line" data-startTime="610">out yet that it works? </span><span class="line" data-startTime="611">OK. </span> <span class="line" data-startTime="611">If we haven't, let's </span><span class="line" data-startTime="611">do that check. </span> <span class="line" data-startTime="613">Let's remember it. </span></p>

<p><span class="line" data-startTime="614">And then next time when they </span><span class="line" data-startTime="614">use it, we'll remember. </span> <span class="line" data-startTime="617">So what I learned here is that </span><span class="line" data-startTime="617">you have to be careful when </span><span class="line" data-startTime="623">you're checking if something </span><span class="line" data-startTime="623">supports an API not just that </span><span class="line" data-startTime="625">it supports it, but it supports </span><span class="line" data-startTime="625">the way you want to </span><span class="line" data-startTime="628">use it, I mean, LocalStorage, </span><span class="line" data-startTime="628">you could actually be in a </span><span class="line" data-startTime="631">mode where you could </span><span class="line" data-startTime="631">read it but you </span><span class="line" data-startTime="633">wouldn't be able to write. </span> <span class="line" data-startTime="634">But maybe you only care about </span><span class="line" data-startTime="634">reading, in which case you </span><span class="line" data-startTime="636">should just check for that. </span> <span class="line" data-startTime="638">So there's a lot of subtleties </span><span class="line" data-startTime="638">to when we say something is </span><span class="line" data-startTime="641">supported or works. </span> <span class="line" data-startTime="643">It's, again, a bit more </span><span class="line" data-startTime="643">complex than that. </span> <span class="line" data-startTime="648">You also need to make sure that </span><span class="line" data-startTime="648">you don't let feature </span><span class="line" data-startTime="650">detection slow down your site. </span> <span class="line" data-startTime="652">It's always simple to do </span><span class="line" data-startTime="652">everything up, do all your </span><span class="line" data-startTime="655">checks upfront. </span></p>

<p><span class="line" data-startTime="656">And then you know you can </span><span class="line" data-startTime="656">always have it there. </span> <span class="line" data-startTime="659">But you don't want to sacrifice </span><span class="line" data-startTime="659">the users loading </span><span class="line" data-startTime="662">performance just </span><span class="line" data-startTime="662">for simplicity. </span> <span class="line" data-startTime="664">This is the unfortunate thing </span><span class="line" data-startTime="664">pretty much when it comes to </span><span class="line" data-startTime="667">performance, your code can </span><span class="line" data-startTime="667">start off beautiful. </span> <span class="line" data-startTime="670">As soon as you start worrying </span><span class="line" data-startTime="670">about performance, your code's </span><span class="line" data-startTime="673">not going to be beautiful </span><span class="line" data-startTime="673">anymore. </span> <span class="line" data-startTime="675">You're going to have to </span><span class="line" data-startTime="675">implement caching. </span> <span class="line" data-startTime="677">And it's not going to </span><span class="line" data-startTime="677">look very clean. </span> <span class="line" data-startTime="679">But sometimes we have to make </span><span class="line" data-startTime="679">our code look not as beautiful </span><span class="line" data-startTime="683">in order for users to have </span><span class="line" data-startTime="683">a better experience. </span> <span class="line" data-startTime="686">So we sacrifice a little bit of </span><span class="line" data-startTime="686">developer happiness for a </span><span class="line" data-startTime="689">little bit of user happiness. </span> <span class="line" data-startTime="690">And I know that's really </span><span class="line" data-startTime="690">hard for us to give up. </span></p>

<p><span class="line" data-startTime="693">But it's important. </span> <span class="line" data-startTime="696">And along with this, every time </span><span class="line" data-startTime="696">I encountered something </span><span class="line" data-startTime="699">with this feature detection, I </span><span class="line" data-startTime="699">thought to myself, OK, what </span><span class="line" data-startTime="703">would I want out of browsers? </span><span class="line" data-startTime="704">What could browsers give to me </span><span class="line" data-startTime="704">as a developer that would have </span><span class="line" data-startTime="707">made it easier for </span><span class="line" data-startTime="707">me in this case? </span><span class="line" data-startTime="710">So here, it would've been </span><span class="line" data-startTime="710">awesome if I could just ask </span><span class="line" data-startTime="712">the browser like, </span><span class="line" data-startTime="712">hey, browser. </span> <span class="line" data-startTime="714">Can I use LocalStorage storage </span><span class="line" data-startTime="714">in a read mode? </span><span class="line" data-startTime="716">Can I use LocalStorage </span><span class="line" data-startTime="716">in a write mode? </span><span class="line" data-startTime="718">OK. </span> <span class="line" data-startTime="719">Great. </span> <span class="line" data-startTime="719">And then the browser could </span><span class="line" data-startTime="719">figure out the most optimal </span><span class="line" data-startTime="722">way of checking and I wouldn't </span><span class="line" data-startTime="722">be up to me. </span> <span class="line" data-startTime="725">So the good thing about </span><span class="line" data-startTime="725">browsers, having browsers give </span><span class="line" data-startTime="729">us these checks, is that they </span><span class="line" data-startTime="729">could do it in a very fast way </span><span class="line" data-startTime="732">and a very efficient way, ways </span><span class="line" data-startTime="732">that I couldn't necessarily do </span><span class="line" data-startTime="735">because I'm not going </span><span class="line" data-startTime="735">behind the scenes </span><span class="line" data-startTime="736">in the browser code. </span></p>

<p><span class="line" data-startTime="738">So I hope that this is something </span><span class="line" data-startTime="738">that browsers do </span><span class="line" data-startTime="741">going forward with things </span><span class="line" data-startTime="741">like the storage APIs. </span> <span class="line" data-startTime="744">And I think that IndexedDB </span><span class="line" data-startTime="744">actually does </span><span class="line" data-startTime="745">have stuff like this. </span> <span class="line" data-startTime="747">So they learn. </span> <span class="line" data-startTime="749">All right. </span> <span class="line" data-startTime="751">Whoo. </span> <span class="line" data-startTime="751">So then we have this thing </span><span class="line" data-startTime="751">called FormData. </span> <span class="line" data-startTime="757">FormData is another </span><span class="line" data-startTime="757">addition to HTML5. </span> <span class="line" data-startTime="760">And it's something that lets </span><span class="line" data-startTime="760">you take data from all your </span><span class="line" data-startTime="764">form inputs, serialize </span><span class="line" data-startTime="764">it, send it </span><span class="line" data-startTime="766">in an XML HTTP request. </span> <span class="line" data-startTime="767">The idea is that you </span><span class="line" data-startTime="767">don't have to </span><span class="line" data-startTime="769">use jQuery.ajax anymore. </span></p>

<p><span class="line" data-startTime="772">And I thought, oh, this </span><span class="line" data-startTime="772">is really cool. </span> <span class="line" data-startTime="774">And I saw all the Google Dev </span><span class="line" data-startTime="774">Rellers were tweeting about </span><span class="line" data-startTime="777">how cool FormData. </span> <span class="line" data-startTime="778">And I was like, man. </span> <span class="line" data-startTime="780">I want to be cool like them. </span> <span class="line" data-startTime="781">I want to use FormData. </span> <span class="line" data-startTime="784">So I implemented it for a signup </span><span class="line" data-startTime="784">form on this website I </span><span class="line" data-startTime="788">made last year, so that </span><span class="line" data-startTime="788">when you signed </span><span class="line" data-startTime="790">up, you would actually &mdash; </span><span class="line" data-startTime="792">it would go through this code </span><span class="line" data-startTime="792">here, which would say, OK. </span> <span class="line" data-startTime="794">If window.FormData &mdash; </span><span class="line" data-startTime="796">we're just starting with </span><span class="line" data-startTime="796">this basic check. </span> <span class="line" data-startTime="798">If window.FormData, create the </span><span class="line" data-startTime="798">new FormData from the form. </span> <span class="line" data-startTime="801">Do a new XHR. </span> <span class="line" data-startTime="803">Send that FormData to the XHR. </span> <span class="line" data-startTime="805">If not, then we just go down </span><span class="line" data-startTime="805">to our Ajax technique. </span></p>

<p><span class="line" data-startTime="808">So I was like, OK. </span> <span class="line" data-startTime="809">This is awesome. </span> <span class="line" data-startTime="811">I've been all proper. </span> <span class="line" data-startTime="812">And I've implemented the feature </span><span class="line" data-startTime="812">detection check. </span> <span class="line" data-startTime="814">And I've done a fallback </span><span class="line" data-startTime="814">technique. </span> <span class="line" data-startTime="816">And I tested it and it </span><span class="line" data-startTime="816">works and it's great. </span> <span class="line" data-startTime="819">And I put it out there. </span> <span class="line" data-startTime="820">And I tweeted about it. </span> <span class="line" data-startTime="821">And I felt really good. </span> <span class="line" data-startTime="823">But then I got all these reports </span><span class="line" data-startTime="823">from Safari users that </span><span class="line" data-startTime="827">they weren't able to sign up. </span> <span class="line" data-startTime="829">I was like, well, this </span><span class="line" data-startTime="829">is not very good. </span> <span class="line" data-startTime="831">Sign up is somewhat a crucial </span><span class="line" data-startTime="831">part of an application. </span> <span class="line" data-startTime="833">So I was like, what is this? </span><span class="line" data-startTime="836">Why can't they sign </span><span class="line" data-startTime="836">up on Safari? </span><span class="line" data-startTime="837">Because it worked fine on my </span><span class="line" data-startTime="837">Safari, and I realized that </span><span class="line" data-startTime="840">there was this particular </span><span class="line" data-startTime="840">version of Safari &mdash; </span><span class="line" data-startTime="843">it was like 5.1.50 or whatever, </span><span class="line" data-startTime="843">only on Macs, maybe </span><span class="line" data-startTime="851">on Windows &mdash; but this particular </span><span class="line" data-startTime="851">version of Safari </span><span class="line" data-startTime="853">where FormData didn't </span><span class="line" data-startTime="853">quite work. </span></p>

<p><span class="line" data-startTime="856">It pretended to work. </span> <span class="line" data-startTime="857">But it didn't actually work. </span> <span class="line" data-startTime="859">And what would actually happen </span><span class="line" data-startTime="859">is that when you created that </span><span class="line" data-startTime="861">FormData object, it would </span><span class="line" data-startTime="861">create it and </span><span class="line" data-startTime="864">pretend it all worked. </span> <span class="line" data-startTime="865">But then there was nothing in </span><span class="line" data-startTime="865">it, which is kind of horrible, </span><span class="line" data-startTime="869">because people would be trying </span><span class="line" data-startTime="869">to sign up and there would be </span><span class="line" data-startTime="872">no data going to my server. </span> <span class="line" data-startTime="874">So I couldn't even find out what </span><span class="line" data-startTime="874">email address they put in </span><span class="line" data-startTime="877">in order to tell them like, oh, </span><span class="line" data-startTime="877">hey, I fixed it, because I </span><span class="line" data-startTime="879">was getting an empty string. </span> <span class="line" data-startTime="881">So that was pretty bad. </span> <span class="line" data-startTime="883">And the other bad thing is </span><span class="line" data-startTime="883">that there was no way to </span><span class="line" data-startTime="885">actually do a detection check </span><span class="line" data-startTime="885">for this, because FormData has </span><span class="line" data-startTime="889">no accessors. </span> <span class="line" data-startTime="890">You can't ask FormData to tell </span><span class="line" data-startTime="890">you what's in it, to </span><span class="line" data-startTime="893">say get a key out. </span> <span class="line" data-startTime="894">Give me the length of </span><span class="line" data-startTime="894">what's in there. </span> <span class="line" data-startTime="896">It's just this blob that </span><span class="line" data-startTime="896">you can't look inside. </span></p>

<p><span class="line" data-startTime="899">And maybe there's </span><span class="line" data-startTime="899">nothing in it. </span> <span class="line" data-startTime="900">So I was like, OK. </span> <span class="line" data-startTime="901">I'm going to have to just </span><span class="line" data-startTime="901">blacklist Safari, because I </span><span class="line" data-startTime="905">knew it had a problem and </span><span class="line" data-startTime="905">that was my only option. </span> <span class="line" data-startTime="908">So I ended up coming up with a </span><span class="line" data-startTime="908">detection, user agent sniffing </span><span class="line" data-startTime="911">for Safari. </span> <span class="line" data-startTime="913">And I said, OK. </span> <span class="line" data-startTime="913">If window.FormData and we're </span><span class="line" data-startTime="913">not in Safari, then lets go </span><span class="line" data-startTime="918">send it on. </span> <span class="line" data-startTime="920">And I could have done the very </span><span class="line" data-startTime="920">specific version of Safari, </span><span class="line" data-startTime="923">but I didn't want to &mdash; you know, </span><span class="line" data-startTime="923">if they introduce the </span><span class="line" data-startTime="925">bug in one version, who's to </span><span class="line" data-startTime="925">say they're not going to </span><span class="line" data-startTime="927">introduce it in another </span><span class="line" data-startTime="927">version? </span><span class="line" data-startTime="928">So I just wanted to </span><span class="line" data-startTime="928">move on with life </span><span class="line" data-startTime="931">and get it over with. </span></p>

<p><span class="line" data-startTime="934">So what I learned here is </span><span class="line" data-startTime="934">that it sounds really &mdash; </span><span class="line" data-startTime="938">these new APIs, they seem </span><span class="line" data-startTime="938">really exciting. </span> <span class="line" data-startTime="941">And if you go to conferences a </span><span class="line" data-startTime="941">lot, like you guys might, you </span><span class="line" data-startTime="947">hear about these new APIs </span><span class="line" data-startTime="947">and you're like, </span><span class="line" data-startTime="949">oh, that's so cool. </span> <span class="line" data-startTime="949">I'm going to go home </span><span class="line" data-startTime="949">and implement it </span><span class="line" data-startTime="951">immediately for my app. </span> <span class="line" data-startTime="952">And you get really excited. </span> <span class="line" data-startTime="954">But you've got to be careful </span><span class="line" data-startTime="954">about using new APIs, because </span><span class="line" data-startTime="957">the bugs in them are new. </span> <span class="line" data-startTime="959">They're not documented. </span> <span class="line" data-startTime="962">New bugs will come up in recent </span><span class="line" data-startTime="962">versions of browsers. </span> <span class="line" data-startTime="966">And especially if you're doing </span><span class="line" data-startTime="966">something, if it's some </span><span class="line" data-startTime="968">mission-critical part of your </span><span class="line" data-startTime="968">site, like signup, I wouldn't </span><span class="line" data-startTime="971">recommend trying out </span><span class="line" data-startTime="971">a new API there. </span> <span class="line" data-startTime="974">If it's a mission-critical part </span><span class="line" data-startTime="974">of your site, then just </span><span class="line" data-startTime="976">go with the old techniques. </span> <span class="line" data-startTime="978">They might not be as cool, but </span><span class="line" data-startTime="978">we've had them for years. </span> <span class="line" data-startTime="982">And people have tested them. </span></p>

<p><span class="line" data-startTime="984">And people know what all </span><span class="line" data-startTime="984">the bugs are with </span><span class="line" data-startTime="986">file upload in IE7. </span> <span class="line" data-startTime="988">And they've figured them </span><span class="line" data-startTime="988">out in libraries. </span> <span class="line" data-startTime="990">So I would say try and use those </span><span class="line" data-startTime="990">old APIs and libraries </span><span class="line" data-startTime="995">that people have written, </span><span class="line" data-startTime="995">because they're battle-tested. </span> <span class="line" data-startTime="999">And you don't want to be using </span><span class="line" data-startTime="999">something so new and shiny for </span><span class="line" data-startTime="1003">something that's so important. </span> <span class="line" data-startTime="1005">Now, for browsers, we really </span><span class="line" data-startTime="1005">need accessors for anything </span><span class="line" data-startTime="1011">that has storage in it. </span> <span class="line" data-startTime="1012">Like with LocalStorage, if there </span><span class="line" data-startTime="1012">was no accessor, I would </span><span class="line" data-startTime="1014">have had no way of knowing that </span><span class="line" data-startTime="1014">it actually successfully </span><span class="line" data-startTime="1016">stored something. </span> <span class="line" data-startTime="1018">So this is something that </span><span class="line" data-startTime="1018">they should add to any </span><span class="line" data-startTime="1019">sort of API like this. </span> <span class="line" data-startTime="1023">So now let's talk a bit about </span><span class="line" data-startTime="1023">CSS, because this is something </span><span class="line" data-startTime="1027">that you can run into as well, </span><span class="line" data-startTime="1027">because we have a lot </span><span class="line" data-startTime="1029">of fancy CSS now. </span></p>

<p><span class="line" data-startTime="1031">We've got shiny animations </span><span class="line" data-startTime="1031">and transforms. </span> <span class="line" data-startTime="1035">So I was working on that mobile </span><span class="line" data-startTime="1037">web app, using PhoneGap. </span> <span class="line" data-startTime="1038">And I had this embedded </span><span class="line" data-startTime="1038">WebView. </span> <span class="line" data-startTime="1040">And I decided to do it as a </span><span class="line" data-startTime="1040">mobile web app because I </span><span class="line" data-startTime="1043">already knew HTML and CSS. </span> <span class="line" data-startTime="1044">And I was like, I already </span><span class="line" data-startTime="1044">know HTML and CSS. </span> <span class="line" data-startTime="1046">I'm just going to use </span><span class="line" data-startTime="1046">it to make this app. </span> <span class="line" data-startTime="1048">I'll be great. </span> <span class="line" data-startTime="1048">I don't have to learn </span><span class="line" data-startTime="1048">something new. </span> <span class="line" data-startTime="1050">And at the time, I </span><span class="line" data-startTime="1050">was doing it for </span><span class="line" data-startTime="1054">both iPhone and Android. </span> <span class="line" data-startTime="1055">And only iPhone had a set </span><span class="line" data-startTime="1055">of design guidelines. </span> <span class="line" data-startTime="1057">Android hadn't really come </span><span class="line" data-startTime="1057">up with anything yet. </span></p>

<p><span class="line" data-startTime="1060">So I just followed the iPhone </span><span class="line" data-startTime="1060">design guidelines. </span> <span class="line" data-startTime="1062">And they were a lot of like </span><span class="line" data-startTime="1062">rounded corners and gradients </span><span class="line" data-startTime="1066">and they kind of looked </span><span class="line" data-startTime="1066">really bubbly. </span> <span class="line" data-startTime="1068">And luckily, CSS3 made it really </span><span class="line" data-startTime="1068">easy to make something </span><span class="line" data-startTime="1071">look iPhone-y, because we have </span><span class="line" data-startTime="1071">the box shadow and the </span><span class="line" data-startTime="1074">gradient and the border radius </span><span class="line" data-startTime="1074">and all of that. </span> <span class="line" data-startTime="1077">So I had my app. </span> <span class="line" data-startTime="1079">And it was all good. </span> <span class="line" data-startTime="1080">And I was feeling good, having </span><span class="line" data-startTime="1080">it out on the markets there. </span> <span class="line" data-startTime="1084">But then what happened is I was </span><span class="line" data-startTime="1084">using Android at the time </span><span class="line" data-startTime="1089">and I would notice from time to </span><span class="line" data-startTime="1089">time that the entire screen </span><span class="line" data-startTime="1092">would just go completely </span><span class="line" data-startTime="1092">white. </span> <span class="line" data-startTime="1095">And I would be unable &mdash; </span><span class="line" data-startTime="1096">there would just be nothing </span><span class="line" data-startTime="1096">there anymore. </span></p>

<p><span class="line" data-startTime="1098">And I would have to restart the </span><span class="line" data-startTime="1098">app or somehow go back. </span> <span class="line" data-startTime="1102">And it was kind of useless. </span> <span class="line" data-startTime="1104">You can't use an app that's </span><span class="line" data-startTime="1104">just a white screen. </span> <span class="line" data-startTime="1106">It's highly unfunctional. </span> <span class="line" data-startTime="1108">So I was like, OK. </span> <span class="line" data-startTime="1109">Clearly something is not working </span><span class="line" data-startTime="1109">in this app that I </span><span class="line" data-startTime="1112">need to work out. </span> <span class="line" data-startTime="1113">And I kind of had a suspicion </span><span class="line" data-startTime="1113">that maybe Android didn't like </span><span class="line" data-startTime="1116">all this fancy CSS. </span> <span class="line" data-startTime="1118">I'd kind of heard rumors that </span><span class="line" data-startTime="1118">Android wasn't so good with </span><span class="line" data-startTime="1121">new CSS3 stuff. </span> <span class="line" data-startTime="1123">So I suspected that it was </span><span class="line" data-startTime="1123">having trouble actually </span><span class="line" data-startTime="1126">rendering this. </span> <span class="line" data-startTime="1128">So what I did was I spent an </span><span class="line" data-startTime="1128">entire afternoon sitting there </span><span class="line" data-startTime="1132">commenting out CSS, redeploying </span><span class="line" data-startTime="1132">my APK to my </span><span class="line" data-startTime="1135">phone, scrolling and scrolling </span><span class="line" data-startTime="1135">and scrolling, waiting to see </span><span class="line" data-startTime="1139">if I got a white screen. </span></p>

<p><span class="line" data-startTime="1141">That was probably one </span><span class="line" data-startTime="1141">of the most boring </span><span class="line" data-startTime="1142">afternoons of my life. </span> <span class="line" data-startTime="1145">And so eventually, I did figure </span><span class="line" data-startTime="1145">out that if I commented </span><span class="line" data-startTime="1148">out enough of the fancy CSS, </span><span class="line" data-startTime="1148">that I wouldn't get white </span><span class="line" data-startTime="1151">screens anymore. </span> <span class="line" data-startTime="1153">And I didn't want to have to </span><span class="line" data-startTime="1153">sit there and figure out </span><span class="line" data-startTime="1155">exactly how much CSS Android </span><span class="line" data-startTime="1155">can handle, because it was </span><span class="line" data-startTime="1159">just really boring. </span> <span class="line" data-startTime="1160">So I decided, well, </span><span class="line" data-startTime="1160">you know what? </span><span class="line" data-startTime="1161">I'm just going to get </span><span class="line" data-startTime="1161">rid of all of it. </span> <span class="line" data-startTime="1163">I'll take away the border </span><span class="line" data-startTime="1163">radius, the </span><span class="line" data-startTime="1165">gradients, the box shadows. </span> <span class="line" data-startTime="1167">And so it ended up looking </span><span class="line" data-startTime="1167">really flat. </span> <span class="line" data-startTime="1170">Then, conveniently, Android </span><span class="line" data-startTime="1170">came out with their design </span><span class="line" data-startTime="1173">guidelines, which were the </span><span class="line" data-startTime="1173">opposite of iPhone's. </span> <span class="line" data-startTime="1176">And their design guidelines </span><span class="line" data-startTime="1176">were flat, </span><span class="line" data-startTime="1179">not gradient, square. </span> <span class="line" data-startTime="1183">Wow, that's perfect. </span> <span class="line" data-startTime="1184">It's like you knew </span><span class="line" data-startTime="1184">that you were </span><span class="line" data-startTime="1186">incapable of handling CSS3. </span> <span class="line" data-startTime="1190">So that worked out really </span><span class="line" data-startTime="1190">well, actually. </span> <span class="line" data-startTime="1192">But the thing is that I still </span><span class="line" data-startTime="1192">wanted to have the iPhone look </span><span class="line" data-startTime="1195">and feel for iPhone users and </span><span class="line" data-startTime="1195">the Android look and feel for </span><span class="line" data-startTime="1199">the Android users. </span></p>

<p><span class="line" data-startTime="1200">And I was doing this from the </span><span class="line" data-startTime="1200">same code base, so I needed to </span><span class="line" data-startTime="1204">detect Android. </span> <span class="line" data-startTime="1205">So you can see here the </span><span class="line" data-startTime="1205">transformation from the iPhone </span><span class="line" data-startTime="1208">to the Android. </span> <span class="line" data-startTime="1210">So to detect Android, it's a </span><span class="line" data-startTime="1210">little more complex than you </span><span class="line" data-startTime="1214">would imagine. </span> <span class="line" data-startTime="1215">I was doing the standard user </span><span class="line" data-startTime="1215">agent check for popular </span><span class="line" data-startTime="1217">Android devices. </span> <span class="line" data-startTime="1219">I was also using the PhoneGap </span><span class="line" data-startTime="1219">API that they provide for </span><span class="line" data-startTime="1221">checking device. </span> <span class="line" data-startTime="1222">And I was also checking the URL </span><span class="line" data-startTime="1222">parameter, because I test </span><span class="line" data-startTime="1225">my mobile web app in the browser </span><span class="line" data-startTime="1225">as well, so I wanted </span><span class="line" data-startTime="1228">to be able to just fake Android </span><span class="line" data-startTime="1228">when I was testing in </span><span class="line" data-startTime="1230">the browser. </span> <span class="line" data-startTime="1231">But finally, when I decided to </span><span class="line" data-startTime="1231">Android, I add the Android </span><span class="line" data-startTime="1234">class to the body tag. </span></p>

<p><span class="line" data-startTime="1235">And then in my CSS, I can </span><span class="line" data-startTime="1235">just say, oh, OK. </span> <span class="line" data-startTime="1238">If we're looking at a modal </span><span class="line" data-startTime="1238">class inside the Android body </span><span class="line" data-startTime="1241">class, then just reset all </span><span class="line" data-startTime="1241">these fancy things. </span> <span class="line" data-startTime="1244">Box shadow, none. </span> <span class="line" data-startTime="1246">No border radius. </span> <span class="line" data-startTime="1248">Get rid of all that. </span> <span class="line" data-startTime="1249">Reset it all to zero. </span> <span class="line" data-startTime="1251">And that worked. </span> <span class="line" data-startTime="1252">So what I learned here is that </span><span class="line" data-startTime="1252">just because something is </span><span class="line" data-startTime="1255">supported, does not mean </span><span class="line" data-startTime="1255">it's supported well. </span> <span class="line" data-startTime="1260">It's really easy to throw in </span><span class="line" data-startTime="1260">support for these things. </span> <span class="line" data-startTime="1263">It's much harder to make them </span><span class="line" data-startTime="1263">work really well and be really </span><span class="line" data-startTime="1266">performant, especially </span><span class="line" data-startTime="1266">for this CSS3 stuff. </span> <span class="line" data-startTime="1270">So you really need to check for </span><span class="line" data-startTime="1270">that, and especially if </span><span class="line" data-startTime="1273">you're using these </span><span class="line" data-startTime="1273">features in bulk. </span> <span class="line" data-startTime="1275">Part of my problem was that </span><span class="line" data-startTime="1275">I had kind of an infinite </span><span class="line" data-startTime="1278">scrolling interface. </span> <span class="line" data-startTime="1279">So there was potentially lots </span><span class="line" data-startTime="1279">and lots of these features </span><span class="line" data-startTime="1282">that were kind of building up </span><span class="line" data-startTime="1282">and being used by the browser. </span></p>

<p><span class="line" data-startTime="1285">I think if I only had a limited </span><span class="line" data-startTime="1285">amount of usage of it, </span><span class="line" data-startTime="1289">I probably could have more </span><span class="line" data-startTime="1289">easily controlled it and </span><span class="line" data-startTime="1292">predicted how it would form. </span> <span class="line" data-startTime="1294">But since I had more and more of </span><span class="line" data-startTime="1294">this CSS3 features building </span><span class="line" data-startTime="1297">up, I think that contributed </span><span class="line" data-startTime="1297">to Android kind of freaking </span><span class="line" data-startTime="1299">out and going, oh, </span><span class="line" data-startTime="1299">it's too many. </span> <span class="line" data-startTime="1303">I'm just guessing that's </span><span class="line" data-startTime="1303">what Android does. </span> <span class="line" data-startTime="1306">So if you have any sort of </span><span class="line" data-startTime="1306">interfaces which potentially </span><span class="line" data-startTime="1309">get bigger and bigger amounts </span><span class="line" data-startTime="1309">of content and don't have a </span><span class="line" data-startTime="1312">finite cap, really be careful </span><span class="line" data-startTime="1312">about your performance there. </span> <span class="line" data-startTime="1316">I worked on the Google </span><span class="line" data-startTime="1316">Wave team years ago. </span> <span class="line" data-startTime="1320">And we had that problem </span><span class="line" data-startTime="1320">with Waves, Waves </span><span class="line" data-startTime="1325">that got way too long. </span> <span class="line" data-startTime="1326">They just had too much </span><span class="line" data-startTime="1326">DOM inside them. </span> <span class="line" data-startTime="1328">So we really had to look at </span><span class="line" data-startTime="1328">that DOM and say, OK, we </span><span class="line" data-startTime="1331">probably shouldn't be using </span><span class="line" data-startTime="1331">a table to make all of our </span><span class="line" data-startTime="1333">buttons, because that really, </span><span class="line" data-startTime="1333">really adds up when you get </span><span class="line" data-startTime="1337">these really long Waves. </span> <span class="line" data-startTime="1338">So definitely any place where </span><span class="line" data-startTime="1338">you've got this scrolling or </span><span class="line" data-startTime="1342">lots of things adding </span><span class="line" data-startTime="1342">up, look out for it. </span></p>

<p><span class="line" data-startTime="1345">Now for browsers, I just want </span><span class="line" data-startTime="1345">browsers to know their limits. </span> <span class="line" data-startTime="1349">I would much rather that </span><span class="line" data-startTime="1349">Android realize that it </span><span class="line" data-startTime="1352">couldn't render my fancy CSS and </span><span class="line" data-startTime="1352">just not done it, instead </span><span class="line" data-startTime="1357">of pretending it could do it </span><span class="line" data-startTime="1357">and then rendering a white </span><span class="line" data-startTime="1359">screen, because white screens </span><span class="line" data-startTime="1359">are really not easy to use. </span> <span class="line" data-startTime="1365">It's like worse than </span><span class="line" data-startTime="1365">blue screens. </span> <span class="line" data-startTime="1366">At least blue screens you know </span><span class="line" data-startTime="1366">it's a blue screen of death. </span> <span class="line" data-startTime="1368">You're like, oh, OK. </span> <span class="line" data-startTime="1369">It died. </span> <span class="line" data-startTime="1369">I'm just going to restart it. </span> <span class="line" data-startTime="1371">White screens it's like, </span><span class="line" data-startTime="1371">eh, I don't know </span><span class="line" data-startTime="1373">what's going on here. </span> <span class="line" data-startTime="1374">It's kind of abstract. </span> <span class="line" data-startTime="1376">So browsers should just </span><span class="line" data-startTime="1376">know their limits. </span></p>

<p><span class="line" data-startTime="1379">So should all of us. </span> <span class="line" data-startTime="1380">OK. </span> <span class="line" data-startTime="1383">So finally I want to talk about </span><span class="line" data-startTime="1383">a signup process that we </span><span class="line" data-startTime="1386">have at Coursera that I helped </span><span class="line" data-startTime="1386">on a few months ago. </span> <span class="line" data-startTime="1389">So we introduced this thing </span><span class="line" data-startTime="1389">called Signature Track, which </span><span class="line" data-startTime="1391">is a way of taking courses while </span><span class="line" data-startTime="1391">verifying your identity. </span> <span class="line" data-startTime="1395">And there are a few technical </span><span class="line" data-startTime="1395">components of Signature Track. </span> <span class="line" data-startTime="1397">And we wanted to make sure that </span><span class="line" data-startTime="1397">people knew about these </span><span class="line" data-startTime="1400">technical requirements before </span><span class="line" data-startTime="1400">they signed up, because I </span><span class="line" data-startTime="1402">didn't want users to get </span><span class="line" data-startTime="1402">halfway through this </span><span class="line" data-startTime="1405">multi-step signup process and </span><span class="line" data-startTime="1405">then realize that there was no </span><span class="line" data-startTime="1407">way they would've able to </span><span class="line" data-startTime="1407">complete it and then they get </span><span class="line" data-startTime="1410">all mad, like, Coursera, why </span><span class="line" data-startTime="1410">you tease me like that? </span><span class="line" data-startTime="1413">So the requirements were that </span><span class="line" data-startTime="1413">you needed to have a physical </span><span class="line" data-startTime="1419">keyboard, because we do this </span><span class="line" data-startTime="1419">keystroke biometrics algorithm </span><span class="line" data-startTime="1423">and it doesn't work so well </span><span class="line" data-startTime="1423">on soft keyboards. </span> <span class="line" data-startTime="1425">So we wanted you to have a </span><span class="line" data-startTime="1425">real physical keyboard. </span></p>

<p><span class="line" data-startTime="1428">You needed to have a webcam, </span><span class="line" data-startTime="1428">because we took a picture of </span><span class="line" data-startTime="1430">your face every time you took a </span><span class="line" data-startTime="1430">quiz and when you signed up </span><span class="line" data-startTime="1433">and match it to your ID. </span> <span class="line" data-startTime="1435">So we couldn't have you do it </span><span class="line" data-startTime="1435">if you didn't have a webcam. </span> <span class="line" data-startTime="1438">And you needed to have </span><span class="line" data-startTime="1438">a modern browser. </span> <span class="line" data-startTime="1441">And also you needed to have </span><span class="line" data-startTime="1441">Flash, because we're using </span><span class="line" data-startTime="1442">Flash to get the webcam stuff. </span> <span class="line" data-startTime="1444">I know that you can it </span><span class="line" data-startTime="1444">in HTML5, but it </span><span class="line" data-startTime="1447">didn't work so well. </span> <span class="line" data-startTime="1449">So I needed to figure out how to </span><span class="line" data-startTime="1449">do checks for all of these. </span> <span class="line" data-startTime="1453">The first thing was a </span><span class="line" data-startTime="1453">physical keyboard. </span> <span class="line" data-startTime="1455">And that was a little tricky, </span><span class="line" data-startTime="1455">because there's no such thing </span><span class="line" data-startTime="1458">as asking the browser </span><span class="line" data-startTime="1458">if there's a </span><span class="line" data-startTime="1459">physical keyboard attached. </span> <span class="line" data-startTime="1461">So we said, all right, well, </span><span class="line" data-startTime="1461">maybe we should just look to </span><span class="line" data-startTime="1463">see if it's a touch device. </span> <span class="line" data-startTime="1465">So we started off with this </span><span class="line" data-startTime="1465">check here, like is </span><span class="line" data-startTime="1467">ontouchstart in window or </span><span class="line" data-startTime="1467">DocumentTouch, then OK, we're </span><span class="line" data-startTime="1470">on a touch device. </span></p>

<p><span class="line" data-startTime="1471">And we rolled that out, but we </span><span class="line" data-startTime="1471">immediately got cases where it </span><span class="line" data-startTime="1474">thought you were on a touch </span><span class="line" data-startTime="1474">device and you weren't and </span><span class="line" data-startTime="1476">vice versa. </span> <span class="line" data-startTime="1477">And people would actually </span><span class="line" data-startTime="1477">have physical keyboards. </span> <span class="line" data-startTime="1479">And we're like, all right. </span> <span class="line" data-startTime="1480">We are just going to blacklist </span><span class="line" data-startTime="1480">mobile browsers. </span> <span class="line" data-startTime="1484">So basically, you're only going </span><span class="line" data-startTime="1484">to be able to do this on </span><span class="line" data-startTime="1487">your desktop browser. </span> <span class="line" data-startTime="1488">And we'll give you a link to </span><span class="line" data-startTime="1488">let us know that if you </span><span class="line" data-startTime="1490">actually do have a physical </span><span class="line" data-startTime="1490">keyboard, we'll </span><span class="line" data-startTime="1492">give you that option. </span> <span class="line" data-startTime="1495">So we ended up doing that, </span><span class="line" data-startTime="1495">because we needed something &mdash; </span><span class="line" data-startTime="1497">I just needed something that </span><span class="line" data-startTime="1497">worked to get this out fast. </span></p>

<p><span class="line" data-startTime="1500">But the thing is, we </span><span class="line" data-startTime="1500">would tell people. </span> <span class="line" data-startTime="1502">So every time I would detect </span><span class="line" data-startTime="1502">something about a user, I </span><span class="line" data-startTime="1506">would let them know like, hey, </span><span class="line" data-startTime="1506">this is the reason that we're </span><span class="line" data-startTime="1508">not letting you do it, so that </span><span class="line" data-startTime="1508">then they could see. </span> <span class="line" data-startTime="1512">And then they could contact us </span><span class="line" data-startTime="1512">and say, oh, hey, you say that </span><span class="line" data-startTime="1515">you blocked me because I didn't </span><span class="line" data-startTime="1515">have a hard keyboard, </span><span class="line" data-startTime="1517">but actually I do. </span> <span class="line" data-startTime="1518">And then we can decide to </span><span class="line" data-startTime="1518">unblock them or we can change </span><span class="line" data-startTime="1520">our blocking process. </span></p>

<p><span class="line" data-startTime="1522">We actually haven't gotten </span><span class="line" data-startTime="1522">emails about that check yet, </span><span class="line" data-startTime="1525">so I guess it's kind </span><span class="line" data-startTime="1525">of working. </span> <span class="line" data-startTime="1528">Now I just want to give an aside </span><span class="line" data-startTime="1528">on touch events, because </span><span class="line" data-startTime="1531">touch events are really, really </span><span class="line" data-startTime="1531">interesting things. </span> <span class="line" data-startTime="1534">And there's been a lot of very </span><span class="line" data-startTime="1534">interesting articles lately </span><span class="line" data-startTime="1537">about touch events and </span><span class="line" data-startTime="1537">whether you should be </span><span class="line" data-startTime="1541">detecting them and how. </span> <span class="line" data-startTime="1542">So if we want to look for touch </span><span class="line" data-startTime="1542">events, there's a couple </span><span class="line" data-startTime="1546">things we have to do across </span><span class="line" data-startTime="1546">different browsers to find out </span><span class="line" data-startTime="1549">if that browser is capable </span><span class="line" data-startTime="1549">of doing touch events. </span> <span class="line" data-startTime="1553">But there's a difference between </span><span class="line" data-startTime="1553">a browser supporting </span><span class="line" data-startTime="1555">touch events and the user </span><span class="line" data-startTime="1555">actually using touch events. </span></p>

<p><span class="line" data-startTime="1559">So if you're on an Android </span><span class="line" data-startTime="1559">tablet, you could still </span><span class="line" data-startTime="1562">connect a mouse to </span><span class="line" data-startTime="1562">your tablet. </span> <span class="line" data-startTime="1564">And you can actually potentially </span><span class="line" data-startTime="1564">be using a website </span><span class="line" data-startTime="1566">and switching between using a </span><span class="line" data-startTime="1566">mouse and using your finger on </span><span class="line" data-startTime="1570">the same web page. </span> <span class="line" data-startTime="1573">So that means as a developer </span><span class="line" data-startTime="1573">you shouldn't be relying on </span><span class="line" data-startTime="1575">just the fact that something's a </span><span class="line" data-startTime="1575">touch device as meaning that </span><span class="line" data-startTime="1579">you should be just be doing </span><span class="line" data-startTime="1579">everything reacting to touch, </span><span class="line" data-startTime="1582">because a lot of times the users </span><span class="line" data-startTime="1582">can connect these other </span><span class="line" data-startTime="1584">devices as well. </span></p>

<p><span class="line" data-startTime="1585">And I think this is going to </span><span class="line" data-startTime="1585">become more and more common, </span><span class="line" data-startTime="1587">that we'll have these devices </span><span class="line" data-startTime="1587">that are both. </span> <span class="line" data-startTime="1589">I mean, we all just got that </span><span class="line" data-startTime="1589">Chrome Pixel, right? </span><span class="line" data-startTime="1591">And a Chrome Pixel is a </span><span class="line" data-startTime="1591">touchscreen and a keyboard and </span><span class="line" data-startTime="1595">you have a little mouse </span><span class="line" data-startTime="1595">down there. </span> <span class="line" data-startTime="1598">So this is becoming more and </span><span class="line" data-startTime="1598">more the reality, so we have </span><span class="line" data-startTime="1600">to be really careful that when </span><span class="line" data-startTime="1600">we're looking for touch, that </span><span class="line" data-startTime="1603">we consider the fact that </span><span class="line" data-startTime="1603">they could still </span><span class="line" data-startTime="1605">be using click events. </span> <span class="line" data-startTime="1608">So the standard way &mdash; </span><span class="line" data-startTime="1610">or one way that you could </span><span class="line" data-startTime="1610">actually not care about this </span><span class="line" data-startTime="1614">is that you could listen to a </span><span class="line" data-startTime="1614">touch event and if you get a </span><span class="line" data-startTime="1617">touch event, you would just </span><span class="line" data-startTime="1617">trigger your listener for the </span><span class="line" data-startTime="1619">click event. </span> <span class="line" data-startTime="1620">And basically, they would both </span><span class="line" data-startTime="1620">do the same thing, so that way </span><span class="line" data-startTime="1624">the user can go between using </span><span class="line" data-startTime="1624">touching and using click and </span><span class="line" data-startTime="1628">your web page should respond </span><span class="line" data-startTime="1628">exactly the same way. </span> <span class="line" data-startTime="1630">So if you are doing anything </span><span class="line" data-startTime="1630">right now or thinking about </span><span class="line" data-startTime="1633">doing something where you're </span><span class="line" data-startTime="1633">detecting touch events and </span><span class="line" data-startTime="1635">doing something different, think </span><span class="line" data-startTime="1635">to yourself, how would </span><span class="line" data-startTime="1638">this work if the user also </span><span class="line" data-startTime="1638">had a mouse attached? </span><span class="line" data-startTime="1643">How would it work if they </span><span class="line" data-startTime="1643">switched between the mouse and </span><span class="line" data-startTime="1645">this touch screen halfway </span><span class="line" data-startTime="1645">through the interaction? </span><span class="line" data-startTime="1648">That's kind of the trickiest, </span><span class="line" data-startTime="1648">but it could happen. </span></p>

<p><span class="line" data-startTime="1652">And there are some really </span><span class="line" data-startTime="1652">interesting articles about </span><span class="line" data-startTime="1653">that there. </span> <span class="line" data-startTime="1655">OK. </span> <span class="line" data-startTime="1655">So that's an aside. </span> <span class="line" data-startTime="1657">We also need to detect </span><span class="line" data-startTime="1657">the Flash plug-in. </span> <span class="line" data-startTime="1659">And I just used the SWFObject </span><span class="line" data-startTime="1659">library for this, which is a </span><span class="line" data-startTime="1663">nice, well-supported library. </span> <span class="line" data-startTime="1664">And it'll even tell you the </span><span class="line" data-startTime="1664">Flash Player versions, in case </span><span class="line" data-startTime="1666">you want to support </span><span class="line" data-startTime="1666">particular verses. </span> <span class="line" data-startTime="1668">And I also wanted to </span><span class="line" data-startTime="1668">check for a webcam. </span> <span class="line" data-startTime="1670">Unfortunately, there is no way </span><span class="line" data-startTime="1670">to check for a webcam unless </span><span class="line" data-startTime="1674">you actually put up the webcam </span><span class="line" data-startTime="1674">prompt and ask the user to </span><span class="line" data-startTime="1678">give permission. </span> <span class="line" data-startTime="1679">And I wanted to check for this </span><span class="line" data-startTime="1679">before they even got to the </span><span class="line" data-startTime="1682">webcam part of the process. </span></p>

<p><span class="line" data-startTime="1684">So I gave up. </span> <span class="line" data-startTime="1685">And we put up a little modal </span><span class="line" data-startTime="1685">that said, hey, remember, you </span><span class="line" data-startTime="1688">need a webcam. </span> <span class="line" data-startTime="1689">And presumably if they saw that </span><span class="line" data-startTime="1689">and decided to keep going </span><span class="line" data-startTime="1693">even though they didn't have a </span><span class="line" data-startTime="1693">webcam, well, that's their </span><span class="line" data-startTime="1696">prerogative. </span> <span class="line" data-startTime="1697">So sometimes you just </span><span class="line" data-startTime="1697">can't detect things. </span> <span class="line" data-startTime="1699">And you have to accept that. </span> <span class="line" data-startTime="1704">So in this case, I learned that </span><span class="line" data-startTime="1704">you can't detect things </span><span class="line" data-startTime="1709">all the time. </span> <span class="line" data-startTime="1710">And you have to do </span><span class="line" data-startTime="1710">different things. </span> <span class="line" data-startTime="1711">And if you do decide to block </span><span class="line" data-startTime="1711">users, which can be a bad </span><span class="line" data-startTime="1715">thing, but if you do block </span><span class="line" data-startTime="1715">them, tell them why you </span><span class="line" data-startTime="1718">blocked them. </span> <span class="line" data-startTime="1719">Give them an option to contact </span><span class="line" data-startTime="1719">you and explain what their </span><span class="line" data-startTime="1725">particular setup is. </span> <span class="line" data-startTime="1726">And maybe you'll realize then </span><span class="line" data-startTime="1726">that the code you're using </span><span class="line" data-startTime="1729">could actually be </span><span class="line" data-startTime="1729">much improved. </span></p>

<p><span class="line" data-startTime="1731">And for browsers, I would really </span><span class="line" data-startTime="1731">like for browsers to </span><span class="line" data-startTime="1734">give us a way to detect those </span><span class="line" data-startTime="1734">physical devices and plug-ins </span><span class="line" data-startTime="1737">so I wouldn't have to go through </span><span class="line" data-startTime="1737">all this effort to try </span><span class="line" data-startTime="1739">and figure it out. </span> <span class="line" data-startTime="1740">So something like, is there </span><span class="line" data-startTime="1740">a physical keyboard? </span><span class="line" data-startTime="1742">Are they using it right now? </span><span class="line" data-startTime="1744">Do they have a webcam? </span><span class="line" data-startTime="1745">Do they have Flash? </span><span class="line" data-startTime="1746">Those would all have made my </span><span class="line" data-startTime="1746">life much, much easier. </span> <span class="line" data-startTime="1750">So to finish up, this </span><span class="line" data-startTime="1750">is a reminder of </span><span class="line" data-startTime="1752">why this all matters. </span> <span class="line" data-startTime="1753">This is a visualization of </span><span class="line" data-startTime="1753">browser support for a </span><span class="line" data-startTime="1756">particular feature. </span> <span class="line" data-startTime="1756">And there's lots more </span><span class="line" data-startTime="1756">visualizations of this, but </span><span class="line" data-startTime="1758">the point is that, yeah, we're </span><span class="line" data-startTime="1758">going to have unequal </span><span class="line" data-startTime="1761">distribution of feature support </span><span class="line" data-startTime="1761">for a long time going </span><span class="line" data-startTime="1764">forward, basically forever. </span> <span class="line" data-startTime="1766">People will keep coming </span><span class="line" data-startTime="1766">up with new things. </span></p>

<p><span class="line" data-startTime="1768">Browsers will keep not </span><span class="line" data-startTime="1768">implementing them at the same </span><span class="line" data-startTime="1770">rate, keep implementing them </span><span class="line" data-startTime="1770">in different ways, with </span><span class="line" data-startTime="1772">different performance concerns, </span><span class="line" data-startTime="1772">with different </span><span class="line" data-startTime="1774">attributes supported. </span> <span class="line" data-startTime="1775">And we're going to just have </span><span class="line" data-startTime="1775">to keep dealing with that. </span> <span class="line" data-startTime="1777">So this is something that we're </span><span class="line" data-startTime="1777">going to have to think </span><span class="line" data-startTime="1779">about for years to come. </span> <span class="line" data-startTime="1783">Now browsers are </span><span class="line" data-startTime="1783">aware of this. </span> <span class="line" data-startTime="1784">And browsers are </span><span class="line" data-startTime="1784">trying to help. </span> <span class="line" data-startTime="1785">So browsers, they did </span><span class="line" data-startTime="1785">introduce this CSS </span><span class="line" data-startTime="1788">conditionals, level 3 spec, </span><span class="line" data-startTime="1788">which actually has this </span><span class="line" data-startTime="1791">@support rule for CSS, where </span><span class="line" data-startTime="1791">you can say, oh, hey. </span> <span class="line" data-startTime="1794">Does this browser actually </span><span class="line" data-startTime="1794">support this CSS? </span><span class="line" data-startTime="1797">And then you could serve </span><span class="line" data-startTime="1797">different styles. </span></p>

<p><span class="line" data-startTime="1798">And they've got the same </span><span class="line" data-startTime="1798">thing in JavaScript, </span><span class="line" data-startTime="1800">window.supportsCSS. </span> <span class="line" data-startTime="1802">And this is actually supported </span><span class="line" data-startTime="1802">by three browsers now. </span> <span class="line" data-startTime="1804">So the cool thing is that </span><span class="line" data-startTime="1804">browsers are actually </span><span class="line" data-startTime="1806">realizing that, yeah, </span><span class="line" data-startTime="1806">this is something </span><span class="line" data-startTime="1808">developers care about. </span> <span class="line" data-startTime="1809">And they're trying to come up </span><span class="line" data-startTime="1809">with more ways for us to </span><span class="line" data-startTime="1810">figure it out. </span> <span class="line" data-startTime="1811">But this is still really </span><span class="line" data-startTime="1811">cutting-edge. </span> <span class="line" data-startTime="1813">And most of you, we won't be </span><span class="line" data-startTime="1813">able to use this quite yet. </span> <span class="line" data-startTime="1817">So in the meantime, what should </span><span class="line" data-startTime="1817">be your strategy? </span><span class="line" data-startTime="1820">First of all, don't assume it's </span><span class="line" data-startTime="1820">going to be easy, because </span><span class="line" data-startTime="1823">sometimes it's not. </span> <span class="line" data-startTime="1824">And if you assume it's easy, </span><span class="line" data-startTime="1824">you might look for an easy </span><span class="line" data-startTime="1825">solution and overlook all </span><span class="line" data-startTime="1825">the complexities. </span></p>

<p><span class="line" data-startTime="1828">Don't just copy the first answer </span><span class="line" data-startTime="1828">off Stack Overflow, </span><span class="line" data-startTime="1830">which is something I do a lot. </span> <span class="line" data-startTime="1832">But I'm trying to </span><span class="line" data-startTime="1832">cut back on it. </span> <span class="line" data-startTime="1836">Do use the tried and </span><span class="line" data-startTime="1836">true techniques. </span> <span class="line" data-startTime="1839">So use popular and well-tested </span><span class="line" data-startTime="1839">libraries. </span> <span class="line" data-startTime="1841">Look at the number of forks, </span><span class="line" data-startTime="1841">the number of issues, the </span><span class="line" data-startTime="1843">number of contributors. </span> <span class="line" data-startTime="1844">Look at how recently </span><span class="line" data-startTime="1844">the change was. </span> <span class="line" data-startTime="1846">Browse through the issue tracker </span><span class="line" data-startTime="1846">and see what people </span><span class="line" data-startTime="1848">say about it. </span> <span class="line" data-startTime="1850">And if you're not </span><span class="line" data-startTime="1850">sure, just ask. </span> <span class="line" data-startTime="1851">When I was trying to figure </span><span class="line" data-startTime="1851">out the Signature Track </span><span class="line" data-startTime="1853">process, I just emailed my </span><span class="line" data-startTime="1853">buddies on the Chrome </span><span class="line" data-startTime="1856">team and said, hey. </span> <span class="line" data-startTime="1857">Is there anything I'm not </span><span class="line" data-startTime="1857">thinking of here? </span><span class="line" data-startTime="1860">And we don't all of have buddies </span><span class="line" data-startTime="1860">on the Chrome team, </span><span class="line" data-startTime="1862">but we do all have Paul Irish's </span><span class="line" data-startTime="1862">Twitter account. </span></p>

<p><span class="line" data-startTime="1865">So I recommend just tweeting </span><span class="line" data-startTime="1865">at him, because he really </span><span class="line" data-startTime="1868">likes to answer these things. </span> <span class="line" data-startTime="1869">And he's got the lowdown. </span> <span class="line" data-startTime="1871">So don't be afraid to ask. </span> <span class="line" data-startTime="1872">There's a lot of people out </span><span class="line" data-startTime="1872">there that'll answer. </span> <span class="line" data-startTime="1875">And do try feature </span><span class="line" data-startTime="1875">detection first. </span> <span class="line" data-startTime="1877">So use Modernizr. </span> <span class="line" data-startTime="1878">And you can see all the </span><span class="line" data-startTime="1878">different ways of using it. </span> <span class="line" data-startTime="1881">Also, if you do need to do user </span><span class="line" data-startTime="1881">agent detection, use this </span><span class="line" data-startTime="1883">library called ua-parser. </span> <span class="line" data-startTime="1886">It's maintained by BrowserStack </span><span class="line" data-startTime="1886">and contributed </span><span class="line" data-startTime="1888">to by Google and Facebook. </span> <span class="line" data-startTime="1890">So it's got a lot of great, </span><span class="line" data-startTime="1890">well-tested regex's in it. </span> <span class="line" data-startTime="1894">And it's supported in lots </span><span class="line" data-startTime="1894">of different languages. </span> <span class="line" data-startTime="1896">And you can also </span><span class="line" data-startTime="1896">mix and match. </span></p>

<p><span class="line" data-startTime="1898">You can see if something works </span><span class="line" data-startTime="1898">and then maybe blacklist it </span><span class="line" data-startTime="1900">for certain browsers that </span><span class="line" data-startTime="1900">you know have problems. </span> <span class="line" data-startTime="1902">Certain browsers and versions, </span><span class="line" data-startTime="1902">that's the </span><span class="line" data-startTime="1904">best kind of blacklist. </span> <span class="line" data-startTime="1907">Basically, the conclusion here </span><span class="line" data-startTime="1907">is that we don't have that. </span> <span class="line" data-startTime="1910">Do you guys know what </span><span class="line" data-startTime="1910">that is up there? </span><span class="line" data-startTime="1913">Yeah. </span> <span class="line" data-startTime="1913">So that's a sonic screwdriver </span><span class="line" data-startTime="1913">from Doctor Who. </span> <span class="line" data-startTime="1916">And basically, it can </span><span class="line" data-startTime="1916">do everything. </span> <span class="line" data-startTime="1918">We don't have something that </span><span class="line" data-startTime="1918">can do everything. </span> <span class="line" data-startTime="1921">We don't have the perfect </span><span class="line" data-startTime="1921">solution in web development. </span> <span class="line" data-startTime="1924">That's just how it is. </span> <span class="line" data-startTime="1926">But we do have a lot of </span><span class="line" data-startTime="1926">tools in our tool box. </span></p>

<p><span class="line" data-startTime="1929">And we can learn how </span><span class="line" data-startTime="1929">to use those tools. </span> <span class="line" data-startTime="1931">And we can combine </span><span class="line" data-startTime="1931">them together. </span> <span class="line" data-startTime="1932">And we can try and use the more </span><span class="line" data-startTime="1932">sophisticated ones first. </span> <span class="line" data-startTime="1935">And we also have each other, so </span><span class="line" data-startTime="1935">that we can learn from each </span><span class="line" data-startTime="1938">other about how to learn </span><span class="line" data-startTime="1938">these tools, so we're </span><span class="line" data-startTime="1940">not alone in it. </span> <span class="line" data-startTime="1941">So when you're figuring this </span><span class="line" data-startTime="1941">out, look to each other for </span><span class="line" data-startTime="1944">the solutions, document what </span><span class="line" data-startTime="1944">you find out, write it up, </span><span class="line" data-startTime="1947">open source your code, and then </span><span class="line" data-startTime="1947">we'll all learn how to do </span><span class="line" data-startTime="1950">all this detection together, </span><span class="line" data-startTime="1950">so that we can fully take </span><span class="line" data-startTime="1953">advantage of everything the </span><span class="line" data-startTime="1953">web has for us today. </span> <span class="line" data-startTime="1956">Got it? </span><span class="line" data-startTime="1958">Done. </span> <span class="line" data-startTime="1959">[APPLAUSE] </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1969"><span class="speakerName">Pamela Fox</span>: So, questions, </span><span class="line" data-startTime="1969">yeah? </span><span class="line" data-startTime="1973">Anyone have questions? </span><span class="line" data-startTime="1975">Speechless. </span><span class="line" data-startTime="1977">Doctor Who episodes, perhaps? </span><span class="line" data-startTime="1984">There's a little microphone-y </span><span class="line" data-startTime="1984">thing there. </span></p>

<p class="speaker"><span class="line" data-starttime="1990"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="1991">So there seems to be kind </span><span class="line" data-startTime="1991">of an underlying </span><span class="line" data-startTime="1994">theme to all of this. </span><span class="line" data-startTime="1995">And that is, you're doing </span><span class="line" data-startTime="1995">all this checking. </span><span class="line" data-startTime="1998">It almost feels like you're </span><span class="line" data-startTime="1998">trying to implement what you </span><span class="line" data-startTime="2000">can when you can, rather than </span><span class="line" data-startTime="2000">trying to develop to implement </span><span class="line" data-startTime="2006">to cover as many browsers as </span><span class="line" data-startTime="2006">possible and then dealing with </span><span class="line" data-startTime="2009">exceptions. </span><span class="line" data-startTime="2010">Am I just kind of reading into </span><span class="line" data-startTime="2010">that the wrong way or &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2015"><span class="speakerName">Pamela Fox</span>: So you're wondering, </span><span class="line" data-startTime="2015">am I trying to use </span><span class="line" data-startTime="2017">new things &mdash; </span><span class="line" data-startTime="2018">am I trying like overly hard </span><span class="line" data-startTime="2018">to use new things, versus </span><span class="line" data-startTime="2021">using the older things? </span></p>

<p class="speaker"><span class="line" data-starttime="2023"><span class="speakerName">Audience</span>: I wouldn't </span><span class="line" data-startTime="2023">say overly hard. </span><span class="line" data-startTime="2024">But it seems like not just </span><span class="line" data-startTime="2024">you, I see a lot of </span><span class="line" data-startTime="2027">developers out there. </span><span class="line" data-startTime="2028">I feel like there's this push, </span><span class="line" data-startTime="2028">this emphasis to use </span><span class="line" data-startTime="2031">everything possibly available, </span><span class="line" data-startTime="2031">even if it causes </span><span class="line" data-startTime="2034">10 times the work. </span></p>

<p class="speaker"><span class="line" data-starttime="2035"><span class="speakerName">Pamela Fox</span>: Right. </span> <span class="line" data-startTime="2038">Yeah. </span> <span class="line" data-startTime="2038">I think that's a good point. </span> <span class="line" data-startTime="2040">I think that we see the new </span><span class="line" data-startTime="2040">stuff and we get really </span><span class="line" data-startTime="2042">excited about it. </span> <span class="line" data-startTime="2043">And it makes us feel good to try </span><span class="line" data-startTime="2043">out the new stuff, because </span><span class="line" data-startTime="2046">we feel like we're on </span><span class="line" data-startTime="2046">the cutting edge. </span> <span class="line" data-startTime="2050">It's kind of like Not Invented </span><span class="line" data-startTime="2050">Here syndrome. </span> <span class="line" data-startTime="2052">It helps us kind of feel like </span><span class="line" data-startTime="2052">inventors if we're using the </span><span class="line" data-startTime="2054">new stuff too. </span> <span class="line" data-startTime="2055">And we're going on this alone. </span> <span class="line" data-startTime="2057">But it's true. </span> <span class="line" data-startTime="2058">Nowadays, like at Coursera, most </span><span class="line" data-startTime="2058">of time I will just try </span><span class="line" data-startTime="2062">and go with the tried and true </span><span class="line" data-startTime="2062">techniques now, because now </span><span class="line" data-startTime="2066">that I've had this much </span><span class="line" data-startTime="2066">experience with trying the new </span><span class="line" data-startTime="2069">stuff, I like knowing </span><span class="line" data-startTime="2069">that it's there. </span></p>

<p><span class="line" data-startTime="2072">But I also know that if I'm </span><span class="line" data-startTime="2072">going to try it out, I'm </span><span class="line" data-startTime="2074">probably going to be one of the </span><span class="line" data-startTime="2074">first people to really try </span><span class="line" data-startTime="2076">it out in a big app. </span> <span class="line" data-startTime="2077">And I'm going to have </span><span class="line" data-startTime="2077">to struggle with </span><span class="line" data-startTime="2079">figuring that out. </span> <span class="line" data-startTime="2080">And sometimes I'm up for that </span><span class="line" data-startTime="2080">challenge, because it can be </span><span class="line" data-startTime="2082">quite interesting. </span> <span class="line" data-startTime="2083">But sometimes I just </span><span class="line" data-startTime="2083">want it to work. </span></p>

<p class="speaker"><span class="line" data-starttime="2085"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="2085">So I hadn't quite formed </span><span class="line" data-startTime="2085">the question until now </span><span class="line" data-startTime="2088">that you've said that. </span><span class="line" data-startTime="2089">In your experience, these things </span><span class="line" data-startTime="2089">that are out there, are </span><span class="line" data-startTime="2092">they generally stable enough </span><span class="line" data-startTime="2092">that it's OK for the better </span><span class="line" data-startTime="2096">part of the user base </span><span class="line" data-startTime="2096">to try to use them </span><span class="line" data-startTime="2099">and deal with them? </span><span class="line" data-startTime="2100">Or if you've got to really deal </span><span class="line" data-startTime="2100">with the general public, </span><span class="line" data-startTime="2104">should you just stick with those </span><span class="line" data-startTime="2104">tried and true methods? </span></p>

<p class="speaker"><span class="line" data-starttime="2107"><span class="speakerName">Pamela Fox</span>: It really depends </span><span class="line" data-startTime="2107">on what they are. </span><span class="line" data-startTime="2109">Some of them have been out there </span><span class="line" data-startTime="2109">for longer than others. </span><span class="line" data-startTime="2113">I guess I've experienced even </span><span class="line" data-startTime="2113">with LocalStorage that </span><span class="line" data-startTime="2117">browsers introduce new bugs. </span><span class="line" data-startTime="2119">And it's even been around </span><span class="line" data-startTime="2119">for a couple of years. </span><span class="line" data-startTime="2121">We use HTML5 video </span><span class="line" data-startTime="2121">at Coursera. </span><span class="line" data-startTime="2123">And we still have a lot </span><span class="line" data-startTime="2123">of problems with it. </span><span class="line" data-startTime="2126">And it's been out for </span><span class="line" data-startTime="2126">a year or so. </span><span class="line" data-startTime="2127">So we've started defaulting </span><span class="line" data-startTime="2127">users to Flash instead. </span></p>

<p class="speaker"><span class="line" data-starttime="2130"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="2131">That right there says a lot. </span></p>

<p class="speaker"><span class="line" data-starttime="2132"><span class="speakerName">Pamela Fox</span>: So sometimes there </span><span class="line" data-startTime="2132">are advantages to stuff. </span><span class="line" data-startTime="2134">We're using HTML5 video at </span><span class="line" data-startTime="2134">Coursera because we get </span><span class="line" data-startTime="2136">playback rate, because we can </span><span class="line" data-startTime="2136">do the speed-it-up buttons. </span><span class="line" data-startTime="2139">So we're using it there because </span><span class="line" data-startTime="2139">we're getting a real </span><span class="line" data-startTime="2142">advantage to using it. </span><span class="line" data-startTime="2143">So if there is a real advantage </span><span class="line" data-startTime="2143">in terms of </span><span class="line" data-startTime="2145">performance or productivity &mdash; </span><span class="line" data-startTime="2147">like border radius, I'm going to </span><span class="line" data-startTime="2147">use that and just not care </span><span class="line" data-startTime="2150">if it doesn't work in other </span><span class="line" data-startTime="2150">browsers, because I get a big </span><span class="line" data-startTime="2152">advantage there and not </span><span class="line" data-startTime="2152">a big decrease. </span><span class="line" data-startTime="2156">So it's a balance. </span></p>

<p class="speaker"><span class="line" data-starttime="2157"><span class="speakerName">Audience</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2160"><span class="speakerName">Audience</span>: Regarding your </span><span class="line" data-startTime="2160">fancy CSS woes, did </span><span class="line" data-startTime="2163">you file any bugs? </span></p>

<p class="speaker"><span class="line" data-starttime="2166"><span class="speakerName">Pamela Fox</span>: So did I file bugs </span><span class="line" data-startTime="2166">on the Android white-out? </span></p>

<p class="speaker"><span class="line" data-starttime="2169"><span class="speakerName">Audience</span>: Was it Chrome, or was </span><span class="line" data-startTime="2169">it the Android browser? </span></p>

<p class="speaker"><span class="line" data-starttime="2172"><span class="speakerName">Pamela Fox</span>: This was </span><span class="line" data-startTime="2172">Android WebKit. </span><span class="line" data-startTime="2173">So the thing is, when you're </span><span class="line" data-startTime="2173">doing PhoneGap, you have to </span><span class="line" data-startTime="2175">use the embedded webview, which </span><span class="line" data-startTime="2175">means using the Android </span><span class="line" data-startTime="2178">WebKit, also known as like </span><span class="line" data-startTime="2178">the worst webkit ever. </span><span class="line" data-startTime="2183">So I mean, there were a lot of </span><span class="line" data-startTime="2183">issues with that webkit. </span><span class="line" data-startTime="2186">I think I filed some </span><span class="line" data-startTime="2186">issues on that. </span><span class="line" data-startTime="2190">But I don't know if I filed on </span><span class="line" data-startTime="2190">the white-out in particular, </span><span class="line" data-startTime="2192">because it's something where </span><span class="line" data-startTime="2192">you'd have to give </span><span class="line" data-startTime="2194">them the test case. </span><span class="line" data-startTime="2195">And it's kind of a &mdash; sometimes </span><span class="line" data-startTime="2195">it can be really complex to </span><span class="line" data-startTime="2198">come up with the test </span><span class="line" data-startTime="2198">cases for people. </span><span class="line" data-startTime="2200">And I feel bad reporting bugs </span><span class="line" data-startTime="2200">without a really nice test </span><span class="line" data-startTime="2202">case for it. </span><span class="line" data-startTime="2203">So I probably didn't. </span></p>

<p class="speaker"><span class="line" data-starttime="2204"><span class="speakerName">Audience</span>: I gotcha. </span><span class="line" data-startTime="2204">Cool. </span><span class="line" data-startTime="2205">We'd like to help fix those. </span></p>

<p class="speaker"><span class="line" data-starttime="2207"><span class="speakerName">Pamela Fox</span>: Nice. </span><span class="line" data-startTime="2209">OK. </span><span class="line" data-startTime="2210">Anything else? </span><span class="line" data-startTime="2213">All right. </span><span class="line" data-startTime="2214">How many of you use </span><span class="line" data-startTime="2214">Modernizr now? </span><span class="line" data-startTime="2217">Cool. </span><span class="line" data-startTime="2217">Any of you guys do ua-parser? </span><span class="line" data-startTime="2221">We got one. </span><span class="line" data-startTime="2222">Yeah. </span><span class="line" data-startTime="2222">I actually had never even </span><span class="line" data-startTime="2222">heard of it before, so &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2224"><span class="speakerName">Audience</span>: [INAUDIBLE]? </span></p>

<p class="speaker"><span class="line" data-starttime="2228"><span class="speakerName">Pamela Fox</span>: Why doesn't </span><span class="line" data-startTime="2228">Modernizr have an [INAUDIBLE] </span><span class="line" data-startTime="2229">Flash? </span><span class="line" data-startTime="2230">So there is a whole </span><span class="line" data-startTime="2230">issue on it. </span> <span class="line" data-startTime="2232">So this is what I recommend, </span><span class="line" data-startTime="2232">like when you use Modernizr, </span><span class="line" data-startTime="2235">you'll find it doesn't have </span><span class="line" data-startTime="2235">checks for &mdash; there's lots of </span><span class="line" data-startTime="2237">things it doesn't </span><span class="line" data-startTime="2237">have checks for. </span> <span class="line" data-startTime="2238">Many of the things I check for </span><span class="line" data-startTime="2238">these days, like playback rate </span><span class="line" data-startTime="2241">on the video element, Modernizr </span><span class="line" data-startTime="2241">doesn't have that. </span></p>

<p><span class="line" data-startTime="2244">But if you look in the issue </span><span class="line" data-startTime="2244">tracker, you will often find </span><span class="line" data-startTime="2247">discussions about it. </span> <span class="line" data-startTime="2248">So any time you use a library, </span><span class="line" data-startTime="2248">look in the issue tracker. </span> <span class="line" data-startTime="2252">So I always look in </span><span class="line" data-startTime="2252">the issue tracker. </span> <span class="line" data-startTime="2253">So you've got to look and see </span><span class="line" data-startTime="2253">what are the common issues </span><span class="line" data-startTime="2256">that people are having, to see, </span><span class="line" data-startTime="2256">oh, is that something </span><span class="line" data-startTime="2258">that's going to hit me too? </span><span class="line" data-startTime="2259">And also look for interesting </span><span class="line" data-startTime="2259">discussions, </span><span class="line" data-startTime="2261">especially with Modernizr. </span></p>

<p><span class="line" data-startTime="2263">And I also look to see just when </span><span class="line" data-startTime="2263">people respond to issues, </span><span class="line" data-startTime="2266">if they're nice or if they're </span><span class="line" data-startTime="2266">mean, because if I'm thinking </span><span class="line" data-startTime="2268">about using a library and all </span><span class="line" data-startTime="2268">the responses on the issue </span><span class="line" data-startTime="2271">tracker are kind of mean, </span><span class="line" data-startTime="2271">then I don't use it. </span> <span class="line" data-startTime="2275">So I definitely check out &mdash; </span><span class="line" data-startTime="2277">when I'm thinking of using a </span><span class="line" data-startTime="2277">library, I check out their </span><span class="line" data-startTime="2280">issue tracker and their code </span><span class="line" data-startTime="2280">history fairly thoroughly, </span><span class="line" data-startTime="2284">because any time you use a </span><span class="line" data-startTime="2284">library, it's an investment, </span><span class="line" data-startTime="2287">because you will encounter </span><span class="line" data-startTime="2287">issues with it. </span> <span class="line" data-startTime="2289">So they don't have </span><span class="line" data-startTime="2289">a Flash support. </span> <span class="line" data-startTime="2291">But they do have a long </span><span class="line" data-startTime="2291">thread about it. </span> <span class="line" data-startTime="2293">And I followed a few links from </span><span class="line" data-startTime="2293">there, but in the end </span><span class="line" data-startTime="2296">SWFObject was the best option. </span></p>

<p><span class="line" data-startTime="2300">It was the most accurate. </span> <span class="line" data-startTime="2304">Cool. </span> <span class="line" data-startTime="2304">All right. </span> <span class="line" data-startTime="2307">You're free to go. </span> <span class="line" data-startTime="2308">[APPLAUSE] </span></p>