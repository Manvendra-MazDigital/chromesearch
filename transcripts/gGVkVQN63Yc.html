<p><span class="line" data-startTime="0"> KAY: So, let's show you this how easy it </span><span class="line" data-startTime="0">is to write an extension. We’re going to </span><span class="line" data-startTime="4">build one live in front of you in the next </span><span class="line" data-startTime="4">couple of minutes here. And it's not just </span><span class="line" data-startTime="7">going to be a “Hello World” extension. </span> <span class="line" data-startTime="7">It's going to be something that actually does </span><span class="line" data-startTime="10">something real. In fact, it's been a pretty </span><span class="line" data-startTime="10">frequently requested feature in the browser </span><span class="line" data-startTime="14">itself. We're going to build an extension </span><span class="line" data-startTime="14">that allows you to email the page that you're </span><span class="line" data-startTime="18">on to somebody else. So, just to show that </span><span class="line" data-startTime="18">this is live and whatever, could somebody </span><span class="line" data-startTime="24">give me the name of a small mammal? Anybody? </span><span class="line" data-startTime="24"> Gopher. </span> <span class="line" data-startTime="29"> KAY: Gopher. Okay, a gopher. So, we're </span><span class="line" data-startTime="29">going to name this extension a gopher. And </span><span class="line" data-startTime="34">the way &mdash; so, what we're going to do is we're </span><span class="line" data-startTime="34">going start by creating a manifest file. </span> <span class="line" data-startTime="41"> BOODMAN: I think it’s spelled that way. </span> <span class="line" data-startTime="41"> KAY: So, when we first started creating </span><span class="line" data-startTime="48">the extension, we create a directory and we </span><span class="line" data-startTime="48">create a file on that called the manifest </span><span class="line" data-startTime="50">file. The manifest file is just a simple JSON </span><span class="line" data-startTime="50">file that has some key value pairs in it. </span> <span class="line" data-startTime="57">One of them is the name. I might have a version, </span><span class="line" data-startTime="57">a description. This is sort of the basic building </span><span class="line" data-startTime="61">blocks sort of to find what an extension is. </span></p>

<p><span class="line" data-startTime="61">For this particular extension, we're going </span><span class="line" data-startTime="66">to use a bit of functionality called the browser </span><span class="line" data-startTime="66">action. Now, a browser action is just a little </span><span class="line" data-startTime="70">button that shows up in the toolbar of the </span><span class="line" data-startTime="70">browser. And it has a whole bunch of different </span><span class="line" data-startTime="75">options, but for now, all we're going to set </span><span class="line" data-startTime="75">is the icon and the title of it. So, Aaron's </span><span class="line" data-startTime="81">got an image already made that we're going </span><span class="line" data-startTime="81">to grab for it, and the title will set something </span><span class="line" data-startTime="86">that matches our animal here, I guess. Right. </span> <span class="line" data-startTime="86">I don't know what the sound a gopher makes. </span> <span class="line" data-startTime="94">They back, could be. So, let's go get that </span><span class="line" data-startTime="94">image and copy it into the folder. </span> <span class="line" data-startTime="100"> BOODMAN: Okay. </span> <span class="line" data-startTime="100"> KAY: So, as I said, they're just collections </span><span class="line" data-startTime="103">of Web pages and their resources, so they </span><span class="line" data-startTime="103">just sort of live next to each other just </span><span class="line" data-startTime="107">like they would on a Web server, but we’re </span><span class="line" data-startTime="107">making this packet. So now, believe it or </span><span class="line" data-startTime="111">not, we’ve got actually an extension that's </span><span class="line" data-startTime="111">going to do something in the browser. So, </span><span class="line" data-startTime="115">let's load it up. So, the way to do that is </span><span class="line" data-startTime="115">we go into the browser and go to the launch </span><span class="line" data-startTime="120">menu and extensions. So, this will take you </span><span class="line" data-startTime="120">to the extensions management page. There's </span><span class="line" data-startTime="124">a developer mode that you can turn on. And </span><span class="line" data-startTime="124">from there, there's an option called load </span><span class="line" data-startTime="128">unpacked extensions. This just says, “I'm </span><span class="line" data-startTime="128">going to load a directory as if it were a </span><span class="line" data-startTime="132">fully ready to go extension.” So, we load </span><span class="line" data-startTime="132">our gopher extension and boom. Right there, </span><span class="line" data-startTime="138">you see the new icon shows up in the toolbar </span><span class="line" data-startTime="138">immediately, and has the little text that </span><span class="line" data-startTime="144">he specified there. Okay. But, if he clicks </span><span class="line" data-startTime="144">on it, it doesn't do anything. So now, it's </span><span class="line" data-startTime="150">time to actually hook it up and make it do </span><span class="line" data-startTime="150">something real, okay? So to do that, the next </span><span class="line" data-startTime="156">step is to add something called the background </span><span class="line" data-startTime="156">page. Now, background page is just an HTML </span><span class="line" data-startTime="161">page, but it's not visible to the user. It's </span><span class="line" data-startTime="161">hidden in the background but it's loaded when </span><span class="line" data-startTime="166">the browser starts up and it's always running. </span></p>

<p><span class="line" data-startTime="166">So, that's usually where people put the meat </span><span class="line" data-startTime="172">of their extension launching. So, as I said, </span><span class="line" data-startTime="172">it’s just a basic HTML page where I put </span><span class="line" data-startTime="176">some script in there. And what the script </span><span class="line" data-startTime="176">is going to do, it’s going to add an event </span><span class="line" data-startTime="180">listener to the browser action button. And </span><span class="line" data-startTime="180">that event listener is going to have a little </span><span class="line" data-startTime="185">callback in it. And when it gets called, he's </span><span class="line" data-startTime="185">going to call a window that open, bring up </span><span class="line" data-startTime="189">a pop-up, and send to a Gmail URL, we’re </span><span class="line" data-startTime="189">going to get in a minute here, and so we can </span><span class="line" data-startTime="197">send that mail. Those of you who are Web programmers </span><span class="line" data-startTime="197">in the audience now, there's a lot of options </span><span class="line" data-startTime="204">to hear. So, we'll wait for Aaron to get them </span><span class="line" data-startTime="204">all typed in? </span><span class="line" data-startTime="207"> BOODMAN: Yeah. Oh, yeah, I can't remember </span><span class="line" data-startTime="207">the URLs, so I'm going to copy it someplace </span><span class="line" data-startTime="212">else. I'm not good in remembering long random </span><span class="line" data-startTime="212">URLs. </span></p>

<p><span class="line" data-startTime="219"> KAY: But, I am. </span> <span class="line" data-startTime="219"> BOODMAN: So it’s easy to catch wherever </span><span class="line" data-startTime="224">they set Webs. </span> <span class="line" data-startTime="224"> KAY: So anyways, believe it or not, now </span><span class="line" data-startTime="228">we’ve got an extension. We're ready to go. </span> <span class="line" data-startTime="228">So, let’s see if it actually does something. </span> <span class="line" data-startTime="232">So, the way we do this is we go to the management </span><span class="line" data-startTime="232">page and we hit “reload,” just like you </span><span class="line" data-startTime="236">would on a Web page. Now, a whole extension </span><span class="line" data-startTime="236">reloads and the functionality is ready to </span><span class="line" data-startTime="240">go. So, if you go to the Google page, we're </span><span class="line" data-startTime="240">going to share that with somebody, click on </span><span class="line" data-startTime="245">it. Nothing happened. Okay, live demo. So, </span><span class="line" data-startTime="245">it's probably a bug. Let's find out, the good </span><span class="line" data-startTime="253">thing another one... </span> <span class="line" data-startTime="253"> BOODMAN: So unconvincing. </span> <span class="line" data-startTime="254"> KAY: Yeah, so unconvincing. No one believes </span><span class="line" data-startTime="254">that that was actually an accidental bug. </span> <span class="line" data-startTime="258">Okay. Well, okay. So, let's find the bug anyway. </span></p>

<p><span class="line" data-startTime="258">Just play along with us here. So, when you're </span><span class="line" data-startTime="265">doing &mdash; as I said before, you get to use all </span><span class="line" data-startTime="265">same developer tools that you would use for </span><span class="line" data-startTime="270">normal Web pages. And we got really powerful </span><span class="line" data-startTime="270">once with the WebKit’s Web Inspector. You </span><span class="line" data-startTime="275">can see the “inspect back active views” </span><span class="line" data-startTime="275">on that page. Just click on it and brought </span><span class="line" data-startTime="278">up the Web Inspector. The Web inspector has </span><span class="line" data-startTime="278">a ton of powerful features. You can inspect </span><span class="line" data-startTime="282">the DOM, manage CSS. You can look at all the </span><span class="line" data-startTime="282">resources that this loaded. You can use the </span><span class="line" data-startTime="288">active script debugger and set breakpoints. </span></p>

<p><span class="line" data-startTime="288">You can look at the timeline if you want some </span><span class="line" data-startTime="291">to measure performance and see what's going </span><span class="line" data-startTime="291">where, or go to the CPU Profilers and Heap </span><span class="line" data-startTime="296">Profilers. This is a really simple extension, </span><span class="line" data-startTime="296">though. So, all we're going to do is notice </span><span class="line" data-startTime="300">that there's a little red error indicator </span><span class="line" data-startTime="300">in the corner. He is going to click on that. </span> <span class="line" data-startTime="305">And it's going to tell us what our error was. </span> <span class="line" data-startTime="305">It says that this object has no method name </span><span class="line" data-startTime="310">to add. So, apparently we got the method name </span><span class="line" data-startTime="310">wrong. So, let's find out what the method </span><span class="line" data-startTime="315">name really should have been. What Aaron is </span><span class="line" data-startTime="315">showing you here is auto-complete in a console. </span></p>

<p><span class="line" data-startTime="320">The console has access to all of the objects </span><span class="line" data-startTime="320">that are there and can show you what's there. </span> <span class="line" data-startTime="324">So, Chrome.browserx on click and it’s “add </span><span class="line" data-startTime="324">a listener” not “add,” yeah, exactly. </span> <span class="line" data-startTime="329">So, good catch up. So for the person who caught </span><span class="line" data-startTime="329">that in the audience and knew that we were </span><span class="line" data-startTime="333">faking here, so, good job. So, we'll change </span><span class="line" data-startTime="333">that to “add listener.” And now, we reload </span><span class="line" data-startTime="343">the extension. And let's try out on that page. </span> <span class="line" data-startTime="343">There is the window. Oh... </span> <span class="line" data-startTime="353"> BOODMAN: I forgot to... </span> <span class="line" data-startTime="353"> KAY: Yeah, yeah. I think we forgot the </span><span class="line" data-startTime="356">feature there, but let's add that URL back </span><span class="line" data-startTime="356">in. Can we do that? </span><span class="line" data-startTime="360"> BOODMAN: Okay. </span> <span class="line" data-startTime="360"> KAY: So, we can actually get this listener </span><span class="line" data-startTime="364">that gets the &mdash; gets the Tab passed into it. </span> <span class="line" data-startTime="364">So, you forgot a plus there, I think. </span> <span class="line" data-startTime="370"> BOODMAN: Oh, yeah. </span> <span class="line" data-startTime="370"> KAY: And so, we can attach that into the </span><span class="line" data-startTime="373">body. So it's actually going to mail the URL </span><span class="line" data-startTime="373">to the page that we’re on. So, quick fix </span><span class="line" data-startTime="376">that. </span> <span class="line" data-startTime="376"> BOODMAN: Oh, I nailed it. This demo is </span><span class="line" data-startTime="383">going awesomely. </span></p>

<p><span class="line" data-startTime="383"> KAY: Yes. Here we go. Here we go. So now </span><span class="line" data-startTime="387">we have the working mail of this page extension. </span> <span class="line" data-startTime="387">So, we'll send it to ourselves, and then we're </span><span class="line" data-startTime="393">done. But actually even though we got a functioning </span><span class="line" data-startTime="393">extension, we’re not quite done yet. The </span><span class="line" data-startTime="398">next step is we'd like to share with our friends. </span> <span class="line" data-startTime="398">So, the best way to do that is on the Chrome </span><span class="line" data-startTime="402">Extensions gallery. So, let's go and see if </span><span class="line" data-startTime="402">we can upload that to the gallery. So, you </span><span class="line" data-startTime="408">hit to the developer section of the Chrome </span><span class="line" data-startTime="408">Extensions gallery, and you say, “Add new </span><span class="line" data-startTime="413">item.” And this guy will tell you, he wants </span><span class="line" data-startTime="413">a Zip file. A zip, you know, just package </span><span class="line" data-startTime="417">up the directory as a single Zip file. So, </span><span class="line" data-startTime="417">let's just do that quickly here. And then, </span><span class="line" data-startTime="422">upload it directly. And when that's all done, </span><span class="line" data-startTime="422">we're going to get to set some properties </span><span class="line" data-startTime="430">that are going &mdash; about how it's going to appear </span><span class="line" data-startTime="430">in the gallery. But I bet a bunch of you have </span><span class="line" data-startTime="434">already done this, so not too big of a surprise </span><span class="line" data-startTime="434">but a short little upload. And right now, </span><span class="line" data-startTime="440">while it’s waiting here, so it may seem </span><span class="line" data-startTime="440">like it's taking a little bit longer than </span><span class="line" data-startTime="443">you'd think for a small file. But it's actually </span><span class="line" data-startTime="443">doing a little bit of work on the backend, </span><span class="line" data-startTime="448">verifying there are no errors and checking </span><span class="line" data-startTime="448">to make sure that things are going. So, hello, </span><span class="line" data-startTime="455">excellent, perfect there. So now, we get to </span><span class="line" data-startTime="455">the landing page and here is where you can </span><span class="line" data-startTime="460">add a little more detail about what's going </span><span class="line" data-startTime="460">to show up in the landing page when people </span><span class="line" data-startTime="464">find your extension in the gallery. So, a </span><span class="line" data-startTime="464">detailed description links to your Website. </span></p>

<p><span class="line" data-startTime="469">You can upload screenshots linked to YouTube </span><span class="line" data-startTime="469">videos, so that people can see screen casts </span><span class="line" data-startTime="474">of your extension in action. We think this </span><span class="line" data-startTime="474">is going to be a really compelling feature </span><span class="line" data-startTime="478">and we'll show you a little bit more of that </span><span class="line" data-startTime="478">in action later. So then when we're done, </span><span class="line" data-startTime="483">we publish the extension and it will take </span><span class="line" data-startTime="483">a second as it's going through. And there </span><span class="line" data-startTime="488">you go, the extension is now live in the gallery, </span><span class="line" data-startTime="488">and we're done. So, live extension, less than </span><span class="line" data-startTime="493">five minutes, I think. And, well, all in all </span><span class="line" data-startTime="493">pretty easy and pretty fast. </span></p>