<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>Monte Carlo Simulations with App Script and Compute Engine (GDL-IL)</h1>

<h2>Ido Green</h2>

<a class="video" href="http://youtu.be/Lj4FYWvZrow">youtu.be/Lj4FYWvZrow</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="7"><span class="speakerName">Ido Green</span>: Hello, and welcome to </span><span class="line" data-startTime="7">another episode of GDL-IL, </span><span class="line" data-startTime="11">GDL Israel. </span> <span class="line" data-startTime="12">Today we're going to have quite </span><span class="line" data-startTime="12">a fun time with showing </span><span class="line" data-startTime="17">the power of both App Script </span><span class="line" data-startTime="17">and Compute Engine. </span> <span class="line" data-startTime="21">And in order to show the </span><span class="line" data-startTime="21">flexibility and ability to run </span><span class="line" data-startTime="26">interesting test cases on both </span><span class="line" data-startTime="26">platforms, I decided just to </span><span class="line" data-startTime="30">take this fun subject of Monte </span><span class="line" data-startTime="30">Carlo simulation and see how </span><span class="line" data-startTime="34">we could utilize those two </span><span class="line" data-startTime="34">different products in order to </span><span class="line" data-startTime="39">test it and see if we could get </span><span class="line" data-startTime="39">some interesting results </span><span class="line" data-startTime="43">to real programs that we </span><span class="line" data-startTime="43">have under our hands. </span> <span class="line" data-startTime="47">So without further ado, let me </span><span class="line" data-startTime="47">just share my screen, and </span><span class="line" data-startTime="52">we'll jump together </span><span class="line" data-startTime="52">into the code. </span> <span class="line" data-startTime="54">I find it very useful in most of </span><span class="line" data-startTime="54">the cases just to talk less </span><span class="line" data-startTime="59">and see code. </span> <span class="line" data-startTime="60">So let's move this one so we </span><span class="line" data-startTime="60">won't have any problems, and </span><span class="line" data-startTime="66">we'll open this little doc. </span></p>

<p><span class="line" data-startTime="72">I guess the fonts are quite </span><span class="line" data-startTime="72">large, but if we have a </span><span class="line" data-startTime="77">problem, just feel free to ping </span><span class="line" data-startTime="77">me on the Hangout, and </span><span class="line" data-startTime="79">we'll be able to increase </span><span class="line" data-startTime="79">the font size. </span> <span class="line" data-startTime="84">Actually, I could </span><span class="line" data-startTime="84">do it right now. </span> <span class="line" data-startTime="86">So what are we having here? </span><span class="line" data-startTime="88">Basically, what we want to test </span><span class="line" data-startTime="88">is to show the power of </span><span class="line" data-startTime="90">App Script, and we took the </span><span class="line" data-startTime="90">fun world of Monte Carlo </span><span class="line" data-startTime="95">simulations. </span> <span class="line" data-startTime="95">Because when we have problems </span><span class="line" data-startTime="95">that are happening in the real </span><span class="line" data-startTime="100">world, usually there are quite </span><span class="line" data-startTime="100">a lot of outcomes that could </span><span class="line" data-startTime="105">come for each and </span><span class="line" data-startTime="105">every scenario. </span> <span class="line" data-startTime="108">And what we're doing in those </span><span class="line" data-startTime="108">simulations, basically we're </span><span class="line" data-startTime="110">trying to identify the different </span><span class="line" data-startTime="110">variables that we </span><span class="line" data-startTime="114">have under our hands, and then </span><span class="line" data-startTime="114">run it many times with some </span><span class="line" data-startTime="117">kind of random distribution that </span><span class="line" data-startTime="117">allow us in end of the </span><span class="line" data-startTime="122">tests to come up with numbers </span><span class="line" data-startTime="122">that harness us with the </span><span class="line" data-startTime="126">ability to fine tune and </span><span class="line" data-startTime="126">to get an answer. </span></p>

<p><span class="line" data-startTime="130">And in our little case, we just </span><span class="line" data-startTime="130">choose the option to help </span><span class="line" data-startTime="135">a good friend of mine who is a </span><span class="line" data-startTime="135">real a rock star salesperson, </span><span class="line" data-startTime="140">and we'll try to find what </span><span class="line" data-startTime="140">are the things that are </span><span class="line" data-startTime="143">constraining him and how </span><span class="line" data-startTime="143">we could have been. </span> <span class="line" data-startTime="147">How we'll do it? </span><span class="line" data-startTime="148">Well, we'll use first App Script </span><span class="line" data-startTime="148">just to show the power </span><span class="line" data-startTime="151">of Google Sheets and App Script, </span><span class="line" data-startTime="151">and how you could do </span><span class="line" data-startTime="153">things quickly and share </span><span class="line" data-startTime="153">them with others. </span> <span class="line" data-startTime="156">And then we'll take it for the </span><span class="line" data-startTime="156">real world, and we'll show </span><span class="line" data-startTime="160">together how we could run it &mdash; </span><span class="line" data-startTime="160">the same code, basically, the </span><span class="line" data-startTime="164">same JavaScript code &mdash; </span><span class="line" data-startTime="165">on Node.js, inside Compute </span><span class="line" data-startTime="165">Engine, which is a very </span><span class="line" data-startTime="169">efficient way to do it. </span></p>

<p><span class="line" data-startTime="172">What is our problem? </span><span class="line" data-startTime="173">Well, basically we have this </span><span class="line" data-startTime="173">brilliant salesperson, and </span><span class="line" data-startTime="176">they could get big deals that </span><span class="line" data-startTime="176">pay, let's say, x amount of </span><span class="line" data-startTime="180">dollars or smaller deals that </span><span class="line" data-startTime="180">pay y amount of dollars. </span> <span class="line" data-startTime="183">And of course, the level of </span><span class="line" data-startTime="183">effort for a bigger deal is </span><span class="line" data-startTime="186">much higher than </span><span class="line" data-startTime="186">a smaller deal. </span> <span class="line" data-startTime="187">So let's take the scenario of </span><span class="line" data-startTime="187">the end of the quarter, and </span><span class="line" data-startTime="191">our salesperson got 30 days to </span><span class="line" data-startTime="191">make the most out of her time. </span> <span class="line" data-startTime="197">What she could do? </span><span class="line" data-startTime="199">She should choose just to </span><span class="line" data-startTime="199">close big deals, or just </span><span class="line" data-startTime="202">smaller deals, or what </span><span class="line" data-startTime="202">is the perfect plan? </span><span class="line" data-startTime="205">And this is basically what </span><span class="line" data-startTime="205">we'll try to do here. </span> <span class="line" data-startTime="208">I'll share all those links </span><span class="line" data-startTime="208">at the end of the </span><span class="line" data-startTime="211">show, so feel free. </span> <span class="line" data-startTime="213">A much better explanation than </span><span class="line" data-startTime="213">the one that I gave you can </span><span class="line" data-startTime="217">find on Wikipedia, then if you </span><span class="line" data-startTime="217">want to check out what it's </span><span class="line" data-startTime="221">all about with Node.js and how </span><span class="line" data-startTime="221">cool it is to run your </span><span class="line" data-startTime="224">JavaScript code inside it very </span><span class="line" data-startTime="224">efficiently, of course. </span></p>

<p><span class="line" data-startTime="228">Node.js, but you need some </span><span class="line" data-startTime="228">machine to do it, so Compute </span><span class="line" data-startTime="232">Engine is here to help, and </span><span class="line" data-startTime="232">we'll touch quickly on how you </span><span class="line" data-startTime="236">could set your own </span><span class="line" data-startTime="236">Compute Engine. </span> <span class="line" data-startTime="238">Since we did it last episode </span><span class="line" data-startTime="238">of GDL-IL, I won't touch on </span><span class="line" data-startTime="242">all the basic boilerplate steps </span><span class="line" data-startTime="242">that you need to do in </span><span class="line" data-startTime="245">order to have your own virtual </span><span class="line" data-startTime="245">machines, but I'll just take </span><span class="line" data-startTime="247">it a step further. </span> <span class="line" data-startTime="248">After you have the machine, you </span><span class="line" data-startTime="248">installed the Node.js, now </span><span class="line" data-startTime="251">what you could do with it. </span> <span class="line" data-startTime="253">And of course, App Script, </span><span class="line" data-startTime="253">there's just a link to all the </span><span class="line" data-startTime="256">details and documentation that </span><span class="line" data-startTime="256">you could enjoy there. </span> <span class="line" data-startTime="261">Let's go to our case, and first </span><span class="line" data-startTime="264">let's define the problem. </span> <span class="line" data-startTime="265">So in our world &mdash; let me just </span><span class="line" data-startTime="265">open it so it will be a bit </span><span class="line" data-startTime="269">wider, and we'll try to squeeze </span><span class="line" data-startTime="269">everything to the page </span><span class="line" data-startTime="274">so you'll be able to </span><span class="line" data-startTime="274">see it nicely. </span> <span class="line" data-startTime="278">Let's take it like this. </span> <span class="line" data-startTime="279">That's much better. </span></p>

<p><span class="line" data-startTime="280">The chart here is just to give </span><span class="line" data-startTime="280">us a sense of how the data </span><span class="line" data-startTime="283">look like, so don't focus </span><span class="line" data-startTime="283">too much on it. </span> <span class="line" data-startTime="285">Basically, what we have </span><span class="line" data-startTime="285">here is a test case. </span> <span class="line" data-startTime="290">Let's remove all the data that </span><span class="line" data-startTime="290">we have right now and look at </span><span class="line" data-startTime="293">it together. </span> <span class="line" data-startTime="295">If you noticed, I have this new </span><span class="line" data-startTime="295">sheet that I created, and </span><span class="line" data-startTime="300">for this GDL show, I just </span><span class="line" data-startTime="300">created a new menu that would </span><span class="line" data-startTime="303">allow us to choose </span><span class="line" data-startTime="303">several things. </span> <span class="line" data-startTime="305">Let's try with the most basic </span><span class="line" data-startTime="305">way to just run simulations </span><span class="line" data-startTime="310">that basically you could see </span><span class="line" data-startTime="310">are just filling now the </span><span class="line" data-startTime="312">details, and the chart is </span><span class="line" data-startTime="312">updating in real time. </span> <span class="line" data-startTime="316">And what we have here is </span><span class="line" data-startTime="316">a very naive approach. </span> <span class="line" data-startTime="319">We're just coming with x amount </span><span class="line" data-startTime="319">of big deals and y </span><span class="line" data-startTime="323">amount of small deals. </span> <span class="line" data-startTime="324">In our case, it's the </span><span class="line" data-startTime="324">same amount &mdash; </span><span class="line" data-startTime="325">25. </span></p>

<p><span class="line" data-startTime="326">And we have a number of </span><span class="line" data-startTime="326">percentage that we set in </span><span class="line" data-startTime="332">advance that says something like </span><span class="line" data-startTime="332">in 30% of the deals that </span><span class="line" data-startTime="337">she will approach that are big </span><span class="line" data-startTime="337">deals, she will be able to </span><span class="line" data-startTime="339">close them successfully. </span> <span class="line" data-startTime="341">And let's say on smaller </span><span class="line" data-startTime="341">deals, it's much easier </span><span class="line" data-startTime="344">because of lots of different </span><span class="line" data-startTime="344">reasons, and their percentage </span><span class="line" data-startTime="347">there is 50%. </span> <span class="line" data-startTime="349">You could see here on 10 cases, </span><span class="line" data-startTime="349">more or less, those are </span><span class="line" data-startTime="354">the numbers. </span> <span class="line" data-startTime="355">And we could have a slight feel </span><span class="line" data-startTime="355">for the numbers here, </span><span class="line" data-startTime="358">what is the max, min, standard </span><span class="line" data-startTime="358">deviation, and the median. </span> <span class="line" data-startTime="361">And a nice aspect here will </span><span class="line" data-startTime="361">be probably to take the </span><span class="line" data-startTime="365">conditional formatting. </span></p>

<p><span class="line" data-startTime="367">I'm going to the cells that I </span><span class="line" data-startTime="367">want to apply this conditional </span><span class="line" data-startTime="372">formatting. </span> <span class="line" data-startTime="373">In the conditional formatting, </span><span class="line" data-startTime="373">we say something like, OK, </span><span class="line" data-startTime="376">everything that is above </span><span class="line" data-startTime="376">$250,000, I just </span><span class="line" data-startTime="382">want to make bold. </span> <span class="line" data-startTime="383">And in our case, the median is </span><span class="line" data-startTime="383">265, so let's correct it. </span> <span class="line" data-startTime="390">We go here conditional </span><span class="line" data-startTime="390">formatting. </span> <span class="line" data-startTime="396">And I could see now quite </span><span class="line" data-startTime="396">quickly where more or less I'm </span><span class="line" data-startTime="399">getting the best results. </span> <span class="line" data-startTime="401">But this is, of course, not </span><span class="line" data-startTime="401">mimicking reality, because we </span><span class="line" data-startTime="404">won't be able to do the same </span><span class="line" data-startTime="404">things, because probably a </span><span class="line" data-startTime="408">bigger deal is taking </span><span class="line" data-startTime="408">more effort from us. </span> <span class="line" data-startTime="411">So we'll got the next phase of </span><span class="line" data-startTime="411">running more control deals. </span></p>

<p><span class="line" data-startTime="416">And what will happen here, </span><span class="line" data-startTime="416">you'll see, is we enforce the </span><span class="line" data-startTime="419">assumption that a bigger deal </span><span class="line" data-startTime="419">is taking actually twice the </span><span class="line" data-startTime="424">time of the smaller deal. </span> <span class="line" data-startTime="425">So now the script is done. </span> <span class="line" data-startTime="426">You could see that I got this </span><span class="line" data-startTime="426">nice dialog box, telling me </span><span class="line" data-startTime="429">what was the max amount that </span><span class="line" data-startTime="429">we are able to achieve. </span> <span class="line" data-startTime="431">And I just confirm it. </span> <span class="line" data-startTime="434">And here you could see quite </span><span class="line" data-startTime="434">clearly that if we were able </span><span class="line" data-startTime="437">to do one big deal, then from </span><span class="line" data-startTime="437">the 50 deals that we could </span><span class="line" data-startTime="440">achieve if we would focus just </span><span class="line" data-startTime="440">on a smaller deal, now we </span><span class="line" data-startTime="444">could have only 48, and </span><span class="line" data-startTime="444">then it's going down. </span> <span class="line" data-startTime="447">And here it's much interesting </span><span class="line" data-startTime="447">aspect because we know that in </span><span class="line" data-startTime="451">the real world, it will be </span><span class="line" data-startTime="451">much closer to this. </span> <span class="line" data-startTime="454">We'll spend more time </span><span class="line" data-startTime="454">on the bigger deals. </span></p>

<p><span class="line" data-startTime="456">And here the case when the </span><span class="line" data-startTime="456">median is around 180,000, and </span><span class="line" data-startTime="463">the average is 200. </span> <span class="line" data-startTime="465">Let's see all the cells </span><span class="line" data-startTime="465">that are above that </span><span class="line" data-startTime="467">average quite quickly. </span> <span class="line" data-startTime="469">Conditional formatting, </span><span class="line" data-startTime="469">and above, </span><span class="line" data-startTime="471">let's say, just 200,000. </span> <span class="line" data-startTime="475">And you could see nicely that </span><span class="line" data-startTime="475">it's more concentrated at the </span><span class="line" data-startTime="479">beginning of everything. </span> <span class="line" data-startTime="481">Now, let's take it for the next </span><span class="line" data-startTime="481">step to show what the </span><span class="line" data-startTime="485">code is doing. </span> <span class="line" data-startTime="487">Here you could see this &mdash; </span><span class="line" data-startTime="488">let me make [AUDIO LOST] </span><span class="line" data-startTime="491">that actually running </span><span class="line" data-startTime="491">everything. </span></p>

<p><span class="line" data-startTime="493">So basically, we just took the </span><span class="line" data-startTime="493">assumption of how easy or how </span><span class="line" data-startTime="496">hard it will be to </span><span class="line" data-startTime="496">close a big deal. </span> <span class="line" data-startTime="499">And in our case, it was </span><span class="line" data-startTime="499">20%, and then 50% </span><span class="line" data-startTime="502">for a smaller deal. </span> <span class="line" data-startTime="504">The amount of executions that we </span><span class="line" data-startTime="504">could allow ourselves to do </span><span class="line" data-startTime="508">on smaller deals and bigger </span><span class="line" data-startTime="508">deals, and this is the returns </span><span class="line" data-startTime="512">on each deal. </span> <span class="line" data-startTime="512">And of course, you could play </span><span class="line" data-startTime="512">with those parameters, and </span><span class="line" data-startTime="515">those are the parameters that </span><span class="line" data-startTime="515">will drive all the simulation. </span> <span class="line" data-startTime="519">Later, what we're doing is just </span><span class="line" data-startTime="519">running this scenario. </span> <span class="line" data-startTime="522">And we're running this scenario </span><span class="line" data-startTime="522">basically on all the </span><span class="line" data-startTime="526">amount of big deals because this </span><span class="line" data-startTime="526">is what's driving us or </span><span class="line" data-startTime="529">constraining us from making </span><span class="line" data-startTime="529">all the smaller ones. </span></p>

<p><span class="line" data-startTime="532">So what we will do, we'll call </span><span class="line" data-startTime="532">this function of running </span><span class="line" data-startTime="536">"blending," and this </span><span class="line" data-startTime="536">is that function. </span> <span class="line" data-startTime="539">And we're passing the right </span><span class="line" data-startTime="539">line, so we'll be able to </span><span class="line" data-startTime="541">update our sheet quite easily. </span> <span class="line" data-startTime="543">And this is just bottom line for </span><span class="line" data-startTime="543">all the parameters that we </span><span class="line" data-startTime="546">want, all the variables </span><span class="line" data-startTime="546">that we want to keep. </span> <span class="line" data-startTime="549">And now we're calling the </span><span class="line" data-startTime="549">loop of the big deals. </span> <span class="line" data-startTime="552">And we're calling this simple </span><span class="line" data-startTime="552">function that's returning the </span><span class="line" data-startTime="557">randomization, or basically </span><span class="line" data-startTime="557">the answer, if we were </span><span class="line" data-startTime="562">successful with approaching </span><span class="line" data-startTime="562">the deal and </span><span class="line" data-startTime="564">closing it or not. </span> <span class="line" data-startTime="565">And what this function does, </span><span class="line" data-startTime="565">basically, it's very simple. </span> <span class="line" data-startTime="568">We're just taking the random </span><span class="line" data-startTime="568">function &mdash; it will be a number </span><span class="line" data-startTime="572">between 0 and 1 &mdash; </span><span class="line" data-startTime="574">and we're trying to </span><span class="line" data-startTime="574">see if it was 20%. </span></p>

<p><span class="line" data-startTime="576">And if the number that we </span><span class="line" data-startTime="576">got is lower, we were </span><span class="line" data-startTime="579">able to win the deal. </span> <span class="line" data-startTime="580">And if not, it's just false. </span> <span class="line" data-startTime="582">And of course, the same with </span><span class="line" data-startTime="582">the smaller deal, so it's </span><span class="line" data-startTime="585">very, very simple. </span> <span class="line" data-startTime="587">And when we're coming here, and </span><span class="line" data-startTime="587">we want to test if we want </span><span class="line" data-startTime="591">the deal, we're just going on </span><span class="line" data-startTime="591">the deals, and it will start </span><span class="line" data-startTime="594">with one deal, and </span><span class="line" data-startTime="594">then increase it. </span> <span class="line" data-startTime="596">And if we were successful and </span><span class="line" data-startTime="596">it's true, we're just adding </span><span class="line" data-startTime="600">one to the deals that we were </span><span class="line" data-startTime="600">able, and we're adding the </span><span class="line" data-startTime="603">money that this big deal will </span><span class="line" data-startTime="603">put into our account. </span> <span class="line" data-startTime="608">And of course, the same will be </span><span class="line" data-startTime="608">done with the smaller deal, </span><span class="line" data-startTime="610">so the same simple code. </span></p>

<p><span class="line" data-startTime="612">The smaller deal, however, </span><span class="line" data-startTime="612">the magic is here. </span> <span class="line" data-startTime="616">We have two constraints here. </span> <span class="line" data-startTime="618">One is that simple constraint </span><span class="line" data-startTime="618">of smaller deal should be </span><span class="line" data-startTime="622">always lower than the max amount </span><span class="line" data-startTime="622">of smaller deals that </span><span class="line" data-startTime="624">we could do. </span> <span class="line" data-startTime="625">But then we want to enforce the </span><span class="line" data-startTime="625">ability of, hey, a bigger </span><span class="line" data-startTime="629">deal is twice as hard &mdash; that's </span><span class="line" data-startTime="629">why it's 2 here &mdash; than a </span><span class="line" data-startTime="632">smaller deal. </span> <span class="line" data-startTime="633">And the combination of two can't </span><span class="line" data-startTime="633">exceed the max amount of </span><span class="line" data-startTime="636">deals that we could allow </span><span class="line" data-startTime="636">ourselves to small and big. </span> <span class="line" data-startTime="640">After we do that, very easily, </span><span class="line" data-startTime="640">we're just updating the lines </span><span class="line" data-startTime="644">with all these different data. </span></p>

<p><span class="line" data-startTime="647">And those are these lines, </span><span class="line" data-startTime="647">basically here. </span> <span class="line" data-startTime="650">And very nicely, we could get </span><span class="line" data-startTime="650">some nice aspect of what's </span><span class="line" data-startTime="654">going on here. </span> <span class="line" data-startTime="655">So you saw that with the </span><span class="line" data-startTime="655">current parameters &mdash; </span><span class="line" data-startTime="657">and let's have a look </span><span class="line" data-startTime="657">at them again &mdash; </span><span class="line" data-startTime="660">of 20% and 50%, and those are </span><span class="line" data-startTime="660">the returns, it might be worth </span><span class="line" data-startTime="665">to just focus maybe on this </span><span class="line" data-startTime="665">range of deals, so to focus </span><span class="line" data-startTime="670">on, let's say, something between </span><span class="line" data-startTime="670">6 to 12, more or less. </span> <span class="line" data-startTime="677">But if we're changing the odds </span><span class="line" data-startTime="677">just a little bit, let's say </span><span class="line" data-startTime="681">that we are more successful </span><span class="line" data-startTime="681">with a bigger </span><span class="line" data-startTime="683">deal, and it's 0.4. </span> <span class="line" data-startTime="686">And we're coming again here. </span> <span class="line" data-startTime="688">Let's remove all the data </span><span class="line" data-startTime="688">so we start clean. </span></p>

<p><span class="line" data-startTime="693">And we're going again here and </span><span class="line" data-startTime="693">running it, we'll get the </span><span class="line" data-startTime="697">results quite quickly. </span> <span class="line" data-startTime="699">But as you can see here, we're </span><span class="line" data-startTime="699">waiting a bit, and that's </span><span class="line" data-startTime="702">basically one of the things </span><span class="line" data-startTime="702">that I wanted to note. </span> <span class="line" data-startTime="705">If you need to run simulations, </span><span class="line" data-startTime="705">especially for </span><span class="line" data-startTime="707">the real world, App Script might </span><span class="line" data-startTime="707">not be the tool for you. </span> <span class="line" data-startTime="712">Here we're playing with it, and </span><span class="line" data-startTime="712">it's a nice way to have a </span><span class="line" data-startTime="715">feel for some aspects of the </span><span class="line" data-startTime="715">data, but wait with me. </span> <span class="line" data-startTime="719">Bear with me just two or three </span><span class="line" data-startTime="719">minutes, and you'll see how </span><span class="line" data-startTime="722">you could do it for real with </span><span class="line" data-startTime="722">utilizing Compute Engine. </span> <span class="line" data-startTime="726">So here we got some different </span><span class="line" data-startTime="726">results, and you could see </span><span class="line" data-startTime="729">here that the median </span><span class="line" data-startTime="729">is higher &mdash; </span><span class="line" data-startTime="732">270. </span></p>

<p><span class="line" data-startTime="733">And if we'll go here </span><span class="line" data-startTime="733">[AUDIO LOST] </span><span class="line" data-startTime="738">use the conditional formatting, </span><span class="line" data-startTime="740">and we'll drive here. </span> <span class="line" data-startTime="743">Basically, it should be 270. </span> <span class="line" data-startTime="746">You see that it's tending a big </span><span class="line" data-startTime="746">more to here, but it's not </span><span class="line" data-startTime="750">very clear what's going on. </span> <span class="line" data-startTime="752">And of course, if we'll play the </span><span class="line" data-startTime="752">scenario again and again </span><span class="line" data-startTime="756">multiple times, we'll be able </span><span class="line" data-startTime="756">to identify if it's driving </span><span class="line" data-startTime="759">more to this side and aspect </span><span class="line" data-startTime="759">of the data or more to the </span><span class="line" data-startTime="765">lower number of deals. </span> <span class="line" data-startTime="767">Now, of course, here you could </span><span class="line" data-startTime="767">play and run it multiple </span><span class="line" data-startTime="771">times, and we could definitely </span><span class="line" data-startTime="771">do that again if we want. </span> <span class="line" data-startTime="778">One thing to note here is that </span><span class="line" data-startTime="778">you have full ability to use, </span><span class="line" data-startTime="782">of course, the message box, but </span><span class="line" data-startTime="782">also the logger itself. </span> <span class="line" data-startTime="787">So you have the ability to go </span><span class="line" data-startTime="787">to View, click on Logs, and </span><span class="line" data-startTime="792">getting the output here, </span><span class="line" data-startTime="792">very useful when you </span><span class="line" data-startTime="793">want to debug things. </span></p>

<p><span class="line" data-startTime="795">But one of the even nicer thing </span><span class="line" data-startTime="795">is just the ability to </span><span class="line" data-startTime="798">put a break point on each </span><span class="line" data-startTime="798">function and each line that </span><span class="line" data-startTime="802">you wish, and then select </span><span class="line" data-startTime="802">the right function </span><span class="line" data-startTime="805">that we want to run. </span> <span class="line" data-startTime="806">In our case, it's Run </span><span class="line" data-startTime="806">Scenario Blending. </span> <span class="line" data-startTime="809">Click on the Debug, and you'll </span><span class="line" data-startTime="809">see in a minute that I'm </span><span class="line" data-startTime="814">opening the debugger and getting </span><span class="line" data-startTime="814">a full view of the all </span><span class="line" data-startTime="817">the variables. </span> <span class="line" data-startTime="818">I have this object containing </span><span class="line" data-startTime="818">all the </span><span class="line" data-startTime="821">variables that I have here. </span></p>

<p><span class="line" data-startTime="823">And now on this line, basically </span><span class="line" data-startTime="823">I could see and go </span><span class="line" data-startTime="827">above or get into and stepping </span><span class="line" data-startTime="827">into the functions. </span> <span class="line" data-startTime="831">Let's close it. </span> <span class="line" data-startTime="832">We don't need it anymore. </span> <span class="line" data-startTime="834">We have the results back. </span> <span class="line" data-startTime="836">Let me just refresh it so it </span><span class="line" data-startTime="836">will be much quicker, and </span><span class="line" data-startTime="843">we'll get the results </span><span class="line" data-startTime="843">in a second. </span> <span class="line" data-startTime="847">And as you can see now, it's </span><span class="line" data-startTime="847">maybe a bit clearer that we </span><span class="line" data-startTime="851">want or wish to end to this </span><span class="line" data-startTime="851">range of the aspect. </span> <span class="line" data-startTime="855">Now, all this is quite cool. </span> <span class="line" data-startTime="858">But the ability to run it for </span><span class="line" data-startTime="858">real is basically coming very </span><span class="line" data-startTime="862">handy when we're taking Compute </span><span class="line" data-startTime="862">Engine into our hands. </span></p>

<p><span class="line" data-startTime="869">So I took the code </span><span class="line" data-startTime="869">from App Script. </span> <span class="line" data-startTime="872">Basically, you could </span><span class="line" data-startTime="872">see it here. </span> <span class="line" data-startTime="874">[AUDIO LOST] </span><span class="line" data-startTime="878">changes into it. </span> <span class="line" data-startTime="880">First and foremost, since you </span><span class="line" data-startTime="880">are going to run in Node.js, </span><span class="line" data-startTime="883">we could utilize some models. </span> <span class="line" data-startTime="885">NPM is your source, and there </span><span class="line" data-startTime="885">are so many, that it's quite </span><span class="line" data-startTime="889">funny to look sometimes </span><span class="line" data-startTime="889">for the best ones. </span> <span class="line" data-startTime="894">In our cases, since we're </span><span class="line" data-startTime="894">working with a lot of data </span><span class="line" data-startTime="898">now, we get to get out of the </span><span class="line" data-startTime="898">logger or, in our Node.js </span><span class="line" data-startTime="905">world, Console Log. </span> <span class="line" data-startTime="906">We want to work with files, </span><span class="line" data-startTime="906">and here I just choose the </span><span class="line" data-startTime="909">ability to work with text files </span><span class="line" data-startTime="909">and basically build CSV </span><span class="line" data-startTime="915">files that later on I could </span><span class="line" data-startTime="915">upload and analyze in Google </span><span class="line" data-startTime="918">Sheets again. </span></p>

<p><span class="line" data-startTime="921">So in our case, we'll try to </span><span class="line" data-startTime="921">run, let's say, 1,000 times. </span> <span class="line" data-startTime="924">We could do actually </span><span class="line" data-startTime="924">10,000 times. </span> <span class="line" data-startTime="927">It will be very, very efficient </span><span class="line" data-startTime="927">and fast, and you'll </span><span class="line" data-startTime="931">see it in minute. </span> <span class="line" data-startTime="933">In terms of percentage and all </span><span class="line" data-startTime="933">the aspects that we talked </span><span class="line" data-startTime="936">about, very similar </span><span class="line" data-startTime="936">to what we saw &mdash; </span><span class="line" data-startTime="939">20% chance to close a big deal, </span><span class="line" data-startTime="939">50% for a smaller one. </span> <span class="line" data-startTime="944">And those are the limitations </span><span class="line" data-startTime="944">that we put to ourselves, and </span><span class="line" data-startTime="949">these are the returns. </span> <span class="line" data-startTime="952">Now we're just putting some </span><span class="line" data-startTime="952">boilerplate code to run our </span><span class="line" data-startTime="956">blending scenario x amount of </span><span class="line" data-startTime="956">times, and each time we'll get </span><span class="line" data-startTime="960">the maximum, and we'll </span><span class="line" data-startTime="960">want to output </span><span class="line" data-startTime="964">everything to a CSV file. </span> <span class="line" data-startTime="966">By the way, this is all </span><span class="line" data-startTime="966">I need in order to </span><span class="line" data-startTime="968">export it to a CSV file. </span></p>

<p><span class="line" data-startTime="970">I'm using outData as a string </span><span class="line" data-startTime="970">object, and I'm just making </span><span class="line" data-startTime="973">sure that I'm putting commas and </span><span class="line" data-startTime="973">end of line in the end of </span><span class="line" data-startTime="977">everything. </span> <span class="line" data-startTime="978">And as you could see here, very </span><span class="line" data-startTime="978">straightforward and easy. </span> <span class="line" data-startTime="981">Now when we'll come here </span><span class="line" data-startTime="981">to our Compute Engine &mdash; </span><span class="line" data-startTime="987">let me make it [AUDIO LOST]. </span> <span class="line" data-startTime="990">we could run this little, </span><span class="line" data-startTime="990">nice application. </span> <span class="line" data-startTime="995">And for 10,000 runs, we got </span><span class="line" data-startTime="995">the results back after 451 </span><span class="line" data-startTime="1005">milliseconds, so roughly </span><span class="line" data-startTime="1005">half a second. </span> <span class="line" data-startTime="1008">And you could see here that we </span><span class="line" data-startTime="1008">were able to achieve the best </span><span class="line" data-startTime="1012">results with a higher </span><span class="line" data-startTime="1012">number of big deals. </span></p>

<p><span class="line" data-startTime="1014">So probably the best </span><span class="line" data-startTime="1014">recommendation that we could </span><span class="line" data-startTime="1019">make in this case with </span><span class="line" data-startTime="1019">these assumptions &mdash; </span><span class="line" data-startTime="1024">these are the ones &mdash; </span><span class="line" data-startTime="1025">is that we want to focus </span><span class="line" data-startTime="1025">on more bigger deals </span><span class="line" data-startTime="1028">than smaller deals. </span> <span class="line" data-startTime="1029">Now you might notice that it's </span><span class="line" data-startTime="1029">not black and white, and it's </span><span class="line" data-startTime="1033">not that we have one </span><span class="line" data-startTime="1033">sort of thing. </span> <span class="line" data-startTime="1038">And I guess it's very similar </span><span class="line" data-startTime="1038">to the real world where </span><span class="line" data-startTime="1042">usually the answers </span><span class="line" data-startTime="1042">are quite gray. </span> <span class="line" data-startTime="1045">You need to find the </span><span class="line" data-startTime="1045">golden path. </span></p>

<p><span class="line" data-startTime="1047">And in most of the cases, </span><span class="line" data-startTime="1047">it's not very clear </span><span class="line" data-startTime="1050">where they will be. </span> <span class="line" data-startTime="1052">And I guess that one of most </span><span class="line" data-startTime="1052">important aspects to note is </span><span class="line" data-startTime="1058">that your assumptions will </span><span class="line" data-startTime="1058">drive the simulation. </span> <span class="line" data-startTime="1061">So it's very useful to have </span><span class="line" data-startTime="1061">those type of simulations when </span><span class="line" data-startTime="1064">you feel that you have some </span><span class="line" data-startTime="1064">control or some assumptions </span><span class="line" data-startTime="1068">that are close to reality. </span> <span class="line" data-startTime="1069">And in our case, we could </span><span class="line" data-startTime="1069">definitely say something like </span><span class="line" data-startTime="1073">our brilliant salesgirl </span><span class="line" data-startTime="1073">could close a bigger </span><span class="line" data-startTime="1076">deal 30% of the times. </span> <span class="line" data-startTime="1079">Why? </span><span class="line" data-startTime="1079">Because for every 10 deals that </span><span class="line" data-startTime="1079">she approaches, three are </span><span class="line" data-startTime="1084">done deals. </span> <span class="line" data-startTime="1085">And with those assumptions in </span><span class="line" data-startTime="1085">hand, we could definitely go </span><span class="line" data-startTime="1089">and see how she or he </span><span class="line" data-startTime="1089">could utilize their </span><span class="line" data-startTime="1092">time in the best way. </span></p>

<p><span class="line" data-startTime="1094">So these were just fun little </span><span class="line" data-startTime="1094">things about how to utilize </span><span class="line" data-startTime="1098">Node.js, App Script, and run </span><span class="line" data-startTime="1098">some Monte Carlo simulations. </span> <span class="line" data-startTime="1104">I hope in the near future to </span><span class="line" data-startTime="1104">show some cool things that you </span><span class="line" data-startTime="1109">could do in App Engine </span><span class="line" data-startTime="1109">as well. </span> <span class="line" data-startTime="1111">And all the code, of course, </span><span class="line" data-startTime="1111">will be on my GitApp </span><span class="line" data-startTime="1114">repository, and I'll put a full </span><span class="line" data-startTime="1114">transcript of all this </span><span class="line" data-startTime="1118">show in the footnotes so you'll </span><span class="line" data-startTime="1118">be able to track it. </span> <span class="line" data-startTime="1122">And until next time, be </span><span class="line" data-startTime="1122">strong and have fun. </span> <span class="line" data-startTime="1126">Bye-bye. </span></p>

<p></p></div>