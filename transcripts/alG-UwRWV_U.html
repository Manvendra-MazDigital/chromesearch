<p class="speaker"><span class="line" data-starttime="2"><span class="speakerName">Pete LePage</span>: All right, </span><span class="line" data-startTime="2">welcome, everybody. </span><span class="line" data-startTime="4">My name's Pete LePage. </span><span class="line" data-startTime="5">I'm a developer advocate on </span><span class="line" data-startTime="5">the Chrome team at Google. </span></p>

<p class="speaker"><span class="line" data-starttime="7"><span class="speakerName">John Mellor</span>: And I'm </span><span class="line" data-startTime="7">John Mellor. </span><span class="line" data-startTime="9">I work on Chrome for Android </span><span class="line" data-startTime="9">web browser in London. </span></p>

<p class="speaker"><span class="line" data-starttime="12"><span class="speakerName">Pete LePage</span>: Awesome. </span> <span class="line" data-startTime="12">Today we're going to be talking </span><span class="line" data-startTime="12">about High DPI and how </span><span class="line" data-startTime="15">we make the web beautiful. </span> <span class="line" data-startTime="18">Everybody here got a </span><span class="line" data-startTime="18">Pixel yesterday, </span><span class="line" data-startTime="20">and it's pretty awesome. </span> <span class="line" data-startTime="22">You've all probably been surfing </span><span class="line" data-startTime="22">around a little bit on </span><span class="line" data-startTime="25">it, and you've seen that some </span><span class="line" data-startTime="25">websites look pretty </span><span class="line" data-startTime="28">fantastic, and other sites, uh, </span><span class="line" data-startTime="28">they don't look so good. </span> <span class="line" data-startTime="33">So we're going to talk about how </span><span class="line" data-startTime="33">to make all websites look </span><span class="line" data-startTime="36">pretty fantastic. </span> <span class="line" data-startTime="37">Now, how many people have </span><span class="line" data-startTime="37">an HDTV at home? </span><span class="line" data-startTime="42">Yeah, pretty much everybody, </span><span class="line" data-startTime="42">right? </span><span class="line" data-startTime="45">It looks beautiful up here. </span> <span class="line" data-startTime="46">If you're a sports fan, </span><span class="line" data-startTime="46">everything looks sharp. </span> <span class="line" data-startTime="48">It's clear. </span> <span class="line" data-startTime="48">You can see all the little </span><span class="line" data-startTime="48">balls, you can see the pucks, </span><span class="line" data-startTime="51">whatever it happens to be. </span></p>

<p><span class="line" data-startTime="53">But every once in a while, you </span><span class="line" data-startTime="53">come across a TV show that's </span><span class="line" data-startTime="56">broadcast in standard def. </span> <span class="line" data-startTime="58">And you kind of go, wow, </span><span class="line" data-startTime="58">this looks like &mdash; </span><span class="line" data-startTime="62">well, it just looks </span><span class="line" data-startTime="62">bad, right? </span><span class="line" data-startTime="63">It just doesn't look </span><span class="line" data-startTime="63">very good. </span> <span class="line" data-startTime="65">We're at the same point with </span><span class="line" data-startTime="65">high DPI displays as we are </span><span class="line" data-startTime="71">with HDTVs five years ago. </span> <span class="line" data-startTime="75">For the most part, it's up to </span><span class="line" data-startTime="75">the broadcasters to send out </span><span class="line" data-startTime="80">high def channels. </span> <span class="line" data-startTime="81">Well, now it's up to us, as web </span><span class="line" data-startTime="81">developers, to send out </span><span class="line" data-startTime="87">the high def content </span><span class="line" data-startTime="87">to our users. </span></p>

<p><span class="line" data-startTime="90">So we're going to talk about </span><span class="line" data-startTime="90">how we get there. </span> <span class="line" data-startTime="94">So let's just sort of think a </span><span class="line" data-startTime="94">little bit about how an HDTV </span><span class="line" data-startTime="98">works and how the high </span><span class="line" data-startTime="98">DPI displays work. </span> <span class="line" data-startTime="103">So with a high def TV, </span><span class="line" data-startTime="103">it's got about 1080 </span><span class="line" data-startTime="107">pixels high, right? </span><span class="line" data-startTime="109">Well, a standard def image is </span><span class="line" data-startTime="109">only about 480 pixels high. </span> <span class="line" data-startTime="114">So you've got two options. </span> <span class="line" data-startTime="117">One, you can display the image </span><span class="line" data-startTime="117">at a one-to-one pixel ratio. </span> <span class="line" data-startTime="122">So it's not expanded out. </span> <span class="line" data-startTime="123">Everything looks sharp. </span> <span class="line" data-startTime="124">It looks good. </span> <span class="line" data-startTime="125">But you've got all those black </span><span class="line" data-startTime="125">borders around everything, and </span><span class="line" data-startTime="128">it just looks, meh, </span><span class="line" data-startTime="128">not so good. </span></p>

<p><span class="line" data-startTime="131">Or you can blow it up so it fits </span><span class="line" data-startTime="131">the full resolution of </span><span class="line" data-startTime="135">your screen. </span> <span class="line" data-startTime="136">And then it starts to </span><span class="line" data-startTime="136">get a little blurry. </span> <span class="line" data-startTime="138">And that's what's happening </span><span class="line" data-startTime="138">on high DPI displays. </span> <span class="line" data-startTime="142">That's what happens </span><span class="line" data-startTime="142">on your phone. </span> <span class="line" data-startTime="144">That's what happens </span><span class="line" data-startTime="144">on the Pixel. </span> <span class="line" data-startTime="145">The browser blows those images </span><span class="line" data-startTime="145">up to fit on screen. </span> <span class="line" data-startTime="152">So John, there's so many </span><span class="line" data-startTime="152">pixel types that </span><span class="line" data-startTime="155">we got to deal with. </span> <span class="line" data-startTime="156">Why don't we talk about </span><span class="line" data-startTime="156">those for a sec. </span></p>

<p class="speaker"><span class="line" data-starttime="158"><span class="speakerName">John Mellor</span>: So there are </span><span class="line" data-startTime="158">essentially three kinds of </span><span class="line" data-startTime="160">pixels that web developers </span><span class="line" data-startTime="160">need to worry about. </span> <span class="line" data-startTime="163">The first kind, it's </span><span class="line" data-startTime="163">a device pixel. </span> <span class="line" data-startTime="166">This is one physical hardware </span><span class="line" data-startTime="166">pixel, a single RGP unit in </span><span class="line" data-startTime="170">the display. </span> <span class="line" data-startTime="171">And it's the smallest unit, </span><span class="line" data-startTime="173">So then there's a </span><span class="line" data-startTime="173">second kind &mdash; </span><span class="line" data-startTime="175">device independent pixel, or </span><span class="line" data-startTime="175">DIP, as we're going to call it </span><span class="line" data-startTime="178">from now on. </span> <span class="line" data-startTime="179">It's an abstract unit. </span> <span class="line" data-startTime="181">It's a fixed multiple </span><span class="line" data-startTime="181">of device pixels. </span> <span class="line" data-startTime="183">So once they're a 2x device, </span><span class="line" data-startTime="183">each device independent pixel, </span><span class="line" data-startTime="187">DIP, is a two-by-two vector </span><span class="line" data-startTime="187">angle of device pixels. </span> <span class="line" data-startTime="191">OK, </span><span class="line" data-startTime="192">And the third kind </span><span class="line" data-startTime="192">is CSS pixels. </span> <span class="line" data-startTime="195">These are the ones we're all </span><span class="line" data-startTime="195">familiar with from CSS &mdash; </span><span class="line" data-startTime="197">the px unit. </span></p>

<p><span class="line" data-startTime="200">And so if you want to follow </span><span class="line" data-startTime="200">best practices, and you've got </span><span class="line" data-startTime="203">a width=devi viewport &mdash; we'll go </span><span class="line" data-startTime="203">into what it means later &mdash; </span><span class="line" data-startTime="207">a CSS pixel and a DIP are </span><span class="line" data-startTime="207">initially the same thing, </span><span class="line" data-startTime="211">until you zoom in. </span> <span class="line" data-startTime="213">When you zoom in, the CSS </span><span class="line" data-startTime="213">pixels gets scaled up. </span> <span class="line" data-startTime="216">But the DIP is a physical </span><span class="line" data-startTime="216">thing, and so that </span><span class="line" data-startTime="220">stays the same size. </span> <span class="line" data-startTime="222">OK, so this leads to some </span><span class="line" data-startTime="222">confusion, because they do </span><span class="line" data-startTime="225">seem quite similar, </span><span class="line" data-startTime="225">ultimately. </span> <span class="line" data-startTime="227">And in fact, if you read the </span><span class="line" data-startTime="227">specs like CSS and HTML, </span><span class="line" data-startTime="231">you'll notice the specs never </span><span class="line" data-startTime="231">actually refer to these DIPs. </span> <span class="line" data-startTime="233">They always talk about </span><span class="line" data-startTime="233">CSS pixels. </span> <span class="line" data-startTime="235">And they use that term, CSS </span><span class="line" data-startTime="235">pixels, to refer to both DIPs </span><span class="line" data-startTime="239">and CSS pixels. </span> <span class="line" data-startTime="240">So you have to be a little </span><span class="line" data-startTime="240">bit careful. </span> <span class="line" data-startTime="243">As web developers, we're most </span><span class="line" data-startTime="243">concerned about CSS pixels, </span><span class="line" data-startTime="246">because that's what we actually </span><span class="line" data-startTime="246">use in our layouts, </span><span class="line" data-startTime="249">and this mysterious device </span><span class="line" data-startTime="249">pixel ratio. </span></p>

<p><span class="line" data-startTime="252">So let's go into a practical </span><span class="line" data-startTime="252">example. </span> <span class="line" data-startTime="256">So this is a Nexus Four. </span> <span class="line" data-startTime="258">It's a 2x device, and we'll put </span><span class="line" data-startTime="258">on [? developer ?] hats in </span><span class="line" data-startTime="262">a minute to look at what that </span><span class="line" data-startTime="262">actually means and how we </span><span class="line" data-startTime="264">calculate it. </span> <span class="line" data-startTime="265">But all you need to know for now </span><span class="line" data-startTime="265">is it's a fixed value for </span><span class="line" data-startTime="267">the device. </span> <span class="line" data-startTime="269">The Nexus Four is </span><span class="line" data-startTime="269">also 768 device </span><span class="line" data-startTime="272">pixels wide in portrait. </span> <span class="line" data-startTime="274">And to get the mobile device </span><span class="line" data-startTime="274">independent pixels of width, </span><span class="line" data-startTime="278">you divide this by the device </span><span class="line" data-startTime="278">pixel ratio, and you get 384. </span></p>

<p><span class="line" data-startTime="284">The width for this device in CSS </span><span class="line" data-startTime="284">pixels, well, that varies. </span> <span class="line" data-startTime="287">So it varies based on the </span><span class="line" data-startTime="287">viewport, which we'll go into </span><span class="line" data-startTime="289">later, and it varies </span><span class="line" data-startTime="289">on the zoom level. </span> <span class="line" data-startTime="292">On the mobile site, it'll </span><span class="line" data-startTime="292">often start off </span><span class="line" data-startTime="295">as being 384 pixels. </span> <span class="line" data-startTime="296">It'll match them with DIPs. </span> <span class="line" data-startTime="298">But on a desktop site, it'll </span><span class="line" data-startTime="298">often start out being 980 </span><span class="line" data-startTime="301">pixels wide. </span> <span class="line" data-startTime="302">And as you zoom in, the </span><span class="line" data-startTime="302">page is scaled up. </span> <span class="line" data-startTime="306">It stays the same width, but </span><span class="line" data-startTime="306">because you can see less of </span><span class="line" data-startTime="309">the page on screen at one time, </span><span class="line" data-startTime="309">the number of CSS pixels </span><span class="line" data-startTime="312">across the width of the screen </span><span class="line" data-startTime="312">decreases when you zoom in. </span></p>

<p><span class="line" data-startTime="318">So Pete, how does the DPI </span><span class="line" data-startTime="318">vary across devices? </span></p>

<p class="speaker"><span class="line" data-starttime="321"><span class="speakerName">Pete LePage</span>: So it's really </span><span class="line" data-startTime="321">one of those fun things. </span> <span class="line" data-startTime="323">The device pixel ratio can go </span><span class="line" data-startTime="323">anywhere from one for a simple </span><span class="line" data-startTime="327">1x device, all the way up to </span><span class="line" data-startTime="327">3 with the new Galaxy S IV. </span> <span class="line" data-startTime="332">And it's everything </span><span class="line" data-startTime="332">in between. </span> <span class="line" data-startTime="335">The Nexus S is a 1.5x device. </span> <span class="line" data-startTime="338">The Nexus is a 1.3. </span> <span class="line" data-startTime="341">Before this session, John and </span><span class="line" data-startTime="341">I did a little bit of math, </span><span class="line" data-startTime="344">and we figured out, we think </span><span class="line" data-startTime="344">for people sitting in the </span><span class="line" data-startTime="347">front row, that projector </span><span class="line" data-startTime="347">is about a 0.5x display. </span> <span class="line" data-startTime="352">But for the people in the </span><span class="line" data-startTime="352">back, it's a 2x display. </span></p>

<p><span class="line" data-startTime="355">And we'll talk about </span><span class="line" data-startTime="355">that in a sec. </span> <span class="line" data-startTime="358">So notice that the different </span><span class="line" data-startTime="358">DPIs between the Nexus S and </span><span class="line" data-startTime="363">the Chromebook Pixel is only </span><span class="line" data-startTime="363">four DPI different, right? </span><span class="line" data-startTime="368">Four DPI should not matter </span><span class="line" data-startTime="368">on how much it goes </span><span class="line" data-startTime="372">from a 1.5 to a 2. </span> <span class="line" data-startTime="374">It shouldn't matter going back </span><span class="line" data-startTime="374">and forth between the front </span><span class="line" data-startTime="378">row and the back row. </span> <span class="line" data-startTime="379">It has to do with the distance </span><span class="line" data-startTime="379">that you're sitting away from </span><span class="line" data-startTime="382">the device. </span> <span class="line" data-startTime="384">So I want everybody to do a </span><span class="line" data-startTime="384">little experiment for me. </span></p>

<p><span class="line" data-startTime="387">Take your hand. </span> <span class="line" data-startTime="388">Hold it out in front of your </span><span class="line" data-startTime="388">face, just like this. </span> <span class="line" data-startTime="390">All right, now look at the </span><span class="line" data-startTime="390">size of your hand. </span> <span class="line" data-startTime="392">All right, now bring your hand </span><span class="line" data-startTime="392">right up to your nose, like </span><span class="line" data-startTime="394">right up to your nose. </span> <span class="line" data-startTime="396">Notice how your hand </span><span class="line" data-startTime="396">got bigger? </span><span class="line" data-startTime="397">You can take your </span><span class="line" data-startTime="397">hand down now. </span> <span class="line" data-startTime="399">Right, your hand got </span><span class="line" data-startTime="399">a lot bigger. </span> <span class="line" data-startTime="401">But your hand didn't change </span><span class="line" data-startTime="401">size at all, right? </span><span class="line" data-startTime="404">It comes down to the visual </span><span class="line" data-startTime="404">angle that you're </span><span class="line" data-startTime="407">looking at your hand. </span> <span class="line" data-startTime="409">So the device pixel </span><span class="line" data-startTime="409">ratio is really </span><span class="line" data-startTime="411">about that visual angle. </span> <span class="line" data-startTime="413">The CSS spec defines a pixel as </span><span class="line" data-startTime="413">the visual angle of a pixel </span><span class="line" data-startTime="423">at 28 inches for a </span><span class="line" data-startTime="423">96 DPI display. </span></p>

<p><span class="line" data-startTime="428">So they've said, all right, a </span><span class="line" data-startTime="428">1x display should have about </span><span class="line" data-startTime="432">96 pixels at 28 inches. </span> <span class="line" data-startTime="436">So for a phone, which we hold </span><span class="line" data-startTime="436">much closer, we need it to </span><span class="line" data-startTime="441">have a higher pixel density. </span> <span class="line" data-startTime="443">So instead of having a 96 DPI </span><span class="line" data-startTime="443">display, it needs at least </span><span class="line" data-startTime="448">about 160 DPI. </span> <span class="line" data-startTime="451">So actually, when we did the </span><span class="line" data-startTime="451">math, this projector is about </span><span class="line" data-startTime="455">a 0.16 DPI, if you ever </span><span class="line" data-startTime="455">want to do this. </span> <span class="line" data-startTime="459">Now, if you want to calculate </span><span class="line" data-startTime="459">these out, the formula's here. </span> <span class="line" data-startTime="462">You can do this on your own. </span> <span class="line" data-startTime="463">It's not really that hard, and </span><span class="line" data-startTime="463">it's kind of fun just to </span><span class="line" data-startTime="466">figure this out. </span> <span class="line" data-startTime="467">In fact, your TV at home, if </span><span class="line" data-startTime="467">you've got an HDTV and you're </span><span class="line" data-startTime="471">sitting about six feet away from </span><span class="line" data-startTime="471">it, you've got a high DPI </span><span class="line" data-startTime="474">display at home. </span> <span class="line" data-startTime="475">I bet you didn't realize you </span><span class="line" data-startTime="475">probably have multiple high </span><span class="line" data-startTime="478">DPI displays at home. </span></p>

<p><span class="line" data-startTime="481">So we've talked about a lot </span><span class="line" data-startTime="481">of the theoretical stuff. </span> <span class="line" data-startTime="484">Let's jump in and talk about the </span><span class="line" data-startTime="484">practical stuff, like how </span><span class="line" data-startTime="487">we actually do this. </span></p>

<p class="speaker"><span class="line" data-starttime="489"><span class="speakerName">John Mellor</span>: So let's say </span><span class="line" data-startTime="489">you want to build a </span><span class="line" data-startTime="490">high DPI phone site. </span> <span class="line" data-startTime="492">OK, so you're looking on Nexus </span><span class="line" data-startTime="492">7 or whatever, and you see </span><span class="line" data-startTime="495">that's 768 device pixels wide. </span> <span class="line" data-startTime="499">That's what the spec </span><span class="line" data-startTime="499">sheet says. </span> <span class="line" data-startTime="501">You go online, you look at </span><span class="line" data-startTime="501">google.com at Nexus 4 tech </span><span class="line" data-startTime="503">specs, and that's </span><span class="line" data-startTime="503">what you see. </span> <span class="line" data-startTime="505">So you want to build a </span><span class="line" data-startTime="505">pixel perfect design. </span> <span class="line" data-startTime="508">The natural thing to do is to </span><span class="line" data-startTime="508">want a one-to-one ratio </span><span class="line" data-startTime="511">between device pixels </span><span class="line" data-startTime="511">and CSS pixels. </span> <span class="line" data-startTime="514">So how about this viewport? </span><span class="line" data-startTime="516">You said your width is 768, </span><span class="line" data-startTime="516">and that's how wide </span><span class="line" data-startTime="519">your page will be. </span> <span class="line" data-startTime="520">Well, this is actually </span><span class="line" data-startTime="520">a really bad idea. </span> <span class="line" data-startTime="523">If you look at what actually </span><span class="line" data-startTime="523">happens, on the left hand </span><span class="line" data-startTime="526">screen shot, that's what you </span><span class="line" data-startTime="526">want to happen, and on the </span><span class="line" data-startTime="530">right hand screen shot, that's </span><span class="line" data-startTime="530">what actually happens. </span> <span class="line" data-startTime="531">It looks tiny. </span></p>

<p><span class="line" data-startTime="533">Because the page is so wide, the </span><span class="line" data-startTime="533">browser has zoomed out the </span><span class="line" data-startTime="536">page so that it fits </span><span class="line" data-startTime="536">fully on screen. </span> <span class="line" data-startTime="539">And as a result, everything's </span><span class="line" data-startTime="539">gone really small. </span> <span class="line" data-startTime="541">You can compensate for this, </span><span class="line" data-startTime="541">but you have to go through </span><span class="line" data-startTime="544">every single width, height, font </span><span class="line" data-startTime="544">size, margin, in every </span><span class="line" data-startTime="548">single CSS file of </span><span class="line" data-startTime="548">your entire site. </span> <span class="line" data-startTime="550">It's a maintenance nightmare. </span> <span class="line" data-startTime="551">It's not worth it. </span> <span class="line" data-startTime="553">It's also not even possible. </span> <span class="line" data-startTime="555">In current browsers, when you </span><span class="line" data-startTime="555">use that kind of viewport, </span><span class="line" data-startTime="558">they'll mess up your font sizes, </span><span class="line" data-startTime="558">zooming will go weird, </span><span class="line" data-startTime="562">and it's because they'll think </span><span class="line" data-startTime="562">you're a desktop site, even </span><span class="line" data-startTime="564">though you actually meant </span><span class="line" data-startTime="564">it to be a mobile site. </span> <span class="line" data-startTime="568">There was also a way of doing </span><span class="line" data-startTime="568">this in the past with target </span><span class="line" data-startTime="570">density DPI in your viewport. </span></p>

<p><span class="line" data-startTime="572">That's been deprecated. </span> <span class="line" data-startTime="573">It doesn't work in Chrome, </span><span class="line" data-startTime="573">Safari, Firefox, et cetera, </span><span class="line" data-startTime="576">and never will, so ignore it. </span> <span class="line" data-startTime="580">So instead of a really wide </span><span class="line" data-startTime="580">viewport, how about a </span><span class="line" data-startTime="583">fixed-width viewport of a width </span><span class="line" data-startTime="583">that's more similar to </span><span class="line" data-startTime="586">the width of a phone? </span><span class="line" data-startTime="587">I've heard that 320 is common. </span> <span class="line" data-startTime="590">So this is OK for legacy </span><span class="line" data-startTime="590">fixed-width, phone-only sites. </span> <span class="line" data-startTime="596">But never use this </span><span class="line" data-startTime="596">for new sites or </span><span class="line" data-startTime="598">sites aimed at tablets. </span> <span class="line" data-startTime="600">Why? </span><span class="line" data-startTime="601">Well, again, look at this </span><span class="line" data-startTime="601">site on Nexus 4. </span> <span class="line" data-startTime="605">Nexus 4 was 384 DIPs </span><span class="line" data-startTime="605">wide, and so it's </span><span class="line" data-startTime="608">scaled from 320 to 384. </span></p>

<p><span class="line" data-startTime="611">That's OK. </span> <span class="line" data-startTime="612">It looks decent. </span> <span class="line" data-startTime="614">But a real killer is </span><span class="line" data-startTime="614">when you rotate </span><span class="line" data-startTime="615">your phone to landscape. </span> <span class="line" data-startTime="617">And look at this. </span> <span class="line" data-startTime="618">The toolbar is blown </span><span class="line" data-startTime="618">out of proportion. </span> <span class="line" data-startTime="621">It's enormous. </span> <span class="line" data-startTime="622">You can't even see the search </span><span class="line" data-startTime="622">box on screen because it's </span><span class="line" data-startTime="624">been pushed so far down as </span><span class="line" data-startTime="624">the page is scaled up. </span> <span class="line" data-startTime="629">And if you try this on a tablet, </span><span class="line" data-startTime="629">can you imagine what's </span><span class="line" data-startTime="631">going to happen now? </span><span class="line" data-startTime="632">We're going to scale this up </span><span class="line" data-startTime="632">from 320 to 1280, and it's </span><span class="line" data-startTime="636">enormous now. </span> <span class="line" data-startTime="638">So yeah, the only valid way to </span><span class="line" data-startTime="638">make a mobile website is to </span><span class="line" data-startTime="643">design your site with flexible </span><span class="line" data-startTime="643">width layout, even if you're </span><span class="line" data-startTime="647">making a dedicated mobile </span><span class="line" data-startTime="647">site, and use a </span><span class="line" data-startTime="651">width=device-width viewport. </span> <span class="line" data-startTime="653">That one, in fact. </span> <span class="line" data-startTime="655">So you'll see initial </span><span class="line" data-startTime="655">scale here. </span> <span class="line" data-startTime="659">That's there to fix a feature </span><span class="line" data-startTime="659">in iOS where, in landscape, </span><span class="line" data-startTime="663">while often making your viewport </span><span class="line" data-startTime="663">wider, it'll zoom in </span><span class="line" data-startTime="665">on your page, which </span><span class="line" data-startTime="665">looks a bit weird. </span> <span class="line" data-startTime="669">But the important thing is, this </span><span class="line" data-startTime="669">viewport allows you just </span><span class="line" data-startTime="671">to zoom in and out, which </span><span class="line" data-startTime="671">is recommended for </span><span class="line" data-startTime="673">accessibility reasons. </span></p>

<p><span class="line" data-startTime="676">If you must disallow pinch </span><span class="line" data-startTime="676">zoom, which happens on a </span><span class="line" data-startTime="679">couple of sites &mdash; say you're </span><span class="line" data-startTime="679">doing a multi-finger touch </span><span class="line" data-startTime="681">painting app or you're building </span><span class="line" data-startTime="681">Google Maps, or </span><span class="line" data-startTime="683">something like that &mdash; </span><span class="line" data-startTime="685">then you can use a </span><span class="line" data-startTime="685">second viewport. </span> <span class="line" data-startTime="687">But try to avoid it, because </span><span class="line" data-startTime="687">letting users zoom in is a </span><span class="line" data-startTime="690">nice thing to do. </span> <span class="line" data-startTime="692">And so these two viewports give </span><span class="line" data-startTime="692">you the ideal page width </span><span class="line" data-startTime="696">on all devices. </span> <span class="line" data-startTime="699">Use one of those for all mobile </span><span class="line" data-startTime="699">or responsive sites. </span> <span class="line" data-startTime="704">Now, the device width, which </span><span class="line" data-startTime="704">he mentioned here, it's </span><span class="line" data-startTime="707">actually in DIPs. </span> <span class="line" data-startTime="709">So this means you get the same </span><span class="line" data-startTime="709">width of your page in CSS </span><span class="line" data-startTime="712">pixels whether you're on a low </span><span class="line" data-startTime="712">DPI or a high DPI device. </span> <span class="line" data-startTime="717">This is good. </span></p>

<p><span class="line" data-startTime="718">This means the CSS and </span><span class="line" data-startTime="718">JavaScript you wrote for your </span><span class="line" data-startTime="720">low DPI device will just work </span><span class="line" data-startTime="720">for your high DPI device. </span> <span class="line" data-startTime="725">It's like what Pete was </span><span class="line" data-startTime="725">saying about HDTV. </span> <span class="line" data-startTime="728">Basically, [? it allows you ?] </span><span class="line" data-startTime="728">to scale your site up, and </span><span class="line" data-startTime="731">it'll all look in proportion, </span><span class="line" data-startTime="731">like an HDTV playing SD video. </span> <span class="line" data-startTime="735">Except that [? bell's ?] </span><span class="line" data-startTime="735">is a bit smarter. </span> <span class="line" data-startTime="736">Like for text and CSS features </span><span class="line" data-startTime="736">like border-radius, it'll </span><span class="line" data-startTime="740">render it all crisply, taking </span><span class="line" data-startTime="740">full advantage of the </span><span class="line" data-startTime="743">available pixels. </span> <span class="line" data-startTime="746">So the same widths, font sizes, </span><span class="line" data-startTime="746">borders, and so on </span><span class="line" data-startTime="748">work, but a few things you </span><span class="line" data-startTime="748">might want to tweak. </span> <span class="line" data-startTime="751">So Pete &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="755"><span class="speakerName">Pete LePage</span>: All right, so if </span><span class="line" data-startTime="755">we want to display high DPI </span><span class="line" data-startTime="758">assets in our markup or in our </span><span class="line" data-startTime="758">CSS, there's a couple of </span><span class="line" data-startTime="761">things that we can do. </span> <span class="line" data-startTime="762">For CSS, we need </span><span class="line" data-startTime="762">to use a rather </span><span class="line" data-startTime="766">large media query today. </span> <span class="line" data-startTime="769">This is going to get a lot </span><span class="line" data-startTime="769">easier, and most browsers are </span><span class="line" data-startTime="774">standardizing on </span><span class="line" data-startTime="774">this line here. </span> <span class="line" data-startTime="776">So you can see that we say, </span><span class="line" data-startTime="776">min resolution 1.5 DPPX. </span> <span class="line" data-startTime="783">Whoever chose those set of </span><span class="line" data-startTime="783">letters right next to each </span><span class="line" data-startTime="785">other, I'd like to </span><span class="line" data-startTime="785">just hit, because </span><span class="line" data-startTime="787">they're not fun to say. </span> <span class="line" data-startTime="788">But in any event, 1.5 </span><span class="line" data-startTime="788">DPPX will do that. </span> <span class="line" data-startTime="794">But for today, you need </span><span class="line" data-startTime="794">to include all </span><span class="line" data-startTime="796">four of those lines. </span></p>

<p><span class="line" data-startTime="797">So you need the one for </span><span class="line" data-startTime="797">WebKit, for Opera. </span> <span class="line" data-startTime="800">But I want to point out the </span><span class="line" data-startTime="800">third line there, the min </span><span class="line" data-startTime="803">resolution 144 DPI, because </span><span class="line" data-startTime="803">that's also going to work in </span><span class="line" data-startTime="806">the future. </span> <span class="line" data-startTime="807">Now, you'd think that this </span><span class="line" data-startTime="807">device, which is 326, or 236, </span><span class="line" data-startTime="813">or something like that, this </span><span class="line" data-startTime="813">should classify as that. </span> <span class="line" data-startTime="816">What that number is is that's </span><span class="line" data-startTime="816">the number of pixels at the </span><span class="line" data-startTime="823">standard level. </span> <span class="line" data-startTime="824">So the CSS specs says </span><span class="line" data-startTime="824">it should be </span><span class="line" data-startTime="827">at 96 for a 1x device. </span> <span class="line" data-startTime="830">So we want this to work on a </span><span class="line" data-startTime="830">1.5x device, so we take that </span><span class="line" data-startTime="833">96, multiply it by 1.5. </span> <span class="line" data-startTime="836">That's where the 144 </span><span class="line" data-startTime="836">is coming from. </span> <span class="line" data-startTime="838">So if we wanted it to be a 2x </span><span class="line" data-startTime="838">device, we'd need to do just </span><span class="line" data-startTime="842">96 times 2. </span> <span class="line" data-startTime="845">So that's going to work great </span><span class="line" data-startTime="845">for displaying background </span><span class="line" data-startTime="849">images and stuff </span><span class="line" data-startTime="849">in our markup. </span> <span class="line" data-startTime="851">If we want to query this in </span><span class="line" data-startTime="851">JavaScript, we've got the </span><span class="line" data-startTime="855">ability to be able to say </span><span class="line" data-startTime="855">window.devicePixelRatio and </span><span class="line" data-startTime="859">we'll get our device pixel ratio </span><span class="line" data-startTime="859">back from the browser. </span></p>

<p><span class="line" data-startTime="862">Now, this works pretty much </span><span class="line" data-startTime="862">across all browsers. </span> <span class="line" data-startTime="864">The only place where it doesn't </span><span class="line" data-startTime="864">work today is IE. </span> <span class="line" data-startTime="868">They're aware of it, so </span><span class="line" data-startTime="868">hopefully we'll see that in </span><span class="line" data-startTime="871">the near future. </span> <span class="line" data-startTime="872">But the nice thing about both of </span><span class="line" data-startTime="872">these is if you specify the </span><span class="line" data-startTime="875">markup in your CSS or you have </span><span class="line" data-startTime="875">this and it fails, it's going </span><span class="line" data-startTime="883">to work, because you've </span><span class="line" data-startTime="883">already got </span><span class="line" data-startTime="886">fallbacks in there. </span> <span class="line" data-startTime="889">Now, most browsers today are </span><span class="line" data-startTime="889">pretty awesome at sub-pixel </span><span class="line" data-startTime="893">layout, right? </span><span class="line" data-startTime="894">You can say, hey, I want </span><span class="line" data-startTime="894">something to be half a pixel </span><span class="line" data-startTime="896">wide, and it'll go </span><span class="line" data-startTime="896">do that thing. </span></p>

<p><span class="line" data-startTime="898">So that should mean I should be </span><span class="line" data-startTime="898">able to, on a high def or a </span><span class="line" data-startTime="902">high DPI display, I can go do </span><span class="line" data-startTime="902">something like this, where I </span><span class="line" data-startTime="905">say, on a 1x display, I want </span><span class="line" data-startTime="905">a border of one CSS pixel. </span> <span class="line" data-startTime="910">And on a 1x display, one CSS </span><span class="line" data-startTime="910">pixel is going to be one </span><span class="line" data-startTime="914">hardware pixel. </span> <span class="line" data-startTime="916">But on a 2x display, I want a </span><span class="line" data-startTime="916">half a CSS pixel, which is a </span><span class="line" data-startTime="922">one device pixel line. </span> <span class="line" data-startTime="925">You think this works? </span><span class="line" data-startTime="927">Yeah, no. </span></p>

<p><span class="line" data-startTime="928">Of course not. </span> <span class="line" data-startTime="932">On Firefox and IE, they round </span><span class="line" data-startTime="932">up, and they're always going </span><span class="line" data-startTime="943">to give you a one </span><span class="line" data-startTime="943">pixel border. </span> <span class="line" data-startTime="946">But on WebKit browsers, </span><span class="line" data-startTime="946">they round down. </span> <span class="line" data-startTime="952">So you get no border. </span> <span class="line" data-startTime="953">So you want to really test </span><span class="line" data-startTime="953">exhaustively if you want to </span><span class="line" data-startTime="958">use something like this. </span> <span class="line" data-startTime="959">But realistically, if you want </span><span class="line" data-startTime="959">to have something that thin, </span><span class="line" data-startTime="962">I'd avoid it right now. </span> <span class="line" data-startTime="964">It's going to be a little bit </span><span class="line" data-startTime="964">more of a pain in the butt </span><span class="line" data-startTime="966">than you want to deal with. </span></p>

<p class="speaker"><span class="line" data-starttime="971"><span class="speakerName">John Mellor</span>: So now </span><span class="line" data-startTime="971">some better news. </span> <span class="line" data-startTime="973">If we're doing text, </span><span class="line" data-startTime="973">text is great. </span> <span class="line" data-startTime="976">You've got a mobile optimized </span><span class="line" data-startTime="976">site with width=device-width, </span><span class="line" data-startTime="980">your text is going to </span><span class="line" data-startTime="980">be the same size </span><span class="line" data-startTime="981">in DIPs on all devices. </span> <span class="line" data-startTime="984">You don't have to do anything. </span> <span class="line" data-startTime="986">So if you get out your ruler </span><span class="line" data-startTime="986">now and you measured the </span><span class="line" data-startTime="988">actual physical size, it will </span><span class="line" data-startTime="988">differ slightly going from, </span><span class="line" data-startTime="991">say, a phone to a desktop </span><span class="line" data-startTime="991">or something. </span> <span class="line" data-startTime="994">But that's because of what Pete </span><span class="line" data-startTime="994">was saying earlier about </span><span class="line" data-startTime="996">the viewing distance. </span> <span class="line" data-startTime="998">And you'll find that the visual </span><span class="line" data-startTime="998">angle of the characters </span><span class="line" data-startTime="1001">of your text will be the same, </span><span class="line" data-startTime="1001">even on the phone and desktop. </span></p>

<p><span class="line" data-startTime="1006">So your text will be </span><span class="line" data-startTime="1006">similarly legible. </span> <span class="line" data-startTime="1009">It'll just be rendered slightly </span><span class="line" data-startTime="1009">more crisply on high </span><span class="line" data-startTime="1011">DPI devices, [INAUDIBLE] taking </span><span class="line" data-startTime="1011">full advantage on the </span><span class="line" data-startTime="1013">extra pixels. </span> <span class="line" data-startTime="1014">You're done here. </span> <span class="line" data-startTime="1015">Don't change a thing. </span> <span class="line" data-startTime="1018">Now, if you got the misfortune </span><span class="line" data-startTime="1018">of serving a desktop site to </span><span class="line" data-startTime="1021">mobile browsers, now you're </span><span class="line" data-startTime="1021">in for a world of pain. </span> <span class="line" data-startTime="1025">So yeah, it's tricky. </span> <span class="line" data-startTime="1028">Desktop sites are 1,000 pixels </span><span class="line" data-startTime="1028">wide, give or take a bit. </span> <span class="line" data-startTime="1031">The browser's going to zoom them </span><span class="line" data-startTime="1031">out to fit the full page </span><span class="line" data-startTime="1033">width on the screen. </span> <span class="line" data-startTime="1036">So on a portrait phone, which is </span><span class="line" data-startTime="1036">about 300 to 400 DIPs wide, </span><span class="line" data-startTime="1040">this means your site's going to </span><span class="line" data-startTime="1040">be scaled down by a factor </span><span class="line" data-startTime="1043">of three or so. </span></p>

<p><span class="line" data-startTime="1044">And it's going to be tiny. </span> <span class="line" data-startTime="1046">But that's OK. </span> <span class="line" data-startTime="1047">You can zoom in, and by zooming </span><span class="line" data-startTime="1047">in, text will become </span><span class="line" data-startTime="1050">legible again, right? </span><span class="line" data-startTime="1053">Well, there's a slight problem </span><span class="line" data-startTime="1053">with this, as always. </span> <span class="line" data-startTime="1057">So when you got wide columns of </span><span class="line" data-startTime="1057">text, suddenly everything </span><span class="line" data-startTime="1061">breaks down. </span> <span class="line" data-startTime="1062">Once you've zoomed in such that </span><span class="line" data-startTime="1062">the text is legible, the </span><span class="line" data-startTime="1066">text is now wider than the </span><span class="line" data-startTime="1066">screen, which means you have </span><span class="line" data-startTime="1069">to pan from side to side </span><span class="line" data-startTime="1069">for every line </span><span class="line" data-startTime="1072">of text you're reading. </span></p>

<p class="speaker"><span class="line" data-starttime="1073"><span class="speakerName">Pete LePage</span>: Oh, come on. </span><span class="line" data-startTime="1074">Who doesn't love that? </span></p>

<p class="speaker"><span class="line" data-starttime="1075"><span class="speakerName">John Mellor</span>: Woo! </span><span class="line" data-startTime="1076">Look I'm [? scrolling! ?] </span></p>

<p class="speaker"><span class="line" data-starttime="1077"><span class="speakerName">Pete LePage</span>: Yeah, no. </span></p>

<p class="speaker"><span class="line" data-starttime="1078"><span class="speakerName">John Mellor</span>: It's just </span><span class="line" data-startTime="1078">not practical. </span> <span class="line" data-startTime="1079">So to combat this, when viewing </span><span class="line" data-startTime="1079">desktop sites with </span><span class="line" data-startTime="1083">wide columns, many mobile </span><span class="line" data-startTime="1083">browsers reformat the text </span><span class="line" data-startTime="1087">using a text auto-sizing </span><span class="line" data-startTime="1087">algorithm. </span> <span class="line" data-startTime="1093">So on the left, you see this </span><span class="line" data-startTime="1093">page as it was originally </span><span class="line" data-startTime="1095">designed, and on the right, you </span><span class="line" data-startTime="1095">see how it gets rendered </span><span class="line" data-startTime="1098">in Chrome for Android </span><span class="line" data-startTime="1098">on a phone. </span> <span class="line" data-startTime="1101">You'll notice that the wide </span><span class="line" data-startTime="1101">left hand column has </span><span class="line" data-startTime="1104">changed text size. </span></p>

<p><span class="line" data-startTime="1106">The header has gone from 24 to </span><span class="line" data-startTime="1106">32 pixels, and the main body </span><span class="line" data-startTime="1112">text has gone from 15 </span><span class="line" data-startTime="1112">pixels to 26 pixels. </span> <span class="line" data-startTime="1115">But, in the meantime, the narrow </span><span class="line" data-startTime="1115">right hand column has </span><span class="line" data-startTime="1119">stayed a constant 13 pixels </span><span class="line" data-startTime="1119">in font size. </span> <span class="line" data-startTime="1124">So why are narrow columns </span><span class="line" data-startTime="1124">different from wide columns? </span><span class="line" data-startTime="1128">Well, this is what text </span><span class="line" data-startTime="1128">auto-sizing does. </span> <span class="line" data-startTime="1131">It permanently scales the CSS </span><span class="line" data-startTime="1131">font size of any wide columns </span><span class="line" data-startTime="1134">of text, such that when you </span><span class="line" data-startTime="1134">double tap to zoom in on that </span><span class="line" data-startTime="1138">block of text, which fits the </span><span class="line" data-startTime="1138">block to the screen width, the </span><span class="line" data-startTime="1143">text will then be legible. </span> <span class="line" data-startTime="1145">This is used on mobile by </span><span class="line" data-startTime="1145">Chrome, Safari, Firefox, </span><span class="line" data-startTime="1148">Internet Explorer, notable </span><span class="line" data-startTime="1148">exceptions being Opera and </span><span class="line" data-startTime="1152">[INAUDIBLE]. </span></p>

<p><span class="line" data-startTime="1154">You'll notice that not even the </span><span class="line" data-startTime="1154">font size nor the layout </span><span class="line" data-startTime="1156">change when you zoom </span><span class="line" data-startTime="1156">in and out. </span> <span class="line" data-startTime="1158">This all happens when the </span><span class="line" data-startTime="1158">page is first laid out. </span> <span class="line" data-startTime="1161">So it's used by four browsers, </span><span class="line" data-startTime="1161">and you'll find that all of </span><span class="line" data-startTime="1165">them have different </span><span class="line" data-startTime="1165">exciting quirks. </span></p>

<p class="speaker"><span class="line" data-starttime="1167"><span class="speakerName">Pete LePage</span>: Yay! </span></p>

<p class="speaker"><span class="line" data-starttime="1170"><span class="speakerName">John Mellor</span>: So by now you're </span><span class="line" data-startTime="1170">probably wondering, how do I </span><span class="line" data-startTime="1172">avoid text auto-sizing? </span><span class="line" data-startTime="1174">It's kind of a fallback. </span> <span class="line" data-startTime="1175">The browser does it because </span><span class="line" data-startTime="1175">it has [? two bits. ?] </span><span class="line" data-startTime="1177">You never want it to happen. </span> <span class="line" data-startTime="1179">So because it triggers on wide </span><span class="line" data-startTime="1179">columns, by far the best thing </span><span class="line" data-startTime="1184">to do is just make your </span><span class="line" data-startTime="1184">page narrower, OK? </span><span class="line" data-startTime="1189">So ideally, you use responsive </span><span class="line" data-startTime="1189">web design techniques to </span><span class="line" data-startTime="1192">reformat your page for mobile </span><span class="line" data-startTime="1192">device sizes, or, if you must, </span><span class="line" data-startTime="1196">use a dedicated mobile site. </span> <span class="line" data-startTime="1197">But whatever you do, just make </span><span class="line" data-startTime="1197">sure it's a width=device-width </span><span class="line" data-startTime="1201">narrow page. </span> <span class="line" data-startTime="1204">If you're stuck serving a </span><span class="line" data-startTime="1204">desktop page to mobile </span><span class="line" data-startTime="1207">browsers, well, there's still </span><span class="line" data-startTime="1207">a bit you can do. </span> <span class="line" data-startTime="1210">You can split up your wide </span><span class="line" data-startTime="1210">columns of text into multiple </span><span class="line" data-startTime="1213">narrower columns side by side. </span></p>

<p><span class="line" data-startTime="1217">And that way, because </span><span class="line" data-startTime="1217">they're narrow, </span><span class="line" data-startTime="1218">they won't get modified. </span> <span class="line" data-startTime="1221">So it sort of works, but </span><span class="line" data-startTime="1221">it's not great either. </span> <span class="line" data-startTime="1225">And then finally, there are some </span><span class="line" data-startTime="1225">ways you can disable text </span><span class="line" data-startTime="1228">auto-sizing, but use this </span><span class="line" data-startTime="1228">only as a last resort. </span> <span class="line" data-startTime="1233">It'll disable it for the subtree </span><span class="line" data-startTime="1233">under that selector, </span><span class="line" data-startTime="1236">but only use it for quirks like </span><span class="line" data-startTime="1236">a menu being auto-sized </span><span class="line" data-startTime="1240">or other strange things </span><span class="line" data-startTime="1240">going on. </span> <span class="line" data-startTime="1242">Don't use it for wide columns of </span><span class="line" data-startTime="1242">text, or else, when you pan </span><span class="line" data-startTime="1246">from side to side, users are </span><span class="line" data-startTime="1246">going to have the problem that </span><span class="line" data-startTime="1248">we had earlier before and </span><span class="line" data-startTime="1248">are just going to </span><span class="line" data-startTime="1251">give up on your site. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1256"><span class="speakerName">Pete LePage</span>: So we've talked </span><span class="line" data-startTime="1256">about text, we've talked about </span><span class="line" data-startTime="1258">other stuff. </span><span class="line" data-startTime="1258">But images really are one of the </span><span class="line" data-startTime="1258">most important things on </span><span class="line" data-startTime="1262">our websites today. </span><span class="line" data-startTime="1264">Talked yesterday during the </span><span class="line" data-startTime="1264">keynote that images are up to </span><span class="line" data-startTime="1266">60%, or average about 60% </span><span class="line" data-startTime="1266">of the weight of a page. </span><span class="line" data-startTime="1270">So let's talk about the web </span><span class="line" data-startTime="1270">images and the stuff that </span><span class="line" data-startTime="1275">we're doing there. </span></p>

<p class="speaker"><span class="line" data-starttime="1277"><span class="speakerName">John Mellor</span>: So it depends on </span><span class="line" data-startTime="1277">type of graphic what happens. </span><span class="line" data-startTime="1279">For vector images, they'll </span><span class="line" data-startTime="1279">seamlessly get crisper on high </span><span class="line" data-startTime="1283">DPI displays. </span><span class="line" data-startTime="1285">The same thing happens for </span><span class="line" data-startTime="1285">text &mdash; the browser just does </span><span class="line" data-startTime="1287">everything for you. </span><span class="line" data-startTime="1289">But with raster images, they'll </span><span class="line" data-startTime="1289">get stretched, usually </span><span class="line" data-startTime="1292">using bilinear interpolation, </span><span class="line" data-startTime="1292">and you'll find they'll start </span><span class="line" data-startTime="1296">looking really crap. </span><span class="line" data-startTime="1298">So an obvious and future-proof </span><span class="line" data-startTime="1298">solution is to replace as many </span><span class="line" data-startTime="1302">raster images as possible </span><span class="line" data-startTime="1302">with vector images. </span><span class="line" data-startTime="1306">So how can you do that? </span></p>

<p class="speaker"><span class="line" data-starttime="1308"><span class="speakerName">Pete LePage</span>: Well, it would be </span><span class="line" data-startTime="1308">nice if we could use vector </span><span class="line" data-startTime="1310">images for everything, but </span><span class="line" data-startTime="1310">obviously we can't. </span> <span class="line" data-startTime="1314">For graphics that have text on </span><span class="line" data-startTime="1314">it and if you want a specific </span><span class="line" data-startTime="1318">font, using something like </span><span class="line" data-startTime="1318">Google Fonts or other web font </span><span class="line" data-startTime="1322">services, or Unicode </span><span class="line" data-startTime="1322">characters, is </span><span class="line" data-startTime="1325">a really good way. </span> <span class="line" data-startTime="1326">You can use Unicode characters </span><span class="line" data-startTime="1326">very easily for bullets as </span><span class="line" data-startTime="1329">you're going through. </span> <span class="line" data-startTime="1330">If you're looking for a couple </span><span class="line" data-startTime="1330">of symbols, it works well for </span><span class="line" data-startTime="1333">that as well. </span> <span class="line" data-startTime="1334">There's a bunch of really great </span><span class="line" data-startTime="1334">icon fonts that you can </span><span class="line" data-startTime="1338">use that give you really </span><span class="line" data-startTime="1338">easy access to lots </span><span class="line" data-startTime="1340">of different icons. </span> <span class="line" data-startTime="1342">But one of the problems with </span><span class="line" data-startTime="1342">icon fonts is that they're </span><span class="line" data-startTime="1345">single color, right? </span><span class="line" data-startTime="1346">You can't change the color of </span><span class="line" data-startTime="1346">one part of an icon and have </span><span class="line" data-startTime="1350">another part some </span><span class="line" data-startTime="1350">different color. </span> <span class="line" data-startTime="1352">So that's where SVG works </span><span class="line" data-startTime="1352">really well &mdash; </span><span class="line" data-startTime="1354">Scalable Vector Graphics. </span></p>

<p><span class="line" data-startTime="1356">Because you can have it whatever </span><span class="line" data-startTime="1356">color you want, and </span><span class="line" data-startTime="1358">because it's a vector graphic, </span><span class="line" data-startTime="1358">it can get bigger and smaller </span><span class="line" data-startTime="1362">as easily as you want it to. </span> <span class="line" data-startTime="1365">And then finally, using CSS3, </span><span class="line" data-startTime="1365">if you've got gradients, </span><span class="line" data-startTime="1368">backgrounds, rounded corners, </span><span class="line" data-startTime="1368">anything like that, it works </span><span class="line" data-startTime="1372">really well for that </span><span class="line" data-startTime="1372">kind of stuff </span><span class="line" data-startTime="1375">Now, we've talked a little bit </span><span class="line" data-startTime="1375">about background images </span><span class="line" data-startTime="1378">already, so we won't spend too </span><span class="line" data-startTime="1378">much time on this, but just </span><span class="line" data-startTime="1381">want to call out again, you need </span><span class="line" data-startTime="1381">to have these four lines. </span> <span class="line" data-startTime="1385">Now, this is great </span><span class="line" data-startTime="1385">for the 1.5x. </span> <span class="line" data-startTime="1387">If you want to have a </span><span class="line" data-startTime="1387">2x, you'd need to </span><span class="line" data-startTime="1389">have another one. </span> <span class="line" data-startTime="1391">Now, the 2x will work on this, </span><span class="line" data-startTime="1391">and it'll get all the 1.5x. </span> <span class="line" data-startTime="1395">But you may want to </span><span class="line" data-startTime="1395">go and do a 2x. </span> <span class="line" data-startTime="1397">You may decide that 1.5x, it's </span><span class="line" data-startTime="1397">not worth my trouble. </span></p>

<p><span class="line" data-startTime="1400">I'm just going to do the 2x. </span> <span class="line" data-startTime="1402">You may decide that you want </span><span class="line" data-startTime="1402">to do one for everybody. </span> <span class="line" data-startTime="1405">And then one other thing &mdash; </span><span class="line" data-startTime="1405">always having </span><span class="line" data-startTime="1406">that fallback there. </span> <span class="line" data-startTime="1408">If you decide to use the </span><span class="line" data-startTime="1408">background shorthand, don't </span><span class="line" data-startTime="1413">forget to reset the </span><span class="line" data-startTime="1413">size on an image. </span> <span class="line" data-startTime="1415">Because the background </span><span class="line" data-startTime="1415">shorthand will reset </span><span class="line" data-startTime="1418">this size on that. </span> <span class="line" data-startTime="1421">Another technique you can </span><span class="line" data-startTime="1421">use is using highly </span><span class="line" data-startTime="1423">compressed 2x images. </span> <span class="line" data-startTime="1426">And this actually works </span><span class="line" data-startTime="1426">fantastically well. </span></p>

<p><span class="line" data-startTime="1429">You can see those two </span><span class="line" data-startTime="1429">images there. </span> <span class="line" data-startTime="1432">They both came from the </span><span class="line" data-startTime="1432">same original image. </span> <span class="line" data-startTime="1435">On the left is a 1x JPEG. </span> <span class="line" data-startTime="1437">So it's JPEG at 300 pixels </span><span class="line" data-startTime="1437">by 300 pixels. </span> <span class="line" data-startTime="1441">I saved it as a quality </span><span class="line" data-startTime="1441">90 in Photoshop. </span> <span class="line" data-startTime="1445">And then on the right hand side, </span><span class="line" data-startTime="1445">I did the same thing. </span> <span class="line" data-startTime="1447">I took the original image, </span><span class="line" data-startTime="1447">but I rescaled it. </span> <span class="line" data-startTime="1450">Instead of going to 300 by 300 </span><span class="line" data-startTime="1450">pixels, I set it to 600 pixels </span><span class="line" data-startTime="1454">by 600 pixels, and I set </span><span class="line" data-startTime="1454">the JPEG quality to 30. </span> <span class="line" data-startTime="1459">So I went from 90 all </span><span class="line" data-startTime="1459">the way down to 30 &mdash; </span><span class="line" data-startTime="1462">cranked it way down. </span> <span class="line" data-startTime="1463">The file size difference </span><span class="line" data-startTime="1463">is huge, right? </span><span class="line" data-startTime="1466">I went from a 62K file </span><span class="line" data-startTime="1466">down to a 36K file. </span> <span class="line" data-startTime="1471">Saved like 30 some odd percent </span><span class="line" data-startTime="1471">on that file size. </span></p>

<p><span class="line" data-startTime="1474">So great from a file </span><span class="line" data-startTime="1474">size perspective. </span> <span class="line" data-startTime="1477">And when we actually zoom in </span><span class="line" data-startTime="1477">and look at the image, it </span><span class="line" data-startTime="1481">looks really good. </span> <span class="line" data-startTime="1483">In fact, even on a 1x display, </span><span class="line" data-startTime="1483">I think it looks better than </span><span class="line" data-startTime="1488">the original image. </span> <span class="line" data-startTime="1490">Even look at the bow of the </span><span class="line" data-startTime="1490">ship, look at the little bulb, </span><span class="line" data-startTime="1493">look at the cranes &mdash; </span><span class="line" data-startTime="1494">everything is just </span><span class="line" data-startTime="1494">much sharper. </span> <span class="line" data-startTime="1496">Now, this is great for most </span><span class="line" data-startTime="1496">images, but there are a few </span><span class="line" data-startTime="1501">places where this doesn't work, </span><span class="line" data-startTime="1501">where you need to test </span><span class="line" data-startTime="1504">this a little bit. </span> <span class="line" data-startTime="1505">If you have a lot of color </span><span class="line" data-startTime="1505">gradients, you may see some </span><span class="line" data-startTime="1508">banding in your colors. </span> <span class="line" data-startTime="1511">If that's really important and </span><span class="line" data-startTime="1511">you want to make sure that you </span><span class="line" data-startTime="1514">don't hit that, you can use WebP </span><span class="line" data-startTime="1514">as another technique to </span><span class="line" data-startTime="1518">make sure that your </span><span class="line" data-startTime="1518">images look great. </span> <span class="line" data-startTime="1521">On the left is a 2x JPEG </span><span class="line" data-startTime="1521">saved at quality 80. </span> <span class="line" data-startTime="1525">So I cranked the quality </span><span class="line" data-startTime="1525">up, and I made them </span><span class="line" data-startTime="1527">both the same size. </span></p>

<p><span class="line" data-startTime="1528">And on the right is </span><span class="line" data-startTime="1528">a 2x WebP image. </span> <span class="line" data-startTime="1533">So the quality level </span><span class="line" data-startTime="1533">is the same. </span> <span class="line" data-startTime="1535">They're both the same </span><span class="line" data-startTime="1535">physical size. </span> <span class="line" data-startTime="1537">And it went from a 145K all the </span><span class="line" data-startTime="1537">way down to a 38K file. </span> <span class="line" data-startTime="1543">So huge file savings. </span> <span class="line" data-startTime="1545">Now, the one disadvantage that </span><span class="line" data-startTime="1545">we have with WebP is that it's </span><span class="line" data-startTime="1549">not supported across </span><span class="line" data-startTime="1549">all browsers. </span> <span class="line" data-startTime="1551">So that means you're going to </span><span class="line" data-startTime="1551">need to do some type of </span><span class="line" data-startTime="1553">feature detection, either </span><span class="line" data-startTime="1553">JavaScript, which there are </span><span class="line" data-startTime="1557">some pretty significant </span><span class="line" data-startTime="1557">disadvantages to that, or </span><span class="line" data-startTime="1560">server side. </span></p>

<p><span class="line" data-startTime="1561">Or you can use some services </span><span class="line" data-startTime="1561">like PageSpeed, which is </span><span class="line" data-startTime="1564">available as a Google service. </span> <span class="line" data-startTime="1565">You can download an Apache </span><span class="line" data-startTime="1565">or a plug-in for nginx. </span> <span class="line" data-startTime="1571">Yesterday, Ilija Gregoric did </span><span class="line" data-startTime="1571">a session on PageSpeed, and </span><span class="line" data-startTime="1576">tomorrow he's doing </span><span class="line" data-startTime="1576">one on WebP. </span> <span class="line" data-startTime="1579">So if this is an interesting </span><span class="line" data-startTime="1579">thing to you, which it should </span><span class="line" data-startTime="1581">be to every developer in here, </span><span class="line" data-startTime="1581">I really would recommend </span><span class="line" data-startTime="1585">checking that out. </span> <span class="line" data-startTime="1586">WebP can save you upwards of </span><span class="line" data-startTime="1586">30% in your file sizes, and </span><span class="line" data-startTime="1590">that's huge. </span></p>

<p class="speaker"><span class="line" data-starttime="1594"><span class="speakerName">John Mellor</span>: OK, so </span><span class="line" data-startTime="1594">Peter [INAUDIBLE] </span><span class="line" data-startTime="1596">resolution switching, swapping </span><span class="line" data-startTime="1596">out images for high resolution </span><span class="line" data-startTime="1599">images today. </span> <span class="line" data-startTime="1601">In CSS, use media queries </span><span class="line" data-startTime="1601">to swap them out. </span> <span class="line" data-startTime="1603">And in HTML, well, there's </span><span class="line" data-startTime="1603">actually no easy way, and so </span><span class="line" data-startTime="1606">you'll just provide a highly </span><span class="line" data-startTime="1606">compressed 2x image, and it </span><span class="line" data-startTime="1609">seems to work well. </span> <span class="line" data-startTime="1610">In the near future, there are </span><span class="line" data-startTime="1610">some new features which make </span><span class="line" data-startTime="1612">this slightly easier. </span> <span class="line" data-startTime="1615">In the CSS, there's the </span><span class="line" data-startTime="1615">image-set function. </span> <span class="line" data-startTime="1616">This is part of CSS 4. </span></p>

<p><span class="line" data-startTime="1618">It's currently implemented in </span><span class="line" data-startTime="1618">Chrome and Safari and provide </span><span class="line" data-startTime="1622">a [INAUDIBLE] </span><span class="line" data-startTime="1622">list of several image URLs </span><span class="line" data-startTime="1622">wherever you [INAUDIBLE] </span><span class="line" data-startTime="1626">a single one. </span> <span class="line" data-startTime="1627">And you annotate each one with a </span><span class="line" data-startTime="1627">device pixel ratio for which </span><span class="line" data-startTime="1631">it is designed. </span> <span class="line" data-startTime="1634">This is cool. </span> <span class="line" data-startTime="1634">The browser will automatically </span><span class="line" data-startTime="1634">choose the most appropriate </span><span class="line" data-startTime="1636">image based on the device's </span><span class="line" data-startTime="1636">device pixel ratio. </span> <span class="line" data-startTime="1640">And in future, browsers might </span><span class="line" data-startTime="1640">be even slightly cleverer. </span> <span class="line" data-startTime="1643">So a browser on a 2x device </span><span class="line" data-startTime="1643">might still choose to download </span><span class="line" data-startTime="1646">the 1x image if it's on a very </span><span class="line" data-startTime="1646">poor bandwidth constrained </span><span class="line" data-startTime="1649">connection. </span> <span class="line" data-startTime="1651">Another nice thing is the </span><span class="line" data-startTime="1651">browser will scale down the </span><span class="line" data-startTime="1654">image to fit within the </span><span class="line" data-startTime="1654">same original size. </span></p>

<p><span class="line" data-startTime="1656">So you don't need a separate </span><span class="line" data-startTime="1656">background size property as in </span><span class="line" data-startTime="1660">the media queries approach. </span> <span class="line" data-startTime="1666">But other browsers will </span><span class="line" data-startTime="1666">ignore image-sets. </span> <span class="line" data-startTime="1669">They don't know about </span><span class="line" data-startTime="1669">it at the moment. </span> <span class="line" data-startTime="1670">So make sure to always provide </span><span class="line" data-startTime="1670">a fallback image </span><span class="line" data-startTime="1672">like that top one. </span> <span class="line" data-startTime="1674">So there's an analogous thing </span><span class="line" data-startTime="1674">for HTML, the srcset attribute </span><span class="line" data-startTime="1678">for the image element. </span> <span class="line" data-startTime="1680">This is still under </span><span class="line" data-startTime="1680">discussion. </span> <span class="line" data-startTime="1681">It's not really implemented </span><span class="line" data-startTime="1681">yet. </span> <span class="line" data-startTime="1683">But you can do the same thing. </span> <span class="line" data-startTime="1685">You provide a [INAUDIBLE] </span><span class="line" data-startTime="1686">list of different files with </span><span class="line" data-startTime="1686">their device pixel ratio. </span> <span class="line" data-startTime="1689">There's an additional </span><span class="line" data-startTime="1689">feature &mdash; </span><span class="line" data-startTime="1691">you can also provide width-based </span><span class="line" data-startTime="1691">break points, a </span><span class="line" data-startTime="1693">bit like you get in </span><span class="line" data-startTime="1693">media queries. </span> <span class="line" data-startTime="1696">So you can serve different </span><span class="line" data-startTime="1696">images to mobile devices as to </span><span class="line" data-startTime="1698">desktops and so on. </span> <span class="line" data-startTime="1701">So OK, we still have to do </span><span class="line" data-startTime="1701">resolution switching for </span><span class="line" data-startTime="1704">fixed-width images, both </span><span class="line" data-startTime="1704">now and in the future. </span></p>

<p><span class="line" data-startTime="1709">What about for flexible-width </span><span class="line" data-startTime="1709">images? </span><span class="line" data-startTime="1711">So by a fixed-width image, </span><span class="line" data-startTime="1711">we mean something like </span><span class="line" data-startTime="1713">a logo or an icon. </span> <span class="line" data-startTime="1714">It stays the same size in CSS </span><span class="line" data-startTime="1714">pixels on all devices. </span> <span class="line" data-startTime="1717">But a flexible-width image is </span><span class="line" data-startTime="1717">something which you say went </span><span class="line" data-startTime="1719">to 100% and will actually scale </span><span class="line" data-startTime="1719">with the page size. </span> <span class="line" data-startTime="1723">Unfortunately, these are much </span><span class="line" data-startTime="1723">harder, and there are no good </span><span class="line" data-startTime="1726">solutions today. </span> <span class="line" data-startTime="1727">But let's go through </span><span class="line" data-startTime="1727">them quickly. </span> <span class="line" data-startTime="1730">JavaScript image replacement </span><span class="line" data-startTime="1730">is quite popular. </span> <span class="line" data-startTime="1733">Typically, there'll be some </span><span class="line" data-startTime="1733">script that runs and replaces </span><span class="line" data-startTime="1736">images at runtime based on the </span><span class="line" data-startTime="1736">screen [INAUDIBLE] width </span><span class="line" data-startTime="1738">properties of the device. </span></p>

<p><span class="line" data-startTime="1741">You have to be careful of this </span><span class="line" data-startTime="1741">because many of them don't </span><span class="line" data-startTime="1744">load any images at all </span><span class="line" data-startTime="1744">until the [INAUDIBLE] </span><span class="line" data-startTime="1747">loaded event of your page </span><span class="line" data-startTime="1747">or when you reach the </span><span class="line" data-startTime="1749">bottom of your HTML. </span> <span class="line" data-startTime="1752">But by that point, about a third </span><span class="line" data-startTime="1752">of the content of your </span><span class="line" data-startTime="1754">page is already downloaded. </span> <span class="line" data-startTime="1756">And so what this means is that </span><span class="line" data-startTime="1756">the images are going to start </span><span class="line" data-startTime="1758">showing up really late. </span> <span class="line" data-startTime="1760">You can adjust image replacement </span><span class="line" data-startTime="1760">more efficiently </span><span class="line" data-startTime="1764">if you embed the image [? SSE ?] </span><span class="line" data-startTime="1764">in your HTML </span><span class="line" data-startTime="1768">pointing to a very low </span><span class="line" data-startTime="1768">resolution version of the </span><span class="line" data-startTime="1770">image, which is always loaded, </span><span class="line" data-startTime="1770">and then users will get an </span><span class="line" data-startTime="1774">instant feedback. </span> <span class="line" data-startTime="1775">They'll see an image. </span> <span class="line" data-startTime="1777">And later on, you replace it </span><span class="line" data-startTime="1777">with a high resolution image. </span></p>

<p><span class="line" data-startTime="1779">So users don't have to wait, </span><span class="line" data-startTime="1779">but they still get the full </span><span class="line" data-startTime="1781">quality eventually. </span> <span class="line" data-startTime="1783">And you do a double download, </span><span class="line" data-startTime="1783">but the first download is very </span><span class="line" data-startTime="1785">small, because it's a low </span><span class="line" data-startTime="1785">resolution image. </span> <span class="line" data-startTime="1788">So it's not so bad. </span> <span class="line" data-startTime="1791">You can also switch between </span><span class="line" data-startTime="1791">images using lots of media </span><span class="line" data-startTime="1793">queries if you combine </span><span class="line" data-startTime="1793">the width and </span><span class="line" data-startTime="1796">resolution media queries. </span> <span class="line" data-startTime="1797">But this gets really complicated </span><span class="line" data-startTime="1797">really quickly. </span> <span class="line" data-startTime="1801">If you do this by hand, you're </span><span class="line" data-startTime="1801">going to get it wrong. </span> <span class="line" data-startTime="1803">You need like 10 different </span><span class="line" data-startTime="1803">lines duplicating </span><span class="line" data-startTime="1805">images and so on. </span> <span class="line" data-startTime="1807">It's tricky. </span> <span class="line" data-startTime="1809">There are some server-side </span><span class="line" data-startTime="1809">solutions. </span> <span class="line" data-startTime="1811">You can sniff to use an agent </span><span class="line" data-startTime="1811">of the device, and based on </span><span class="line" data-startTime="1814">that, serve an appropriate </span><span class="line" data-startTime="1814">image. </span> <span class="line" data-startTime="1816">The problem is Apple decided </span><span class="line" data-startTime="1816">that iOS devices should have </span><span class="line" data-startTime="1820">the same user agent both for </span><span class="line" data-startTime="1820">retina and non-retina devices. </span> <span class="line" data-startTime="1825">So you can't actually </span><span class="line" data-startTime="1825">tell how many pixels </span><span class="line" data-startTime="1827">need to serve them. </span></p>

<p><span class="line" data-startTime="1830">Another server-side solution is </span><span class="line" data-startTime="1830">set cookies on the client, </span><span class="line" data-startTime="1834">as the first thing in your </span><span class="line" data-startTime="1834">head or something. </span> <span class="line" data-startTime="1837">And then when the browser </span><span class="line" data-startTime="1837">requests images, it'll </span><span class="line" data-startTime="1840">probably send those cookies, </span><span class="line" data-startTime="1840">and the server can use the </span><span class="line" data-startTime="1842">cookie, while you're within the </span><span class="line" data-startTime="1842">screen width and height </span><span class="line" data-startTime="1845">and so on, to serve an </span><span class="line" data-startTime="1845">appropriate image. </span> <span class="line" data-startTime="1849">This sort of works, but the </span><span class="line" data-startTime="1849">first few images might be </span><span class="line" data-startTime="1852">requested without the cookie, </span><span class="line" data-startTime="1852">because browsers use a </span><span class="line" data-startTime="1855">pre-load scanner. </span> <span class="line" data-startTime="1856">And so they'll start downloading </span><span class="line" data-startTime="1856">images before you </span><span class="line" data-startTime="1858">actually run the JavaScript </span><span class="line" data-startTime="1858">to set the cookie. </span> <span class="line" data-startTime="1861">You can also set the base href </span><span class="line" data-startTime="1861">of your page such that any </span><span class="line" data-startTime="1865">images with relative paths </span><span class="line" data-startTime="1865">will be downloaded from a </span><span class="line" data-startTime="1868">particular directory. </span> <span class="line" data-startTime="1869">If that directory includes </span><span class="line" data-startTime="1869">a screen width and DPR, </span><span class="line" data-startTime="1873">[INAUDIBLE] ratio, then the </span><span class="line" data-startTime="1873">server can similarly use URL </span><span class="line" data-startTime="1877">rewriting to serve an </span><span class="line" data-startTime="1877">appropriate image for each </span><span class="line" data-startTime="1878">type of device. </span></p>

<p><span class="line" data-startTime="1881">So that's actually a reasonable </span><span class="line" data-startTime="1881">approach, but it's </span><span class="line" data-startTime="1884">quite invasive. </span> <span class="line" data-startTime="1885">You have to modify your servers </span><span class="line" data-startTime="1885">so they understand </span><span class="line" data-startTime="1888">things being open to different </span><span class="line" data-startTime="1888">directories. </span> <span class="line" data-startTime="1890">So it's not perfect, </span><span class="line" data-startTime="1893">So what's coming up </span><span class="line" data-startTime="1893">in the future? </span><span class="line" data-startTime="1895">I mentioned [INAUDIBLE] image </span><span class="line" data-startTime="1895">srcset attributes. </span> <span class="line" data-startTime="1898">There's also a picture element </span><span class="line" data-startTime="1898">that's being proposed as </span><span class="line" data-startTime="1900">another way of specifying </span><span class="line" data-startTime="1900">different images to HTML. </span> <span class="line" data-startTime="1904">But with both of those, you get </span><span class="line" data-startTime="1904">the same problems you had </span><span class="line" data-startTime="1907">with the media queries above </span><span class="line" data-startTime="1907">in that you get this </span><span class="line" data-startTime="1909">complicated tangled mess of </span><span class="line" data-startTime="1909">width-based break points and </span><span class="line" data-startTime="1912">resolution-based break points. </span> <span class="line" data-startTime="1914">And it's really hard to actually </span><span class="line" data-startTime="1914">serve the right </span><span class="line" data-startTime="1916">images to the right devices. </span> <span class="line" data-startTime="1919">The Client Hint header </span><span class="line" data-startTime="1919">is interesting. </span> <span class="line" data-startTime="1921">It's a proposal that browsers </span><span class="line" data-startTime="1921">might in the future send the </span><span class="line" data-startTime="1924">device pixel ratio and the </span><span class="line" data-startTime="1924">device width along with every </span><span class="line" data-startTime="1927">HTTP request. </span></p>

<p><span class="line" data-startTime="1929">This would allow servers </span><span class="line" data-startTime="1929">to serve the </span><span class="line" data-startTime="1931">perfect image reliably &mdash; </span><span class="line" data-startTime="1933">none of this user agent sniffing </span><span class="line" data-startTime="1933">or cookies or base </span><span class="line" data-startTime="1935">href stuff. </span> <span class="line" data-startTime="1937">And my personal favorite choice </span><span class="line" data-startTime="1937">is using progressive </span><span class="line" data-startTime="1940">image formats coupled with </span><span class="line" data-startTime="1940">smarter browsers. </span> <span class="line" data-startTime="1945">The idea is that when browsers </span><span class="line" data-startTime="1945">see a wide image, they would </span><span class="line" data-startTime="1948">download enough bytes to </span><span class="line" data-startTime="1948">make that high quality. </span> <span class="line" data-startTime="1951">But If they see a narrow image </span><span class="line" data-startTime="1951">or they're on a narrow device, </span><span class="line" data-startTime="1954">they would stop downloading </span><span class="line" data-startTime="1954">the rest of the </span><span class="line" data-startTime="1956">image part way through. </span> <span class="line" data-startTime="1958">And so they would get enough </span><span class="line" data-startTime="1958">quality for the size it's </span><span class="line" data-startTime="1960">actually being displayed at, </span><span class="line" data-startTime="1960">because they're never going to </span><span class="line" data-startTime="1963">show it bigger. </span> <span class="line" data-startTime="1965">So that's under discussion, and </span><span class="line" data-startTime="1965">we'll see how that goes. </span></p>

<p class="speaker"><span class="line" data-starttime="1970"><span class="speakerName">Pete LePage</span>: Cool. </span> <span class="line" data-startTime="1972">Canvas images are another </span><span class="line" data-startTime="1972">interesting one. </span> <span class="line" data-startTime="1975">Drawing on a canvas effectively </span><span class="line" data-startTime="1975">is just a raster </span><span class="line" data-startTime="1977">image, right? </span><span class="line" data-startTime="1978">You're not doing anything </span><span class="line" data-startTime="1978">different. </span> <span class="line" data-startTime="1980">It's not a vector image </span><span class="line" data-startTime="1980">or anything like that. </span> <span class="line" data-startTime="1982">So if we want to draw on a </span><span class="line" data-startTime="1982">canvas image, we need to make </span><span class="line" data-startTime="1985">sure that it's scaled </span><span class="line" data-startTime="1985">appropriately, that we've got </span><span class="line" data-startTime="1989">the right number of pixels. </span> <span class="line" data-startTime="1991">So when we actually say, hey, </span><span class="line" data-startTime="1991">browser, give me a canvas, it </span><span class="line" data-startTime="1995">creates this thing called </span><span class="line" data-startTime="1995">the backing store. </span> <span class="line" data-startTime="1998">And the backing store is what </span><span class="line" data-startTime="1998">actually stores the pixels and </span><span class="line" data-startTime="2001">says, OK, this should be this. </span></p>

<p><span class="line" data-startTime="2003">And this is where we want to </span><span class="line" data-startTime="2003">make sure that we've got the </span><span class="line" data-startTime="2005">right size. </span> <span class="line" data-startTime="2007">So we want to make sure that </span><span class="line" data-startTime="2007">on a 2x display or 1.5x </span><span class="line" data-startTime="2010">display, that we scale that </span><span class="line" data-startTime="2010">backing store to be the </span><span class="line" data-startTime="2014">appropriate size so that our </span><span class="line" data-startTime="2014">images appear sharp. </span> <span class="line" data-startTime="2019">Now, there's a couple of times </span><span class="line" data-startTime="2019">when we might not want to </span><span class="line" data-startTime="2021">scale our canvas </span><span class="line" data-startTime="2021">backing store. </span> <span class="line" data-startTime="2024">Think resource-constrained </span><span class="line" data-startTime="2024">devices &mdash; </span><span class="line" data-startTime="2026">some phones, some tablets. </span> <span class="line" data-startTime="2028">We don't necessarily want to </span><span class="line" data-startTime="2028">go and scale those canvases </span><span class="line" data-startTime="2031">bigger, because every single </span><span class="line" data-startTime="2031">canvas we could be using four </span><span class="line" data-startTime="2035">times the memory that </span><span class="line" data-startTime="2035">we'd be normally </span><span class="line" data-startTime="2038">using for a 1x canvas. </span></p>

<p><span class="line" data-startTime="2040">So we want to be a little </span><span class="line" data-startTime="2040">bit careful with that. </span> <span class="line" data-startTime="2043">So in order to scale our canvas, </span><span class="line" data-startTime="2043">you'd think we could </span><span class="line" data-startTime="2045">use something like </span><span class="line" data-startTime="2045">this, right? </span><span class="line" data-startTime="2047">We could say, hey, here's our </span><span class="line" data-startTime="2047">canvas, and we're going to </span><span class="line" data-startTime="2050">check our device pixel ratio. </span> <span class="line" data-startTime="2052">And if we want to scale it, </span><span class="line" data-startTime="2052">we're going to say, OK, if </span><span class="line" data-startTime="2055">it's bigger than one, let's go </span><span class="line" data-startTime="2055">ahead and we'll change the CSS </span><span class="line" data-startTime="2058">size and we'll set the CSS size </span><span class="line" data-startTime="2058">to its original size. </span> <span class="line" data-startTime="2063">And we'll set the canvas size to </span><span class="line" data-startTime="2063">be whenever that ratio is, </span><span class="line" data-startTime="2067">and then we'll do a little </span><span class="line" data-startTime="2067">scale, right? </span><span class="line" data-startTime="2069">That's going to work, </span><span class="line" data-startTime="2069">isn't it? </span><span class="line" data-startTime="2071">Yeah, no. </span> <span class="line" data-startTime="2074">WebKit browsers introduced </span><span class="line" data-startTime="2074">this thing called the </span><span class="line" data-startTime="2077">webkitBackingStorePixelRatio. </span></p>

<p><span class="line" data-startTime="2081">Say that 10 times fast. </span> <span class="line" data-startTime="2083">And the </span><span class="line" data-startTime="2083">WebkitBackingStorePixelRatio </span><span class="line" data-startTime="2087">always will return one, except </span><span class="line" data-startTime="2087">in Safari on the desktop on a </span><span class="line" data-startTime="2093">Mac Pro Retina. </span> <span class="line" data-startTime="2096">So it's literally one case that </span><span class="line" data-startTime="2096">we need to deal with this </span><span class="line" data-startTime="2099">on, where it returns two, </span><span class="line" data-startTime="2099">because it's a 2x display. </span> <span class="line" data-startTime="2104">They say, oh, hey, this </span><span class="line" data-startTime="2104">is a big device. </span> <span class="line" data-startTime="2106">We should be able </span><span class="line" data-startTime="2106">to automatically </span><span class="line" data-startTime="2108">scale it for you. </span></p>

<p><span class="line" data-startTime="2109">So they scale it for us. </span> <span class="line" data-startTime="2111">So we just want to double check </span><span class="line" data-startTime="2111">what that value is so </span><span class="line" data-startTime="2113">that we don't have to </span><span class="line" data-startTime="2113">go scale it again. </span> <span class="line" data-startTime="2116">Because we don't want to </span><span class="line" data-startTime="2116">necessarily scale it to four </span><span class="line" data-startTime="2119">times as big and use four </span><span class="line" data-startTime="2119">times as much memory. </span> <span class="line" data-startTime="2122">Now, the good thing here is that </span><span class="line" data-startTime="2122">Apple just checked in a </span><span class="line" data-startTime="2126">change a couple of weeks ago &mdash; </span><span class="line" data-startTime="2128">in fact, just at the </span><span class="line" data-startTime="2128">end of April &mdash; </span><span class="line" data-startTime="2130">that changes this behavior. </span> <span class="line" data-startTime="2132">So we won't have to deal with </span><span class="line" data-startTime="2132">this in the near future. </span> <span class="line" data-startTime="2137">But for now, this is something </span><span class="line" data-startTime="2137">that we need to check. </span></p>

<p><span class="line" data-startTime="2142">So there's one last thing I want </span><span class="line" data-startTime="2142">to cover before we start </span><span class="line" data-startTime="2144">to wrap up a little bit. </span> <span class="line" data-startTime="2146">And that's just making sure that </span><span class="line" data-startTime="2146">you serve high res icon </span><span class="line" data-startTime="2149">files on all of your websites. </span> <span class="line" data-startTime="2153">All of you have been probably </span><span class="line" data-startTime="2153">playing on your Pixels, and </span><span class="line" data-startTime="2155">you've noticed some of those </span><span class="line" data-startTime="2155">icon files look like &mdash; </span><span class="line" data-startTime="2158">yeah, it's not pretty, right? </span><span class="line" data-startTime="2160">So making sure that in your ICO </span><span class="line" data-startTime="2160">file, the multi-resolution </span><span class="line" data-startTime="2164">file, you've got a 32 pixel by </span><span class="line" data-startTime="2164">32 pixel and a 16 by 16 pixel. </span> <span class="line" data-startTime="2169">And if you're serving up PNG, </span><span class="line" data-startTime="2169">you want to make sure that </span><span class="line" data-startTime="2171">you're serving a 32 </span><span class="line" data-startTime="2171">pixel as well. </span> <span class="line" data-startTime="2175">So John and I went through and </span><span class="line" data-startTime="2175">spent a lot of time as we were </span><span class="line" data-startTime="2182">preparing for this. </span> <span class="line" data-startTime="2182">We realized that there were </span><span class="line" data-startTime="2182">really seven things. </span> <span class="line" data-startTime="2186">You can boil this whole talk </span><span class="line" data-startTime="2186">down to seven main points. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2190"><span class="speakerName">John Mellor</span>: Mmhmm. </span> <span class="line" data-startTime="2191">So yes, if you set </span><span class="line" data-startTime="2191">width=device-width on your </span><span class="line" data-startTime="2194">viewports, your CSS pixels will </span><span class="line" data-startTime="2194">initially be the same </span><span class="line" data-startTime="2197">size as your DIPs, your Device </span><span class="line" data-startTime="2197">Independent Pixels. </span> <span class="line" data-startTime="2200">And so you won't have to worry </span><span class="line" data-startTime="2200">about the two kinds of pixels </span><span class="line" data-startTime="2203">until you zoom in. </span> <span class="line" data-startTime="2204">But even then, you don't need </span><span class="line" data-startTime="2204">to care about that too much. </span> <span class="line" data-startTime="2206">So life will be easier. </span> <span class="line" data-startTime="2208">If instead you set no viewports </span><span class="line" data-startTime="2208">at all, or you try </span><span class="line" data-startTime="2212">to set a fixed-width viewport or </span><span class="line" data-startTime="2212">something, you're going to </span><span class="line" data-startTime="2214">be in a world of hurt. </span> <span class="line" data-startTime="2216">Your fonts are going to </span><span class="line" data-startTime="2216">get scaled weirdly. </span> <span class="line" data-startTime="2217">Your site may get </span><span class="line" data-startTime="2217">scaled weirdly. </span> <span class="line" data-startTime="2218">Your zoom's going to </span><span class="line" data-startTime="2218">be a bit weird. </span> <span class="line" data-startTime="2220">Yeah, try and stick to </span><span class="line" data-startTime="2220">width=device-width </span><span class="line" data-startTime="2222">whenever you can. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2227"><span class="speakerName">Pete LePage</span>: I'm going </span><span class="line" data-startTime="2227">to show you two. </span><span class="line" data-startTime="2230">That device pixel ratio varies </span><span class="line" data-startTime="2230">anywhere from 1.3 up to 3. </span><span class="line" data-startTime="2235">Somebody's probably before </span><span class="line" data-startTime="2235">4 at some point. </span><span class="line" data-startTime="2238">John laughs at me when I say </span><span class="line" data-startTime="2238">somebody's probably going to </span><span class="line" data-startTime="2240">do 5 or 7 or 10, because </span><span class="line" data-startTime="2240">somebody's just got to </span><span class="line" data-startTime="2242">outclass somebody else, </span><span class="line" data-startTime="2242">but it's true. </span></p>

<p class="speaker"><span class="line" data-starttime="2247"><span class="speakerName">John Mellor</span>: So whenever </span><span class="line" data-startTime="2247">possible, use </span><span class="line" data-startTime="2248">vector image formats. </span><span class="line" data-startTime="2250">They'll automatically scale and </span><span class="line" data-startTime="2250">rendered more crisply on </span><span class="line" data-startTime="2253">the high DPI devices using </span><span class="line" data-startTime="2253">the appropriate pixels. </span></p>

<p class="speaker"><span class="line" data-starttime="2258"><span class="speakerName">Pete LePage</span>: Use the media </span><span class="line" data-startTime="2258">queries whenever you can. </span><span class="line" data-startTime="2260">It's a real easy way to specify </span><span class="line" data-startTime="2264">the appropriate images. </span></p>

<p class="speaker"><span class="line" data-starttime="2266"><span class="speakerName">John Mellor</span>: For images in your </span><span class="line" data-startTime="2266">HTML, it's a reasonable </span><span class="line" data-startTime="2269">option to serve highly </span><span class="line" data-startTime="2269">compressed 2x images and not </span><span class="line" data-startTime="2273">worry about serving different </span><span class="line" data-startTime="2273">images to different devices. </span></p>

<p class="speaker"><span class="line" data-starttime="2277"><span class="speakerName">Pete LePage</span>: And finally for </span><span class="line" data-startTime="2277">canvas, just beware of that </span><span class="line" data-startTime="2279">webkitBackingStorePixelRatio. </span><span class="line" data-startTime="2282">You don't want to end up scaling </span><span class="line" data-startTime="2282">stuff multiple times </span><span class="line" data-startTime="2284">and going from there. </span><span class="line" data-startTime="2287">Now, the other thing that we </span><span class="line" data-startTime="2287">wanted to mention was that the </span><span class="line" data-startTime="2290">I/O organizers were like, you </span><span class="line" data-startTime="2290">must have a call to action at </span><span class="line" data-startTime="2294">the end of every session. </span><span class="line" data-startTime="2294">They were sort of adamant </span><span class="line" data-startTime="2294">about it. </span><span class="line" data-startTime="2296">Well, ours is really simple. </span><span class="line" data-startTime="2298">Go build beautiful. </span><span class="line" data-startTime="2300">Go make the web look </span><span class="line" data-startTime="2300">pretty, please. </span><span class="line" data-startTime="2303">You guys all have Pixels. </span><span class="line" data-startTime="2304">You all have friends with </span><span class="line" data-startTime="2304">high DPI displays. </span><span class="line" data-startTime="2307">Just go make the </span><span class="line" data-startTime="2307">web look nice. </span><span class="line" data-startTime="2310">So with that, I want to say </span><span class="line" data-startTime="2310">thank you guys very much. </span></p>

<p class="speaker"><span class="line" data-starttime="2315"><span class="speakerName">John Mellor</span>: Thank you all. </span></p>

<p class="speaker"><span class="line" data-starttime="2316"><span class="speakerName">Pete LePage</span>: Our slides </span><span class="line" data-startTime="2316">are linked up there. </span><span class="line" data-startTime="2317">John and I are going to head up </span><span class="line" data-startTime="2317">to the Four Questions Bar, </span><span class="line" data-startTime="2321">and like good bartenders, </span><span class="line" data-startTime="2321">we're going </span><span class="line" data-startTime="2323">to answer your questions. </span><span class="line" data-startTime="2324">Sadly, we're not going to be </span><span class="line" data-startTime="2324">that good bartenders and won't </span><span class="line" data-startTime="2327">be serving you booze. </span><span class="line" data-startTime="2328">That was last night. </span><span class="line" data-startTime="2329">But we'll do our best to answer </span><span class="line" data-startTime="2329">all your questions and </span><span class="line" data-startTime="2332">provide anything else </span><span class="line" data-startTime="2332">that we can for you. </span><span class="line" data-startTime="2334">So thanks everybody. </span><span class="line" data-startTime="2335">[APPLAUSE] </span></p>