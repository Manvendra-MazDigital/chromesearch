<p class="speaker"><span class="line" data-starttime="2"><span class="speakerName">Ilya Grogorik</span>: Hi everyone. My name is Ilya </span><span class="line" data-startTime="2">Grigorik. I'm a developer advocate with the </span><span class="line" data-startTime="6">make the web fast team at Google. One of the </span><span class="line" data-startTime="6">projects we have is the PageSpeed family of </span><span class="line" data-startTime="12">products that can help you both automate web </span><span class="line" data-startTime="12">performance and also give you insights about </span><span class="line" data-startTime="16">what are the kinds of things you can do to </span><span class="line" data-startTime="16">improve the performance of your applications. </span> <span class="line" data-startTime="21">So first of all, why do we need this? Why </span><span class="line" data-startTime="21">does web performance matter? It is more to </span><span class="line" data-startTime="27">start at the beginning, motivate the use case. </span> <span class="line" data-startTime="27">First of all, as you saw during the keynote. </span> <span class="line" data-startTime="32">The web of today, the things we are building </span><span class="line" data-startTime="32">on the web are much more ambitious and more </span><span class="line" data-startTime="35">powerful and more complex, in many ways, and </span><span class="line" data-startTime="35">speed is a feature. We are increasingly hearing </span><span class="line" data-startTime="42">this from our partners that are connecting </span><span class="line" data-startTime="42">performance to bottom line things like revenue </span><span class="line" data-startTime="48">and engagement &mdash; user engagement and other </span><span class="line" data-startTime="48">things. This is not just something that we </span><span class="line" data-startTime="54">feel is getting more complex. In fact, we </span><span class="line" data-startTime="54">can show this. There's a great project called </span><span class="line" data-startTime="59">HP archive which crawls the web and gathers </span><span class="line" data-startTime="59">statistics about how the web is constructed </span><span class="line" data-startTime="65">and how it is changing over time. And what </span><span class="line" data-startTime="65">this graph shows you very clearly is that </span><span class="line" data-startTime="68">the complexity of our pages, the amount of </span><span class="line" data-startTime="68">HTML, JavaScript, the markup we are putting </span><span class="line" data-startTime="73">on our pages is growing very, very fast. If </span><span class="line" data-startTime="73">anything, if you look at this number here, </span><span class="line" data-startTime="78">an average page on the web today is over one </span><span class="line" data-startTime="78">megabyte in size for desktop size and 700 </span><span class="line" data-startTime="83">kilobytes in mobile, which is very large. </span></p>

<p><span class="line" data-startTime="83">Most of that is actually images. So if nothing </span><span class="line" data-startTime="89">else, this is a real interesting insight to </span><span class="line" data-startTime="89">say you should optimize your images or 60% </span><span class="line" data-startTime="94">of all the bytes are images. That's the first </span><span class="line" data-startTime="94">constant. The web is getting &mdash; we are building </span><span class="line" data-startTime="99">more ambitious applications and they are more </span><span class="line" data-startTime="99">complex. The other interesting thing is that </span><span class="line" data-startTime="103">despite the ever-increasing speed of and demand </span><span class="line" data-startTime="103">from users for performance and other things, </span><span class="line" data-startTime="110">an accelerating pace of life, or so it seems, </span><span class="line" data-startTime="110">there are some pretty good constants. There's </span><span class="line" data-startTime="114">good research that shows in order to feel </span><span class="line" data-startTime="114">instant, an interaction needs to be acknowledged </span><span class="line" data-startTime="119">back to the user within basically a couple </span><span class="line" data-startTime="119">hundred milliseconds. If you respond within </span><span class="line" data-startTime="124">200 milliseconds, it feels nearly instant. </span></p>

<p><span class="line" data-startTime="124">Then there is that kind of gray zone around </span><span class="line" data-startTime="129">one second where the user is still engaged </span><span class="line" data-startTime="129">in the task when they click the button but </span><span class="line" data-startTime="134">after you cross that one-second threshold, </span><span class="line" data-startTime="134">you lose the context as a user. So all of </span><span class="line" data-startTime="140">the sudden your context switch, oh, yeah, </span><span class="line" data-startTime="140">I have to send an email to Bob, and follow </span><span class="line" data-startTime="143">up with Jamie. Before you know it, you lost </span><span class="line" data-startTime="143">track of your user, right? And if you go anywhere </span><span class="line" data-startTime="151">above that, basically the user gets disengaged. </span> <span class="line" data-startTime="151">The goal for us is to render pages within </span><span class="line" data-startTime="157">one second and preferably actually much faster, </span><span class="line" data-startTime="157">right? We want a seamless experience for our </span><span class="line" data-startTime="161">easers. That's something we care a lot about </span><span class="line" data-startTime="161">at Google. This is great, right? We have this </span><span class="line" data-startTime="166">research, but you might be something at this </span><span class="line" data-startTime="166">point, that's great and all, but really does </span><span class="line" data-startTime="172">it matter? Does it affect my site? The answer </span><span class="line" data-startTime="172">is yes, it does. There are a number of case </span><span class="line" data-startTime="177">studies out there. This was a case study done. </span> <span class="line" data-startTime="177">This was a joint research project between </span><span class="line" data-startTime="182">Google and Bing. What we had done is we actually </span><span class="line" data-startTime="182">slowed down &mdash; intentionally slowed down our </span><span class="line" data-startTime="187">search pages. The results that you are seeing </span><span class="line" data-startTime="187">here are actually from Bing.com where they </span><span class="line" data-startTime="191">added extra latency into their search pages. </span></p>

<p><span class="line" data-startTime="191">They just measured, how does that impact the </span><span class="line" data-startTime="196">use behavior on the site. Do they click more </span><span class="line" data-startTime="196">or less and other things, right? What you </span><span class="line" data-startTime="203">can see is basically there's a lot of red. </span> <span class="line" data-startTime="203">There's a lot of negative signs, and when </span><span class="line" data-startTime="207">the add 2,000 milliseconds, two seconds, the </span><span class="line" data-startTime="207">per-user dropped by 4.3%, which is, of course, </span><span class="line" data-startTime="214">a huge number for a big site like Bing and </span><span class="line" data-startTime="214">Google search. Now, this is not only applicable </span><span class="line" data-startTime="219">to large sites, like search sites, but also </span><span class="line" data-startTime="219">across the web in general. This is a great </span><span class="line" data-startTime="223">case study done by [indiscernible] which looked </span><span class="line" data-startTime="223">at 160 large e-commerce sites. What they found </span><span class="line" data-startTime="229">was that adding one second of extra delay </span><span class="line" data-startTime="229">decreased the user conversions. 7%. Fewer </span><span class="line" data-startTime="237">page views and obviously the customer satisfaction </span><span class="line" data-startTime="237">also dropped quite dramatically. So very quickly </span><span class="line" data-startTime="244">this translates into real dollar. This is </span><span class="line" data-startTime="244">not just dollars and cents, this is millions </span><span class="line" data-startTime="248">of dollars for many large sites. And I think </span><span class="line" data-startTime="248">you'll find this is true for your site as </span><span class="line" data-startTime="254">well. So out of that, of course, we have the </span><span class="line" data-startTime="254">web performance optimization industry, or </span><span class="line" data-startTime="258">WPO industry if you have been following the </span><span class="line" data-startTime="258">space. The basic premise of the WPO industry </span><span class="line" data-startTime="264">is we have this waterfall graph. We are using </span><span class="line" data-startTime="264">a lot of requests, 86 requests an average, </span><span class="line" data-startTime="271">for an average page, over one megabyte. What </span><span class="line" data-startTime="271">can we do to this waterfall graph to make </span><span class="line" data-startTime="276">everything look faster? Can we download less? </span><span class="line" data-startTime="276">Can we execute the code faster? You heard </span><span class="line" data-startTime="281">about the great improvements that we are doing </span><span class="line" data-startTime="281">in JavaScript space and rendering performance </span><span class="line" data-startTime="284">in Chrome. What else can we do as app developers? </span><span class="line" data-startTime="284">The platform can advance, but we can do a </span><span class="line" data-startTime="290">lot of things as developers to optimize this. </span></p>

<p><span class="line" data-startTime="290">Of course, there are a lot of best practices </span><span class="line" data-startTime="298">out there, a lot of good tips about how to </span><span class="line" data-startTime="298">optimize this kind of thing. Great books by </span><span class="line" data-startTime="303">Steve Seibers and others. We have techniques </span><span class="line" data-startTime="303">that I think many of us already do in our </span><span class="line" data-startTime="307">applications and things like image compression </span><span class="line" data-startTime="307">resizing, minimizing assets, caching. The </span><span class="line" data-startTime="313">laundry list goes on and on and on and the </span><span class="line" data-startTime="313">question at this point, of course, great. </span> <span class="line" data-startTime="318">We have the industry. We have all the best </span><span class="line" data-startTime="318">practices, so why isn't it that all the web </span><span class="line" data-startTime="323">sites are fast by default? I think the answer </span><span class="line" data-startTime="323">here is that a lot of these practices around </span><span class="line" data-startTime="329">performance can actually slow you down in </span><span class="line" data-startTime="329">other ways. For example, doing things like </span><span class="line" data-startTime="334">image spreading means that you need to talk </span><span class="line" data-startTime="334">to your designers and get them think about </span><span class="line" data-startTime="338">image formats and invest in build tool chain </span><span class="line" data-startTime="338">and a lot of these things, frankly, are hacked. </span> <span class="line" data-startTime="345">They slow us down. We want to build features, </span><span class="line" data-startTime="345">we want to focus on features in our apps. </span> <span class="line" data-startTime="352">Not necessarily think about minute details </span><span class="line" data-startTime="352">of should I concatenate these back and forth. </span> <span class="line" data-startTime="357">It's a trade-off,right. It's a feature. It's </span><span class="line" data-startTime="357">a feature that requires a lot of investment. </span></p>

<p><span class="line" data-startTime="363">It is not something you add at the end. You </span><span class="line" data-startTime="363">don't build your app and at the end say, yeah, </span><span class="line" data-startTime="370">we're going to do a performance print to clean </span><span class="line" data-startTime="370">it up, right? That's how you get it wrong. </span> <span class="line" data-startTime="374">It needs to be part of your culture. It needs </span><span class="line" data-startTime="374">to be part of the tool chain. So it's a continuous </span><span class="line" data-startTime="378">process. So that's what PageSpeed is all about. </span> <span class="line" data-startTime="378">We do three things. PageSpeed tries to help </span><span class="line" data-startTime="384">you identify what are the potential performance </span><span class="line" data-startTime="384">problems currently on your site? Think of </span><span class="line" data-startTime="388">it as a performance Linter for your application. </span> <span class="line" data-startTime="388">Second one is just explaining and providing </span><span class="line" data-startTime="394">guidance for how do you address these problems. </span> <span class="line" data-startTime="394">The last one, which I think is the most exciting, </span><span class="line" data-startTime="399">is the automation part. We can actually take </span><span class="line" data-startTime="399">a way a lot of the day-to-day work that you </span><span class="line" data-startTime="405">have to do and do it for you, which is great. </span> <span class="line" data-startTime="405">So the rest of this talk is split into two </span><span class="line" data-startTime="411">parts. First we will look at the analysis </span><span class="line" data-startTime="411">and then the optimization parts. </span> <span class="line" data-startTime="416">On the analysis part, we have a number of </span><span class="line" data-startTime="416">different options that you should play with. </span></p>

<p><span class="line" data-startTime="422">And each one is good in a different context. </span> <span class="line" data-startTime="422">We will cover each. And then there's a number </span><span class="line" data-startTime="425">of optimization products. So we have a plug-ins </span><span class="line" data-startTime="425">for your servers that you can install that </span><span class="line" data-startTime="430">will automate a lot of these best practices. </span> <span class="line" data-startTime="430">Let's dive in. Let's start with the analysis </span><span class="line" data-startTime="435">part and look at PageSpeed Insights. PageSpeed </span><span class="line" data-startTime="435">Insights is an extension that you can install </span><span class="line" data-startTime="440">in Google Chrome. Go need to go to the Chrome </span><span class="line" data-startTime="440">store, search for PageSpeed Insights. You </span><span class="line" data-startTime="445">will get a new panel in your DevTools that </span><span class="line" data-startTime="445">will give you a lot of nice performance tips. </span> <span class="line" data-startTime="450">Let's actually do a live demo. I was getting </span><span class="line" data-startTime="450">a little hungry earlier today. Looking at </span><span class="line" data-startTime="456">redrobin.com, beautiful site, beautiful images. </span> <span class="line" data-startTime="456">Nice little gallery here. Let's open up DevTools. </span> <span class="line" data-startTime="463">I have the PageSpeed insights extension installed. </span> <span class="line" data-startTime="463">I should click here. I can click analyze. </span></p>

<p><span class="line" data-startTime="470">What it will do, it will reload the page. </span> <span class="line" data-startTime="470">It will basically monitor all the network </span><span class="line" data-startTime="474">traffic, all of the assets that you're specifying </span><span class="line" data-startTime="474">on the page and run a number different rules </span><span class="line" data-startTime="480">against them and checks against them. So you </span><span class="line" data-startTime="480">can see, great, here's our report. This page </span><span class="line" data-startTime="485">got a score of 49 out of 100. That immediately </span><span class="line" data-startTime="485">tells me there's room for improvement. The </span><span class="line" data-startTime="491">real interesting stuff is actually here on </span><span class="line" data-startTime="491">the left. So if you pay attention here, right, </span><span class="line" data-startTime="494">we basically prioritize a lot of recommendations </span><span class="line" data-startTime="494">on the left saying there's some high priority </span><span class="line" data-startTime="500">things you can take care of right now to help </span><span class="line" data-startTime="500">optimize your page and then there's other </span><span class="line" data-startTime="504">stuff. Let's start at the top. Optimize images. </span> <span class="line" data-startTime="504">It turns out this Red Robin page is actually </span><span class="line" data-startTime="510">about 10 megabytes in size every time you </span><span class="line" data-startTime="510">load it. So &mdash; and we will come back to why </span><span class="line" data-startTime="516">"every time you load it." By optimizing images, </span><span class="line" data-startTime="516">it turns out that red Robin is actually using </span><span class="line" data-startTime="522">PNG images for the beautiful gallery. By just </span><span class="line" data-startTime="522">converting that to a jpeg or a webp, as you </span><span class="line" data-startTime="528">heard during the keynote, we can save 50% </span><span class="line" data-startTime="528">of the bytes sent for this page. We can reduce </span><span class="line" data-startTime="533">the total size of the page is 4.7 megabytes. </span></p>

<p><span class="line" data-startTime="533">This is a huge amount. Think of the difference </span><span class="line" data-startTime="539">this will make both in speed on desktop and </span><span class="line" data-startTime="539">on mobile. One cool little tip that I like </span><span class="line" data-startTime="545">to share PageSpeed insights, how do we know </span><span class="line" data-startTime="545">that we can save all this data? What PageSpeed </span><span class="line" data-startTime="550">insights does is it takes the images and actually </span><span class="line" data-startTime="550">optimizes it when you run the analysis. It </span><span class="line" data-startTime="555">can give you the optimized assets. So you </span><span class="line" data-startTime="555">have this original picture here, right? We </span><span class="line" data-startTime="559">can click on this guy. If I can go back, I </span><span class="line" data-startTime="559">click on see optimize content. This is the </span><span class="line" data-startTime="567">optimized version. Can you guys see the difference </span><span class="line" data-startTime="567">between the two? It's a lot smaller. Right? </span><span class="line" data-startTime="573">It's about 1.5 megabytes smaller. Right there </span><span class="line" data-startTime="573">and then, you can right click on that image </span><span class="line" data-startTime="578">and save it into your application and be done </span><span class="line" data-startTime="578">with it. Right? Step number one, optimizing </span><span class="line" data-startTime="583">images. Then you continue going down the list. </span> <span class="line" data-startTime="583">Things like browser caching. So it turns out </span><span class="line" data-startTime="587">we analyzed all of the assets. This site is </span><span class="line" data-startTime="587">not specifying cache control headers. Every </span><span class="line" data-startTime="593">time you visit the page, you have refetch </span><span class="line" data-startTime="593">all of the CSS, JavaScript and the images. </span></p>

<p><span class="line" data-startTime="598">Instead we should be able to cache on a client. </span> <span class="line" data-startTime="598">So very simple thing to fix. If you are not </span><span class="line" data-startTime="603">sure what this actually means or how to do </span><span class="line" data-startTime="603">this, click on learn more, it will take you </span><span class="line" data-startTime="607">to the documentation slide to explain that. </span> <span class="line" data-startTime="607">Enabling compression, so it turns out &mdash; we </span><span class="line" data-startTime="612">talked about images compression. But for text-based </span><span class="line" data-startTime="612">assets, things like JavaScript and CSS, the </span><span class="line" data-startTime="617">site also doesn't have JSUP enabled. There's </span><span class="line" data-startTime="617">a lot of savings we can get here. We also </span><span class="line" data-startTime="623">found that there's a lot of small images. </span> <span class="line" data-startTime="623">You can put this into a Sprite. You can minimize </span><span class="line" data-startTime="628">JavaScript to get more performance. You can </span><span class="line" data-startTime="628">see how just going through this list, this </span><span class="line" data-startTime="632">is your performance Linter. You can run this </span><span class="line" data-startTime="632">against any web site, your own site, locally </span><span class="line" data-startTime="637">or elsewhere. </span> <span class="line" data-startTime="637">So really, really nice tool. This is effectively </span><span class="line" data-startTime="641">when we just went through. That's the PageSpeed </span><span class="line" data-startTime="641">extension. You can install it, run it against </span><span class="line" data-startTime="646">any app locally or remote. That's great. We </span><span class="line" data-startTime="646">also provide the web tools. If you are just </span><span class="line" data-startTime="651">curious to play with it, you can go to our </span><span class="line" data-startTime="651">developers.google.com/speed site. You can </span><span class="line" data-startTime="658">type in any website and we will run all the </span><span class="line" data-startTime="658">same rules against that site and give you </span><span class="line" data-startTime="662">a report card. As you can see here, it all </span><span class="line" data-startTime="662">looks the same. All the same high priority </span><span class="line" data-startTime="667">recommendations. That's because it's the same </span><span class="line" data-startTime="667">code running under the hood. But great way </span><span class="line" data-startTime="671">to capture this. I can send this to my buddies </span><span class="line" data-startTime="671">and say, hey, we've got a performance problem. </span></p>

<p><span class="line" data-startTime="677">We have to address it. If nothing else, a </span><span class="line" data-startTime="677">great way to play with it. </span> <span class="line" data-startTime="683">And finally we also have the PageSpeed insights </span><span class="line" data-startTime="683">API. This is great if you really want to take </span><span class="line" data-startTime="688">it to the next level. So now you have some </span><span class="line" data-startTime="688">built infrastructure, you're checking in code, </span><span class="line" data-startTime="693">you have continues builds kicking off every </span><span class="line" data-startTime="693">time you check in code. You can actually script </span><span class="line" data-startTime="698">this and use our PageSpeed rule engine to </span><span class="line" data-startTime="698">run a number of checks against your code or </span><span class="line" data-startTime="702">against your site periodically and basically </span><span class="line" data-startTime="702">build a performance report. We have things </span><span class="line" data-startTime="706">like &mdash; you can specify strategy. So you can </span><span class="line" data-startTime="706">say, I want to evaluate the rules against </span><span class="line" data-startTime="711">desktop site and mobile site. We have slightly </span><span class="line" data-startTime="711">different rule sets for mobile, for obvious </span><span class="line" data-startTime="715">reasons, right? It's a very different environment. </span></p>

<p><span class="line" data-startTime="715">I want to check for a specific type of rule. </span> <span class="line" data-startTime="720">For example, I want to make sure all the images </span><span class="line" data-startTime="720">optimized. There's a lot of fine grain control. </span> <span class="line" data-startTime="724">And a lot of tools are integrating or using </span><span class="line" data-startTime="724">PageSpeed Insights API to pull in that extra </span><span class="line" data-startTime="728">meta data. This is a regular Google API. There's </span><span class="line" data-startTime="728">no extra quirks to it. This is just a quick </span><span class="line" data-startTime="734">example in ruby. Really, really handy. So </span><span class="line" data-startTime="734">that's a very quickly an overview of what </span><span class="line" data-startTime="740">you can do by just leveraging PageSpeed to </span><span class="line" data-startTime="740">find performance problems, right? PageSpeed </span><span class="line" data-startTime="746">insights gives you that hands on look. You </span><span class="line" data-startTime="746">can use the web or the native version. And </span><span class="line" data-startTime="753">then you can use the API to script this stuff </span><span class="line" data-startTime="753">and automate a lot of this work. </span> <span class="line" data-startTime="757">Now, we built a rule engine that can scan </span><span class="line" data-startTime="757">your pages. It can track what things you should </span><span class="line" data-startTime="764">do. Can't we just do it for you? Like we have </span><span class="line" data-startTime="764">already given you all of this practices. Giving </span><span class="line" data-startTime="769">you the images. Let's go one step further, </span><span class="line" data-startTime="769">right? That's what PageSpeed Optimization </span><span class="line" data-startTime="773">is all about. So we have this core project, </span><span class="line" data-startTime="773">an open source project that can be leveraged </span><span class="line" data-startTime="778">as part of any web server called PageSpeed </span><span class="line" data-startTime="778">Optimization Libraries. It's basically a set </span><span class="line" data-startTime="783">of C++ classes that takes in some input, say </span><span class="line" data-startTime="783">a style sheet or an image file or something </span><span class="line" data-startTime="789">else, and then optimizes that based on a number </span><span class="line" data-startTime="789">of criteria. So how does this actually look? </span><span class="line" data-startTime="796">The way I think about PageSpeed Optimization </span><span class="line" data-startTime="796">is as a performance jit for your site. Just </span><span class="line" data-startTime="803">like V8 takes your JavaScript and does all </span><span class="line" data-startTime="803">kinds of crazy optimizations to make it run </span><span class="line" data-startTime="809">fast, that's what we do on the server except </span><span class="line" data-startTime="809">we are rewriting and optimizing your JavaScript </span><span class="line" data-startTime="815">CSS images and html. All of that is automated </span><span class="line" data-startTime="815">for you. So you don't have to change your </span><span class="line" data-startTime="821">application. I think that's the real exciting </span><span class="line" data-startTime="821">part. We have a ton of sites, over 400,000 </span><span class="line" data-startTime="826">sites using PageSpeed today already and there </span><span class="line" data-startTime="826">is a lot of different filters that will do </span><span class="line" data-startTime="832">this work. So let's take a look at what it </span><span class="line" data-startTime="832">actually does. At a very high level, I have </span><span class="line" data-startTime="837">intentionally made these graphs really, really </span><span class="line" data-startTime="837">tiny. The point is not to focus on what are </span><span class="line" data-startTime="842">each of the assets. But basically, once you </span><span class="line" data-startTime="842">turn on PageSpeed this is hopefully what you </span><span class="line" data-startTime="847">see. We try to reduce the number of requests </span><span class="line" data-startTime="847">by concatenating files and applying all the </span><span class="line" data-startTime="852">best practices. It's a better experience for </span><span class="line" data-startTime="852">the user. </span></p>

<p><span class="line" data-startTime="867">So once again, the cool thing about this is </span><span class="line" data-startTime="867">you don't have to modify your application. </span> <span class="line" data-startTime="870">We are not talking about adding more build </span><span class="line" data-startTime="870">steps. This is not something that you run </span><span class="line" data-startTime="874">on a check-in and it mangles your code and </span><span class="line" data-startTime="874">rewrites your code. You don't have to bug </span><span class="line" data-startTime="879">your designer buddies to say, hey, you should </span><span class="line" data-startTime="879">pay attention to image compression because </span><span class="line" data-startTime="884">all this is done on the server. This is especially </span><span class="line" data-startTime="884">awesome for things like user-generated content. </span> <span class="line" data-startTime="890">It's one thing for us as developers to build </span><span class="line" data-startTime="890">really optimized sites. Then we hand over </span><span class="line" data-startTime="894">the keys to our awesome, fast-performing sites </span><span class="line" data-startTime="894">to our users. They grab their awesome 50 megapixel </span><span class="line" data-startTime="900">or something camera, snap a couple photos </span><span class="line" data-startTime="900">of kittens, throw up the 80 MEG version on </span><span class="line" data-startTime="906">the web, there you are, right, downloading </span><span class="line" data-startTime="906">these high res images. We can automate that </span><span class="line" data-startTime="910">for you. </span> <span class="line" data-startTime="910">So here's an example, right? </span><span class="line" data-startTime="913">This is all really abstract. Let's take a </span><span class="line" data-startTime="913">look at a real example. Let's say you have </span><span class="line" data-startTime="917">some code like the one at the top here. So </span><span class="line" data-startTime="917">we have four different style sheets: yellow, </span><span class="line" data-startTime="922">blue, big, and bold. So we know that one of </span><span class="line" data-startTime="922">the best practices is we want to concatenate </span><span class="line" data-startTime="926">files to reduce the number of requests, such </span><span class="line" data-startTime="926">that it downloads faster. </span></p>

<p><span class="line" data-startTime="932">What PageSpeed will do is it will actually </span><span class="line" data-startTime="932">look at the HTML when the server is serving </span><span class="line" data-startTime="937">that HTML and it will actually rewrite all </span><span class="line" data-startTime="937">of those into this command at the bottom. </span> <span class="line" data-startTime="943">And basically this is like a &mdash; this tells </span><span class="line" data-startTime="943">us the exact thing that we need to do to reconstruct </span><span class="line" data-startTime="947">the entire asset, right? You can kind of decipher </span><span class="line" data-startTime="947">it. It basically says "I want you to combine </span><span class="line" data-startTime="951">yellow with blue with big with bold." Dot </span><span class="line" data-startTime="951">PageSpeed is just our extension that says </span><span class="line" data-startTime="956">to our module that "Hey, you should intercept </span><span class="line" data-startTime="956">it in the future." "cc" stands for combined </span><span class="line" data-startTime="961">CSS. And then we provide a fingerprint. And </span><span class="line" data-startTime="961">the fingerprint is important, because when </span><span class="line" data-startTime="968">you change later the contents of any one of </span><span class="line" data-startTime="968">these files and say blue.CSS, you don't want </span><span class="line" data-startTime="973">to think about like do I need to revalidate </span><span class="line" data-startTime="973">the cache, how does this even work with PageSpeed. </span></p>

<p><span class="line" data-startTime="977">We do all of that for you. We fingerprint </span><span class="line" data-startTime="977">each file such that the moment you change </span><span class="line" data-startTime="981">it we automatically rev the version of the </span><span class="line" data-startTime="981">file. You don't need to think about that. </span> <span class="line" data-startTime="986">There's no extra build steps there. </span> <span class="line" data-startTime="986">And the other cool thing is because we're </span><span class="line" data-startTime="989">fingerprinting this entire file, we can cache-extend </span><span class="line" data-startTime="989">it for a year, right? This plays really, really </span><span class="line" data-startTime="995">nicely with CDNs and all of your caches that </span><span class="line" data-startTime="995">you're running. Squid, Varnish, and other </span><span class="line" data-startTime="1001">things. </span> <span class="line" data-startTime="1001">So that's kind of a cute example with CSS. </span> <span class="line" data-startTime="1004">I think a more interesting one is images, </span><span class="line" data-startTime="1004">because images as we said is 60% of the bytes, </span><span class="line" data-startTime="1008">so what can we do there? </span><span class="line" data-startTime="1008">Well, let's take a look at this example. We </span><span class="line" data-startTime="1012">have an image which is an awesome cat image </span><span class="line" data-startTime="1012">and we want to display it at 800 pixels wide, </span><span class="line" data-startTime="1017">right? </span><span class="line" data-startTime="1017">Now, this is a PNG file and we know that PNGs </span><span class="line" data-startTime="1021">are not good for photos, right? They're not </span><span class="line" data-startTime="1021">the most efficient format for serving photos, </span><span class="line" data-startTime="1025">so that's already kind of a tipoff. Well, </span><span class="line" data-startTime="1025">what PageSpeed will do is it will in the background </span><span class="line" data-startTime="1030">take this PNG file which is right now 350 </span><span class="line" data-startTime="1030">kilobytes and it will try to recompress it </span><span class="line" data-startTime="1035">using other codecs. So JPEG and WebP. And </span><span class="line" data-startTime="1035">it will kind of stash those in the background, </span><span class="line" data-startTime="1040">right? So think of it as a background thread </span><span class="line" data-startTime="1040">just optimizing these images for you. We haven't </span><span class="line" data-startTime="1045">done anything yet. </span></p>

<p><span class="line" data-startTime="1045">Then a request comes to a server, and PageSpeed </span><span class="line" data-startTime="1049">will actually run a user agent check to say, </span><span class="line" data-startTime="1049">"Okay, this is a Chrome browser. Chrome understands </span><span class="line" data-startTime="1055">WebP, which means I can serve it a WebP file," </span><span class="line" data-startTime="1055">versus, "Hey, this is an IE user coming, you </span><span class="line" data-startTime="1063">know, an older client coming to my site. They </span><span class="line" data-startTime="1063">don't understand WebP so I'll serve a JPEG," </span><span class="line" data-startTime="1068">right? </span><span class="line" data-startTime="1068">And all of that is completely transparent </span><span class="line" data-startTime="1070">to the user and to your application. This </span><span class="line" data-startTime="1070">is done by the server. </span> <span class="line" data-startTime="1074">Then the next thing that we do is we're actually </span><span class="line" data-startTime="1074">much smarter than that. We look at the markup </span><span class="line" data-startTime="1079">and we notice that you said you want this </span><span class="line" data-startTime="1079">image to be 800 pixels wide, right? </span><span class="line" data-startTime="1084">We look at the image that's actually on disk </span><span class="line" data-startTime="1084">that you've given us and we say is it 800 </span><span class="line" data-startTime="1088">pixels wide or are you shipping the &mdash; you </span><span class="line" data-startTime="1088">know, the large image and resizing it on the </span><span class="line" data-startTime="1092">client? </span><span class="line" data-startTime="1092">Well, turns out because this is an awesome </span><span class="line" data-startTime="1094">cat picture, he's 8,000 pixels wide, right? </span><span class="line" data-startTime="1094">So you would ship the large version, resize </span><span class="line" data-startTime="1099">it on the client. Instead, we will resize </span><span class="line" data-startTime="1099">it on the server and serve the right image. </span> <span class="line" data-startTime="1104">So in the end, what PageSpeed will put in </span><span class="line" data-startTime="1104">your markup is kind of this cryptic URL at </span><span class="line" data-startTime="1109">the bottom which actually is not that cryptic </span><span class="line" data-startTime="1109">once you understand what it does. It's encoding </span><span class="line" data-startTime="1113">the size of the image, the name.PageSpeed.image </span><span class="line" data-startTime="1113">conversion and once again that half. So if </span><span class="line" data-startTime="1119">you change your version, we'll just run the </span><span class="line" data-startTime="1119">version. </span></p>

<p><span class="line" data-startTime="1122">And this basically automates the entire workflow. </span> <span class="line" data-startTime="1122">We went from PNG to serving a dynamic WebP </span><span class="line" data-startTime="1127">file, right? From 350 kilobytes to 60 kilobytes. </span> <span class="line" data-startTime="1127">And your application hasn't changed. Which </span><span class="line" data-startTime="1133">I think is the best part. </span> <span class="line" data-startTime="1133">So those are just two examples. We have over </span><span class="line" data-startTime="1137">40 different optimization filters as part </span><span class="line" data-startTime="1137">of PageSpeed. We can do things like rewriting </span><span class="line" data-startTime="1142">JavaScript, combining JavaScript. We can defer </span><span class="line" data-startTime="1142">JavaScript. So we find that a lot of pages </span><span class="line" data-startTime="1146">have blocking, CSS, and JavaScript files which </span><span class="line" data-startTime="1146">are blocking rendering. For example, social </span><span class="line" data-startTime="1152">widgets and all the rest. Which we can safely </span><span class="line" data-startTime="1152">defer until later such that the page paints </span><span class="line" data-startTime="1156">and then we add the extra functionality, things </span><span class="line" data-startTime="1156">like social widgets and other things. </span> <span class="line" data-startTime="1161">Simple things &mdash; or actually they're not simple. </span></p>

<p><span class="line" data-startTime="1161">Things like lazy loading of images, right? </span><span class="line" data-startTime="1166">How many people here have tried doing lazy </span><span class="line" data-startTime="1166">loading of images. </span> <span class="line" data-startTime="1169">[ Show of hands ] </span></p>

<p class="speaker"><span class="line" data-starttime="1169"><span class="speakerName">Ilya Grigorik</span>: Right? It's a pain in the </span><span class="line" data-startTime="1170">butt, right? It's like which library do I </span><span class="line" data-startTime="1170">use and how do I detect the unscroll event? </span><span class="line" data-startTime="1176">When do I know it's in my viewport? We take </span><span class="line" data-startTime="1176">care of all of that, right? You basically </span><span class="line" data-startTime="1179">set one command line flag in your config and </span><span class="line" data-startTime="1179">we just do all of that work for you. </span> <span class="line" data-startTime="1185">So one thing to note is, of course, you know, </span><span class="line" data-startTime="1185">this doesn't come for free, necessarily, so </span><span class="line" data-startTime="1191">this runs on your server, and it does consume </span><span class="line" data-startTime="1191">some extra cycles. But all the optimizations </span><span class="line" data-startTime="1196">are done on demand. So for example, you come </span><span class="line" data-startTime="1196">and visit my gallery page. We will optimize </span><span class="line" data-startTime="1201">the images in the background. Our goal is </span><span class="line" data-startTime="1201">to make your site fast and sometimes optimizing </span><span class="line" data-startTime="1205">images may take a while, right? Like it may </span><span class="line" data-startTime="1205">take a couple hundred milliseconds. We're </span><span class="line" data-startTime="1209">not going to slow down your site. On the first </span><span class="line" data-startTime="1209">hit, we may actually serve the original image </span><span class="line" data-startTime="1215">because we don't want to block the client, </span><span class="line" data-startTime="1215">but on a subsequent visit, we will serve the </span><span class="line" data-startTime="1219">optimized assets and you guys will see this </span><span class="line" data-startTime="1219">in a second. </span></p>

<p><span class="line" data-startTime="1223">So the very cool thing about PageSpeed is, </span><span class="line" data-startTime="1223">of course, it's an open source project and </span><span class="line" data-startTime="1227">we have modules for Apache, Nginx, and we </span><span class="line" data-startTime="1227">have a Google hosted version which means that </span><span class="line" data-startTime="1231">we've had a lot of partners that have adopted </span><span class="line" data-startTime="1231">PageSpeed. And for example, DreamHost, GoDaddy, </span><span class="line" data-startTime="1237">and a number of other hosting providers basically </span><span class="line" data-startTime="1237">offer it as a toggle button for your Web site, </span><span class="line" data-startTime="1241">right? </span><span class="line" data-startTime="1241">You literally go into the control panel and, </span><span class="line" data-startTime="1243">just like it says, make my site fast. And </span><span class="line" data-startTime="1243">that's what it does. It enables PageSpeed </span><span class="line" data-startTime="1248">under the hood. </span> <span class="line" data-startTime="1248">We have CDNs, large CDNs that are deploying </span><span class="line" data-startTime="1251">this technology at the edge, such that they </span><span class="line" data-startTime="1251">can revalidate your assets on the fly for </span><span class="line" data-startTime="1255">you. And of course we're DogFooding it at </span><span class="line" data-startTime="1255">Google as well. </span></p>

<p><span class="line" data-startTime="1259">Earlier today at the keynote, you guys saw </span><span class="line" data-startTime="1259">Linus talk about Chrome data compression, </span><span class="line" data-startTime="1265">so the way that works is your phone connects </span><span class="line" data-startTime="1265">to a Google server when you send the request, </span><span class="line" data-startTime="1270">and then it's the Google servers that fetch </span><span class="line" data-startTime="1270">the content that you requested, we optimize </span><span class="line" data-startTime="1275">it, and serve you the optimized version, right? </span><span class="line" data-startTime="1275">Which gives us a huge savings in data compression </span><span class="line" data-startTime="1279">and other things. </span> <span class="line" data-startTime="1279">And the core of that is actually powered by </span><span class="line" data-startTime="1282">a lot of the PageSpeed logic that we've been </span><span class="line" data-startTime="1282">just talking about here, so we're reusing </span><span class="line" data-startTime="1286">that same technology to drive Chrome data </span><span class="line" data-startTime="1286">compression. </span> <span class="line" data-startTime="1290">And 50% data compression is a huge win for </span><span class="line" data-startTime="1290">a lot of users. Bytes are literally expensive </span><span class="line" data-startTime="1297">for a lot of people, right? </span><span class="line" data-startTime="1297">You can be charged as high as a dollar per </span><span class="line" data-startTime="1302">megabyte when you're roaming, so this stuff </span><span class="line" data-startTime="1302">adds up really quickly. </span> <span class="line" data-startTime="1305">So if you guys haven't tried it yet, I'd definitely </span><span class="line" data-startTime="1305">encourage you to. Go and download Chrome beta </span><span class="line" data-startTime="1310">from the apps store and go into your settings </span><span class="line" data-startTime="1310">and enable this and I think you'll notice </span><span class="line" data-startTime="1313">that your pages load much, much faster. </span></p>

<p><span class="line" data-startTime="1313">Which is yet more motivation to &mdash; for why </span><span class="line" data-startTime="1319">you need to optimize your pages. </span> <span class="line" data-startTime="1319">This is a great case study. AOL is rolling </span><span class="line" data-startTime="1324">out mod_pagespeed which is our Apache plug-in </span><span class="line" data-startTime="1324">for PageSpeed, and they're deploying it on </span><span class="line" data-startTime="1331">a number of sites. These are the two most </span><span class="line" data-startTime="1331">recent ones, both very high traffic sites. </span> <span class="line" data-startTime="1335">They enabled PageSpeed and they immediately </span><span class="line" data-startTime="1335">got 40% and 20% Page Load Time improvement </span><span class="line" data-startTime="1340">by just enabling PageSpeed, right? So no applications </span><span class="line" data-startTime="1340">changes. Everything is done by the Apache </span><span class="line" data-startTime="1344">server. Nice win. </span> <span class="line" data-startTime="1344">We've been working with ZippyKid, which is </span><span class="line" data-startTime="1350">a great hosting provider for Wordpress and </span><span class="line" data-startTime="1350">really focused on performance. We ran a number </span><span class="line" data-startTime="1354">of tests, so they're actually using the Nginx </span><span class="line" data-startTime="1354">plugin for their servers, and they found that, </span><span class="line" data-startTime="1360">you know, they're getting a speedup of over </span><span class="line" data-startTime="1360">50% and a huge reduction in savings. </span> <span class="line" data-startTime="1365">So it turns out that Wordpress sites are very </span><span class="line" data-startTime="1365">media heavy. Surprise, right? Like that's </span><span class="line" data-startTime="1369">&mdash; that shouldn't be a surprise. </span> <span class="line" data-startTime="1369">And you can see results like the one on the </span><span class="line" data-startTime="1373">&mdash; on the left here where the original site </span><span class="line" data-startTime="1373">was over 7 megabytes in size. Once we ran </span><span class="line" data-startTime="1377">the image optimization and other kind of best </span><span class="line" data-startTime="1377">practices, we're down to &mdash; let's see &mdash; 1 </span><span class="line" data-startTime="1383">megabyte and a little bit more, right? 1.4 </span><span class="line" data-startTime="1383">megabytes. </span></p>

<p><span class="line" data-startTime="1387">So huge, huge savings. </span> <span class="line" data-startTime="1387">So how do you get started? </span><span class="line" data-startTime="1392">The best place is actually to just go to mod_pagespeed.com </span><span class="line" data-startTime="1392">or Nginx_PageSpeed. I think those are &mdash; those </span><span class="line" data-startTime="1396">are two of the most popular servers out there. </span> <span class="line" data-startTime="1396">It's open source. You can grab it. You can </span><span class="line" data-startTime="1400">play with it. We provide the packaging for </span><span class="line" data-startTime="1400">it. You can basically grab the RPM and install </span><span class="line" data-startTime="1406">it and also a shout-out to a couple of community-developed </span><span class="line" data-startTime="1406">modules. So if you're using IIS server, you </span><span class="line" data-startTime="1414">can actually also use PageSpeed. There's a </span><span class="line" data-startTime="1414">great new project called IIS Speed that's </span><span class="line" data-startTime="1419">being developed and gives you the same functionality </span><span class="line" data-startTime="1419">within IIS. And also, the guys at LinkedIn </span><span class="line" data-startTime="1425">are running PageSpeed and they're using Apache </span><span class="line" data-startTime="1425">traffic server, so they're the ones developing </span><span class="line" data-startTime="1430">the Apache traffic server module, which I </span><span class="line" data-startTime="1430">think is really cool. </span> <span class="line" data-startTime="1433">So we're all building off the same core and </span><span class="line" data-startTime="1433">continuing to improve this infrastructure. </span> <span class="line" data-startTime="1440">So this is great, right? Like I have my Web </span><span class="line" data-startTime="1440">server. I can install this module. I can configure </span><span class="line" data-startTime="1445">it. I can do other things. </span> <span class="line" data-startTime="1445">But there's still more that I can do. I can </span><span class="line" data-startTime="1449">still deploy my assets to a CDN. I want to </span><span class="line" data-startTime="1449">have some protection against denial of service </span><span class="line" data-startTime="1455">attacks. And a number of other features. Wouldn't </span><span class="line" data-startTime="1455">it be nice if somebody did all of this work </span><span class="line" data-startTime="1459">for you? </span><span class="line" data-startTime="1459">And that, in effect, is what PageSpeed service </span><span class="line" data-startTime="1465">is. </span></p>

<p><span class="line" data-startTime="1465">So this is a beta product and project that </span><span class="line" data-startTime="1468">we have at Google today. You can sign up for </span><span class="line" data-startTime="1468">it. It's currently in beta. And the way it </span><span class="line" data-startTime="1473">works is, the traffic to your site is routed </span><span class="line" data-startTime="1473">through Google servers. </span> <span class="line" data-startTime="1478">So, you know, if you want to get technical, </span><span class="line" data-startTime="1478">you create &mdash; you cname your www domain to </span><span class="line" data-startTime="1485">point to Google servers, such that when users </span><span class="line" data-startTime="1485">type in, you know, www your site dot com, </span><span class="line" data-startTime="1490">they actually hit a Google server. The Google </span><span class="line" data-startTime="1490">server then goes to your server and requests </span><span class="line" data-startTime="1494">the actual content. It grabs that content, </span><span class="line" data-startTime="1494">does all of the optimization, saves all of </span><span class="line" data-startTime="1499">the optimized assets in the Google cloud, </span><span class="line" data-startTime="1499">in the Google CDN, and, you know, we have </span><span class="line" data-startTime="1503">a few servers around the world to do that </span><span class="line" data-startTime="1503">kind of thing, and serves the optimized assets. </span> <span class="line" data-startTime="1509">So you're getting the benefit of CDN and dynamic </span><span class="line" data-startTime="1509">optimization, which is really, really cool. </span></p>

<p><span class="line" data-startTime="1515">So I actually have it running on my site and </span><span class="line" data-startTime="1515">I want to show you guys a demo of how this </span><span class="line" data-startTime="1519">works in practice. </span> <span class="line" data-startTime="1519">So here I am. Here's my site. I have this </span><span class="line" data-startTime="1525">beautiful little gallery of, you know, my </span><span class="line" data-startTime="1525">favorite travel photos. I &mdash; I love them in </span><span class="line" data-startTime="1530">all of their high-res glory because I'm a </span><span class="line" data-startTime="1530">photographer and I would never think about, </span><span class="line" data-startTime="1535">you know, doing anything less, but I think </span><span class="line" data-startTime="1535">we can do a lot better, right? So if you go </span><span class="line" data-startTime="1539">to the network tab and if we just sort the </span><span class="line" data-startTime="1539">file size on the page, you can see that there's </span><span class="line" data-startTime="1543">three images, Tokyo, Oxford, and Aurora, weighing </span><span class="line" data-startTime="1543">in at about 3 megabytes and they're served </span><span class="line" data-startTime="1549">as PNG files. That's how I saved them as. </span> <span class="line" data-startTime="1549">I think we can do better. </span> <span class="line" data-startTime="1554">So I have PageSpeed service running on my </span><span class="line" data-startTime="1554">site. If I go to my Google API console, I'm </span><span class="line" data-startTime="1561">looking at the PageSpeed service tab here. </span> <span class="line" data-startTime="1561">Let's go to "Overview." So basically what's </span><span class="line" data-startTime="1566">happening here is here's my origin server, </span><span class="line" data-startTime="1566">PageSpeed server, so the Google servers are </span><span class="line" data-startTime="1570">in between, and if we go to configure rewriters, </span><span class="line" data-startTime="1570">this is where all of the magic happens, right? </span><span class="line" data-startTime="1576">We &mdash; we basically have a set of check boxes </span><span class="line" data-startTime="1576">and let me make that a little bit bigger. </span> <span class="line" data-startTime="1581">Oops, that's not blowing up. </span></p>

<p><span class="line" data-startTime="1581">We have a set of check boxes that just allow </span><span class="line" data-startTime="1585">you to apply optimizations without actually </span><span class="line" data-startTime="1585">modifying your app. So for example, I'm concerned </span><span class="line" data-startTime="1591">about images, so let's go into optimize images </span><span class="line" data-startTime="1591">and I want to do a few things. </span> <span class="line" data-startTime="1598">So I want to resize images on the server, </span><span class="line" data-startTime="1598">such that if I'm serving a file size of &mdash; or </span><span class="line" data-startTime="1602">an image that is larger than what I meant </span><span class="line" data-startTime="1602">to display, just optimize it for me. </span> <span class="line" data-startTime="1606">And also convert PNG files to JPEG. </span> <span class="line" data-startTime="1606">That sounds about like what I want, right? </span><span class="line" data-startTime="1612">I'm serving PNGs so let me save that. </span> <span class="line" data-startTime="1612">I'm going to apply this to the live site and </span><span class="line" data-startTime="1618">we're going to refresh the site. </span> <span class="line" data-startTime="1618">And we're actually going to do this twice. </span> <span class="line" data-startTime="1622">And the reason we do this twice is remember </span><span class="line" data-startTime="1622">what I said earlier, we don't want to slow </span><span class="line" data-startTime="1624">down the site? So the first time we may server </span><span class="line" data-startTime="1624">the unoptimized asset or the original asset, </span><span class="line" data-startTime="1630">but then on the next load, you can see that </span><span class="line" data-startTime="1630">the filename has changed. It now has this </span><span class="line" data-startTime="1634">PageSpeed URL and now it's being served as </span><span class="line" data-startTime="1634">a JPEG. So what PageSpeed service has done </span><span class="line" data-startTime="1639">&mdash; notice that I haven't &mdash; like I haven't </span><span class="line" data-startTime="1639">done anything on my site, right? The Google </span><span class="line" data-startTime="1642">cloud is handling all of this. It's rewritten </span><span class="line" data-startTime="1642">the image, it's fingerprinted the image, and </span><span class="line" data-startTime="1646">it's serving a JPEG, and the images, they're </span><span class="line" data-startTime="1646">the same size. That's not good. There we go. </span> <span class="line" data-startTime="1654">That was just a caching error. So a hundred </span><span class="line" data-startTime="1654">kilobytes versus one megabyte, right? But </span><span class="line" data-startTime="1660">I think we can do better, right? So right </span><span class="line" data-startTime="1660">now, our image &mdash; our total size of this page </span><span class="line" data-startTime="1665">is 467 kilobytes so let's go back to the console </span><span class="line" data-startTime="1665">and also enable convert JPEG to WebP and &mdash; sure, </span><span class="line" data-startTime="1672">let's just enable it all. Why not. And apply </span><span class="line" data-startTime="1672">to live. And we're going to do the same test </span><span class="line" data-startTime="1676">again so we'll refresh it again. </span></p>

<p><span class="line" data-startTime="1676">Now, Chrome, of course, understands WebP, </span><span class="line" data-startTime="1680">so in theory we should see WebP images coming </span><span class="line" data-startTime="1680">through once they're optimized, and there </span><span class="line" data-startTime="1686">they are. So we have the WebP &mdash; let's just </span><span class="line" data-startTime="1686">re-share &mdash; resort here. </span> <span class="line" data-startTime="1692">So we have the Tokyo file. It's now at 81 </span><span class="line" data-startTime="1692">kilobytes. Previously it was 120. And the </span><span class="line" data-startTime="1697">total size of the page is 328 kilobytes. So </span><span class="line" data-startTime="1697">we went from a page that's over 3 megabytes </span><span class="line" data-startTime="1702">to 328 kilobytes. That's a 10X improvement, </span><span class="line" data-startTime="1702">right? And I didn't have to modify my application. </span> <span class="line" data-startTime="1708">The images are rescaled on the server and </span><span class="line" data-startTime="1708">served in the best possible format. </span> <span class="line" data-startTime="1712">If we were to open this in IE, it would just </span><span class="line" data-startTime="1712">serve a JPEG. I don't have to worry about </span><span class="line" data-startTime="1716">that. </span> <span class="line" data-startTime="1716">So that's pretty awesome. </span></p>

<p><span class="line" data-startTime="1721">Now, this works, of course, for any site that </span><span class="line" data-startTime="1721">you host on, you know, any hosting provider. </span> <span class="line" data-startTime="1726">You just need to cname your site. But if you're </span><span class="line" data-startTime="1726">using AppEngine, you can also take advantage </span><span class="line" data-startTime="1730">of Google PageSpeed service. </span> <span class="line" data-startTime="1730">What you need to do &mdash; and unfortunately it's </span><span class="line" data-startTime="1735">a little bit small here &mdash; you can modify </span><span class="line" data-startTime="1735">your app.yaml file, and you have good documentation </span><span class="line" data-startTime="1739">how to do this, and you can just specify which </span><span class="line" data-startTime="1739">filters you want PageSpeed service to apply. </span> <span class="line" data-startTime="1744">And before the request gets routed to your </span><span class="line" data-startTime="1744">application server, it will actually be processed </span><span class="line" data-startTime="1748">by our PageSpeed service proxy and it will </span><span class="line" data-startTime="1748">do all this work for you. </span> <span class="line" data-startTime="1754">So we ran this experiment on HTML5 Rocks. </span> <span class="line" data-startTime="1754">I'm sure you guys have seen the site. If not, </span><span class="line" data-startTime="1759">I encourage you to. Lots of great material. </span> <span class="line" data-startTime="1759">It's actually an AppEngine app. It's a Python </span><span class="line" data-startTime="1763">AppEngine app. It's open source. You can actually </span><span class="line" data-startTime="1763">check it out on Github and you can check the </span><span class="line" data-startTime="1767">exact modules and optimizations we're applying. </span></p>

<p><span class="line" data-startTime="1767">So we used Google Analytics to run an experiment </span><span class="line" data-startTime="1773">and say what happens if we enable PageSpeed </span><span class="line" data-startTime="1773">service and then disable it? So we ran an </span><span class="line" data-startTime="1778">A/B test, and, you know, we added six or seven </span><span class="line" data-startTime="1778">lines, whatever it is, to our app.yaml file </span><span class="line" data-startTime="1785">and we made our site 10% faster. This is as </span><span class="line" data-startTime="1785">measured by Page Load Time, right? And there's </span><span class="line" data-startTime="1791">another &mdash; a number of other metrics which </span><span class="line" data-startTime="1791">we've improved as well. </span> <span class="line" data-startTime="1795">So this is a huge, huge win. </span> <span class="line" data-startTime="1795">Especially for seven lines of modifications. </span> <span class="line" data-startTime="1803">So I think the takeaway here is automating </span><span class="line" data-startTime="1803">Web performance best practices offers a lot </span><span class="line" data-startTime="1808">of benefits. First of all, performance is </span><span class="line" data-startTime="1808">a continuous process, it's not a checklist </span><span class="line" data-startTime="1812">item, it's not something that you add at the </span><span class="line" data-startTime="1812">end. Right? So building or leveraging these </span><span class="line" data-startTime="1816">automated tools allows us to just not worry </span><span class="line" data-startTime="1816">about that. </span> <span class="line" data-startTime="1822">The other thing is, we just don't have to </span><span class="line" data-startTime="1822">worry about things anymore, a lot of things </span><span class="line" data-startTime="1825">anymore. So for example, when I save my images </span><span class="line" data-startTime="1825">on my own site, I just save them as whatever </span><span class="line" data-startTime="1830">format I'm working with, right? Like I'll </span><span class="line" data-startTime="1830">save them as a PNG. I don't have to think </span><span class="line" data-startTime="1833">about what is the optimal format for this </span><span class="line" data-startTime="1833">image. I'll let the computer or the servers </span><span class="line" data-startTime="1838">figure that out for me. I can just go into </span><span class="line" data-startTime="1838">my control panel and kind of fiddle with the </span><span class="line" data-startTime="1842">quality of what goes in and other things. </span> <span class="line" data-startTime="1842">Not only that but I can also dynamically adjust </span><span class="line" data-startTime="1846">the quality based on the client, right? Maybe </span><span class="line" data-startTime="1846">for a mobile site, you want to serve slightly </span><span class="line" data-startTime="1851">lower quality images because the screens are </span><span class="line" data-startTime="1851">smaller, and frankly, the users won't notice, </span><span class="line" data-startTime="1855">but that's a huge byte savings that you could </span><span class="line" data-startTime="1855">have. </span></p>

<p><span class="line" data-startTime="1859">These kinds of things you can't do manually, </span><span class="line" data-startTime="1859">right? How do you implement that in your application? </span><span class="line" data-startTime="1862">You would have to do &mdash; use JavaScript with, </span><span class="line" data-startTime="1862">you know, detection of the client. It's a </span><span class="line" data-startTime="1866">mess, right? </span><span class="line" data-startTime="1866">Let the server handle that for you. </span> <span class="line" data-startTime="1869">Not only that, but we can do dynamic optimizations </span><span class="line" data-startTime="1869">that you can't, frankly, do manually, right? </span><span class="line" data-startTime="1873">So you saw us serving WebP files. That would </span><span class="line" data-startTime="1873">be a disaster to build into your application, </span><span class="line" data-startTime="1879">right? It's doable but it's hard. </span> <span class="line" data-startTime="1879">And then there's things like work on HTTP </span><span class="line" data-startTime="1884">2.0 and SPDY, so our SPDY protocol is now </span><span class="line" data-startTime="1884">being standardized as HTTP 2.0 and they're </span><span class="line" data-startTime="1890">adding a lot of great new improvements to </span><span class="line" data-startTime="1890">it, and frankly, it's going to address a lot </span><span class="line" data-startTime="1894">of the problems that we have to deal with </span><span class="line" data-startTime="1894">today. Things like concatenating files? We </span><span class="line" data-startTime="1898">don't have to do that anymore with HTTP 2.0. </span> <span class="line" data-startTime="1898">Right? So now that all of you guys have concatenated </span><span class="line" data-startTime="1903">all of your files, please go ahead and undo </span><span class="line" data-startTime="1903">all of that, because that's what you do to </span><span class="line" data-startTime="1906">improve performance on HTTP 2.0, right? But </span><span class="line" data-startTime="1906">then how do you serve the optimized version </span><span class="line" data-startTime="1911">for both, right? Because HTTP 2.0 is not going </span><span class="line" data-startTime="1911">to come overnight. It will take a while. And </span><span class="line" data-startTime="1916">this is where automation can come in. This </span><span class="line" data-startTime="1916">is where the server can automatically decide </span><span class="line" data-startTime="1919">and figure out like, "Hey, you're an HTTP </span><span class="line" data-startTime="1919">2.0 client. I just won't do this class of </span><span class="line" data-startTime="1924">optimizations for you," right? So this is </span><span class="line" data-startTime="1924">a great reason to invest into this &mdash; into </span><span class="line" data-startTime="1931">these kinds of tools. And frankly, at the </span><span class="line" data-startTime="1931">end of the day it just allows you to focus </span><span class="line" data-startTime="1934">on your application. So with that, we have </span><span class="line" data-startTime="1934">a little bit of time for questions, and if </span><span class="line" data-startTime="1939">you guys can, please grab one of the mics. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="1939"><span class="speakerName">Audience member</span>: Thank you. This is really awesome. </span><span class="line" data-startTime="1945">Two questions. Firstly, retina images. Any </span><span class="line" data-startTime="1945">thoughts on that? </span></p>

<p class="speaker"><span class="line" data-starttime="1950"><span class="speakerName">Ilya Grigorik</span>: Yeah. So retina images is </span><span class="line" data-startTime="1950">a big discussion, I think, in the web community </span><span class="line" data-startTime="1954">today. We're looking at a couple of solutions </span><span class="line" data-startTime="1954">for serving high DPI images, like 2X images. </span><span class="line" data-startTime="1961">We don't have any built-in filters today, </span><span class="line" data-startTime="1961">but we have some in the works, and right now, </span><span class="line" data-startTime="1967">I guess the problem is we don't have a generic </span><span class="line" data-startTime="1967">way to do that across browsers. </span></p>

<p class="speaker"><span class="line" data-starttime="1971"><span class="speakerName">Audience member</span>: Okay. And sorry, the second one, the service </span><span class="line" data-startTime="1971">looks even better. Is that something you expect </span><span class="line" data-startTime="1976">to be a paid service when it comes out of </span><span class="line" data-startTime="1976">beta? </span></p>

<p class="speaker"><span class="line" data-starttime="1978"><span class="speakerName">Ilya Grigorik</span>: PageSpeed? Right. So PageSpeed </span><span class="line" data-startTime="1978">service is in beta right now. It is free while </span><span class="line" data-startTime="1982">it's in beta and we are still trying to determine </span><span class="line" data-startTime="1982">what is the right module to actually, you </span><span class="line" data-startTime="1986">know, charge for it and all the rest. Because </span><span class="line" data-startTime="1986">it is being served through the Google cloud </span><span class="line" data-startTime="1991">and, you know, there's &mdash; there may be some </span><span class="line" data-startTime="1991">additional fee in the future, </span><span class="line" data-startTime="1994">But I don't think we have a good answer yet. </span><span class="line" data-startTime="1994">Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="1997"><span class="speakerName">Audience member</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="1997"><span class="speakerName">Audience member</span>: Can PageSpeed help you if you use a single-page </span><span class="line" data-startTime="2001">Web app who loads its content using Ajax? </span></p>

<p class="speaker"><span class="line" data-starttime="2001"><span class="speakerName">Ilya Grigorik</span>: Yeah, so can PageSpeed help </span><span class="line" data-startTime="2005">us with single-page apps? Perhaps not as much, </span><span class="line" data-startTime="2005">right, because you are probably doing a lot </span><span class="line" data-startTime="2011">of the loading through JavaScript over your </span><span class="line" data-startTime="2011">assets and all the rest. But you can &mdash; if </span><span class="line" data-startTime="2017">you leverage things like just regular image </span><span class="line" data-startTime="2017">tags and other things, you can configure PageSpeed </span><span class="line" data-startTime="2024">to do transparent rewriting and optimization </span><span class="line" data-startTime="2024">of images. </span><span class="line" data-startTime="2028">I showed you examples where you rewrite the </span><span class="line" data-startTime="2028">URL. You can actually configure it the other </span><span class="line" data-startTime="2033">way around such that the image is &mdash; the URL </span><span class="line" data-startTime="2033">is the same and then still leverage some of </span><span class="line" data-startTime="2038">the functionality. </span></p>

<p class="speaker"><span class="line" data-starttime="2038"><span class="speakerName">Audience member</span>: All right. Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2043"><span class="speakerName">Audience member</span>: Let me interrupt you. Sorry. So as a Rails </span><span class="line" data-startTime="2043">developer, are there any caveats that we have </span><span class="line" data-startTime="2050">to worry about when developing more dynamic </span><span class="line" data-startTime="2050">apps? Is this suitable for just sort of static </span><span class="line" data-startTime="2054">pages? Or what's the &mdash; or what do we need </span><span class="line" data-startTime="2054">to know about using PageSpeed for dynamic </span><span class="line" data-startTime="2058">things? </span></p>

<p class="speaker"><span class="line" data-starttime="2058"><span class="speakerName">Ilya Grigorik</span>: I don't think there are any </span><span class="line" data-startTime="2060">constraints whether it is a static app or </span><span class="line" data-startTime="2060">a dynamic app. It really doesn't matter. </span><span class="line" data-startTime="2064">So the way PageSpeed works, it basically intercepts </span><span class="line" data-startTime="2064">your request at the very end before it gets </span><span class="line" data-startTime="2069">served by the server. So it doesn't matter </span><span class="line" data-startTime="2069">who generated. </span><span class="line" data-startTime="2073">For Rails specifically, Rails, of course, </span><span class="line" data-startTime="2073">has asset pipeline and other things that try </span><span class="line" data-startTime="2077">to do a lot of this work at deploy time, right, </span><span class="line" data-startTime="2077">concatenating files and all the rest. </span><span class="line" data-startTime="2081">I would actually say you don't need to do </span><span class="line" data-startTime="2081">that anymore. You don't have to worry about </span><span class="line" data-startTime="2083">it. PageSpeed will do all of that for you, </span><span class="line" data-startTime="2083">plus more, because we can do dynamic optimizations. </span></p>

<p class="speaker"><span class="line" data-starttime="2088"><span class="speakerName">Audience member</span>: So quick question. With the beta that </span><span class="line" data-startTime="2088">you have running, is there an upper limit </span><span class="line" data-startTime="2095">on the number of assets that we could have </span><span class="line" data-startTime="2095">cached if I want to do A/B testing for my </span><span class="line" data-startTime="2100">company? </span></p>

<p class="speaker"><span class="line" data-starttime="2100"><span class="speakerName">Ilya Grigorik</span>: No, there's no limit on that. </span></p>

<p class="speaker"><span class="line" data-starttime="2102"><span class="speakerName">Audience member</span>: Okay. And just to sort of &mdash; to tag onto </span><span class="line" data-startTime="2102">the previous gentleman's question, how would </span><span class="line" data-startTime="2109">PageSpeed handle something, like I said, of </span><span class="line" data-startTime="2109">using RequireJS or something where we're sort </span><span class="line" data-startTime="2113">of doing, like, lazy load of static assets? </span></p>

<p class="speaker"><span class="line" data-starttime="2113"><span class="speakerName">Ilya Grigorik</span>: Yeah. So we have our own </span><span class="line" data-startTime="2120">filters that do, for example, defer JavaScript, </span><span class="line" data-startTime="2120">right, which will grab your code and actually </span><span class="line" data-startTime="2126">wrap it in our own kind of markup to defer </span><span class="line" data-startTime="2126">it to load later. </span><span class="line" data-startTime="2130">So RequireJS is effectively that, but you </span><span class="line" data-startTime="2130">are doing it manually. </span><span class="line" data-startTime="2134">We don't have &mdash; and it would be very hard </span><span class="line" data-startTime="2134">to build scripts that introspect into RequireJS. </span><span class="line" data-startTime="2140">So we may not be able to as much if you are </span><span class="line" data-startTime="2140">doing this kind of dynamic construction of </span><span class="line" data-startTime="2144">the page. </span><span class="line" data-startTime="2144">But that's really an area that we are looking </span><span class="line" data-startTime="2146">for feedback from you guys as well because, </span><span class="line" data-startTime="2146">you know, I think these are &mdash; these are the </span><span class="line" data-startTime="2150">new apps that are being built. So if there </span><span class="line" data-startTime="2150">is more interest in that, we'll start looking </span><span class="line" data-startTime="2155">in that direction. </span></p>

<p class="speaker"><span class="line" data-starttime="2155"><span class="speakerName">Audience member</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2158"><span class="speakerName">Audience member</span>: I actually have three questions. One is </span><span class="line" data-startTime="2158">can we use this with sites that have SSL enabled? </span><span class="line" data-startTime="2166">I wouldn't be comfortable giving Google my </span><span class="line" data-startTime="2166">SSL certificate. </span></p>

<p class="speaker"><span class="line" data-starttime="2169"><span class="speakerName">Ilya Grigorik</span>: Yeah, so for SSL, the answer </span><span class="line" data-startTime="2169">is yes. Basically, you would determine your </span><span class="line" data-startTime="2175">SSL at your server, right? So, okay, there </span><span class="line" data-startTime="2175">is a couple, I guess, questions. </span><span class="line" data-startTime="2180">Open source or PageSpeed service? </span></p>

<p class="speaker"><span class="line" data-starttime="2180"><span class="speakerName">Audience member</span>: The PageSpeed service. </span></p>

<p class="speaker"><span class="line" data-starttime="2183"><span class="speakerName">Ilya Grigorik</span>: For PageSpeed service, you </span><span class="line" data-startTime="2183">would have to upload your certificates to </span><span class="line" data-startTime="2187">one of our servers, so I have it set up on </span><span class="line" data-startTime="2187">my site. You can actually try it. I upload </span><span class="line" data-startTime="2192">the certificate and the connection is terminated </span><span class="line" data-startTime="2192">at the Google server. </span></p>

<p class="speaker"><span class="line" data-starttime="2196"><span class="speakerName">Audience member</span>: Okay. The second question I had was how </span><span class="line" data-startTime="2196">much of an additional load in terms of CPU </span><span class="line" data-startTime="2202">and memory does PageSpeed module add onto </span><span class="line" data-startTime="2202">Apache or Nginx? </span></p>

<p class="speaker"><span class="line" data-starttime="2206"><span class="speakerName">Ilya Grigorik</span>: That's a great question. </span><span class="line" data-startTime="2206">For example, it can take a while, right, hundreds </span><span class="line" data-startTime="2214">of milliseconds to do. </span><span class="line" data-startTime="2214">So I think it is giving me the boot. </span><span class="line" data-startTime="2220">So what we do is we actually give you knobs </span><span class="line" data-startTime="2220">to control how much resources you are willing </span><span class="line" data-startTime="2224">to give the server. So, for example, you can </span><span class="line" data-startTime="2224">tweak the number of threads that we will employ </span><span class="line" data-startTime="2229">in the background to optimize the stuff. You </span><span class="line" data-startTime="2229">can also tweak the size of our cache. For </span><span class="line" data-startTime="2235">multi-server deployments, we actually provide </span><span class="line" data-startTime="2235">mem cache &mdash; caching. Instead of storing the </span><span class="line" data-startTime="2240">optimized assets on just one server, you can </span><span class="line" data-startTime="2240">share it across a cluster of servers. </span><span class="line" data-startTime="2245">So there is a lot of knobs. I didn't cover </span><span class="line" data-startTime="2245">these here. There is a lot of great documentation </span><span class="line" data-startTime="2249">that we have on our site that you can look </span><span class="line" data-startTime="2249">into. </span></p>

<p class="speaker"><span class="line" data-starttime="2252"><span class="speakerName">Audience member</span>: Can we extend the PageSpeed module with </span><span class="line" data-startTime="2252">additional filters? </span></p>

<p class="speaker"><span class="line" data-starttime="2255"><span class="speakerName">Ilya Grigorik</span>: Can you say that again, sorry? </span></p>

<p class="speaker"><span class="line" data-starttime="2255"><span class="speakerName">Audience member</span>: Can we extend the module with additional </span><span class="line" data-startTime="2259">filters, if you want to write out custom filters </span><span class="line" data-startTime="2259">to do some optimizations? </span></p>

<p class="speaker"><span class="line" data-starttime="2264"><span class="speakerName">Ilya Grigorik</span>: Oh, sure, yeah. It is an </span><span class="line" data-startTime="2264">open source project. Actually, the guy standing </span><span class="line" data-startTime="2268">behind you is the guy to talk to. </span><span class="line" data-startTime="2268">You can contribute new filters. We would love </span><span class="line" data-startTime="2273">your participation. If you want to, we have </span><span class="line" data-startTime="2273">a very active mod PageSpeed discussion group. </span><span class="line" data-startTime="2280">Just ping us there and we are happy to talk </span><span class="line" data-startTime="2280">about it. </span></p>

<p class="speaker"><span class="line" data-starttime="2282"><span class="speakerName">Audience member</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2282"><span class="speakerName">Audience member</span>: Hi. So a lot of applications these days </span><span class="line" data-startTime="2286">are written using clientside templating frameworks </span><span class="line" data-startTime="2286">like Ember, Angular, Backbone. How does this </span><span class="line" data-startTime="2291">play with serving up static templates and </span><span class="line" data-startTime="2291">any of the &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2295"><span class="speakerName">Ilya Grigorik</span>: So, the short answer is I </span><span class="line" data-startTime="2295">don't think we have a good answer for that </span><span class="line" data-startTime="2299">today. We are basically &mdash; we rely on being </span><span class="line" data-startTime="2299">able to analyze your HTML, your markup, plus </span><span class="line" data-startTime="2305">the JavaScript and CSS assets. We discover </span><span class="line" data-startTime="2305">those in part through analyzing your HTML. </span><span class="line" data-startTime="2312">So there may not be as much that we can do </span><span class="line" data-startTime="2312">there. </span><span class="line" data-startTime="2314">You can configure the server as I mentioned </span><span class="line" data-startTime="2314">earlier to do transparent rewriting of images </span><span class="line" data-startTime="2320">and a few other things. </span><span class="line" data-startTime="2320">But I think that's an area that we can definitely </span><span class="line" data-startTime="2324">do more in, in the future. </span></p>

<p class="speaker"><span class="line" data-starttime="2324"><span class="speakerName">Audience member</span>: Hi. I'm Josh,(saying name). I work on </span><span class="line" data-startTime="2331">the PageSpeed optimization project. I wanted </span><span class="line" data-startTime="2331">to point out that actually just to this point </span><span class="line" data-startTime="2336">and the one made earlier, if you have &mdash; if </span><span class="line" data-startTime="2336">you are loading assets via JavaScript, we </span><span class="line" data-startTime="2342">do a pretty good job of optimizing them. </span><span class="line" data-startTime="2342">What we don't know is the sizing context because </span><span class="line" data-startTime="2347">we just get to &mdash; we get a request for a JPEG </span><span class="line" data-startTime="2347">file and we optimize that based on whatever </span><span class="line" data-startTime="2352">the user agent is. We don't know how big it </span><span class="line" data-startTime="2352">was supposed to &mdash; what slot it was supposed </span><span class="line" data-startTime="2357">to go in. And we can't change its cache lifetime </span><span class="line" data-startTime="2357">if we can't change its URL. </span></p>

<p class="speaker"><span class="line" data-starttime="2360"><span class="speakerName">Ilya Grigorik</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2360"><span class="speakerName">Audience member</span>: But the on-the-fly transcoding that you </span><span class="line" data-startTime="2365">get for reducing image size and bandwidth </span><span class="line" data-startTime="2365">for Android browsers that uses that flow. </span></p>

<p class="speaker"><span class="line" data-starttime="2372"><span class="speakerName">Ilya Grigorik</span>: One note to that. As you </span><span class="line" data-startTime="2372">guys probably have noticed, we have a performance </span><span class="line" data-startTime="2376">area in the Chrome booth section. And we have </span><span class="line" data-startTime="2376">a big contingent from the PageSpeed family </span><span class="line" data-startTime="2384">of products hanging out there. If you guys </span><span class="line" data-startTime="2384">want to talk to us about specific questions, </span><span class="line" data-startTime="2388">how to implement stuff or just have ideas, </span><span class="line" data-startTime="2388">please drop by. </span></p>

<p class="speaker"><span class="line" data-starttime="2391"><span class="speakerName">Audience member</span>: Yeah. That's just about Java. You showed </span><span class="line" data-startTime="2391">us how to implement that on that page using </span><span class="line" data-startTime="2396">Python. Do you have any examples in Java? </span><span class="line" data-startTime="2396">And you showed us the URL to get to the beta. </span><span class="line" data-startTime="2404">If you could share with us these slides or </span><span class="line" data-startTime="2404">go back to the URL? </span></p>

<p class="speaker"><span class="line" data-starttime="2408"><span class="speakerName">Ilya Grigorik</span>: I will take the last one </span><span class="line" data-startTime="2408">first. So if you just use your favorite search </span><span class="line" data-startTime="2412">engine and look for PageSpeed service, you </span><span class="line" data-startTime="2412">will land directly on the link that you need. </span><span class="line" data-startTime="2417">That's the simplest way to get there. And </span><span class="line" data-startTime="2417">then the other one was &mdash; question was Java </span><span class="line" data-startTime="2421">versus Python examples. </span></p>

<p class="speaker"><span class="line" data-starttime="2421"><span class="speakerName">Audience member</span>: Yeah, you showed us the Python example </span><span class="line" data-startTime="2424">and how to do that on yaml file. </span></p>

<p class="speaker"><span class="line" data-starttime="2424"><span class="speakerName">Ilya Grigorik</span>: Oh, sure. Yeah, the great </span><span class="line" data-startTime="2429">thing about PageSpeed service is, it is completely </span><span class="line" data-startTime="2429">agnostic of the runtime that you are using. </span><span class="line" data-startTime="2436">There is no difference between Java, Python, </span><span class="line" data-startTime="2436">and all the rest. </span><span class="line" data-startTime="2440">If you go to the Google AppEngine documentation </span><span class="line" data-startTime="2440">and just search for PageSpeed, you will have </span><span class="line" data-startTime="2445">the specific commands that you need in there. </span></p>

<p class="speaker"><span class="line" data-starttime="2445"><span class="speakerName">Audience member</span>: Awesome. Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2448"><span class="speakerName">Ilya Grigorik</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2448"><span class="speakerName">Audience member</span>: Thank you. Hi. I have been using PageSpeed </span><span class="line" data-startTime="2452">service for a while and it is pretty impressive. </span><span class="line" data-startTime="2452">And I have one question, is that you mentioned </span><span class="line" data-startTime="2457">you deployed several servers and words to </span><span class="line" data-startTime="2457">get &mdash; to make the optimization. </span></p>

<p class="speaker"><span class="line" data-starttime="2462"><span class="speakerName">Ilya Grigorik</span>: Yeah. </span></p>

<p class="speaker"><span class="line" data-starttime="2462"><span class="speakerName">Audience member</span>: So we know in order to make the optimization, </span><span class="line" data-startTime="2466">you need to make several subsequent &mdash; subrequests </span><span class="line" data-startTime="2466">of the first requests. So I was wondering, </span><span class="line" data-startTime="2472">can you share a little bit about your global </span><span class="line" data-startTime="2472">deployment and the method you used to determine </span><span class="line" data-startTime="2480">the closest server for optimization. </span></p>

<p class="speaker"><span class="line" data-starttime="2480"><span class="speakerName">Ilya Grigorik</span>: So, thankfully, we actually </span><span class="line" data-startTime="2485">on PageSpeed service don't necessarily need </span><span class="line" data-startTime="2485">to do anything. This is part of the global </span><span class="line" data-startTime="2489">Google caching policy, right? Whenever you </span><span class="line" data-startTime="2489">issue a request to Google Search, we try to </span><span class="line" data-startTime="2494">determine what is the closest location. We </span><span class="line" data-startTime="2494">can do that through DNS, through I.P. lookups. </span><span class="line" data-startTime="2498">There is a variety of different methods. And </span><span class="line" data-startTime="2498">we just leverage all of that infrastructure </span><span class="line" data-startTime="2502">at PageSpeed. </span><span class="line" data-startTime="2502">So, basically, your site is getting deployed </span><span class="line" data-startTime="2505">on the same infrastructure that is powering </span><span class="line" data-startTime="2505">Google Search and other things, all right? </span><span class="line" data-startTime="2509">So picking the closest server to the user </span><span class="line" data-startTime="2509">is just part of the magic, if you will. It </span><span class="line" data-startTime="2515">is not something you need to configure at </span><span class="line" data-startTime="2515">all or worry about within your application. </span></p>

<p class="speaker"><span class="line" data-starttime="2519"><span class="speakerName">Audience member</span>: Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2519"><span class="speakerName">Ilya Grigorik</span>: Yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2521"><span class="speakerName">Audience member</span>: Are there any optimizations that are device-dependent? </span><span class="line" data-startTime="2521">So, for instance, having images that would </span><span class="line" data-startTime="2527">be more optimized for mobile devices versus </span><span class="line" data-startTime="2527">browsers? </span></p>

<p class="speaker"><span class="line" data-starttime="2530"><span class="speakerName">Ilya Grigorik</span>: The answer is absolutely </span><span class="line" data-startTime="2530">yes. The best one is the WebP example I shared. </span><span class="line" data-startTime="2537">Only certain user agents are able to use it. </span><span class="line" data-startTime="2537">Another example would be leveraging local </span><span class="line" data-startTime="2542">storage. So not all clients are able to leverage </span><span class="line" data-startTime="2542">local search, and we actually have a filter </span><span class="line" data-startTime="2547">that can use local storage as a cache for </span><span class="line" data-startTime="2547">your assets. </span><span class="line" data-startTime="2550">And we will deploy those optimizations conditionally. </span><span class="line" data-startTime="2550">And Josh is going to &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2553"><span class="speakerName">Audience member</span>: Yeah, you can also say for small screens </span><span class="line" data-startTime="2553">compress more aggressively than for large </span><span class="line" data-startTime="2559">screens. </span></p>

<p class="speaker"><span class="line" data-starttime="2559"><span class="speakerName">Ilya Grigorik</span>: Yep, yep. </span></p>

<p class="speaker"><span class="line" data-starttime="2561"><span class="speakerName">Audience member</span>: So kind of a follow-up on that, both for </span><span class="line" data-startTime="2561">the service as well as for something like </span><span class="line" data-startTime="2565">mod PageSpeed, how is the universe of user </span><span class="line" data-startTime="2565">agents that are being identified to optimize </span><span class="line" data-startTime="2570">for being managed and the frequency with which </span><span class="line" data-startTime="2570">it gets updated? </span></p>

<p class="speaker"><span class="line" data-starttime="2574"><span class="speakerName">Ilya Grigorik</span>: So we &mdash; Right. So we test </span><span class="line" data-startTime="2574">the stuff very extensively. All the code is </span><span class="line" data-startTime="2580">open source. </span><span class="line" data-startTime="2580">Josh, do you want to share any details? I </span><span class="line" data-startTime="2585">think &mdash; so one thing I didn't mention, I </span><span class="line" data-startTime="2585">had in those slides, we have two sets of filters, </span><span class="line" data-startTime="2590">COR and optional filters. COR filters are </span><span class="line" data-startTime="2590">the safe filters. They should be &mdash; can be </span><span class="line" data-startTime="2597">applied to any site without any risk or minimal </span><span class="line" data-startTime="2597">risk on the site in terms of modifying the </span><span class="line" data-startTime="2603">look and feel. </span><span class="line" data-startTime="2603">And then there's an extended list of other </span><span class="line" data-startTime="2606">optimizations which we can do on a per-user-agent </span><span class="line" data-startTime="2606">basis and the rest. </span></p>

<p class="speaker"><span class="line" data-starttime="2611"><span class="speakerName">Audience member</span>: So in the open source world, we have to </span><span class="line" data-startTime="2611">kind of cut releases and ship product. So </span><span class="line" data-startTime="2618">we have &mdash; we take kind of a white-listing </span><span class="line" data-startTime="2618">view of what we can do for different browsers. </span><span class="line" data-startTime="2625">So if you are using mod PageSpeed from last </span><span class="line" data-startTime="2625">month and this month there is a new device </span><span class="line" data-startTime="2629">that can support WebP, we won't know about </span><span class="line" data-startTime="2629">it. </span></p>

<p class="speaker"><span class="line" data-starttime="2634"><span class="speakerName">Ilya Grigorik</span>: Back in November of last </span><span class="line" data-startTime="2634">year, we shipped the 1.0 of mod PageSpeed. </span><span class="line" data-startTime="2638">And when we did that switch, we are shipping </span><span class="line" data-startTime="2638">two channels. There is a beta channel, and </span><span class="line" data-startTime="2643">there is a stable channel, very similar to </span><span class="line" data-startTime="2643">Chrome. </span><span class="line" data-startTime="2647">If you want to be on the edge and try all </span><span class="line" data-startTime="2647">the latest optimizations that's where you </span><span class="line" data-startTime="2650">would be. If you are a little bit more nervous </span><span class="line" data-startTime="2650">about how this will work across all the devices, </span><span class="line" data-startTime="2655">you should stick with the stable channel. </span></p>

<p class="speaker"><span class="line" data-starttime="2655"><span class="speakerName">Audience member</span>: Another question is, all this is awesome </span><span class="line" data-startTime="2659">to have it happen Automagically. When it does </span><span class="line" data-startTime="2659">that, does it also output reports so you can </span><span class="line" data-startTime="2665">go back to your developers and say: Hey, you </span><span class="line" data-startTime="2665">should code better and this is how. </span></p>

<p class="speaker"><span class="line" data-starttime="2669"><span class="speakerName">Ilya Grigorik</span>: That's PageSpeed insights. </span><span class="line" data-startTime="2669">We are effectively taking that same engine, </span><span class="line" data-startTime="2673">or the same rules and just automating all </span><span class="line" data-startTime="2673">of that for you. </span></p>

<p class="speaker"><span class="line" data-starttime="2675"><span class="speakerName">Audience member</span>: Does it output of what it's actually done </span><span class="line" data-startTime="2675">so you can go back without having to run it </span><span class="line" data-startTime="2678">through insights on its own? Do you get some </span><span class="line" data-startTime="2678">logging of, Hey, we did these concatenations </span><span class="line" data-startTime="2682">aside from the image optimization. </span></p>

<p class="speaker"><span class="line" data-starttime="2682"><span class="speakerName">Ilya Grigorik</span>: That's interesting. I don't </span><span class="line" data-startTime="2685">think we actually &mdash; we do have a statistics </span><span class="line" data-startTime="2685">screen where we can go and kind of gather </span><span class="line" data-startTime="2690">some data about what is a server doing. How </span><span class="line" data-startTime="2690">is it doing to tune its performance? We don't </span><span class="line" data-startTime="2694">have an audit log today to say, like, these </span><span class="line" data-startTime="2694">are the explanations we have performed. </span></p>

<p class="speaker"><span class="line" data-starttime="2700"><span class="speakerName">Audience member</span>: Okay. Thank you. </span></p>

<p class="speaker"><span class="line" data-starttime="2700"><span class="speakerName">Audience member</span>: I realize we are wrapping up. I will go </span><span class="line" data-startTime="2704">quick. Is there any danger zones, things you </span><span class="line" data-startTime="2704">should not use &mdash; not do &mdash; not &mdash; if you </span><span class="line" data-startTime="2710">are using this, you should probably not use </span><span class="line" data-startTime="2710">PageSpeed on your server if, we are using </span><span class="line" data-startTime="2713">open source Apache and Nginx models? </span></p>

<p class="speaker"><span class="line" data-starttime="2713"><span class="speakerName">Ilya Grigorik</span>: Sorry, can you &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2717"><span class="speakerName">Audience member</span>: Talking too fast. If I'm doing X, then </span><span class="line" data-startTime="2717">is there something that I &mdash; should I not </span><span class="line" data-startTime="2725">in this case use PageSpeed? </span></p>

<p class="speaker"><span class="line" data-starttime="2725"><span class="speakerName">Ilya Grigorik</span>: Oh, I see. No. So coming </span><span class="line" data-startTime="2731">back to COR filters, the safe filters, we </span><span class="line" data-startTime="2731">try to be careful about what kind of optimizations, </span><span class="line" data-startTime="2737">rewriting, we do to your markup, JavaScript </span><span class="line" data-startTime="2737">and CSS. </span> <span class="line" data-startTime="2740">I would actually say once you have PageSpeed </span><span class="line" data-startTime="2740">in place, you can undo a lot of the stuff </span><span class="line" data-startTime="2744">that you're doing. So it probably makes sense </span><span class="line" data-startTime="2744">just from simplifying your workflow, not having </span><span class="line" data-startTime="2750">to work about a bunch of things. </span> <span class="line" data-startTime="2750">If you stick with the COR filters, you should </span><span class="line" data-startTime="2755">be pretty safe. But please test first. </span> <span class="line" data-startTime="2755">One thing I didn't mention and I should have, </span><span class="line" data-startTime="2760">a really great tip, if you go to webpagetest.org/compare, </span><span class="line" data-startTime="2760">you can type in your site and it will run </span><span class="line" data-startTime="2770">it through PageSpeed service and it will give </span><span class="line" data-startTime="2770">you a side-by-side comparison. </span></p>

<p><span class="line" data-startTime="2775">If you enabled this thing, what would you </span><span class="line" data-startTime="2775">get? So in the &mdash; in our documentation, we </span><span class="line" data-startTime="2782">provide a lot of toggles to selectively enable </span><span class="line" data-startTime="2782">specific filters. Like, you can pass us a </span><span class="line" data-startTime="2787">query parameter string to say, I'm curious </span><span class="line" data-startTime="2787">what is going to happen if I enable image </span><span class="line" data-startTime="2791">lazy loading. And you can do that on a per-request </span><span class="line" data-startTime="2791">basis such that as a developer, you can test </span><span class="line" data-startTime="2796">one of these optimizations and then decide </span><span class="line" data-startTime="2796">whether you want to make that part of your </span><span class="line" data-startTime="2801">COR configuration. </span> <span class="line" data-startTime="2801">All right. Thanks, guys. If you have more </span><span class="line" data-startTime="2807">questions, as I mentioned, please come by </span><span class="line" data-startTime="2807">our Chrome area and ask us. </span> <span class="line" data-startTime="2811">[ Applause ] </span></p>