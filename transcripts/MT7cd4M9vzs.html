<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>Google I/O 2013 &mdash; All the Ships in the World: Visualizing Data with Google Cloud and Maps</h1>

<h2>Mano Marks, Kurt Schwehr</h2>

<a class="video" href="http://youtu.be/MT7cd4M9vzs">youtu.be/MT7cd4M9vzs</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="2"><span class="speakerName">Mano Marks</span>: Hi, everyone. </span><span class="line" data-startTime="3">My name is Mano Marks. </span><span class="line" data-startTime="4">I'm the lead developer </span><span class="line" data-startTime="4">advocate on </span><span class="line" data-startTime="6">the Google Maps team. </span></p>

<p class="speaker"><span class="line" data-starttime="9"><span class="speakerName">Kurt Schwehr</span>: My name </span><span class="line" data-startTime="9">Kurt Scwerhr. </span><span class="line" data-startTime="10">I'm head of ocean engineering. </span><span class="line" data-startTime="12">FRANCESC CAMPOY FLORES: And </span><span class="line" data-startTime="12">I'm Francesc Campoy, the </span><span class="line" data-startTime="14">developer programs engineer </span><span class="line" data-startTime="14">for the Go Team. </span></p>

<p class="speaker"><span class="line" data-starttime="16"><span class="speakerName">Mano Marks</span>: And we're going to </span><span class="line" data-startTime="16">talk to you today about all </span><span class="line" data-startTime="18">the ships in the world. </span> <span class="line" data-startTime="20">So what do I mean by that? </span><span class="line" data-startTime="23">And I'm going to get &mdash; </span><span class="line" data-startTime="25">actually, Kurt's going to go </span><span class="line" data-startTime="25">into detail on how we're </span><span class="line" data-startTime="29">collecting data from 75,000 </span><span class="line" data-startTime="29">ships and over four million </span><span class="line" data-startTime="35">position reports. </span> <span class="line" data-startTime="36">But what I want to do is just </span><span class="line" data-startTime="36">give you a short introduction </span><span class="line" data-startTime="39">to why we're doing this. </span> <span class="line" data-startTime="41">We are doing this because, you </span><span class="line" data-startTime="41">may have noticed there are </span><span class="line" data-startTime="44">sensors all over Moscone </span><span class="line" data-startTime="44">right now. </span> <span class="line" data-startTime="46">And the team is doing some </span><span class="line" data-startTime="46">really interesting stuff with </span><span class="line" data-startTime="51">sensors in Arduino and just </span><span class="line" data-startTime="51">Cloud and combining a lot of </span><span class="line" data-startTime="54">information. </span> <span class="line" data-startTime="55">We were really interested in </span><span class="line" data-startTime="55">taking a look at a real-world </span><span class="line" data-startTime="59">use case where people are </span><span class="line" data-startTime="59">currently broadcasting their </span><span class="line" data-startTime="63">locations and then using </span><span class="line" data-startTime="63">Google's Cloud to aggregate </span><span class="line" data-startTime="68">that information, filter it, </span><span class="line" data-startTime="68">parse it out, and do really </span><span class="line" data-startTime="72">interesting &mdash; </span><span class="line" data-startTime="73">see if we can learn interesting </span><span class="line" data-startTime="73">things and </span><span class="line" data-startTime="76">visualize it on a map. </span></p>

<p><span class="line" data-startTime="78">Now you may have seen the talk </span><span class="line" data-startTime="78">this morning at 10:00 by </span><span class="line" data-startTime="82">Brendan Kenny where he went in </span><span class="line" data-startTime="82">depth into using HTML5 plus </span><span class="line" data-startTime="87">Google Maps to do data </span><span class="line" data-startTime="87">visualization using </span><span class="line" data-startTime="90">the same data set. </span> <span class="line" data-startTime="92">We're going to talk a little </span><span class="line" data-startTime="92">bit about that. </span> <span class="line" data-startTime="94">But you should watch that video </span><span class="line" data-startTime="94">if you haven't had a </span><span class="line" data-startTime="96">chance to watch it. </span> <span class="line" data-startTime="98">What I want to do right now is </span><span class="line" data-startTime="98">show you what this actually </span><span class="line" data-startTime="102">looks like. </span> <span class="line" data-startTime="105">So the first thing I've got </span><span class="line" data-startTime="105">here, this was the first </span><span class="line" data-startTime="109">implementation of </span><span class="line" data-startTime="109">using this data. </span> <span class="line" data-startTime="112">These large amounts of data </span><span class="line" data-startTime="112">from ships' reports. </span> <span class="line" data-startTime="117">We took a one-day snapshot and </span><span class="line" data-startTime="117">used the JavaScript Maps API </span><span class="line" data-startTime="123">to load data in from BigQuery </span><span class="line" data-startTime="123">where we were </span><span class="line" data-startTime="127">serving the data out. </span></p>

<p><span class="line" data-startTime="130">I want to just show you </span><span class="line" data-startTime="130">a quick look at </span><span class="line" data-startTime="132">how fast that is. </span> <span class="line" data-startTime="136">It's not very fast. </span> <span class="line" data-startTime="139">There you go. </span> <span class="line" data-startTime="140">So this was a very naive </span><span class="line" data-startTime="140">implementation. </span> <span class="line" data-startTime="143">BigQuery was parsing out a large </span><span class="line" data-startTime="143">number of points and </span><span class="line" data-startTime="150">passing it down to </span><span class="line" data-startTime="150">the browser. </span> <span class="line" data-startTime="151">But we're going to talk to you </span><span class="line" data-startTime="151">a lot about how we built up a </span><span class="line" data-startTime="154">serving infrastructure over the </span><span class="line" data-startTime="154">last few months to parse </span><span class="line" data-startTime="157">out way more data and </span><span class="line" data-startTime="157">serve it out to you. </span> <span class="line" data-startTime="159">This is, by the way, using </span><span class="line" data-startTime="159">straight-up JavaScript Maps </span><span class="line" data-startTime="162">API using our heat map layer. </span> <span class="line" data-startTime="168">And then, just to show you where </span><span class="line" data-startTime="168">we're going, this is </span><span class="line" data-startTime="171">what it looks like in Google </span><span class="line" data-startTime="171">Maps using HTML5 and the </span><span class="line" data-startTime="179">canvas layer utility library </span><span class="line" data-startTime="179">to give all the latest </span><span class="line" data-startTime="184">position reports from all the </span><span class="line" data-startTime="184">ships that we have data from. </span></p>

<p><span class="line" data-startTime="188">And you can see here, we've </span><span class="line" data-startTime="188">actually done quite a bit of </span><span class="line" data-startTime="191">work on really interesting </span><span class="line" data-startTime="191">things, including click </span><span class="line" data-startTime="197">notifications, which </span><span class="line" data-startTime="197">is actually kind of </span><span class="line" data-startTime="199">hard to do in WebGL. </span> <span class="line" data-startTime="203">And then, you can start to see </span><span class="line" data-startTime="203">really interesting patterns </span><span class="line" data-startTime="207">developing. </span> <span class="line" data-startTime="208">Like here, we're actually using </span><span class="line" data-startTime="208">the direction right </span><span class="line" data-startTime="212">here, is the color of the </span><span class="line" data-startTime="212">position location. </span> <span class="line" data-startTime="217">So here you can see this strong </span><span class="line" data-startTime="217">red line, this is </span><span class="line" data-startTime="221">people going pretty </span><span class="line" data-startTime="221">much North. </span></p>

<p><span class="line" data-startTime="225">And you can see that </span><span class="line" data-startTime="225">a big path, there. </span> <span class="line" data-startTime="227">And just to the right of it &mdash; </span><span class="line" data-startTime="227">it might be a little hard to </span><span class="line" data-startTime="229">see on the monitor &mdash; </span><span class="line" data-startTime="231">going pretty much due </span><span class="line" data-startTime="231">South, you have </span><span class="line" data-startTime="233">this light blue course. </span> <span class="line" data-startTime="239">And you can see that they </span><span class="line" data-startTime="239">actually mirror each other. </span> <span class="line" data-startTime="242">And I actually don't know </span><span class="line" data-startTime="242">a lot about ships. </span> <span class="line" data-startTime="244">Kurt is the expert on those. </span> <span class="line" data-startTime="248">But I can start to discern, </span><span class="line" data-startTime="248">just looking through this </span><span class="line" data-startTime="251">visualization, really </span><span class="line" data-startTime="251">interesting patterns. </span> <span class="line" data-startTime="254">And actually start to interact </span><span class="line" data-startTime="254">with the data dynamically. </span> <span class="line" data-startTime="259">So, go back to the slides, </span><span class="line" data-startTime="259">because I get really excited </span><span class="line" data-startTime="264">about that stuff and </span><span class="line" data-startTime="264">want to keep going. </span> <span class="line" data-startTime="266">So this is the overall structure </span><span class="line" data-startTime="266">of what we're doing. </span> <span class="line" data-startTime="270">Ships are broadcasting </span><span class="line" data-startTime="270">their locations. </span></p>

<p><span class="line" data-startTime="272">We are getting information </span><span class="line" data-startTime="272">from satellites and </span><span class="line" data-startTime="277">ground-based receivers that </span><span class="line" data-startTime="277">are picking that up. </span> <span class="line" data-startTime="279">That data is being pushed </span><span class="line" data-startTime="279">into Google Cloud. </span> <span class="line" data-startTime="283">And then we are doing </span><span class="line" data-startTime="283">stuff to it. </span> <span class="line" data-startTime="285">And we're going to talk to you </span><span class="line" data-startTime="285">about what we're doing and how </span><span class="line" data-startTime="288">that actually works. </span> <span class="line" data-startTime="289">And then it gets pushed </span><span class="line" data-startTime="289">down to the user. </span> <span class="line" data-startTime="294">And we are going to use </span><span class="line" data-startTime="294">all the Clouds. </span> <span class="line" data-startTime="297">So this is pretty exciting. </span> <span class="line" data-startTime="300">This is another reason we just </span><span class="line" data-startTime="300">were like, oh yeah, we need </span><span class="line" data-startTime="303">this functionality. </span></p>

<p><span class="line" data-startTime="304">Wait, we've got that. </span> <span class="line" data-startTime="306">So with that, I'm going to pass </span><span class="line" data-startTime="306">that on to Kurt, who will </span><span class="line" data-startTime="310">talk to you about </span><span class="line" data-startTime="310">gathering data. </span></p>

<p class="speaker"><span class="line" data-starttime="312"><span class="speakerName">Kurt Schwehr</span>: Thank you, Mano. </span> <span class="line" data-startTime="313">So I'm going to give you the </span><span class="line" data-startTime="313">context behind the data that </span><span class="line" data-startTime="316">we're working with. </span> <span class="line" data-startTime="317">It's always important to </span><span class="line" data-startTime="317">understand the domain knowledge. </span> <span class="line" data-startTime="319">But I want you to remember when </span><span class="line" data-startTime="319">you're looking at the </span><span class="line" data-startTime="321">details here that this isn't </span><span class="line" data-startTime="321">just about ships. </span> <span class="line" data-startTime="323">This is about whatever data </span><span class="line" data-startTime="323">you would like that has a </span><span class="line" data-startTime="326">spatial component. </span> <span class="line" data-startTime="326">Even if it doesn't, these </span><span class="line" data-startTime="326">tools can help you. </span> <span class="line" data-startTime="330">So let's talk about what </span><span class="line" data-startTime="330">is the automatic </span><span class="line" data-startTime="332">identification system. </span> <span class="line" data-startTime="334">It's a VHF system that was </span><span class="line" data-startTime="334">designed in the 1990s for </span><span class="line" data-startTime="338">collision avoidance and </span><span class="line" data-startTime="338">to help ships know </span><span class="line" data-startTime="340">who's around them. </span> <span class="line" data-startTime="341">It's a public system where </span><span class="line" data-startTime="341">everybody tells everybody </span><span class="line" data-startTime="343">else, hey, my name is so-and-so, </span><span class="line" data-startTime="343">I'm going this way. </span> <span class="line" data-startTime="347">And it's basically designed to </span><span class="line" data-startTime="347">make mariners' lives better. </span></p>

<p><span class="line" data-startTime="349">These people out there, these </span><span class="line" data-startTime="349">professional folks working at </span><span class="line" data-startTime="352">sea, have a tough job. </span> <span class="line" data-startTime="354">They get pushed around by little </span><span class="line" data-startTime="354">tug boats all the time. </span> <span class="line" data-startTime="356">Like you see here, a large ship, </span><span class="line" data-startTime="356">to make it through a </span><span class="line" data-startTime="358">harbor, has to get help </span><span class="line" data-startTime="358">from its buddies. </span> <span class="line" data-startTime="361">And if you forget the name of </span><span class="line" data-startTime="361">your tug boat on your port </span><span class="line" data-startTime="363">side and you call the wrong ship </span><span class="line" data-startTime="363">out, you might get pushed </span><span class="line" data-startTime="366">the wrong way. </span> <span class="line" data-startTime="367">Those kinds of things are pretty </span><span class="line" data-startTime="367">complicated and ships </span><span class="line" data-startTime="370">have a lot going on. </span> <span class="line" data-startTime="371">Now, being that this is a VHF </span><span class="line" data-startTime="371">system, it's a line of sight. </span></p>

<p><span class="line" data-startTime="374">So it means that you can see </span><span class="line" data-startTime="374">out a little ways, maybe 80 </span><span class="line" data-startTime="378">kilometers if it's good. </span> <span class="line" data-startTime="380">But it doesn't make for great </span><span class="line" data-startTime="380">visualization if you just have </span><span class="line" data-startTime="383">80 kilometers and you're </span><span class="line" data-startTime="383">talking about all the </span><span class="line" data-startTime="384">ships in the world. </span> <span class="line" data-startTime="385">It means we really </span><span class="line" data-startTime="385">have a problem. </span> <span class="line" data-startTime="387">But we actually have </span><span class="line" data-startTime="387">a solution. </span> <span class="line" data-startTime="389">We have some friendly folks at </span><span class="line" data-startTime="389">SpaceQuest and Analyze who </span><span class="line" data-startTime="393">worked with us to create a </span><span class="line" data-startTime="393">demonstration data set that is </span><span class="line" data-startTime="396">from their polar orbiting </span><span class="line" data-startTime="396">satellites. </span> <span class="line" data-startTime="398">The satellite's going </span><span class="line" data-startTime="398">around the Earth. </span></p>

<p><span class="line" data-startTime="399">And it's slowly going around, </span><span class="line" data-startTime="399">looking over different regions </span><span class="line" data-startTime="402">and picking up all the </span><span class="line" data-startTime="402">ships below it. </span> <span class="line" data-startTime="404">And when you're up in space, </span><span class="line" data-startTime="404">line of sight covers a pretty </span><span class="line" data-startTime="407">good-sized patch of ground. </span> <span class="line" data-startTime="408">And if you keep moving, you'll </span><span class="line" data-startTime="408">get the whole globe. </span> <span class="line" data-startTime="411">So this is our basic global data </span><span class="line" data-startTime="411">set coverage that we're </span><span class="line" data-startTime="413">using in our example. </span> <span class="line" data-startTime="414">We'll get some more </span><span class="line" data-startTime="414">examples in here. </span> <span class="line" data-startTime="417">We've got, from the National </span><span class="line" data-startTime="417">Oceanographic and Atmospheric </span><span class="line" data-startTime="421">Administration, or NOAH, we have </span><span class="line" data-startTime="421">three receivers that are </span><span class="line" data-startTime="424">professionally-installed on </span><span class="line" data-startTime="424">towers in the Massachusetts </span><span class="line" data-startTime="428">area around Boston. </span> <span class="line" data-startTime="429">And it's covering the Stellwagen </span><span class="line" data-startTime="429">Bank National </span><span class="line" data-startTime="431">Marine Sanctuary, where they're </span><span class="line" data-startTime="431">protecting white </span><span class="line" data-startTime="434">whales from going extinct. </span> <span class="line" data-startTime="436">And this gives you a long </span><span class="line" data-startTime="436">time series demo. </span></p>

<p><span class="line" data-startTime="438">So we have from 2005 to present </span><span class="line" data-startTime="438">in that data set. </span> <span class="line" data-startTime="441">It's hundreds of millions </span><span class="line" data-startTime="441">of data points. </span> <span class="line" data-startTime="444">And it gives you that long time </span><span class="line" data-startTime="444">series to play with in </span><span class="line" data-startTime="446">terms of demoing. </span> <span class="line" data-startTime="448">And to really mix it up, we'd </span><span class="line" data-startTime="448">like to show you what can be </span><span class="line" data-startTime="453">done on the small scale. </span> <span class="line" data-startTime="454">We always like to start with </span><span class="line" data-startTime="454">a little test case. </span> <span class="line" data-startTime="456">And so here we have a happy </span><span class="line" data-startTime="456">engineer at Google who's just </span><span class="line" data-startTime="459">installed his first AIS receiver </span><span class="line" data-startTime="459">on his desk in the </span><span class="line" data-startTime="462">San Francisco office. </span></p>

<p><span class="line" data-startTime="464">You can make fun of him &mdash; </span><span class="line" data-startTime="464">he's having fun in </span><span class="line" data-startTime="466">the front row here. </span> <span class="line" data-startTime="468">And we put this receiver up in </span><span class="line" data-startTime="468">the Boston office to show you </span><span class="line" data-startTime="470">that you can get going with </span><span class="line" data-startTime="470">almost no investment. </span> <span class="line" data-startTime="473">We bought the cheapest receiver </span><span class="line" data-startTime="473">you can get and we </span><span class="line" data-startTime="475">hooked it up to this </span><span class="line" data-startTime="475">workstation </span><span class="line" data-startTime="476">that was already there. </span> <span class="line" data-startTime="477">It's not near a window. </span> <span class="line" data-startTime="479">But it works great. </span> <span class="line" data-startTime="482">And since we're Google and we've </span><span class="line" data-startTime="482">got to cover the whole </span><span class="line" data-startTime="485">globe, here, we threw another </span><span class="line" data-startTime="485">one in the office in Sydney. </span> <span class="line" data-startTime="488">And it has some company with an </span><span class="line" data-startTime="488">Android and a nice gopher </span><span class="line" data-startTime="492">to go with it. </span> <span class="line" data-startTime="493">And to show you how cheesy you </span><span class="line" data-startTime="493">can get and still get away </span><span class="line" data-startTime="496">with creating interesting data </span><span class="line" data-startTime="496">sets, they took a TV antenna </span><span class="line" data-startTime="499">aerial, which isn't totally </span><span class="line" data-startTime="499">matched up right, and so I get </span><span class="line" data-startTime="502">a kick out the antenna </span><span class="line" data-startTime="502">here, which isn't </span><span class="line" data-startTime="504">designed for this project. </span> <span class="line" data-startTime="505">But we still get some good ship </span><span class="line" data-startTime="505">traffic, because they are </span><span class="line" data-startTime="508">looking out the window </span><span class="line" data-startTime="508">at ships. </span> <span class="line" data-startTime="511">So that gives us a data set. </span></p>

<p><span class="line" data-startTime="512">But when we say all the ships </span><span class="line" data-startTime="512">in the world, we really have </span><span class="line" data-startTime="515">to qualify that. </span> <span class="line" data-startTime="516">It's most of the ships </span><span class="line" data-startTime="516">in the world. </span> <span class="line" data-startTime="518">And I like to show a ship that's </span><span class="line" data-startTime="518">called a Little Toot, </span><span class="line" data-startTime="521">on the left there. </span> <span class="line" data-startTime="523">She is a water taxi. </span> <span class="line" data-startTime="524">For a $2 ride, you can go out </span><span class="line" data-startTime="524">and see the sea lions or you </span><span class="line" data-startTime="527">ca get dropped of on your ship, </span><span class="line" data-startTime="527">if you're meeting up </span><span class="line" data-startTime="529">with a big ship. </span> <span class="line" data-startTime="530">She's too small to be required </span><span class="line" data-startTime="530">to carry AIS. </span> <span class="line" data-startTime="532">The larger ships are required. </span> <span class="line" data-startTime="534">For something called "the safety </span><span class="line" data-startTime="534">of life at sea," they </span><span class="line" data-startTime="536">have to carry that so that they </span><span class="line" data-startTime="536">can keep coordinating. </span></p>

<p><span class="line" data-startTime="540">The smaller guys, it's up to </span><span class="line" data-startTime="540">them whether or not the ship </span><span class="line" data-startTime="542">wants to get AIS. </span> <span class="line" data-startTime="544">But the neat thing is </span><span class="line" data-startTime="544">that, this whole </span><span class="line" data-startTime="546">community has come together. </span> <span class="line" data-startTime="547">They realized that this is so </span><span class="line" data-startTime="547">important for everybody that's </span><span class="line" data-startTime="550">smaller ships and smaller </span><span class="line" data-startTime="550">ships are </span><span class="line" data-startTime="551">starting to add this. </span> <span class="line" data-startTime="552">And you can see on the right </span><span class="line" data-startTime="552">here, and engineer in New </span><span class="line" data-startTime="554">England who took about an hour </span><span class="line" data-startTime="554">to install this on an oil </span><span class="line" data-startTime="557">spill response boat. </span> <span class="line" data-startTime="558">So the data set is getting </span><span class="line" data-startTime="558">more exciting over time. </span> <span class="line" data-startTime="560">So it really provides a great </span><span class="line" data-startTime="560">way to look at spatial data. </span> <span class="line" data-startTime="564">So what are some of the </span><span class="line" data-startTime="564">challenges with this data set? </span><span class="line" data-startTime="567">Because no data is easy. </span> <span class="line" data-startTime="569">And, as I've often heard, real </span><span class="line" data-startTime="569">data has real warts. </span></p>

<p><span class="line" data-startTime="573">So our first challenge </span><span class="line" data-startTime="573">is data size. </span> <span class="line" data-startTime="575">We just have a lot of it. </span> <span class="line" data-startTime="576">If you put it on your laptop, </span><span class="line" data-startTime="576">your laptop starts smoking, </span><span class="line" data-startTime="579">the fans start going. </span> <span class="line" data-startTime="580">And you wait and you wait </span><span class="line" data-startTime="580">and nothing happens. </span> <span class="line" data-startTime="583">I've had queries that I've </span><span class="line" data-startTime="583">wanted to do for years. </span> <span class="line" data-startTime="585">And it's just been, I don't </span><span class="line" data-startTime="585">want to let my laptop sit </span><span class="line" data-startTime="587">there for two weeks waiting </span><span class="line" data-startTime="587">for it to figure out the </span><span class="line" data-startTime="590">number is 42. </span> <span class="line" data-startTime="593">Beyond that, we have </span><span class="line" data-startTime="593">stickier problems, </span><span class="line" data-startTime="595">which is data quality. </span> <span class="line" data-startTime="596">We have bad points. </span> <span class="line" data-startTime="597">We have ships out there with </span><span class="line" data-startTime="597">GPSs that are non-functional. </span> <span class="line" data-startTime="601">You might have heard this </span><span class="line" data-startTime="601">morning about lightning </span><span class="line" data-startTime="602">hitting ships. </span></p>

<p><span class="line" data-startTime="603">We had a ship running around </span><span class="line" data-startTime="603">that kept changing sides in </span><span class="line" data-startTime="605">its report. </span> <span class="line" data-startTime="606">It was 10 meters longer, 10 </span><span class="line" data-startTime="606">meters shorter, ten meters </span><span class="line" data-startTime="608">longer, ten meters shorter, </span><span class="line" data-startTime="608">all day long. </span> <span class="line" data-startTime="610">What's going on? </span><span class="line" data-startTime="611">So we had to call up and say, </span><span class="line" data-startTime="611">you guys OK out there? </span><span class="line" data-startTime="614">Well, last year they got </span><span class="line" data-startTime="614">hit by lightning. </span> <span class="line" data-startTime="618">We also have some other </span><span class="line" data-startTime="618">challenges in that when you </span><span class="line" data-startTime="620">have all these coordinated </span><span class="line" data-startTime="620">things like a satellite and a </span><span class="line" data-startTime="622">bunch of receivers onshore, you </span><span class="line" data-startTime="622">might hear the same ship </span><span class="line" data-startTime="625">three or four times. </span> <span class="line" data-startTime="627">That's a good thing in that </span><span class="line" data-startTime="627">you're getting good coverage </span><span class="line" data-startTime="629">and making sure that you </span><span class="line" data-startTime="629">don't miss anything. </span></p>

<p><span class="line" data-startTime="631">But you have to sort of cull </span><span class="line" data-startTime="631">that down so that you're only </span><span class="line" data-startTime="634">dealing with one point from each </span><span class="line" data-startTime="634">location and you don't </span><span class="line" data-startTime="636">have this over stacking of data </span><span class="line" data-startTime="636">that you don't need to be </span><span class="line" data-startTime="639">dealing with. </span> <span class="line" data-startTime="640">You could make your problem </span><span class="line" data-startTime="640">three or four times harder </span><span class="line" data-startTime="642">than it already is. </span> <span class="line" data-startTime="645">So let's talk about &mdash; </span><span class="line" data-startTime="645">we've got this data. </span> <span class="line" data-startTime="646">Let's talk about bringing it in </span><span class="line" data-startTime="646">and keeping it someplace so </span><span class="line" data-startTime="649">we can actually do something </span><span class="line" data-startTime="649">with it. </span> <span class="line" data-startTime="650">Because if we don't collect it, </span><span class="line" data-startTime="650">it's just going to go into </span><span class="line" data-startTime="653">the either and somebody at the </span><span class="line" data-startTime="653">nearest planet or star will </span><span class="line" data-startTime="656">find out about it later on. </span> <span class="line" data-startTime="657">That's not any good to us. </span> <span class="line" data-startTime="660">So we started off with our </span><span class="line" data-startTime="660">first cloud entity. </span> <span class="line" data-startTime="663">We have Cloud Storage. </span></p>

<p><span class="line" data-startTime="665">Google Cloud Storage has got all </span><span class="line" data-startTime="665">kinds of features that are </span><span class="line" data-startTime="668">really helpful for us. </span> <span class="line" data-startTime="669">The first one is access </span><span class="line" data-startTime="669">control lists. </span> <span class="line" data-startTime="671">If we want to split up our </span><span class="line" data-startTime="671">partners and work with a </span><span class="line" data-startTime="673">couple different groups and we </span><span class="line" data-startTime="673">don't want them to share data </span><span class="line" data-startTime="676">because of particular agreements </span><span class="line" data-startTime="676">or whatever reasons </span><span class="line" data-startTime="678">you've got, we can set up access </span><span class="line" data-startTime="678">control lists as the </span><span class="line" data-startTime="681">user of the bucket where </span><span class="line" data-startTime="681">you store your data. </span> <span class="line" data-startTime="683">And we can control </span><span class="line" data-startTime="683">that on the fly. </span></p>

<p><span class="line" data-startTime="685">It's really simple. </span> <span class="line" data-startTime="686">We also have this great </span><span class="line" data-startTime="686">feature of scale. </span> <span class="line" data-startTime="688">We could start off with 10 </span><span class="line" data-startTime="688">bytes, 100 bytes, an empty </span><span class="line" data-startTime="692">directory, whatever you want. </span> <span class="line" data-startTime="693">And you could scale up to four </span><span class="line" data-startTime="693">gigabytes and beyond. </span> <span class="line" data-startTime="696">You don't have to ask anybody's </span><span class="line" data-startTime="696">permission. </span> <span class="line" data-startTime="697">And if you're done with </span><span class="line" data-startTime="697">the data storage, </span><span class="line" data-startTime="699">you get rid of it. </span> <span class="line" data-startTime="700">You don't have to run out to </span><span class="line" data-startTime="700">the store and buy more hard </span><span class="line" data-startTime="701">drives and then be done </span><span class="line" data-startTime="701">with them, now what? </span><span class="line" data-startTime="704">So it gives you that flexibility </span><span class="line" data-startTime="704">to keep your data </span><span class="line" data-startTime="706">around in whatever </span><span class="line" data-startTime="706">form you want. </span> <span class="line" data-startTime="709">It has a feature for us that's </span><span class="line" data-startTime="709">extremely important. </span> <span class="line" data-startTime="711">And that's that it's fast. </span></p>

<p><span class="line" data-startTime="713">Getting the data into the Google </span><span class="line" data-startTime="713">Cloud Storage pretty </span><span class="line" data-startTime="715">quick, that's amazing. </span> <span class="line" data-startTime="717">There's Google data centers all </span><span class="line" data-startTime="717">over the world that will </span><span class="line" data-startTime="719">help get that data in there. </span> <span class="line" data-startTime="721">But even better yet, once you </span><span class="line" data-startTime="721">get into that cloud, all the </span><span class="line" data-startTime="724">thing that you will do with it </span><span class="line" data-startTime="724">afterwards, the latency with </span><span class="line" data-startTime="726">inside is so low, </span><span class="line" data-startTime="726">it's fantastic. </span> <span class="line" data-startTime="728">It really makes the job of </span><span class="line" data-startTime="728">building all the tools that </span><span class="line" data-startTime="730">come along later on so much </span><span class="line" data-startTime="730">easier because you're not </span><span class="line" data-startTime="733">waiting for your data to get </span><span class="line" data-startTime="733">from the storage to your </span><span class="line" data-startTime="735">processors. </span> <span class="line" data-startTime="738">OK, so now we've got </span><span class="line" data-startTime="738">data stored. </span> <span class="line" data-startTime="740">That's great. </span> <span class="line" data-startTime="741">So what does it look like? </span><span class="line" data-startTime="742">I'm going to show you something </span><span class="line" data-startTime="742">that's a little </span><span class="line" data-startTime="744">frightening here. </span></p>

<p><span class="line" data-startTime="744">This is called NEMA. </span> <span class="line" data-startTime="746">And it's not just normal NEMA, </span><span class="line" data-startTime="746">which is comma separated </span><span class="line" data-startTime="748">value, or CSV, data. </span> <span class="line" data-startTime="750">This is actually armored, </span><span class="line" data-startTime="750">binary six-bit data with </span><span class="line" data-startTime="755">integers that are like three </span><span class="line" data-startTime="755">bits long, and all sorts of </span><span class="line" data-startTime="757">strange things. </span> <span class="line" data-startTime="758">It's really a pain. </span> <span class="line" data-startTime="760">I hope all can read exactly </span><span class="line" data-startTime="760">what that says. </span> <span class="line" data-startTime="762">That says I'm a ship position </span><span class="line" data-startTime="762">message type three. </span> <span class="line" data-startTime="765">And I'm at a latitude </span><span class="line" data-startTime="765">and longitude. </span> <span class="line" data-startTime="766">Right got it? </span><span class="line" data-startTime="768">I don't. </span> <span class="line" data-startTime="770">So we need some way to convert </span><span class="line" data-startTime="770">this from the batch, which is </span><span class="line" data-startTime="773">completely useless to us, to </span><span class="line" data-startTime="773">something like a simple CSV </span><span class="line" data-startTime="777">file where we can actually see </span><span class="line" data-startTime="777">a column of latitudes and </span><span class="line" data-startTime="779">longitudes. </span> <span class="line" data-startTime="781">And with that, we </span><span class="line" data-startTime="781">have something </span><span class="line" data-startTime="783">called Compute Engine. </span></p>

<p><span class="line" data-startTime="784">And I've written a library </span><span class="line" data-startTime="784">called libais that's a C++ </span><span class="line" data-startTime="787">library designed to do this </span><span class="line" data-startTime="787">decoding really fast. </span> <span class="line" data-startTime="791">It's taken me years to </span><span class="line" data-startTime="791">get this code going. </span> <span class="line" data-startTime="793">And I'm not going to go right </span><span class="line" data-startTime="793">into the language just because </span><span class="line" data-startTime="795">of the investment of time. </span> <span class="line" data-startTime="797">And what am I going to do? </span><span class="line" data-startTime="798">Compute. </span> <span class="line" data-startTime="799">We're in this, where we have </span><span class="line" data-startTime="799">Compute Engine and App Engine </span><span class="line" data-startTime="802">and all these other </span><span class="line" data-startTime="802">great tools. </span> <span class="line" data-startTime="803">App Engine seems like the </span><span class="line" data-startTime="803">reasonable solution, but it </span><span class="line" data-startTime="805">doesn't support C++. </span> <span class="line" data-startTime="807">Well now, with Compute Engine, </span><span class="line" data-startTime="807">we have the ability to use </span><span class="line" data-startTime="810">generic Linux instances where </span><span class="line" data-startTime="810">I can put whatever I want. </span></p>

<p><span class="line" data-startTime="812">And I'm a control freak so I </span><span class="line" data-startTime="812">get to put my software on </span><span class="line" data-startTime="815">there and control it </span><span class="line" data-startTime="815">the way I want. </span> <span class="line" data-startTime="817">That's awesome. </span> <span class="line" data-startTime="818">But if I had another language &mdash; </span><span class="line" data-startTime="818">say I love R or I </span><span class="line" data-startTime="821">love Pearl or Python or </span><span class="line" data-startTime="821">Ruby, Go, Fortran &mdash; </span><span class="line" data-startTime="825">whatever you like, </span><span class="line" data-startTime="825">put it on there. </span> <span class="line" data-startTime="827">Run it your way. </span> <span class="line" data-startTime="828">It's great. </span> <span class="line" data-startTime="829">And on top of that, when you </span><span class="line" data-startTime="829">build a Google Compute Engine </span><span class="line" data-startTime="832">instance, it comes with these </span><span class="line" data-startTime="832">things called surface accounts </span><span class="line" data-startTime="835">that are OAuth 2. </span> <span class="line" data-startTime="837">I always get confused between </span><span class="line" data-startTime="837">often it's OAuth </span><span class="line" data-startTime="838">and it's OAuth 2. </span> <span class="line" data-startTime="841">These surface accounts already </span><span class="line" data-startTime="841">have this authentication built </span><span class="line" data-startTime="843">in, so your instance is already </span><span class="line" data-startTime="843">available to get the </span><span class="line" data-startTime="846">data that you gave it </span><span class="line" data-startTime="846">permission for. </span> <span class="line" data-startTime="847">There's no fiddling around. </span></p>

<p><span class="line" data-startTime="848">It's really quick. </span> <span class="line" data-startTime="851">So we're running this </span><span class="line" data-startTime="851">libais code. </span> <span class="line" data-startTime="853">It parses all this wonky-looking </span><span class="line" data-startTime="853">data. </span> <span class="line" data-startTime="856">And we get out something that </span><span class="line" data-startTime="856">looks a little more </span><span class="line" data-startTime="857">manageable. </span> <span class="line" data-startTime="858">Here's a quick table of decoding </span><span class="line" data-startTime="858">that same very </span><span class="line" data-startTime="860">message that's right above. </span> <span class="line" data-startTime="862">We have this thing called MMSI, </span><span class="line" data-startTime="863">that's our ship ID number. </span> <span class="line" data-startTime="865">Navigation status, </span><span class="line" data-startTime="865">are we sailing? </span><span class="line" data-startTime="867">It's just an integer you </span><span class="line" data-startTime="867">map into a table. </span> <span class="line" data-startTime="869">ROT, what's that? </span><span class="line" data-startTime="870">Well that's Rate Of Turn. </span></p>

<p><span class="line" data-startTime="872">It's whether the ship's going </span><span class="line" data-startTime="872">left, right, straight. </span> <span class="line" data-startTime="873">We have SOG, Speed </span><span class="line" data-startTime="873">Over Ground. </span> <span class="line" data-startTime="876">Longitude, Latitude, Course </span><span class="line" data-startTime="876">Over Ground, which is the </span><span class="line" data-startTime="879">direction the ship is moving. </span> <span class="line" data-startTime="880">And True Heading, which is </span><span class="line" data-startTime="880">the way it's pointed. </span> <span class="line" data-startTime="882">So sometimes ships have to point </span><span class="line" data-startTime="882">into the wind to go the </span><span class="line" data-startTime="885">direction they want. </span> <span class="line" data-startTime="886">So, great. </span> <span class="line" data-startTime="886">We got some data decoded. </span> <span class="line" data-startTime="888">And let's take a look at what </span><span class="line" data-startTime="888">it's like to create one of </span><span class="line" data-startTime="891">these instances. </span> <span class="line" data-startTime="893">So I record a little video </span><span class="line" data-startTime="893">of firing up an instance. </span> <span class="line" data-startTime="898">And for me, I like to </span><span class="line" data-startTime="898">create a little &mdash; </span><span class="line" data-startTime="901">going into Linux </span><span class="line" data-startTime="901">image on there. </span> <span class="line" data-startTime="903">I've created an image out in the </span><span class="line" data-startTime="903">world that's going to have </span><span class="line" data-startTime="906">all my code. </span></p>

<p><span class="line" data-startTime="906">It's ready to talk to all </span><span class="line" data-startTime="906">the services I want. </span> <span class="line" data-startTime="908">It's going to load data from the </span><span class="line" data-startTime="908">place I want, put it where </span><span class="line" data-startTime="910">it's supposed to go, take </span><span class="line" data-startTime="910">care of all of that. </span> <span class="line" data-startTime="913">So here I'm using at the gcutil </span><span class="line" data-startTime="913">instance to add a new </span><span class="line" data-startTime="916">instance in there. </span> <span class="line" data-startTime="917">Telling it which Linux </span><span class="line" data-startTime="917">instance I've </span><span class="line" data-startTime="919">created, where is it? </span><span class="line" data-startTime="920">Go find it. </span> <span class="line" data-startTime="921">And let's fire up a </span><span class="line" data-startTime="921">virtual machine. </span> <span class="line" data-startTime="924">And this is great. </span> <span class="line" data-startTime="924">You can control however </span><span class="line" data-startTime="924">many you want. </span> <span class="line" data-startTime="926">You can start them. </span> <span class="line" data-startTime="927">You can stop them. </span></p>

<p><span class="line" data-startTime="927">And it goes pretty quick. </span> <span class="line" data-startTime="929">It's less than about a minute </span><span class="line" data-startTime="929">and a half for this particular </span><span class="line" data-startTime="931">instance to get going from "I </span><span class="line" data-startTime="931">want it" to "It's running and </span><span class="line" data-startTime="934">I can access SSH into it". </span> <span class="line" data-startTime="936">I think it's pretty fantastic. </span> <span class="line" data-startTime="944">All right, so we've got data </span><span class="line" data-startTime="944">and we're moving it around. </span> <span class="line" data-startTime="947">But we have a problem. </span> <span class="line" data-startTime="949">So data comes in from </span><span class="line" data-startTime="949">our sensors. </span> <span class="line" data-startTime="951">We have a little script that's </span><span class="line" data-startTime="951">running out on our sensors. </span> <span class="line" data-startTime="954">It's using buckets stores API </span><span class="line" data-startTime="954">to load that into a Google </span><span class="line" data-startTime="959">Cloud Store bucket. </span> <span class="line" data-startTime="960">And then we want to run </span><span class="line" data-startTime="960">Compute Engine on it. </span> <span class="line" data-startTime="962">But how do we know to </span><span class="line" data-startTime="962">get that data there? </span><span class="line" data-startTime="965">Well, there's a new feature </span><span class="line" data-startTime="965">out called Bucket </span><span class="line" data-startTime="967">Notifications and you can tell </span><span class="line" data-startTime="967">the infrastructure at Google </span><span class="line" data-startTime="971">that, hey, when somebody puts a </span><span class="line" data-startTime="971">file in that bucket, I want </span><span class="line" data-startTime="974">to know about it. </span></p>

<p><span class="line" data-startTime="975">Let me know. </span> <span class="line" data-startTime="976">And you'll hear later on a </span><span class="line" data-startTime="976">little bit more about how </span><span class="line" data-startTime="978">that's done with App Engine to </span><span class="line" data-startTime="978">get those things registered </span><span class="line" data-startTime="980">and to do something with it. </span> <span class="line" data-startTime="982">But what we do is we take those </span><span class="line" data-startTime="982">notifications and turn </span><span class="line" data-startTime="984">them into a task queue entry. </span> <span class="line" data-startTime="987">And what we do is look this </span><span class="line" data-startTime="987">queue of things that we would </span><span class="line" data-startTime="989">like to process and then I can </span><span class="line" data-startTime="989">fire any number of instances </span><span class="line" data-startTime="993">that I want I could stagger them </span><span class="line" data-startTime="993">around the globe in each </span><span class="line" data-startTime="995">of our data centers that you </span><span class="line" data-startTime="995">could split off into, built </span><span class="line" data-startTime="998">myself a load balancing system </span><span class="line" data-startTime="998">however I feel like, and just </span><span class="line" data-startTime="1002">let those instances reach into </span><span class="line" data-startTime="1002">that queue and take the next </span><span class="line" data-startTime="1004">one off and lease </span><span class="line" data-startTime="1004">it for awhile. </span></p>

<p><span class="line" data-startTime="1006">And if they die, the </span><span class="line" data-startTime="1006">lease will expire. </span> <span class="line" data-startTime="1007">The data goes back into </span><span class="line" data-startTime="1007">the task queue. </span> <span class="line" data-startTime="1010">And some other instance </span><span class="line" data-startTime="1010">will pick it up. </span> <span class="line" data-startTime="1012">It gives them the ability </span><span class="line" data-startTime="1012">to control that. </span> <span class="line" data-startTime="1014">So even better, when I'm done </span><span class="line" data-startTime="1014">with the data, I write it back </span><span class="line" data-startTime="1017">into a bucket and I </span><span class="line" data-startTime="1017">forget about it. </span> <span class="line" data-startTime="1019">I don't have to do anything. </span> <span class="line" data-startTime="1019">I'm in a computer </span><span class="line" data-startTime="1019">engine world. </span> <span class="line" data-startTime="1020">I can ignore everybody else. </span> <span class="line" data-startTime="1022">As long as I'm writing </span><span class="line" data-startTime="1022">my CSVs into the </span><span class="line" data-startTime="1024">bucket store, I'm done. </span> <span class="line" data-startTime="1026">And I get to hand </span><span class="line" data-startTime="1026">off to Francesc. </span></p>

<p><span class="line" data-startTime="1029">FRANCESC CAMPOY FLORES: </span><span class="line" data-startTime="1029">Thank you. </span> <span class="line" data-startTime="1031">OK. </span> <span class="line" data-startTime="1032">So now we have this very </span><span class="line" data-startTime="1032">big amount of data. </span> <span class="line" data-startTime="1035">I want to serve it. </span> <span class="line" data-startTime="1036">So you could imagine, we </span><span class="line" data-startTime="1036">have it as CSV files. </span> <span class="line" data-startTime="1039">So you could imagine writing </span><span class="line" data-startTime="1039">something that will parse all </span><span class="line" data-startTime="1043">the CSV and imagine that we </span><span class="line" data-startTime="1043">want to get the latest </span><span class="line" data-startTime="1045">positions for all the ships. </span> <span class="line" data-startTime="1047">Well, that's easy to write but </span><span class="line" data-startTime="1047">you have to run it yourself. </span> <span class="line" data-startTime="1051">There's probably a better </span><span class="line" data-startTime="1051">way to do it. </span> <span class="line" data-startTime="1053">Well we can put all that </span><span class="line" data-startTime="1053">data in Big Query. </span> <span class="line" data-startTime="1056">So the advantage of BigQuery </span><span class="line" data-startTime="1056">is that it allows you to </span><span class="line" data-startTime="1059">crunch a huge amount of </span><span class="line" data-startTime="1059">data in a little time. </span> <span class="line" data-startTime="1063">So it's not hours or minutes. </span></p>

<p><span class="line" data-startTime="1065">It's really seconds. </span> <span class="line" data-startTime="1067">I'll do a little demo. </span> <span class="line" data-startTime="1069">And the important part of this </span><span class="line" data-startTime="1069">is that having queries running </span><span class="line" data-startTime="1073">that fast allows you to iterate </span><span class="line" data-startTime="1073">very fast and really </span><span class="line" data-startTime="1077">find which queries give you back </span><span class="line" data-startTime="1077">interacting information. </span> <span class="line" data-startTime="1081">So first, we have to load </span><span class="line" data-startTime="1081">that data into BigQuery. </span> <span class="line" data-startTime="1088">And this is the way </span><span class="line" data-startTime="1088">we're doing it. </span> <span class="line" data-startTime="1089">So we're using again bucket </span><span class="line" data-startTime="1089">notifications. </span> <span class="line" data-startTime="1092">So when a Compute Engine </span><span class="line" data-startTime="1092">instance finishes processing </span><span class="line" data-startTime="1097">one file and creates this new </span><span class="line" data-startTime="1097">file with CSV data into the </span><span class="line" data-startTime="1102">bucket, we get a notification. </span> <span class="line" data-startTime="1105">So it will be a post-request </span><span class="line" data-startTime="1105">on App Engine. </span> <span class="line" data-startTime="1108">And App Engine will request </span><span class="line" data-startTime="1108">BigQuery to load that file. </span> <span class="line" data-startTime="1112">So BigQuery and Cloud Storage </span><span class="line" data-startTime="1112">are related and actually </span><span class="line" data-startTime="1116">loading from Cloud Storage </span><span class="line" data-startTime="1116">is really fast. </span> <span class="line" data-startTime="1122">So </span><span class="line" data-startTime="1122">OK now we have all the </span><span class="line" data-startTime="1122">data on BigQuery and </span><span class="line" data-startTime="1126">we could run queries. </span></p>

<p><span class="line" data-startTime="1126">So now we have this </span><span class="line" data-startTime="1126">table here. </span> <span class="line" data-startTime="1131">It's 70 gigabytes, </span><span class="line" data-startTime="1131">which is a pretty </span><span class="line" data-startTime="1135">interesting amount of data. </span> <span class="line" data-startTime="1136">And it's 374 [INAUDIBLE] </span><span class="line" data-startTime="1139">rows. </span> <span class="line" data-startTime="1140">Every row represents a position </span><span class="line" data-startTime="1140">of a ship over time. </span> <span class="line" data-startTime="1146">And if you go [INAUDIBLE]. </span> <span class="line" data-startTime="1156">So this is the table. </span> <span class="line" data-startTime="1157">And we're going to be running </span><span class="line" data-startTime="1157">this little query here. </span> <span class="line" data-startTime="1163">So what we're doing here </span><span class="line" data-startTime="1163">is a full scan range. </span> <span class="line" data-startTime="1167">So we're going to get all </span><span class="line" data-startTime="1167">the rows in the table. </span> <span class="line" data-startTime="1170">And we're going to compute the </span><span class="line" data-startTime="1170">average position for every </span><span class="line" data-startTime="1172">hour, for every ship. </span> <span class="line" data-startTime="1174">So this is a pretty big query. </span> <span class="line" data-startTime="1177">Imagine how long it could take </span><span class="line" data-startTime="1177">to run this on your computer </span><span class="line" data-startTime="1180">or if it would run it. </span> <span class="line" data-startTime="1183">And it's a demo, so &mdash; </span><span class="line" data-startTime="1185">oh, there you go. </span> <span class="line" data-startTime="1186">Six seconds. </span></p>

<p><span class="line" data-startTime="1188">Interestingly, we saw that </span><span class="line" data-startTime="1188">there were 70 gigabytes. </span> <span class="line" data-startTime="1191">And here, we see the process. </span> <span class="line" data-startTime="1193">There's only 14. </span> <span class="line" data-startTime="1195">That's actually what </span><span class="line" data-startTime="1195">you're paying for. </span> <span class="line" data-startTime="1196">And that's actually the </span><span class="line" data-startTime="1196">amount of data that we </span><span class="line" data-startTime="1198">got from the data. </span> <span class="line" data-startTime="1199">Because we then get </span><span class="line" data-startTime="1199">all the columns. </span> <span class="line" data-startTime="1201">So that can be also very </span><span class="line" data-startTime="1201">important for you. </span> <span class="line" data-startTime="1207">So, just in case. </span> <span class="line" data-startTime="1209">OK. </span></p>

<p><span class="line" data-startTime="1211">Now let's see how to actually </span><span class="line" data-startTime="1211">get that data from BigQuery </span><span class="line" data-startTime="1216">into the browser. </span> <span class="line" data-startTime="1217">The first solution could be what </span><span class="line" data-startTime="1217">we saw before, that heat </span><span class="line" data-startTime="1220">map that is actually </span><span class="line" data-startTime="1220">you have &mdash; </span><span class="line" data-startTime="1222">well, we have App Engine </span><span class="line" data-startTime="1222">just serving some html. </span> <span class="line" data-startTime="1224">Inside of that html, there's </span><span class="line" data-startTime="1224">some JavaScript. </span> <span class="line" data-startTime="1227">And that JavaScript is actually </span><span class="line" data-startTime="1229">querying BigQuery directly. </span> <span class="line" data-startTime="1231">This is nice because </span><span class="line" data-startTime="1231">it's easy to do. </span> <span class="line" data-startTime="1234">And you can get a prototype </span><span class="line" data-startTime="1234">really fast. </span> <span class="line" data-startTime="1235">But as you saw, it's </span><span class="line" data-startTime="1235">fast to write it. </span> <span class="line" data-startTime="1238">Not fast to run it. </span> <span class="line" data-startTime="1239">So we have to improve that. </span> <span class="line" data-startTime="1241">That is not really enough. </span> <span class="line" data-startTime="1243">So what if actually all the </span><span class="line" data-startTime="1243">queries go to App Engine? </span><span class="line" data-startTime="1247">So we serve the page. </span> <span class="line" data-startTime="1249">But actually JavaScript </span><span class="line" data-startTime="1249">is now querying </span><span class="line" data-startTime="1252">our App Engine instance. </span> <span class="line" data-startTime="1254">And then we can serve </span><span class="line" data-startTime="1254">from BigQuery. </span></p>

<p><span class="line" data-startTime="1256">Well, this doesn't </span><span class="line" data-startTime="1256">change anything. </span> <span class="line" data-startTime="1258">This is actually making it even </span><span class="line" data-startTime="1258">slower, because now we </span><span class="line" data-startTime="1260">have two queries. </span> <span class="line" data-startTime="1262">But we can add things </span><span class="line" data-startTime="1262">on top of this. </span> <span class="line" data-startTime="1264">So the first thing we can do is </span><span class="line" data-startTime="1264">those BigQuery queries that </span><span class="line" data-startTime="1269">take normally tens of seconds, </span><span class="line" data-startTime="1269">we can actually store the </span><span class="line" data-startTime="1272">results of those queries </span><span class="line" data-startTime="1272">into our data storage. </span> <span class="line" data-startTime="1276">Once we have it there, next </span><span class="line" data-startTime="1276">time, instead of reading again </span><span class="line" data-startTime="1280">from BigQuery, we'll read </span><span class="line" data-startTime="1280">from Datastore. </span> <span class="line" data-startTime="1283">So now we've passed actually </span><span class="line" data-startTime="1283">from tens of seconds to some </span><span class="line" data-startTime="1286">seconds, which is nice, </span><span class="line" data-startTime="1286">but not good enough. </span> <span class="line" data-startTime="1291">So what if we also </span><span class="line" data-startTime="1291">add Memcache? </span><span class="line" data-startTime="1294">Now what we're doing </span><span class="line" data-startTime="1294">is we read from </span><span class="line" data-startTime="1297">Datastore or from BigQuery. </span> <span class="line" data-startTime="1299">But once we have this result </span><span class="line" data-startTime="1299">ready that is already </span><span class="line" data-startTime="1302">formatted either in binary </span><span class="line" data-startTime="1302">code or JSON. </span> <span class="line" data-startTime="1305">Once we have it ready, we store </span><span class="line" data-startTime="1305">that into Memcache. </span></p>

<p><span class="line" data-startTime="1309">Now, the second request, we'll </span><span class="line" data-startTime="1309">just get that from Memcache </span><span class="line" data-startTime="1312">directly and serve it. </span> <span class="line" data-startTime="1314">So we passed from tens of </span><span class="line" data-startTime="1314">seconds to seconds to hundreds </span><span class="line" data-startTime="1318">of milliseconds. </span> <span class="line" data-startTime="1320">So this is pretty amazing. </span> <span class="line" data-startTime="1322">And it allows us to actually </span><span class="line" data-startTime="1322">have an application that is </span><span class="line" data-startTime="1325">really fast and is really </span><span class="line" data-startTime="1325">interactive. </span> <span class="line" data-startTime="1327">So from the html part, just </span><span class="line" data-startTime="1327">you open the webpage. </span> <span class="line" data-startTime="1331">And before you can see the page, </span><span class="line" data-startTime="1331">you actually already </span><span class="line" data-startTime="1334">loaded all the data in it. </span> <span class="line" data-startTime="1337">So we implemented this in Go. </span> <span class="line" data-startTime="1340">Why? </span><span class="line" data-startTime="1340">Well, because it's very fast. </span></p>

<p><span class="line" data-startTime="1343">And it's very fast because it's </span><span class="line" data-startTime="1343">compiled to a binary code </span><span class="line" data-startTime="1347">into the App Engine servers. </span> <span class="line" data-startTime="1350">And this means two things. </span> <span class="line" data-startTime="1351">First, that it's running binary </span><span class="line" data-startTime="1351">code, which is, in </span><span class="line" data-startTime="1353">general, faster. </span> <span class="line" data-startTime="1354">And also that it creates </span><span class="line" data-startTime="1354">only one binary. </span> <span class="line" data-startTime="1357">And when you have to start a new </span><span class="line" data-startTime="1357">instance, you have to load </span><span class="line" data-startTime="1360">just one binary. </span> <span class="line" data-startTime="1361">That's it. </span> <span class="line" data-startTime="1362">That makes it orders of </span><span class="line" data-startTime="1362">magnitude faster than other </span><span class="line" data-startTime="1365">primary languages. </span> <span class="line" data-startTime="1366">So this is actually a very </span><span class="line" data-startTime="1366">good thing to have. </span> <span class="line" data-startTime="1368">Also, it's more efficient in </span><span class="line" data-startTime="1368">memory side, which allows you </span><span class="line" data-startTime="1374">to have less instances and also </span><span class="line" data-startTime="1377">more affordable instances. </span> <span class="line" data-startTime="1378">You don't need a huge amount </span><span class="line" data-startTime="1378">of RAM to run your jobs. </span> <span class="line" data-startTime="1382">And finally, it makes </span><span class="line" data-startTime="1382">concurrency very easy. </span> <span class="line" data-startTime="1385">And why is Concurrency </span><span class="line" data-startTime="1385">important? </span><span class="line" data-startTime="1386">Well concurrency, when you're </span><span class="line" data-startTime="1386">running on the Cloud, is </span><span class="line" data-startTime="1389">actually something that you </span><span class="line" data-startTime="1389">should be thinking about </span><span class="line" data-startTime="1391">because most of the time on the </span><span class="line" data-startTime="1391">Cloud, you're waiting for </span><span class="line" data-startTime="1394">something to happen. </span></p>

<p><span class="line" data-startTime="1395">While you're waiting for </span><span class="line" data-startTime="1395">something to happen, it could </span><span class="line" data-startTime="1397">be nice to be doing something </span><span class="line" data-startTime="1397">else at the same time. </span> <span class="line" data-startTime="1399">So let's see a little bit of </span><span class="line" data-startTime="1399">an example what I mean by </span><span class="line" data-startTime="1403">saying that Google </span><span class="line" data-startTime="1403">makes it easy to </span><span class="line" data-startTime="1404">write concurrent programs. </span> <span class="line" data-startTime="1407">So we have these </span><span class="line" data-startTime="1407">lines of code. </span> <span class="line" data-startTime="1410">Very simple things. </span> <span class="line" data-startTime="1411">We're just creating a </span><span class="line" data-startTime="1411">Memcache item and </span><span class="line" data-startTime="1413">putting into Memcache. </span></p>

<p><span class="line" data-startTime="1416">Very simple. </span> <span class="line" data-startTime="1417">Now imagine that this actually </span><span class="line" data-startTime="1417">takes too long. </span> <span class="line" data-startTime="1421">And this is actually something </span><span class="line" data-startTime="1421">that we do at </span><span class="line" data-startTime="1422">the end of the request. </span> <span class="line" data-startTime="1423">So imagine that these days, ten </span><span class="line" data-startTime="1423">seconds, we're actually </span><span class="line" data-startTime="1426">waiting for that before </span><span class="line" data-startTime="1426">we answer to the user. </span> <span class="line" data-startTime="1429">That's not something </span><span class="line" data-startTime="1429">nice to have. </span> <span class="line" data-startTime="1431">What if we want our user to have </span><span class="line" data-startTime="1431">an answer in less than </span><span class="line" data-startTime="1434">one second? </span><span class="line" data-startTime="1435">Well, we can write the different </span><span class="line" data-startTime="1435">[INAUDIBLE]. </span> <span class="line" data-startTime="1439">Now we're not waiting for it </span><span class="line" data-startTime="1439">at all, which is not good </span><span class="line" data-startTime="1443">either, because as soon as we </span><span class="line" data-startTime="1443">finish our request, this </span><span class="line" data-startTime="1446">Memcache set operation </span><span class="line" data-startTime="1446">probably will be </span><span class="line" data-startTime="1448">discarded and never run. </span> <span class="line" data-startTime="1449">So we actually have to wait </span><span class="line" data-startTime="1449">for it, but not too much. </span> <span class="line" data-startTime="1455">So now we waiting </span><span class="line" data-startTime="1455">for it again. </span></p>

<p><span class="line" data-startTime="1458">What we're doing is we're </span><span class="line" data-startTime="1458">using these channels. </span> <span class="line" data-startTime="1460">So channels are a way to make </span><span class="line" data-startTime="1460">different go betweens </span><span class="line" data-startTime="1463">communicate between them. </span> <span class="line" data-startTime="1464">So what we're doing is trying </span><span class="line" data-startTime="1464">to do our Memcache set </span><span class="line" data-startTime="1467">operation in a different </span><span class="line" data-startTime="1467">go between. </span> <span class="line" data-startTime="1469">And our main go between </span><span class="line" data-startTime="1469">Is actually </span><span class="line" data-startTime="1470">waiting for it to finish. </span> <span class="line" data-startTime="1472">So we have the same as before. </span> <span class="line" data-startTime="1474">We could wait for too long. </span> <span class="line" data-startTime="1476">But now we can use the </span><span class="line" data-startTime="1476">static statement. </span> <span class="line" data-startTime="1479">And this will actually choose </span><span class="line" data-startTime="1479">between two different things. </span></p>

<p><span class="line" data-startTime="1482">Either the Memcache set </span><span class="line" data-startTime="1482">operation finishes &mdash; </span><span class="line" data-startTime="1486">in that case, we're good &mdash; </span><span class="line" data-startTime="1488">or one second passes. </span> <span class="line" data-startTime="1490">This means and now, if Memcache </span><span class="line" data-startTime="1490">is working perfectly, </span><span class="line" data-startTime="1494">we don't have a problem. </span> <span class="line" data-startTime="1494">We finish our version and </span><span class="line" data-startTime="1494">then we send a reply. </span> <span class="line" data-startTime="1498">But if for some reason Memcache </span><span class="line" data-startTime="1498">is down, which never </span><span class="line" data-startTime="1500">happens, of course, we will </span><span class="line" data-startTime="1500">actually wait for only one </span><span class="line" data-startTime="1503">second and just keep </span><span class="line" data-startTime="1503">on doing our work. </span> <span class="line" data-startTime="1508">If you want to know more about </span><span class="line" data-startTime="1508">Go, there's all these three </span><span class="line" data-startTime="1512">talks this afternoon. </span> <span class="line" data-startTime="1513">They're really good and all </span><span class="line" data-startTime="1513">the speakers are somewhere </span><span class="line" data-startTime="1516">around there. </span></p>

<p><span class="line" data-startTime="1517">And tomorrow also we're going </span><span class="line" data-startTime="1517">to be the [INAUDIBLE] </span><span class="line" data-startTime="1519">of our network programming. </span> <span class="line" data-startTime="1521">We're going to build </span><span class="line" data-startTime="1521">a peer-to-peer </span><span class="line" data-startTime="1522">network, very cool. </span> <span class="line" data-startTime="1524">And if you have any questions, </span><span class="line" data-startTime="1524">the Office Hours </span><span class="line" data-startTime="1526">are also very useful. </span> <span class="line" data-startTime="1528">And now for the rest of the </span><span class="line" data-startTime="1528">talk, back to Mano. </span></p>

<p class="speaker"><span class="line" data-starttime="1530"><span class="speakerName">Mano Marks</span>: Thank you. </span><span class="line" data-startTime="1532">FRANCESC CAMPOY FLORES: </span><span class="line" data-startTime="1532">Thanks. </span></p>

<p class="speaker"><span class="line" data-starttime="1536"><span class="speakerName">Mano Marks</span>: So now we're back </span><span class="line" data-startTime="1536">to visualizing data. </span> <span class="line" data-startTime="1539">So once we've gotten this </span><span class="line" data-startTime="1539">data we're using </span><span class="line" data-startTime="1542">the Google Maps API. </span> <span class="line" data-startTime="1544">And the reason we use a Google </span><span class="line" data-startTime="1544">Maps API is because it gives </span><span class="line" data-startTime="1546">us both a global and </span><span class="line" data-startTime="1546">a local context. </span> <span class="line" data-startTime="1550">I can take a look at this </span><span class="line" data-startTime="1550">position viewer and I can see </span><span class="line" data-startTime="1555">where everything is on </span><span class="line" data-startTime="1555">this global scale. </span> <span class="line" data-startTime="1557">But I can also zoom in and see </span><span class="line" data-startTime="1557">interesting things on the </span><span class="line" data-startTime="1568">local scale. </span> <span class="line" data-startTime="1569">And I can switch over and take a </span><span class="line" data-startTime="1569">look at satellite imagery or </span><span class="line" data-startTime="1574">anything else that might </span><span class="line" data-startTime="1574">give the context as to </span><span class="line" data-startTime="1576">what's in the area. </span> <span class="line" data-startTime="1580">And also it's super fast </span><span class="line" data-startTime="1580">and easy to use. </span> <span class="line" data-startTime="1585">I want to show you a </span><span class="line" data-startTime="1585">couple other demos. </span></p>

<p><span class="line" data-startTime="1587">This is the San Francisco </span><span class="line" data-startTime="1587">office that Michael </span><span class="line" data-startTime="1591">Manoochehri &mdash; </span><span class="line" data-startTime="1592">he's collected this data. </span> <span class="line" data-startTime="1593">This is a snapshot of that data </span><span class="line" data-startTime="1593">from, I think, just a few </span><span class="line" data-startTime="1597">days' worth of that data. </span> <span class="line" data-startTime="1600">And it's just &mdash; </span><span class="line" data-startTime="1601">it provides this really &mdash; </span><span class="line" data-startTime="1603">look at that right there. </span> <span class="line" data-startTime="1604">What's that? </span><span class="line" data-startTime="1605">That's a circle. </span> <span class="line" data-startTime="1607">Well it turns out that &mdash; </span><span class="line" data-startTime="1609">I had to ask Kurt about this &mdash; </span><span class="line" data-startTime="1609">it turns out that ships will </span><span class="line" data-startTime="1612">anchor there. </span> <span class="line" data-startTime="1613">And then they'll rotate around </span><span class="line" data-startTime="1613">the anchor because of current. </span> <span class="line" data-startTime="1617">And you can actually see that </span><span class="line" data-startTime="1617">it's not perfectly uniform </span><span class="line" data-startTime="1621">because you don't see position </span><span class="line" data-startTime="1621">points at every single point </span><span class="line" data-startTime="1624">along that line. </span></p>

<p><span class="line" data-startTime="1625">So it's really interesting. </span> <span class="line" data-startTime="1628">And WebGL gives us a way to </span><span class="line" data-startTime="1628">do some really beautiful </span><span class="line" data-startTime="1631">animations. </span> <span class="line" data-startTime="1632">I'm just going to reload </span><span class="line" data-startTime="1632">this one here. </span> <span class="line" data-startTime="1635">This is another one that </span><span class="line" data-startTime="1635">we can use to show some </span><span class="line" data-startTime="1641">interesting stories. </span> <span class="line" data-startTime="1642">You don't see anything yet. </span> <span class="line" data-startTime="1643">Don't worry about that. </span> <span class="line" data-startTime="1645">What we wanted to do is take a </span><span class="line" data-startTime="1645">look at ships that they had &mdash; </span><span class="line" data-startTime="1651">we have lots of data </span><span class="line" data-startTime="1651">for the ships. </span> <span class="line" data-startTime="1653">That we had over a certain </span><span class="line" data-startTime="1653">number of days &mdash; </span><span class="line" data-startTime="1656">I think it was 30 days &mdash; we had </span><span class="line" data-startTime="1656">some interesting data so </span><span class="line" data-startTime="1659">we could show the paths that </span><span class="line" data-startTime="1659">they took around the globe. </span> <span class="line" data-startTime="1664">And you start to slowly see </span><span class="line" data-startTime="1664">them come in, because of </span><span class="line" data-startTime="1673">course we're looking at </span><span class="line" data-startTime="1673">large amounts of data. </span> <span class="line" data-startTime="1676">But we're starting &mdash; </span><span class="line" data-startTime="1678">we're showing the paths </span><span class="line" data-startTime="1678">grow over time. </span></p>

<p><span class="line" data-startTime="1681">And dynamically interacting </span><span class="line" data-startTime="1681">with this data by choosing </span><span class="line" data-startTime="1684">when to load and how to the </span><span class="line" data-startTime="1684">slide that data around. </span> <span class="line" data-startTime="1691">And this gives us a really </span><span class="line" data-startTime="1691">interesting and rich </span><span class="line" data-startTime="1694">environment to explore </span><span class="line" data-startTime="1694">the data. </span> <span class="line" data-startTime="1697">So you can take a look, for </span><span class="line" data-startTime="1697">instance, different line </span><span class="line" data-startTime="1700">segments are colored </span><span class="line" data-startTime="1700">differently. </span> <span class="line" data-startTime="1702">And by a different </span><span class="line" data-startTime="1702">line segments, I </span><span class="line" data-startTime="1704">mean of the same path. </span> <span class="line" data-startTime="1706">And what that tells us is how </span><span class="line" data-startTime="1706">old the position reports that </span><span class="line" data-startTime="1712">we have are for them. </span> <span class="line" data-startTime="1713">So you can see, if you're </span><span class="line" data-startTime="1713">looking at an individual path, </span><span class="line" data-startTime="1716">you could see where it started </span><span class="line" data-startTime="1716">and basically what direction </span><span class="line" data-startTime="1720">it was going just from </span><span class="line" data-startTime="1720">these paths. </span></p>

<p><span class="line" data-startTime="1724">And we also get some interesting </span><span class="line" data-startTime="1724">stories here. </span> <span class="line" data-startTime="1727">So this is Iceland. </span> <span class="line" data-startTime="1732">It looks like there's </span><span class="line" data-startTime="1732">a lot a looping </span><span class="line" data-startTime="1733">around going on in Iceland. </span> <span class="line" data-startTime="1735">But it's at the also people </span><span class="line" data-startTime="1735">coming from other places. </span> <span class="line" data-startTime="1739">And it turns out that these are </span><span class="line" data-startTime="1739">fishing vessels that are </span><span class="line" data-startTime="1743">traveling around Iceland and </span><span class="line" data-startTime="1743">then going back to their home </span><span class="line" data-startTime="1746">ports doing fishing </span><span class="line" data-startTime="1746">in that area. </span> <span class="line" data-startTime="1751">So we're really able </span><span class="line" data-startTime="1751">to very dynamically </span><span class="line" data-startTime="1757">interact with this data. </span> <span class="line" data-startTime="1759">And you can also see places </span><span class="line" data-startTime="1759">where we have data that </span><span class="line" data-startTime="1763">doesn't look so good. </span></p>

<p><span class="line" data-startTime="1764">This is a great way to explore </span><span class="line" data-startTime="1764">the data because you'll see </span><span class="line" data-startTime="1767">here you've got ships </span><span class="line" data-startTime="1767">going over ground. </span> <span class="line" data-startTime="1770">Well part of that is that we </span><span class="line" data-startTime="1770">only get the ships' locations </span><span class="line" data-startTime="1773">at certain times because </span><span class="line" data-startTime="1773">the satellite's </span><span class="line" data-startTime="1776">circling the earth. </span> <span class="line" data-startTime="1777">So we may see it in one point </span><span class="line" data-startTime="1777">on one day and at another </span><span class="line" data-startTime="1781">point on another and that might </span><span class="line" data-startTime="1781">just happen to go over </span><span class="line" data-startTime="1784">ground so we're going to draw </span><span class="line" data-startTime="1784">a line in between it. </span> <span class="line" data-startTime="1786">And sometimes you'll see really </span><span class="line" data-startTime="1786">drastic data going over </span><span class="line" data-startTime="1796">areas that are actually </span><span class="line" data-startTime="1796">much larger. </span></p>

<p><span class="line" data-startTime="1798">And that's sometimes areas in </span><span class="line" data-startTime="1798">which we can get some bad </span><span class="line" data-startTime="1803">data, as in transceivers that </span><span class="line" data-startTime="1803">are broadcasting incorrect </span><span class="line" data-startTime="1808">locations or incorrect IDs. </span> <span class="line" data-startTime="1811">And you can tell other </span><span class="line" data-startTime="1811">interesting stories. </span> <span class="line" data-startTime="1815">So look here on the coast off </span><span class="line" data-startTime="1815">of Somalia, well known as a </span><span class="line" data-startTime="1821">place where lots of </span><span class="line" data-startTime="1821">pirates hang out. </span> <span class="line" data-startTime="1825">Look, we don't have any </span><span class="line" data-startTime="1825">ships the going there. </span> <span class="line" data-startTime="1829">Or they're turning off their </span><span class="line" data-startTime="1829">broadcasters to not let you </span><span class="line" data-startTime="1832">know what their locations are. </span> <span class="line" data-startTime="1834">And you can see that </span><span class="line" data-startTime="1834">again in the </span><span class="line" data-startTime="1840">position-oriented ones, as well. </span> <span class="line" data-startTime="1843">So you can see here, </span><span class="line" data-startTime="1843">again, we have this </span><span class="line" data-startTime="1846">empty space right here. </span> <span class="line" data-startTime="1848">Whereas, if you look on the </span><span class="line" data-startTime="1848">other side of Africa, you get </span><span class="line" data-startTime="1851">a very rich environment </span><span class="line" data-startTime="1851">of travel. </span> <span class="line" data-startTime="1855">Lots of people going in in lots </span><span class="line" data-startTime="1855">of different directions. </span> <span class="line" data-startTime="1866">I also want to point out that </span><span class="line" data-startTime="1866">the Google Maps API is </span><span class="line" data-startTime="1870">multi-platform. </span> <span class="line" data-startTime="1870">So we've been showing you </span><span class="line" data-startTime="1870">JavaScript and WebGL. </span></p>

<p><span class="line" data-startTime="1874">But there's also iOS and Android </span><span class="line" data-startTime="1874">platforms which you </span><span class="line" data-startTime="1879">can use this Google Maps </span><span class="line" data-startTime="1879">on and then use </span><span class="line" data-startTime="1882">a Google data web. </span> <span class="line" data-startTime="1886">And again, just to reiterate </span><span class="line" data-startTime="1886">something that Kurt said is, </span><span class="line" data-startTime="1891">we're not just interested </span><span class="line" data-startTime="1891">in ships. </span> <span class="line" data-startTime="1893">We just &mdash; </span><span class="line" data-startTime="1894">well, Kurt is. </span> <span class="line" data-startTime="1895">[LAUGHTER] </span></p>

<p class="speaker"><span class="line" data-starttime="1897"><span class="speakerName">Mano Marks</span>: But the technology </span><span class="line" data-startTime="1897">can be &mdash; this kind of </span><span class="line" data-startTime="1900">technology can be used for </span><span class="line" data-startTime="1900">any kind of sensor data. </span><span class="line" data-startTime="1903">Flights, taxi car services, </span><span class="line" data-startTime="1903">trucks, anything that you </span><span class="line" data-startTime="1907">really want. </span><span class="line" data-startTime="1908">Anything that's got a position </span><span class="line" data-startTime="1908">you can visualize on a map. </span><span class="line" data-startTime="1911">And the Google Cloud allows </span><span class="line" data-startTime="1911">you to easily do that. </span><span class="line" data-startTime="1917">So if you want to find out </span><span class="line" data-startTime="1917">more, there's links: </span><span class="line" data-startTime="1919">developers.google.com </span><span class="line" data-startTime="1919">and goland.org. </span><span class="line" data-startTime="1924">And that's all. </span><span class="line" data-startTime="1926">We will take questions now. </span><span class="line" data-startTime="1928">Thank you. </span><span class="line" data-startTime="1929">[APPLAUSE] </span></p>

<p class="speaker"><span class="line" data-starttime="1939"><span class="speakerName">Audience</span>: Hi. </span><span class="line" data-startTime="1940">You have all this great </span><span class="line" data-startTime="1940">anonymous location data of </span><span class="line" data-startTime="1943">users Have you that of taking </span><span class="line" data-startTime="1943">all of that and seeing if you </span><span class="line" data-startTime="1946">can watch traffic flow of </span><span class="line" data-startTime="1946">all the Android users? </span></p>

<p class="speaker"><span class="line" data-starttime="1951"><span class="speakerName">Mano Marks</span>: You do. </span><span class="line" data-startTime="1952">That's our traffic layer. </span></p>

<p class="speaker"><span class="line" data-starttime="1956"><span class="speakerName">Audience</span>: Well, yes. </span><span class="line" data-startTime="1956">But the individuals moving </span><span class="line" data-startTime="1956">around the world and how they </span><span class="line" data-startTime="1962">move, like day-to-day, have </span><span class="line" data-startTime="1962">you ever visualized all of </span><span class="line" data-startTime="1965">them, not just driving, but &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="1966"><span class="speakerName">Mano Marks</span>: That a really </span><span class="line" data-startTime="1966">interesting question. </span><span class="line" data-startTime="1968">And I'm sure a lot of data </span><span class="line" data-startTime="1968">scientists would be really </span><span class="line" data-startTime="1970">excited about that. </span><span class="line" data-startTime="1971">And of course privacy folks get </span><span class="line" data-startTime="1971">really concerned when you </span><span class="line" data-startTime="1976">start talking about that. </span><span class="line" data-startTime="1977">So we couldn't talk about &mdash; </span><span class="line" data-startTime="1981">we don't have anything like </span><span class="line" data-startTime="1981">that that we can show you. </span><span class="line" data-startTime="1987">In the back. </span></p>

<p class="speaker"><span class="line" data-starttime="1988"><span class="speakerName">Audience</span>: I just want to know </span><span class="line" data-startTime="1988">how you're rendering that many </span><span class="line" data-startTime="1990">points at once in the </span><span class="line" data-startTime="1990">JavaScript API. </span></p>

<p class="speaker"><span class="line" data-starttime="1993"><span class="speakerName">Mano Marks</span>: So we're using a </span><span class="line" data-startTime="1993">WebGL utility library called </span><span class="line" data-startTime="1998">canvas layer that actually syncs </span><span class="line" data-startTime="1998">a WebGL canvas on top of </span><span class="line" data-startTime="2004">the map and allows the </span><span class="line" data-startTime="2004">translation between WebGL </span><span class="line" data-startTime="2007">coordinates and latitude, </span><span class="line" data-startTime="2007">longitude. </span></p>

<p class="speaker"><span class="line" data-starttime="2010"><span class="speakerName">Audience</span>: So were you serving </span><span class="line" data-startTime="2010">that many points into the </span><span class="line" data-startTime="2012">browser and then this &mdash; </span></p>

<p class="speaker"><span class="line" data-starttime="2014"><span class="speakerName">Mano Marks</span>: All those points </span><span class="line" data-startTime="2014">are being served into the </span><span class="line" data-startTime="2017">browser and then rendered </span><span class="line" data-startTime="2017">in the browser by WebGL. </span><span class="line" data-startTime="2020">We're not serving out </span><span class="line" data-startTime="2020">tile overlays. </span><span class="line" data-startTime="2023">That what allows for </span><span class="line" data-startTime="2023">the interactivity. </span><span class="line" data-startTime="2026">Brendan Kenny's session this </span><span class="line" data-startTime="2026">morning goes into a lot </span><span class="line" data-startTime="2029">greater depth on how that </span><span class="line" data-startTime="2029">was accomplished. </span></p>

<p class="speaker"><span class="line" data-starttime="2034"><span class="speakerName">Audience</span>: This is actually </span><span class="line" data-startTime="2034">somewhat connected to that </span><span class="line" data-startTime="2037">previous question. </span><span class="line" data-startTime="2038">How many data points are you </span><span class="line" data-startTime="2038">able to scalably show in the </span><span class="line" data-startTime="2042">browser window? </span></p>

<p class="speaker"><span class="line" data-starttime="2043"><span class="speakerName">Mano Marks</span>: So in this case, </span><span class="line" data-startTime="2043">we're typically working with </span><span class="line" data-startTime="2047">tens of thousands. </span><span class="line" data-startTime="2049">But when you see the tracks, </span><span class="line" data-startTime="2049">each one of those is actually </span><span class="line" data-startTime="2055">being rendered as lines &mdash; </span><span class="line" data-startTime="2059">millions of vertices, basically, </span><span class="line" data-startTime="2059">are being processed </span><span class="line" data-startTime="2061">at that point. </span><span class="line" data-startTime="2062">And for point data, we've done </span><span class="line" data-startTime="2062">experiments where we've shown </span><span class="line" data-startTime="2068">one to two million rendering </span><span class="line" data-startTime="2068">pretty easily. </span><span class="line" data-startTime="2072">The major problem, then, as </span><span class="line" data-startTime="2072">we've discussed here, is the </span><span class="line" data-startTime="2075">communication between the </span><span class="line" data-startTime="2075">browser and the server to </span><span class="line" data-startTime="2078">actually get the data in. </span><span class="line" data-startTime="2081">In the back. </span></p>

<p class="speaker"><span class="line" data-starttime="2082"><span class="speakerName">Audience</span>: Is there any thought </span><span class="line" data-startTime="2082">to providing electronic </span><span class="line" data-startTime="2084">charting data similar to Google </span><span class="line" data-startTime="2084">Maps for the water? </span><span class="line" data-startTime="2089">Or an ECTISP-like situation? </span></p>

<p class="speaker"><span class="line" data-starttime="2093"><span class="speakerName">Kurt Schwehr</span>: Sure. </span> <span class="line" data-startTime="2094">Actually, if you use the GDL </span><span class="line" data-startTime="2094">open source tools, you can </span><span class="line" data-startTime="2097">take any &mdash; it's called as S-57, </span><span class="line" data-startTime="2097">is the current format. </span> <span class="line" data-startTime="2100">There's a new one </span><span class="line" data-startTime="2100">coming out so. </span> <span class="line" data-startTime="2101">You can do that yourself. </span> <span class="line" data-startTime="2102">There's several companies that </span><span class="line" data-startTime="2102">provide that kind of service. </span> <span class="line" data-startTime="2105">Unfortunately, the United States </span><span class="line" data-startTime="2105">is the only country </span><span class="line" data-startTime="2108">that gives those out for free. </span> <span class="line" data-startTime="2110">And if you get them from </span><span class="line" data-startTime="2110">anybody other than the </span><span class="line" data-startTime="2112">official provider, which we are </span><span class="line" data-startTime="2112">not, you're not allowed to </span><span class="line" data-startTime="2114">use them for navigation. </span></p>

<p><span class="line" data-startTime="2116">So when it comes to things </span><span class="line" data-startTime="2116">like ECTISP &mdash; </span><span class="line" data-startTime="2118">that's the standard for what </span><span class="line" data-startTime="2118">goes on your bridge of your </span><span class="line" data-startTime="2120">ship, for those who </span><span class="line" data-startTime="2120">don't know &mdash; </span><span class="line" data-startTime="2122">we can't play in that world. </span> <span class="line" data-startTime="2125">Sorry. </span> <span class="line" data-startTime="2126">You can, though. </span></p>

<p class="speaker"><span class="line" data-starttime="2126"><span class="speakerName">Mano Marks</span>: Next question. </span></p>

<p class="speaker"><span class="line" data-starttime="2128"><span class="speakerName">Audience</span>: This is more of a </span><span class="line" data-startTime="2128">code question about the Go </span><span class="line" data-startTime="2130">stuff and the channel stuff. </span> <span class="line" data-startTime="2131">So in the scenario that you </span><span class="line" data-startTime="2131">demoed earlier in the code </span><span class="line" data-startTime="2133">snippet, so when you try to </span><span class="line" data-startTime="2133">retrieve, it's like it'll try </span><span class="line" data-startTime="2137">to get it from Memcache. </span> <span class="line" data-startTime="2137">And then if it takes more </span><span class="line" data-startTime="2137">than one second, just </span><span class="line" data-startTime="2140">respond to the user. </span> <span class="line" data-startTime="2142">So I guess, in that scenario, </span><span class="line" data-startTime="2142">is it pretty much like </span><span class="line" data-startTime="2145">asynchronous processes happening </span><span class="line" data-startTime="2145">at the same time </span><span class="line" data-startTime="2146">where you're trying to fetch the </span><span class="line" data-startTime="2146">data the Datastore and if </span><span class="line" data-startTime="2150">Memcached fails, it just goes </span><span class="line" data-startTime="2150">from the Datastore. </span></p>

<p><span class="line" data-startTime="2152">Is that how it works? </span><span class="line" data-startTime="2155">FRANCESC CAMPOY FLORES: </span><span class="line" data-startTime="2155">I'm not doing that. </span> <span class="line" data-startTime="2156">I'm trying to fetch &mdash; so I'm not </span><span class="line" data-startTime="2156">waiting for the Git from </span><span class="line" data-startTime="2161">Memcache, because it's </span><span class="line" data-startTime="2161">really fast. </span> <span class="line" data-startTime="2164">If it's not there, it just </span><span class="line" data-startTime="2164">answers, missed cache. </span> <span class="line" data-startTime="2167">And then you get it </span><span class="line" data-startTime="2167">from Datastore. </span> <span class="line" data-startTime="2169">And if you get it from Datastore </span><span class="line" data-startTime="2169">and it takes too </span><span class="line" data-startTime="2171">long, actually there's already </span><span class="line" data-startTime="2171">a time out of five seconds. </span> <span class="line" data-startTime="2174">So after those five seconds </span><span class="line" data-startTime="2174">[INAUDIBLE], And then you </span><span class="line" data-startTime="2177">should be able to get that </span><span class="line" data-startTime="2177">data from BigQuery. </span> <span class="line" data-startTime="2179">But as I saying before, </span><span class="line" data-startTime="2179">it's way slower. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="2182"><span class="speakerName">Audience</span>: OK. </span><span class="line" data-startTime="2183">Thanks. </span><span class="line" data-startTime="2183">FRANCESC CAMPOY FLORES: </span><span class="line" data-startTime="2183">No problem. </span></p>

<p class="speaker"><span class="line" data-starttime="2184"><span class="speakerName">Mano Marks</span>: Alright. </span><span class="line" data-startTime="2186">Well thank you very much for </span><span class="line" data-startTime="2186">coming and we'll be in the </span><span class="line" data-startTime="2189">Google Maps Sandbox immediately </span><span class="line" data-startTime="2189">after the session. </span><span class="line" data-startTime="2193">Thank you. </span><span class="line" data-startTime="2194">[APPLAUSE] </span></p></div>