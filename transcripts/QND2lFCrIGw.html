<style>* {font-family: "Open Sans", sans-serif}
a {color: #77aaff}
a.video {border-bottom: 1px solid #ddd; display: block; margin: 0 0 2em 0; padding: 0 0 2em 0}
h2 {color: #444; font-size: 18px;}
span.speakerName {color: black; font-weight: 900;}
body {padding: 2em}
p {color: #444; margin: 0; text-indent: 1.5em;}
p.speaker {margin: 1em 0 0 0; text-indent: 0;}
div#transcript > p:first-child {text-indent: 0;}
</style>

<h1>WebKit for Chromium Developers</h1>

<h2>Glazkov, Peter</h2>

<a class="video" href="http://youtu.be/QND2lFCrIGw">youtu.be/QND2lFCrIGw</a><div id="transcript"><p class="speaker"><span class="line" data-starttime="0"><span class="speakerName">Glazkov</span>: So I'm, um, </span><span class="line" data-startTime="0">[coughs] </span><span class="line" data-startTime="1">I'm Dimitri Glazkov. </span> <span class="line" data-startTime="2">I've been preparing this </span><span class="line" data-startTime="2">all night. </span> <span class="line" data-startTime="4">And I hope this works. </span> <span class="line" data-startTime="6">And actually I decided </span><span class="line" data-startTime="6">to do slides </span><span class="line" data-startTime="8">about 30 minutes ago. </span> <span class="line" data-startTime="11">Because I didn't think </span><span class="line" data-startTime="11">that all of this </span><span class="line" data-startTime="13">can be explained with </span><span class="line" data-startTime="13">enough love and care </span><span class="line" data-startTime="16">by just using, you know, </span><span class="line" data-startTime="16">shooting from the hip. </span> <span class="line" data-startTime="20">So basically there you go. </span> <span class="line" data-startTime="22">This is a WebKit. </span> <span class="line" data-startTime="23">It's a rendering engine </span><span class="line" data-startTime="23">that we use. </span> <span class="line" data-startTime="25">Obviously </span><span class="line" data-startTime="25">who doesn't know that? </span><span class="line" data-startTime="27">You're probably </span><span class="line" data-startTime="27">in the wrong spot. </span> <span class="line" data-startTime="29">Um, and it's a fairly, um, </span><span class="line" data-startTime="29">um, complex piece of code. </span> <span class="line" data-startTime="35">And basically </span><span class="line" data-startTime="35">it has the structure </span><span class="line" data-startTime="37">is there's a WebCore </span><span class="line" data-startTime="38">which is where the majority </span><span class="line" data-startTime="38">of rendering occurs. </span> <span class="line" data-startTime="42">And then there's JavaScriptCore </span><span class="line" data-startTime="42">which we don't use. </span> <span class="line" data-startTime="46">And in JavaScriptCore </span><span class="line" data-startTime="46">there is a subproject, </span><span class="line" data-startTime="48">or a subset of classes </span><span class="line" data-startTime="48">that's called wtf. </span> <span class="line" data-startTime="51">man: Yes, really. </span></p>

<p></p>

<p class="speaker"><span class="line" data-starttime="54"><span class="speakerName">Glazkov</span>: Yes, that's really </span><span class="line" data-startTime="54">how it's called. </span><span class="line" data-startTime="56">And it's a WebCore-type </span><span class="line" data-startTime="56">foundation. </span><span class="line" data-startTime="59">Or WebKit-type foundation. </span><span class="line" data-startTime="63">And then there's some threading </span><span class="line" data-startTime="63">stuff there </span><span class="line" data-startTime="66">because that was the easiest </span><span class="line" data-startTime="66">place to stick it into. </span><span class="line" data-startTime="70">So you will find some </span><span class="line" data-startTime="70">really interesting nuggets </span><span class="line" data-startTime="73">of information like this </span><span class="line" data-startTime="75">as you start studying the code. </span><span class="line" data-startTime="78">What am I looking at? </span><span class="line" data-startTime="79">Should be looking </span><span class="line" data-startTime="79">at everybody. </span><span class="line" data-startTime="81">And so WebCore is where </span><span class="line" data-startTime="81">most of the magic is. </span><span class="line" data-startTime="83">And then there's WebKit </span><span class="line" data-startTime="85">which is essentially </span><span class="line" data-startTime="85">the glue layer </span><span class="line" data-startTime="90">or the actual port </span><span class="line" data-startTime="90">of WebCore. </span><span class="line" data-startTime="93">And there's one for Mac, </span><span class="line" data-startTime="93">there's one for Qt. </span><span class="line" data-startTime="95">There's one for Chromium </span><span class="line" data-startTime="95">coming soon. </span><span class="line" data-startTime="99">And Darin is working on that. </span><span class="line" data-startTime="101">Where's Darin? </span><span class="line" data-startTime="101">Did he leave? </span><span class="line" data-startTime="103">man: He left. </span></p>

<p class="speaker"><span class="line" data-starttime="104"><span class="speakerName">Glazkov</span>: Now I can bad-mouth </span><span class="line" data-startTime="104">him all I want. </span> <span class="line" data-startTime="108">So the directory structure </span><span class="line" data-startTime="108">is also fairly &mdash; </span><span class="line" data-startTime="111">if you look at the WebCore </span><span class="line" data-startTime="111">it's fairly straight forward. </span> <span class="line" data-startTime="114">Pretty much all the naming </span><span class="line" data-startTime="114">convention </span><span class="line" data-startTime="117">has now been made </span><span class="line" data-startTime="117">pretty much logical. </span> <span class="line" data-startTime="122">You can kind of understand </span><span class="line" data-startTime="122">what's going on. </span> <span class="line" data-startTime="123">Like bindings for example </span><span class="line" data-startTime="124">is where all of the bindings </span><span class="line" data-startTime="124">to JavaScript engines </span><span class="line" data-startTime="128">or objective c live. </span> <span class="line" data-startTime="129">Dom deals with dom. </span></p>

<p><span class="line" data-startTime="131">Css deals with css. </span> <span class="line" data-startTime="133">And so on and so forth. </span> <span class="line" data-startTime="135">And so what we do </span><span class="line" data-startTime="138">is we &mdash; we now have </span><span class="line" data-startTime="138">a formal &mdash; </span><span class="line" data-startTime="142">we have a foothold </span><span class="line" data-startTime="142">in WebKit upstream. </span> <span class="line" data-startTime="144">And this is our port </span><span class="line" data-startTime="146">which is basically </span><span class="line" data-startTime="146">the chromium port. </span> <span class="line" data-startTime="148">You will see a bunch </span><span class="line" data-startTime="148">of directories. </span> <span class="line" data-startTime="150">Like there's one </span><span class="line" data-startTime="150">for platform chromium. </span> <span class="line" data-startTime="152">There's one for graphics </span><span class="line" data-startTime="152">and skier related things. </span> <span class="line" data-startTime="157">There's Google URL </span><span class="line" data-startTime="157">that we implement very nicely. </span> <span class="line" data-startTime="161">V8 obviously. </span> <span class="line" data-startTime="162">And so this looks </span><span class="line" data-startTime="162">really, really cool </span><span class="line" data-startTime="164">except have you guys seen &mdash; </span><span class="line" data-startTime="167">Who hasn't seen <i>The Matrix?</i> </span><span class="line" data-startTime="171">Okay. </span> <span class="line" data-startTime="171">You haven't seen <i>The Matrix?</i> </span><span class="line" data-startTime="173">Okay, then this is gonna be </span><span class="line" data-startTime="173">completely irrelevant for you. </span></p>

<p><span class="line" data-startTime="176">Have you guys seen one </span><span class="line" data-startTime="176">of those famous action shots </span><span class="line" data-startTime="180">where Keanu Reeves is, like, </span><span class="line" data-startTime="180">you know, dodging bullets </span><span class="line" data-startTime="183">and he's, like, standing </span><span class="line" data-startTime="183">that way? </span><span class="line" data-startTime="184">And if you were to be </span><span class="line" data-startTime="184">introduced to Keanu </span><span class="line" data-startTime="188">at this particular moment </span><span class="line" data-startTime="188">in time, </span><span class="line" data-startTime="189">you'd have a very uncomfortable </span><span class="line" data-startTime="189">impression of Keanu </span><span class="line" data-startTime="192">because the guy basically </span><span class="line" data-startTime="192">walks like this. </span> <span class="line" data-startTime="195">And so this is exactly the </span><span class="line" data-startTime="195">impression that you would get </span><span class="line" data-startTime="199">if you look at our port </span><span class="line" data-startTime="199">right now </span><span class="line" data-startTime="201">because we are in transition </span><span class="line" data-startTime="203">and so there's a bunch </span><span class="line" data-startTime="203">of things that are supposed </span><span class="line" data-startTime="205">to be in the right spot </span><span class="line" data-startTime="205">but they're not. </span></p>

<p><span class="line" data-startTime="207">And so we're still moving. </span> <span class="line" data-startTime="209">And so when you go look </span><span class="line" data-startTime="209">at for example v8 bindings, </span><span class="line" data-startTime="214">you'd find that some v8 bindings </span><span class="line" data-startTime="216">live in upstream proper </span><span class="line" data-startTime="216">and some of them live </span><span class="line" data-startTime="218">in source WebKit port </span><span class="line" data-startTime="218">bindings v8. </span> <span class="line" data-startTime="222">That's not because </span><span class="line" data-startTime="222">we're so smart. </span> <span class="line" data-startTime="224">That's because we are </span><span class="line" data-startTime="224">still working on it. </span> <span class="line" data-startTime="227">And so a lot of people </span><span class="line" data-startTime="227">get &mdash; </span><span class="line" data-startTime="229">I actually was asked </span><span class="line" data-startTime="229">today at lunch </span><span class="line" data-startTime="232">is like, "Why is some files </span><span class="line" data-startTime="232">are there? </span><span class="line" data-startTime="233">Why couldn't you just </span><span class="line" data-startTime="233">move them there?" </span><span class="line" data-startTime="234">We're working on it right now. </span></p>

<p><span class="line" data-startTime="236">Okay, so this is </span><span class="line" data-startTime="236">a resource constraint. </span> <span class="line" data-startTime="238">This is not a matter of us </span><span class="line" data-startTime="238">picking and choosing </span><span class="line" data-startTime="240">what things we want to keep </span><span class="line" data-startTime="240">downstream and upstream. </span> <span class="line" data-startTime="243">It's all going </span><span class="line" data-startTime="243">to move upstream one day </span><span class="line" data-startTime="246">sooner &mdash; sooner or later. </span> <span class="line" data-startTime="248">Hopefully sooner. </span> <span class="line" data-startTime="250">And so we also have now </span><span class="line" data-startTime="250">our own WebKit port </span><span class="line" data-startTime="254">which Darin has birthed </span><span class="line" data-startTime="254">and now he escaped </span><span class="line" data-startTime="257">so that he doesn't have </span><span class="line" data-startTime="257">to listen about it. </span> <span class="line" data-startTime="259">But it lives downstream </span><span class="line" data-startTime="259">unfortunately </span><span class="line" data-startTime="263">because it's very hard </span><span class="line" data-startTime="263">to kind of jiggle </span><span class="line" data-startTime="265">the wires very quickly </span><span class="line" data-startTime="265">and adjust it </span><span class="line" data-startTime="268">if some breakage occurs. </span> <span class="line" data-startTime="270">And so we build it </span><span class="line" data-startTime="270">downstream </span><span class="line" data-startTime="272">and then we're gonna move it </span><span class="line" data-startTime="272">upstream wholesale. </span></p>

<p><span class="line" data-startTime="274">Hopefully. </span> <span class="line" data-startTime="276">And so one of the please that </span><span class="line" data-startTime="276">I have to you, WebKit newbies, </span><span class="line" data-startTime="280">whoever you are, </span><span class="line" data-startTime="283">is if you want to learn WebKit, </span><span class="line" data-startTime="283">please help upstreaming. </span> <span class="line" data-startTime="288">So any, um &mdash; </span><span class="line" data-startTime="288">any, um &mdash; </span><span class="line" data-startTime="291">Anybody who has extra cycles </span><span class="line" data-startTime="293">or is very actively interested </span><span class="line" data-startTime="293">in learning WebKit, </span><span class="line" data-startTime="296">the bindings for example, </span><span class="line" data-startTime="298">please help upstreaming. </span> <span class="line" data-startTime="300">What it involves is essentially </span><span class="line" data-startTime="302">grabbing a piece of v8 code &mdash; </span><span class="line" data-startTime="302">v8 bindings code &mdash; </span><span class="line" data-startTime="305">and make it conform </span><span class="line" data-startTime="305">to WebKit code style, </span><span class="line" data-startTime="309">submitting it as a patch </span><span class="line" data-startTime="309">upstream, </span><span class="line" data-startTime="310">getting it landed. </span> <span class="line" data-startTime="312">And then you'll feel </span><span class="line" data-startTime="312">really, really good, so... </span></p>

<p><span class="line" data-startTime="316">man: [unintelligible] </span></p>

<p class="speaker"><span class="line" data-starttime="317"><span class="speakerName">Glazkov</span>: Yes, and all </span><span class="line" data-startTime="317">these patches count </span><span class="line" data-startTime="319">to your WebKit commuter access. </span> <span class="line" data-startTime="319">Exactly. </span> <span class="line" data-startTime="320">So this is all really helpful </span><span class="line" data-startTime="323">it you want to be like </span><span class="line" data-startTime="323">a commuter for example. </span> <span class="line" data-startTime="326">And, oh, by the way, </span><span class="line" data-startTime="328">it's not really that much fun </span><span class="line" data-startTime="329">because sometime you have </span><span class="line" data-startTime="329">to go through </span><span class="line" data-startTime="331">three or four rounds </span><span class="line" data-startTime="331">of iterations </span><span class="line" data-startTime="333">based mostly on nitpicking </span><span class="line" data-startTime="333">and style </span><span class="line" data-startTime="337">and style violations. </span> <span class="line" data-startTime="340">So it's sometimes very, </span><span class="line" data-startTime="340">very frustrating. </span> <span class="line" data-startTime="342">But it teaches you patience, </span><span class="line" data-startTime="342">right? </span><span class="line" data-startTime="344">This is the most exciting thing </span><span class="line" data-startTime="344">that you can learn. </span></p>

<p><span class="line" data-startTime="347">Or if you have, like, a kit, </span><span class="line" data-startTime="347">you're done. </span> <span class="line" data-startTime="351">You can do it very easily. </span> <span class="line" data-startTime="353">Um, so, um &mdash; </span><span class="line" data-startTime="356">We're also in this continuous </span><span class="line" data-startTime="356">effort of trying to unfork </span><span class="line" data-startTime="359">and move ourselves out </span><span class="line" data-startTime="359">of the situation </span><span class="line" data-startTime="363">where we actually are </span><span class="line" data-startTime="363">a fork or bender branch </span><span class="line" data-startTime="366">um, of WebKit. </span> <span class="line" data-startTime="369">And this is a very &mdash; </span><span class="line" data-startTime="371">very, um, hard work </span><span class="line" data-startTime="371">and we actually track it </span><span class="line" data-startTime="374">right here. </span> <span class="line" data-startTime="376">As you can see, </span><span class="line" data-startTime="376">this is our current state. </span> <span class="line" data-startTime="378">Just this Monday, </span><span class="line" data-startTime="378">the count was down to 15. </span> <span class="line" data-startTime="384">And thanks to a merge </span><span class="line" data-startTime="384">that I did on Monday afternoon, </span><span class="line" data-startTime="387">it's back to 34. </span></p>

<p><span class="line" data-startTime="389">Because unfortunately sometimes </span><span class="line" data-startTime="390">the changes made upstream </span><span class="line" data-startTime="390">necessitate a fork </span><span class="line" data-startTime="394">in our, um, in our port. </span> <span class="line" data-startTime="396">And now I have to go and work </span><span class="line" data-startTime="396">to remove that fork </span><span class="line" data-startTime="399">which really sucks. </span> <span class="line" data-startTime="401">But unfortunately </span><span class="line" data-startTime="401">that's what it is. </span> <span class="line" data-startTime="403">So we have now removed &mdash; </span><span class="line" data-startTime="403">not physically, </span><span class="line" data-startTime="408">but we removed commit access </span><span class="line" data-startTime="410">to the third party WebKit </span><span class="line" data-startTime="412">so we try not to commit there </span><span class="line" data-startTime="412">at all. </span> <span class="line" data-startTime="413">Unless this is like </span><span class="line" data-startTime="413">a super-duper regression </span><span class="line" data-startTime="416">that blocks us from releasing </span><span class="line" data-startTime="416">a div branch </span><span class="line" data-startTime="421">or div build for example. </span></p>

<p><span class="line" data-startTime="422">And there's a daily merge. </span> <span class="line" data-startTime="424">So, um, every day somebody, </span><span class="line" data-startTime="428">some unnamed hero, </span><span class="line" data-startTime="428">takes the changes from upstream </span><span class="line" data-startTime="431">and plops them down </span><span class="line" data-startTime="431">onto our fork </span><span class="line" data-startTime="436">and it's sometimes a really </span><span class="line" data-startTime="436">hard process </span><span class="line" data-startTime="437">and hair-pulling process </span><span class="line" data-startTime="439">of figuring out what just </span><span class="line" data-startTime="439">happened </span><span class="line" data-startTime="441">because 100 layout tests just </span><span class="line" data-startTime="441">started failing for no reason. </span> <span class="line" data-startTime="444">And so or you need </span><span class="line" data-startTime="444">to start forking things. </span> <span class="line" data-startTime="448">But if you really want </span><span class="line" data-startTime="448">to learn WebKit, </span><span class="line" data-startTime="451">this is, like, the best way. </span> <span class="line" data-startTime="453">Because you will daily touch </span><span class="line" data-startTime="453">various parts of code. </span> <span class="line" data-startTime="458">And you will have to study </span><span class="line" data-startTime="458">and figure out what's wrong. </span></p>

<p><span class="line" data-startTime="461">So this is how I learned WebKit </span><span class="line" data-startTime="464">and I highly recommend it </span><span class="line" data-startTime="464">to anybody... </span> <span class="line" data-startTime="467">um, who wants to be it. </span> <span class="line" data-startTime="469">So currently the rotation </span><span class="line" data-startTime="469">is fixed. </span> <span class="line" data-startTime="471">But, Ian, aren't you working </span><span class="line" data-startTime="472">to make everybody </span><span class="line" data-startTime="472">a WebKit merger? </span><span class="line" data-startTime="475">This is gonna be so great. </span> <span class="line" data-startTime="476">It's just like a sheriff. </span> <span class="line" data-startTime="477">Everybody will get to merge. </span> <span class="line" data-startTime="479">Hopefully we'll unfork by then, </span><span class="line" data-startTime="479">but maybe not. </span> <span class="line" data-startTime="484">So, um, now I'm gonna talk </span><span class="line" data-startTime="484">about Toolset. </span> <span class="line" data-startTime="487">What we're gonna do for </span><span class="line" data-startTime="487">if you want to work on, um, </span><span class="line" data-startTime="491">WebKit and that's very simple. </span></p>

<p><span class="line" data-startTime="494">Just use Git and you're done. </span> <span class="line" data-startTime="495">Um, well actually </span><span class="line" data-startTime="495">it's not that simple. </span> <span class="line" data-startTime="498">But one of the things </span><span class="line" data-startTime="498">you have to learn, </span><span class="line" data-startTime="501">if you're planning to work </span><span class="line" data-startTime="501">on WebKit, </span><span class="line" data-startTime="504">forget your Windows machine, </span><span class="line" data-startTime="504">okay. </span> <span class="line" data-startTime="506">Working on WebKit upstream </span><span class="line" data-startTime="506">on Windows </span><span class="line" data-startTime="510">is so hard that most of us </span><span class="line" data-startTime="510">have given up. </span></p>

<p class="speaker"><span class="line" data-starttime="513"><span class="speakerName">Peter</span>: By the way, </span><span class="line" data-startTime="513">I still do this. </span><span class="line" data-startTime="514">And I think it's fine. </span><span class="line" data-startTime="515">So if you want to do this, </span><span class="line" data-startTime="515">you can ask me. </span></p>

<p class="speaker"><span class="line" data-starttime="517"><span class="speakerName">Glazkov</span>: If you're Peter, </span><span class="line" data-startTime="517">you can still use Windows. </span> <span class="line" data-startTime="519">But Ojohn can tell you that, </span><span class="line" data-startTime="519">um, </span><span class="line" data-startTime="524">none of us, and I repeat &mdash; </span><span class="line" data-startTime="524">even you, Peter, </span><span class="line" data-startTime="527">none of us have been able </span><span class="line" data-startTime="527">to successfully run </span><span class="line" data-startTime="530">WebKit layout tests </span><span class="line" data-startTime="530">from upstream and succeed. </span> <span class="line" data-startTime="534">Because that requires pulling </span><span class="line" data-startTime="534">down all of the Mac fonts </span><span class="line" data-startTime="537">onto a Windows box, </span><span class="line" data-startTime="539">configuring your clear type </span><span class="line" data-startTime="541">just the right way, </span><span class="line" data-startTime="542">and all the just weirdness </span><span class="line" data-startTime="542">that comes with it. </span> <span class="line" data-startTime="544">So it's really &mdash; </span><span class="line" data-startTime="544">it's really painful. </span> <span class="line" data-startTime="547">So if you want to work </span><span class="line" data-startTime="547">with WebKit upstream, </span><span class="line" data-startTime="550">this is your great excuse </span><span class="line" data-startTime="550">to get a Mac, </span><span class="line" data-startTime="553">if you want one. </span></p>

<p><span class="line" data-startTime="555">If you don't want when, </span><span class="line" data-startTime="555">then you know, </span><span class="line" data-startTime="557">I can't help you, buddy. </span> <span class="line" data-startTime="559">So using Git is really, </span><span class="line" data-startTime="559">really helpful. </span> <span class="line" data-startTime="562">I have it set up. </span> <span class="line" data-startTime="562">Can you guys see it okay? </span><span class="line" data-startTime="566">So I'll show you just </span><span class="line" data-startTime="566">a couple of things </span><span class="line" data-startTime="568">in terms of Git. </span> <span class="line" data-startTime="570">It's very helpful because </span><span class="line" data-startTime="570">it facilitates </span><span class="line" data-startTime="572">a much better workflow. </span> <span class="line" data-startTime="574">Just like on any other product </span><span class="line" data-startTime="574">or perhaps more, </span><span class="line" data-startTime="578">in WebKit you will often </span><span class="line" data-startTime="578">be having </span><span class="line" data-startTime="581">several patches in flight </span><span class="line" data-startTime="582">while they're waiting review. </span> <span class="line" data-startTime="584">And these patches will have </span><span class="line" data-startTime="584">to be caressed and loved </span><span class="line" data-startTime="587">a couple of times. </span> <span class="line" data-startTime="588">And so you have to tweak them. </span></p>

<p><span class="line" data-startTime="591">So having multiple checkouts </span><span class="line" data-startTime="591">in svn repository </span><span class="line" data-startTime="593">is just &mdash; is just wrong. </span> <span class="line" data-startTime="596">So I highly recommend using &mdash; </span><span class="line" data-startTime="598">using like a Git for multiple </span><span class="line" data-startTime="598">branch work flow </span><span class="line" data-startTime="602">where you can have multiple </span><span class="line" data-startTime="602">branches in flight </span><span class="line" data-startTime="603">and then rebase. </span> <span class="line" data-startTime="605">So I'll do a quick demo </span><span class="line" data-startTime="605">if it works, right? </span><span class="line" data-startTime="612">Ooh. </span> <span class="line" data-startTime="613">So for example I'm &mdash; </span><span class="line" data-startTime="617">WebKit comes with some really &mdash; </span><span class="line" data-startTime="619">Git comes with some </span><span class="line" data-startTime="619">really cool stuff </span><span class="line" data-startTime="621">like, um, shell completion. </span> <span class="line" data-startTime="623">So for example I have it </span><span class="line" data-startTime="623">configured </span><span class="line" data-startTime="624">so it always shows me </span><span class="line" data-startTime="624">the current branch I'm on. </span> <span class="line" data-startTime="627">Which is land which this </span><span class="line" data-startTime="627">is the branch I use </span><span class="line" data-startTime="629">to land somebody else's patches. </span> <span class="line" data-startTime="631">And so, um, </span><span class="line" data-startTime="634">I can see that there's nothing </span><span class="line" data-startTime="634">going on </span><span class="line" data-startTime="636">on this branch right now. </span></p>

<p><span class="line" data-startTime="639">Whoo. </span> <span class="line" data-startTime="641">Back. </span> <span class="line" data-startTime="642">It's really fast. </span> <span class="line" data-startTime="644">And then I can go </span><span class="line" data-startTime="644">to master branch. </span> <span class="line" data-startTime="647">And, uh... </span> <span class="line" data-startTime="651">It's usually much faster. </span> <span class="line" data-startTime="652">I promise. </span> <span class="line" data-startTime="654">Let me plug into power. </span> <span class="line" data-startTime="657">Ah, that's okay. </span> <span class="line" data-startTime="659">So then I do a Git pull </span><span class="line" data-startTime="659">for example </span><span class="line" data-startTime="661">and pull all of the changes </span><span class="line" data-startTime="661">from the, um, </span><span class="line" data-startTime="667">from my... </span> <span class="line" data-startTime="670">from upstream from </span><span class="line" data-startTime="670">the master branch. </span> <span class="line" data-startTime="672">Downstream &mdash; there it is. </span> <span class="line" data-startTime="674">It's happening actually. </span> <span class="line" data-startTime="680">All right. </span> <span class="line" data-startTime="681">This shows me what changes </span><span class="line" data-startTime="681">have been made. </span></p>

<p><span class="line" data-startTime="683">Really nice. </span> <span class="line" data-startTime="685">Everything's pretty. </span> <span class="line" data-startTime="686">Uh-huh. </span> <span class="line" data-startTime="687">And then I can say Git </span><span class="line" data-startTime="687">rebase master land </span><span class="line" data-startTime="691">for example. </span> <span class="line" data-startTime="694">And what this does </span><span class="line" data-startTime="694">is it lifts up </span><span class="line" data-startTime="697">any divs or patches </span><span class="line" data-startTime="697">that I might have </span><span class="line" data-startTime="698">on land branch, </span><span class="line" data-startTime="698">applies the changes </span><span class="line" data-startTime="702">that I just pulled </span><span class="line" data-startTime="702">and then attempts </span><span class="line" data-startTime="703">to land or to apply </span><span class="line" data-startTime="703">the patches that I have </span><span class="line" data-startTime="706">onto this branch back. </span> <span class="line" data-startTime="709">And it's a really cool process </span><span class="line" data-startTime="712">of um, um, kind of a, um, </span><span class="line" data-startTime="714">patch-based scm. </span> <span class="line" data-startTime="718">So I really recommend it </span><span class="line" data-startTime="718">pretty much for anybody </span><span class="line" data-startTime="720">working on, um, on WebKit. </span> <span class="line" data-startTime="724">And like for example, </span><span class="line" data-startTime="725">one of the things you would see </span><span class="line" data-startTime="727">is I have multiple branches </span><span class="line" data-startTime="727">right there </span><span class="line" data-startTime="730">and, uh, pretty much like </span><span class="line" data-startTime="730">I have three inspector changes </span><span class="line" data-startTime="733">going on at the same time. </span> <span class="line" data-startTime="734">Because sometimes reviewers </span><span class="line" data-startTime="734">take a while to do it. </span></p>

<p><span class="line" data-startTime="738">To go through the process. </span> <span class="line" data-startTime="741">And sometimes I need to modify </span><span class="line" data-startTime="744">and in order to keep sanity, </span><span class="line" data-startTime="746">I have multiple branches. </span> <span class="line" data-startTime="748">And so I could work </span><span class="line" data-startTime="748">on any of this </span><span class="line" data-startTime="752">separately and then commit </span><span class="line" data-startTime="752">a rebase. </span> <span class="line" data-startTime="754">For more information, </span><span class="line" data-startTime="754">check with Evan. </span> <span class="line" data-startTime="758">And he has a &mdash; I think </span><span class="line" data-startTime="758">we've taped it, right. </span> <span class="line" data-startTime="760">There is a Git talk </span><span class="line" data-startTime="760">that you can go look at. </span> <span class="line" data-startTime="763">It's really &mdash; it's really great. </span> <span class="line" data-startTime="764">One of the things that </span><span class="line" data-startTime="764">is really good </span><span class="line" data-startTime="767">about WebKit is they have </span><span class="line" data-startTime="767">integrated really well </span><span class="line" data-startTime="771">with, uh, with Git. </span> <span class="line" data-startTime="773">So their prepare change log </span><span class="line" data-startTime="773">script works with Git, </span><span class="line" data-startTime="780">and their result change </span><span class="line" data-startTime="780">log script work with Git </span><span class="line" data-startTime="784">and so svn applied </span><span class="line" data-startTime="784">works with Git. </span></p>

<p><span class="line" data-startTime="786">So all of these tools </span><span class="line" data-startTime="786">that they have, </span><span class="line" data-startTime="789">all of the toolset </span><span class="line" data-startTime="789">is in place. </span> <span class="line" data-startTime="791">And so I highly recommend </span><span class="line" data-startTime="791">using it </span><span class="line" data-startTime="795">because it keeps your sanity </span><span class="line" data-startTime="798">in terms of maintaining </span><span class="line" data-startTime="798">multiple patches in flight. </span> <span class="line" data-startTime="802">And shell completion. </span> <span class="line" data-startTime="804">So if you're ever applying </span><span class="line" data-startTime="804">a patch, </span><span class="line" data-startTime="810">uh, to WebKit, </span><span class="line" data-startTime="812">I highly recommend using </span><span class="line" data-startTime="812">svn-apply </span><span class="line" data-startTime="813">because it does a lot more </span><span class="line" data-startTime="813">smart things </span><span class="line" data-startTime="817">than, um, than a normal patch. </span> <span class="line" data-startTime="819">And it's just wonderful. </span> <span class="line" data-startTime="821">Like for example if you're </span><span class="line" data-startTime="821">applying your old patch </span><span class="line" data-startTime="824">with a change log entry in it, </span><span class="line" data-startTime="826">it will automatically put it </span><span class="line" data-startTime="826">on top of the change log </span><span class="line" data-startTime="829">and change the date </span><span class="line" data-startTime="829">to today's date. </span> <span class="line" data-startTime="831">So it's beautiful, </span><span class="line" data-startTime="831">it's gorgeous. </span> <span class="line" data-startTime="833">And so I highly recommend </span><span class="line" data-startTime="833">using it. </span></p>

<p><span class="line" data-startTime="835">And of course the whole </span><span class="line" data-startTime="835">collection of scripts there </span><span class="line" data-startTime="839">that you might look at. </span> <span class="line" data-startTime="841">Highly recommend looking </span><span class="line" data-startTime="841">at them </span><span class="line" data-startTime="842">because I use only three. </span> <span class="line" data-startTime="844">But there's more </span><span class="line" data-startTime="844">and you probably could, </span><span class="line" data-startTime="846">you know, benefit from them </span><span class="line" data-startTime="846">in some way. </span> <span class="line" data-startTime="849">And trac.webkit.org/browser. </span> <span class="line" data-startTime="853">Very helpful tool. </span> <span class="line" data-startTime="855">Obviously anybody who used </span><span class="line" data-startTime="855">Trac before </span><span class="line" data-startTime="858">will be familiar with it. </span> <span class="line" data-startTime="860">But it allows you to go </span><span class="line" data-startTime="860">look at the code </span><span class="line" data-startTime="862">and browse it online. </span> <span class="line" data-startTime="863">It's much better than view, </span><span class="line" data-startTime="863">uh, vc &mdash; </span><span class="line" data-startTime="866">whatever that thing we have. </span> <span class="line" data-startTime="868">So if there are any fanatics </span><span class="line" data-startTime="868">of uvc, </span><span class="line" data-startTime="871">please, I don't mean it. </span></p>

<p><span class="line" data-startTime="875">Um... </span> <span class="line" data-startTime="877">any questions on Git </span><span class="line" data-startTime="877">or anything? </span><span class="line" data-startTime="878">Anything I need to pause on? </span><span class="line" data-startTime="881">No? </span><span class="line" data-startTime="881">Okay. </span> <span class="line" data-startTime="882">Yes. </span> <span class="line" data-startTime="883">man: [inaudible] </span></p>

<p class="speaker"><span class="line" data-starttime="887"><span class="speakerName">Glazkov</span>: Okay. </span> <span class="line" data-startTime="889">Git acts as a really good tool </span><span class="line" data-startTime="891">if you're using &mdash; </span><span class="line" data-startTime="891">if you're on a Mac. </span> <span class="line" data-startTime="893">I've never used it </span><span class="line" data-startTime="893">but I heard it's good. </span> <span class="line" data-startTime="897">Um, actually Jeremy there </span><span class="line" data-startTime="897">who makes suggestions, </span><span class="line" data-startTime="900">he's the one who evangelized </span><span class="line" data-startTime="900">me on Git. </span> <span class="line" data-startTime="902">And so I owe him a lot. </span> <span class="line" data-startTime="906">WebKit testing. </span> <span class="line" data-startTime="907">How do we test whether </span><span class="line" data-startTime="907">WebKit is good or not, </span><span class="line" data-startTime="910">whether a specific </span><span class="line" data-startTime="910">variation is good or not? </span><span class="line" data-startTime="912">Well, the primary test tool, </span><span class="line" data-startTime="914">the vehicle that they have </span><span class="line" data-startTime="914">upstream is layout tests. </span> <span class="line" data-startTime="917">And you guys are probably </span><span class="line" data-startTime="917">all familiar </span><span class="line" data-startTime="919">with what layout tests are. </span> <span class="line" data-startTime="921">It's several thousand </span><span class="line" data-startTime="921">HTML files, </span><span class="line" data-startTime="924">sometimes SVG, </span><span class="line" data-startTime="924">sometimes, um, XML files </span><span class="line" data-startTime="929">that you load in the browser </span><span class="line" data-startTime="932">and basically look </span><span class="line" data-startTime="932">for a specific behavior. </span> <span class="line" data-startTime="935">And all of this has been </span><span class="line" data-startTime="935">automated. </span> <span class="line" data-startTime="937">Downstream we have test drill </span><span class="line" data-startTime="940">that allows us to run </span><span class="line" data-startTime="940">the tests. </span></p>

<p><span class="line" data-startTime="942">Upstream it's called </span><span class="line" data-startTime="942">dump render tree. </span> <span class="line" data-startTime="944">Highly misnamed, </span><span class="line" data-startTime="944">but you know. </span> <span class="line" data-startTime="947">I recommended that they </span><span class="line" data-startTime="947">rename it to test drill. </span> <span class="line" data-startTime="949">They have seemed to be resistant </span><span class="line" data-startTime="949">for some reason. </span> <span class="line" data-startTime="952">And so &mdash; and basically </span><span class="line" data-startTime="952">it's really not a very good </span><span class="line" data-startTime="956">testing methodology </span><span class="line" data-startTime="956">but that's what we have. </span> <span class="line" data-startTime="959">Having a unit test </span><span class="line" data-startTime="959">or more extensive methodology </span><span class="line" data-startTime="964">would probably &mdash; </span><span class="line" data-startTime="965">at this point I don't think </span><span class="line" data-startTime="965">it's really feasible. </span></p>

<p><span class="line" data-startTime="968">So we're going with layout </span><span class="line" data-startTime="968">tests. </span> <span class="line" data-startTime="970">And layout tests are born how? </span><span class="line" data-startTime="972">Anytime you find a regression, </span><span class="line" data-startTime="974">whenever you fix a bug, </span><span class="line" data-startTime="976">you submit a layout test </span><span class="line" data-startTime="976">with it </span><span class="line" data-startTime="978">to make sure that this bug </span><span class="line" data-startTime="978">is now covered. </span> <span class="line" data-startTime="980">And so this is how </span><span class="line" data-startTime="980">you obtain coverage. </span> <span class="line" data-startTime="982">Instead of forward thinking, </span><span class="line" data-startTime="982">you're kind of reacting. </span> <span class="line" data-startTime="986">And...and also there's </span><span class="line" data-startTime="986">a couple of test suites. </span> <span class="line" data-startTime="991">W3c suite, </span><span class="line" data-startTime="993">Hicksy's svg suite. </span> <span class="line" data-startTime="994">Batik svg &mdash; </span><span class="line" data-startTime="994">a bunch of them. </span> <span class="line" data-startTime="997">Css suite. </span> <span class="line" data-startTime="998">Um, but, um, </span><span class="line" data-startTime="1000">those rarely ever fail because </span><span class="line" data-startTime="1002">they're kind of, </span><span class="line" data-startTime="1002">you know, simple. </span> <span class="line" data-startTime="1004">Not that complicated. </span></p>

<p><span class="line" data-startTime="1007">Not that big of an edge case. </span> <span class="line" data-startTime="1009">And the obviously we have </span><span class="line" data-startTime="1009">reliability tests. </span> <span class="line" data-startTime="1012">Chromebot gives us crashes, </span><span class="line" data-startTime="1012">which is really great. </span> <span class="line" data-startTime="1015">And that's something they don't </span><span class="line" data-startTime="1015">have downstream, </span><span class="line" data-startTime="1020">so if you're ever in builder &mdash; </span><span class="line" data-startTime="1022">By the way, I'm a sheriff today. </span> <span class="line" data-startTime="1022">Let's see how we're doing. </span> <span class="line" data-startTime="1027">Tree's open. </span> <span class="line" data-startTime="1029">I don't know if that's because </span><span class="line" data-startTime="1029">it's actually open. </span> <span class="line" data-startTime="1031">It's okay. </span> <span class="line" data-startTime="1033">Or if it's because I'm missing. </span> <span class="line" data-startTime="1035">Nobody closed the tree </span><span class="line" data-startTime="1035">for good reason. </span> <span class="line" data-startTime="1038">[laughs] </span><span class="line" data-startTime="1039">So there are </span><span class="line" data-startTime="1039">reliability tests. </span> <span class="line" data-startTime="1042">Is that it? </span><span class="line" data-startTime="1042">No. </span> <span class="line" data-startTime="1044">Is that it? </span><span class="line" data-startTime="1045">That's a really nice bot. </span> <span class="line" data-startTime="1048">This is your really good </span><span class="line" data-startTime="1048">indicator </span><span class="line" data-startTime="1049">of something &mdash; </span><span class="line" data-startTime="1049">ooh, look at that. </span> <span class="line" data-startTime="1052">So you would see </span><span class="line" data-startTime="1052">that something happened. </span></p>

<p><span class="line" data-startTime="1055">For example we have </span><span class="line" data-startTime="1055">new crashes. </span> <span class="line" data-startTime="1057">And reliability test </span><span class="line" data-startTime="1057">uses Chromebot, right? </span><span class="line" data-startTime="1061">Somebody correct me or not. </span> <span class="line" data-startTime="1062">All right, it's the same </span><span class="line" data-startTime="1062">infrastructure. </span> <span class="line" data-startTime="1064">And it just is a really </span><span class="line" data-startTime="1064">convenient way </span><span class="line" data-startTime="1066">for you to quickly see </span><span class="line" data-startTime="1066">what happened. </span> <span class="line" data-startTime="1070">And so you can look </span><span class="line" data-startTime="1070">at the stack traces. </span> <span class="line" data-startTime="1073">This is something the Mac </span><span class="line" data-startTime="1073">people &mdash; </span><span class="line" data-startTime="1076">or not Mac people &mdash; </span><span class="line" data-startTime="1078">what Git upstream does not have. </span> <span class="line" data-startTime="1080">So we benefit from this because </span><span class="line" data-startTime="1082">we can discover things </span><span class="line" data-startTime="1082">that they cannot see. </span> <span class="line" data-startTime="1086">So anyway. </span> <span class="line" data-startTime="1087">We usually share </span><span class="line" data-startTime="1087">those results gladly </span><span class="line" data-startTime="1090">because we need to fix them </span><span class="line" data-startTime="1090">as well. </span></p>

<p><span class="line" data-startTime="1092">And performance tests, </span><span class="line" data-startTime="1095">obviously. </span> <span class="line" data-startTime="1097">Who has not seen </span><span class="line" data-startTime="1097">performance tests here? </span><span class="line" data-startTime="1101">Do I need to go? </span><span class="line" data-startTime="1102">Look, you guys are fine. </span> <span class="line" data-startTime="1104">Okay. </span> <span class="line" data-startTime="1106">Let me look. </span> <span class="line" data-startTime="1106">Oh. </span> <span class="line" data-startTime="1108">Prf? </span><span class="line" data-startTime="1110">Click on prf. </span> <span class="line" data-startTime="1112">I clicked on prf. </span> <span class="line" data-startTime="1113">So you can see very quickly </span><span class="line" data-startTime="1115">how each commit reflects. </span> <span class="line" data-startTime="1118">See how great we're doing. </span> <span class="line" data-startTime="1120">We have just recently </span><span class="line" data-startTime="1120">implemented </span><span class="line" data-startTime="1122">TCMalloc allocator. </span></p>

<p><span class="line" data-startTime="1124">So this brought down </span><span class="line" data-startTime="1124">all of our numbers. </span> <span class="line" data-startTime="1130">And then we have fixed </span><span class="line" data-startTime="1130">a major &mdash; </span><span class="line" data-startTime="1134">well not major, </span><span class="line" data-startTime="1134">but a bug in v8. </span> <span class="line" data-startTime="1137">So this really shows us. </span> <span class="line" data-startTime="1139">And when it goes </span><span class="line" data-startTime="1139">the opposite way, </span><span class="line" data-startTime="1141">then you're in trouble. </span> <span class="line" data-startTime="1142">You have to fix it. </span> <span class="line" data-startTime="1143">Peter usually comes </span><span class="line" data-startTime="1143">and bugs you </span><span class="line" data-startTime="1145">because he really watches </span><span class="line" data-startTime="1145">those things. </span> <span class="line" data-startTime="1147">Well, he come and bug me. </span> <span class="line" data-startTime="1149">Oh. </span> <span class="line" data-startTime="1153">So this is real useful </span><span class="line" data-startTime="1155">because it allows you to see, </span><span class="line" data-startTime="1155">um, um, what's going on. </span> <span class="line" data-startTime="1160">Page cycler &mdash; </span><span class="line" data-startTime="1162">anybody knows what </span><span class="line" data-startTime="1162">page cycler is. </span> <span class="line" data-startTime="1164">Has this been covered earlier? </span><span class="line" data-startTime="1167">Have you guys been talking? </span><span class="line" data-startTime="1169">Wow, so this is a huge omission </span><span class="line" data-startTime="1169">obviously. </span> <span class="line" data-startTime="1171">Um...um... </span> <span class="line" data-startTime="1174">So page cyclers </span><span class="line" data-startTime="1174">are really cool things </span><span class="line" data-startTime="1176">that essentially it's a bunch </span><span class="line" data-startTime="1176">of HTML pages </span><span class="line" data-startTime="1179">that we run in succession. </span></p>

<p><span class="line" data-startTime="1182">And, um, then track </span><span class="line" data-startTime="1182">the time memory, </span><span class="line" data-startTime="1186">virtual bites used, </span><span class="line" data-startTime="1186">and things like that. </span> <span class="line" data-startTime="1187">And so it allows us </span><span class="line" data-startTime="1187">to quickly measure </span><span class="line" data-startTime="1190">if something's changed. </span> <span class="line" data-startTime="1192">So if there's a regression </span><span class="line" data-startTime="1192">then we have to go </span><span class="line" data-startTime="1196">and look at specific versions. </span> <span class="line" data-startTime="1197">Like for example, ooh, </span><span class="line" data-startTime="1198">this is a regression </span><span class="line" data-startTime="1198">right here. </span> <span class="line" data-startTime="1200">Let's see what changed it. </span> <span class="line" data-startTime="1200">Crap! </span><span class="line" data-startTime="1202">[laughs] </span><span class="line" data-startTime="1203">My name on it. </span> <span class="line" data-startTime="1205">This is just expectations. </span> <span class="line" data-startTime="1208">So there you go. </span> <span class="line" data-startTime="1209">Externalized strings </span><span class="line" data-startTime="1209">but not results, blah blah blah. </span> <span class="line" data-startTime="1212">Non strings. </span> <span class="line" data-startTime="1213">So something &mdash; you have to look &mdash; </span><span class="line" data-startTime="1213">oh, and me too. </span></p>

<p><span class="line" data-startTime="1216">Well anyway, </span><span class="line" data-startTime="1218">so any regressions you can </span><span class="line" data-startTime="1218">clearly see </span><span class="line" data-startTime="1220">what changes caused it. </span> <span class="line" data-startTime="1221">You can see what kind </span><span class="line" data-startTime="1221">of regression that is </span><span class="line" data-startTime="1223">by clicking shift. </span> <span class="line" data-startTime="1226">Shift. </span> <span class="line" data-startTime="1227">Um, no. </span> <span class="line" data-startTime="1232">Come on. </span> <span class="line" data-startTime="1233">All right, so apparently Safari </span><span class="line" data-startTime="1233">doesn't do that. </span> <span class="line" data-startTime="1236">But you usually can shift click </span><span class="line" data-startTime="1238">and you can then track down </span><span class="line" data-startTime="1238">and see what percentage </span><span class="line" data-startTime="1240">of regression that is... </span> <span class="line" data-startTime="1243">And you can see specific </span><span class="line" data-startTime="1243">revisions </span><span class="line" data-startTime="1245">that caused the failure. </span></p>

<p><span class="line" data-startTime="1247">And then what is </span><span class="line" data-startTime="1247">the orange line? </span><span class="line" data-startTime="1251">That's the reference build. </span> <span class="line" data-startTime="1253">What a reference build is </span><span class="line" data-startTime="1254">is that at some point in time </span><span class="line" data-startTime="1255">we took our build that we had </span><span class="line" data-startTime="1255">at the time </span><span class="line" data-startTime="1259">and put it in a separate </span><span class="line" data-startTime="1259">directory </span><span class="line" data-startTime="1261">and now we run it </span><span class="line" data-startTime="1263">every time we run </span><span class="line" data-startTime="1263">the reliability test </span><span class="line" data-startTime="1265">so that we know </span><span class="line" data-startTime="1265">that any fluctuation </span><span class="line" data-startTime="1269">in the tests are not caused </span><span class="line" data-startTime="1269">by some hardware changes </span><span class="line" data-startTime="1272">or the machine fell ill. </span> <span class="line" data-startTime="1274">You can see that if </span><span class="line" data-startTime="1274">the ref has not changed </span><span class="line" data-startTime="1278">but the, um, blue line </span><span class="line" data-startTime="1278">has changed, </span><span class="line" data-startTime="1280">that means that it's really </span><span class="line" data-startTime="1280">a regression. </span></p>

<p><span class="line" data-startTime="1282">Sometimes you would go </span><span class="line" data-startTime="1282">in the morning </span><span class="line" data-startTime="1284">and you will see all of them </span><span class="line" data-startTime="1284">go down </span><span class="line" data-startTime="1286">because Nikolai has rebooted </span><span class="line" data-startTime="1286">the machine </span><span class="line" data-startTime="1291">and suddenly it runs faster. </span> <span class="line" data-startTime="1292">But if both of them go </span><span class="line" data-startTime="1292">at the same distance, </span><span class="line" data-startTime="1294">you probably go, "Wow, that's </span><span class="line" data-startTime="1294">really not a regression </span><span class="line" data-startTime="1296">or anything." </span><span class="line" data-startTime="1297">So that's what reference build </span><span class="line" data-startTime="1297">is for. </span> <span class="line" data-startTime="1299">That's a great explanation. </span> <span class="line" data-startTime="1300">Sorry if I'm fumbling. </span> <span class="line" data-startTime="1302">But anyway, this is how </span><span class="line" data-startTime="1302">you usually look at WebKit </span><span class="line" data-startTime="1306">and see what you've done. </span> <span class="line" data-startTime="1309">If you're merging, this is one </span><span class="line" data-startTime="1309">of the greatest things </span><span class="line" data-startTime="1313">to watch for because even though </span><span class="line" data-startTime="1313">your layout tests </span><span class="line" data-startTime="1317">may be passing, </span><span class="line" data-startTime="1318">Dave Hyatt upstream may've </span><span class="line" data-startTime="1318">introduced some new code </span><span class="line" data-startTime="1321">that tremendously affects </span><span class="line" data-startTime="1321">painting for example. </span></p>

<p><span class="line" data-startTime="1324">And you will see regressions, </span><span class="line" data-startTime="1326">especially during HTML </span><span class="line" data-startTime="1328">[indistinct] </span><span class="line" data-startTime="1330">cycler that affects &mdash; that </span><span class="line" data-startTime="1330">involves a lot of repainting. </span> <span class="line" data-startTime="1334">So you can clearly see </span><span class="line" data-startTime="1334">that, oh, something happened. </span> <span class="line" data-startTime="1338">These 50 revisions of WebKit </span><span class="line" data-startTime="1339">caused us to regress 30%. </span> <span class="line" data-startTime="1341">Roll back. </span> <span class="line" data-startTime="1343">We usually just go </span><span class="line" data-startTime="1343">and look and see. </span> <span class="line" data-startTime="1345">One of the interesting things </span><span class="line" data-startTime="1347">is with sheriffing, </span><span class="line" data-startTime="1349">the sheriffs typically don't </span><span class="line" data-startTime="1349">roll back the merge. </span> <span class="line" data-startTime="1351">So if a specific individual </span><span class="line" data-startTime="1351">changed may be rolled back </span><span class="line" data-startTime="1355">but merge is really rolled back. </span> <span class="line" data-startTime="1357">So it may seem like </span><span class="line" data-startTime="1357">a good thing, </span><span class="line" data-startTime="1360">but actually it's a bad thing </span><span class="line" data-startTime="1360">because </span><span class="line" data-startTime="1362">it puts pressure on you </span><span class="line" data-startTime="1362">as a merger </span><span class="line" data-startTime="1364">to go and fix the regression </span><span class="line" data-startTime="1364">rather than &mdash; </span><span class="line" data-startTime="1366">because nobody wants </span><span class="line" data-startTime="1366">your regression, </span><span class="line" data-startTime="1368">and yet you must go on. </span></p>

<p><span class="line" data-startTime="1371">So it's &mdash; there you go. </span> <span class="line" data-startTime="1373">Uh, here's a simple sample. </span> <span class="line" data-startTime="1377">Simple sample. </span> <span class="line" data-startTime="1378">Bug-fix workflow for WebKit. </span> <span class="line" data-startTime="1382">Suppose you're fixing </span><span class="line" data-startTime="1382">a WebKit bug. </span> <span class="line" data-startTime="1384">This illustrates how inefficient </span><span class="line" data-startTime="1384">our system is </span><span class="line" data-startTime="1388">and how much we need </span><span class="line" data-startTime="1388">to unfork. </span> <span class="line" data-startTime="1389">So typically the way you do it </span><span class="line" data-startTime="1389">is like this. </span> <span class="line" data-startTime="1393">You get your bug fixed locally. </span> <span class="line" data-startTime="1394">Reviewed in LGTM. </span> <span class="line" data-startTime="1396">Then take that patch, </span><span class="line" data-startTime="1396">apply it to WebKit tree. </span> <span class="line" data-startTime="1399">Prepare patch. </span> <span class="line" data-startTime="1402">Then get it reviewed </span><span class="line" data-startTime="1402">on WebKit. </span> <span class="line" data-startTime="1405">And then submit for review &mdash; </span><span class="line" data-startTime="1407">then &mdash; then commit </span><span class="line" data-startTime="1407">if you have a commit access. </span></p>

<p><span class="line" data-startTime="1411">Couple things to mention </span><span class="line" data-startTime="1411">is that </span><span class="line" data-startTime="1413">the etiquette of bugzilla </span><span class="line" data-startTime="1417">is that when you attach </span><span class="line" data-startTime="1417">a patch, </span><span class="line" data-startTime="1419">don't designate </span><span class="line" data-startTime="1419">a specific person. </span> <span class="line" data-startTime="1421">Like, you know, </span><span class="line" data-startTime="1421">"Oh, Darin is a reviewer. </span> <span class="line" data-startTime="1423">I'm gonna ask him to review it." </span><span class="line" data-startTime="1425">This is considered like </span><span class="line" data-startTime="1425">a faux pas </span><span class="line" data-startTime="1430">from the WebKit perspective. </span> <span class="line" data-startTime="1433">They get angry with us </span><span class="line" data-startTime="1433">for some reason. </span> <span class="line" data-startTime="1435">So instead I suggest highly </span><span class="line" data-startTime="1435">to just CC Darin. </span> <span class="line" data-startTime="1440">And he will know. </span> <span class="line" data-startTime="1440">Stamped to review. </span> <span class="line" data-startTime="1444">So anyway, blah. </span></p>

<p><span class="line" data-startTime="1448">Are we recording this? </span><span class="line" data-startTime="1448">Scratch that. </span> <span class="line" data-startTime="1449">[laughs] </span><span class="line" data-startTime="1452">So, um... </span> <span class="line" data-startTime="1455">one of the hardest things </span><span class="line" data-startTime="1455">by far in WebKit </span><span class="line" data-startTime="1457">is code style. </span> <span class="line" data-startTime="1459">It's different. </span> <span class="line" data-startTime="1459">It's very different. </span> <span class="line" data-startTime="1461">Like there is no edit lines. </span> <span class="line" data-startTime="1463">The braces for methods </span><span class="line" data-startTime="1463">go on the new line. </span> <span class="line" data-startTime="1467">Four characters &mdash; four spaces </span><span class="line" data-startTime="1467">rather than two spaces. </span> <span class="line" data-startTime="1472">Lots of stuff like this. </span> <span class="line" data-startTime="1474">Naming members, </span><span class="line" data-startTime="1474">variables. </span> <span class="line" data-startTime="1475">And believe it or not, </span><span class="line" data-startTime="1475">for Googlers, </span><span class="line" data-startTime="1479">that was the hardest part. </span> <span class="line" data-startTime="1481">That always is. </span> <span class="line" data-startTime="1482">Because most of the time </span><span class="line" data-startTime="1482">your review comes back negative </span><span class="line" data-startTime="1484">only because of, you know, </span><span class="line" data-startTime="1484">the style violations. </span> <span class="line" data-startTime="1487">So if you've never written </span><span class="line" data-startTime="1487">C++ code before, </span><span class="line" data-startTime="1489">you're in luck. </span> <span class="line" data-startTime="1491">You could learn this. </span> <span class="line" data-startTime="1492">If you've been a Googler </span><span class="line" data-startTime="1492">for five years, </span><span class="line" data-startTime="1494">you're screwed. </span></p>

<p><span class="line" data-startTime="1497">Um, I have five minutes </span><span class="line" data-startTime="1497">so I'm gonna rush. </span> <span class="line" data-startTime="1501">So if you want to talk </span><span class="line" data-startTime="1501">to the browser </span><span class="line" data-startTime="1503">in your new code </span><span class="line" data-startTime="1503">like you're writing </span><span class="line" data-startTime="1504">web sockets </span><span class="line" data-startTime="1504">or something like this, </span><span class="line" data-startTime="1506">you need to use ChromiumBridge </span><span class="line" data-startTime="1510">or the new WebKit API </span><span class="line" data-startTime="1510">that Darin is cooking currently. </span> <span class="line" data-startTime="1513">Since it's in progress </span><span class="line" data-startTime="1513">you need to talk to him </span><span class="line" data-startTime="1516">before doing anything. </span> <span class="line" data-startTime="1517">Before even considering </span><span class="line" data-startTime="1517">design decisions </span><span class="line" data-startTime="1519">because he's the right guy </span><span class="line" data-startTime="1519">to discuss these things. </span> <span class="line" data-startTime="1522">Um, now, when you &mdash; </span><span class="line" data-startTime="1526">if you're considering </span><span class="line" data-startTime="1526">making changes to WebKit, </span><span class="line" data-startTime="1528">try to put your WebKit hat on </span><span class="line" data-startTime="1531">and think about it this way. </span> <span class="line" data-startTime="1533">This is not </span><span class="line" data-startTime="1533">a Chromium-specific change. </span></p>

<p><span class="line" data-startTime="1535">This is change that should </span><span class="line" data-startTime="1535">benefit WebKit as a whole. </span> <span class="line" data-startTime="1538">So try to avoid making changes </span><span class="line" data-startTime="1539">that are just for benefit </span><span class="line" data-startTime="1539">of WebKit. </span> <span class="line" data-startTime="1542">So if you're writing web sockets </span><span class="line" data-startTime="1543">or a new functionality </span><span class="line" data-startTime="1543">like html five forms, </span><span class="line" data-startTime="1546">think of it as this &mdash; </span><span class="line" data-startTime="1549">"I'm implementing it </span><span class="line" data-startTime="1549">for WebKit, not for Chromium." </span><span class="line" data-startTime="1552">Does that make sense? </span><span class="line" data-startTime="1553">And obviously be aware </span><span class="line" data-startTime="1553">of other ports. </span> <span class="line" data-startTime="1556">So try not to break Qt </span><span class="line" data-startTime="1556">or some other obscure ports </span><span class="line" data-startTime="1560">that are on the build bot. </span> <span class="line" data-startTime="1563">Becoming a committer </span><span class="line" data-startTime="1563">is an easy task. </span> <span class="line" data-startTime="1564">It's just ten patches. </span></p>

<p><span class="line" data-startTime="1566">And it's something </span><span class="line" data-startTime="1566">you definitely </span><span class="line" data-startTime="1567">should consider doing. </span> <span class="line" data-startTime="1568">It's very easy. </span> <span class="line" data-startTime="1571">A couple of upstreaming patches, </span><span class="line" data-startTime="1573">a couple of bug-fixes, </span><span class="line" data-startTime="1573">you're there. </span> <span class="line" data-startTime="1576">WebKit prides itself </span><span class="line" data-startTime="1576">on communication </span><span class="line" data-startTime="1578">so stay open, </span><span class="line" data-startTime="1578">participate. </span> <span class="line" data-startTime="1580">You guys in Japan </span><span class="line" data-startTime="1580">still might consider </span><span class="line" data-startTime="1584">going on WebKit, </span><span class="line" data-startTime="1584">you'll be surprised </span><span class="line" data-startTime="1586">that you'll find Apple engineers </span><span class="line" data-startTime="1586">working at that time </span><span class="line" data-startTime="1589">because they're really, </span><span class="line" data-startTime="1589">really weird hours. </span> <span class="line" data-startTime="1591">I mean, it's just unbelievable. </span> <span class="line" data-startTime="1593">And so any proposals, </span><span class="line" data-startTime="1593">any ideas? </span><span class="line" data-startTime="1596">Highly recommend to circulate </span><span class="line" data-startTime="1596">on webkit-dev </span><span class="line" data-startTime="1598">unless it involves </span><span class="line" data-startTime="1598">forking code. </span></p>

<p><span class="line" data-startTime="1601">In which case I highly recommend </span><span class="line" data-startTime="1601">talking to Ian first. </span> <span class="line" data-startTime="1605">And he will triage it </span><span class="line" data-startTime="1605">from there. </span> <span class="line" data-startTime="1608">And so... </span> <span class="line" data-startTime="1612">there you go. </span> <span class="line" data-startTime="1613">Any questions or comments? </span><span class="line" data-startTime="1620">Done! </span><span class="line" data-startTime="1622">[applause] </span></p></div>